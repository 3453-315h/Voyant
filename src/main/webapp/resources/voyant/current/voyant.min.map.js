{
"version":3,
"file":"voyant.min.map.js",
"lineCount":1456,
"mappings":"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",
"sources":["/resources/bubblelines/Bubblelines.js","/resources/knots/Knots.js","/resources/cirrus/html5/Cirrus.js","/resources/cirrus/html5/Word.js","/resources/cirrus/html5/WordController.js","/resources/doubletree/DoubleTree.js","/resources/doubletree/Trie.js","/resources/termsradio/TermsRadio.js","/app/util/Assignable.js","/app/util/Api.js","/app/util/Localization.js","/app/util/Colors.js","/app/util/Deferrable.js","/app/util/DetailedError.js","/app/util/ResponseError.js","/app/util/SparkLine.js","/app/util/Toolable.js","/app/util/Transferable.js","/app/util/Variants.js","/app/util/Downloadable.js","/app/util/Storage.js","/app/util/DiacriticsRemover.js","/app/notebook/util/Show.js","/app/notebook/util/Embed.js","/app/data/model/AnalysisToken.js","/app/data/model/Context.js","/app/data/model/CorpusFacet.js","/app/data/model/CorpusCollocate.js","/app/data/model/CorpusTerm.js","/app/data/model/CorpusNgram.js","/app/data/model/Dimension.js","/app/data/model/Document.js","/app/data/model/DocumentEntity.js","/app/data/model/DocumentQueryMatch.js","/app/data/model/DocumentTerm.js","/app/data/model/PrincipalComponent.js","/app/data/model/RelatedTerm.js","/app/data/model/StatisticalAnalysis.js","/app/data/model/Token.js","/app/data/model/TermCorrelation.js","/app/data/store/VoyantStore.js","/app/data/store/CAAnalysis.js","/app/data/store/Contexts.js","/app/data/store/CorpusCollocates.js","/app/data/store/CorpusFacets.js","/app/data/store/CorpusTerms.js","/app/data/store/DocumentQueryMatches.js","/app/data/store/DocumentTerms.js","/app/data/store/DocumentEntities.js","/app/data/store/Documents.js","/app/data/store/PCAAnalysis.js","/app/data/store/DocSimAnalysis.js","/app/data/store/CorpusNgrams.js","/app/data/store/RelatedTerms.js","/app/data/store/TermCorrelations.js","/app/data/store/Tokens.js","/app/data/store/TSNEAnalysis.js","/app/data/util/Table.js","/app/data/util/NetworkGraph.js","/app/data/util/Geonames.js","/app/data/model/Corpus.js","/app/widget/CodeEditor.js","/app/widget/CorpusSelector.js","/app/widget/ListEditor.js","/app/widget/StopListOption.js","/app/widget/QuerySearchField.js","/app/widget/TotalPropertyStatus.js","/app/widget/DocumentSelector.js","/app/widget/CorpusDocumentSelector.js","/app/widget/DownloadFilenameBuilder.js","/app/widget/DownloadFileFormat.js","/app/widget/DownloadOptions.js","/app/widget/FontFamilyOption.js","/app/widget/ColorPaletteOption.js","/app/widget/VoyantChart.js","/app/widget/LiveSearchGrid.js","/app/widget/ProgressMonitor.js","/app/widget/VoyantTableTransform.js","/app/widget/CategoriesBuilder.js","/app/widget/VoyantNetworkGraph.js","/app/widget/ReaderGraph.js","/app/panel/Panel.js","/app/panel/VoyantTabPanel.js","/app/widget/Facet.js","/app/panel/Bubbles.js","/app/panel/Bubblelines.js","/app/panel/Catalogue.js","/app/panel/Cirrus.js","/app/panel/CollocatesGraph.js","/app/panel/Contexts.js","/app/panel/CorpusCollocates.js","/app/panel/CorpusTermSummary.js","/app/panel/Correlations.js","/app/panel/CorpusCreator.js","/app/panel/DreamScape.js","/app/panel/Knots.js","/app/panel/Phrases.js","/app/panel/CorpusTerms.js","/app/panel/DocumentTerms.js","/app/panel/Documents.js","/app/panel/DocumentsFinder.js","/app/panel/Dummy.js","/app/panel/Fountain.js","/app/panel/RezoViz.js","/app/panel/Loom.js","/app/panel/MicroSearch.js","/app/panel/Mandala.js","/app/panel/MicroOcp.js","/app/panel/Reader.js","/app/panel/SimpleDocReader.js","/app/panel/ScatterPlot.js","/app/panel/StreamGraph.js","/app/panel/Summary.js","/app/panel/TextualArc.js","/app/panel/TopicContexts.js","/app/panel/TermsBerry.js","/app/panel/TermsRadio.js","/app/panel/Trends.js","/app/panel/NoTool.js","/app/panel/VoyantFooter.js","/app/panel/VoyantHeader.js","/app/panel/CorpusSet.js","/app/panel/ScatterSet.js","/app/panel/Subset.js","/app/panel/CollocatesSet.js","/app/panel/BubblelinesSet.js","/app/panel/CustomSet.js","/app/panel/Veliza.js","/app/panel/WordTree.js","/app/panel/WordWall.js","/app/panel/Topics.js","/app/panel/Via.js","/app/notebook/editor/button/Add.js","/app/notebook/editor/button/Edit.js","/app/notebook/editor/button/Export.js","/app/notebook/editor/button/Counter.js","/app/notebook/editor/button/MoveDown.js","/app/notebook/editor/button/MoveUp.js","/app/notebook/editor/button/Remove.js","/app/notebook/editor/button/Metadata.js","/app/notebook/editor/button/Movement.js","/app/notebook/editor/button/Run.js","/app/notebook/editor/button/RunAll.js","/app/notebook/editor/button/RunUntil.js","/app/notebook/editor/EditorWrapper.js","/app/notebook/editor/CodeEditor.js","/app/notebook/editor/CodeEditorWrapper.js","/app/notebook/editor/TextEditor.js","/app/notebook/editor/TextEditorWrapper.js","/app/notebook/storage/github/OctokitWrapper.js","/app/notebook/storage/github/ReposBrowser.js","/app/notebook/storage/github/FileSaver.js","/app/notebook/storage/github/GitHubDialogs.js","/app/notebook/storage/voyant/StorageDialogs.js","/app/notebook/Notebook.js","/app/VoyantApp.js","/app/VoyantCorpusApp.js","/app/VoyantCorpusToolsetApp.js","/app/VoyantDefaultApp.js","/app/VoyantDocumentToolsetApp.js","/app/VoyantNotebookApp.js","/app/VoyantToolApp.js"],
"sourcesContent":["function Bubblelines(config) {\r\n\tthis.container = config.container;\r\n\tthis.externalClickHandler = config.clickHandler;\r\n\t\r\n\tthis.INTERVAL = 50; // milliseconds between each redraw\r\n\tthis.DISMISS_DELAY = 2500; // milliseconds before tooltip auto hides\r\n\tthis.UNIFORM_LINE_LENGTH = true; // should all document lines be the same length?\r\n\tthis.SEPARATE_LINES_FOR_TERMS = false; // draw a separate line for each term?\r\n\t\r\n\t// these 2 get set in the code\r\n\tthis.MAX_LABEL_WIDTH = 0;\r\n\tthis.MAX_LINE_WIDTH = 0;\r\n\t\r\n\tthis.DRAW_TITLES = true; // where to draw the document titles for each graph; gets set to false if the corpus has only 1 document\r\n\tthis.DRAW_SHORT_TITLES = false; // whether to use the docIndex for the title or not; gets set to true if the window is small enough\r\n\t\r\n\tthis.MIN_GRAPH_SEPARATION = 50; // vertical separation between graphs\r\n\tthis.graphSeparation = 50;\r\n\t\r\n\tthis.yIndex = 0; // for tracking yIndex during the drawing process\r\n\t\r\n\tthis.mouseOver = false; // is the mouse over the canvas\r\n\tthis.intervalId = null;\r\n\tthis.clearToolTipId = null;\r\n\tthis.overBubbles = [];\r\n\tthis.lastClickedBubbles = {};\r\n\tthis.dragInfo = null;\r\n\tthis.canvas = null;\r\n\tthis.ctx = null;\r\n\tthis.maxDocLength = 2;\r\n\tthis.maxFreq = {term: null, value: 0};\r\n\tthis.maxRadius = 0;\r\n\t\r\n\t/**\r\n\t * The cache of docs. Each has the following properties:\r\n\t * @param {String} id\r\n\t * @param {String} title\r\n\t * @param {Integer} index\r\n\t * @param {Integer} totalTokens\r\n\t * @param {Object} terms Stores the terms for this doc\r\n\t * @param {Object} freqCounts Used for tool tip display\r\n\t * @param {Float} height The height of the graph for this doc\r\n\t * @param {Float} titleWidth The width of the title\r\n\t * @param {Float} lineLength The length of the graph line for this doc\r\n\t */\r\n\tthis.cache = new Ext.util.MixedCollection();\r\n\t\r\n\tthis.currentTerms = {}; // tracks what terms we're currently showing\r\n\tthis.termsFilter = []; // tracks the subset of terms\r\n\tthis.bubbleSpacing = 50;\r\n\r\n\tthis.initialized = false;\r\n}\r\n\r\nBubblelines.prototype = {\r\n\tconstructor: Bubblelines,\r\n\t\r\n\tinitializeCanvas: function() {\r\n\t\tvar container = this.container;\r\n\t\tvar height = container.getHeight();\r\n\t\tvar width = container.getWidth();\r\n\t\tthis.DRAW_SHORT_TITLES = width < 500;\r\n\t\tvar id = Ext.id('bubblelines');\r\n\t\tcontainer.add({\r\n\t\t\txtype: 'container',\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\thtml: '<canvas id=\"'+id+'\" width=\"'+width+'\" height=\"'+height+'\"></canvas>',\r\n\t\t\tborder: false,\r\n        \tlisteners: {\r\n        \t\tafterrender: {\r\n        \t\t\tfn: function(cnt) {\r\n    \t\t\t\t\tthis.canvas = document.getElementById(id);\r\n        \t\t\t\tthis.ctx = this.canvas.getContext('2d');\r\n        \t\t\t\tthis.canvas.addEventListener('click', this.clickHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mousedown', this.mouseDownHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mouseup', this.mouseUpHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mousemove', this.moveHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mouseenter', this.mouseEnterHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mouseleave', this.mouseLeaveHandler.bind(this), false);\r\n        \t\t\t\t            \t\t\t\t\r\n//        \t\t\t\tthis.findLongestDocumentTitle();\r\n//        \t\t\t\t\r\n//        \t\t\t\tvar padding = 75;\r\n//        \t\t\t\tif (this.DRAW_SHORT_TITLES) padding = 50;\r\n//        \t\t\t\tthis.setMaxLineWidth(width - this.MAX_LABEL_WIDTH - padding);\r\n        \t\t\t},\r\n        \t\t\tsingle: true,\r\n        \t\t\tscope: this\r\n        \t\t}\r\n        \t}\r\n\t\t});\r\n\t\tcontainer.updateLayout();\r\n\t\tthis.initialized = true;\r\n\t},\r\n\t\r\n\tdoBubblelinesLayout: function() {\r\n\t\tif (this.initialized) {\r\n\t\t\tvar width = this.container.getWidth();\r\n\t\t\t\r\n\t\t\t// width related calculations\r\n\t\t\tthis.DRAW_SHORT_TITLES = width < 500;\r\n\t\t\tthis.setTitleWidthsAndMaxTitleWidth();\r\n\t\t\t\r\n\t\t\tvar children = Ext.DomQuery.jsSelect('div:not(div[class*=term])', this.container.el.dom);\r\n\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\tvar child = Ext.fly(children[i]);\r\n\t\t\t\tchild.setWidth(width);\r\n\t\t\t}\r\n\t\t\tthis.canvas.width = width;\r\n\t\t\t\r\n\t\t\tvar padding = 75;\r\n\t\t\tif (this.DRAW_SHORT_TITLES) padding = 50;\r\n\t\t\tthis.setMaxLineWidth(width - this.MAX_LABEL_WIDTH - padding);\r\n\t\t\tthis.setLineLengths();\r\n\t\t\t\r\n\t\t\tthis.recache();\r\n\t\t\t\r\n\t\t\t// height related calculations\r\n\t\t\tthis.setCanvasHeight();\r\n\t\t\t\r\n\t\t\tthis.drawGraph();\r\n\t\t}\r\n\t},\r\n\t\r\n\taddDocToCache: function(doc) {\r\n\t\tthis.cacheBubbles(doc);\r\n\t\tthis.calculateBubbleRadii(doc);\r\n\t\tdoc.lineLength = 600;\r\n\t\tdoc.freqCounts = {}; // used for tool tip display\r\n\t\tif (this.cache.containsKey(doc.id) === false) {\r\n\t\t\tthis.cache.add(doc);\r\n\t\t} else {\r\n\t\t\tthis.cache.replace(doc.id, doc);\r\n\t\t}\r\n\t\tthis.cache.sort('index', 'ASC');\r\n\t},\r\n\t\r\n\taddTermsToDoc: function(termsObj, docId) {\r\n\t\tvar term;\r\n\t\t// only one key\r\n\t\tfor (var key in termsObj) {\r\n\t\t\tterm = key;\r\n\t\t}\r\n\t\tthis.currentTerms[term] = true;\r\n\t\t\r\n\t\tvar doc = this.cache.get(docId);\r\n\t\tExt.apply(doc.terms, termsObj);\r\n\t\tvar maxFreqChanged = this.cacheBubbles(doc);\r\n\t\tif (maxFreqChanged) {\r\n\t\t\tthis.recache();\r\n\t\t} else {\r\n\t\t\tthis.calculateBubbleRadii(doc);\r\n\t\t}\r\n\t},\r\n\t\r\n\tcacheBubbles: function(doc) {\r\n\t\tvar maxFreqChanged = false;\r\n\t\tfor (var term in doc.terms) {\r\n\t\t\tvar termInfo = doc.terms[term];\r\n\t\t\tvar bins = termInfo.distributions.length;\r\n\t\t\tvar spacing = doc.lineLength / bins;\r\n\t\t\t\r\n\t\t\tvar cachedPositions = [];\r\n\t\t\tvar tokenPos = 0;\r\n\t\t\tvar maxDistribution = 0;\r\n\t\t\tvar xIndex = 0;\r\n\t\t\tfor (var i = 0; i < bins; i++) {\r\n\t\t\t\tvar d = termInfo.distributions[i];\r\n\t\t\t\tif (d > maxDistribution) {\r\n\t\t\t\t\tmaxDistribution = d;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcachedPositions.push({id: Ext.id(null, 'bub'), x: xIndex, freq: d, radius: 0, bin: i, tokenPositions: termInfo.positions.slice(tokenPos, tokenPos+=d)});\r\n\t\t\t\txIndex += spacing;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdoc.terms[term].maxDistribution = maxDistribution;\r\n\t\t\tdoc.terms[term].pos = cachedPositions;\r\n\t\t\t\r\n\t\t\tif (maxDistribution > this.maxFreq.value) {\r\n\t\t\t\tmaxFreqChanged = true;\r\n\t\t\t\tthis.setMaxFreq({term: term, value: maxDistribution});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn maxFreqChanged;\r\n\t},\r\n\t\r\n\tcalculateBubbleRadii: function(doc, newTerm) {\r\n\t\tvar maxFreqLog = Math.log(this.maxFreq.value);\r\n\t\tvar minFreq = Math.log(2) / 2;\r\n//\t\tthis.cache.each(function(doc) {\r\n\t\t\tfor (var t in doc.terms) {\r\n\t\t\t\tvar term = doc.terms[t];\r\n\t\t\t\tif (term) {\r\n\t\t\t\t\tif (newTerm == null || t == newTerm) {\r\n\t\t\t\t\t\tfor (var i = 0; i < term.pos.length; i++) {\r\n\t\t\t\t\t\t\tvar bubble = term.pos[i];\r\n\t\t\t\t\t\t\tif (bubble.freq > 0) {\r\n\t\t\t\t\t\t\t\tvar freqLog = Math.max(Math.log(bubble.freq), minFreq);\r\n\t\t\t\t\t\t\t\tvar radius = freqLog / maxFreqLog * this.maxRadius;\r\n\t\t\t\t\t\t\t\tbubble.radius = radius;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tbubble.radius = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n//\t\t}, this);\r\n\t},\r\n\t\r\n\t\r\n\trecache: function() {\r\n\t\tfunction doCache(doc) {\r\n\t\t\tthis.cacheBubbles(doc);\r\n\t\t\tthis.calculateBubbleRadii(doc);\r\n\t\t}\r\n\t\t\r\n\t\tthis.cache.each(doCache, this);\r\n\t},\r\n\t\r\n\t/**\r\n\t * Get the total height of the all the graphs\r\n\t */\r\n\tgetTotalHeight: function() {\r\n\t\tvar totalHeight = this.maxRadius;\r\n\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\ttotalHeight += doc.height;\r\n\t\t}, this);\r\n\t\treturn totalHeight;\r\n\t},\r\n\t\r\n\r\n\t/**\r\n\t * Set the height for the canvas and associated elements\r\n\t */\r\n\tsetCanvasHeight: function() {\r\n\t\tthis.calculateGraphHeights();\r\n\t\tvar height = this.getTotalHeight();\r\n\t\tvar container = this.container.dom;\r\n\t\tif (container !== undefined) {\r\n\t\t\tvar children = Ext.DomQuery.jsSelect('div', container);\r\n\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\tvar child = Ext.fly(children[i]);\r\n\t\t\t\tchild.setHeight(height);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.canvas) {\r\n\t\t\tthis.canvas.height = height;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t * Set max line width as well as maxRadius\r\n\t */\r\n\tsetMaxLineWidth: function(width) {\r\n\t\tthis.maxRadius = width / 30;\r\n\t\tthis.MAX_LINE_WIDTH = width - this.maxRadius / 2;\r\n\t},\r\n\t\r\n\t/**\r\n\t * Calculate graph heights, based on maxRadius\r\n\t */\r\n\tcalculateGraphHeights: function() {\r\n\t\tvar graphSeparation = this.maxRadius * 0.5;\r\n\t\tif (this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\tvar terms = this.termsFilter;\r\n\t\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\t\tvar height = this.maxRadius * terms.length;\r\n\t\t\t\tfor (var i = 0; i < terms.length; i++) {\r\n\t\t\t\t\tif (!doc.terms[terms[i]]) {\r\n\t\t\t\t\t\theight -= this.maxRadius;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (height == 0) height = this.maxRadius;\r\n\t\t\t\t\r\n\t\t\t\tdoc.height = height + graphSeparation;\r\n\t\t\t}, this);\r\n\t\t} else {\r\n\t\t\tvar height = Math.max(this.maxRadius, this.MIN_GRAPH_SEPARATION);\r\n\t\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\t\tdoc.height = height + graphSeparation;\r\n\t\t\t}, this);\r\n\t\t}\r\n\t},\r\n\t\r\n\tfindLongestDocument: function(doc) {\r\n\t\tvar twt = doc.getTotalWordTokens();\r\n\t\tif (twt > this.maxDocLength) {\r\n\t\t\tthis.maxDocLength = twt;\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetTitleWidth: function(doc) {\r\n\t\tvar title = doc.title;\r\n\t\tif (this.DRAW_SHORT_TITLES) {\r\n\t\t\tvar index = this.cache.indexOf(doc);\r\n\t\t\ttitle = (index+1)+')';\r\n\t\t}\r\n\t\tthis.ctx.textBaseline = 'top';\r\n\t\tthis.ctx.font = 'bold 12px Verdana';\r\n\t\tvar width = this.ctx.measureText(title).width;\r\n\t\treturn width;\r\n\t},\r\n\t\r\n\tsetTitleWidthsAndMaxTitleWidth: function() {\r\n\t\tfunction doTitle(doc, index) {\r\n\t\t\tvar width = this.getTitleWidth(doc);\r\n\t\t\tdoc.titleWidth = width;\r\n\t\t\tif (width > this.MAX_LABEL_WIDTH) {\r\n\t\t\t\tthis.MAX_LABEL_WIDTH = width;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.cache.each(doTitle, this);\r\n\t},\r\n\t\r\n\tsetLineLengths: function() {\r\n\t\tfunction doLength(doc, index) {\r\n\t\t\tvar lineLength;\r\n\t\t\tif (this.UNIFORM_LINE_LENGTH) {\r\n\t\t\t\tlineLength = this.MAX_LINE_WIDTH;\r\n\t\t\t} else {\r\n\t\t\t\tvar percentage = Math.log(doc.getTotalWordTokens()) / Math.log(this.maxDocLength);\r\n\t\t\t\tlineLength = percentage * this.MAX_LINE_WIDTH;\r\n\t\t\t}\r\n\t\t\tdoc.lineLength = lineLength;\r\n\t\t}\r\n\t\t\r\n\t\tthis.cache.each(doLength, this);\r\n\t},\r\n\t\r\n\tdrawGraph: function(includeLegend) {\r\n\t\tif (this.intervalId != null) clearInterval(this.intervalId);\r\n\t\t\r\n\t\tif (this.mouseOver) {\r\n\t\t\tthis.intervalId = setInterval(this.doDraw.bind(this, [includeLegend]), this.INTERVAL);\r\n\t\t} else {\r\n\t\t\tsetTimeout(this.doDraw.bind(this, [includeLegend]), 5);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdoDraw: function(includeLegend) {\r\n\t\tthis.clearCanvas();\r\n\t\tthis.yIndex = this.maxRadius;\r\n\t\tif (includeLegend === true) this.yIndex += 30;\r\n\t\tthis.cache.each(this.drawDocument, this);\r\n\t\tif (includeLegend === true) this.drawLegend();\r\n\t\telse this.drawToolTip();\r\n\t\tthis.doDrag();\r\n\t},\r\n\t\r\n\tdrawDocument: function(doc, index, totalDocs) {\r\n\t\tif (!doc.hidden) {\r\n\t\t\tvar lineLength = doc.lineLength;\r\n\t\t\tvar titleIndent = this.MAX_LABEL_WIDTH - doc.titleWidth;\r\n\t\t\t\r\n\t\t\tvar xIndex = 5;\r\n\t\t\t\r\n\t\t\tthis.ctx.textBaseline = 'top';\r\n\t\t\tthis.ctx.font = 'bold 12px Verdana';\r\n\t\t\t\r\n\t\t\tif (this.dragInfo != null && this.dragInfo.oldIndex == index) {\r\n\t\t\t\tthis.ctx.fillStyle = 'rgba(128, 128, 128, 0.5)';\r\n\t\t\t\txIndex += titleIndent;\r\n\t\t\t\tthis.ctx.fillText(doc.title, xIndex, this.yIndex);\r\n\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\tthis.yIndex += doc.height;\r\n\t\t\t\t}\r\n\t\t\t} else {\t\t\t\r\n\t\t\t\t// draw label\r\n\t\t\t\tif (this.DRAW_TITLES) {\r\n\t\t\t\t\txIndex += titleIndent;\r\n\t//\t\t\t\tvar c = this.getColor(this.getApplication().getCorpus().getDocument(doc.id).getIndex());\r\n\t//\t\t\t\tthis.ctx.strokeStyle = 'rgba('+c[0]+', '+c[1]+', '+c[2]+', 1.0)';\r\n\t//\t\t\t\tthis.ctx.lineWidth = 2;\r\n\t//\t\t\t\tthis.ctx.beginPath();\r\n\t//\t\t\t\tthis.ctx.moveTo(xIndex, this.yIndex+12);\r\n\t//\t\t\t\tthis.ctx.lineTo(this.MAX_LABEL_WIDTH, this.yIndex+12);\r\n\t//\t\t\t\tthis.ctx.stroke();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.ctx.fillStyle = 'rgba(128, 128, 128, 1.0)';\r\n\t\t\t\t\tvar title = doc.title;\r\n\t\t\t\t\tif (this.DRAW_SHORT_TITLES) title = (index+1)+')';\r\n\t\t\t\t\tthis.ctx.fillText(title, xIndex, this.yIndex);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t//\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 128, 1.0)';\r\n\t//\t\t\tthis.ctx.fillRect(0, this.yIndex-this.maxRadius*0.75, 250, 2);\r\n\t\t\t\t\r\n\t\t\t\t// shift down slightly to vertically align line and bubbles with label\r\n\t\t\t\tthis.yIndex += 4;\r\n\t\t\t\t\r\n\t\t\t\t// draw line\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tfunction drawLine() {\r\n\t\t\t\t\txIndex = that.MAX_LABEL_WIDTH + that.maxRadius;\r\n\t\t\t\t\tthat.ctx.strokeStyle = 'rgba(128, 128, 128, 1.0)';\r\n\t\t\t\t\tthat.ctx.fillStyle = 'rgba(128, 128, 128, 1.0)';\r\n\t\t\t\t\tthat.ctx.lineWidth = 0.25;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthat.ctx.beginPath();\r\n\t\t\t\t\tthat.ctx.moveTo(xIndex, that.yIndex-6);\r\n\t\t\t\t\tthat.ctx.lineTo(xIndex, that.yIndex+6);\r\n\t\t\t\t\tthat.ctx.stroke();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthat.ctx.beginPath();\r\n\t\t\t\t\tthat.ctx.moveTo(xIndex, that.yIndex);\r\n\t\t\t\t\tthat.ctx.lineTo(xIndex + lineLength, that.yIndex);\r\n\t\t\t\t\tthat.ctx.stroke();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthat.ctx.beginPath();\r\n\t\t\t\t\tthat.ctx.moveTo(xIndex + lineLength, that.yIndex-6);\r\n\t\t\t\t\tthat.ctx.lineTo(xIndex + lineLength, that.yIndex+6);\r\n\t\t\t\t\tthat.ctx.stroke();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t//\t\t\tvar filter = this.getApiParamValue('typeFilter');\r\n\t//\t\t\tvar filter = [];\r\n\t//\t\t\tfor (var term in this.currentTerms) {\r\n\t//\t\t\t\tfilter.push(term);\r\n\t//\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\tdrawLine();\r\n\t\t\t\t} else if (this.termsFilter == null || this.termsFilter.length === 0) {\r\n\t\t\t\t\tdrawLine();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// draw bubbles\r\n\t\t\t\tvar pi2 = Math.PI * 2;\r\n\t\t\t\t\r\n\t\t\t\tvar freqTotal = 0;\r\n\t\t\t\tdoc.freqCounts = {};\r\n\t\t\t\tvar terms = doc.terms;\r\n\t\t\t\tvar checkClickedBubbles = this.lastClickedBubbles[index] != null;\r\n\t\t\t\tvar termsDrawn = 0;\r\n\t\t\t\tfor (var t in terms) {\r\n\t\t\t\t\tif (this.termsFilter.indexOf(t) !== -1) {\r\n\t\t\t\t\t\tvar info = terms[t];\r\n\t\t\t\t\t\tif (info) {\r\n\t\t\t\t\t\t\ttermsDrawn++;\r\n\t\t\t\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\t\t\t\tdrawLine();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar freqForType = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar c = info.color.join(',');\r\n\t\t\t\t\t\t\tthis.ctx.strokeStyle = 'rgba('+c+', 1)';\r\n\t\t\t\t\t\t\tthis.ctx.fillStyle = 'rgba('+c+', 0.35)';\r\n\t\t\t\t\t\t\tthis.ctx.lineWidth = 0.25;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfreqTotal += info.rawFreq;\r\n\t\t\t\t\t\t\tfreqForType += info.rawFreq;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar checkCurrentType = checkClickedBubbles && this.lastClickedBubbles[index][t];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor (var i = 0; i < info.pos.length; i++) {\r\n\t\t\t\t\t\t\t\tvar b = info.pos[i];\r\n\t\t\t\t\t\t\t\tif (b.radius > 0) {\r\n\t\t\t\t\t\t\t\t\tvar doClickedBubble = false;\r\n\t\t\t\t\t\t\t\t\tif (checkCurrentType && this.lastClickedBubbles[index][t] == b.id) {\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.strokeStyle = 'rgba(0, 0, 0, 0.75)';\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.fillStyle = 'rgba('+c+', 0.5)';\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.lineWidth = 1;\r\n\t\t\t\t\t\t\t\t\t\tdoClickedBubble = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthis.ctx.beginPath();\r\n\t\t\t\t\t\t\t\t\tthis.ctx.arc(b.x+xIndex, this.yIndex, b.radius, 0, pi2, true);\r\n\t\t\t\t\t\t\t\t\tthis.ctx.closePath();\r\n\t\t\t\t\t\t\t\t\tthis.ctx.fill();\r\n\t\t\t\t\t\t\t\t\tthis.ctx.stroke();\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (doClickedBubble) {\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.strokeStyle = 'rgba('+c+', 1)';\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.fillStyle = 'rgba('+c+', 0.35)';\r\n\t\t\t\t\t\t\t\t\t\tthis.ctx.lineWidth = 0.25;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdoc.freqCounts[t] = freqForType;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 1.0)';\r\n\t\t\t\t\t\t\t\tthis.ctx.font = '10px Verdana';\r\n\t\t\t\t\t\t\t\tthis.ctx.fillText(freqForType, xIndex + lineLength + 5, this.yIndex-4);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.yIndex += this.maxRadius;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS && termsDrawn == 0) {\r\n\t\t\t\t\tdrawLine();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 1.0)';\r\n\t\t\t\t\tthis.ctx.font = '10px Verdana';\r\n\t\t\t\t\tthis.ctx.fillText(0, xIndex + lineLength + 5, this.yIndex-4);\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.yIndex += this.maxRadius;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\txIndex += lineLength;\r\n\t\t\t\t\r\n\t\t\t\tif (!this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 1.0)';\r\n\t\t\t\t\tthis.ctx.font = '10px Verdana';\r\n\t\t\t\t\tthis.ctx.fillText(freqTotal, xIndex + 5, this.yIndex-4);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\tthis.yIndex += doc.height;\r\n\t\t\t} else {\r\n\t\t\t\tthis.yIndex += this.maxRadius * 0.5;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// undo previous shift\r\n\t\t\tthis.yIndex -= 4;\r\n\t\t\t\r\n\t//\t\tthis.ctx.fillStyle = 'rgba(128, 0, 0, 1.0)';\r\n\t//\t\tthis.ctx.fillRect(0, this.yIndex-this.maxRadius*0.75, 350, 2);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawLegend: function() { // obsolete code?\r\n\t\tvar x = this.MAX_LABEL_WIDTH + this.maxRadius;\r\n\t\tvar y = 5;\r\n\t\tthis.ctx.textBaseline = 'top';\r\n\t\tthis.ctx.font = '16px serif';\r\n\t\tif (this.typeStore) {\r\n\t\t\tthis.typeStore.each(function(record) {\r\n\t\t\t\tvar color = record.get('color').join(',');\r\n\t\t\t\tthis.ctx.fillStyle = 'rgb('+color+')';\r\n\t\t\t\tvar type = record.get('type');\r\n\t\t\t\tthis.ctx.fillText(type, x, y);\r\n\t\t\t\tvar width = this.ctx.measureText(type).width;\r\n\t\t\t\tx += width + 8;\r\n\t\t\t}, this);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawToolTip: function() {\r\n\t\tif (this.overBubbles.length > 0) {\r\n\t\t\tthis.ctx.lineWidth = 0.5;\r\n\t\t\tthis.ctx.fillStyle = 'rgba(224, 224, 224, 0.8)';\r\n\t\t\tthis.ctx.strokeStyle = 'rgba(0, 0, 0, 0.8)';\r\n\t\t\t\r\n\t\t\tvar x = this.overBubbles[0].x;\r\n\t\t\tvar y = this.overBubbles[0].y;\r\n\t\t\tvar width = 110;\r\n\t\t\tif (x + width > this.canvas.width) {\r\n\t\t\t\tx -= width;\r\n\t\t\t}\r\n\t\t\tvar height;\r\n\t\t\tvar summary = this.overBubbles[0].label == null;\r\n\t\t\tif (summary) {\r\n\t\t\t\tvar doc = this.cache.get(this.overBubbles[0].docIndex);\r\n\t\t\t\tvar count = 1;\r\n\t\t\t\tfor (var t in doc.freqCounts) {\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t\theight = count * 16;// + 10;\r\n\t\t\t\tif (y + height > this.canvas.height) {\r\n\t\t\t\t\ty -= height;\r\n\t\t\t\t}\r\n\t\t\t\tthis.ctx.fillRect(x, y, width, height);\r\n\t\t\t\tthis.ctx.strokeRect(x, y, width, height);\r\n\t\t\t\tx += 10;\r\n\t\t\t\ty += 10;\r\n\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\r\n\t\t\t\tthis.ctx.font = '10px Verdana';\r\n//\t\t\t\tvar total = 0;\r\n\t\t\t\tfor (var t in doc.freqCounts) {\r\n\t\t\t\t\tvar freq = doc.freqCounts[t];\r\n//\t\t\t\t\ttotal += freq;\r\n\t\t\t\t\tthis.ctx.fillText(t+': '+freq, x, y, 90);\r\n\t\t\t\t\ty += 16;\r\n\t\t\t\t}\r\n//\t\t\t\tthis.ctx.fillText(this.localize('total')+': '+total, x, y, 90);\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\theight = this.overBubbles.length * 16 + 10;\r\n\t\t\t\tif (y + height > this.canvas.height) {\r\n\t\t\t\t\ty -= height;\r\n\t\t\t\t}\r\n\t\t\t\tthis.ctx.fillRect(x, y, width, height);\r\n\t\t\t\tthis.ctx.strokeRect(x, y, width, height);\r\n\t\t\t\tx += 10;\r\n\t\t\t\ty += 10;\r\n\t\t\t\tthis.ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\r\n\t\t\t\tthis.ctx.font = '10px Verdana';\r\n\t\t\t\tfor (var i = 0; i < this.overBubbles.length; i++) {\r\n\t\t\t\t\tvar b = this.overBubbles[i];\r\n\t\t\t\t\tthis.ctx.fillText(b.label+': '+b.freq, x, y, 90);\r\n\t\t\t\t\ty += 16;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this.clearToolTipId == null) {\r\n\t\t\t\tthis.clearToolTipId = setTimeout(this.clearToolTip.bind(this), this.DISMISS_DELAY);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tclearToolTip: function() {\r\n\t\tthis.overBubbles = [];\r\n\t\tclearTimeout(this.clearToolTipId);\r\n\t\tthis.clearToolTipId = null;\r\n\t},\r\n\t\r\n\tmouseEnterHandler: function(event) {\r\n\t\tthis.mouseOver = true;\r\n\t\tthis.drawGraph();\r\n\t},\r\n\t\r\n\tmouseLeaveHandler: function(event) {\r\n\t\tthis.mouseOver = false;\r\n\t\tif (this.intervalId != null) clearInterval(this.intervalId);\r\n\t\t// draw once to remove any popup\r\n\t\tthis.overBubbles = [];\r\n\t\tthis.drawGraph();\r\n\t},\r\n\t\r\n\tmoveHandler: function(event) {\r\n\t\tthis.clearToolTip();\r\n\t\t\r\n\t\tthis.overBubbles = [];\r\n\t\tvar x = event.layerX - this.MAX_LABEL_WIDTH;\r\n\t\tvar y = event.layerY;\r\n\t\t\r\n\t\tvar docHeight = this.maxRadius*0.25; // where the first graph actually starts\r\n\t\t\r\n\t\tvar docIndex = -1;\r\n\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\tif (y < docHeight) {\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tdocHeight += doc.height;\r\n\t\t\t\tif (y < docHeight) {\r\n\t\t\t\t\tdocIndex = index;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\t\r\n\t\tif (this.dragInfo != null) {\r\n\t\t\tthis.dragInfo.x = event.layerX;\r\n\t\t\tthis.dragInfo.y = y;\r\n\r\n\t\t\tif (docIndex >= this.cache.getCount()) {\r\n\t\t\t\tdocIndex = this.cache.getCount()-1;\r\n\t\t\t} else if (docIndex < 0) {\r\n\t\t\t\tif (y + this.maxRadius > this.canvas.height) {\r\n\t\t\t\t\tdocIndex = this.cache.getCount()-1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.dragInfo.newIndex = docIndex;\r\n\t\t\tdocument.body.style.cursor = 'move';\r\n\t\t} else {\r\n\t\t\tif (docIndex >= 0 && docIndex < this.cache.getCount()) {\r\n\t\t\t\tif (x >= 0) {\r\n\t\t\t\t\tvar showPointer = false;\r\n\t\t\t\t\tx -= this.maxRadius; // re-adjust x to the start of the doc line \r\n\t\t\t\t\tvar hits = [];\r\n\t\t\t\t\tvar doc = this.cache.get(docIndex);\r\n\t\t\t\t\tif (x >= doc.lineLength) {\r\n\t\t\t\t\t\tthis.overBubbles = [{\r\n\t\t\t\t\t\t\tdocIndex: docIndex,\r\n\t\t\t\t\t\t\tx: event.layerX+10,\r\n\t\t\t\t\t\t\ty: event.layerY+10\r\n\t\t\t\t\t\t}];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar spacing = doc.lineLength / this.bubbleSpacing;\r\n\t\t\t\t\t\tvar xIndex = Math.round(x / spacing);\r\n\t\t\t\t\t\tvar prevDocHeight = this.maxRadius;\r\n\t\t\t\t\t\tif (docIndex > 0) {\r\n\t\t\t\t\t\t\tprevDocHeight = docHeight - (this.cache.get(docIndex).height - this.maxRadius*0.75);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar yIndex = Math.round((y - prevDocHeight) / this.maxRadius);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar count = 0;\r\n\t\t\t\t\t\tfor (var t in doc.terms) {\r\n\t\t\t\t\t\t\tif (this.termsFilter.indexOf(t) !== -1) {\r\n\t\t\t\t\t\t\t\tvar type = doc.terms[t];\r\n\t\t\t\t\t\t\t\tif (type) {\r\n\t\t\t\t\t\t\t\t\tif (this.SEPARATE_LINES_FOR_TERMS && count == yIndex || !this.SEPARATE_LINES_FOR_TERMS) {\r\n\t\t\t\t\t\t\t\t\t\tif (type.pos[xIndex] && type.pos[xIndex].radius > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tshowPointer = true;\r\n\t\t\t\t\t\t\t\t\t\t\tthis.overBubbles.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: t,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: type,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdocId: doc.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdocIndex: docIndex,\r\n\t\t\t\t\t\t\t\t\t\t\t\txIndex: xIndex,\r\n\t\t\t\t\t\t\t\t\t\t\t\tyIndex: yIndex,\r\n\t\t\t\t\t\t\t\t\t\t\t\tfreq: type.pos[xIndex].freq,\r\n\t\t\t\t\t\t\t\t\t\t\t\tid: type.pos[xIndex].id,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttokenPositions: type.pos[xIndex].tokenPositions,\r\n\t\t\t\t\t\t\t\t\t\t\t\tx: event.layerX+10,\r\n\t\t\t\t\t\t\t\t\t\t\t\ty: event.layerY+10\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (this.SEPARATE_LINES_FOR_TERMS) count--;\r\n\t\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (showPointer) {\r\n\t\t\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.body.style.cursor = 'auto';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocument.body.style.cursor = 'move';\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdocument.body.style.cursor = 'auto';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tmouseDownHandler: function(event) {\r\n\t\tvar x = event.layerX;\r\n\t\tvar y = event.layerY;\r\n\t\tif (x < this.MAX_LABEL_WIDTH) {\r\n\t\t\t\r\n\t\t\tvar docHeight = this.maxRadius*0.25;\r\n\t\t\tvar docIndex = -1;\r\n\t\t\tthis.cache.each(function(doc, index, length) {\r\n\t\t\t\tif (y < docHeight) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocHeight += doc.height;\r\n\t\t\t\t\tif (y < docHeight) {\r\n\t\t\t\t\t\tdocIndex = index;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\r\n\t\t\tif (docIndex >= 0 && docIndex < this.cache.getCount()) {\r\n\t\t\t\tvar xOffset = x - 5;\r\n\t\t\t\tvar yOffset = 5;\r\n\t\t\t\tthis.dragInfo = {\r\n\t\t\t\t\toldIndex: docIndex,\r\n\t\t\t\t\tnewIndex: docIndex,\r\n\t\t\t\t\txOffset: xOffset,\r\n\t\t\t\t\tyOffset: yOffset,\r\n\t\t\t\t\tx: x,\r\n\t\t\t\t\ty: y\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tmouseUpHandler: function(event) {\r\n\t\tthis.dragInfo = null;\r\n\t},\r\n\t\r\n\tdoDrag: function() {\r\n\t\tif (this.dragInfo != null) {\r\n\t\t\tvar ordering = {};\r\n\t\t\tfor (var i = 0; i < this.cache.getCount(); i++) {\r\n\t\t\t\tif (i < this.dragInfo.oldIndex && i < this.dragInfo.newIndex) {\r\n\t\t\t\t\tordering[i] = i;\r\n\t\t\t\t} else if (i < this.dragInfo.oldIndex && i >= this.dragInfo.newIndex) {\r\n\t\t\t\t\tordering[i] = i + 1;\r\n\t\t\t\t} else if (i == this.dragInfo.oldIndex) {\r\n\t\t\t\t\tordering[i] = this.dragInfo.newIndex;\r\n\t\t\t\t} else if (i > this.dragInfo.oldIndex && i > this.dragInfo.newIndex) {\r\n\t\t\t\t\tordering[i] = i;\r\n\t\t\t\t} else if (i > this.dragInfo.oldIndex && i <= this.dragInfo.newIndex) {\r\n\t\t\t\t\tordering[i] = i - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.dragInfo.oldIndex = this.dragInfo.newIndex;\r\n\t\t\t\r\n\t\t\tthis.cache.reorder(ordering);\r\n\t\t\t\r\n\t\t\tvar doc = this.cache.get(this.dragInfo.oldIndex);\r\n\t\t\tthis.ctx.fillStyle = 'rgba(128, 128, 128, 1)';\r\n\t\t\tthis.ctx.textBaseline = 'top';\r\n\t\t\tthis.ctx.font = 'bold 12px Verdana';\r\n\r\n\t\t\tthis.ctx.fillText(doc.title, this.dragInfo.x - this.dragInfo.xOffset, this.dragInfo.y - this.dragInfo.yOffset);\r\n\t\t}\r\n\t},\r\n\t\r\n\tclickHandler: function(event) {\r\n\t\tthis.lastClickedBubbles = {};\r\n\t\tif (this.overBubbles.length > 0 && this.overBubbles[0].label) {\r\n\t\t\tvar hits = [];\r\n\t\t\tvar tokenPositions = [];\r\n\t\t\tvar termData = [];\r\n\t\t\tfor (var i = 0; i < this.overBubbles.length; i++) {\r\n\t\t\t\tvar b = this.overBubbles[i];\r\n\t\t\t\t\r\n\t\t\t\ttermData.push({term: b.label, docIndex: b.docIndex, docId: b.docId, tokenPositions: b.tokenPositions});\r\n\t\t\t\t\r\n\t\t\t\tif (this.lastClickedBubbles[b.docIndex] == null) {\r\n\t\t\t\t\tthis.lastClickedBubbles[b.docIndex] = {};\r\n\t\t\t\t}\r\n\t\t\t\tthis.lastClickedBubbles[b.docIndex][b.label] = b.id;\r\n\t\t\t\thits.push(b.docId+':'+b.label);\r\n\t\t\t\ttokenPositions.push(b.tokenPositions);\r\n\t\t\t}\r\n\t\t\ttokenPositions = Ext.flatten(tokenPositions);\r\n\t\t\ttokenPositions.sort();\r\n\t\t\t\r\n\t\t\tif (this.externalClickHandler !== undefined) {\r\n\t\t\t\tthis.externalClickHandler(termData);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.overBubbles = [];\r\n\t},\r\n\t\r\n\tsetMaxFreq: function(maxObj) {\r\n\t\tif (maxObj == null) {\r\n\t\t\tmaxObj = this.findMaxFreq();\r\n\t\t}\r\n\t\tthis.maxFreq = maxObj;\r\n\t},\r\n\t\r\n\tfindMaxFreq: function() {\r\n\t\tvar max = {term: '', value: 0};\r\n\t\tthis.cache.each(function(doc) {\r\n\t\t\tfor (var t in doc.terms) {\r\n\t\t\t\tvar maxDistribution = doc.terms[t].maxDistribution;\r\n\t\t\t\tif (maxDistribution > max.value) {\r\n\t\t\t\t\tmax = {term: t, value: maxDistribution};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\treturn max;\r\n\t},\r\n\t\r\n\tgetNewColor: function() {\r\n\t\tvar color = null;\r\n\t\tfor (var i = 0; i < this.colors.length; i++) {\r\n\t\t\tcolor = this.colors[i];\r\n\t\t\tvar match = this.typeStore.findExact('color', color);\r\n\t\t\tif (match == -1) break;\r\n\t\t\telse color = null;\r\n\t\t}\r\n\t\tif (color == null) color = [128, 128, 128];\r\n\t\treturn color;\r\n\t},\r\n\t\r\n\tremoveAllTerms: function() {\r\n\t\tthis.cache.each(function(doc) {\r\n\t\t\tdoc.terms = {};\r\n\t\t}, this);\r\n\t\tthis.currentTerms = {};\r\n\t\tthis.termsFilter = [];\r\n\t},\r\n\t\r\n\tremoveTerm: function(term) {\r\n//\t\tvar types = this.store.query('type', type);\r\n//\t\ttypes.each(function(type) {\r\n//\t\t\tthis.store.remove(type);\r\n//\t\t}, this);\r\n\t\t\r\n\t\tdelete this.currentTerms[term];\r\n\t\t\r\n//\t\tvar types = this.getApiParamValue('type');\r\n//\t\ttypes = types.remove(type);\r\n//\t\tthis.setApiParams({type: types});\r\n\t\t\r\n\t\tvar getNewMax = false;\r\n\t\tthis.cache.each(function(doc) {\r\n\t\t\tfor (var t in doc.terms) {\r\n\t\t\t\tif (t == term) {\r\n\t\t\t\t\tif (this.maxFreq.term == term) {\r\n\t\t\t\t\t\tthis.maxFreq = {term: null, value: 0};\r\n\t\t\t\t\t\tgetNewMax = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete doc.terms[t];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\t\r\n\t\tfor (var i in this.lastClickedBubbles) {\r\n\t\t\tvar lcTypes = this.lastClickedBubbles[i];\r\n\t\t\tfor (var lcType in lcTypes) {\r\n\t\t\t\tif (lcType == term) {\r\n\t\t\t\t\tdelete this.lastClickedBubbles[i][lcType];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (getNewMax) {\r\n\t\t\tthis.setMaxFreq();\r\n\t\t\tthis.calculateBubbleRadii();\r\n\t\t\tthis.drawGraph();\r\n\t\t}\r\n\t},\r\n\t\r\n\tclearCanvas: function() {\r\n\t\tthis.canvas.width = this.canvas.width;\r\n\t}\r\n};","function Knots(config) {\r\n\tthis.container = config.container;\r\n\tthis.externalClickHandler = config.clickHandler;\r\n\t\r\n\tthis.MAX_LINE_LENGTH = 0;\r\n\tthis.LINE_SIZE = 2.5;\r\n\t\r\n\tthis.progressiveDraw = true;\r\n\tthis.progDrawDone = false;\r\n\tthis.drawStep = 0;\r\n\t\r\n\tthis.mouseOver = false;\r\n\tthis.refreshInterval = 100;\r\n\tthis.forceRedraw = false;\r\n\tthis.lastDrawTime = new Date().getTime();\r\n\tthis.intervalId = null;\r\n\tthis.startAngle = 315;\r\n\tthis.angleIncrement = 15;\r\n\t\r\n\tthis.canvas = null;\r\n\tthis.ctx = null;\r\n\tthis.currentDoc = {\r\n\t\tterms: {},\r\n\t\tlineLength: undefined\r\n\t};\r\n\tthis.maxDocLength = 0;\r\n\t\r\n\tthis.offset = {x: 0, y: 0};\r\n\r\n\tthis.termsFilter = [];\r\n\t\r\n\tthis.initialized = false;\r\n\t\r\n\tthis.audio = config.audio;\r\n\tthis.audioCtx = null;\r\n}\r\n\r\n\r\nKnots.prototype = {\r\n\tconstructor: Knots,\r\n\t\r\n\tinitializeCanvas: function() {\r\n\t\tvar container = this.container;\r\n\t\tvar height = container.getHeight()-5;\r\n\t\tvar width = container.getWidth();\r\n\t\tthis.MAX_LINE_LENGTH = Math.sqrt((width * width) + (height * height));\r\n\t\t\r\n\t\tvar id = Ext.id('knots');\r\n\t\tcontainer.add({\r\n\t\t\txtype: 'container',\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\thtml: '<canvas id=\"'+id+'\" width=\"'+width+'\" height=\"'+height+'\"></canvas>',\r\n\t\t\tborder: false,\r\n        \tlisteners: {\r\n        \t\tafterrender: {\r\n        \t\t\tfn: function(cnt) {\r\n    \t\t\t\t\tthis.canvas = document.getElementById(id);\r\n        \t\t\t\tthis.ctx = this.canvas.getContext('2d');\r\n        \t\t\t\tthis.canvas.addEventListener('click', this.clickHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mousedown', this.mouseDownHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mouseup', this.mouseUpHandler.bind(this), false);\r\n        \t\t\t\tthis.canvas.addEventListener('mousemove', this.moveHandler.bind(this), false);\r\n        \t\t\t},\r\n        \t\t\tsingle: true,\r\n        \t\t\tscope: this\r\n        \t\t}\r\n        \t}\r\n\t\t});\r\n\t\tcontainer.updateLayout();\r\n\t\tthis.initialized = true;\r\n\t},\r\n\t\r\n\tdoLayout: function() {\r\n\t\tif (this.initialized) {\r\n\t\t\tvar width = this.container.getWidth();\r\n\t\t\tvar height = this.container.getHeight()-5;\r\n\t\t\tthis.canvas.width = width;\r\n\t\t\tthis.canvas.height = height;\r\n\t\t\tthis.recache();\r\n\t\t\tthis.buildGraph();\r\n\t\t}\r\n\t},\r\n\t\r\n\tbuildGraph: function(drawStep) {\r\n\t\tif (this.intervalId != null) {\r\n\t\t\tthis.progDrawDone = false;\r\n\t\t\tclearInterval(this.intervalId);\r\n\t\t}\r\n\t\tthis.forceRedraw = true;\r\n\r\n\t\tthis.drawStep = drawStep || 0;\r\n\t\t\r\n\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\tvar term = this.currentDoc.terms[t];\r\n\t\t\tterm.done = false;\r\n\t\t}\r\n\t\t\r\n\t\tif (!this.progressiveDraw) {\r\n\t\t\tthis.doDraw(false);\r\n\t\t} else {\r\n\t\t\tthis.intervalId = setInterval(this.doDraw.createDelegate(this, [false]), 50);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawGraph: function(includeLegend) {\r\n\t\tif (this.intervalId != null) {\r\n\t\t\tthis.progDrawDone = false;\r\n\t\t\tclearInterval(this.intervalId);\r\n\t\t}\r\n\t\tthis.forceRedraw = true;\r\n\t\t\r\n\t\tif (!this.progressiveDraw) {\r\n\t\t\tthis.doDraw(false, includeLegend);\r\n\t\t} else {\r\n\t\t\tthis.intervalId = setInterval(this.doDraw.createDelegate(this, [includeLegend]), 50);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdoDraw: function(includeLegend) {\r\n\t\tvar time = new Date().getTime();\r\n\t\tif (this.forceRedraw || time - this.lastDrawTime >= this.refreshInterval) {\r\n\t\t\tthis.forceRedraw = false;\r\n\t\t\t\r\n\t\t\tthis.clearCanvas();\r\n\t\t\t\r\n\t\t\tthis.ctx.save();\r\n\t\t\tthis.ctx.translate(this.offset.x, this.offset.y);\r\n\t\t\t\r\n\t\t\tthis.drawDocument(this.currentDoc);\r\n\t\t\t\r\n\t\t\t// animate the origin\r\n\t//\t\tthis.originOpacity -= 0.01;\r\n\t//\t\tif (this.originOpacity < 0) {\r\n\t//\t\t\tthis.originOpacity = 1.0;\r\n\t//\t\t}\r\n\t\t\tthis.originOpacity = 0.5;\r\n\t\t\tthis.originColor = '128,128,128';\r\n\t\t\tthis.ctx.lineWidth = Math.abs(this.originOpacity - 1) * 15;\r\n\t\t\tthis.ctx.fillStyle = 'rgba('+this.originColor+',1.0)';\r\n\t\t\tthis.ctx.strokeStyle = 'rgba('+this.originColor+','+this.originOpacity+')';\r\n\t\t\tthis.ctx.beginPath();\r\n\t\t\tthis.ctx.arc(0, 0, this.LINE_SIZE*2, 0, Math.PI*2, true);\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.fill();\r\n\t\t\t\r\n\t\t\tif (!includeLegend) this.ctx.stroke();\r\n\t\t\tthis.ctx.restore();\r\n\t\t\tthis.ctx.lineWidth = 1;\r\n\t\t\t\r\n\t\t\tif (includeLegend === true) {\r\n\t\t\t\tthis.drawLegend();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.lastDrawTime = new Date().getTime();\r\n\t\t\t\r\n\t\t\t// test to see if each doc term is done\r\n\t\t\tif (this.progressiveDraw) {\r\n\t\t\t\tvar done = true;\r\n\t\t\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\t\t\tdone = done && this.currentDoc.terms[t].done;\r\n\t\t\t\t}\r\n\t\t\t\tthis.progDrawDone = done;\r\n\t\t\t\tif (done) {\r\n\t\t\t\t\tclearInterval(this.intervalId);\r\n\t\t\t\t\tthis.intervalId = null;\r\n\t\t\t\t\tthis.muteTerms();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.drawStep++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tsetAudio: function(audio) {\r\n\t\tthis.audio = audio;\r\n\t\tif (!audio) {this.muteTerms();}\r\n\t},\r\n\t\r\n\tmuteTerms: function() {\r\n\t\tfor (t in this.currentDoc.terms) {\r\n\t\t\tif (this.currentDoc.terms[t].audio) {\r\n\t\t\t\tthis.currentDoc.terms[t].audio.gainNode.gain.value=0;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawDocument: function(doc) {\r\n\t\tvar terms = doc.terms;\r\n\t\t\r\n\t\tfor (var t in terms) {\r\n\t\t\tif (this.termsFilter.indexOf(t) != -1) {\r\n\t\t\t\tvar info = terms[t];\r\n\t\t\t\tif (info && info.pos) {\r\n\t\t\t\t\tvar prevXY = [[0,0],[0,0]];\r\n\t\t\t\t\tif (this.progressiveDraw) {\r\n\t\t\t\t\t\tvar length = this.drawStep + 1;\r\n\t\t\t\t\t\tif (info.pos.length <= this.drawStep) {\r\n\t\t\t\t\t\t\tinfo.done = true;\r\n\t\t\t\t\t\t\tlength = info.pos.length;\r\n\t\t\t\t\t\t\tif (info.audio) {info.audio.gainNode.gain.value=0};\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (this.audio && info.audio) {\r\n\t\t\t\t\t\t\t\tinfo.audio.gainNode.gain.value=.1;\r\n\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\tinfo.audio.gainNode.gain.value=0;\r\n\t\t\t\t\t\t\t\t}, this.refreshInterval*.75)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tinfo.done = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\t\t\t\t\tvar xy = info.pos[i];\r\n\t\t\t\t\t\t\tthis.drawPolygon(xy, prevXY, info.color);\r\n\t\t\t\t\t\t\tprevXY = [[xy.polygon[0][3], xy.polygon[1][3]], [xy.polygon[0][2], xy.polygon[1][2]]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var i = 0; i < info.pos.length; i++) {\r\n\t\t\t\t\t\t\tvar xy = info.pos[i];\r\n\t\t\t\t\t\t\tthis.drawPolygon(xy, prevXY, info.color);\r\n\t\t\t\t\t\t\tprevXY = [[xy.polygon[0][3], xy.polygon[1][3]], [xy.polygon[0][2], xy.polygon[1][2]]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tdrawPolygon: function(xy, prevXY, color) {\r\n\t\tvar polyX = xy.polygon[0];\r\n\t\tvar polyY = xy.polygon[1];\r\n\t\t\r\n\t\t// connect to previous polygon to make smoother turns\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.moveTo(prevXY[0][0], prevXY[0][1]);\r\n\t\tthis.ctx.lineTo(polyX[0], polyY[0]);\r\n\t\tthis.ctx.lineTo(polyX[1], polyY[1]);\r\n\t\tthis.ctx.lineTo(prevXY[1][0], prevXY[1][1]);\r\n\t\tthis.ctx.closePath();\r\n\t\t\r\n\t\tthis.ctx.fillStyle = 'rgba('+color+', 0.6)';\r\n\t\tthis.ctx.fill();\r\n\r\n\t\t// draw the current polygon\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.moveTo(polyX[0], polyY[0]);\r\n\t\tthis.ctx.lineTo(polyX[1], polyY[1]);\r\n\t\tthis.ctx.lineTo(polyX[2], polyY[2]);\r\n\t\tthis.ctx.lineTo(polyX[3], polyY[3]);\r\n\t\tthis.ctx.closePath();\r\n\r\n\t\tif (xy.over) this.ctx.fillStyle = 'rgba('+color+', 1.0)';\r\n\t\tthis.ctx.fill();\r\n\t},\r\n\t\r\n\tdrawLegend: function() {\r\n\t\tvar x = 5;\r\n\t\tvar y = 5;\r\n\t\tthis.ctx.textBaseline = 'top';\r\n\t\tthis.ctx.font = '16px serif';\r\n\t\tthis.termStore.each(function(record) {\r\n\t\t\tvar color = record.get('color');\r\n\t\t\tthis.ctx.fillStyle = 'rgb('+color+')';\r\n\t\t\tvar term = record.get('term');\r\n\t\t\tthis.ctx.fillText(term, x, y);\r\n\t\t\tvar width = this.ctx.measureText(term).width;\r\n\t\t\tx += width + 8;\r\n\t\t}, this);\r\n\t},\r\n\t\r\n\tsetCurrentDoc: function(doc) {\r\n\t\tthis.currentDoc = doc;\r\n\t\tthis.cacheCurrentDocument();\r\n\t},\r\n\t\r\n\taddTerms: function(termsObj) {\r\n\t\tExt.apply(this.currentDoc.terms, termsObj);\r\n\t\tthis.recache();\r\n\t},\r\n\t\r\n\tremoveTerm: function(term) {\r\n\t\tif (this.currentDoc.terms[term].audio) {this.currentDoc.terms[term].audio.oscillator.stop();}\r\n\t\tdelete this.currentDoc.terms[term];\r\n\t\tthis.recache();\r\n\t},\r\n\t\r\n\tremoveAllTerms: function() {\r\n\t\tfor (term in this.currentDoc.terms) {\r\n\t\t\tif (this.currentDoc.terms[term].audio) {\r\n\t\t\t\tthis.currentDoc.terms[term].audio.oscillator.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.currentDoc.terms = {};\r\n\t\tthis.recache();\r\n\t},\r\n\t\r\n\trecache: function() {\r\n\t\tthis.MAX_LINE_LENGTH = Math.sqrt((this.canvas.width * this.canvas.width) + (this.canvas.height * this.canvas.height));\r\n\t\tthis.cacheCurrentDocument();\r\n\t\tthis.determineGraphSizeAndPosition();\r\n\t},\r\n\t\r\n\tcacheCurrentDocument: function() {\r\n\t\tvar lineLength = this.MAX_LINE_LENGTH;\r\n\t\t\r\n\t\tthis.currentDoc.lineLength = lineLength;\r\n\t\t\r\n\t\tif (this.audio && this.audioCtx == null) {\r\n\t\t\ttry {\r\n\t\t\t\tthis.audioCtx = new (window.AudioContext || window.webkitAudioContext)();\r\n\t\t\t} catch(e) {\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (var term in this.currentDoc.terms) {\r\n\t\t\tif (this.audio && this.audioCtx && !this.currentDoc.terms[term].audio) {\r\n\t\t\t\tvar oscillator = this.audioCtx.createOscillator();\r\n\t\t\t\tvar gainNode = this.audioCtx.createGain();\r\n\t\t\t\toscillator.connect(gainNode);\r\n\t\t\t\tgainNode.connect(this.audioCtx.destination);\r\n\t\t\t\toscillator.frequency.value = (Math.random()*500)+150; // value in hertz\r\n\t\t\t\toscillator.start();\r\n\t\t\t\tgainNode.gain.value = 0;\r\n\t\t\t\tthis.currentDoc.terms[term].audio = {oscillator: oscillator, gainNode: gainNode}\r\n\t\t\t} \r\n\t\t\tthis.cacheTurns(this.currentDoc.terms[term], lineLength);\r\n\t\t}\r\n\t},\r\n\t\r\n\tcacheTurns: function(info, lineLength) {\r\n\t\tvar rawFreq = info.rawFreq;\r\n\t\tif (rawFreq > 0) {\r\n\t\t\tvar doc = this.currentDoc;\r\n\t\t\t\r\n\t\t\tvar term = info.term;\r\n\t\t\tvar color = info.color;\r\n\r\n\t\t\tvar cachedPositions = [];\r\n\t\t\t\r\n\t\t\tvar tokenIds = info.positions;\r\n\t\t\tvar lastTokenId = tokenIds[tokenIds.length-1];\r\n\t\t\t\r\n\t\t\tvar angle = this.startAngle;\r\n\t\t\tvar angleIncrement = this.angleIncrement;\r\n\t\t\tvar prevX = 0;\r\n\t\t\tvar prevY = 0;\r\n\t\t\tvar x = 0;\r\n\t\t\tvar y = 0;\r\n\t\t\tvar prevLength = 0;\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < tokenIds.length; i++) {\r\n\t\t\t\tvar o = tokenIds[i];\r\n\t\t\t\t\r\n\t\t\t\tvar length = o / lastTokenId * lineLength;\r\n\t\t\t\tvar segment = length - prevLength;\r\n\t\t\t\t\r\n\t\t\t\tprevX = x;\r\n\t\t\t\tprevY = y;\r\n\t\t\t\t\r\n\t\t\t\tvar newPoint = this.findEndPoint([x, y], segment, angle);\r\n\t\t\t\tx = newPoint[0];\r\n\t\t\t\ty = newPoint[1];\r\n\t\t\t\t\r\n\t\t\t\tvar polygon = this.getPolygonFromLine([prevX, prevY], [x, y], angle, this.LINE_SIZE);\r\n\t\t\t\t\r\n\t\t\t\tcachedPositions.push({tokenId: o, polygon: polygon, over: false});\r\n\t\t\t\t\r\n\t\t\t\tprevLength = length;\r\n\t\t\t\tangle += angleIncrement;\r\n\t\t\t}\r\n\t\t\t\r\n//\t\t\tdoc.terms[term] = {pos: cachedPositions, rawFreq: rawFreq, color: color, done: false};\r\n\t\t\tdoc.terms[term].pos = cachedPositions;\r\n\t\t\tdoc.terms[term].done = false;\r\n\t\t}\r\n\t},\r\n\t\r\n\tfindEndPoint: function(point, length, angle) {\r\n\t\tvar radians = this.degreesToRadians(angle);\r\n\t\tvar x2 = point[0] + (length * Math.cos(radians));\r\n\t\tvar y2 = point[1] + (length * Math.sin(radians));\r\n\t\treturn [x2, y2];\r\n\t},\r\n\t\r\n\tdetermineGraphSizeAndPosition: function() {\t\t\r\n\t\tvar bb = this.findBoundingBoxForGraph();\r\n\r\n\t\t// find the size ratio between the graph and the canvas\r\n\t\tvar width = bb.maxX - bb.minX;\r\n\t\tvar height = bb.maxY - bb.minY;\r\n\t\tvar widthRatio = this.canvas.width / width;\r\n\t\tvar heightRatio = this.canvas.height / height;\r\n\t\tvar ratio = Math.min(widthRatio, heightRatio);\r\n\t\tratio -= 0.05; // create some space around the borders\r\n\t\t\r\n\t\twidth *= ratio;\r\n\t\theight *= ratio;\r\n\t\t\r\n\t\tthis.offset.x = Math.abs(bb.minX * ratio - (this.canvas.width / 2 - width / 2));\r\n\t\tthis.offset.y = Math.abs(bb.minY * ratio - (this.canvas.height / 2 - height / 2));\r\n\t\t\r\n\t\tthis.MAX_LINE_LENGTH = Math.sqrt((this.canvas.width * this.canvas.width) + (this.canvas.height * this.canvas.height)) * ratio;\r\n\t\t\r\n\t\tthis.cacheCurrentDocument();\r\n\t},\r\n\t\r\n\tfindBoundingBoxForGraph: function() {\r\n\t\tvar minX = null;\r\n\t\tvar maxX = null;\r\n\t\tvar minY = null;\r\n\t\tvar maxY = null;\r\n\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\tvar pos = this.currentDoc.terms[t].pos;\r\n\t\t\tfor (var i = 0; i < pos.length; i++) {\r\n\t\t\t\tvar polygon = pos[i].polygon;\r\n\t\t\t\tvar bb = this.getBoundingBox(polygon[0], polygon[1]);\r\n\t\t\t\tif (minX == null || bb[0] < minX) minX = bb[0];\r\n\t\t\t\tif (maxX == null || bb[2] > maxX) maxX = bb[2];\r\n\t\t\t\tif (minY == null || bb[1] < minY) minY = bb[1];\r\n\t\t\t\tif (maxY == null || bb[3] > maxY) maxY = bb[3];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn {minX: minX, minY: minY, maxX: maxX, maxY: maxY};\r\n\t},\r\n\t\r\n\tgetBoundingBox: function(polyX, polyY) {\r\n\t\tvar minX = Math.min(polyX[0], polyX[2]);\r\n\t\tvar maxX = Math.max(polyX[0], polyX[2])\r\n\t\tvar minY = Math.min(polyY[0], polyY[2]);\r\n\t\tvar maxY = Math.max(polyY[0], polyY[2]);\r\n\t\treturn [minX, minY, maxX, maxY];\r\n\t},\r\n\t\r\n\tdegreesToRadians: function(d) {\r\n\t\treturn d * (Math.PI / 180);\r\n\t},\r\n\t\r\n\tclickHandler: function(event) {\r\n\t\tvar x = event.layerX - this.offset.x;\r\n\t\tvar y = event.layerY - this.offset.y;\r\n\t\tvar hit = null;\r\n\t\tvar tokenId = 0;\r\n\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\tif (this.termsFilter.indexOf(t) != -1) {\r\n\t\t\t\tvar pos = this.currentDoc.terms[t].pos;\r\n\t\t\t\tfor (var i = 0; i < pos.length; i++) {\r\n\t\t\t\t\tvar polygon = pos[i].polygon;\r\n\t\t\t\t\tvar test = this.isPointInPolygon(polygon[0], polygon[1], x, y);\r\n\t\t\t\t\tif (test) {\r\n\t\t\t\t\t\thit = t;\r\n\t\t\t\t\t\ttokenId = pos[i].tokenId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (hit) {\r\n\t\t\tif (this.externalClickHandler !== undefined) {\r\n\t\t\t\tthis.externalClickHandler({term: hit, tokenId: tokenId});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tmoveHandler: function(event) {\r\n\t\tvar x = event.layerX - this.offset.x;\r\n\t\tvar y = event.layerY - this.offset.y;\r\n\t\tif (this.dragInfo != null) {\r\n\t\t\tdocument.body.style.cursor = 'move';\r\n\t\t\tthis.dragInfo.lastX = this.dragInfo.x;\r\n\t\t\tthis.dragInfo.lastY = this.dragInfo.y;\r\n\t\t\tthis.dragInfo.x = event.layerX;\r\n\t\t\tthis.dragInfo.y = event.layerY;\r\n\t\t\tvar xDiff = this.dragInfo.x - this.dragInfo.lastX;\r\n\t\t\tvar yDiff = this.dragInfo.y - this.dragInfo.lastY;\r\n\t\t\tthis.offset.x += xDiff;\r\n\t\t\tthis.offset.y += yDiff;\r\n\t\t} else {\r\n\t\t\tthis.mouseOver = false;\r\n\t\t\tfor (var t in this.currentDoc.terms) {\r\n\t\t\t\tif (this.termsFilter.indexOf(t) != -1) {\r\n\t\t\t\t\tvar pos = this.currentDoc.terms[t].pos;\r\n\t\t\t\t\tfor (var i = 0; i < pos.length; i++) {\r\n\t\t\t\t\t\tif (!this.mouseOver) {\r\n\t\t\t\t\t\t\tvar polygon = pos[i].polygon;\r\n\t\t\t\t\t\t\tvar test = this.isPointInPolygon(polygon[0], polygon[1], x, y);\r\n\t\t\t\t\t\t\tif (test) {\r\n\t\t\t\t\t\t\t\tthis.currentDoc.terms[t].pos[i].over = true;\r\n\t\t\t\t\t\t\t\tthis.mouseOver = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.currentDoc.terms[t].pos[i].over = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.currentDoc.terms[t].pos[i].over = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.mouseOver) {\r\n\t\t\t\tdocument.body.style.cursor = 'pointer';\r\n\t\t\t\tif (!this.progressiveDraw || (this.progressiveDraw && this.progDrawDone)) {\r\n\t\t\t\t\tclearInterval(this.intervalId);\r\n\t\t\t\t\tthis.intervalId = setInterval(this.doDraw.createDelegate(this, [false]), 50);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdocument.body.style.cursor = 'auto';\r\n\t\t\t\tif (!this.progressiveDraw || (this.progressiveDraw && this.progDrawDone)) {\r\n\t\t\t\t\tclearInterval(this.intervalId);\r\n\t\t\t\t\tthis.doDraw(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tmouseDownHandler: function(event) {\r\n\t\tvar x = event.layerX;\r\n\t\tvar y = event.layerY;\r\n\t\tthis.dragInfo = {\r\n\t\t\tlastX: x,\r\n\t\t\tlastY: y,\r\n\t\t\tx: x,\r\n\t\t\ty: y\r\n\t\t};\r\n\t},\r\n\t\r\n\tmouseUpHandler: function(event) {\r\n\t\tthis.dragInfo = null;\r\n\t},\r\n\t\r\n\tgetPolygonFromLine: function(point1, point2, angle, size) {\r\n\t\tvar perpDown = angle + 90;\r\n\t\tvar perpUp = angle - 90;\r\n\t\t\r\n\t\tvar p1 = this.findEndPoint(point1, size, perpDown);\r\n\t\tvar p2 = this.findEndPoint(point1, size, perpUp);\r\n\t\tvar p3 = this.findEndPoint(point2, size, perpUp);\r\n\t\tvar p4 = this.findEndPoint(point2, size, perpDown);\r\n\t\t\r\n\t\tvar polyX = [p1[0], p2[0], p3[0], p4[0]];\r\n\t\tvar polyY = [p1[1], p2[1], p3[1], p4[1]];\r\n\t\treturn [polyX, polyY];\r\n\t},\r\n\t\r\n\t// from http://alienryderflex.com/polygon/\r\n\tisPointInPolygon: function(polyX, polyY, x, y) {\r\n\t\tvar i = 0;\r\n\t\tvar j = 3; // number of polygon sides minus 1\r\n\t\tvar oddNodes = false;\r\n\t\tfor (i = 0; i < 4; i++) {\r\n\t\t\tif ((polyY[i] < y && polyY[j] >= y) ||\r\n\t\t\t\t(polyY[j] < y && polyY[i] >= y)) {\r\n\t\t\t\tif (polyX[i] + (y - polyY[i]) / (polyY[j] - polyY[i]) * (polyX[j] - polyX[i]) < x) {\r\n\t\t\t\t\toddNodes = !oddNodes;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tj = i;\r\n\t\t}\r\n\t\treturn oddNodes;\r\n\t},\r\n\t\r\n\tclearCanvas: function() {\r\n\t\tthis.canvas.width = this.canvas.width;\r\n\t}\r\n};","/*\r\n * Author: Andrew MacDonald\r\n * Licensed for use under the GNU General Public License\r\n * http://creativecommons.org/licenses/GPL/2.0/\r\n */\r\n\r\nfunction Cirrus(config) {\r\n    var that = this;\r\n    this.config = config;\r\n    var canvasId = Ext.id(null, 'cirrusCanvas');\r\n    if (this.config.containerId == null) {\r\n        alert('You must provide a valid container ID!');\r\n        return;\r\n    }\r\n    var containerId = '#'+this.config.containerId;\r\n    var wordController = null;\r\n    var resizeTimer = null;\r\n    \r\n    this.clear = function() {\r\n        this.canvas.width = this.canvas.width;\r\n    };\r\n    \r\n    this.addWords = function(words) {\r\n        wordController.addWords(words);\r\n    };\r\n    \r\n    this.arrangeWords = function() {\r\n        wordController.arrangeWords();\r\n    };\r\n\r\n    this.clearAll = function() {\r\n        wordController.setWords([]);\r\n        wordController.grid = [];\r\n        this.clear();\r\n    };\r\n\r\n    this.resizeWords = function() {\r\n        that.setCanvasDimensions();\r\n        wordController.resetWordCoordinates();\r\n        wordController.calculateSizeAdjustment();\r\n        wordController.resizeWords();\r\n        wordController.arrangeWords();\r\n        resizeTimer = null;\r\n    };\r\n\r\n    this.setCanvasDimensions = function() {\r\n        var container = $(containerId)[0];\r\n        var width = Math.max(container.offsetWidth, container.clientWidth);\r\n        var height = Math.max(container.offsetHeight, container.clientHeight);\r\n        this.canvas.width = width;\r\n        this.canvas.height = height;\r\n    };\r\n\r\n    function hex2RGB(hex) {\r\n        hex = hex.charAt(0) == '#' ? hex.substring(1,7) : hex;\r\n        var rgb = [];\r\n        rgb.push(parseInt(hex.substring(0, 2), 16));\r\n        rgb.push(parseInt(hex.substring(2, 4), 16));\r\n        rgb.push(parseInt(hex.substring(4, 6), 16));\r\n        return rgb;\r\n    }\r\n    \r\n    function init() {\r\n        \r\n        if ($('#'+that.config.containerId).length == 0) {\r\n            alert('You must provide a valid container ID!');\r\n            return;\r\n        }\r\n        \r\n        // create the canvas\r\n        that.canvas = document.createElement('canvas');\r\n        that.canvas.setAttribute('id', canvasId);\r\n        that.canvas.setAttribute('tabIndex', 1);\r\n        that.setCanvasDimensions();\r\n        $(containerId).append(that.canvas);\r\n        canvasId = '#'+canvasId;\r\n        \r\n        that.context = that.canvas.getContext('2d');\r\n        var isLocal = false; // should we call the server for words or use local ones?\r\n        that.wordData = new Array(); // the word data to input into the app\r\n        that.useFadeEffect = true; // should we use a fade effect for displaying words?\r\n        that.colors = [[116,116,181], [139,163,83], [189,157,60], [171,75,75], [174,61,155]];\r\n        wordController = new WordController(that);\r\n        \r\n        for (var key in that.config) {\r\n            if (key == 'words') that.wordData = that.config[key];\r\n            if (key == 'layout') {\r\n                if (that.config[key] == 'circle') wordController.layout = wordController.CIRCLE;\r\n                else if (that.config[key] == 'square') wordController.layout = wordController.SQUARE;\r\n            }\r\n            if (key == 'colors') {\r\n                // expects an array of hex colors\r\n                if ($.isArray(that.config[key]) && that.config[key].length > 0) {\r\n                    that.colors = [];\r\n                    for (var c in that.config[key]) {\r\n                        that.colors.push(hex2RGB(that.config[key][c]));\r\n                    }\r\n                }\r\n            }\r\n            if (key == 'background') {\r\n                $(canvasId).css(\"background-color\", that.config[key]);\r\n            }\r\n            if (key == 'fade') {\r\n                if (that.config[key] == 'true') that.useFadeEffect = true;\r\n                else if (that.config[key] == 'false') that.useFadeEffect = false;\r\n            }\r\n            if (key == 'smoothness') {\r\n                wordController.wordsToArrange = Math.max(1, Math.min(20, parseInt(that.config[key]))); // set to value between 1-20\r\n            }\r\n        }\r\n        \r\n        if (isLocal && testData) {\r\n            var cnt = 0;\r\n            for (var key in testData) {\r\n                that.wordData.push({word: key, size: testData[key] / 13, label: key});\r\n                cnt++;\r\n                if (cnt == 100) break;\r\n            }\r\n        }\r\n        \r\n        if (that.wordData.length > 0) {\r\n            that.clear();\r\n            wordController.addWords(that.wordData);\r\n            wordController.arrangeWords();\r\n        }\r\n        \r\n        $(window).resize(function() {\r\n            if (resizeTimer != null) clearTimeout(resizeTimer);\r\n            resizeTimer = setTimeout(that.resizeWords, 1000);\r\n        });\r\n\r\n        $(canvasId).keypress(function(event) {\r\n            if (event.which == 114) wordController.arrangeWords(); // r was pressed\r\n        });\r\n        \r\n        $(canvasId).click(function(event) {\r\n            var matchingWord = wordController.handleWordClick(event);\r\n            if (matchingWord !== undefined) {\r\n\t            if (that.config.clickHandler) {\r\n\t            \tthat.config.clickHandler({term: matchingWord.text, value: matchingWord.value});\r\n\t            }\r\n            }\r\n        });\r\n        \r\n        $(canvasId).mouseover(function(event) {\r\n        \twordController.startUpdates();\r\n        });\r\n        $(canvasId).mouseout(function(event) {\r\n        \twordController.stopUpdates();\r\n        });\r\n        \r\n        $(canvasId).mousemove(function(event) {\r\n            wordController.handleMouseMove(event);\r\n        });\r\n    }\r\n    \r\n    $(document).ready(init);\r\n}","\r\n/**\r\n * The word object.  Stores various properties related to diplaying the word.\r\n * @author Andrew\r\n */\r\nfunction Word(_text, _origSize, _color, _rolloverText, _value) {\r\n    this.height = 0;\t\t\t\t\t// the height of the label\r\n    this.width = 0;\t\t\t\t\t\t// the width of the label\r\n    this.rotation = 0; \t\t\t\t\t// rotation of the label, in radians\r\n    this.relativeSize = 0;\t\t\t\t// the size relative to the largest and smallest word sizes\r\n    this.mask = null;\t\t\t\t\t// a 2 dimensional array containing the local xy co-ordinates of opaque pixels\r\n    this.size = 0;\t\t\t\t\t\t// the largest of either the height or width, used in the circle layout\r\n    \r\n    /* Init */\r\n    this.text = _text;\t\t\t\t\t// the actual word\r\n    this.color = _color;\t\t\t\t// the color of the label\r\n    this.origSize = _origSize;\t\t\t// the original size (used when re-calculating relative sizes of words)\r\n    this.rolloverText = _rolloverText;\t// the text to show on rollover\r\n    this.value = _value || 0;\t\t\t// a value associated with the word (can be anything)\r\n    this.x = 0;\t\t\t\t\t\t\t// the x co-ordinate\r\n    this.y = 0;\t\t\t\t\t\t\t// the y co-ordinate\r\n    this.tx = 0;\t\t\t\t\t\t// the translation value for x\r\n    this.ty = 0;\t\t\t\t\t\t// the translation value for y\r\n    this.fontFamily = 'Arial';\t\t\t// the font family\r\n    this.fontSize = 12;\t\t\t\t\t// the font family\r\n    this.alpha = 1;\t\t\t\t\t\t// alpha of the label\r\n    this.live = false;\t\t\t\t\t// true if the word should be displayed\r\n    this.isOver = false;\t\t\t\t// true if the mouse if over the word\r\n    \r\n    this.draw = function(ctx) {\r\n        ctx.save();\r\n        ctx.fillStyle = 'rgba('+this.color[0]+','+this.color[1]+','+this.color[2]+','+this.alpha+')';\r\n        ctx.textBaseline = 'alphabetic';\r\n        ctx.font = this.fontSize + 'px '+ this.fontFamily;\r\n        ctx.translate(this.x + this.tx, this.y + this.ty);\r\n        ctx.rotate(this.rotation);\r\n        ctx.fillText(this.text, 0, 0);\r\n        ctx.restore();\r\n    };\r\n}","\r\nfunction WordController(parentApp) {\r\n    var that = this;\r\n    \r\n    var app = parentApp;\r\n    \r\n    var myFont = 'Impact';\r\n    \r\n    this.CIRCLE = 0; // circle layout\r\n    \r\n    this.ratio = 1; // the width to height ratio\r\n    \r\n    var _layout = this.CIRCLE; // what layout to use\r\n    this.getLayout = function() {\r\n        return _layout;\r\n    };\r\n    this.setLayout = function(value) {\r\n        _layout = value;\r\n    };\r\n    \r\n    this.HORIZONTAL = 0;\r\n    this.MIXED = 1; // horizontal and vertical\r\n    \r\n    var _wordOrientation = this.MIXED;\r\n    this.getWordOrientation = function() {\r\n        return _wordOrientation;\r\n    };\r\n    this.setWordOrientation = function(value) {\r\n    \t_wordOrientation = value;\r\n    };\r\n    \r\n    this.UPDATE_RATE = 25; // update frequency in milliseconds\r\n    this.COARSENESS = 5; // how many pixels do we skip when creating the mask?\r\n//    if ($.browser.webkit) this.COARSENESS = 3; \r\n    this.grid = new Array(); // a multidimensional array ([x][y]), holding co-ords for words\r\n    var timer_i = 0;\r\n    var timer; // timer used to incrementally call the arrange method\r\n    this.doingArrange = false;\r\n    this.wordsToArrange = 5; // how many words to arrange for each call to the arrange method\r\n    var overWord = null; // what word is the user mousing over?\r\n    var overX = 0; // position of the mouse when over a word\r\n    var overY = 0;\r\n    \r\n    var _words = new Array(); // the list of word objects\r\n    this.getWords = function() {\r\n        return _words;\r\n    }\r\n    this.setWords = function(value) {\r\n        _words = value;\r\n    }\r\n    \r\n    this.sizeAdjustment = 100; // amount to multiply a word's relative size by\r\n    \r\n    this.minFontSize = 12;\r\n    \r\n    // for tracking sizes in word data\r\n    this.largestWordSize = 0;\r\n    this.smallestWordSize = 10000;\r\n    \r\n    var _uniqueWords = new Object(); // stores words as properties, making sure we don't have duplicates\r\n    \r\n    /**\r\n     * Creates a word object and adds it to the list.\r\n     * If the size value is outside the current max/min value, returns true (meaning we have to resize all the words).\r\n     * @param\tword\r\n     * @param\tsize\r\n     * @param\tcolor\r\n     * @param\tlabel\r\n     * @param\tvalue\r\n     * @return\r\n     */\r\n    function addWord(word, size, color, label, value) {\r\n        var sizeChanged = false;\r\n        if (_uniqueWords[word] == null) {\r\n            _uniqueWords[word] = true;\r\n            \r\n            if (size > that.largestWordSize) {\r\n                that.largestWordSize = size;\r\n                sizeChanged = true;\r\n            }\r\n            if (size < that.smallestWordSize) {\r\n                that.smallestWordSize = size * 0.8; // set the smallest size a bit smaller than the actual smallest size; this will insure all words are legible.\r\n                sizeChanged = true;\r\n            }\r\n            var wordObj = new Word(word, size, color, label, value);\r\n            _words.push(wordObj);\r\n        }\r\n        return sizeChanged;\r\n    }\r\n    \r\n    /**\r\n     * Adds an array of objects with the following properties: word, size, color, label, value.\r\n     * @param\twords\r\n     */\r\n    this.addWords = function(newWords) {\r\n        var sizeChanged = false;\r\n        for (var i = 0; i < newWords.length; i++) {\r\n            var wordObj = newWords[i];\r\n            \r\n            var color;\r\n            if (typeof(wordObj.color) == undefined || wordObj.color == null || wordObj.color == '') {\r\n                color = app.colors[Math.floor(Math.random() * (app.colors.length))];\r\n            } else color = wordObj.color;\r\n            \r\n            var size;\r\n            if (typeof(wordObj.size) == undefined || wordObj.size == null || wordObj.size == '') {\r\n                size = Math.floor(Math.random() * 40);\r\n            } else size = parseFloat(wordObj.size);\r\n            \r\n            sizeChanged = addWord(wordObj.word, size, color, wordObj.label, wordObj.value) || sizeChanged;\r\n        }\r\n        sortWords();\r\n        \r\n        this.setRelativeSizes();\r\n        this.calculateSizeAdjustment();\r\n        if (sizeChanged) this.resizeWords();\r\n        else createAllGraphics();\r\n    }\r\n    \r\n    this.resetWordCoordinates = function() {\r\n        app.clear();\r\n        clearTimeout(timer);\r\n        for (var i = 0; i < _words.length; i++) {\r\n            var word = _words[i];\r\n            word.x = 0;\r\n            word.y = 0;\r\n            word.tx = 0;\r\n            word.ty = 0;\r\n        }\r\n    }\r\n    \r\n    this.calculateSizeAdjustment = function() {\r\n    \tthis.ratio = app.canvas.width / app.canvas.height;\r\n        var stageArea = app.canvas.width * app.canvas.height;\r\n        if (stageArea < 100000) this.minFontSize = 8;\r\n        else this.minFontSize = 12;\r\n        var pixelsPerWord = stageArea / _words.length;\r\n        var totalWordsSize = 0;\r\n        for (var i = 0; i < _words.length; i++) {\r\n            var word = _words[i];\r\n            var wordArea = calculateWordArea(word);\r\n            totalWordsSize += wordArea;\r\n        }\r\n        this.sizeAdjustment = stageArea / totalWordsSize;\r\n    }\r\n    \r\n    function calculateWordArea(word) {\r\n        var baseSize = Math.log(word.relativeSize * 10) * Math.LOG10E; // take the relativeSize (0.1 to 1.0), multiply by 10, then get the base-10 log of it\r\n        var height = (baseSize + word.relativeSize) / 2; // find the average between relativeSize and the log\r\n        var width = 0; //(baseSize / 1.5) * word.text.length;\r\n        for (var i = 0; i < word.text.length; i++ ) {\r\n            var letter = word.text.charAt(i);\r\n            if (letter == 'f' || letter == 'i' || letter == 'j' || letter == 'l' || letter == 'r' || letter == 't') width += baseSize / 3;\r\n            else if (letter == 'm' || letter == 'w') width += baseSize / (4 / 3);\r\n            else width += baseSize / 1.9;\r\n        }\r\n        var wordArea = height * width;\r\n        return wordArea;\r\n    }\r\n    \r\n    // based on post from http://stackoverflow.com/questions/1134586/how-can-you-find-the-height-of-text-on-an-html-canvas\r\n    // not really working yet\r\n    function measureTextHeight(label) {\r\n        app.context.fillStyle = 'rgb(255,255,255)';\r\n        app.context.fillRect(label.x, label.y, label.width, label.height);\r\n        label.draw(app.context);\r\n        var imageData = app.context.getImageData(label.x, label.y, label.width, label.height);\r\n        var first = false;\r\n        var last = false;\r\n        var y = label.height;\r\n        var x = 0;\r\n        while (!last && y) {\r\n            y--;\r\n            for (x = 0; x < label.width; x++) {\r\n                var pixel = getPixel(x, y, imageData);\r\n                if (pixel[0] != 255 || pixel[1] != 255 || pixel[2] != 255) {\r\n                    last = y;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        while (y) {\r\n            y--;\r\n            for (x = 0; x < label.width; x++) {\r\n                var pixel = getPixel(x, y, imageData);\r\n                if (pixel[0] != 255 || pixel[1] != 255 || pixel[2] != 255) {\r\n                    first = y;\r\n                    break;\r\n                }\r\n            }\r\n            if (first != y) {\r\n                return last - first;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n    \r\n    function measureDimensions(word) {\r\n        app.context.save();\r\n        app.context.textBaseline = 'alphabetic';\r\n        app.context.font = word.fontSize + 'px '+ word.fontFamily;\r\n        word.width = app.context.measureText(word.text).width;\r\n        word.height = Math.ceil(app.context.measureText('m').width * 1.15); // initial estimate (make it bigger for when we actually measure the height)\r\n        app.context.restore();\r\n    }\r\n    \r\n    // returns an array [r, g, b, a]\r\n    function getPixel(x, y, imageData) {\r\n        var index = (x + y * imageData.width) * 4;\r\n        return [imageData.data[index], imageData.data[index+1], imageData.data[index+2], imageData.data[index+3]];\r\n    }\r\n    \r\n    function setPixel(imageData, x, y, r, g, b, a) {\r\n        var index = (x + y * imageData.width) * 4;\r\n        imageData.data[index] = r;\r\n        imageData.data[index+1] = g;\r\n        imageData.data[index+2] = b;\r\n        imageData.data[index+3] = a;\r\n    }\r\n    \r\n    function findNewRelativeSize(word, areaMultiplier) {\r\n        var area = calculateWordArea(word) * areaMultiplier;\r\n        // given the area = (x+6)*(2*x/3*y), solve for x\r\n        var newRelativeSize = (Math.sqrt(6) * Math.sqrt(6 * Math.pow(word.text.length, 2) + area * word.text.length) - 6 * word.text.length) / (2 * word.text.length);\r\n        return newRelativeSize;\r\n    }\r\n    \r\n    /**\r\n     * Determines the relative size for each word.\r\n     * Call after all/new words are added and before createAllGraphics.\r\n     */\r\n    this.setRelativeSizes = function() {\r\n    \tfor (var i = 0; i < _words.length; i++) {\r\n            var word = _words[i];\r\n            word.relativeSize = mapValue(word.origSize, this.smallestWordSize, this.largestWordSize, 0.1, 1);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Re-adds words using new adjusted sizes.\r\n     * Run after the largestWordSize and/or smallestWordSize have changed.\r\n     * Need to run manually, since it's intensive.\r\n     */\r\n    this.resizeWords = function() {\r\n        app.clear();\r\n        createAllGraphics();\r\n        sortWords();\r\n    }\r\n    \r\n    /**\r\n     * Sort the word list by size, largest first.\r\n     */\r\n    function sortWords() {\r\n        _words.sort(function(a, b) {\r\n            if (a.origSize > b.origSize) return -1;\r\n            else if (a.origSize < b.origSize) return 1;\r\n            else return 0;\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * Creates the Label that gets displayed on the stage.\r\n     * Randomly selects an angle from possible values.\r\n     * Calculates the mask of the word (used in hit detection).\r\n     * @param\twordObj\r\n     */\r\n\r\n    function createWordGraphics(wordObj) {\r\n        var adjustedSize = findNewRelativeSize(wordObj, that.sizeAdjustment);\r\n        wordObj.fontSize = adjustedSize > that.minFontSize ? adjustedSize : that.minFontSize;\r\n        wordObj.fontFamily = myFont;\r\n        \r\n        measureDimensions(wordObj);\r\n        // these values are needed for accurate x and y co-ordinates after rotating the word\r\n        wordObj.tx = 0;\r\n        wordObj.ty = wordObj.height;\r\n        //~ var trueHeight = measureTextHeight(wordObj);\r\n        //~ console.log(wordObj.height, trueHeight);\r\n        //~ wordObj.height = trueHeight;\r\n        \r\n        var angle = 0;\r\n        \r\n        if (that.getWordOrientation() === that.MIXED) {\r\n\t        if (wordObj.text.match(/\\s/) == null) {\r\n\t\t\t\tif (Math.random() > 0.66) {\r\n\t\t\t\t\tvar tempHeight = wordObj.height;\r\n\t\t\t\t\tvar tempWidth = wordObj.width;\r\n\t\t\t\t\twordObj.height = tempWidth;\r\n\t\t\t\t\twordObj.width = tempHeight;\r\n\t\t\t\t\tif (Math.round(Math.random()) == 0) {\r\n\t\t\t\t\t\tangle = 90;\r\n\t\t\t\t\t\twordObj.ty = 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tangle = -90;\r\n\t\t\t\t\t\twordObj.ty = wordObj.height;\r\n\t\t\t\t\t\twordObj.tx = wordObj.width;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n        }\r\n        \r\n        \r\n\r\n        wordObj.size = Math.max(wordObj.height, wordObj.width);\r\n        wordObj.rotation = degreesToRadians(angle);\r\n        \r\n        // find the pixels that aren't transparent and store them as the mask\r\n        app.context.fillStyle = app.canvas.style.backgroundColor;\r\n        app.context.fillRect(0, 0, app.canvas.width, app.canvas.height);\r\n        wordObj.draw(app.context);\r\n        var imageData = app.context.getImageData(wordObj.x, wordObj.y, wordObj.width, wordObj.height);\r\n        var mask = new Array();\r\n        for (var x = 0; x < wordObj.width; x++) {\r\n            var xm = Math.floor(x / that.COARSENESS) * that.COARSENESS;\r\n            if (mask[xm] == null) mask[xm] = {};\r\n            for (var y = 0; y < wordObj.height; y++) {\r\n                var ym = Math.floor(y / that.COARSENESS) * that.COARSENESS;\r\n                var pixel = getPixel(x, y, imageData);\r\n                var pixelColor = 'rgb('+pixel[0]+', '+pixel[1]+', '+pixel[2]+')';\r\n                if (pixelColor != app.canvas.style.backgroundColor) {\r\n                    mask[xm][ym] = true;\r\n                }\r\n                if (mask[xm][ym]) {\r\n                    y = ym + that.COARSENESS; // there's a match, so skip ahead\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n        wordObj.mask = mask;\r\n    }\r\n    \r\n    /**\r\n     * Helper method which runs createWordGraphics for all the words.\r\n     */\r\n    function createAllGraphics() {\r\n    \tfor (var i = 0; i < _words.length; i++) {\r\n            createWordGraphics(_words[i]);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Arrange the words on the stage using the chosen layout scheme.\r\n     */\r\n    this.arrangeWords = function() {\r\n//    \tconsole.profile();\r\n        clearTimeout(timer);\r\n        app.clear(); // reset canvas\r\n        \r\n        this.toggleLoadingText();\r\n\r\n        if (_words.length > 0) {\r\n            \r\n            this.grid = [];\r\n            timer_i = 0; // used as the increment for the word list\r\n      \r\n            function doArrange() {                \r\n                // common variables between the layout schemes\r\n                var x;\r\n                var y;\r\n                var word;\r\n                var breakOut;\r\n                var fail;\r\n                var wordCount = this.wordsToArrange - 1;\r\n                var appCanvasWidth = app.canvas.width;\r\n                var appCanvasHeight = app.canvas.height;\r\n                var halfWidth = appCanvasWidth * 0.5;\r\n                var halfHeight = appCanvasHeight * 0.5;\r\n                var dd = 0.05;\r\n\r\n                do {\r\n                    word = _words[timer_i];\r\n                    if (word !== undefined) {\r\n\t                    var a = Math.random() * Math.PI; // angle?\r\n\t                    var d = Math.random() * (word.size * 0.25); // diameter?\r\n\t                    var da = (Math.random() - 0.5) * 0.5;\r\n\t                    var halfWordWidth = word.width * 0.5;\r\n\t                    var halfWordHeight = word.height * 0.5;\r\n\t\r\n\t                    while (true) {\r\n\t                        x = Math.floor((halfWidth + (Math.cos(a) * d * this.ratio) - halfWordWidth) / this.COARSENESS) * this.COARSENESS;\r\n\t                        y = Math.floor((halfHeight + (Math.sin(a) * d) - halfWordHeight) / this.COARSENESS) * this.COARSENESS;\r\n\t\r\n\t                        fail = false;\r\n\t                        if (x + halfWordWidth >= appCanvasWidth || y + halfWordHeight >= appCanvasHeight) {\r\n\t                            fail = true;\r\n\t                        } else {\r\n\t                        \tfail = hitTest(x, y, word.height, word.width, word.mask);\r\n\t                        }\r\n\t                        if (!fail) {\r\n\t                            break;\r\n\t                        }\r\n\t                        a += da;\r\n\t                        d += dd;\r\n\t                    }\r\n\t\r\n\t                    finalizeWord(x, y, word);\r\n\t                    if (app.useFadeEffect) {\r\n\t                    \tword.alpha = 0;\r\n\t\t                    for (var w = 0; w < timer_i; w++) {\r\n\t\t                        var wrd = _words[w];\r\n\t\t                        if (wrd.alpha < 1) fadeWord(wrd);\r\n\t\t                    }\r\n\t                    } else {\r\n\t                    \tword.alpha = 1;\r\n\t                    \tword.draw(app.context);\r\n\t                    }\r\n                    }\r\n                    timer_i++;\r\n                    if (timer_i >= _words.length) {\r\n                        clearTimeout(timer);\r\n//                        console.profileEnd();\r\n                        this.doingArrange = false;\r\n                        \r\n                        this.toggleLoadingText(false);                               \r\n                        \r\n                        drawWords();\r\n                        \r\n                        break;\r\n                    }\r\n                } while (wordCount--);\r\n            }\r\n            \r\n            /**\r\n             * Test the mask of a word against the overall grid to see if they intersect.\r\n             * @param\tx\r\n             * @param\ty\r\n             * @param\th\r\n             * @param\tw\r\n             * @param\tmask\r\n             * @return\r\n             */\r\n            function hitTest(x, y, h, w, mask) {\r\n                for (var xt = 0; xt <= w; xt += this.COARSENESS) {\r\n                    for (var yt = 0; yt <= h; yt += this.COARSENESS) {\r\n                        if (mask[xt] && mask[xt][yt] && this.grid[xt + x] != null && this.grid[xt + x][yt + y] != null) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n            \r\n            /**\r\n             * Set the new position of the word, and make it visible.\r\n             * @param\tx\r\n             * @param\ty\r\n             * @param\tword\r\n             * @param   drawIt\r\n             */\r\n            function finalizeWord(x, y, word, drawIt) {\r\n                set_grid(x, y, word);\r\n\r\n                word.x = x;\r\n                word.y = y;\r\n\r\n                word.live = true;\r\n                if (drawIt) {\r\n                \t/*\r\n                    if ($.browser.webkit) {\r\n                        // cover the canvas with a transparent rectangle\r\n                        // forces webkit to show the words\r\n                        app.context.fillStyle = 'rgba(0,0,0,0)';\r\n                        app.context.fillRect(0, 0, app.canvas.width, app.canvas.height);\r\n                    }\r\n                    */\r\n                    word.draw(app.context);\r\n                }\r\n            }\r\n            \r\n            function fadeWord(word) {\r\n                word.alpha += 0.25;\r\n//                if ($.browser.webkit) {\r\n                    // cover the canvas with a transparent rectangle\r\n                    // forces webkit to show the words\r\n//                    app.context.fillStyle = 'rgba(0,0,0,0)';\r\n//                    app.context.fillRect(0, 0, app.canvas.width, app.canvas.height);\r\n//               }\r\n                word.draw(app.context);\r\n            }\r\n\r\n            /**\r\n             * Mark the spots on the grid where the word is located.\r\n             * @param\tx\r\n             * @param\ty\r\n             * @param\tword\r\n             */\r\n            function set_grid(x, y, word) {\r\n                for (var xt = 0; xt < word.width; xt += this.COARSENESS) {\r\n                    for (var yt = 0; yt < word.height; yt += this.COARSENESS) {\r\n                        if (word.mask[xt] && word.mask[xt][yt]) {\r\n                            if (!this.grid[xt + x]) this.grid[xt + x] = [];\r\n                            this.grid[xt + x][yt + y] = word;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            \r\n            doArrange = doArrange.createDelegate(this);\r\n            hitTest = hitTest.createDelegate(this);\r\n            finalizeWord = finalizeWord.createDelegate(this);\r\n            fadeWord = fadeWord.createDelegate(this);\r\n            set_grid = set_grid.createDelegate(this);\r\n            this.doingArrange = true;\r\n            \r\n//            if ($.browser.mozilla) {\r\n//                // FF needs more time to perform each layout run\r\n//                timer = setInterval(doArrange, 250);\r\n//            } else {\r\n                timer = setInterval(doArrange, 50);\r\n//            }\r\n            \r\n        } else {\r\n            alert(\"Error: There are no words to arrange.\");\r\n        }\r\n    }\r\n    \r\n    this.toggleLoadingText = function(show) {\r\n        app.context.save();\r\n        \r\n        if (show) app.context.fillStyle = 'black';\r\n        else app.context.fillStyle = app.canvas.style.backgroundColor;\r\n        \r\n        app.context.textBaseline = 'top';\r\n        app.context.font = '10px Arial';\r\n        var offset = app.context.measureText('Loading').width + 10;\r\n        app.context.fillText('Loading', app.canvas.width - offset, 10);\r\n        \r\n        app.context.restore();\r\n    }\r\n    \r\n    this.startUpdates = function() {\r\n    \ttimer = setInterval(drawWords, that.UPDATE_RATE);\r\n    }\r\n    \r\n    this.stopUpdates = function() {\r\n    \tif (overWord != null) {\r\n\t    \t// remove existing tooltip\r\n\t    \toverWord = null;\r\n\t    \tdrawWords();\r\n    \t}\r\n    \tclearTimeout(timer);\r\n    }\r\n    \r\n    function drawWords() {\r\n        app.clear();\r\n        var i = _words.length;\r\n        while(i--) {\r\n        \tvar word = _words[i];\r\n            word.alpha = 1;\r\n            if (word.live) word.draw(app.context);\r\n        }\r\n        var $canvasEl = $(app.canvas);\r\n        if (overWord != null) {\r\n        \t// add pointer cursor\r\n        \t$canvasEl.css('cursor', 'pointer');\r\n        \t\r\n            // draw the tooltip\r\n            app.context.save();\r\n            app.context.textBaseline = 'alphabetic';\r\n            app.context.font = '12px Arial';\r\n            \r\n            var wordWidth = app.context.measureText(overWord.text).width;\r\n            var valueWidth = app.context.measureText(overWord.value).width;\r\n            var maxWidth = wordWidth > valueWidth ? wordWidth : valueWidth;\r\n            maxWidth += 20;\r\n            \r\n            var x = overX + 15;\r\n            var y = overY + 25;\r\n            var appWidth = $canvasEl.width();\r\n            var appHeight = $canvasEl.height();\r\n            if (x + maxWidth >= appWidth) {\r\n            \tx -= maxWidth;\r\n            }\r\n            if (y + 40 >= appHeight) {\r\n            \ty -= 40;\r\n            }\r\n            \r\n            app.context.fillStyle = 'rgba(255,255,255,0.9)';\r\n            app.context.strokeStyle = 'rgba(100,100,100,0.9)';\r\n            app.context.translate(x, y);\r\n            app.context.fillRect(0, 0, maxWidth, 40);\r\n            app.context.strokeRect(0, 0, maxWidth, 40);\r\n            app.context.fillStyle = 'rgba(0,0,0,0.9)';\r\n            app.context.fillText(overWord.text+':', 8, 18);\r\n            app.context.fillText(overWord.value, 8, 30);\r\n            app.context.restore();\r\n        } else {\r\n        \t$canvasEl.css('cursor', 'default');\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Checks to see if the mouse is currently over a word.\r\n     * @param\tevent\r\n     */\r\n    this.handleMouseMove = function(event) {\r\n        if (!this.doingArrange) {\r\n        \tvar i = _words.length;\r\n            while(i--) {\r\n                _words[i].isOver = false;\r\n            }\r\n            var offset = $(app.canvas).offset();\r\n            var remainder = (event.pageX - offset.left) % this.COARSENESS;\r\n            var x = (event.pageX - offset.left) - remainder;\r\n            remainder = (event.pageY - offset.top) % this.COARSENESS;\r\n            var y = (event.pageY - offset.top) - remainder;\r\n            overWord = this.findWordByCoords(x, y);\r\n            if (overWord != null) {\r\n                overWord.isOver = true;\r\n                overX = x;\r\n                overY = y;\r\n            }\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Checks to see if a word was clicked on, and then sends out the corresponding event.\r\n     * @param\tevent\r\n     * @return\r\n     */\r\n    this.handleWordClick = function(event) {\r\n        var offset = $(app.canvas).offset();\r\n        var remainder = (event.pageX - offset.left) % this.COARSENESS;\r\n        var x = (event.pageX - offset.left) - remainder;\r\n        remainder = (event.pageY - offset.top) % this.COARSENESS;\r\n        var y = (event.pageY - offset.top) - remainder;\r\n        var matchingWord = this.findWordByCoords(x, y);\r\n        \r\n        if (matchingWord != null) {\r\n            return {text: matchingWord.text, value: matchingWord.value};\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Returns the word which occupies the co-ordinates that were passed in.\r\n     * @param\tx\r\n     * @param\ty\r\n     * @return\r\n     */\r\n    this.findWordByCoords = function(x, y) {\r\n        var matchingWord = null;\r\n        if (this.grid[x] !=  null) {\r\n            if (this.grid[x][y] != null) {\r\n                matchingWord = this.grid[x][y];\r\n            } else if (this.grid[x][y + this.COARSENESS] != null) {\r\n                matchingWord = this.grid[x][y + this.COARSENESS];\r\n            }\r\n        }\r\n        if (matchingWord == null && this.grid[x + this.COARSENESS] != null) {\r\n            if (this.grid[x + this.COARSENESS][y] != null) {\r\n                matchingWord = this.grid[x + this.COARSENESS][y];\r\n            } else if (this.grid [x + this.COARSENESS][y + this.COARSENESS] != null) {\r\n                matchingWord = this.grid[x + this.COARSENESS][y + this.COARSENESS];\r\n            }\r\n        }\r\n        \r\n        return matchingWord;\r\n    }\r\n    \r\n    /**\r\n     * Convert an angle in degrees to radians.\r\n     * @param\tdegrees\r\n     * @return\r\n     */\r\n    function degreesToRadians(degrees) {\r\n        var radians = degrees * (Math.PI / 180);\r\n        return radians;\r\n    }\r\n    \r\n    /**\r\n     * Convenience function to map a variable from one coordinate space to another (from processing).\r\n     */\r\n    function mapValue(value, istart, istop, ostart, ostop) {\r\n        return ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\r\n    }\r\n    \r\n}\r\n\r\n// from Ext\r\nFunction.prototype.createDelegate = function(obj, args, appendArgs){\r\n    var method = this;\r\n    return function() {\r\n        var callArgs = args || arguments;\r\n        if (appendArgs === true){\r\n            callArgs = Array.prototype.slice.call(arguments, 0);\r\n            callArgs = callArgs.concat(args);\r\n        }else if (typeof appendArgs==\"number\"){\r\n            callArgs = Array.prototype.slice.call(arguments, 0); // copy arguments first\r\n            var applyArgs = [appendArgs, 0].concat(args); // create method call params\r\n            Array.prototype.splice.apply(callArgs, applyArgs); // splice them in\r\n        }\r\n        return method.apply(obj || window, callArgs);\r\n    };\r\n}","/**\n * Voyant changes & additions:\n * - height setter, height no longer calculated based on content\n * - replaced tree.size with tree.nodeSize\n * - pointer cursor for node\n * - rect now behind text, made opaque to block paths obscuring text\n * - branch length based on text length on per node basis\n * - click handler\n * - zoom fixes\n * - redraw checks for tries before re-running setup\n * - prevent negative height error\n */\n\n/*\n * (This is the new BSD license.) Copyright (c) 2012-2014, Chris Culy All rights\n * reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met: *\n * Redistributions of source code must retain the above copyright notice, this\n * list of conditions and the following disclaimer. * Redistributions in binary\n * form must reproduce the above copyright notice, this list of conditions and\n * the following disclaimer in the documentation and/or other materials provided\n * with the distribution. * Neither the name of the Chris Culy nor the names of\n * its contributors may be used to endorse or promote products from this\n * software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY Chris Culy ``AS IS'' AND ANY OR IMPLIED\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO\n * EVENT SHALL Chris Culy BE LIABLE FOR ANY, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; OF USE, DATA, OR PROFITS; OR\n * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\"use strict\";\n/**\n * @namespace doubletree All of the functionality is in the doubletree namespace\n */\nvar doubletree = {};\n\n(function() {\n\n// TBD what about visWidth? to be fixed visWidth is really width and width\n// is really just the width of one side of the doubletree\n\n/**\n * @class doubletree.DoubleTree This is the class for the DoubleTree\n *        visualization\n */\ndoubletree.DoubleTree = function() {\n\tvar containers = []; // nominally for allowing the same tree in\n\t\t\t\t\t\t\t// multiple places, but not tested and probably\n\t\t\t\t\t\t\t// doesn't work right (e.g. for search)\n\t// defaults. see below for getter/setters\n\tvar visWidth = 600;\n\tvar visHt = 400; // calculated, not settable\n\tvar prefixesOnRight = false; // true for right to left writing systems\n\tvar filters = {\n\t\t\"left\" : [],\n\t\t\"right\" : []\n\t};\n\tvar handlers = {\n\t\t\"alt\" : noOp,\n\t\t\"shift\" : noOp,\n\t\t\"click\" : noOp\n\t};\n\tvar showTokenExtra = true;\n\tvar scaleLabels = true;\n\tvar sortFun = doubletree.sortByStrFld(\"token\");\n\tvar nodeText = doubletree.tokenText; // default\n\tvar tokenExtraText = function(info) {\n\t\treturn doubletree.fieldText(info, \"POS\");\n\t};\n\tvar rectColor = function(info) {\n\t\treturn \"rgba(255,255,255,1)\";\n\t};\n\tvar rectBorderColor = function(info) {\n\t\treturn \"rgba(255,255,255,1)\";\n\t};\n\tvar continuationColor = function(info) {\n\t\treturn \"red\";\n\t};\n\tvar basicStyles = {\n\t\t\"node\" : {\n\t\t\t\"fill\" : \"white\",\n\t\t\t\"stroke\" : \"steelblue\",\n\t\t\t\"stroke-width\" : \"1.5px\"\n\t\t},\n\t\t\"branch\" : {\n\t\t\t\"stroke\" : \"#aaa\",\n\t\t\t\"stroke-width\" : \"1.5px\"\n\t\t}\n\t};\n\n\tvar succeeded = false; // did we succeed in building a DoubleTree? we\n\t\t\t\t\t\t\t// need this flag, since we no longer return\n\t\t\t\t\t\t\t// true/false from setupFromX (since we do\n\t\t\t\t\t\t\t// chaining)\n\n\tvar dispatch = d3.dispatch(\"idsUpdated\");\n\tdispatch.on(\"idsUpdated\", function() {\n\t\tif (this == leftTree) {\n\t\t\trtTree.setIds(leftTree.continuationIDs);\n\t\t\trtTree.updateContinuations();\n\t\t} else if (this == rtTree) {\n\t\t\tleftTree.setIds(rtTree.continuationIDs);\n\t\t\tleftTree.updateContinuations();\n\t\t}\n\t});\n\n\tvar leftTrie, rtTrie, leftTree, rtTree;\n\tvar visibleIDs; // the ids of the results that are showing\n\n\t// tmp, until we can do sizing right. the font sizes are specified in\n\t// doubletree.css and manually copied here\n\tvar kFontSize = 14; // normal\n\tvar kBigFontSize = 1.15 * kFontSize; // for found text and\n\t\t\t\t\t\t\t\t\t\t\t// continuations (was 18) NB:\n\t\t\t\t\t\t\t\t\t\t\t// this is 0.05 bigger than in\n\t\t\t\t\t\t\t\t\t\t\t// doubletree.css\n\tvar kMinFontSize = 8; // smallest that we'll scale to\n\tvar textScale;\n\n\t/** @exports mine as doubletree.DoubleTree */\n\t/** @ignore */\n\tfunction mine(selection) {\n\t\t// generate container and data independent part of chart here, using\n\t\t// `width` and `height` etc\n\n\t\tselection.each(function(d, i) {\n\t\t\t// generate chart here; `d` is the data and `this` is the\n\t\t\t// element\n\t\t\t// really, storing containers. Use updateData and redraw to\n\t\t\t// really do the generation\n\t\t\tcontainers.push(this.node());\n\t\t});\n\n\t}\n\n\t/**\n\t * initialize the visualization in one or more html containers\n\t * <p>\n\t * \n\t * @param containerPattern\n\t *            CSS selector for the containers\n\t */\n\tmine.init = function(containerPattern) {\n\t\td3.select(d3.selectAll(containerPattern)).call(this);\n\t\treturn mine;\n\t};\n\n\t/**\n\t * redraw the visualization\n\t */\n\tmine.redraw = function() {\n\t\tif (leftTrie !== undefined && rtTrie !== undefined) {\n\t\t\tmine.setupFromTries(leftTrie, rtTrie);\n\t\t}\n\n\t\treturn mine;\n\t};\n\n\t/**\n\t * set up the visualization using 2 {@link doubletree.Trie}s\n\t * \n\t * @param leftOne\n\t *            the left {@link doubletree.Trie}\n\t * @param rtOne\n\t *            the right {@link doubletree.Trie}\n\t */\n\tmine.setupFromTries = function(leftOne, rtOne) {\n\t\tleftTrie = leftOne.getUniqRoot();\n\t\trtTrie = rtOne.getUniqRoot();\n\n\t\tvar leftTrieTree = leftTrie.toTree(filters.left);\n\t\tvar rtTrieTree = rtTrie.toTree(filters.right);\n\n\t\tvar copyIDs = true;\n\t\tif (Object.keys(rtTrieTree.pruned).length > 0) {\n\t\t\tnew_pruneTree(rtTrieTree, rtTrieTree.pruned, copyIDs);\n\t\t\tnew_pruneTree(leftTrieTree, rtTrieTree.pruned, copyIDs);\n\t\t\tcopyIDs = false;\n\t\t}\n\n\t\tif (Object.keys(leftTrieTree.pruned).length > 0) {\n\t\t\tnew_pruneTree(leftTrieTree, leftTrieTree.pruned, copyIDs);\n\t\t\tnew_pruneTree(rtTrieTree, leftTrieTree.pruned, copyIDs);\n\t\t}\n\n\t\t// combine the info's from the two trees\n\t\tvar newInfo = {}; // rtTrieTree.info;\n\n\t\tfor ( var k in rtTrieTree.info) {\n\t\t\tif (k != \"continuations\" && k != \"ids\" && k != \"count\") {\n\t\t\t\tnewInfo[k] = rtTrieTree.info[k];\n\t\t\t}\n\t\t}\n\n\t\tnewInfo[\"right continuations\"] = rtTrieTree.info.continuations;\n\t\tnewInfo[\"left continuations\"] = leftTrieTree.info.continuations;\n\n\t\tnewInfo.ids = {};\n\t\taddTo(newInfo.ids, rtTrieTree.info.ids);\n\t\taddTo(newInfo.ids, leftTrieTree.info.ids);\n\t\tnewInfo.count = Object.keys(newInfo.ids).length;\n\t\tvisibleIDs = Object.keys(newInfo.ids);\n\n\t\tif (rtTrieTree.info.origIDs || leftTrieTree.info.origIDs) {\n\t\t\tnewInfo.origIDs = {};\n\t\t\taddTo(newInfo.origIDs, rtTrieTree.info.origIDs);\n\t\t\taddTo(newInfo.origIDs, leftTrieTree.info.origIDs);\n\t\t\tnewInfo.origCount = Object.keys(newInfo.origIDs).length;\n\t\t}\n\n\t\trtTrieTree.info = newInfo;\n\t\tleftTrieTree.info = newInfo;\n\n\t\tvar maxChildren = Math.max(leftTrieTree.maxChildren,\n\t\t\t\trtTrieTree.maxChildren);\n\t\tif (isNaN(maxChildren) || maxChildren == 0) {\n\t\t\tsucceeded = false;\n\t\t\treturn mine;\n\t\t}\n\n\t\tif (scaleLabels) {\n\t\t\ttextScale = d3.scaleLog().range([ kMinFontSize, kFontSize ]);\n\t\t} else {\n\t\t\ttextScale = function() {\n\t\t\t\treturn kFontSize;\n\t\t\t};\n\t\t\ttextScale.domain = function() {\n\t\t\t};\n\t\t}\n\n\t\tvar minCount = Math.min(leftTrieTree.minCount, rtTrieTree.minCount);\n\t\ttextScale.domain([ minCount, leftTrieTree.info.count ]);\n\n\t\t// TBD ?? margin, width, height, duplicated in Tree\n\t\tvar margin = {\n\t\t\ttop : 20,\n\t\t\tright : 20,\n\t\t\tbottom : 20,\n\t\t\tleft : 20\n\t\t};\n\t\tvar width = visWidth - margin.right - margin.left;\n\t\tvar height = visHt - margin.top - margin.bottom;\n\n\t\tcontainers.forEach(function(d, i) {\n\t\t\tvar thisContainer = d;\n\t\t\tvar thisVis;\n\n\t\t\tvar tmp = d3.select(thisContainer).select(\"svg\");\n\t\t\tif (tmp.node() == null) {\n\t\t\t\tthisVis = d3.select(thisContainer).append(\"svg\")\n\t\t\t\t\t.attr(\"width\", width + margin.right + margin.left)\n\t\t\t\t\t.attr(\"height\", height + margin.top + margin.bottom)\n\t\t\t\t\t.attr(\"cursor\", \"move\")\n\t\t\t\t\t.call(d3.zoom().scaleExtent([1,1]).on('zoom', function() {\n\t\t\t\t\t\tvar x = d3.event.transform.x + width/2; // need offset because of initial offset in g element\n\t\t\t\t\t\tvar y = d3.event.transform.y + height/2;\n\t\t\t\t\t\td3.select(thisContainer).select(\"svg > g\").attr(\"transform\", 'translate('+x+','+y+')');\n\t\t\t\t\t}));\n\n\t\t\t\tthisVis.append(\"g\") // container for both trees\n\t\t\t\t\t.attr('transform', 'translate('+width/2+','+height/2+')'); // initial offset\n\n\t\t\t} else {\n\t\t\t\tthisVis = tmp;\n\t\t\t\tthisVis\n\t\t\t\t\t.attr(\"width\", width + margin.right + margin.left)\n\t\t\t\t\t.attr(\"height\", height + margin.top + margin.bottom);\n\t\t\t\tthisVis.selectAll(\"g *\").remove(); // clear\n\t\t\t\t\t\t\t\t\t\t\t\t\t// previous\n\t\t\t}\n\n\t\t\tleftTree = new doubletree.Tree(thisVis.select(\"g\"),\n\t\t\t\t\tvisWidth, visHt, leftTrieTree, true,\n\t\t\t\t\tsortFun, dispatch, textScale, showTokenExtra,\n\t\t\t\t\tnodeText, tokenExtraText, rectColor,\n\t\t\t\t\trectBorderColor, continuationColor, basicStyles);\n\t\t\trtTree = new doubletree.Tree(thisVis.select(\"g\"),\n\t\t\t\t\tvisWidth, visHt, rtTrieTree, false,\n\t\t\t\t\tsortFun, dispatch, textScale, showTokenExtra,\n\t\t\t\t\tnodeText, tokenExtraText, rectColor,\n\t\t\t\t\trectBorderColor, continuationColor, basicStyles);\n\t\t});\n\n\t\tleftTree.handleAltPress = handlers.alt;\n\t\trtTree.handleAltPress = handlers.alt;\n\n\t\tleftTree.handleShiftPress = handlers.shift;\n\t\trtTree.handleShiftPress = handlers.shift;\n\t\t\n\t\tleftTree.handleClick = handlers.click;\n\t\trtTree.handleClick = handlers.click;\n\n\t\tsucceeded = true;\n\t\treturn mine;\n\t};\n\n\t// hitArray is an array of items, prefixArray and suffixArray are arrays\n\t// of arrays of items\n\t/**\n\t * set up the visualization from arrays corresponding to the hit, the\n\t * prefix, and the suffix of a key word in context result.\n\t * <p>\n\t * The ith elements should correspond with each other. Each item\n\t * consists of fields separated by a field delimiter. For example we\n\t * might have word/tag (with / as the delimiter) or word\\tlemma\\tauthor\n\t * (with tab (\\t) as the delimiter) Only certain fields are relevant for\n\t * deciding whether two items are to be considered the same (e.g. we\n\t * might ignore an author field)\n\t * \n\t * @param prefixArray\n\t *            the array of arrays of the prefixes of the hits\n\t * @param hitArray\n\t *            the array of the hits\n\t * @param suffixArray\n\t *            the array of arrays of the suffixes of the hits\n\t * @param idArray\n\t *            the array of ids of the hits (or null, if there are no ids\n\t *            for the hits)\n\t * @param caseSensitive\n\t *            are the hits case sensitive\n\t * @param fieldNames\n\t *            the names of the fields\n\t * @param fieldDelim\n\t *            the field delimiter\n\t * @param distinguishingFieldsArray\n\t *            the fields that determine identity\n\t * @param prefixesOnRight\n\t *            display the prefixes on the right, for right-to-left\n\t *            writing systems. Default is false\n\t */\n\tmine.setupFromArrays = function(prefixArray, hitArray, suffixArray, idArray, caseSensitive, fieldNames, fieldDelim, distinguishingFieldsArray) {\n\n\t\tif (undefined == caseSensitive && leftTrie) {\n\t\t\tcaseSensitive = leftTrie.caseSensitive();\n\t\t}\n\t\tif (undefined == fieldNames && leftTrie) {\n\t\t\tfieldNames = leftTrie.fieldNames();\n\t\t}\n\t\tif (undefined == fieldDelim && leftTrie) {\n\t\t\tfieldDelim = leftTrie.fieldDelim();\n\t\t}\n\t\tif (undefined == distinguishingFieldsArray && leftTrie) {\n\t\t\tdistinguishingFieldsArray = leftTrie.distinguishingFieldsArray();\n\t\t}\n\n\t\tleftTrie = new doubletree.Trie(caseSensitive, fieldNames, fieldDelim, distinguishingFieldsArray);\n\t\trtTrie = new doubletree.Trie(caseSensitive, fieldNames, fieldDelim, distinguishingFieldsArray);\n\n\t\tvar n = hitArray.length;\n\t\tfor ( var i = 0; i < n; i++) {\n\t\t\tvar thisID = idArray ? idArray[i] : i;\n\t\t\tvar thisHit = hitArray[i];\n\t\t\tvar thesePrefixes = prefixArray[i].slice();\n\t\t\tvar theseSuffixes = suffixArray[i].slice();\n\n\t\t\tthesePrefixes.push(thisHit);\n\t\t\tthesePrefixes.reverse();\n\t\t\ttheseSuffixes.unshift(thisHit);\n\n\t\t\t/*\n\t\t\t * if (prefixesOnRight) { //e.g. for Arabic, Hebrew, N'Ko, ...\n\t\t\t * thesePrefixes.push(thisHit); thesePrefixes.reverse();\n\t\t\t * \n\t\t\t * rtTrie.addNgram( thesePrefixes, thisID);\n\t\t\t * \n\t\t\t * theseSuffixes.unshift(thisHit); leftTrie.addNgram(\n\t\t\t * theseSuffixes, thisID);\n\t\t\t *  } else { thesePrefixes.push(thisHit);\n\t\t\t * thesePrefixes.reverse(); leftTrie.addNgram( thesePrefixes,\n\t\t\t * thisID);\n\t\t\t * \n\t\t\t * theseSuffixes.unshift(thisHit); rtTrie.addNgram(\n\t\t\t * theseSuffixes, thisID); }\n\t\t\t */\n\n\t\t\tif (prefixesOnRight) {\n\t\t\t\trtTrie.addNgram(thesePrefixes, thisID);\n\t\t\t\tleftTrie.addNgram(theseSuffixes, thisID);\n\t\t\t} else {\n\t\t\t\tleftTrie.addNgram(thesePrefixes, thisID);\n\t\t\t\trtTrie.addNgram(theseSuffixes, thisID);\n\t\t\t}\n\t\t}\n\n\t\tmine.setupFromTries(leftTrie, rtTrie);\n\t\treturn mine;\n\t};\n\n\t/**\n\t * @returns just the <em>ids</em> of the data that satisfies the\n\t *          current filters\n\t */\n\tmine.filteredIDs = function() {\n\t\treturn visibleIDs;\n\t};\n\n\t// return how many found\n\t/**\n\t * search the nodes of the visualization for a pattern\n\t * <p>\n\t * The found nodes will get the CSS class foundText\n\t * \n\t * @param searchRE\n\t *            the regular expression to look for\n\t * @returns how many nodes were found\n\t */\n\tmine.search = function(searchRE) {\n\t\tleftTree.search(searchRE);\n\t\trtTree.search(searchRE);\n\n\t\tvar thisVis = d3.select(containers[0]);\n\t\tvar found = thisVis.selectAll(\"text.foundText\");\n\n\t\tif (found.empty()) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar what = found[0].length;\n\n\t\tvar foundRt = thisVis.selectAll(\"text.rtNdText.foundText\");\n\n\t\tif (foundRt.node() != null) {\n\t\t\twhat--; // root node, and we have 2 of those, so subtract one\n\t\t\t\t\t// from the count\n\t\t}\n\t\treturn what;\n\t};\n\n\t/**\n\t * clear the visualization of the search results\n\t * <p>\n\t * the CSS class foundText is removed\n\t */\n\tmine.clearSearch = function() {\n\t\tleftTree.clearSearch();\n\t\trtTree.clearSearch();\n\t\treturn mine;\n\t};\n\n\t/**\n\t * update the showing/hiding of extra information associated with the\n\t * basic item, e.g. part of speech information\n\t * <p>\n\t * Notes:\n\t * <ul>\n\t * <li>This <em>DOES</em> redraw the visualization.</li>\n\t * <li>Safari does not update the visualization correctly by itself, so\n\t * we force it to rebuild the entire visualization, unlike in other\n\t * browsers.</li>\n\t * </ul>\n\t */\n\tmine.updateTokenExtras = function() {\n\t\tleftTree.showTokenExtras(showTokenExtra);\n\t\trtTree.showTokenExtras(showTokenExtra);\n\n\t\t// Safari doesn't update reshowing correctly, so we'll force it to\n\t\t// build this again :( (Chrome works correctly, so it's not a webkit\n\t\t// issue)\n\t\tvar thisVis = d3.select(containers[0]);\n\t\tvar tokExtra = thisVis.select('.tokenExtra[display=\"inline\"]');\n\t\tif (!tokExtra.empty()) {\n\t\t\tvar ht = tokExtra.style(\"height\");\n\t\t\tif (ht == \"0px\") {\n\t\t\t\tmine.redraw();\n\t\t\t}\n\t\t}\n\n\t\treturn mine;\n\t};\n\n\t// ////////// getter/setters\n\t/**\n\t * Getter/setter for the maximum width of the DoubleTree area\n\t * \n\t * @param value\n\t *            the maximum width\n\t */\n\tmine.visWidth = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn visWidth;\n\t\tvisWidth = value;\n\t\treturn mine;\n\t};\n\n\t// ADDED\n\tmine.visHeight = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn visHt;\n\t\tvisHt = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for whether the prefixes are displayed on the right or\n\t * the left.\n\t * <p>\n\t * The default value is false, i.e. the prefixes are displayed on the\n\t * left, as in English. <em>prefixesOnRight</em> should be set to true\n\t * for right-to-left writing systems such as Arabic, Hebrew, N'Ko, etc.\n\t * \n\t * @param value\n\t *            true or false\n\t */\n\tmine.prefixesOnRight = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn prefixesOnRight;\n\t\tprefixesOnRight = value;\n\t\treturn mine;\n\t};\n\n\t// NB: doesn't redraw\n\t/**\n\t * Getter/setter for the filter functions.\n\t * <p>\n\t * The filter functions get an information object as their argument, and\n\t * return true/false. Each position away from the root has its own\n\t * filter, and the left and right sides also have their own filters. The\n\t * filters are specified via an object with \"left\" and \"right\" keys\n\t * whose values are arrays of functions The function at index <em>i</em>\n\t * filters position <em>i + 1</em> away from the root. Default is no\n\t * filtering (via empty arrays)\n\t * <p>\n\t * Note: setting the filters does <em>not</em> redraw the\n\t * visualization. See {@link #redraw}\n\t * \n\t * @param value\n\t *            an object containing the filters\n\t */\n\tmine.filters = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn filters;\n\t\tfilters = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the handlers for alt-click and shift-click on the\n\t * nodes.\n\t * <p>\n\t * The handlers get an information object as their argument. The\n\t * handlers are specified via an object with \"alt\" and \"shift\" keys\n\t * whose values are functions The default is no handlers, i.e.\n\t * <em>NO</em> interaction\n\t * \n\t * @param value\n\t *            an object containing the handlers\n\t */\n\tmine.handlers = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn handlers;\n\t\thandlers = value;\n\t\treturn mine;\n\t};\n\n\t// NB: doesn't redraw\n\t/**\n\t * Getter/setter for showing/hiding extra information associated with\n\t * the main value, e.g. part of speech information.\n\t * <p>\n\t * Note: setting this value does <em>not</em> redraw the\n\t * visualization. See {@link #redraw} Default is true\n\t * \n\t * @param value\n\t *            a boolean specifying whether to show the information or\n\t *            not\n\t */\n\tmine.showTokenExtra = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn showTokenExtra;\n\t\tshowTokenExtra = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for scaling the node labels by their frequency.\n\t * <p>\n\t * Default is true\n\t * \n\t * @param value\n\t *            a boolean specifying whether to scale the labels or not\n\t */\n\tmine.scaleLabels = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn scaleLabels;\n\t\tscaleLabels = value;\n\t\treturn mine;\n\t};\n\n\t// succeeded is read only\n\t/**\n\t * Reports whether the DoubleTree was constructed successfully\n\t * <p>\n\t * \n\t * @returns true if the DoubleTree was constructed successfully and\n\t *          false otherwise\n\t */\n\tmine.succeeded = function() {\n\t\treturn succeeded;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the sort order of sibling\n\t * nodes.\n\t * <p>\n\t * The function gets an information object as its argument, and should\n\t * return -1 for precedes, 1 for follows and 0 for don't care The nodes\n\t * are displayed in \"preceding\" (i.e. ascending) order, from top to\n\t * bottom. The default is alphabetical by a \"token\" field if there is\n\t * one: doubletree.sortByStrFld(\"token\")\n\t * \n\t * @param the\n\t *            sort order function\n\t */\n\tmine.sortFun = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn sortFun;\n\t\tsortFun = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the content of the node\n\t * labels.\n\t * <p>\n\t * The function gets an information object as its first argument and a\n\t * boolean indicating whether the node is the root or not as its second\n\t * argument. The function should return a string. The default is\n\t * {@link #tokenText}\n\t * \n\t * @param the\n\t *            content function\n\t */\n\tmine.nodeText = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn nodeText;\n\t\tnodeText = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the content of the \"extra\"\n\t * information for the labels labels\n\t * <p>\n\t * The function gets an information object as its first argument and a\n\t * boolean indicating whether the node is the root or not as its second\n\t * argument. The function should return a string. The default is the POS\n\t * field of the information object\n\t * \n\t * @param the\n\t *            content function\n\t */\n\tmine.tokenExtraText = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn tokenExtraText;\n\t\ttokenExtraText = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the color of the\n\t * background rectangles for the nodes.\n\t * <p>\n\t * The function gets an information object as its argument, and should\n\t * return a CSS color in a string, e.g. \"rgba(255,128,0,0.5)\" The\n\t * default is transparent white (i.e., effectively no color);\n\t * \n\t * @param value\n\t *            the background color function\n\t */\n\tmine.rectColor = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn rectColor;\n\t\trectColor = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the color of the borders\n\t * of the background rectangles for the nodes.\n\t * <p>\n\t * The function gets an information object as its argument, and should\n\t * return a CSS color in a string, e.g. \"rgba(255,128,0,0.5)\" The\n\t * default is transparent white (i.e., effectively no color);\n\t * \n\t * @param value\n\t *            the border color function\n\t */\n\tmine.rectBorderColor = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn rectBorderColor;\n\t\trectBorderColor = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the function determining the color of the text of\n\t * the nodes that are continuations of the clicked node.\n\t * <p>\n\t * The function gets an information object as its argument, and should\n\t * return a CSS color in a string, e.g. \"rgba(255,128,0,0.5)\" The\n\t * default is transparent white (i.e., effectively no color);\n\t * \n\t * @param value\n\t *            the border color function\n\t */\n\tmine.continuationColor = function(value) {\n\t\tif (!arguments.length)\n\t\t\treturn continuationColor;\n\t\tcontinuationColor = value;\n\t\treturn mine;\n\t};\n\n\t/**\n\t * Getter/setter for the styles of the nodes and branches. For now these\n\t * are constant throughout the tree. Takes an object of the form:\n\t * {\"node\":{\"fill\":cssColor, \"stroke\":cssColor,\n\t * \"stroke-width\":cssWidth}, \"branch\":{\"stroke\":cssColor,\n\t * \"stroke-width\":cssWidth}} All of the attributes are optional Defaults\n\t * are: {\"node\":{\"fill\":\"white\", \"stroke\":\"steelblue\",\n\t * \"stroke-width\":\"1.5px\"}, \"branch\":{\"stroke\":\"#777\",\n\t * \"stroke-width\":\"1.5px\"}};\n\t */\n\tmine.basicStyles = function(stylesObj) {\n\t\tif (!arguments.length)\n\t\t\treturn basicStyles;\n\n\t\tObject.keys(basicStyles).forEach(\n\t\t\tfunction(aspect) {\n\t\t\t\tif (aspect in stylesObj) {\n\t\t\t\t\tObject.keys(basicStyles[aspect]).forEach(\n\t\t\t\t\t\tfunction(attr) {\n\t\t\t\t\t\t\tif (attr in stylesObj[aspect]) {\n\t\t\t\t\t\t\t\tbasicStyles[aspect][attr] = stylesObj[aspect][attr];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\treturn mine;\n\t};\n\n\treturn mine;\n};\n\n// ////// tree for doubletree\n/** @private */\ndoubletree.Tree = function(vis, visWidth, visHt, data, toLeft,\n\t\tsortFun, dispatch, textScale, showTokenXtra, nodeTextFun,\n\t\ttokenExtraTextFun, rectColorFun, rectBorderFun, contColorFun,\n\t\tbaseStyles) {\n\tvar showTokenExtra = false || showTokenXtra;\n\tvar continuationIDs = {};\n\tvar clickedNode;\n\tvar nodeText = nodeTextFun;\n\tvar tokenExtraText = tokenExtraTextFun;\n\tvar rectColor = rectColorFun;\n\tvar rectBorderColor = rectBorderFun;\n\tvar continuationColor = contColorFun;\n\tvar basicStyles = baseStyles;\n\n\tvar margin = {\n\t\ttop : 20,\n\t\tright : 20,\n\t\tbottom : 20,\n\t\tleft : 20\n\t}, width = visWidth - margin.right - margin.left, height = visHt - margin.top - margin.bottom, i = 0, duration = 200, root;\n\tvar dx;\n\n\tif (!sortFun) {\n\t\tsortFun = doubletree.sortByStrFld(\"token\");\n\t}\n\n\tvar i = 0;\n\tvar tree = d3.tree()\n\t.size([height, width])\n\t.nodeSize([ 40, 40 ]);\n\t//.sort(sortFun);\n\n\tvar diagonal = d3.linkHorizontal()\n\t\t.x(function(d) { return positionX(d.y); })\n\t\t.y(function(d) { return positionY(d.x); });\n\n\tvis = vis.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\t// //////\n\tthis.readJSONTree = function(json) {\n\t\troot = d3.hierarchy(json);\n\t\troot.x0 = 0;\n\t\troot.y0 = 0;\n\n\t\troot.children.forEach(collapse);\n\t\tthis.update(root);\n\t};\n\n\t// CC had been inside readJSONTree\n\tfunction collapse(d) {\n\t\tif (d.children) {\n\t\t\td._children = d.children;\n\t\t\td._children.forEach(collapse);\n\t\t\td.children = null;\n\t\t}\n\t}\n\n\t// CC new\n\tfunction collapseSiblings(nd) {\n\t\tif (nd.parent) {\n\t\t\tnd.parent.children.forEach(function(d) {\n\t\t\t\tif (d != nd) {\n\t\t\t\t\tcollapse(d);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tthis.update = function(source) {\n\t\t// seems unnecessary\n//\t\tif (!source) {\n//\t\t\tsource = root;\n//\t\t}\n\n\t\t// Compute the new tree layout.\n\t\tvar treeData = tree(root);\n\t\tvar nodes = treeData.descendants();\n\n\t\tvar baseBranchSegmentWidth = 25;\n\t\t// Normalize for fixed-depth.\n\t\tnodes.forEach(function(d) {\n\t\t\tvar textSize = d.textSize;\n\t\t\tif (textSize == undefined) {\n\t\t\t\ttextSize = 0;\n\t\t\t\tvar parent = d.parent;\n\t\t\t\twhile (parent != null) {\n\t\t\t\t\tvar measured = Ext.draw.TextMeasurer.measureText(parent.data.name, 'arial').width;\n\t\t\t\t\ttextSize += measured;\n\t\t\t\t\tparent = parent.parent;\n\t\t\t\t}\n\t\t\t\td.textSize = textSize; // cache the size so we don't recalculate each time\n\t\t\t}\n\t\t\td.y = (d.depth * baseBranchSegmentWidth) + textSize;\n\t\t});\n\t\t\n\t\t\n\t\t// Update the nodes\u2026\n\t\tvar node = vis.selectAll(\"g.node_\" + toLeft)\n\t\t\t.data(nodes, function(d) {\n\t\t\t\treturn d.id || (d.id = ++i);\n\t\t\t});\n\n\t\t// Enter any new nodes at the parent's previous position.\n\t\tvar nodeEnter = node.enter().append(\"g\").attr(\"class\", \"node node_\" + toLeft).attr(\"cursor\", \"pointer\")\n\t\t\t.attr(\"transform\", function(d) {\n\t\t\t\treturn \"translate(\" + positionX(source.y0) + \",\" + positionY(source.x0) + \")\";\n\t\t\t})\n\t\t\t.on(\"click\", click);\n\n\t\tnodeEnter.append(\"title\").text(function(d) {\n\t\t\tvar what = doubletree.infoToText(d.data.info);\n\t\t\treturn what;\n\t\t});\n\n\t\tnodeEnter.append(\"circle\")\n\t\t\t.attr(\"r\", 1e-6)\n\t\t\t.style(\"fill\", function(d) {\n\t\t\t\treturn d._children ? \"#fff\" : basicStyles.node.fill;\n\t\t\t})\n\t\t\t.style(\"stroke\", function(d) {\n\t\t\t\treturn basicStyles.node.stroke;\n\t\t\t});\n\n\t\tvar txtNode = nodeEnter.append(\"text\").attr(\"class\", function(d) {\n\t\t\tif (d.depth == 0) {\n\t\t\t\treturn \"rtNdText\";\n\t\t\t} else {\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t}).attr(\"x\", function(d) {\n\t\t\tif (d.children || d._children) {\n\t\t\t\treturn 0;\n\t\t\t} else {\n\t\t\t\treturn toLeft ? 10 : -10;\n\t\t\t}\n\t\t}).attr(\"text-anchor\", function(d) {\n\t\t\tif (!d.parent) {\n\t\t\t\treturn \"middle\";\n\t\t\t}\n\t\t\tif (d.children || d._children) {\n\t\t\t\treturn toLeft ? \"end\" : \"start\";\n\t\t\t} else {\n\t\t\t\treturn toLeft ? \"start\" : \"end\";\n\t\t\t}\n\t\t}).style(\"font-size\", function(d) {\n\t\t\t/*\n\t\t\t * if (d.depth == 0 && toLeft) { return 0; //suppress left side\n\t\t\t * root -- do this because of differences in counts when\n\t\t\t * filtering }\n\t\t\t */\n\t\t\treturn textScale(d.data.info.count) + \"pt\";\n\t\t});\n\n\t\ttxtNode.append(\"tspan\").attr(\"dy\", \".35em\").attr(\"class\", \"tokenText\").text(function(d) {\n\t\t\treturn nodeText(d.data.info, d.depth < 1);\n\t\t}).style(\"fill-opacity\", 1e-6);\n\n\t\ttxtNode.append(\"tspan\").attr(\"dx\", \".35em\").attr(\"class\", \"tokenExtra\").text(function(d) {\n\t\t\treturn tokenExtraText(d.data.info, d.depth < 1);\n\t\t}).style(\"fill-opacity\", 1e-6);\n\n\t\t\n\t\tthis.drawRects();\n\n\t\tvar nodeUpdate = nodeEnter.merge(node);\n\t\t\n\t\t// Transition nodes to their new position.\n\t\tnodeUpdate.transition().duration(duration)\n\t\t\t.attr(\"transform\", function(d) {\n\t\t\t\treturn \"translate(\" + positionX(d.y) + \",\" + positionY(d.x) + \")\";\n\t\t\t});\n\n\t\tnodeUpdate.select(\"circle\")\n\t\t\t// .attr(\"r\", 4.5)\n\t\t\t.attr(\"r\", function(d) {\n\t\t\t\treturn (d.children || d._children) ? 1e-6 : 4.5;\n\t\t\t})\n\t\t\t.style(\"fill\", function(d) {\n\t\t\t\treturn d._children ? \"#fff\" : basicStyles.node.fill;\n\t\t\t}) // function(d) { return d._children ? \"lightsteelblue\" : \"#fff\";\n\t\t\t\t// })\n\t\t\t.style(\"stroke-width\", basicStyles.node[\"stroke-width\"]);\n\n\t\tnodeUpdate.selectAll(\"tspan\").style(\"fill-opacity\", 1);\n\n\t\t// Transition exiting nodes to the parent's new position.\n\t\tvar nodeExit = node.exit().transition().duration(duration).attr(\"transform\", function(d) {\n\t\t\treturn \"translate(\" + positionX(source.y) + \",\" + positionY(source.x) + \")\";\n\t\t}).remove();\n\n\t\tnodeExit.select(\"circle\").attr(\"r\", 1e-6);\n\n\t\t// nodeExit.select(\"text\")\n\t\tnodeExit.selectAll(\"tspan\").style(\"fill-opacity\", 1e-6);\n\n\t\t// Update the links\u2026\n\t\tvar link = vis.selectAll(\"path.link_\" + toLeft)\n\t\t\t.data(root.links(), function(d) {\n\t\t\t\tvar id = d.source.id+'-'+d.target.id;\n\t\t\t\treturn id;\n\t\t\t});\n\n\t\t// Enter any new links at the parent's previous position.\n\t\tvar linkEnter = link.enter().insert(\"path\", \"g\").attr(\"class\", \"link link_\" + toLeft)\n\t\t\t.attr(\"d\", function(d) {\n\t\t\t\tvar o = {x: source.x0, y: source.y0};\n\t\t\t\treturn diagonal({source: o, target: o});\n\t\t\t})\n\t\t\t.style(\"fill\", \"none\").style(\"stroke\", basicStyles.branch.stroke).style(\"stroke-width\", basicStyles.branch[\"stroke-width\"]);\n\n\t\tvar linkUpdate = linkEnter.merge(link);\n\t\t\n\t\t// Transition links to their new position.\n\t\tlinkUpdate.transition().duration(duration).attr(\"d\", diagonal);\n\n\t\t// Transition exiting nodes to the parent's new position.\n\t\tvar linkExit = link.exit().transition().duration(duration)\n\t\t\t.attr(\"d\", function(d) {\n\t\t\t\tvar o = {x: source.x0, y: source.y0};\n\t\t\t\treturn diagonal({source: o, target: o});\n\t\t\t})\n\t\t\t.remove();\n\n\t\t// Stash the old positions for transition.\n\t\tnodes.forEach(function(d) {\n\t\t\td.x0 = d.x;\n\t\t\td.y0 = d.y;\n\t\t});\n\n\t\tthis.updateContinuations();\t\t\n\t};\n\t\n\tthis.drawRects = function() {\n\t\tvar which = showTokenExtra ? \"inline\" : \"none\";\n\t\tvis.selectAll(\".tokenExtra\").attr(\"display\", which);\n\n\t\tvar node = vis.selectAll(\"g.node_\" + toLeft);\n\t\t\n\t\tnode.selectAll(\"rect\").remove(); // remove previous rects\n\n\t\tvar nodeRect = node\n\t\t\t\t.insert(\"rect\", \"text\")\n\t\t\t\t.attr(\"class\", \"nodeRect\")\n\t\t\t\t.attr(\"height\", function() {\n\t\t\t\t\tvar height = this.parentElement.getBBox().height;\n\t\t\t\t\tif (height < 6) {\n\t\t\t\t\t\t// end of branch, need to prevent negative height\n\t\t\t\t\t\theight = 6.1;\n\t\t\t\t\t}\n\t\t\t\t\treturn height - 6;\n\t\t\t\t})\n\t\t\t\t.attr(\"y\", function(d) {\n\t\t\t\t\tif (!d.parent) {\n\t\t\t\t\t\treturn -0.5 * this.parentElement.getBBox().height / 2 - 2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn -0.5 * this.parentElement.getBBox().height / 2;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.attr(\"width\", function() {\n\t\t\t\t\treturn this.parentElement.getBBox().width;\n\t\t\t\t})\n\t\t\t\t.attr(\"x\", function(d) {\n\t\t\t\t\tvar parentW = this.parentElement.getBBox().width;\n\t\t\t\t\tif (!d.parent) {\n\t\t\t\t\t\treturn -0.33333 * parentW;\n\t\t\t\t\t}\n\t\t\t\t\tif (!toLeft) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\treturn -0.5 * parentW;\n\t\t\t\t})\n\t\t\t\t// .style(\"stroke-opacity\", 1e-6)\n\t\t\t\t.style(\"stroke-opacity\", 1).style(\"stroke-width\", 1)\n\t\t\t\t.style(\"stroke\", function(d) {\n\t\t\t\t\treturn rectBorderColor(d.data.info);\n\t\t\t\t}).style(\"fill\", function(d) {\n\t\t\t\t\treturn rectColor(d.data.info);\n\t\t\t\t}).style(\"fill-opacity\", function(d) {\n\t\t\t\t\treturn 1;\n//\t\t\t\t\tif (!d.parent && !toLeft) {\n//\t\t\t\t\t\treturn 1e-6;\n//\t\t\t\t\t} else {\n//\t\t\t\t\t\treturn 1;\n//\t\t\t\t\t}\n\t\t\t\t});\n\t};\n\n\tvar that = this;\n\t\n\t// Toggle children on click.\n\tfunction click(d, i) {\n\t\tif (d3.event.altKey) {\n\t\t\tthat.handleAltPress(d, i);\n\t\t\t// that.showTokenExtras(showTokenExtra);\n\t\t\treturn;\n\t\t}\n\t\tif (d3.event.shiftKey) {\n\t\t\tthat.handleShiftPress(d, i);\n\t\t\t// that.showTokenExtras(showTokenExtra);\n\t\t\treturn;\n\t\t}\n\n\t\tthat.handleClick(d, i);\n\t\t\n\t\tif (!d.parent) {\n\t\t\treturn;\n\t\t}\n\t\tif (that.continuationIDs != d.data.info.ids) {\n\t\t\tthat.setIds(d.data.info.ids);\n\t\t\tthat.clickedNode = d.id;\n\t\t\tdispatch.call('idsUpdated', that);\n\t\t}\n\n\t\tcollapseSiblings(d); // CC new\n\t\t/*\n\t\t * if (d.children) { d._children = d.children; d.children = null; }\n\t\t * else { d.children = d._children; d._children = null; }\n\t\t * that.update(d);\n\t\t */\n\t\ttoggleChildren(d, true);\n\t}\n\n\tfunction toggleChildren(d, update) { // we only update the clicked\n\t\t\t\t\t\t\t\t\t\t\t// node, not recursively\n\t\t// collapseSiblings(d); //CC we don't do this here, since after the\n\t\t// top level there's no point\n\n\t\tif (d.children) {\n\t\t\tif (d.children && d.children.length == 1) {\n\t\t\t\ttoggleChildren(d.children[0], true); // need true to make\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// sure we toggle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// all the way down\n\t\t\t}\n\t\t\td._children = d.children;\n\t\t\td.children = null;\n\n\t\t} else {\n\t\t\td.children = d._children;\n\t\t\td._children = null;\n\n\t\t\t// expand all if there is only one path\n\t\t\tif (d.children && d.children.length == 1) {\n\t\t\t\ttoggleChildren(d.children[0], false);\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tthat.update(d);\n\t\t}\n\t}\n\n\tthis.setIds = function(ids) {\n\t\tthat.continuationIDs = ids;\n\t};\n\tthis.updateContinuations = function() {\n\t\tvis.selectAll(\"g.node_\" + toLeft + \" text\")\n\t\t\t.classed(\"continuation\", function(d) {\n\t\t\t\t\tvar isContinuation = overlap(d.data.info.ids, that.continuationIDs || {});\n\t\t\t\t\treturn isContinuation;\n\t\t\t})\n\t\t\t.style(\"fill\", function(d) {\n\t\t\t\tif (d3.select(this).classed(\"continuation\")) {\n\t\t\t\t\treturn continuationColor(d.data.info);\n\t\t\t\t}\n\t\t\t\treturn \"#444\"; // default text color\n\t\t\t}); // this is duplicated from above, nodeUpdate\n\t};\n\n\tthis.search = function(searchRE) {\n\t\tvis.selectAll(\"g.node text\").classed(\"foundText\", function(d) {\n\t\t\tvar what = searchRE.test(nodeText(d.data.info));\n\t\t\treturn what;\n\t\t});\n\t};\n\n\tthis.clearSearch = function() {\n\t\tvis.selectAll(\"g.node text\").classed(\"foundText\", false);\n\t};\n\n\tthis.showTokenExtras = function(show) {\n\t\tif (arguments.length == 0) {\n\t\t\treturn showTokenExtra;\n\t\t}\n\t\tshowTokenExtra = show;\n\n\t\tthis.drawRects();\n\t\treturn this;\n\t};\n\n\tthis.setRectColor = function(rectColorFun) {\n\t\tif (arguments.length == 0) {\n\t\t\treturn rectColor;\n\t\t}\n\t\trectColor = rectColorFun;\n\t\tthis.drawRects();\n\t\treturn this;\n\t};\n\n\t// /////////////\n\tfunction positionX(x) {\n\t\treturn toLeft ? -x : x;\n\t}\n\tfunction positionY(y) {\n\t\treturn y;\n\t}\n\n\t// //default modifier handlers\n\tthis.handleAltPress = function() {\n\t};\n\tthis.handleShifttPress = function() {\n\t};\n\tthis.handleClick = function() {\n\t};\n\n\tthis.readJSONTree(data);\n\treturn this;\n};\n\n// /////////////////////////////// tree sorting functions\n/**\n * function to sort the nodes (case insenstive) by a field in the\n * information object\n * \n * @param fld\n *            the field to sort by\n */\ndoubletree.sortByStrFld = function(fld) {\n\tvar field = fld;\n\treturn function(a, b) {\n\t\tvar aUndefined = (undefined == a.data.info[field]);\n\t\tvar bUndefined = (undefined == b.data.info[field]);\n\t\tif (aUndefined && bUndefined) {\n\t\t\treturn 0;\n\t\t} else if (aUndefined) {\n\t\t\treturn -1;\n\t\t} else if (bUndefined) {\n\t\t\treturn 1;\n\t\t}\n\t\tvar aVal = a.data.info[field].join(\" \").toLowerCase();\n\t\tvar bVal = b.data.info[field].join(\" \").toLowerCase();\n\t\tif (aVal < bVal) {\n\t\t\treturn -1;\n\t\t} else if (aVal > bVal) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t};\n};\n/**\n * function to sort the nodes according to the count field in the\n * information object\n */\ndoubletree.sortByCount = function() {\n\treturn function(a, b) {\n\t\treturn b.data.info.count - a.data.info.count;\n\t};\n};\n\n/**\n * function to sort the nodes according to the continuations field in the\n * information object\n */\ndoubletree.sortByContinuations = function() {\n\treturn function(a, b) {\n\t\treturn b.data.info.continuations - a.data.info.continuations;\n\t};\n};\n\n// /////////////////////////////// some tree filtering functions\n/**\n * function to filter the nodes according to a minimum for the count field\n * \n * @param n\n *            the minimum count to include\n */\ndoubletree.filterByMinCount = function(n) {\n\treturn function(inf) {\n\t\treturn inf.count >= n;\n\t};\n};\n\n/**\n * function to filter the nodes according to a maximum for the count field\n * \n * @param n\n *            the maximum count to include\n */\ndoubletree.filterByMaxCount = function(n) {\n\treturn function(inf) {\n\t\treturn inf.count <= n;\n\t};\n};\n\n/**\n * function to filter the nodes according to the \"POS\" field (if it exists)\n * \n * @param n\n *            a string for a regular expression of the POS values to include\n */\ndoubletree.filterByPOS = function(pos) {\n\tvar re = new RegExp(pos);\n\treturn function(inf) {\n\t\treturn inf[\"POS\"] && inf[\"POS\"].filter(function(p) {\n\t\t\treturn p.search(re) > -1;\n\t\t}).length > 0; // end of ng has no POS\n\t};\n};\n\n// /////////////////////////////// formatting functions\n\n// doubletree.nodeText = function(info) {\n// return doubletree.tokenText(info); //default\n// }\n\n// extracts a field\n/**\n * return the value of a field in the provided information object\n * \n * @param info\n *            the information object\n * @param the\n *            field to get\n * @returns the value of the field in the information object\n */\ndoubletree.fieldText = function(info, fieldName) {\n\treturn info[fieldName];\n};\n// extracts the \"token\" field\n/**\n * convenience function to return the value of the \"token\" field (if it\n * exists). The same as doubletree.fieldText(info, \"token\")\n * \n * @param info\n *            the information object\n * @returns the value of the \"token\" field of the information object\n */\ndoubletree.tokenText = function(info) {\n\tvar tokenText = '';\n\tif (info.token !== undefined) {\n\t\ttokenText = info.token;//info.token[0]; // don't return all token values, just the first\n\t}\n\treturn tokenText;\n};\n\n/**\n * converts an information object to a string\n * \n * @param the\n *            information object\n * @returns a string with one key/value pair per line\n */\ndoubletree.infoToText = function(info) {\n\tvar what = \"\";\n\tfor ( var infp in info) {\n\t\tif (infp == \"ids\" || infp == \"origIDs\") {\n\t\t\twhat += infp + \"\\t:\\t\" + Object.keys(info[infp]).join(\",\")\n\t\t\t\t\t+ \"\\n\";\n\t\t} else {\n\t\t\twhat += (infp + \"\\t:\\t\" + info[infp] + \"\\n\");\n\t\t}\n\t}\n\treturn what;\n};\n// //////////////// internal utility functions\n\nfunction old_pruneTree(tree, ids) {\n\n\tif (!tree.children) {\n\t\treturn;\n\t}\n\n\tvar n = tree.children.length;\n\tfor ( var i = 0; i < n; i++) {\n\t\tvar c = tree.children[i];\n\n\t\tif (containedIn(c.info.ids, ids)) {\n\t\t\ttree.children[i] = null;\n\t\t} else {\n\t\t\told_pruneTree(c, ids);\n\t\t}\n\t}\n\ttree.children = tree.children.filter(function(c) {\n\t\treturn c != null;\n\t});\n\n\t// recalculate maxChildren\n\tvar cMax = d3.max(tree.children.map(function(c) {\n\t\treturn c.maxChildren;\n\t}));\n\ttree.maxChildren = Math.max(tree.children.length, cMax);\n}\n\nfunction new_pruneTree(tree, ids, copyIDs) {\n\n\tif (!tree.children) {\n\t\treturn;\n\t}\n\n\t// copy over original ids\n\tif (copyIDs) {\n\t\tif (!tree.info.origIDs) {\n\t\t\ttree.info.origIDs = {};\n\t\t\taddTo(tree.info.origIDs, tree.info.ids);\n\t\t\ttree.info.origCount = Object.keys(tree.info.origIDs).length;\n\t\t} else {\n\t\t\ttree.info.ids = {};\n\t\t\taddTo(tree.info.ids, tree.info.origIDs);\n\t\t\ttree.info.count = Object.keys(tree.info.ids).length;\n\t\t}\n\t}\n\n\t// adjust IDs\n\tvar idNums = Object.keys(ids);\n\tfor ( var i = 0, n = idNums.length; i < n; i++) {\n\t\tvar cid = idNums[i];\n\t\tdelete tree.info.ids[cid];\n\t}\n\ttree.info.count = Object.keys(tree.info.ids).length;\n\n\t// recurse and prune\n\tvar n = tree.children.length;\n\tfor ( var i = 0; i < n; i++) {\n\t\tvar c = tree.children[i];\n\n\t\tif (containedIn(c.info.ids, ids)) {\n\t\t\ttree.children[i] = null;\n\t\t} else {\n\t\t\tnew_pruneTree(c, ids, false);\n\t\t}\n\t}\n\ttree.children = tree.children.filter(function(c) {\n\t\treturn c != null;\n\t});\n\ttree.info.continuations = tree.children.length;\n\n\t// recalculate maxChildren\n\tvar cMax = d3.max(tree.children.map(function(c) {\n\t\treturn c.maxChildren;\n\t}));\n\ttree.maxChildren = Math.max(tree.children.length, cMax);\n}\n\nfunction restoreTree(tree) {\n\n\tif (tree.info.origCount) { // otherwise tree was suppressed, so its ids\n\t\t\t\t\t\t\t\t// never got switched around\n\t\t// restore originals\n\t\ttree.info.ids = {};\n\t\taddTo(tree.info.ids, tree.info.origIDs);\n\t\t// delete tree.info.origIDs;\n\t\ttree.info.count = tree.info.origCount;\n\t\t// delete tree.info.origCount;\n\n\t\tvar n = tree.children.length;\n\t\ttree.info.continuations = n;\n\t\tfor ( var i = 0; i < n; i++) {\n\t\t\tvar c = tree.children[i];\n\t\t\trestoreTree(c);\n\t\t}\n\t}\n\n}\n\n// do the keys in o1 and o2 overlap\nfunction overlap(o1, o2) {\n\tfor ( var k in o1) {\n\t\tif (k in o2) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n// are all the keys in o1 also in o2\nfunction containedIn(o1, o2) {\n\tif (!o1 || !o2) {\n\t\treturn false;\n\t}\n\tfor ( var k in o1) {\n\t\tif (!(k in o2)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\n// add key/vals of o2 to o1 and return o1; (top level key-value only, o2\n// values maintained over o1)\n// same as in Trie.js\nfunction addTo(o1, o2) {\n\tfor ( var k in o2) {\n\t\to1[k] = o2[k];\n\t}\n}\n\nfunction noOp() {\n}\n\n// ////////////////\n\n})();","/* (This is the new BSD license.)\n* Copyright (c) 2012-2014, Chris Culy\n* All rights reserved.\n*\n* Redistribution and use in source and binary forms, with or without\n* modification, are permitted provided that the following conditions are met:\n*     * Redistributions of source code must retain the above copyright\n*       notice, this list of conditions and the following disclaimer.\n*     * Redistributions in binary form must reproduce the above copyright\n*       notice, this list of conditions and the following disclaimer in the\n*       documentation and/or other materials provided with the distribution.\n*     * Neither the name of the Chris Culy nor the \n*\t\tnames of its contributors may be used to endorse or promote \n*\t\tproducts from this software without specific prior written permission.\n*\n* THIS SOFTWARE IS PROVIDED BY Chris Culy\n* ``AS IS'' AND ANY OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, \n* THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE \n* ARE DISCLAIMED. IN NO EVENT SHALL Chris Culy\n* BE LIABLE FOR ANY, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR \n* CONSEQUENTIAL DAMAGES INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE \n* GOODS OR SERVICES; OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER \n* CAUSED AND ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR \n* TORT INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF \n* THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n\"use strict\";\nvar doubletree = doubletree || {};\n\n(function(){\n    \n    /**\n     * @class doubletree.Trie\n     * This is the class for the specialized trie that is the data for {@link doubletree.DoubleTree}.\n * The Trie will get pieces of data that contain fields. Some (possibly all) of those fields will be used for distinguishing among items.\n * For example, we might have an \"author\" field, but not use it when distinguishing among items for the Trie.\n * @param caseSensitive are the elements in the first distinguishing field compared in a case sensitive fashion\n * @param fldNames the names of the fields\n * @param fldDelim the field delimiter\n * @distinguishingFldsArray the distinguishing fields\n * @undistinguishedRoot true if the root should be calculated without using the distinguishing fields\n */\ndoubletree.Trie = function(caseSensitive, fldNames, fldDelim, distinguishingFldsArray, undistinguishedRoot) {\n    var endNG = \" \";\n    var rootName = \"_root_\";\n    var noCase = (! caseSensitive) && true;\n    if (! fldNames) {\n        fldNames = [\"item\"];\n    }\n    var fieldNames = fldNames;\n    if (! fieldDelim) {\n        fieldDelim = \"\\t\"; //default\n    }\n    var fieldDelim = fldDelim;\n    if (! distinguishingFieldsArray) {\n        distinguishingFieldsArray = [ fieldNames[0] ];\n    }\n    var distinguishingFieldsArray = distinguishingFldsArray;\n    var undistinguishedRt = undistinguishedRoot;\n    if (undefined == undistinguishedRt) {\n        undistinguishedRt = true; //TBD: check to make sure this doesn't break anything\n    }\n    \n    var trie = new TrieNode(rootName,-1,0);\n    \n    /** @private */\n    function TrieNode(item, id, count) {\n        this.id = id;\n        this.count = count;        \n        this.info = {\"count\":count, \"ids\":{}};\n        \n        if (item == null) {\n            this.item = rootName;        \n        } else {\n            this.item = item;\n            this.info.ids = {};\n            this.info.ids[id] = true;\n            var flds = item.split(fieldDelim);\n            for(var i in flds) {\n                this.info[ fieldNames[i] ] = [ flds[i] ];\n            }\n        }\n        this.nodes = {};\n        \n         /** @private */\n        this.addNgram = function(itemArray, id, count) {\n            if (! count) {\n                count = 1;\n            }\n            var thisItem, thisKey;\n            if (itemArray.length > 0) {\n                thisItem = itemArray.shift();\n                    \n                var theseFlds = thisItem.split(fieldDelim);\n\n                if (undistinguishedRt && this.item == rootName) {\n                    thisKey = \"\";\n                } else {\n                    thisKey = theseFlds.filter(function(f,i) {\n                            return distinguishingFieldsArray.indexOf( fieldNames[i] ) > -1;\n                        })\n                    .map(function(f) {\n                            if (noCase) {\n                                return f.toLocaleLowerCase();\n                            }\n                            return f;\n                        })\n                    .join(fieldDelim);\n                }\n                \n            } else {\n                thisItem = endNG;\n                thisKey = thisItem;\n            }\n            \n            var subTrie;\n            if (thisKey in this.nodes && this.nodes[thisKey] instanceof TrieNode) { //we need the instanceof TrieNode so we can override Object properties -- hope that none are already arrays\n                subTrie = this.nodes[thisKey];\n                subTrie.info.count += count;\n                subTrie.info.ids[id] = true;\n                \n                for(var f in theseFlds) {\n                    var thisFld = theseFlds[f];\n                    if (subTrie.info[ fieldNames[f] ].indexOf( thisFld ) == -1 ){\n                        subTrie.info[ fieldNames[f] ].push(thisFld);\n                    }                \n                }\n                \n                \n            } else {\n                subTrie = new TrieNode(thisItem, id, count);            \n                this.nodes[thisKey] = subTrie;\n            }\n            if (thisItem != endNG) {\n                subTrie.addNgram(itemArray,id, count);\n            }\n        };\n            \n         /** @private */\n        this.getUniqRoot = function() {\n            if (this.item == rootName) {\n                var children = Object.keys(this.nodes);\n                if (children.length == 1) {\n                    return this.nodes[ children[0] ];\n                }\n            }\n        \n            return this;\n        };\n        \n        /** @private */\n        this.toTree = function(filterFuns) {\n            \n            function toTreeHelper(filterFuns, descendentLevel, trieData) {\n                \n                var what = {\"children\":[]};\n                what.name = trieData.item;\n                what.info = {};\n                for(var k in trieData.info) {\n                    if (typeof(trieData.info[k]) === 'Object') {\n                        what.info[k] = {};\n                        for(var k2 in trieData.info[k]) {\n                            what.info[k][k2] = this.info[k][k2];\n                        }\n                    } else {\n                        what.info[k] = trieData.info[k];\n                    }\n                }\n                what.pruned = {};\n                \n                \n                for(var item in trieData.nodes) {\n                    var itemNode = trieData.nodes[item];\n                    var thisFilter = filterFuns[descendentLevel];            \n                    if ( ! thisFilter || (thisFilter && thisFilter(itemNode.info)) ) {\n                        what.children.push( toTreeHelper(filterFuns, descendentLevel +1, itemNode) );\n                        if (itemNode.pruned != {}) {\n                            addTo(what.pruned, itemNode.pruned);\n                        }\n                    } else {\n                        addTo(what.pruned, itemNode.info.ids);\n                    }\n                }\n        \n                what.info.continuations = what.children.length;\n                //this is to record info we need for sizing the tree, since D3 automatically scales to fit, which is not what we want\n                //we also need to keep track of the minimum count (the root always has the max, of course), for scaling\n                if (what.children.length == 0) {\n                   what.children = null; //the trees expect null if there are no children, not the empty array. Odd, but true.\n                   what.maxChildren = 0;\n                   \n                   if (what.name) {\n                    what.maxLen = what.name.length;\n                   } else {\n                    what.maxLen = 0;\n                   }\n                   \n                   what.minCount = what.info.count;\n                   //what.maxChildren = 0; //new\n                   \n                } else {\n                    var cMax = d3.max( what.children.map(function(c) {return c.maxChildren;}) );\n                    what.maxChildren = Math.max(what.children.length, cMax);\n                    \n                    var maxLen = d3.max( what.children.map(function(c) {return c.maxLen;}));\n                    what.maxLen = Math.max(maxLen, what.name.length);\n                    \n                    what.minCount = d3.min( what.children.map(function(c) {return c.minCount;})); //the children are always <= the parent\n                }\n                return what;\n            }\n            \n            if (! filterFuns ) {\n                filterFuns = [];\n            }\n            \n            var trieData = JSON.parse(JSON.stringify(this)); //CuC make a copy of the data, to keep the real trie immutable\n        \n            return toTreeHelper(filterFuns, 0, trieData);\n        };\n    }\n    \n    \n    \n    \n    /**\n     * Add an ngram to the Trie\n     * @param itemArray an array of delimited items (the ngrams)\n     * @param id an id for this ngram \n     * @param count a count for this ngram. Default is 1\n     */\n    this.addNgram = function(itemArray, id, count) {trie.addNgram(itemArray, id, count);};\n    \n    /**\n     * get the unique root of this Trie. Used only by {@link DoubleTree}\n     * @returns a new Trie with a unique item as the root\n     */\n    this.getUniqRoot = function() {\n        var what = new doubletree.Trie((!noCase), fieldNames, fieldDelim, distinguishingFieldsArray);\n        what.trie( trie.getUniqRoot() );\n        return what;\n    };\n    \n    /**\n     * convert the Trie to a tree structure for display. Used only by {@link DoubleTree}\n     * @param filterFuns the filtering functions to apply to the tree see {@link DoubleTree.filters}\n     * @param descendentLevel the current level we are filtering\n     * @returns the tree\n     */\n    this.toTree = function(filterFuns, descendentLevel) {return trie.toTree(filterFuns, descendentLevel);};\n    \n    /**\n     * serialize the Trie as a JSON string\n     * @returns the JSON string representation of the Trie\n     */\n    this.serialize = function() {\n        return JSON.stringify(this);\n    };\n    \n    /**\n     * make this Trie have the values of a previously serialized Trie see {@link #serialize}\n     */\n    this.deserialize = function(serialized) {\n        var obj = JSON.parse(serialized);\n        \n        endNG = obj.endNG();\n        rootName = obj.rootName();\n        noCase = obj.caseSensitive();\n        fieldNames = obj.fieldNames();\n        fieldDelim = obj.fieldDelim();\n        distinguishingFieldsArray = obj.distinguishingFieldsArray();\n        trie = obj.trie();\n        \n    };\n    \n    //getters -- the properties are readonly, set in constructor\n    \n    //private, only used in deserialization\n    /** @private */\n    this.endNG = function() {\n        return endNG;\n    };\n    //private, only used in deserialization\n    /** @private */\n    this.rootName = function() {\n        return rootName;\n    };\n    \n    //private, also a setter, only used in deserialization and getUniqRoot;\n    /** @private */\n    this.trie = function(value) {\n      if (arguments.length > 0) {\n        trie = value;\n      }\n      return trie;\n    };\n    \n    /**\n     * @returns whether this Trie uses case sensitive comparison\n     */\n    this.caseSensitive = function() {\n        return ! noCase;\n    };\n    \n    /**\n     * get the field names in the data\n     * @returns the field names in the data\n     */\n    this.fieldNames = function() {\n        return fieldNames;\n    };\n    \n    /**\n     * get the field delimiter for the data\n     * @returns the field delimiter for the data\n     */\n    this.fieldDelim = function() {\n        return fieldDelim;\n    };\n    \n    /**\n     * get the distinguishing fields for the data\n     * @returns the distinguishing fields for the data\n     */\n    this.distinguishingFieldsArray = function() {\n        return distinguishingFieldsArray;\n    };\n    \n    //add key/vals of o2 to o1 and return o1; (top level key-value only, o2 values maintained over o1)\n    /** @private */\n    function addTo(o1, o2) {\n        for(var k in o2) {\n            o1[k] = o2[k];\n        }\n    }\n\n    \n};  \n\n})();\n","/**\r\n * @param {object} config\r\n * @param {Voyant.panel.TermsRadio} config.parent\r\n * @param {Ext.dom.Element} config.container\r\n * @param {boolean} config.showSlider\r\n */\r\nfunction TermsRadio(config) {\r\n\tthis.parent = config.parent;\r\n\tthis.container = config.container;\r\n\tthis.isSliderVisible = config.showSlider == undefined ? true : config.showSlider;\r\n\t\r\n\tthis.chart = null;\r\n\t\r\n\tthis.absMaxFreq = 0;\r\n\tthis.absMinFreq = 0;\r\n\tthis.allData = [];\r\n\t\r\n\tthis.continueTransition = true;\r\n\tthis.counterSeries = [];\r\n\tthis.displayData = [];\r\n\tthis.dragged = false;\r\n//\tthis.intervalIdArray = [];\r\n\tthis.isTransitioning = false;\r\n\tthis.lastSlippery = null;\r\n\tthis.lastSticky = null;\r\n\tthis.maxFont = 30;\r\n\tthis.minFreq = 0;\r\n\tthis.numDataPoints = 0;\r\n\tthis.numVisPoints = 5;\r\n\tthis.overlayQueue = [];\r\n\tthis.records = 0;\r\n\tthis.recordsLength = 0;\r\n\tthis.reselectTop = false;\r\n\tthis.shiftCount = 0;\r\n\tthis.sliderDragSum = 0;\r\n\tthis.titlesArray = [];\r\n\tthis.transitionCall = 'draw'; //possible calls 'draw', 'redraw', 'left', and 'right'\r\n\tthis.valFraction = 1;\r\n\tthis.win = 0;\r\n\t\r\n\t//window padding dimensions, b - bottom, l - left, r - right, t - top\r\n\tthis.bPadding = 25;\r\n\tthis.lPadding = 40;\r\n\tthis.rPadding = 20;\r\n\tthis.tPadding = 10;\r\n\t\r\n\tthis.sliderHeightRatio = 0.1; // slider/container height ratio\r\n\tthis.sliderHeight = 0; // set in init and resize\r\n\tthis.sliderBPadding = 10;\r\n\t\r\n\t//tracks largest dimensions, used in resizing\r\n\tthis.largestW = 0;\r\n\tthis.largestH = 0;\r\n\t\r\n\tthis.xAxisEl = undefined;\r\n\tthis.xAxis = d3.axisBottom();\r\n\tthis.xScale = d3.scaleLinear();\r\n\tthis.xSliderScale = d3.scaleLinear();\r\n\t\r\n\tthis.yAxisEl = undefined;\r\n\tthis.yAxis = d3.axisLeft();\r\n\tthis.yScale = d3.scaleLinear();\r\n\tthis.ySliderScale = d3.scaleLinear();\r\n\t\r\n\tthis.fontScale = d3.scaleLinear();\r\n\tthis.opacityScale = d3.scaleLinear();\r\n\t\r\n\tthis.container.on('resize', this.doResize, this);\r\n}\r\n\r\nTermsRadio.prototype = {\r\n\tconstructor: TermsRadio\r\n\t\r\n\t,loadRecords: function(records) {\r\n\t\tthis.initData(records);\r\n\t\tthis.prepareData();\r\n\t\t//for shiftcount > 0 exclusively\r\n\t\tvar len = this.shiftCount;\r\n\t\twhile(len-- > 0){\r\n\t\t//for(var j = 0; j < this.shiftCount; j++){\r\n\t\t\tthis.displayData.shift();\r\n\t\t}\r\n\t\tif (this.chart != null) {\r\n\t\t\tthis.redraw();\r\n\t\t} else {\r\n\t\t\tthis.initializeChart();\r\n\t\t}\r\n\t}\r\n\r\n\t,highlightQuery: function(query, sticky) {\r\n\t\tvar docId = null;\r\n\t\tif (this.parent.getApiParam(\"mode\") === 'document') {\r\n\t\t\tdocId = this.parent.getCorpus().getDocument(0).getId();\r\n\t\t}\r\n\t\tvar info = {wordString : query, docId : docId};\r\n\t\tvar paramsBundle = this.buildParamsBundle(info);\r\n\t\tif (sticky) {\r\n\t\t\tthis.manageOverlaySticky(paramsBundle);\r\n\t\t} else {\r\n\t\t\tthis.manageOverlaySlippery(paramsBundle);\r\n\t\t}\r\n\t}\r\n\t\r\n\t,highlightRecord: function(record, sticky) {\r\n\t\tvar info = {wordString : record.get('term'), docId : record.get('docId')};\r\n\t\tvar paramsBundle = this.buildParamsBundle(info);\r\n\t\tif (sticky) {\r\n\t\t\tthis.manageOverlaySticky(paramsBundle);\r\n\t\t} else {\r\n\t\t\tthis.manageOverlaySlippery(paramsBundle);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//\r\n\t//DATA FUNCTIONS\r\n\t//\t\r\n\r\n\t,initData: function (records) { \t\r\n\t\t//console.log(\"fn: initData\")\r\n\t\t//console.profile('profilethis')\r\n\t\tthis.records = records;\r\n\t\t\r\n\t\tthis.recordsLength = this.records.length;\r\n\t\r\n\t\tthis.numVisPoints = parseInt(this.parent.getApiParam('visibleBins'));\r\n\t\tthis.shiftCount = parseInt(this.parent.getApiParam('position'));\r\n\t\t\r\n\t\tif(this.parent.getApiParam('mode') === 'document') {\r\n\t\t\tthis.numDataPoints = this.records[0].get('distributions').length;\r\n\t\t\tvar parentBins = parseInt(this.parent.getApiParam('bins'));\r\n\t\t\tif(this.numDataPoints !== parentBins){\r\n\t\t\t\tthis.numDataPoints = parentBins;\r\n\t\t\t\tthis.loadStore();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.numDataPoints = this.records[0].get('distributions').length;\r\n\t\t}\r\n\t\t\r\n    \tthis.counterSeries = [];\r\n    \tvar transferArray = [];\r\n\t\t\t\r\n    \t//find max frequency value\r\n    \tthis.absMaxFreq = 0;\r\n\t\tfor( var k = 0; k < this.numDataPoints; k++ ) { \r\n\t        for( var p = 0; p < this.recordsLength; p++ ) {\r\n\t        \tif(this.records[p].get('distributions')[k] > this.absMaxFreq) {\r\n\t        \t\tthis.absMaxFreq = this.records[p].get('distributions')[k];\r\n\t        \t}\r\n\t        }\r\n\t\t}\r\n\t\t\t    \r\n\t\t//find the absolute minimum frequency value\r\n\t\t//first start by setting the minimum frequency to the maximum frequency\r\n\t\tthis.absMinFreq = this.absMaxFreq;\r\n\t\tfor( var k = 0; k < this.numDataPoints; k++ ) { \r\n\t        for( var p = 0; p < this.recordsLength; p++ ) {\r\n\t        \tif(this.records[p].get('distributions')[k] <= this.absMinFreq && this.records[p].get('distributions')[k] !== 0) { \r\n\t        \t\tthis.absMinFreq = this.records[p].get('distributions')[k];\r\n\t        \t}\r\n\t        }\r\n\t\t}\r\n\t\t\r\n\t\t//Calculate the lower value of the y axis, must be > 0 \r\n\t\tif( this.absMinFreq < 0) {\r\n\t\t\tthis.absMinFreq = 0;\r\n\t\t}\r\n\t\t\r\n\t\tthis.minFreq = this.absMinFreq * 1.01;\r\n\t\t\r\n\t    //transfer all of the relevant data from 'records' to an array 'allData'\r\n\t\tfor( var k = 0; k < this.numDataPoints; k++ ) { \r\n\t        for( var p = 0; p < this.recordsLength; p++ ) {\r\n\t        \tvar rec = this.records[p];\r\n\t        \tvar dists = rec.get('distributions')[k];\r\n//\t        \tif (dists > this.minFreq && dists <= this.absMaxFreq) {\r\n\t        \tif (dists > 0) {\r\n\t        \t\ttransferArray.push({\r\n\t        \t\t\tfreq: dists,\r\n\t\t                wordString: rec.get('term'),\r\n\t\t                counter: k,\r\n\t\t                posInSeries: 0, \r\n\t\t                numInSeries: 0,\r\n\t\t                docId: rec.get('docId')\r\n\t\t            });\r\n\t        \t}\r\n//\t        \t} else { //do nothing\r\n//\t        \t}\r\n\t        }\r\n\t        this.counterSeries.push(transferArray);\r\n\t        transferArray = [];\r\n\t    }\r\n\t}\r\n\r\n\t,prepareData: function() {\r\n\t\t//console.log(\"fn: prepareData\")\r\n\t    var frequencySeries = [],\r\n\t    \tcopy1 = [],\r\n\t    \tcopy2 = [],\r\n\t    \tcopy3 = [],\r\n\t    \tcopy4 = [],\r\n\t    \tcheck = 0;\r\n\t\t\r\n\t\tthis.allData = [];\r\n\t\tthis.displayData = [];\r\n\t\t\r\n\t\t//set the number of points to be displayed at once\r\n\t\tif(this.numDataPoints < this.numVisPoints) {\r\n\t\t\tthis.numVisPoints = this.numDataPoints;\r\n\t\t}\r\n\t\t\r\n\t\t//adjust shiftCount if it for some reason is out of the normal range\r\n\t\tif(this.shiftCount + this.numVisPoints > this.numDataPoints){ \r\n\t\t\tthis.shiftCount = this.numDataPoints - this.numVisPoints; \r\n\t\t}\r\n\t\t\r\n\t    for( var k = 0; k < this.numDataPoints; k++ ) {\r\n\t\t\tvar check1 = 0; //add a single first data point\r\n\t    \tfor(var p = 0; p < this.counterSeries[k].length; p++ ) {\r\n\t    \t\t\t\r\n    \t\t\tvar check2 = 0; //check will make sure a data point is not added to a series more than once\r\n    \t\t\t\r\n\t    \t\t//add very first point, this is done like this so the for loop can use the .length operator\r\n\t    \t\tif(check1 === 0){\r\n\t\t\t    \tcopy1.push(this.counterSeries[k][p]);\r\n\t\t\t    \tcopy2.push({freq: this.counterSeries[k][p].freq,\r\n\t\t    \t\t\tfrequencyArray: copy1,\r\n\t\t    \t\t\tnumInSeries: 0\r\n\t\t    \t\t});\r\n\t\t    \t\tfrequencySeries.push(copy2);\r\n\t\t    \t\t\r\n\t\t    \t\tcopy1 = [];\r\n\t\t    \t\tcopy2 = [];\r\n\t\t    \t\tcheck1 = 1;\r\n\t\t    \t\tcheck2 = 1;\r\n\t    \t\t}\r\n\t    \t\t\r\n\t    \t\t//checks if a given frequency has an existing 'series' that the data point can be grouped into\r\n\t    \t\tfor( var l = 0; l < frequencySeries[k].length && check2 === 0; l++) {\r\n\t\t\t\t\tif(this.counterSeries[k][p].freq === frequencySeries[k][l].freq) {\r\n\t\t\t\t\t\tvar inSeries = 0; \r\n\t\t\t\t\t\tinSeries = frequencySeries[k][l].numInSeries;\r\n\t\t\t\t\t\tthis.counterSeries[k][p].posInSeries = ++inSeries;\r\n\t\t\t\t\t\tfrequencySeries[k][l].numInSeries = inSeries;\r\n\t\t\t\t\t\tfrequencySeries[k][l].frequencyArray.push(this.counterSeries[k][p]);\r\n\t\t\t\t\t\tcheck2 = 1;\r\n\t\t\t\t\t}\t\r\n\t    \t\t}\r\n\t    \t\t\r\n\t    \t\t//if there is no existing series then create a new one\r\n\t    \t\tif(check2 === 0) {\r\n\t\t\t\t\tcopy4.push(this.counterSeries[k][p]);\r\n\t\t    \t\tfrequencySeries[k].push({freq: this.counterSeries[k][p].freq,\r\n\t\t    \t\t\tfrequencyArray: copy4,\r\n\t\t    \t\t\tnumInSeries: 0\r\n\t\t    \t\t});\r\n\t\t    \t\tcopy4 = [];\r\n\t\t    \t\tcheck2 = 1;\r\n\t\t\t\t}\r\n\t    \t}\t\r\n\t    \t//if counterSeries[k] is empty add or there is no eligible value add an empty array to frequencySeries such that frequencySeries[k] is not undefined\r\n\t    \tif(this.counterSeries[k].length < 1 || check1 === 0) {  \r\n\t    \t\tfrequencySeries.push([]);\r\n    \t\t}\r\n\t    }\r\n\t    \r\n\t    for( var k = 0; k < this.numDataPoints; k++ ) {\r\n\t    \tfor( var p = 0; p < frequencySeries[k].length; p++) {\r\n\t    \t\t++frequencySeries[k][p].numInSeries;\r\n\t    \t\tfor( var l = 0; l < frequencySeries[k][p].frequencyArray.length; l++) {\r\n\t    \t\t\tfrequencySeries[k][p].frequencyArray[l].numInSeries = frequencySeries[k][p].numInSeries;\r\n\t    \t\t}\r\n\t    \t}\r\n\t    }\r\n\t    \r\n\t    var allDataSetup = [];\r\n\t    \r\n\t    //add the selected points into the array that will be used to display the data\r\n\t    for( var k = 0; k < this.numDataPoints; k++ ) {\r\n\t        this.allData.push({allDataInternal: frequencySeries[k],\r\n\t            outerCounter: k});\r\n\t    }\r\n\t    \r\n    \tvar displaySetup = [],\r\n    \t\ttransferArray = [];\r\n\t\t\r\n\t    //transfer the first x points (= numVisPoints, the number of points to be visualized)\r\n\t    //into an array that will be used to display the data\r\n\t    for( var k = 0; k < this.numVisPoints + this.shiftCount; k++ ) { \r\n\t        for( var p = 0; p < this.recordsLength; p++ ) {\r\n\t        \tif(this.allData[k].allDataInternal[p]) {\r\n\t\t            transferArray.push({freq: this.allData[k].allDataInternal[p].freq,\r\n\t\t                inSeries: this.allData[k].allDataInternal[p].numInSeries,\r\n\t\t                frequencyArray: this.allData[k].allDataInternal[p].frequencyArray,\r\n\t\t                dotObject: [{counter: k, freq: this.allData[k].allDataInternal[p].freq}]\r\n\t\t            });\r\n\t        \t}\r\n\t        }\r\n\t        displaySetup.push(transferArray);\r\n\t        transferArray = [];\r\n\t    }\r\n\t    \r\n\t    //add the selected points into the array that will be used to display the data\r\n\t    for( var k = 0; k < this.numVisPoints + this.shiftCount; k++ ) {\r\n\t        this.displayData.push({displayInternal: displaySetup[k],\r\n\t            outerCounter: k});\r\n\t    }\r\n\t    displaySetup = [];\r\n\t}\r\n\t\r\n\t//TRANSITION FUNCTIONS\r\n\t\r\n\t//disable forward back if moving, disable pause if stopped, disable back if at beginning\r\n\t,manageMvtButtons: function () {\r\n\t\t//console.log('fn: manageMvtButtons')\r\n\t\tthis.parent.queryById(\"play\").setPlaying(this.isTransitioning);\r\n\t\t/*\r\n\t\tif(this.isTransitioning === true) {\r\n\t\t\tthis.toggleRight.setDisabled(true);\r\n\t\t\tthis.toggleLeft.setDisabled(true);\r\n\t\t\tthis.stop.setDisabled(false);\r\n\t\t}\r\n\t\tif(this.isTransitioning === false) {\r\n\t\t\tthis.toggleRight.setDisabled(false);\r\n\t\t\tthis.toggleLeft.setDisabled(false);\r\n\t\t\tthis.stop.setDisabled(true);\r\n\t\t\t\r\n\t\t\tif(this.shiftCount === 0){\r\n\t\t\t\tthis.toggleLeft.setDisabled(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.toggleLeft.setDisabled(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.shiftCount + this.numVisPoints === this.numDataPoints){\r\n\t\t\t\tthis.toggleRight.setDisabled(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.toggleRight.setDisabled(false);\r\n\t\t\t}\r\n\t\t}\t\r\n\t\t*/\r\n\t}\r\n\r\n\t//provides the next value to the left     \r\n    ,nextR: function () {\r\n    \t//console.log('fn: nextR')\r\n    \t\r\n    \tvar displaySetup = [];\r\n    \t//this.displayData.shift();\r\n\t\t\r\n    \tfor( var p = 0; p < this.recordsLength; p++ ) {\r\n    \t\tif(this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p]) {\r\n\t            displaySetup.push({freq: this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p].freq,\r\n\t            \tinSeries: this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p].numInSeries,\r\n\t            \tfrequencyArray: this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p].frequencyArray,\r\n\t                dotObject: [{counter: this.numVisPoints + this.shiftCount, freq: this.allData[this.numVisPoints + this.shiftCount].allDataInternal[p].freq}]\r\n\t            });\r\n    \t\t}\r\n        }\r\n        \r\n\t    this.displayData.push({displayInternal: displaySetup, outerCounter: this.numVisPoints + this.shiftCount});\r\n\t    displaySetup = [];\r\n    }\r\n    \r\n    //verifies that data CAN be moved to the right\r\n    ,toggleRightCheck: function () {\r\n    \t//console.log(\"fn: toggleRightCheck\")\r\n    \tif(this.numVisPoints + this.shiftCount < this.numDataPoints) {\r\n    \t\t//manage transition movements and controls\r\n    \t\tthis.isTransitioning = true;\r\n    \t\tthis.continueTransition = true;\r\n    \t\tthis.manageMvtButtons();\r\n    \t\t\r\n    \t\t//draw\r\n\t        this.nextR();\r\n\t\t\tthis.shiftCount = ++this.shiftCount;\r\n\t\t\tthis.manageXScale();\r\n\t\t\tthis.parent.setApiParams({position: this.shiftCount});\r\n\t\t\tthis.transitionCall = 'right';\r\n\t\t\tthis.animateVis();\r\n\t\t\tthis.displayData.shift();\r\n\t\t} else {\r\n    \t\t//manage transition movements and controls\r\n\t\t\tthis.isTransitioning = false;\r\n\t\t\tthis.continueTransition = false;\r\n\t\t\tthis.manageMvtButtons();\r\n\t\t}\r\n    }\r\n    \r\n    //provide the next value\r\n    ,nextL: function () {\r\n    \t//console.log('fn: nextLeft')\r\n    \tvar displaySetup = [];\r\n        \r\n        for( var p = 0; p < this.recordsLength; p++ ) {\r\n        \tif(this.allData[this.shiftCount].allDataInternal[p]) {\r\n        \t\tdisplaySetup.push({freq: this.allData[this.shiftCount].allDataInternal[p].freq,\r\n\t            \tinSeries: this.allData[this.shiftCount].allDataInternal[p].numInSeries,\r\n\t            \tfrequencyArray: this.allData[this.shiftCount].allDataInternal[p].frequencyArray,\r\n\t                dotObject: [{counter: this.shiftCount, freq: this.allData[this.shiftCount].allDataInternal[p].freq}]\r\n\t            });\r\n        \t}\r\n        }\r\n\t    this.displayData.unshift({displayInternal: displaySetup, outerCounter: this.shiftCount});\r\n        displaySetup = [];\r\n    }\r\n    \r\n    /*\r\n    ,toggleLeftCheck: function () {    \t\r\n    \t//console.log(\"fn: toggleLeftCheck\")\r\n    \tif(this.shiftCount > 0) {\r\n    \t\t//manage transition movement and controls\r\n    \t\tthis.isTransitioning = true;\r\n\t\t\tthis.continueTransition = true;\r\n\t\t\tthis.manageMvtButtons();\r\n\t\t\t\r\n\t\t\t//draw\r\n\t\t\tthis.shiftCount = --this.shiftCount;\r\n\t\t\tthis.manageXScale();\r\n\t\t\tthis.parent.setApiParams({position: this.shiftCount});\r\n\t        this.nextL();\r\n\t\t\tthis.transitionCall = 'left';\r\n\t        this.animateVis();\r\n\t        this.displayData.pop();\r\n\t\t} else {\r\n\t\t\t//manage transition movements and controls\r\n\t\t\tthis.isTransitioning = false;\r\n\t\t\tthis.manageMvtButtons();\r\n\t\t}\r\n    }\r\n    */\r\n    \r\n    ,startScroll: function() {\r\n    \t//console.log(\"fn: startScroll\")\r\n    \tvar me = this;\r\n    \t\r\n    \tif(me.numDataPoints > me.numVisPoints && me.shiftCount === 0){\r\n\t\t\t//manage transition movements and controls\r\n\t\t\tme.isTransitioning = true;\r\n\t\t\tthis.manageMvtButtons();\r\n    \t\t\r\n    \t\t//repeat transition\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tme.toggleRightCheck();\r\n\t\t\t},3000);\r\n\t\t}\r\n    }\r\n    \r\n    //\r\n    //DISPLAY FUNCTIONS\r\n    //\r\n\t\r\n\t\r\n\t// init and draw everything\r\n\t,initializeChart: function() {\r\n\t\tthis.initChart();\r\n\t\t\r\n\t\tthis.drawXAxis();\r\n\t\tthis.drawYAxis();\r\n\t\tthis.drawChart();\r\n\t\tif (this.isSliderVisible) {\r\n\t\t\tthis.drawSlider();\r\n\t\t\tthis.drawVerticalSlider();\r\n\t\t\tthis.redrawSliderOverlay();\r\n\t\t}\r\n\t\tthis.transitionCall = 'draw';\r\n\t}\r\n\t\r\n    ,redraw: function() {\r\n\r\n//    \tconsole.log(\"fn: redraw\")\r\n    \tthis.transitionCall = 'redraw';\r\n    \tthis.updateFullPath();\r\n\t\tthis.redrawXAxis();\r\n\t\tthis.redrawYAxis();\r\n\t\tthis.redrawChart();\r\n\t\tif (this.isSliderVisible) {\r\n\t\t\tthis.redrawSlider();\r\n\t\t\tthis.redrawVerticalSlider();\r\n\t\t\tthis.redrawSliderOverlay();\r\n\t\t}\r\n\t\tthis.redrawChartOverlay();\r\n    }\r\n    \r\n\t,initChart: function () {\r\n\t\tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n    \r\n\t\t//create main SVG Element\r\n\t\tvar chartSVG = Ext.DomHelper.append(this.container.down('div[class$=innerCt]'), '<svg class=\"chart\" width=\"'+w+'\" height=\"'+h+'\"></svg>');\r\n\t    this.chart = d3.select(chartSVG);\r\n\t    \r\n\t    this.setSliderHeight();\r\n\t    \r\n\t\tthis.largestW = w;\r\n\t\tthis.largestH = h - this.getSliderHeight();\r\n\t\t\r\n\t\tvar y = this.tPadding + this.getSliderHeight();\r\n\t    \t    \r\n\t    this.chart.append('clipPath')\r\n\t        .attr('id', 'clip1')\r\n\t      .append('rect')\r\n\t      \t.attr('class', 'clipping-rectangle')\r\n\t        .attr(\"x\", 0)\r\n\t        .attr(\"y\", y)\r\n\t        .attr(\"width\", w)\r\n\t        .attr(\"height\", this.largestH);\r\n\t    \r\n\t    this.chart.append('g')\r\n\t    \t.attr('class','overlay')\r\n\t    \t.attr(\"clip-path\", \"url(#clip1)\");\r\n\t    \r\n\t\t//depending on the size of display set the length that labels can be\r\n\t\tthis.setTitleLength();\r\n\t}\r\n    \r\n\t,doResize: function() {\r\n\t\tif(this.chart) {\r\n\t\t\tvar h = this.container.getHeight(),\r\n\t\t\t\tw = this.container.getWidth();\r\n\r\n\t\t\tthis.setSliderHeight();\r\n\t\t\t\r\n\t\t\tthis.largestH = h - this.getSliderHeight();\r\n\t\t\tthis.largestW = w;\r\n\t\t\t\r\n\t\t\tthis.chart.attr('height', h)\r\n\t\t\t\t.attr('width', w);\r\n\t\t\t\t\r\n\t\t\tthis.setTitleLength();\r\n\t\t\t\r\n\t\t\tthis.chart.select('rect[class=clipping-rectangle]')\r\n\t\t        .attr(\"x\", 0)\r\n\t\t        .attr(\"y\", this.tPadding + this.getSliderHeight())\r\n\t\t        .attr(\"width\", w)\r\n\t\t        .attr(\"height\", this.largestH);\r\n\t\t\r\n\t\t\tthis.redraw();\r\n\t\t}\r\n\t}\r\n\t\r\n    ,drawXAxis: function() {\r\n    \tvar me = this;\r\n    \t//svg element constants\r\n\t\tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n    \t\r\n\t\t//initialize x scales\r\n\t\tthis.manageAllXScales();\r\n\t\t\t\r\n    \t//define X axis\r\n\t\tthis.xAxis = d3.axisBottom(me.xScale)\r\n\t\t    .ticks(Math.round(me.numVisPoints))\r\n\t\t    .tickFormat(function(d){\r\n\t\t    \tvar val;\r\n\t\t    \tif(me.parent.getApiParam('mode') === 'document') { \r\n\t\t\t\t\tval = 'Segment ' + (parseInt(d) + 1);\r\n\t\t\t\t}\r\n\t\t\t\tif(me.parent.getApiParam('mode') === 'corpus') {\r\n\t\t\t\t\tval = d + 1 + '. ' + me.titlesArray[d];\r\n\t\t\t\t}\r\n\t\t\t\treturn val;\r\n\t\t    });\r\n\t\t\r\n\t\t//draw the x-axis\r\n\t\tthis.xAxisEl = this.chart.append('g')\r\n    \t\t.attr('class', 'axisX')\r\n    \t\t.attr('transform', 'translate(0,' + (h - this.bPadding) + ')')\r\n    \t\t.call(this.xAxis);\r\n    \t\r\n//    \tthis.xAxisEl.selectAll('text')\r\n//\t\t\t.on('mouseover', function () {\r\n//\t\t\t\td3.select(this)\r\n//\t\t\t\t\t.attr('fill', 'red')\r\n//\t\t\t\t\t.style(\"font-size\", '18px');\r\n//\t\t\t})\r\n//\t\t\t.on('mouseout', function () {\r\n//\t\t\t\td3.select(this)\r\n//\t\t\t\t\t.attr('fill', 'black')\r\n//\t\t\t\t\t.style(\"font-size\", '11px');\r\n//\t\t\t});\r\n\t\tthis.styleXAxis();\r\n    }\r\n    \r\n    ,styleXAxis: function() {\r\n    \tthis.xAxisEl.selectAll('text')\r\n\t        .style('font-family', 'sans-serif')\r\n\t        .style('font-size', '11px');\r\n\r\n\t    this.xAxisEl.selectAll('line')\r\n\t        .style('fill','none')\r\n\t        .style('stroke','black')\r\n\t        .style('shape-rendering', 'crispEdges');\r\n\t        \r\n\t    this.xAxisEl.selectAll('path')\r\n\t        .style('fill','none')\r\n\t        .style('stroke','black')\r\n\t        .style('shape-rendering', 'crispEdges');\r\n    }\r\n    \r\n    ,redrawXAxis: function() {\r\n    \tthis.chart.selectAll('g[class=axisX]')\r\n\t\t\t.remove();\r\n\t\t\r\n\t\tthis.drawXAxis();\r\n    }\r\n    \r\n    ,drawYAxis: function() {\r\n    \tvar me = this;\r\n    \t\r\n    \t//svg element constants\r\n\t\tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n\t\t\r\n\t\t//initialize Y scales\r\n\t\tthis.manageAllYScales();\r\n    \t\r\n    \tvar yTicksScale = d3.scaleLinear()\r\n\t\t\t.domain([200,700])\r\n\t\t\t.range([5,15]);\r\n\t\t\t\r\n\t\tvar numberFormat = d3.format(\".2r\");\r\n\t\tfunction logFormat(d) {\r\n\t\t\tvar x = Math.log(d) / Math.log(10) + 1e-6;\r\n\t\t\treturn Math.abs(x - Math.floor(x)) < 0.7 ? numberFormat(d) : \"\";\r\n\t\t} \r\n\t\t\r\n\t\tthis.yAxis = d3.axisLeft(me.yScale)\r\n\t    \t.ticks(yTicksScale(h))\r\n\t    \t.tickFormat(logFormat)\r\n\t\t\t.tickSize(-w + this.rPadding + this.lPadding);\r\n\t\t\r\n\t\t//draw the y-axis\r\n\t\tthis.yAxisEl = this.chart.append('g')\r\n\t    \t.attr('class', 'axisY')\r\n\t    \t.attr('transform', 'translate(' + this.lPadding + ',0)')\r\n\t    \t.call(this.yAxis);\r\n\t\t\r\n\t    this.yAxisEl.selectAll('text')\r\n\t        .style('font-family', 'sans-serif')\r\n\t        .style('font-size', '11px');\r\n\t    \r\n\t    //controls horizontal grid line-opacity\r\n\t    this.yAxisEl.selectAll('line')\r\n\t        .style('fill','none')\r\n\t        .style('stroke','black')\r\n\t        .style('shape-rendering', 'crispEdges')\r\n\t        .style('stroke-opacity', 0.05);\r\n\t        \r\n\t    this.yAxisEl.selectAll('path')\r\n\t        .style('fill','none')\r\n\t        .style('stroke','black')\r\n\t        .style('shape-rendering', 'crispEdges');\r\n    }\r\n    \r\n    ,redrawYAxis: function() {\r\n    \tthis.chart.selectAll('g[class=axisY]')\r\n\t\t\t.remove();\r\n\t\t\r\n\t\tthis.drawYAxis();\r\n    }\r\n    \r\n    ,drawChart: function() {\r\n    \tvar me = this;\r\n    \t\r\n    \t//create graph text\r\n\t    //attach the nested data to svg:g elements\r\n\t\tvar counterSeriesDiv = this.chart.selectAll('g[class=section]')\r\n\t        .data(me.displayData, function(d) { return d.outerCounter; })\r\n\t      .enter().append('g')\r\n\t        .attr('class', 'section')\r\n\t        .attr(\"clip-path\", \"url(#clip1)\");\r\n\t\t\r\n\t\tvar frequencySeriesDiv = counterSeriesDiv.selectAll('g')\r\n\t\t\t.data(function(d) { return d.displayInternal; })\r\n\t      .enter().append('g')\r\n\t        .attr('class', 'frequencies')\r\n\t        .on('mouseover', function() {\r\n\t\t\t\td3.select(this).style('fill', 'red');\r\n\t\t\t})\r\n\t\t\t.on('mouseout', function() {\r\n\t            d3.select(this).style('fill', 'black');\r\n\t\t\t});\r\n\t             \r\n        //attach the frequency data to data points \r\n\t\tvar dataPoint = frequencySeriesDiv.selectAll('text')\r\n    \t\t.data(function(d) { return d.frequencyArray; })\r\n\t\t  .enter().append('text')\r\n\t        .attr('class', function(d) {\r\n\t        \treturn me.removeFilteredCharacters(d.wordString);\r\n\t        })\r\n\t    \t.attr('x', function (d) {\r\n\t    \t\tvar startPoint = (0.5 / d.numInSeries) - 0.5\r\n\t\t\t\t\t,valueRange = (d.posInSeries / d.numInSeries * 0.8)\r\n\t\t\t\t\t,x = d.counter + me.callOffset() + startPoint + valueRange; \r\n\t\t\t\treturn me.xScale(x);\r\n\t\t\t})\r\n\t    \t.attr('y', function (d) { \r\n\t\t\t\tvar y = d.freq;\r\n\t\t\t\treturn me.yScale(y);\r\n\t    \t})\r\n\t    \t.attr('text-anchor', 'middle')\r\n\t    \t.attr('transform', function (d) {\r\n\t    \t\tvar startPoint = (0.5 / d.numInSeries) - 0.5\r\n\t\t\t\t\t,valueRange = (d.posInSeries / d.numInSeries * 0.8)\r\n\t\t\t\t\t,x = d.counter + me.callOffset() + startPoint + valueRange\r\n\t\t\t\t\t,y = d.freq;\r\n\t    \t\treturn 'translate(0, 0) rotate(-20 ' + me.xScale(x) + ' '+ me.yScale(y) + ')';\r\n\t    \t})\r\n\t    \t.style('font-size', function(d) { return me.fontScale(d.freq) + 'px'; })\r\n\t    \t.style('fill-opacity', function(d) { return me.opacityScale(d.freq); })\r\n\t        .text(function(d) { return d.wordString; })\r\n\t        .on('mouseover', function(d) { \r\n\t \t        d3.select(this).style('cursor', 'pointer').style('font-size', function(d) { return (me.fontScale(d.freq) * me.maxFont / me.fontScale(d.freq)) + 'px'; });\r\n\t \t        var paramsBundle = me.buildParamsBundle(d);\r\n\t \t        me.manageOverlaySlippery(paramsBundle);\r\n\t        })\r\n\t        .on('mouseout', function(d) { \r\n\t        \td3.select(this).style('cursor', 'auto').style('font-size', function(d) { return me.fontScale(d.freq) + 'px'; });\r\n\t        \tvar paramsBundle = me.buildParamsBundle(d);\r\n\t        \tme.manageOverlaySlippery(paramsBundle);\r\n\t        })\r\n\t        .on('click', function(d) {\r\n\t        \tvar paramsBundle = me.buildParamsBundle(d);\r\n\t        \tme.manageOverlaySticky(paramsBundle);\r\n\t\t\t})\r\n\t  \t  .append('title')\r\n\t    \t.text(function(d) { return d.wordString; });\r\n    }\r\n    \r\n    ,redrawChart: function() {\r\n    \tthis.chart.selectAll('g[class=section]')\r\n\t\t\t.remove();\r\n\t\t\t\r\n\t\tthis.drawChart();\r\n    }\r\n    \r\n    ,drawVerticalSlider: function() {\r\n//    \tvar h = this.container.getHeight(),\r\n//\t\t\tw = this.container.getWidth();\r\n//    \t\r\n//    \tvar totalTopOffset = (this.tPadding * 2) + this.sliderHeight\r\n//        \t,lengthVer = h - (totalTopOffset + this.bPadding);\r\n//        \r\n//\t    //create vertical minimap rectangle and slider\r\n//\t    var sliderPosScale = d3.scaleLinear()\r\n//\t\t\t.domain([this.absMaxFreq, this.minFreq])\r\n//\t\t\t.range([totalTopOffset, lengthVer]);\r\n//\t    \r\n//\t    var rectVer = this.chart.append('rect')\r\n//\t  \t    .attr('class', 'minimap')\r\n//\t  \t    .attr('x', w - (this.rPadding * 0.66))\r\n//\t  \t    .attr('y', totalTopOffset)\r\n//\t  \t    .attr('rx', 3.33)\r\n//\t  \t    .attr('width', 6.66)\r\n//\t  \t    .attr('height', lengthVer)\r\n//\t  \t    .style('fill','aliceblue')\r\n//\t  \t    .style('stroke','black')\r\n//\t  \t    .style('stroke-width','1')\r\n//\t  \t    .style('fill-opacity','0.75');\r\n//\t    \t\r\n//\t    var sliderVer = this.chart.append('rect')\r\n//\t\t\t.attr('class', 'minimap')\r\n//\t  \t    .attr('x', w - (this.rPadding * 0.66))\r\n//\t  \t    .attr('y', totalTopOffset)\r\n//\t  \t    .attr('rx', 3.33)\r\n//\t  \t    .attr('width', 6.66)\r\n//\t  \t    .attr('height', lengthVer * ((this.absMaxFreq * this.valFraction) - this.minFreq) / this.absMaxFreq)\r\n//\t  \t    .style('fill','CornflowerBlue')\r\n//\t  \t    .style('stroke','black')\r\n//\t  \t    .style('stroke-width','1');\r\n    }\r\n    \r\n    ,redrawVerticalSlider: function() {\r\n    \tthis.chart.selectAll('rect[class=minimap]')\r\n\t\t\t.remove();\r\n\t\t\t\r\n\t\tthis.drawVerticalSlider();\r\n    }\r\n    \r\n    ,drawSlider: function() {\r\n    \tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n\t    \r\n\t\t//Create navigation bar\r\n\t\tvar lengthHor = w - (this.rPadding + this.lPadding)\r\n\t\t\t,offsetVis = this.lPadding + (lengthHor * ((this.numVisPoints - 1) / 2) * ( 1 / (this.numDataPoints - 1)))\r\n\t\t\t,offsetVisStart = this.lPadding\r\n\t\t\t,offsetVisEnd = this.lPadding + (lengthHor * ((this.numVisPoints - 1) / (this.numDataPoints - 1)));\r\n\t\t\r\n\t\tvar lineX = this.chart.append('line')\r\n\t\t\t.attr('class', 'slider axis')\r\n\t\t\t.attr('x1', this.lPadding)\r\n\t\t\t.attr('x2', this.container.getWidth() - this.rPadding)\r\n\t\t\t.attr('y1', this.tPadding + this.sliderHeight)\r\n\t\t\t.attr('y2', this.tPadding + this.sliderHeight)\r\n\t\t\t.style('shape-rendering', 'crispEdges')\r\n\t\t\t.style('stroke','black')\r\n\t  \t    .style('stroke-width','1');\r\n\t\t\t\t\t\r\n\t\tvar lineY = this.chart.append('line')\r\n\t\t\t.attr('class', 'slider axis')\r\n\t\t\t.attr('x1', this.lPadding)\r\n\t\t\t.attr('x2', this.lPadding)\r\n\t\t\t.attr('y1', this.tPadding + this.sliderHeight)\r\n\t\t\t.attr('y2', this.tPadding)\r\n\t\t\t.style('shape-rendering', 'crispEdges')\r\n\t\t\t.style('stroke','black')\r\n\t  \t    .style('stroke-width','1');\r\n\t\t\r\n\t    var sliderHorStart = this.chart.append('line')\r\n\t  \t    .attr('class', 'slider')\r\n\t  \t    .attr('id', 'before')\r\n\t  \t    .attr('x1', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisStart)\r\n\t  \t    .attr('x2', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisStart)\r\n\t  \t    .attr('y1', this.tPadding + this.sliderHeight)\r\n\t  \t    .attr('y2', this.tPadding)\r\n\t  \t    .style('stroke', 'black')\r\n\t  \t    .style('stroke-width', '1');\r\n\t    \r\n\t    var sliderHorEnd = this.chart.append('line')\r\n\t  \t    .attr('class', 'slider')\r\n\t  \t    .attr('id', 'after')\r\n\t  \t    .attr('x1', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t  \t    .attr('x2', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t  \t    .attr('y1', this.tPadding + this.sliderHeight)\r\n\t  \t    .attr('y2', this.tPadding)\r\n\t  \t    .style('stroke', 'black')\r\n\t  \t    .style('stroke-width', '1');\r\n\t  \t    \t  \t    \r\n\t   var greyBoxBefore = this.chart.append('rect')\r\n  \t    \t.attr('class', 'slider')\r\n  \t    \t.attr('id', 'boxBefore')\r\n  \t    \t.attr('x', this.lPadding)\r\n  \t    \t.attr('y', this.tPadding)\r\n  \t    \t.attr('height', this.sliderHeight)\r\n  \t    \t.attr('width', lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1))\r\n  \t    \t.style('fill', 'silver')\r\n  \t    \t.style('fill-opacity', 0.25)\r\n\t    \t.style('cursor', 'move');\r\n\t    \t\t    \r\n\t    var greyBoxAfter = this.chart.append('rect')\r\n\t    \t.attr('class', 'slider')\r\n\t    \t.attr('id', 'boxAfter')\r\n\t    \t.attr('x', (lengthHor * (this.shiftCount - this.callOffset()) / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t    \t.attr('y', this.tPadding)\r\n\t    \t.attr('height', this.sliderHeight)\r\n\t    \t.attr('width', lengthHor * (this.numDataPoints - this.numVisPoints - this.shiftCount + this.callOffset()) / (this.numDataPoints - 1))\r\n\t    \t.style('fill', 'silver')\r\n\t    \t.style('fill-opacity', 0.25)\r\n\t    \t.style('cursor', 'move');\r\n\t    \r\n\t    var me = this;\r\n    \tvar drag = d3.drag()\r\n        .on('drag', function(d) {\r\n        \tif(!me.isTransitioning) {\r\n        \t\tthis.drag = true;\r\n        \t\t\r\n\t        \tvar w = me.parent.getWidth()\r\n\t        \t\t,displaceX = parseInt(d3.event.dx)\r\n\t        \t\t,checkBefore\r\n\t        \t\t,checkAfter\r\n\t        \t\t,pos = 0;\r\n\t        \t\t\r\n\t        \t//add up the slider movements as they occur\t\r\n        \t\tme.sliderDragSum += d3.event.dx;\r\n\t        \t\r\n\t        \tme.chart.selectAll('#before')\r\n\t        \t\t.attr('x1', function () { \r\n\t        \t\t\tcheckBefore = parseInt(this.getAttribute('x1'));\r\n\t        \t\t\tpos = parseInt(this.getAttribute('x1')) + displaceX;\r\n\t        \t\t\treturn parseInt(this.getAttribute('x1'));\r\n\t        \t\t});\r\n\t        \t\r\n\t        \tme.chart.selectAll('#after')\r\n\t        \t\t.attr('x1', function () { \r\n\t        \t\t\tcheckAfter = parseInt(this.getAttribute('x1'));\r\n\t        \t\t\treturn parseInt(this.getAttribute('x1'));\r\n\t        \t\t});\r\n\t        \t\r\n\t        \tif(checkBefore + displaceX < me.lPadding || checkAfter + displaceX > w - me.rPadding) {\r\n\t        \t\tdisplaceX = 0;\r\n\t        \t}\r\n\t        \t\r\n\t        \tme.chart.select('#boxBefore')\r\n\t        \t\t.attr('width', function () { return parseInt(this.getAttribute('width')) + displaceX; });\r\n\t        \t\r\n\t        \tme.chart.select('#boxAfter')\r\n\t        \t\t.attr('x', function () { return parseInt(this.getAttribute('x')) + displaceX; })\r\n        \t\t\t.attr('width', function () { return Math.max(0, parseInt(this.getAttribute('width')) - displaceX); });\r\n\t        \t\t\r\n\t        \tme.chart.selectAll('#before')\r\n\t        \t\t.attr('x1', function () { return parseInt(this.getAttribute('x1')) + displaceX; })\r\n\t        \t\t.attr('x2', function () { return parseInt(this.getAttribute('x2')) + displaceX; });\r\n\t        \t\r\n\t        \tme.chart.selectAll('#after')\r\n        \t\t\t.attr('x1', function () { return parseInt(this.getAttribute('x1')) + displaceX; })\r\n        \t\t\t.attr('x2', function () { return parseInt(this.getAttribute('x2')) + displaceX; });\r\n        \t}\r\n        })\r\n        .on('end', function(d) {\r\n        \tif(this.drag){\r\n        \t\tthis.drag = false;\r\n        \t\t\r\n        \t\tvar inverseSliderScale = d3.scaleLinear()\r\n\t\t\t    \t.domain([0, me.container.getWidth() - (me.lPadding + me.rPadding)])\r\n\t\t\t    \t.range([0, me.numDataPoints]);\r\n\t\t\t    \t\r\n\t\t\t\t//calculate the position that everything should transition to\r\n\t        \tvar moveByThis = inverseSliderScale(me.sliderDragSum),\r\n\t        \t\tmoveShiftCount,\r\n\t        \t\toldShiftCount = me.shiftCount;\r\n\t        \t\t\r\n\t    \t\tif(moveByThis > 0) moveShiftCount = Math.floor(moveByThis);\r\n\t    \t\tif(moveByThis < 0) moveShiftCount = Math.ceil(moveByThis);\r\n\t    \t\t\r\n\t    \t\t//update shiftCount re-animate \r\n\t    \t\tme.shiftCount += moveShiftCount;\r\n\t    \t\tif(me.shiftCount < 0) me.shiftCount = 0;\r\n\t    \t\tif(me.shiftCount > me.numDataPoints - 1) me.shiftCount = me.numDataPoints - 1;\r\n\t    \t\t\r\n\t    \t\tif(me.shiftCount !== oldShiftCount) {\r\n\t    \t\t\tme.sliderDragSum = 0;\r\n\t    \t\t\t\r\n\t        \t\tme.parent.setApiParams({position: me.shiftCount});\r\n\t\t\t\t\tme.prepareData();\r\n\t\t\t\t\t\r\n\t\t\t\t\tme.redraw();\r\n\t        \t}\r\n        \t}\r\n        });\r\n\t    \r\n\t    greyBoxBefore.call(drag);\r\n\t    greyBoxAfter.call(drag);\r\n    }\r\n    \r\n    ,removeSlider: function(removeTermLines) {\r\n    \tthis.chart.selectAll('rect[class=slider]')\r\n    \t\t.remove();\r\n\t\r\n    \tthis.chart.selectAll('line[class~=slider]')\r\n\t    \t.remove();\r\n    \t\r\n    \tif (removeTermLines) {\r\n    \t\tthis.chart.selectAll('g[class=slider]')\r\n\t    \t\t.remove();\r\n    \t}\r\n    }\r\n    \r\n    ,redrawSlider: function() {\r\n    \tthis.removeSlider();\r\n    \tthis.drawSlider();\r\n    }\r\n\t\r\n\t,animateVis: function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\t//prepare the data for the visualization\r\n\t\t//shiftCount = 0, means the displayData begins with the same value as nestedData\r\n\t\tvar mode = this.parent.getApiParam('mode');\r\n\t\t\r\n\t    //svg element constants\r\n\t\tvar h = this.container.getHeight(),\r\n\t\t\tw = this.container.getWidth();\r\n\r\n\t\tvar duration = this.getDuration();\r\n\t\t\r\n\t\t//if transitionCall === 'draw': draw the function for the first time\t\t\r\n\t\t//if not: shift displayData to a different subset of allData\r\n\t\t//then display the newly shifted data\t\r\n\t\tif(this.transitionCall === 'left' || this.transitionCall ==='right'){\r\n\t\t\tthis.xAxisEl.transition()\r\n\t            .duration(duration)\r\n\t            .ease(d3.easeLinear)\r\n\t            .call(this.xAxis);\r\n\t            \r\n\t        this.styleXAxis();\r\n\t        \r\n\t        this.drawChart();\r\n\t    \r\n        \t//if call is shift move the dataPoints\t\r\n        \tthis.chart.selectAll('.frequencies').transition()\r\n        \t\t.duration(duration)\r\n\t            .ease(d3.easeLinear)\r\n\t            .selectAll('text')\r\n\t            .attr('x', function (d) {\r\n\t            \tvar startPoint = (0.5 / d.numInSeries) - 0.5,\r\n\t\t\t\t\t\tvalueRange = (d.posInSeries / d.numInSeries * 0.8),\r\n\t\t\t\t\t\tx = d.counter + startPoint + valueRange; \r\n\t\t\t\t\treturn me.xScale(x);\r\n\t\t\t\t})\r\n\t\t\t\t.attr('transform', function (d) {\r\n\t\t    \t\tvar startPoint = (0.5 / d.numInSeries) - 0.5\r\n\t\t\t\t\t\t,valueRange = (d.posInSeries / d.numInSeries * 0.8)\r\n\t\t\t\t\t\t,x = d.counter + startPoint + valueRange\r\n\t\t\t\t\t\t,y = d.freq;\r\n\t\t    \t\treturn 'translate(0, 0) rotate(-20 ' + me.xScale(x) + ' '+ me.yScale(y) + ')';\r\n\t\t\t\t});\r\n\t    \t   \r\n        \t//Create navigation bar\r\n\t\t\tvar lengthHor = w - (this.rPadding + this.lPadding)\r\n\t\t\t\t,offsetVis = this.lPadding + (lengthHor * ((this.numVisPoints - 1) / 2) * ( 1 / (this.numDataPoints - 1)))\r\n\t\t\t\t,offsetVisStart = this.lPadding\r\n\t\t\t\t,offsetVisEnd = this.lPadding + (lengthHor * ((this.numVisPoints - 1) / (this.numDataPoints - 1)));\r\n\t\t\t\t\r\n        \tthis.chart.select('#before').transition()\r\n\t\t\t\t.duration(duration)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t\t\t \t.attr('x1', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisStart)\r\n\t\t\t \t.attr('x2', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisStart)\r\n\t\t  \t    .attr('y1', this.tPadding + this.getSliderHeight())\r\n\t\t  \t    .attr('y2', this.tPadding)\r\n\t\t  \t    .on('end', function () {\r\n\t\t  \t    \tif (me.parent.isMasked()) {\r\n\t\t  \t    \t\tme.parent.unmask();\r\n\t\t  \t    \t}\r\n\t\t  \t    \tif(me.continueTransition) { \r\n\t\t  \t    \t\tsetTimeout(function () {\r\n\t\t  \t    \t\t\tme.callTransition();\r\n\t\t  \t    \t\t},50); \r\n\t\t  \t    \t} else { \r\n\t\t  \t    \t\t//manage transition movements and controls\r\n\t\t  \t    \t\tme.isTransitioning = false;\r\n\t\t  \t\t\t\tme.manageMvtButtons();\r\n\t\t  \t    \t}\r\n\t\t  \t    });\r\n        \t\r\n\t  \t   this.chart.select('#after').transition()\r\n\t\t\t\t.duration(duration)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t\t\t \t.attr('x1', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t\t\t \t.attr('x2', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t\t  \t    .attr('y1', this.tPadding + this.getSliderHeight())\r\n\t\t  \t    .attr('y2', this.tPadding);\r\n\t\t    \r\n\t  \t   this.chart.select('#boxBefore').transition()\r\n\t\t\t\t.duration(duration)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t  \t    \t.attr('x', this.lPadding)\r\n\t  \t    \t.attr('y', this.tPadding)\r\n\t  \t    \t.attr('height', this.getSliderHeight())\r\n\t  \t    \t.attr('width', lengthHor * (this.shiftCount) / (this.numDataPoints - 1));\r\n\t    \r\n\t  \t    this.chart.select('#boxAfter').transition()\r\n\t\t\t\t.duration(duration)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t  \t    \t.attr('x', (lengthHor * this.shiftCount / (this.numDataPoints - 1)) + offsetVisEnd)\r\n\t  \t    \t.attr('y', this.tPadding)\r\n\t  \t    \t.attr('height', this.getSliderHeight())\r\n\t  \t    \t.attr('width', lengthHor * (this.numDataPoints - this.numVisPoints - this.shiftCount) / (this.numDataPoints - 1));\r\n        }\r\n        \r\n        //animates the chart overlay\r\n\t\tthis.redrawChartOverlay();\r\n\t}\r\n\t\r\n\t,callTransition: function () {\r\n\t\tif(this.transitionCall === 'left') this.toggleLeftCheck();\r\n        if(this.transitionCall === 'right') this.toggleRightCheck();\r\n\t}\r\n\t\t\r\n\t//build the params bundle to pass to manageOverlaySticky\r\n\t,buildParamsBundle: function (info) { \r\n\t\t//console.log('fn: builParamsBundle')\r\n\t\tvar type = info.wordString,\r\n\t\t\tparams = {},\r\n\t\t\tparamsBundle = {},\r\n\t\t\tdocId;\r\n\r\n\t\tif ( this.parent.getApiParam('mode') === 'document') { // set position\r\n\t\t\tdocId = info.docId;\r\n\t\t\tvar totalTokens = this.parent.getCorpus().getDocument(docId).get('totalTokens') - 1;\r\n\t\t\tparams.tokenIdStart = parseInt(this.category * totalTokens / this.numDataPoints);\r\n\t\t\tparams.docIdType = docId + ':' + type;\r\n\t\t} else {\r\n\t\t}\r\n\t\t\t\t\r\n\t\tparamsBundle = { params: params, type: type };\r\n\t\t\r\n\t\treturn paramsBundle;\r\n\t}\r\n\t\r\n\t,manageOverlaySlippery: function (paramsBundle) {\r\n\r\n\t\t//console.log('fn: manageOverlaySlippery')\r\n\t\tvar string = paramsBundle.type\r\n\t\t\t,selector = this.removeFilteredCharacters(paramsBundle.type) \r\n\t\t\t,checkOn = 'on'\r\n\t\t\t,index;\r\n\t\t\r\n//\t\tthis.continueTransition = true;\r\n//\r\n//\t\tthis.transitionCall = 'draw';\r\n\t\t\r\n\t\t//check if the word that was selected was already sticky\r\n\t\t//if so checkOn = off and nothing happens\r\n\t\tvar len = this.overlayQueue.length;\r\n\t\twhile(--len >= 0){\r\n\t\t\tif(selector === this.overlayQueue[len].selector){ \r\n\t\t    \tcheckOn = 'off';\r\n\t\t    \tindex = len;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//make sure the selected word wasn't just a sticky word that is being deselected\r\n\t\t//thus happens to be scrolled over\r\n\t\tif(selector === this.lastSticky){\r\n\t\t\tcheckOn = 'off';\r\n\t\t\tthis.lastSticky = null;\r\n\t\t}\r\n\t\t\r\n\t\tif(checkOn === 'on') {\r\n\t\t\t//select a slippery word\r\n\t\t\tif(selector !== this.lastSlippery) {\r\n\t\t\t\tvar pathHolder = this.prepareFullPath(string);\r\n\t\t\t\tvar lineObject = {\r\n\t\t\t\t\tword: string, \r\n\t\t\t\t\tselector: selector, \r\n\t\t\t\t\tparams: paramsBundle, \r\n\t\t\t\t\tfullPath: pathHolder.path,\r\n\t\t\t\t\tpathMin: pathHolder.min,\r\n\t\t\t\t\tpathMax: pathHolder.max,\r\n\t\t\t\t\tcolour: 'red'\r\n\t\t\t\t};\t\r\n\t\t\t\tif(this.lastSlippery !== null) {\r\n\t\t\t\t\t//exceptional case where lastSlippery was not properly removed\r\n\t\t\t\t\tthis.chartOverlayOff(this.lastSlippery);\r\n\t\t\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\t\t\tthis.sliderOverlayOff(this.lastSlippery);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.lastSlippery = null;\r\n\t\t\t\t\t\r\n\t\t\t\t\t//select new slippery word\r\n\t\t\t\t\t//change its colour\r\n\t\t\t\t\tthis.chartOverlayOn(lineObject);\r\n\t\t\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\t\t\tthis.sliderOverlayOn(lineObject);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.lastSlippery = selector;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t//normal case select slippery word\r\n\t\t\t\t\t//change its colour\r\n\t\t\t\t\tthis.chartOverlayOn(lineObject);\r\n\t\t\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\t\t\tthis.sliderOverlayOn(lineObject);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.lastSlippery = selector;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t//normal case deselect a slippery word\r\n\t\t\t\tthis.chartOverlayOff(selector);\r\n\t\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\t\tthis.sliderOverlayOff(this.lastSlippery);\r\n\t\t\t\t}\r\n\t\t\t\tthis.lastSlippery = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\t//else do nothing \r\n\t\t\t//this means, don't select a word that is already sticky\r\n\t\t}\r\n\t}\r\n\r\n\t,manageOverlaySticky: function (paramsBundle) {\r\n//\t\tconsole.log('fn: manageOverlaySticky')\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tvar term = paramsBundle.type;\r\n\t\t\r\n\t\tthis.transitionCall = 'draw';\r\n\t\t\r\n\t\tif (!this.isTermSelected(term)) {\r\n\t\t\tthis.doTermSelect(term, true);\r\n\t\t} else {\r\n\t\t\tthis.doTermDeselect(term, true);\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetTermIndex: function(term) {\r\n\t\tvar index = -1;\r\n\t\tvar selector = selector = this.removeFilteredCharacters(term);\r\n\t\tvar len = this.overlayQueue.length;\r\n\t\twhile(--len >= 0){\r\n\t\t\tif(selector === this.overlayQueue[len].selector){ \r\n\t\t\t\tindex = len;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn index;\r\n\t},\r\n\t\r\n\tisTermSelected: function(term) {\r\n\t\treturn this.getTermIndex(term) !== -1;\r\n\t},\r\n\t\r\n\tdoTermSelect: function(term, legendAdd) {\r\n\t\tvar selector = selector = this.removeFilteredCharacters(term);\r\n\t\t//finish updating API array of selected words\r\n\t\tvar apiArray = this.parent.getApiParam('selectedWords');\r\n\t\tapiArray.push(term);\r\n\t\tthis.parent.setApiParams({selectedWords: apiArray});\r\n\t\t\r\n\t\t//draw the sticky path\r\n\t\tvar color = this.parent.getApplication().getColorForTerm(term, true);\r\n\t\t\r\n\t\tif (legendAdd === true) {\r\n\t\t\tvar legend = this.parent.query('[xtype=legend]')[0];\r\n\t\t\tlegend.getStore().add({name: term, mark: color});\r\n\t\t} else {\r\n\t\t\tvar legend = this.parent.query('[xtype=legend]')[0];\r\n\t\t\tvar record = legend.getStore().findRecord('name', term);\r\n\t\t\tif (record !== null) {\r\n\t\t\t\trecord.set('mark', color);\r\n\t\t\t\tlegend.refresh();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvar pathHolder = this.prepareFullPath(term);\r\n\t\tvar lineObject = {\r\n\t\t\tword: term, \r\n\t\t\tselector: selector,\r\n\t\t\tparams: {params: {}, type: term},\r\n\t\t\tfullPath: pathHolder.path,\r\n\t\t\tpathMin: pathHolder.min,\r\n\t\t\tpathMax: pathHolder.max,\r\n\t\t\tcolour: color\r\n\t\t};\r\n\t\t\r\n\t\t//if this was selected a slippery before click event remove line from navigation bar\r\n\t\tif(selector === this.lastSlippery){\r\n\t\t\tif (this.isSliderVisible) {\r\n\t\t\t\tthis.sliderOverlayOff(selector);\r\n\t\t\t}\r\n\t\t\tthis.lastSlippery = null;\r\n\t\t}\r\n\t\t\r\n\t\t//make sure there is no path already present\r\n\t\tthis.chart.select('g[class=frequency-line-' + selector.replace(/'/g, \"\\\\'\") + ']').remove();\r\n\r\n\t\tthis.overlayQueue.push(lineObject);\r\n\t\tthis.chartOverlayOn(lineObject);\r\n\t\tif (this.isSliderVisible) {\r\n\t\t\tthis.sliderOverlayOn(lineObject);\r\n\t\t}\r\n\t},\r\n\t\r\n\tdoTermDeselect: function(term, legendRemove) {\r\n\t\tvar selector = this.removeFilteredCharacters(term);\r\n\t\tvar index = this.getTermIndex(term);\r\n\t\t\r\n\t\tif (legendRemove === true) {\r\n\t\t\tvar legend = this.parent.query('[xtype=legend]')[0];\r\n\t\t\tvar index = legend.getStore().findExact('name', term);\r\n\t\t\tlegend.getStore().removeAt(index);\r\n\t\t}\r\n\t\t\r\n\t\tvar updateApi = this.parent.getApiParam('selectedWords');\r\n\t\tfor(var i = 0, len = updateApi.length; i < len; i++) {\r\n\t\t\tif(updateApi[i] === selector) {\r\n\t\t\t\tupdateApi.splice(i, 1);\r\n\t\t\t\tthis.parent.setApiParams({selectedWords: updateApi});\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.chartOverlayOff(selector);\r\n    \tthis.overlayQueue.splice(index, 1);\r\n    \tif (this.isSliderVisible) {\r\n    \t\tthis.sliderOverlayOff(selector);\r\n    \t}\r\n\t\tthis.lastSticky = selector;\r\n\t}\r\n\t\r\n\t,prepareFullPath: function (string) {\r\n\t\tvar linePosArray = [],\r\n\t\t\tpathMin = this.absMaxFreq,\r\n\t\t\tpathMax = this.absMinFreq;\r\n\t\t\r\n\t\tfor(var k = 0, len = this.allData.length; k < len; k++){\r\n\t\t\tfoundB = 0;\r\n\t\t\tfor(var i = 0, lenA = this.allData[k].allDataInternal.length; i < lenA; i++) {\r\n\t\t\t\tfor(var j = 0, lenB = this.allData[k].allDataInternal[i].frequencyArray.length; j < lenB; j++){\r\n\t\t\t\t\tif(this.allData[k].allDataInternal[i].frequencyArray[j].wordString === string){\r\n\t\t\t\t\t\tvar yVal1 = this.allData[k].allDataInternal[i].frequencyArray[j].freq;\r\n\t\t\t\t\t\tlinePosArray.push({x: k, y: yVal1});\r\n\t\t\t\t\t\tif(yVal1 < pathMin) pathMin = yVal1;\r\n\t\t\t\t\t\tif(yVal1 > pathMax) pathMax = yVal1;\r\n\t\t\t\t\t\tfoundB = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(foundB === 0){\r\n\t\t\t\tvar yVal2 = this.minFreq;\r\n\t\t\t\tlinePosArray.push({x: k, y: yVal2});\r\n\t\t\t\tif(yVal2 < pathMin) pathMin = yVal2;\r\n\t\t\t\tif(yVal2 > pathMax) pathMax = yVal2;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {path: linePosArray, min: pathMin, max: pathMax};\r\n\t}\r\n\t\r\n\t,updateFullPath: function () {\r\n//\t\tconsole.log(\"fn: updateFullPath\")\r\n\t\tvar lenA = this.overlayQueue.length;\r\n\t\twhile(lenA-- > 0){\r\n\t\t\tvar pathHolder = this.prepareFullPath(this.overlayQueue[lenA].word);\r\n\t\t\tthis.overlayQueue[lenA].fullPath = pathHolder.path;\r\n\t\t\tthis.overlayQueue[lenA].pathMin = pathHolder.min;\r\n\t\t\tthis.overlayQueue[lenA].pathMax = pathHolder.max;\r\n\t\t}\r\n//\t\tconsole.log(this.overlayQueue)\r\n\t}\r\n\t\r\n\t,buildSliderPath: function (pathArray) {\r\n\t\tvar me = this;\r\n\t\tvar line = d3.line()\r\n\t\t    .x(function(d) { return me.xSliderScale(d.x); })\r\n\t\t    .y(function(d) { return me.ySliderScale(d.y); })\r\n\t\t    .curve(d3.curveNatural);\r\n\t\treturn line(pathArray);\r\n\t}\r\n\t\r\n\t,sliderOverlayOn: function (objectToSelect) {\r\n\t\t//console.log('fn: sliderOverlayOn')\t\t\r\n\t\tthis.transitionSliderOverlay(objectToSelect);\r\n\t\t\r\n\t\t//draw path\r\n\t\tthis.chart.append('g')\r\n\t\t\t.attr('class', 'slider')\r\n\t\t\t.attr('id', 'slider-line-' + objectToSelect.word)\r\n\t\t\t.append('path')\r\n\t\t\t.attr(\"d\", this.buildSliderPath(objectToSelect.fullPath))\r\n\t\t\t.style('stroke', objectToSelect.colour)\r\n\t\t\t.style('stroke-width', 2)\r\n\t\t\t.style('fill', 'none');\r\n\t\t\t\r\n\t\t//redraw slider\r\n\t\tthis.redrawSlider();\r\n\t}\r\n\t\r\n\t,sliderOverlayOff: function (selector) {\r\n\t    this.chart.selectAll('g[id=slider-line-' + selector.replace(/'/g, \"\\\\'\") + ']')\r\n\t    \t.remove();\r\n\t    \r\n\t    //update slider overlay axis\r\n\t\tthis.transitionSliderOverlay();\r\n\t}\r\n\t\r\n\t,redrawSliderOverlay: function() {\t\r\n\t\t//console.log('redrawSliderOverlay')\r\n\t\tfor(var l = 0; l < this.overlayQueue.length; l++){\r\n\t\t\tthis.sliderOverlayOff(this.overlayQueue[l].selector);\r\n\t\t\tthis.sliderOverlayOn(this.overlayQueue[l]);\r\n\t\t}\r\n\t}\r\n\t\r\n\t,transitionSliderOverlay: function(objectToSelect) {\r\n\t\t//console.log('transitionSliderOverlay')\r\n\t\tobjectToSelect = objectToSelect || 0;\r\n\t\t\r\n\t\t//update slider overlay axis\r\n\t\tthis.updateYSliderScale(objectToSelect);\r\n\t\t\r\n\t\t//transition all other paths\r\n\t\tvar lenA = this.overlayQueue.length;\r\n\t\twhile(lenA-- > 0){\r\n\t\t\tthis.chart.selectAll('g#slider-line-' + this.overlayQueue[lenA].selector.replace(/'/g, \"\\\\'\"))\r\n\t\t\t\t.select('path')\r\n\t\t\t\t.transition().duration(300)\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t\t\t\t.attr(\"d\", this.buildSliderPath(this.overlayQueue[lenA].fullPath));\r\n\t\t}\r\n\t}\r\n\t\r\n\t,preparePath: function (string) {\r\n\t\t//console.log('fn: prepareData')\r\n\t\t\r\n\t\tvar linePosArray = [];\r\n\t\t\r\n\t\t//peek at the next frequency point and the preceding one to end the line on the edge of the graph\r\n\t\tvar foundA\r\n\t\t\t,foundB\r\n\t\t\t,foundC;\r\n\t\t\r\n\t\t//add two positions offscreen to the left for smooth transitions \r\n\t\tfor(var k = 0; k < 3 && this.shiftCount - k > 0; k++) {\r\n\t\t\tfoundA = 0;\r\n\t\t\tfor(var i = 0; i < this.allData[this.shiftCount - (1 + k)].allDataInternal.length; i++) {\r\n\t\t\t\tfor(var j = 0; j < this.allData[this.shiftCount - (1 + k)].allDataInternal[i].frequencyArray.length; j++){\r\n\t\t\t\t\tif(this.allData[this.shiftCount - (1 + k)].allDataInternal[i].frequencyArray[j].wordString === string){\r\n\t\t\t\t\t\tvar yVal3 = this.yScale(this.allData[this.shiftCount - (1 + k)].allDataInternal[i].frequencyArray[j].freq);\r\n\t\t\t\t\t\tlinePosArray.unshift({x: this.shiftCount - (1 + k), y: yVal3});\r\n\t\t\t\t\t\tfoundA = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(foundA === 0){\r\n\t\t\t\tvar yVal4 = this.yScale(this.minFreq);\r\n\t\t\t\tlinePosArray.unshift({x: this.shiftCount - (1 + k), y: yVal4});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//fill in the middle values\r\n\t\tfor(var k = this.shiftCount, len = this.numVisPoints + this.shiftCount; k < len; k++){\r\n\t\t\tfoundB = 0;\r\n\t\t\tfor(var i = 0, lenA = this.allData[k].allDataInternal.length; i < lenA; i++) {\r\n\t\t\t\tfor(var j = 0, lenB = this.allData[k].allDataInternal[i].frequencyArray.length; j < lenB; j++){\r\n\t\t\t\t\tif(this.allData[k].allDataInternal[i].frequencyArray[j].wordString === string){\r\n\t\t\t\t\t\tvar yVal1 = this.yScale(this.allData[k].allDataInternal[i].frequencyArray[j].freq);\r\n\t\t\t\t\t\tlinePosArray.push({x: k, y: yVal1});\r\n\t\t\t\t\t\tfoundB = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(foundB === 0){\r\n\t\t\t\tvar yVal2 = this.yScale(this.minFreq);\r\n\t\t\t\tlinePosArray.push({x: k, y: yVal2});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//add two positions offscreen to the right for smooth transitions \r\n\t\tfor(var k = 0; k < 3 && this.numVisPoints + this.shiftCount + k < this.numDataPoints; k++){\r\n\t\t\tfoundC = 0;\r\n\t\t\tfor(var i = 0; i < this.allData[this.numVisPoints + this.shiftCount + k].allDataInternal.length; i++) {\r\n\t\t\t\tfor(var j = 0; j < this.allData[this.numVisPoints + this.shiftCount + k].allDataInternal[i].frequencyArray.length; j++){\r\n\t\t\t\t\tif(this.allData[this.numVisPoints + this.shiftCount + k].allDataInternal[i].frequencyArray[j].wordString === string){\r\n\t\t\t\t\t\tvar yVal1 = this.yScale(this.allData[this.numVisPoints + this.shiftCount + k].allDataInternal[i].frequencyArray[j].freq);\r\n\t\t\t\t\t\tlinePosArray.push({x: this.numVisPoints + this.shiftCount + k, y: yVal1});\r\n\t\t\t\t\t\tfoundC = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(foundC === 0){\r\n\t\t\t\tvar yVal2 = this.yScale(this.minFreq);\r\n\t\t\t\tlinePosArray.push({x: this.numVisPoints + this.shiftCount + k, y: yVal2});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn linePosArray;\r\n\t}\r\n\t\r\n\t//draws the line graph overlay of the frequency info\r\n\t,chartOverlayOn: function(objectToSelect) {\r\n//\t\tconsole.log('fn: chartOverlayOn')\r\n\t\t\r\n\t\tvar me = this;\r\n\t\t\t\t\t\r\n\t\t//change selected word colour\r\n\t\tthis.chart.selectAll('g[class=section]')\r\n\t\t\t.selectAll('g[class=frequencies]')\r\n\t\t\t.selectAll('text[class=' + objectToSelect.selector.replace(/'/g,\"\\\\'\") + ']')\r\n\t\t\t.style('fill', objectToSelect.colour)\r\n\t\t\t.style('fill-opacity', 1);\r\n\t    \t\r\n\t    //if transitionCall === 'draw': draw the function for the first time\t\t\r\n\t\t//if not: shift displayData to a different subset of allData\r\n\t\t//then display the newly shifted data\r\n\t\t\r\n\t\tvar linePosArray = this.preparePath(objectToSelect.word);\r\n\t\t\r\n\t\tvar pos;\r\n\t\t\r\n\t\t//draw path\r\n\t\tvar line = d3.line()\r\n\t\t    .x(function(d) { \r\n\t\t    \tpos = d.x;\r\n\t\t    \treturn me.xScale(d.x + me.callOffset()); })\r\n\t\t    .y(function(d) { return d.y; })\r\n\t\t    .curve(d3.curveNatural);\r\n\t\t\r\n\t\tvar path = this.chart.select('.overlay')\r\n\t\t\t.append('g')\r\n\t\t\t.attr('class', 'frequency-line-' + objectToSelect.selector)\r\n\t\t\t.append('path')\r\n\t\t\t.attr(\"d\", line(linePosArray))\r\n\t\t\t.style('stroke', objectToSelect.colour)\r\n\t\t\t.style('stroke-width', 2)\r\n\t\t\t.style('fill', 'none');\r\n\t\t\t\t\t\r\n\t\tvar posDif = (this.xScale(pos) - this.xScale(pos + this.callOffset()));\r\n\t\t\r\n\t\tif(this.transitionCall === 'left' || this.transitionCall ==='right') {\r\n\t\t\tpath.transition()\r\n\t\t\t\t.duration(me.getDuration())\r\n\t\t\t\t.ease(d3.easeLinear)\r\n\t\t\t    .attr(\"transform\", \"translate(\" + posDif + \")\");\r\n\t\t}\r\n\t}\r\n\t\r\n\t,chartOverlayOff: function(selector){\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tthis.chart.selectAll('text.' + selector.replace(/'/g, \"\\\\'\"))\r\n\t    \t.style('fill', 'black')\r\n\t    \t.style('fill-opacity', function(d) { return me.opacityScale(d.freq); });\r\n\t    \r\n\t    this.chart.select('g.frequency-line-' + selector.replace(/'/g, \"\\\\'\"))\r\n\t    \t.remove();\r\n\t}\r\n\t\r\n\t//reselect all the sticky words\r\n\t//a screen movement has changed the words positions\r\n\t,redrawChartOverlay: function () {\r\n\t\t//console.log('fn: redrawChartOverlay')\r\n\t\tfor(var i = 0; i < this.overlayQueue.length; i++){\r\n\t\t\tthis.chartOverlayOff(this.overlayQueue[i].selector);\r\n\t\t\tthis.chartOverlayOn(this.overlayQueue[i]);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//\r\n\t//SCALE FUNCTIONS\r\n\t//\r\n\t\r\n\t//all these scales need to be updated if this.absMaxFreq or this.valFraction changes\r\n\t,manageAllYScales: function() {\r\n\t\tthis.manageFontScale();\r\n\t\tthis.manageOpacityScale();\r\n\t\tthis.manageYScale();\r\n\t\tthis.manageYSliderScale();\r\n\t}\r\n\t\r\n\t,manageFontScale: function() {\r\n\t\t//console.log('fn: fontScale')\r\n\t\t this.fontScale.domain([this.minFreq, this.absMaxFreq * this.valFraction])\r\n\t    \t.range([10, this.maxFont]);\r\n\t}\r\n\t\r\n\t/*,maxFontScale : function (value) {\r\n\t\tvar scale = d3.scaleLinear()\r\n\t\t\t.domain([600,2000])\r\n\t\t\t.range([15,60]);\r\n\t\treturn scale(value);\r\n\t}*/\r\n\t\r\n\t,manageOpacityScale: function() {\r\n\t\tthis.opacityScale.domain([0, this.absMaxFreq * this.valFraction])\r\n    \t\t.range([0.4, 0.8]);\r\n\t}\r\n\t\r\n\t,manageYScale: function () {\r\n\t\tif(this.parent.getApiParam('yAxisScale') == 'linear') this.yScale = d3.scaleLinear();\r\n\t\tif(this.parent.getApiParam('yAxisScale') == 'log') this.yScale = d3.scaleLog();\r\n\t\t\r\n\t\tthis.yScale.domain([this.minFreq, this.absMaxFreq * this.valFraction * 1.25])\r\n\t\t\t\t.rangeRound([this.container.getHeight() - this.bPadding, (this.tPadding) + this.getSliderHeight()]);\r\n\t}\r\n\t\r\n\t,manageYSliderScale: function() {\r\n\t\tvar top = this.tPadding\r\n\t\t\t,bottom = this.tPadding + this.getSliderHeight();\r\n\t\t\r\n\t\tif(this.parent.getApiParam('yAxisScale') == 'linear') this.ySliderScale = d3.scaleLinear();\r\n\t\tif(this.parent.getApiParam('yAxisScale') == 'log') this.ySliderScale = d3.scaleLog();\r\n\t\t\r\n\t\tthis.ySliderScale.domain([this.minFreq, this.absMaxFreq])\r\n\t\t\t\t.rangeRound([bottom, top]);\r\n\t}\r\n\t\r\n\t,updateYSliderScale: function(updateWithObject) {\r\n\t\tupdateWithObject = updateWithObject || 0;\r\n\t\tvar selectedMin = this.minFreq, //setting this to this.absMinFreq effectively deactivates it, to make it work use this.absMaxFreq\r\n\t\t\tselectedMax = 0;\r\n\t    \t\r\n\t    //go through overlayQueue check for min / max\r\n\t\tvar len = this.overlayQueue.length;\r\n\t\twhile(len-- > 0){\r\n\t\t\tif(this.overlayQueue[len].pathMin < selectedMin) selectedMin = this.overlayQueue[len].pathMin;\r\n\t\t\tif(this.overlayQueue[len].pathMax > selectedMax) selectedMax = this.overlayQueue[len].pathMax;\r\n\t\t}\r\n\t\tif(updateWithObject != 0 && updateWithObject.pathMin < selectedMin) selectedMin = updateWithObject.pathMin;\r\n\t\tif(updateWithObject != 0 && updateWithObject.pathMax > selectedMax) selectedMax = updateWithObject.pathMax;\r\n\t\t\r\n\t\tthis.ySliderScale.domain([selectedMin, selectedMax]);\r\n\t}\r\n\t\r\n\t,manageAllXScales: function() {\r\n\t\tthis.manageXScale();\r\n\t\tthis.manageXSliderScale();\r\n\t}\r\n\t\r\n\t,manageXScale: function() {\r\n\t\tthis.xScale.domain([this.shiftCount - 0.5, this.numVisPoints + this.shiftCount - 0.5])\r\n\t    \t.range([this.lPadding, this.container.getWidth() - this.rPadding]);\r\n\t}\r\n\t\r\n\t,manageXSliderScale: function() {\r\n\t\tthis.xSliderScale.domain([0, this.numDataPoints - 1])\r\n\t    \t.range([this.lPadding, this.container.getWidth() - this.rPadding]);\r\n\t}\r\n\r\n\t,getSliderHeight: function() {\r\n\t\treturn this.isSliderVisible ? this.sliderHeight+this.sliderBPadding : 0;\r\n\t}\r\n\t\r\n\t,setSliderHeight: function() {\r\n\t\tthis.sliderHeight = Math.max(10, this.container.getHeight()*this.sliderHeightRatio);\r\n\t}\r\n\t\r\n\t,hideSlider: function() {\r\n\t\tthis.isSliderVisible = false;\r\n\t\tthis.removeSlider(true);\r\n\t\tthis.doResize();\r\n\t}\r\n\t\r\n\t,showSlider: function() {\r\n\t\tthis.isSliderVisible = true;\r\n\t\tthis.doResize();\r\n\t}\r\n\t\r\n\t\r\n\t//\r\n\t//MISC. FUNCTIONS\r\n\t//\r\n\r\n\t\r\n\t,setTitleLength: function () {\r\n\t\t//console.log('fn:setTitleLength')\r\n\t\tvar me = this, \r\n\t\t\titem;\r\n\t\tthis.titlesArray = [];\r\n\t\t\r\n\t\tvar scale = d3.scaleLinear()\r\n\t\t\t.domain([350,1250])\r\n\t\t\t.range([10,40]);\r\n\t\t\r\n\t\tvar corpus = this.parent.getCorpus();\r\n\t\tfor (var i = 0, len = corpus.getDocumentsCount(); i < len; i++) {\r\n\t\t\tvar item = corpus.getDocument(i);\r\n\t\t\tvar shortTitle = item.getShortTitle();\t\t\t\r\n\t\t\tif(shortTitle.length <= scale(me.container.getWidth())) {\r\n\t\t\t\tme.titlesArray.push(shortTitle); \r\n\t\t\t} else {\r\n\t\t\t\tvar shorterTitle = shortTitle.substring(0,scale(me.container.getWidth()) - 3);\r\n\t\t\t\tme.titlesArray.push(shorterTitle + '...'); \r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t,callOffset: function () {\r\n//\t\tconsole.log('fn: callOffset')\r\n\t\tvar callOffset;\r\n\t\tif(this.transitionCall === 'draw' || this.transitionCall === 'redraw') { \r\n\t\t\tcallOffset = 0; \r\n\t\t}\r\n\t\tif(this.transitionCall === 'left') { \r\n\t\t\tcallOffset = -1;\r\n\t\t}\r\n\t\tif(this.transitionCall === 'right') { \r\n\t\t\tcallOffset = 1;\r\n\t\t}\r\n\t\treturn callOffset;\r\n\t}\r\n\t\r\n\t,removeFilteredCharacters: function (string) {\r\n\t\t//console.log('fn: removeFilteredCharacters')\r\n\t\treturn string || '';\r\n\t\t\r\n\t\tif (string !== undefined) {\r\n\t\t\treturn string.replace(\"'\",\"apostrophe-\")\r\n\t\t\t\t.replace(\"#\",\"pound-\")\r\n\t\t\t\t.replace(\"&\",\"ampersand-\")\r\n\t\t\t\t.replace(\"@\",\"atsign-\")\r\n\t\t\t\t.replace(\"!\",\"exclamation-\")\r\n\t\t\t\t.replace(\"0\",\"num-o\")\r\n\t\t\t\t.replace(\"1\",\"num-a\")\r\n\t\t\t\t.replace(\"2\",\"num-b\")\r\n\t\t\t\t.replace(\"3\",\"num-c\")\r\n\t\t\t\t.replace(\"4\",\"num-d\")\r\n\t\t\t\t.replace(\"5\",\"num-e\")\t\t\r\n\t\t\t\t.replace(\"6\",\"num-f\")\r\n\t\t\t\t.replace(\"7\",\"num-g\")\r\n\t\t\t\t.replace(\"8\",\"num-h\")\r\n\t\t\t\t.replace(\"9\",\"num-i\")\r\n\t\t\t\t.replace(/[^a-zA-Z]+/g,'-'); //then anything else...\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetDuration: function() {\r\n\t\treturn this.numDataPoints*(100-this.parent.getSpeed())\r\n\t}\r\n\t\r\n};","Ext.define('Voyant.util.Assignable', {\n    transferable: ['assign'],\n    /**\n     * This is a convenience method for assigning a variable name to this promised object once it's ready.\n     * \n     * This method is chainable, so you can call other promise-aware corpus functions.\n     * \n     * \t\tnew Corpus(\"Hello World!\").assign(\"helloworld\").show();\n     * \n     * This is somewhat equivalent to the nastier:\n     * \n     *  \tvar helloworld;\n     *  \tnew Corpus(\"Hello World!\").then(function(corpus) {\n     *  \t\thelloworld = corpus;\n     *  \t\thelloworld.show();\n     *  \t})\n     *  \n     * Note that when using `assign` in spyral, any references to the name variable should occur in separate, subsequent code blocks. \n     * \n     * \t\tnew Corpus(\"Hello Voyant!\").assign(\"corpus\");\n     * \n     * Then use the named variable in a subsequent code block:\n     * \n     * \t  corpus.show();\n     * \n     *  @param {String} name The variable name to assign to this corpus.\n     */\n    assign: function(name) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tif (Ext.isString(name)) {\n\t\t\t\twindow[name] = this;\n\t\t\t} else {\n\t\t\t\tVoyant.application.showError(\"The 'assign' method expects a string argument. (\"+typeof name+\") \"+name)\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t}\n})","Ext.define('Voyant.util.Api', {\n\tconstructor: function(config) {\n\t\tvar apis = [];\n\t\tif (!this.isApplication) {\n\t\t\tvar app = this.getApplication ? this.getApplication() : Voyant.application;\n\t\t\t\n\t\t\t// try to load from first-level mixins\n\t\t\tif (this.mixins) {\n\t\t\t\tfor (key in this.mixins) {\n\t\t\t\t\tvar clz = Ext.ClassManager.get(key);\n\t\t\t\t\tif (clz && clz.api) {\n\t\t\t\t\t\tapis.splice(0, 0, clz.api)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.addParentApi(apis, Ext.ClassManager.getClass(app)); // gather class params\n\t\t\tif (app.getApiParams) {\n\t\t\t\tapis.push(app.getApiParams()); // now add instance params, last\n\t\t\t}\n\t\t}\n\n\t\tthis.addParentApi(apis, Ext.ClassManager.getClass(this)); // add params from this class and parents\n\n\t\tthis.api = {};\n\t\tapis.forEach(function(a) {\n\t\t\tfor (key in a) {\n\t\t\t\tthis.api[key] = {initial: a[key], value: a[key]} // overwrite previous entries\n\t\t\t}\n\t\t}, this)\n\t\t\n    \tvar queryParams = Ext.Object.fromQueryString(document.location.search);\n\t\tvar xtype = this.getXType ? this.getXType() : undefined;\n    \tfor (var key in queryParams) {\n    \t\tif (this.api[key]) {\n    \t\t\tthis.setApiParam(key, queryParams[key]);\n    \t\t} else if (xtype && key.indexOf(\".\")>0) {\n    \t\t\tvar k = key.substring(key.indexOf(\".\")+1);\n    \t\t\tif (k && k in this.api) {\n    \t\t\t\tthis.setApiParam(k, queryParams[key])\n    \t\t\t}\n    \t\t}\n    \t}\n    \t\n\t\tif (config && Ext.isObject(config.api)) {\n\t    \tfor (var key in config.api) {\n\t    \t\tif (this.api[key]) {\n\t    \t\t\tthis.setApiParam(key, config.api[key]);\n\t    \t\t}\n\t    \t}\n\t    \tdelete config.api; // remove so it doesn't overwrite default api\n\t\t}\n\t\t\n    \t// handle \"type\"  parameter specially for backwards compatibility\n    \tif (queryParams[\"type\"] && (\"query\" in this.api) && !this.getApiParam('query')) {\n    \t\tthis.setApiParam(\"query\", queryParams['type']);\n    \t}\n    \t\n\t},\n\taddParentApi: function(apis, clz) {\n\t\tif (clz.api) {apis.splice(0,0, clz.api)} // add to front\n\t\tif (clz.superclass) {this.addParentApi(apis, clz.superclass.self)}\n\t},\n\tgetApiParam: function(key, defaultValue) {\n\t\treturn this.api[key]!==undefined ? this.api[key].value : defaultValue\n\t},\n\tgetApiParams: function(keys, keepEmpty) {\n\t\tkeys = keys || Object.keys(this.api);\n\t\tvar api = {};\n\t\tif (Ext.isString(keys)) {keys=[keys]}\n\t\tkeys.forEach(function(key) {\n\t\t\tvar val = this.getApiParam(key);\n\t\t\tif (keepEmpty || !Ext.isEmpty(val)) {api[key]=val;}\n\n\t\t}, this);\n\t\treturn api;\n\t},\n\t\n\tgetModifiedApiParams: function() {\n\t\tvar api = {};\n\t\tfor (var key in this.api) {\n\t\t\tif (this.api[key].initial!=this.api[key].value) {\n\t\t\t\tapi[key]=this.api[key].value\n\t\t\t}\n\t\t}\n\t\treturn api\n\t},\n\t\n\tsetApiParams: function(config) {\n\t\tfor (var key in config) {this.setApiParam(key, config[key])}\n\t},\n\t\n\tsetApiParam: function(key, value) {\n\t\tif (this.api && this.api[key]) {this.api[key].value=value;}\n\t}\n});","Ext.define('Voyant.util.Localization', {\n\tstatics: {\n\t\tDEFAULT_LANGUAGE: 'en',\n\t\tLANGUAGE: 'en',\n\t\ti18n: {\n\t\t}\n\t\t\n\t},\n\t\n    languageStore: Ext.create('Ext.data.ArrayStore', {\n        fields: ['code', 'language'],\n        data : [\n                ['en', 'English']\n        ]\n    }),\n\t\n\tgetLanguage: function(code) {\n\t\tvar record = this.languageStore.findRecord(code.length==2 ? 'code' : 'language', code);\n\t\tif (record) {return record.get(code.length==2 ? 'language' : 'code');}\n\t},\n\t\n\tlocalize: function(key, config) {\n\t\treturn this._localizeObject(this, key, config);\n\t},\n\t\n\t_localizeObject: function(object, key, config) {\n\n\t\tvar val = this._localizeClass(Ext.ClassManager.getClass(object), key, config);\n\t\tif (val) {return val;}\n\t\tif (object.mixins) { // look at mixins first\n\t\t\tfor (mixin in object.mixins) {\n\t\t\t\tvar val = this._localizeClass(Ext.ClassManager.getClass(object.mixins[mixin]), key, config);\n\t\t\t\tif (val) {return val;}\n\t\t\t}\n\t\t}\n\t\tif (object.superclass) { // then superclasses\n\t\t\tval =  this._localizeObject(object.superclass, key, config);\n\t\t\tif (val) {return val;}\n\t\t}\n\t\treturn config && config['default']!=undefined ? config['default'] : '['+key+']';\n\t},\n\t\n\t_localizeClass: function(clazz, key, config) {\n\t\tif (clazz && clazz.i18n && clazz.i18n[key]) {\n\t\t\tvar use = false;\n\t\t\tif (clazz.i18n[key]) {\n\t\t\t\tuse = clazz.i18n[key];\n\t\t\t}\n\t\t\t/*\n\t\t\tif (config && config.lang && clazz.i18n[key][config.lang]) {\n\t\t\t\tuse = clazz.i18n[key][config.lang];\n\t\t\t}\n\t\t\telse if (clazz.i18n[key][Voyant.util.Localization.LANGUAGE]) {\n\t\t\t\tuse = clazz.i18n[key][Voyant.util.Localization.LANGUAGE];\n\t\t\t}\n\t\t\telse if (clazz.i18n[key][Voyant.util.Localization.DEFAULT_LANGUAGE]) {\n\t\t\t\tuse = clazz.i18n[key][Voyant.util.Localization.DEFAULT_LANGUAGE];\n\t\t\t}\n\t\t\t*/\n\t\t\tif (use) {\n\t\t\t\tif (use.isTemplate) { // template\n\t\t\t\t\treturn use.apply(config);\n\t\t\t\t}\n\t\t\t\treturn use; // string\n\t\t\t}\n\t\t\treturn config && config['default']!=undefined ? config['default'] : '['+key+']'; // no language key found, so just return the key\n\t\t}\n\t\treturn false\n\t},\n\t\n\tgetLanguageToolMenu: function() {\n\t\tvar me = this;\n\t\treturn {\n\t\t\ttype: 'language',\n\t\t\ttooltip: this.localize(\"languageTitle\"),\n\t\t\txtype: 'toolmenu',\n\t        glyph: 'xf1ab@FontAwesome',\n\t\t\thandler: me.showLanguageOptions,\n\t\t\tscope: me\n\t\t} \n\t},\n\n\t\n\tshowLanguageOptions: function() {\n\t\tvar me = this;\n\t\tvar langs = [\"ar\",\"bs\",\"cz\",\"en\",\"es\",\"fr\",\"he\",\"hr\",\"it\",\"ja\",\"pt\",\"sr\"].map(function(lang) {\n\t\t\treturn {text: this.localize(lang), value: lang}\n\t\t}, this);\n\t\tlangs.sort(function(a,b) {\n\t\t\treturn a.text.localeCompare(b.text);\n\t\t});\n\t\tlangs.splice(0,0,{text: this.localize('autoRecommended'), value: ''})\n\t\t\n\t\tnew Ext.window.Window({\n\t\t\ttitle: this.localize(\"languageTitle\"),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'combo',\n\t\t\t\t\tname: 'lang',\n\t\t\t\t\tvalue: this.getApiParam(\"lang\") || \"\",\n\t    \t        queryMode: 'local',\n\t    \t        editable: false,\n\t    \t        fieldLabel: this.localize('chooseLanguage'),\n\t    \t        width: 450,\n\t    \t        labelAlign: 'right',\n\t    \t        labelWidth: 150,\n\t    \t        displayField: 'text',\n\t    \t        valueField: 'value',\n\t\t\t\t\tstore: {\n\t\t\t\t\t\tfields: ['text', 'value'],\n\t\t\t\t\t\tdata: langs\n\t\t\t\t\t}\n\t\t\t\t}/*,{\n\t\t\t\t\txtype: 'combo',\n\t\t\t\t\tname: 'rtl',\n\t\t\t\t\tvalue: '',\n\t    \t        queryMode: 'local',\n\t    \t        editable: false,\n\t    \t        fieldLabel: this.localize('rtlLabel'),\n\t    \t        labelAlign: 'right',\n\t    \t        displayField: 'text',\n\t    \t        valueField: 'value',\n\t\t\t\t\tstore: {\n\t\t\t\t\t\tfields: ['text', 'value'],\n\t\t\t\t\t\tdata: [{\n\t\t\t\t\t\t\ttext: this.localize('auto'),\n\t\t\t\t\t\t\tvalue: ''\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: this.localize('yes'),\n\t\t\t\t\t\t\tvalue: 'true'\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: this.localize('no'),\n\t\t\t\t\t\t\tvalue: 'false'\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t}*/],\n\t\t\t\tbuttons: [{\n\t            \ttext: this.localize(\"cancelTitle\"),\n\t\t            ui: 'default-toolbar',\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t},{\n\t            \ttext: this.localize(\"confirmTitle\"),\n\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t            \tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar form = btn.up('form');\n\t        \t\t\tif (form.isDirty()) {\n\t        \t\t\t\tvar app = me.getApplication();\n\t        \t\t\t\tvar params = app.getModifiedApiParams();\n\t        \t\t\t\tif (app.getCorpus()) {\n\t        \t\t\t\t\tparams.corpus = app.getCorpus().getAliasOrId();\n\t        \t\t\t\t} else {\n\t        \t\t\t\t\tdelete params.panels; // we probably don't need this\n\t        \t\t\t\t}\n\t        \t\t\t\tdelete params.lang;\n//\t        \t\t\t\tdelete params.rtl;\n\t        \t\t\t\tvar values = form.getValues();\n\t        \t\t\t\tif (values.lang) {params.lang = values.lang;}\n//\t        \t\t\t\tif (values.rtl) {params.rtl = values.lang;}\n\t        \t\t\t\tlocation.assign(\"./?\"+Ext.Object.toQueryString(params))\n\t        \t\t\t}\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: me\n\t            }]\n\t\t\t},\n\t\t\tbodyPadding: 5\n\t\t}).show()\n\t}\n\t\n});\n","/**\n * A utility for storing palettes and associations between terms and colors.\n */\nExt.define('Voyant.util.Colors', {\n\n\tconfig: {\n\t\t/**\n\t\t * Palettes for use with terms and documents.\n\t\t * @private\n\t\t */\n\t\tpalettes: undefined,\n\t\t/**\n\t\t * For tracking associations between a term and a color (in rgb format), to ensure consistent coloring across tools.\n\t\t * @private\n\t\t */\n\t\tcolorTermAssociations: undefined\n\t},\n\n\tconstructor: function(config) {\n\t\tthis.setPalettes({\n\t\t\t'default': [[0, 0, 255], [51, 197, 51], [255, 0, 255], [121, 51, 255], [28, 255, 255], [255, 174, 0], [30, 177, 255], [182, 242, 58], [255, 0, 164], [51, 102, 153], [34, 111, 52], [155, 20, 104], [109, 43, 157], [128, 130, 33], [111, 76, 10], [119, 115, 165], [61, 177, 169], [202, 135, 115], [194, 169, 204], [181, 212, 228], [182, 197, 174], [255, 197, 197], [228, 200, 124], [197, 179, 159]]\n\t\t});\n\t\tthis.resetColorTermAssociations();\n\n\t\t// palettes\n\t\tif (d3 !== undefined) {\n\t\t\tvar cat10 = d3.scaleOrdinal(d3.schemeCategory10).range().map(function(val) { return this.hexToRgb(val); }, this);\n\t\t\tvar cat20a = d3.scaleOrdinal(d3.schemeCategory20).range().map(function(val) { return this.hexToRgb(val); }, this);\n\t\t\tvar cat20b = d3.scaleOrdinal(d3.schemeCategory20b).range().map(function(val) { return this.hexToRgb(val); }, this);\n\t\t\tvar cat20c = d3.scaleOrdinal(d3.schemeCategory20c).range().map(function(val) { return this.hexToRgb(val); }, this);\n\t\t\tthis.addColorPalette('d3_cat10', cat10);\n\t\t\tthis.addColorPalette('d3_cat20a', cat20a);\n\t\t\tthis.addColorPalette('d3_cat20b', cat20b);\n\t\t\tthis.addColorPalette('d3_cat20c', cat20c);\n\t\t}\n        \n        var extjs = Ext.create('Ext.chart.theme.Base').getColors().map(function(val) { return this.hexToRgb(val); }, this);\n        this.addColorPalette('extjs', extjs);\n\t},\n\n\tresetColorTermAssociations: function() {\n\t\tthis.setColorTermAssociations(new Ext.util.MixedCollection());\n\t},\n\n\trgbToHex: function(a) {\n\t\treturn \"#\" + ((1 << 24) + (a[0] << 16) + (a[1] << 8) + a[2]).toString(16).slice(1);\n\t},\n\t\n\thexToRgb: function(hex) {\n\t    // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n\t    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n\t    hex = hex.replace(shorthandRegex, function(m, r, g, b) {\n\t        return r + r + g + g + b + b;\n\t    });\n\n\t    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t    return result ? [\n\t        parseInt(result[1], 16),\n\t        parseInt(result[2], 16),\n\t        parseInt(result[3], 16)\n\t    ] : null;\n\t},\n\n\t/**\n\t * Adds a new palette to the list.\n\t * @param key {String} The palette name.\n\t * @param values {Array} The array of colors. Format: [[r,g,b],[r,g,b],....]\n\t */\n\taddColorPalette: function(key, values) {\n\t\tthis.getPalettes()[key] = values;\n\t},\n\n\t/**\n\t * Gets the whole color palette.\n\t * @param {String} [key] The key of the palette to return.\n\t * @param {Boolean} [returnHex] True to return a hexadecimal representation of each color (optional, defaults to rgb values).\n\t * @return {Array} The color palette.\n\t * @private\n\t */\n\tgetColorPalette: function(key, returnHex) {\n\t\tvar paletteKey = key || 'default';\n\t\tvar palette = this.getPalettes()[paletteKey];\n\t\tif (palette === undefined) {\n\t\t\tpalette = [];\n\t\t}\n\t\tif (returnHex) {\n\t\t\tvar colors = [];\n\t\t\tfor (var i = 0; i < palette.length; i++) {\n\t\t\t\tcolors.push(this.rgbToHex(palette[i]));\n\t\t\t}\n\t\t\treturn colors;\n\t\t} else {\n\t\t\treturn palette;\n\t\t}\n\t},\n\n\t/**\n\t * Gets a particular color from the palette.\n\t * @param {String} key The palette key.\n\t * @param {Integer} index The index of the color to get.\n\t * @param {Boolean} [returnHex] True to return a hexadecimal representation of the color (optional, defaults to rgb values).\n\t * @return {Mixed} The requested color, either a hex string or array of rgb values.\n\t * @private\n\t */\n\tgetColor: function(key, index, returnHex) {\n\t\tvar paletteKey = key || 'default';\n\t\tvar palette = this.getPalettes()[paletteKey];\n\t\tif (index >= palette.length) {\n\t\t\tindex = index % palette.length;\n\t\t}\n\t\tif (returnHex) {\n\t\t\treturn this.rgbToHex(palette[index]);\n\t\t} else {\n\t\t\treturn palette[index];\n\t\t}\n\t},\n\n\t/**\n\t * Gets the color associated with the term.  Creates a new association if none exists.\n\t * @param {String} key The palette key.\n\t * @param {String} term The term to get the color for.\n\t * @param {Boolean} [returnHex] True to return a hexadecimal representation of the color (optional, defaults to rgb values).\n\t * @return {Mixed} The requested color, either a hex string or array of rgb values.\n\t * @private\n\t */\n\tgetColorForTerm: function(key, term, returnHex) {\n\t\tvar paletteKey = key || 'default';\n\t\tvar palette = this.getPalettes()[paletteKey];\n\n\t\tif (term.indexOf(':') != -1) {\n\t\t\tterm = term.split(':')[1];\n\t\t}\n\t\tvar color = this.getColorTermAssociations().get(term);\n\t\tif (color == null) {\n\t\t\tvar index = this.getColorTermAssociations().getCount() % palette.length;\n\t\t\tcolor = palette[index];\n\t\t\tthis.getColorTermAssociations().add(term, color);\n\t\t}\n\t\tif (returnHex) {\n\t\t\tcolor = this.rgbToHex(color);\n\t\t}\n\t\treturn color;\n\t},\n\n\t/**\n\t * Set the color assocation for a term.\n\t * @param {String} term The term\n\t * @param {Array} color An array of RGB values\n\t */\n\tsetColorForTerm: function(term, color) {\n\t\tif (Array.isArray(color) === false) {\n\t\t\tcolor = this.hexToRgb(color);\n\t\t}\n\t\tthis.getColorTermAssociations().replace(term, color);\n\t}\n})\n","Ext.define('Voyant.util.Deferrable', {\n\tdeferredStack : [],\n\n\treleaseAllDeferred : function() {\n\t\tthis.deferredStack = [];\n\t},\n\n\tgetDeferredCount : function() {\n\t\treturn this.deferredStack.length;\n\t},\n\t\n\tgetDeferred: function(transferable) {\n\n//\t\tvar deferred = jQuery.Deferred();\n\t\tvar deferred = new Ext.Deferred();\n\t\t\n\t\tvar pomise = deferred\n\t\t// transfer methods to the promise\n//\t\tvar promise = this.getPromiseFromDeferred(deferred);\n\n\t\tif (transferable && transferable.transfer) {\n\t\t\ttransferable.transfer(transferable, deferred.promise)\n\t\t}\n\n\t\tif (!deferred.promise.show && window.show) {deferred.promise.show=show}\n\t\t\n\t\t// make sure that this object can chain an assignment\n\t\tif (!deferred.promise.assign) {\n\t\t\tExt.apply(deferred.promise, {assign: new Voyant.util.Assignable().assign});\n\t\t}\n\n\t\tthis.deferredStack.push(deferred);\n\t\t\n\t\tvar me = this;\n\t\tdeferred.promise.always(function() {\n\t\t\tme.deferredStack.pop();\n\t\t});\n\t\treturn deferred;\n\t},\n\t\n\tgetPromiseFromDeferred: function(dfd) {\n\t\treturn typeof dfd.promise === \"object\" ? dfd.promise : dfd.promise();\n\t},\n\t\n\tgetDeferredNestedPromise: function(promise, args, transferable) {\n\t\tvar callee = arguments.callee.caller; // TODO: is callee.caller in terms of nested functions?\n\t\tvar dfd = Voyant.application.getDeferred(transferable);\n\t\tpromise.then(function(promised) {\n\t\t\tdfd.resolve(callee.apply(promised, args))\n\t\t})/*.fail(function() {\n\t\t\tdfd.reject.apply(this, arguments)\n\t\t})*/;\n\t\treturn dfd.promise;\n\t}\n});\n","Ext.define(\"Voyant.util.DetailedError\", {\n\textend: \"Ext.Error\",\n\tmixins: ['Voyant.util.Localization'],\n\tconfig: {\n\t\tmsg: undefined,\n\t\terror: undefined,\n\t\tdetails: undefined\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t\terror: \"Error\"\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tthis.setMsg(config.msg);\n\t\tthis.setError(config.error);\n\t\tthis.setDetails(config.details);\n\t\tthis.callParent(arguments);\n//\t\tdebugger\n//\t\tthis.show();\n\t},\n\t\n\tshow: function(config) {\n\t\tif (window.showError) {showError.call(this);}\n\t\telse {this.showMsg(config)}\n\t},\n\t\n\tshowMsg: function(config) {\n\t\tconfig = config || {};\n\t\tExt.applyIf(config, {\n\t\t\tmessage: this.getMsg()+\"<p class='error'>\\n\"+this.getError()+\"\u2026 \"+\n\t\t\t\t\"<a href='#' onclick=\\\"window.open('').document.write(unescape('<pre>\"+escape(this.getDetails())+\"</pre>')); return false;\\\">more</a></p>\",\n\t\t\ttitle: this.localize(\"error\"),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.MessageBox.ERROR,\n\t\t    autoScroll: true\n\t\t});\n\t\tExt.Msg.show(config);\n\t}\n})\n","Ext.define(\"Voyant.util.ResponseError\", {\n\textend: \"Voyant.util.DetailedError\",\n\tconfig: {\n\t\tresponse: undefined\n\t},\n\tconstructor: function(config) {\n\t\tthis.setResponse(config.response);\n\t\tExt.applyIf(config, {\n\t\t\tmsg: config.response.statusText, // hopefully already set by creator\n\t\t\terror: (\"responseText\" in config.response) ? config.response.responseText.split(/(\\r\\n|\\r|\\n)/).shift() : \"\", // show first line of response\n\t\t\tdetails: (\"responseText\" in config.response) ? config.response.responseText : \"\"\n\t\t})\n\t\tthis.callParent(arguments);\n\t}\n\t\n})\n","Ext.define('Voyant.util.SparkLine', {\r\n\t/**\r\n\t * Gets a Google spark line.\r\n\t * \r\n\t * @param {Array} values An array of numerical values.\r\n\t * @param {Integer} stretch The width to stretch the spark line towards (currently unused).\r\n\t * @return {String} The image(s) of the spark line.\r\n\t * @private\r\n\t */\r\n\tgetSparkLine : function(values, stretch) {\r\n\t\tif (values.length < 2) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tvar min = Number.MAX_VALUE;\r\n\t\tvar max = Number.MIN_VALUE;\r\n\t\tvar hasDecimal = false;\r\n\t\tfor ( var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i] < min) {\r\n\t\t\t\tmin = values[i];\r\n\t\t\t}\r\n\t\t\tif (values[i] > max) {\r\n\t\t\t\tmax = values[i];\r\n\t\t\t}\r\n\t\t\tif (!hasDecimal\r\n\t\t\t\t\t&& values[i].toString().indexOf('.') > -1) {\r\n\t\t\t\thasDecimal = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar dif = (max - min).toString();\r\n\t\tvar multiplier = 1;\r\n\t\tvar divider = 1;\r\n\r\n\t\tvar newvalues = [];\r\n\t\tif (hasDecimal) {\r\n\t\t\tvar multiplier = 100;\r\n\t\t\tvar ind = dif.indexOf(\".\") + 1;\r\n\t\t\tfor ( var i = ind; i < dif.length; i++) {\r\n\t\t\t\tif (dif.charAt(i) == '0') {\r\n\t\t\t\t\tmultiplier *= 10;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor ( var i = 0; i < values.length; i++) {\r\n\t\t\t\tnewvalues[i] = parseInt(values[i] * multiplier);\r\n\t\t\t}\r\n\t\t\tmax = parseInt(max * multiplier);\r\n\t\t\tmin = parseInt(min * multiplier);\r\n\r\n\t\t} else {\r\n\t\t\tvar divider = 1;\r\n\t\t\tfor ( var i = dif.length - 1; i > -1; i--) {\r\n\t\t\t\tif (dif.charAt(i) == '0') {\r\n\t\t\t\t\tdivider *= 10;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (divider != 1) {\r\n\t\t\t\tfor ( var i = 0; i < values.length; i++) {\r\n\t\t\t\t\tnewvalues[i] = values[i] / divider;\r\n\t\t\t\t}\r\n\t\t\t\tmax /= divider;\r\n\t\t\t\tmin /= divider;\r\n\t\t\t} else {\r\n\t\t\t\tnewvalues = values;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar valLen = (max.toString().length > min.toString().length ? max\r\n\t\t\t\t.toString().length\r\n\t\t\t\t: min.toString().length) + 1;\r\n\t\tvar valuesPerImage = Math.floor(1800 / valLen);\r\n\t\tvar baseUrl = 'http://chart.apis.google.com/chart?cht=ls&amp;chco=0077CC&amp;chls=1,0,0&amp;chds='+ min + ',' + max;\r\n\t\tvar images = Math.ceil(values.length / valuesPerImage);\r\n\t\tvar counter = 0;\r\n\t\tvar response = '';\r\n\t\tvar wid;\r\n\t\tif (values.length < 5) {\r\n\t\t\twid = 5;\r\n\t\t} else if (values.length < 10) {\r\n\t\t\twid = 4;\r\n\t\t} else if (values.length < 20) {\r\n\t\t\twid = 3;\r\n\t\t} else if (values.length < 50) {\r\n\t\t\twid = 2;\r\n\t\t} else {\r\n\t\t\twid = 1;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * if (stretch) { wid =\r\n\t\t * Math.ceil(stretch/values.length); if (wid>5) {wid=5;} }\r\n\t\t */\r\n\r\n\t\tfor ( var i = 0; i < images; i++) {\r\n\t\t\tvar vals = newvalues.slice(counter,\r\n\t\t\t\t\tcounter += valuesPerImage);\r\n\t\t\tresponse += \"<img style='margin: 0; padding: 0;' border='0' src='\"\r\n\t\t\t\t\t+ baseUrl\r\n\t\t\t\t\t+ '&amp;chs='\r\n\t\t\t\t\t+ (wid * vals.length)\r\n\t\t\t\t\t+ 'x15&amp;chd=t:'\r\n\t\t\t\t\t+ vals.join(',') + \"' alt='' class='chart-\";\r\n\t\t\tif (images == 1) {\r\n\t\t\t\tresponse += 'full';\r\n\t\t\t} else {\r\n\t\t\t\tif (i > 0 && i + 1 < images) {\r\n\t\t\t\t\tresponse + 'middle';\r\n\t\t\t\t} else if (i == 0) {\r\n\t\t\t\t\tresponse += 'left';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresponse += 'right';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresponse += \"' />\";\r\n\t\t}\r\n\t\treturn response;\r\n\t}\r\n});","Ext.define('Voyant.util.Toolable', {\n\trequires: ['Voyant.util.Localization','Voyant.util.Api'],\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tsuppressTools: false\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tif (this.getApiParam && this.getApiParam(\"suppressTools\")==\"true\") {return;}\n\t\tif (\"header\" in config && config.header===false) {return;}\n\t\tvar me = this;\n\t\tvar moreTools = undefined;\n\t\tvar parent = this.up('component');\n\t\tif (config.moreTools) {\n\t\t\tmoreTools = [];\n\t\t\tconfig.moreTools.forEach(function(xtype) {\n\t\t\t\t if (xtype && xtype!=this.xtype) {\n\t\t\t\t\tmoreTools.push(this.getMenuItemFromXtype(xtype));\n\t\t\t\t }\n\n\t\t\t}, this)\n\t\t}\n\t\telse if (parent && parent.getInitialConfig('moreTools')) {\n\t\t\tmoreTools = [];\n\t\t\t parent.getInitialConfig('moreTools').forEach(function(xtype) {\n\t\t\t\t if (xtype && xtype!=this.xtype) {\n\t\t\t\t\tmoreTools.push(this.getMenuItemFromXtype(xtype));\n\t\t\t\t }\n\n\t\t\t}, this)\n\t\t}\n\t\tif (moreTools && this.getApplication().getMoreTools) {\n\t\t\tmoreTools.push({xtype: 'menuseparator'});\n\t\t}\n\t\tif (this.getApplication().getMoreTools) {\n\t\t\tmoreTools = moreTools || [];\n\t\t\tvar app = this.getApplication();\n\t\t\tvar tools = app.getMoreTools();\n\t\t\ttools.forEach(function(category) {\n\t\t\t\tvar categories = [];\n\t\t\t\tcategory.items.forEach(function(xtype) {\n\t\t\t\t\tcategories.push(this.getMenuItemFromXtype(xtype))\n\t\t\t\t}, this)\n\t\t\t\tmoreTools.push({\n\t\t\t\t\ttext: app.localize(category.i18n),\n\t\t\t\t\tglyph: category.glyph,\n\t\t\t\t\tmenu: {items: categories}\n\t\t\t\t})\n\t\t\t}, this);\n\t\t}\t\t\t\n\n\t\tvar exportItems = undefined;\n\t\tvar toolsMap = {\n//\t\t\t\tmaximize: {\n//\t\t\t\t\tglyph: 'xf08e@FontAwesome',\n//\t\t\t\t\tfn: this.maximizeToolClick\n//\t\t\t\t},\n\t\t\t\tsave: {\n\t\t\t\t\tglyph: 'xf08e@FontAwesome',\n\t\t\t\t\tfn: this.exportToolClick,\n\t\t\t\t\titems: exportItems\n\t\t\t\t},\n\t\t\t\tplus: moreTools ? {\n\t\t\t\t\tglyph: 'xf17a@FontAwesome',\n\t\t\t\t\titems: moreTools\n\t\t\t\t} : undefined,\n\t\t\t\tgear: this.showOptionsClick || this.getOptions ? {\n\t\t\t\t\tglyph: 'xf205@FontAwesome',\n\t\t\t\t\tfn: this.showOptionsClick ? this.showOptionsClick : function(panel) {\n\t\t\t\t\t\tif (panel.isXType(\"voyanttabpanel\")) {panel = panel.getActiveTab()}\n\t\t\t\t\t\t// we're here because the panel hasn't overridden the click function\n\t\t\t\t\t\tExt.create('Ext.window.Window', {\n\t\t\t\t\t\t\ttitle: panel.localize(\"optionsTitle\"),\n\t\t\t\t\t\t\tmodal: true,\n\t\t\t            \tpanel: panel,\n\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\txtype: 'form',\n\t\t\t\t\t\t\t\titems: panel.getOptions(),\n\t\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\t\tafterrender: function(form) {\n\t\t\t\t\t\t\t\t\t\tvar api = panel.getApiParams(form.getForm().getFields().collect('name'));\n\t\t\t\t\t\t\t\t\t\tform.getForm().setValues(api);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbuttons: [{\n\t\t\t\t\t            \ttext: panel.localize(\"reset\"),\n\t\t\t\t\t\t\t\t\tglyph: 'xf0e2@FontAwesome',\n\t\t\t\t\t            \tflex: 1,\n\t\t\t\t\t            \tpanel: panel,\n\t\t\t\t\t\t            ui: 'default-toolbar',\n\t\t\t\t\t        \t\thandler: function(btn) {\n\t\t\t\t\t        \t\t\tif (this.mixins && this.mixins[\"Voyant.util.Api\"]) {\n\t\t\t\t\t        \t\t\t\tthis.mixins[\"Voyant.util.Api\"].constructor.apply(this);\n\t\t\t\t\t        \t\t\t\tif (this.getCorpus && this.getCorpus()) {\n\t\t\t\t\t        \t\t\t\t\tthis.fireEvent(\"loadedCorpus\", this, this.getCorpus())\n\t\t\t\t\t        \t\t\t\t}\n\t\t\t\t\t        \t\t\t}\n\t\t\t\t\t        \t\t\tbtn.up('window').close();\n\t\t\t\t\t        \t\t},\n\t\t\t\t\t        \t\tscope: panel\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t},{xtype: 'tbfill'}, {\n\t\t\t\t\t            \ttext: panel.localize(\"cancelTitle\"),\n\t\t\t\t\t\t            ui: 'default-toolbar',\n\t\t\t\t\t                glyph: 'xf00d@FontAwesome',\n\t\t\t\t\t        \t\tflex: 1,\n\t\t\t\t\t        \t\thandler: function(btn) {\n\t\t\t\t\t        \t\t\tbtn.up('window').close();\n\t\t\t\t\t        \t\t}\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t            \ttext: panel.localize(\"confirmTitle\"),\n\t\t\t\t\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t\t\t\t\t            \tflex: 1,\n\t\t\t\t\t            \tpanel: panel,\n\t\t\t\t\t        \t\thandler: function(btn) {\n\t\t\t\t\t        \t\t\tfunction doGlobalUpdate(key, value) {\n\t\t\t\t\t        \t\t\t\t// set the api value for the app\n\t\t\t\t\t        \t\t\t\tif (app.setApiParam) {\n\t\t\t\t\t        \t\t\t\t\tapp.setApiParam(key, value);\n\t\t\t\t\t        \t\t\t\t}\n\t\t\t\t\t        \t\t\t\t\n\t\t\t\t\t        \t\t\t\t// tell the panels, including this one\n\t\t\t\t\t        \t\t\t\tvar panels = app.getViewport().query(\"panel,chart\");\n\t\t\t\t\t        \t\t\t\tfor (var i=0; i<panels.length; i++) {\n\t\t\t\t\t        \t\t\t\t\tif (panels[i].setApiParam) {\n\t\t\t\t\t        \t\t\t\t\t\tpanels[i].setApiParam(key, value);\n\t\t\t\t\t        \t\t\t\t\t}\n\t\t\t\t\t        \t\t\t\t}\n\t\t\t\t\t        \t\t\t\tglobalUpdate = true;\n\t\t\t\t\t        \t\t\t}\n\t\t\t\t\t        \t\t\t\n\t\t\t\t\t        \t\t\tvar values = btn.up('form').getValues();\n\t\t\t\t\t        \t\t\t\n\t\t\t\t\t        \t\t\t// set api values (all of them, not just global ones)\n\t\t\t\t\t        \t\t\tthis.setApiParams(values);\n\n\t\t\t\t\t        \t\t\tvar app = this.getApplication();\n\t\t\t\t\t        \t\t\tvar corpus = app.getCorpus();\n\t\t\t\t\t        \t\t\t\n\t\t\t\t\t        \t\t\tvar globalUpdate = false;\n\t\t\t\t\t        \t\t\tif (values['stopList'] != undefined && values['stopListGlobal'] != undefined && values.stopListGlobal) {\n\t\t\t\t\t        \t\t\t\tdoGlobalUpdate('stopList', values['stopList']);\n\t\t\t\t\t        \t\t\t}\n\t\t\t\t\t        \t\t\tif (values['palette'] != undefined) {\n\t\t\t\t\t\t\t\t\t\t\tapp.resetColorTermAssociations();\n\t\t\t\t\t        \t\t\t\tdoGlobalUpdate('palette', values['palette']);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (values['categories'] != undefined) {\n\t\t\t\t\t        \t\t\t\tdoGlobalUpdate('categories', values['categories']);\n\t\t\t\t\t        \t\t\t}\n\t\t\t\t\t        \t\t\t\n\t\t\t\t\t        \t\t\tif (globalUpdate) {\n\t\t\t\t\t        \t\t\t\t// trigger a reloading of the app\n\t\t\t\t\t        \t\t\t\tif (corpus) {\n\t\t\t\t\t        \t\t\t\t\tapp.dispatchEvent(\"loadedCorpus\", this, corpus);\n\t\t\t\t\t        \t\t\t\t} else {\n\t\t\t\t\t        \t\t\t\t\tapp.dispatchEvent(\"apiParamsUpdated\", this, values);\n\t\t\t\t\t        \t\t\t\t}\n\t\t\t\t\t        \t\t\t}\n\t\t\t\t\t        \t\t\t// fire this even if we have global params since the app dispatch won't reach this tool\n\t\t\t\t\t        \t\t\tif (corpus) {this.fireEvent(\"loadedCorpus\", this, corpus);}\n\t\t\t\t        \t\t\t\telse {this.fireEvent(\"apiParamsUpdated\", this, values);}\n\n\t\t\t\t\t        \t\t\tbtn.up('window').close();\n\t\t\t\t\t        \t\t},\n\t\t\t\t\t        \t\tscope: panel\n\t\t\t\t\t            }]\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbodyPadding: 5\n\t\t\t\t\t\t}).show()\n\t\t\t\t\t}\n\t\t\t\t} : undefined,\n\t\t\t\thelp: {\n\t\t\t\t\tglyph: 'xf128@FontAwesome',\n\t\t\t\t\tfn: this.helpToolClick\n\t\t\t\t}\n\t\t}\n\t\tvar tools = [];\n\t\t\n\t\t// check to see if there are tool objects configured\n\t\tif (config.includeTools) {\n\t\t\tfor (var tool in config.includeTools) {\n\t\t\t\tif (typeof config.includeTools[tool] == \"object\") {\n\t\t\t\t\ttools.push(config.includeTools[tool])\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tfor (var tool in toolsMap) {\n\t\t\tif (config.includeTools && !config.includeTools[tool] || !toolsMap[tool]) {continue;}\n\t\t\ttools.push({\n\t\t\t\ttype: tool,\n\t\t\t\ttooltip: this.localize(tool+\"Tip\"),\n\t\t\t\tcallback: toolsMap[tool].fn,\n\t\t\t\txtype: 'toolmenu',\n\t\t\t\tglyph: toolsMap[tool].glyph,\n\t\t\t\titems: toolsMap[tool].items\n\t\t\t})\n\t\t}\n\t\t\n\t\tExt.apply(this, {\n\t\t\ttools: tools\n\t\t})\n\t\tthis.on(\"afterrender\", function() {\n\t\t\tvar header = this.getHeader();\n\t\t\tif (header && Ext.os.deviceType==\"Desktop\" && !this.isXType(\"corpuscreator\") && !this.isXType('notebook')) {\n\t\t\t\tvar el = header.getEl();\n\t\t\t\tel.on(\"mouseover\", function() {\n\t\t\t\t\tthis.getHeader().getTools().forEach(function(tool) {\n\t\t\t\t\t\ttool.show();\n\t\t\t\t\t})\n\t\t\t\t}, this);\n\t\t\t\tel.on(\"mouseout\", function() {\n\t\t\t\t\tthis.getHeader().getTools().forEach(function(tool) {\n\t\t\t\t\t\tvar type = tool.config.type || tool.type; // auto-added tools don't have config.type, e.g. collapse\n\t\t\t\t\t\tif (type && type!='help' && type.indexOf('collapse')==-1) {tool.hide();}\n\t\t\t\t\t})\n\t\t\t\t}, this);\n\t\t\t\theader.getTools().forEach(function(tool,i) {\n\t\t\t\t\tif (tool.config.type!='help') {tool.hide();}\n\t\t\t\t});\n\t\t\t}\n\t\t}, this)\n\t},\n\tgetMenuItemFromXtype: function(xtype) {\n\t\tvar xt = xtype;\n\t\tvar config = this.getApplication().getToolConfigFromToolXtype(xtype);\n\t\tif (config && config.tooltip) {\n\t\t\tdelete config.tooltip // don't use this for now since it causes problems in the menu\n\t\t}\n\t\treturn Ext.apply(Ext.clone(config), {\n\t\t\txtype: 'menuitem',\n\t\t\ttext: config.title,\n\t\t\ttextAlign: 'left',\n\t\t\thandler: function() {this.replacePanel(config.xtype)},\n\t\t\tscope: this\n\t\t})\n\t},\n\tmaximizeToolClick: function(panel) {\n\t\tvar name = Ext.getClass(panel).getName();\n\t\tvar parts = name.split(\".\");\n\t\turl = panel.getBaseUrl()+\"tool/\"+parts[parts.length-1]+\"/\";\n\t\tparams = panel.getModifiedApiParams();\n\t\tif (!params.corpus && panel.getCorpus && panel.getCorpus()) {\n\t\t\tparams.corpus = panel.getCorpus().getId();\n\t\t}\n\t\tif (params) {url += \"?\"+Ext.Object.toQueryString(params);}\n\t\tpanel.openUrl(url);\n\t},\n\texportToolClick: function(panel) {\n\t\tif (panel.isXType('voyanttabpanel')) {panel = panel.getActiveTab()}\n\t\tvar items = window.location.hostname=='beta.voyant-tools.org' ? [{html: \"<p class='keyword' style='text-align: center; font-weight: bold; padding: 4px;'>Please note that this is the beta server and you should not count on corpora persisting (for bookmarks, embedding, etc.).\"}] : [];\n\t\tvar exportViewItems = [{\n       \t\txtype: 'radio',\n       \t\tname: 'export',\n       \t\tinputValue: 'embed',\n       \t\tboxLabel: panel.localize('exportViewHtmlEmbed')\n       \t},{\n       \t\txtype: 'radio',\n       \t\tname: 'export',\n       \t\tinputValue: 'biblio',\n       \t\tboxLabel: panel.localize('exportViewBiblio')\n       \t},{\n       \t\txtype: 'radio',\n       \t\tname: 'export',\n       \t\tinputValue: 'spyral',\n       \t\tboxLabel: panel.localize(\"exportViewSpyral\")\n       \t}];\n\t\tif (panel.getExtraExportItems) {\n\t\t\tpanel.getExtraExportItems().forEach(function(item) {\n\t\t\t\tExt.applyIf(item, {\n\t\t\t\t\txtype: 'radio',\n\t\t\t\t\tname: 'export'\n\t\t\t\t})\n\t\t\t\texportViewItems.push(item)\n\t\t\t})\n\t\t}\n\t\titems.push({\n\t       \t\txtype: 'radio',\n\t       \t\tname: 'export',\n\t       \t\tinputValue: 'url',\n\t       \t\tboxLabel: \"<a href='\"+panel.getExportUrl.call(panel)+\"' target='_blank'>\"+panel.localize('exportViewUrl')+\"</a>\",\n\t       \t\tchecked: true,\n\t       \t\tlisteners: {\n\t       \t\t\tafterrender: function() {\n\t       \t\t\t\tthis.boxLabelEl.on(\"click\", function() {\n\t       \t\t\t\t\tthis.up('window').close()\n\t       \t\t\t\t}, this)\n\t       \t\t\t}\n\t       \t\t}\n\t\t},{\n\t       xtype: 'fieldset',\n\t       collapsible: true,\n\t       collapsed: true,\n\t       title: panel.localize('exportViewFieldset'),\n\t       items: exportViewItems\n\t\t})\n\t\tif (panel.isXType('grid')) {\n\t\t\tvar exportitems = [{\n\t       \t\txtype: 'radio',\n\t       \t\tname: 'export',\n\t       \t\tinputValue: 'gridCurrentHtml',\n\t       \t\tboxLabel: panel.localize('exportGridCurrentHtml')\n    \t   },{\n\t       \t\txtype: 'radio',\n\t       \t\tname: 'export',\n\t       \t\tinputValue: 'gridCurrentTsv',\n\t       \t\tboxLabel: panel.localize('exportGridCurrentTsv')\n    \t  \t}];\n\t\t\tif (!panel.getExportGridAll || panel.getExportGridAll()!=false) {\n\t\t\t\texportitems.push({\n\t\t       \t\txtype: 'radio',\n\t\t       \t\tname: 'export',\n\t\t       \t\tinputValue: 'gridAllJson',\n\t\t       \t\tboxLabel: panel.localize('exportGridAllJson')\n\t    \t   },{\n\t\t       \t\txtype: 'radio',\n\t\t       \t\tname: 'export',\n\t\t       \t\tinputValue: 'gridAllTsv',\n\t\t       \t\tboxLabel: panel.localize('exportGridAllTsv')\n\t    \t   })\n\t\t\t}\n\t\t\titems.push({\n\t\t       xtype: 'fieldset',\n\t\t       collapsible: true,\n\t\t       collapsed: true,\n\t\t       title: panel.localize('exportGridCurrent'),\n\t    \t   items: exportitems\n\t\t\t})\n\t\t}\n\t\tif ((!panel.getExportVisualization || panel.getExportVisualization()) && panel.isXType(\"grid\")==false && (panel.down(\"chart\") || panel.getTargetEl().dom.querySelector(\"canvas\") || panel.getTargetEl().dom.querySelector(\"svg\"))) {\n\t\t\tvar formats = [{\n\t\t\t\txtype: 'radio',\n\t\t\t\tname: 'export',\n\t\t\t\tinputValue: 'png',\n\t\t\t\tboxLabel: panel.localize('exportPng')\n\t\t\t},{\n\t\t\t\txtype: 'slider',\n\t\t\t\twidth: 200,\n\t\t\t\tvalue: 1,\n\t\t\t\tminValue: .5,\n\t\t\t\tmaxValue: 10,\n\t\t\t\tincrement: .5,\n\t\t\t\tlabelAlign: 'right',\n\t\t\t\tdecimalPrecision: 1,\n\t\t\t\titemId: 'scale',\n\t\t\t\tfieldLabel: new Ext.Template(panel.localize(\"scaleLabel\")).apply([1]),\n\t\t\t\tlisteners: {\n\t\t\t\t\tchange: function(slider, newVal) {\n\t\t\t\t\t\tthis.setFieldLabel(new Ext.Template(panel.localize(\"scaleLabel\")).apply([newVal]))\n\t\t\t\t\t},\n\t\t\t\t\tchangecomplete: function(slider) {\n\t\t\t\t\t\tslider.previousSibling().setValue(true); // make sure PNG is selected\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}];\n\t\t\tif (panel.getTargetEl().dom.querySelector(\"svg\")) {\n\t\t\t\tformats.push({\n\t\t\t\t\txtype: 'radio',\n\t\t\t\t\tname: 'export',\n\t\t\t\t\tinputValue: 'svg',\n\t\t\t\t\tboxLabel: panel.localize('exportSvg')\n\t\t\t\t})\n\t\t\t}\n\t\t\titems.push({\n\t\t\t       xtype: 'fieldset',\n\t\t\t       collapsible: true,\n\t\t\t       collapsed: true,\n\t\t\t       title: panel.localize('exportVizTitle'),\n\t\t    \t   items: formats\n\t    \t});\n\t\t}\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: panel.localize(\"exportTitle\"),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\titems: items,\n\t\t\t\tbuttons: [{\n\t            \ttext: panel.localize(\"exportTitle\"),\n\t\t\t\t\tglyph: 'xf08e@FontAwesome',\n\t            \tflex: 1,\n\t            \tpanel: panel,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar form = btn.up('form');\n\t        \t\t\tvar fn = 'export'+Ext.String.capitalize(form.getValues()['export']);\n\t        \t\t\tif (Ext.isFunction(panel[fn])) {\n\t        \t\t\t\tpanel[fn].call(panel, panel, form)\n\t        \t\t\t}\n\t        \t\t\telse {\n\t        \t\t\t\tExt.Msg.show({\n\t        \t\t\t\t    title: panel.localize('exportError'),\n\t        \t\t\t\t    message: panel.localize('exportNoFunction'),\n\t        \t\t\t\t    buttons: Ext.Msg.OK,\n\t        \t\t\t\t    icon: Ext.Msg.ERROR\n\t        \t\t\t\t});\n\t        \t\t\t}\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: panel\n\t            }, {\n\t            \ttext: panel.localize(\"cancelTitle\"),\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t}]\n\t\t\t},\n\t\t\tbodyPadding: 5\n\t\t}).show()\n\t},\n\texportSvg: function(img) {\n\t\tvar svg = this.getTargetEl().dom.querySelector(\"svg\");\n\t\tif (svg) {\n\t\t\tvar html = d3.select(svg)\n\t\t\t\t.attr(\"version\", 1.1)\n\t\t\t\t.attr(\"xmlns\", \"http://www.w3.org/2000/svg\")\n\t\t\t\t.node().parentNode.innerHTML\n\t\t\tExt.Msg.show({\n\t\t\t    title: this.localize('exportSvgTitle'),\n\t\t\t    message: '<img src=\"'+'data:image/svg+xml;base64,'+ btoa(unescape(encodeURIComponent(html)))+'\" style=\"float: right; max-width: 200px; max-height: 200px; border: thin dotted #ccc;\"/>'+this.localize('exportSvgMessage'),\n\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t    icon: Ext.Msg.INFO,\n\t\t\t    prompt: true,\n\t\t        multiline: true,\n\t\t        value: html\n\t\t\t});\t\t\n\t\t}\n\t},\n\texportPngData: function(img) {\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportPngTitle'),\n\t\t    message: '<img class=\"thumb\" src=\"'+img+'\" style=\"float: right; max-width: 200px; max-height: 200px; border: thin dotted #ccc;\"/>'+this.localize('exportPngMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: '<img src=\"'+img+'\" />'\n\t\t});\n\t},\n\texportPng: function(panel, form) {\n\t\tvar scale = 1;\n\t\tif (form) {\n\t\t\tform.mask(panel.localize('loading'));\n\n\t\t\tvar slider = form.queryById(\"scale\");\n\t\t\tif (slider && slider.getValue) {\n\t\t\t\tscale = slider.getValue();\n\t\t\t}\n\t\t}\n\t\t\nvar canvasSurface = this.down('draw') || this.down('chart');\n\t\tif (canvasSurface && (canvasSurface.isChart || canvasSurface.isCanvas)) {\n\n\t\t\t// first part taken from EXTJ Draw.getImage()\n\t\t\t// http://docs.sencha.com/extjs/6.2.0/classic/src/Container.js-2.html#Ext.draw.Container-method-getImage\n\t\t\t// reproduced here because we want to scale the image in the canvas, not the final image\n\t\t\tvar size = canvasSurface.innerElement.getSize(),\n            \t\tsurfaces = Array.prototype.slice.call(canvasSurface.items.items),\n            \t\tzIndexes = canvasSurface.surfaceZIndexes,\n            \t\timage, imageElement,\n            \t\ti, j, surface, zIndex;\n \n\t        // Sort the surfaces by zIndex using insertion sort. \n\t        for (j = 1; j < surfaces.length; j++) {\n\t            surface = surfaces[j];\n\t            zIndex = zIndexes[surface.type];\n\t            i = j - 1;\n\t            while (i >= 0 && zIndexes[surfaces[i].type] > zIndex) {\n\t                surfaces[i + 1] = surfaces[i];\n\t                i--;\n\t            }\n\t            surfaces[i + 1] = surface;\n\t        }\n\t        \n\t        // next part taken from EXTJS Canvas Flatten\n\t        // http://docs.sencha.com/extjs/6.2.0/classic/src/Canvas.js-1.html#line897\n\t        // reproduced here because we want to scale the image when drawing to the new canvas\n\t        \n\t        var targetCanvas = document.createElement('canvas'),\n            className = Ext.getClassName(surfaces[0]),\n            ratio = surfaces[0].devicePixelRatio * scale,\n            ctx = targetCanvas.getContext('2d'),\n            surface, canvas, rect, i, j, xy;\n\n\t        targetCanvas.width = Math.ceil(size.width * ratio);\n\t        targetCanvas.height = Math.ceil(size.height * ratio);\n\t\n\t        \n\t        for (i = 0; i < surfaces.length; i++) {\n\t            surface = surfaces[i];\n\t            if (Ext.getClassName(surface) !== className) {\n\t                continue;\n\t            }\n\t            rect = surface.getRect();\n\t            surfaceSize = surface.el.getSize();\n\t            for (j = 0; j < surface.canvases.length; j++) {\n\t                canvas = surface.canvases[j];\n\t                xy = canvas.getOffsetsTo(canvas.getParent());\n\t                ctx.drawImage(canvas.dom, (rect[0] + xy[0]) * ratio, (rect[1] + xy[1]) * ratio, surfaceSize.width*ratio,surfaceSize.height*ratio);\n\t            }\n\t        }\n\t        if (form && form.isVisible()) {form.unmask();}\n\t        \n\t        // now we're ready\n\t\t\treturn this.exportPngData(targetCanvas.toDataURL());\n\t\t}\n\t\t\n//\t\tvar chart = this.down('chart'); // first try finding a chart\n//\t\tif (chart) {\n//\t\t\treturn this.exportPngData(this.down('chart').getImage().data);\n//\t\t}\n//\n\t\tvar targetEl = this.getTargetEl().dom,\n\t\t\tcanvas = targetEl.querySelector(\"canvas\"); // next try finding a canvas\n\t\tif (canvas) {\n\t\t\tif (scale==1) {\n\t\t\t\tvar data = canvas.toDataURL(\"image/png\");\n\t\t        if (form && form.isVisible()) {form.unmask();}\n\t\t\t\treturn this.exportPngData(data);\n\t\t\t}\n\t        var targetCanvas = document.createElement('canvas'),\n            ctx = targetCanvas.getContext('2d');\n\t        targetCanvas.width = Math.ceil(canvas.width * scale);\n\t        targetCanvas.height = Math.ceil(canvas.height * scale);\n\n\t\t\t  var image = new Image;\n\t\t\t  image.src = canvas.toDataURL(\"image/png\");\n\t\t\t  image.panel = this;\n\t\t\t  image.onload = function() {\n\t\t\t\t  ctx.drawImage(image, 0, 0, targetCanvas.width, targetCanvas.height);\n\t\t\t\t  img = targetCanvas.toDataURL(\"image/png\");\n\t\t\t        if (form && form.isVisible()) {form.unmask();}\n\t\t\t\t  this.panel.exportPngData.call(this.panel, img);\n\t\t\t  };\t\n\t\t\t  return;\n\t\t}\n\t\t\n\t\tvar svg = targetEl.querySelector(\"svg\"); // finally try finding an SVG\n\t\tif (svg) {\n\t\t\tvar width = targetEl.offsetWidth*scale,\n\t\t\t\theight = targetEl.offsetHeight*scale\n\t\t\tvar clone = svg.cloneNode(true); // we don't want to scale, etc. the original\n\t\t\tclone.setAttribute(\"version\", 1.1)\n\t\t\tclone.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\")\n\t\t\tclone.setAttribute(\"transform\", \"scale(\"+scale+\")\")\n\t\t\tclone.setAttribute(\"width\", width)\n\t\t\tclone.setAttribute(\"height\", height)\n\t\t\t\n\t\t\tvar html = clone.outerHTML,\n\t\t\t  img = 'data:image/svg+xml;base64,'+ btoa(unescape(encodeURIComponent(html)));\n\n\t\t\t  var canvas = Ext.DomHelper.createDom({tag:'canvas',width: width,height:height}),\n\t\t\t  context = canvas.getContext(\"2d\"), me=this;\n\t\t\t  \n\t\t\t  var image = new Image;\n\t\t\t  image.src = img;\n\t\t\t  image.panel = this;\n\t\t\t  image.onload = function() {\n\t\t\t\t  context.drawImage(image, 0, 0);\n\t\t\t\t  img = canvas.toDataURL(\"image/png\");\n\t\t        if (form && form.isVisible()) {form.unmask();}\n\t\t\t\t  return this.panel.exportPngData.call(this.panel, img);\n\t\t\t  };\n\t\t}\n\t},\n\texportUrl: function() {\n\t\tthis.openUrl(this.getExportUrl());\n\t},\n\texportEmbed: function() {\n\t\tvar asTool = this.isXType('voyantheader')==false;\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportViewEmbedTitle'),\n\t\t    message: this.localize('exportViewEmbedMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: \"\u003c!--\tExported from Voyant Tools (voyant-tools.org).\\n\"+\n\t        \t\"The iframe src attribute below uses a relative protocol to better function with both\\n\"+\n\t        \t\"http and https sites, but if you're embedding this into a local web page (file protocol)\\n\"+\n\t        \t\"you should add an explicit protocol (https if you're using voyant-tools.org, otherwise\\n\"+\n\t        \t\"it depends on this server.\\n\"+\n\t        \t\"Feel free to change the height and width values or other styling below: --\u003e\\n\"+\n\t        \t\"<iframe style='width: \"+(asTool ? this.getWidth()+\"px\" : \"100%\")+\"; height: \"+(asTool ? this.getHeight()+\"px\" : \"800px\")+\";' src='\"+this.getExportUrl(asTool)+\"'></iframe>\"\n\t\t});\n\t},\n\texportBiblio: function() {\n\t\tvar date = new Date();\n\t\tvar url = this.getExportUrl()\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportBiblioTitle'),\n\t\t    message: '<fieldset><legend>MLA</legend>'+\n\t    \t'<div class=\"x-selectable\">Sinclair, St\u00e9fan and Geoffrey Rockwell. '+(this.isXType('voyantheader') ? '' : '\"'+this.localize('title')+'.\" ')+\n\t    \t'<i>Voyant Tools</i>. '+Ext.Date.format(date,'Y')+'. Web. '+Ext.Date.format(date,'j M Y')+'. &lt;'+url+'&gt;.</div></fieldset>'+\n\t    \t'<br >'+\n\t    \t'<fieldset><legend>Chicago</legend>'+\n\t    \t'<div class=\"x-selectable\">St\u00e9fan Sinclair and Geoffrey Rockwell, '+(this.isXType('voyantheader') ? '' : '\"'+this.localize('title')+'\", ')+\n\t    \t'<i>Voyant Tools</i>, accessed '+Ext.Date.format(date,'F j, Y')+', '+url+'.</div></fieldset>'+\n\t    \t'<br >'+\n\t    \t'<fieldset><legend>APA</legend>'+\n\t    \t'<div class=\"x-selectable\">Sinclair, S. &amp; G. Rockwell. ('+Ext.Date.format(date,'Y')+\"). \"+(this.isXType('voyantheader') ? '' : this.localize('title')+'. ')+\n\t    \t'<i>Voyant Tools</i>. Retrieved '+Ext.Date.format(date,'F j, Y')+', from '+url+'</div></fieldset>',\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO\n\t\t})\n\t},\n\texportSpyral: function() {\n\t\tlet toolForUrl = Ext.getClassName(this).split(\".\").pop();\n\t\tlet api = this.getApplication().getModifiedApiParams();\n\t\tif (this.isXType('voyantheader')==false) {\n\t\t\tdelete api.panels; // not needed for individual tools\n\t\t\t// add (and overwrite if need be) this tool's api\n\t\t\tExt.apply(api, this.getModifiedApiParams());\n\t\t\tdelete api.corpus;\n\t\t}\n\t\tlet isDebug = api && \"debug\" in api;\n\t\tdelete api.view;\n\t\tdelete api.debug;\n\t\tlet enc = function(str) {\n\t\t\treturn btoa(encodeURIComponent(str)).replace(/=/g, \"%3D\");\n\t\t}\n\t\tlet input = '[\"'+enc(\"<h2>Spyral Notebook Imported from Voyant Tools</h2>\")+'\",\"'+\n\t\t\tenc('loadCorpus(\"'+this.getApplication().getCorpus().getAliasOrId()+'\").tool(\"'+\n\t\t\t(toolForUrl==\"VoyantHeader\" ? \"\" : toolForUrl)+'\"'+(Object.keys(api).length>0 ? (\",\"+Ext.encode(api)) : \"\")+ ');')+'\"]'\n\t\tthis.openUrl(this.getApplication().getBaseUrl()+\"spyral/?run=true&\"+(isDebug ? \"debug=true&\" : \"\")+\"inputJsonArrayOfEncodedBase64=\"+input);\n\t},\n\texportGridCurrentJson: function(grid, form) {\n\t\tvar store = grid.getStore();\n\t\tvar fields = store.getFields();\n\t\tvar value = \"<table>\\n\\t<thead>\\n\\t\\t<tr>\\n\";\n\t\tvar visibleColumns = grid.getColumnManager().headerCt.getVisibleGridColumns();\n\t\tvalues = [];\n\n\t\tfunction jsonCollector(row) {\n\t\t\tvar val = {};\n\t\t\tvisibleColumns.forEach(function (column) {\n\t\t\t\tval[column.text] = row.get(column.dataIndex);\n\t\t\t});\n\t\t\tvalues.push(val);\n\t\t}\n\n\t\tif (store.buffered) {\n\t\t\tstore.data.forEach(jsonCollector);\n\t\t} else {\n\t\t\tstore.each(jsonCollector);\n\t\t}\n\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportDataTitle'),\n\t\t    message: this.localize('exportDataJsonMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: Ext.encode(values)\n\t\t});\n\t},\n\texportGridCurrentTsv: function(grid, form) {\n\t\tvar store = grid.getStore();\n\t\tvar fields = store.getFields();\n\t\tvar visibleColumns = grid.getColumnManager().headerCt.getVisibleGridColumns();\n\t\tvar fields = [];\n\t\tvisibleColumns.forEach(function(column) {\n\t\t\tfields.push(column.text);\n\t\t})\n\t\tvar value = fields.join(\"\\t\")+\"\\n\";\n\n\t\tfunction tsvCollector(row) {\n\t\t\tcells = [];\n\t\t\tvisibleColumns.forEach(function (column) {\n\t\t\t\tvar val = row.get(column.dataIndex);\n\t\t\t\tif (Ext.isString(val)) {\n\t\t\t\t\tval = val.replace(/\\s+/g, ' '); // get rid of multiple whitespace (including newlines and tabs)\n\t\t\t\t}\n\t\t\t\tcells.push(val)\n\t\t\t});\n\t\t\tvalue += cells.join(\"\\t\") + \"\\n\";\n\t\t}\n\n\t\tif (store.buffered) {\n\t\t\tstore.data.forEach(tsvCollector);\n\t\t} else {\n\t\t\tstore.each(tsvCollector);\n\t\t}\n\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportDataTitle'),\n\t\t    message: this.localize('exportDataTsvMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: value\n\t\t});\n\t},\n\texportGridCurrentHtml: function(grid, form) {\n\t\tvar store = grid.getStore();\n\t\tvar fields = store.getFields();\n\t\tvar value = \"<table>\\n\\t<thead>\\n\\t\\t<tr>\\n\";\n\t\tvar visibleColumns = grid.getColumnManager().headerCt.getVisibleGridColumns();\n\t\tvisibleColumns.forEach(function(column) {\n\t\t\tvalue+=\"\\t\\t\\t<td>\"+column.text+\"</td>\\n\";\n\t\t});\n\n\t\tvalue+=\"\\t\\t</tr>\\n\\t</thead>\\n\\t<tbody>\\n\";\n\n\t\tfunction htmlCollector(row) {\n\t\t\tvalue += \"\\t\\t<tr>\\n\";\n\t\t\tvisibleColumns.forEach(function (column) {\n\t\t\t\tvar val = row.get(column.dataIndex);\n\t\t\t\tif (Ext.isString(val)) {\n\t\t\t\t\tval = val.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&lg;');\n\t\t\t\t}\n\t\t\t\tvalue += \"\\t\\t\\t<td>\" + val + \"</td>\\n\";\n\t\t\t});\n\t\t\tvalue += \"\\t\\t</tr>\\n\";\n\t\t}\n\n\t\tif (store.buffered) {\n\t\t\tstore.data.forEach(htmlCollector);\n\t\t} else {\n\t\t\tstore.each(htmlCollector);\n\t\t}\n\n\t\tvalue+=\"\\t</tbody>\\n</table>\";\n\t\tExt.Msg.show({\n\t\t    title: this.localize('exportDataTitle'),\n\t\t    message: this.localize('exportDataHtmlMessage'),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.Msg.INFO,\n\t\t    prompt: true,\n\t        multiline: true,\n\t        value: value\n\t\t});\n\t},\n\texportGridAllJson: function(grid, form) {\n\t\tExt.Msg.confirm(this.localize('exportAllTitle'), this.localize('exportAllJsonWarning'), function(btn) {\n\t\t\tif (btn=='yes') {\n\t\t\t\tvar params = {limit: 0, start: 0};\n\t\t\t\tExt.applyIf(params, grid.getStore().getProxy().getExtraParams());\n\t\t\t\tthis.openUrl(this.getTromboneUrl()+\"?\"+Ext.Object.toQueryString(params));\n\t\t\t}\n\t\t}, this)\n\t},\n\texportGridAllTsv: function(grid, form) {\n\t\tExt.Msg.confirm(this.localize('exportAllTitle'), this.localize('exportAllTsvWarning'), function(btn) {\n\t\t\tif (btn=='yes') {\n\t\t\t\tvar params = {limit: 0, start: 0, template: this.getXType()+\"2tsv\"};\n\t\t\t\tExt.applyIf(params, grid.getStore().getProxy().getExtraParams());\n\t\t\t\tthis.openUrl(this.getTromboneUrl()+\"?\"+Ext.Object.toQueryString(params));\n\t\t\t}\n\t\t}, this)\n\t},\n\tgetExportUrl: function(asTool) {\n\t\t// start with the application api\n\t\tvar api = this.getApplication().getModifiedApiParams();\n\t\tvar toolForUrl = Ext.getClassName(this).split(\".\").pop();\n\t\tif (this.isXType('voyantheader')==false) {\n\t\t\tdelete api.panels; // not needed for individual tools\n\t\t\t// add (and overwrite if need be) this tool's api\n\t\t\tExt.apply(api, this.getModifiedApiParams());\n\t\t\tif (!asTool) {api.view=toolForUrl;}\n\t\t}\n\t\tif (!api.corpus) {\n\t\t\tapi.corpus = this.getApplication().getCorpus().getAliasOrId();\n\t\t}\n\t\treturn this.getApplication().getBaseUrl()+(asTool ? \"tool/\"+toolForUrl+\"/\" : \"\")+'?'+Ext.Object.toQueryString(api);\n\t},\n\thelpToolClick: function(panel) {\n\t\tif (panel.isXType('voyanttabpanel')) {panel = panel.getActiveTab()}\n\t\tvar help = panel.localize('help', {\"default\": false}) || panel.localize('helpTip');\n\t\tif (help==panel._localizeClass(Ext.ClassManager.get(\"Voyant.util.Toolable\"), \"helpTip\")) {\n\t\t\tpanel.openUrl( panel.getBaseUrl()+\"docs/#!/guide/\" + panel.getXType());\n\t\t}\n\t\telse {\n\t\t\tExt.Msg.alert(panel.localize('title'), help +\"<p><a href='\"+panel.getBaseUrl()+\n\t\t\t\t\t\"docs/\"+ (panel.isXType('voyantheader') ? '' : \"#!/guide/\"+panel.getXType()) +\"' target='voyantdocs'>\"+panel.localize(\"moreHelp\")+\"</a></p>\")\n\t\t}\n\t},\n\treplacePanel: function(xtype) {\n\t\tvar corpus = this.getApplication().getCorpus();\n\t\tvar config = this.getInitialConfig();\n\t\tvar parent;\n\t\tif (this.isXType('voyantheader') && this.getApplication().getViewComponent) {\n\t\t\tparent = this.getApplication().getViewComponent();\n\t\t\tparent.removeAll(true);\n\t\t\tvar newTool = parent.add({xtype: xtype});\n\t\t\tif (corpus) {\n\t\t\t\tthis.getApplication().dispatchEvent(\"loadedCorpus\", parent, corpus);\n\t\t\t}\n\t\t\t\n\t\t\tvar queryParams = Ext.Object.fromQueryString(document.location.search);\n\t\t\tvar url = this.getApplication().getBaseUrl();\n\t\t\turl += '?corpus='+corpus.getAliasOrId();\n\t\t\turl += '&view='+xtype;\n\t\t\tfor (var key in queryParams) {\n\t\t\t\tif (key !== 'corpus' && key !== 'view') {\n\t\t\t\t\turl += '&'+key+'='+queryParams[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\twindow.history.pushState({\n\t\t\t\tcorpus: corpus.getAliasOrId(),\n\t\t\t\tview: xtype\n\t\t\t}, '', url);\n\t\t}\n\t\telse {\n\t\t\tparent = this.isXType('voyantheader') && this.getApplication().getViewComponent ? this.getApplication().getViewComponent() : this.up(\"component\");\n\t\t\tparent.remove(this, true);\n\t\t\tvar newTool = parent.add({xtype: xtype});\n\t\t\tif (parent.isXType(\"voyanttabpanel\")) {\n\t\t\t\tparent.setActiveTab(newTool)\n\t\t\t}\n\t\t\tif (corpus) {\n\t\t\t\tnewTool.fireEvent(\"loadedCorpus\", newTool, corpus)\n\t\t\t}\n\t\t}\n\t\tthis.getApplication().dispatchEvent('panelChange', this)\n\t}\n});\n\n// from http://www.sencha.com/forum/showthread.php?281658-add-dropdown-menu-to-panel-tool&p=1054579&viewfull=1#post1054579\n// and http://www.sencha.com/forum/showthread.php?281953-Glyphs-in-panel-tool&p=1068934&viewfull=1#post1068934\n\nExt.define('Voyant.util.ToolMenu', {\n    extend: 'Ext.panel.Tool',\n    alias: 'widget.toolmenu',\n    renderTpl: ['<div class=\"x-menu-tool-hover\">' + '</div>'+\n            '<tpl if=\"glyph\">' + \n            '<span id=\"{id}-toolEl\" class=\"{baseCls}-glyph {childElCls}\" role=\"presentation\" style=\"font-family: {glyphFontFamily}; '+\n            \t'<tpl if=\"Ext.os.name==\\'iOS\\'\">'+ // FIXME: this is an awful hack..\n            \t\t'margin-right: 15px; '+\n            \t'</tpl>'+\n            '\">&#{glyph}</span>' + \n            '<tpl else>' + \n            '<img id=\"{id}-toolEl\" src=\"{blank}\" class=\"{baseCls}-img {baseCls}-{type}' + '{childElCls}\" role=\"presentation\"/>' + \n            '</tpl>'],\n    privates: {\n        onClick: function() {\n        \t\n            var me = this,\n            returnValue = me.callParent(arguments);\n\n\n            if (returnValue && me.items) {\n                if (!me.toolMenu) {\n                    me.toolMenu = new Ext.menu.Menu({\n                        items: me.items\n                    });\n                }\n                me.toolMenu.showAt(0, 0);\n                me.toolMenu.showAt(me.getX() + me.getWidth() - me.toolMenu.getWidth(), me.getY() + me.getHeight() + 10);\n            }\n\n\n            return returnValue;\n        },\n        onDestroy: function() {\n            Ext.destroyMembers(this, 'toolMenu'); //destructor\n            this.callParent();\n        }\n    },   \n\tinitComponent: function() {\n\t    var me = this;\n\t    me.callParent(arguments);\n\t\n\t    var glyph, glyphParts, glyphFontFamily;\n\t    glyph = me.glyph || 'xf12e@FontAwesome';\n\t\n\t    if (glyph) {\n\t        if (typeof glyph === 'string') {\n\t            glyphParts = glyph.split('@');\n\t            glyph = glyphParts[0];\n\t            glyphFontFamily = glyphParts[1];\n\t        } else if (typeof glyph === 'object' && glyph.glyphConfig) {\n\t            glyphParts = glyph.glyphConfig.split('@');\n\t            glyph = glyphParts[0];\n\t            glyphFontFamily = glyphParts[1];\n\t        }\n\t\n\t\n\t        Ext.applyIf(me.renderData, {\n\t            baseCls: me.baseCls,\n\t            blank: Ext.BLANK_IMAGE_URL,\n\t            type: me.type,\n\t            glyph: glyph,\n\t            glyphFontFamily: glyphFontFamily\n\t        });\n\t    }\n\t}\n\n});\n","Ext.define(\"Voyant.util.Transferable\", {\n\ttransferable: ['transfer'],\n\ttransfer: function(source, destination) {\n\t\tif (source.transferable) {\n\t\t\tfor (var i=0;i<source.transferable.length;i++) {\n\t\t\t\tvar member = source.transferable[i];\n\t\t\t\tdestination[member] = Ext.bind(source[member], destination);\n\t\t\t}\n\t\t}\n\t\tif (source.mixins) {\n\t\t\tfor (mixin in source.mixins) {\n\t\t\t\tthis.transfer(source.mixins[mixin], destination)\n\t\t\t}\n\t\t}\n\t}\n})","Ext.define(\"Voyant.util.Variants\", {\n\textend: 'Ext.Base',\n\tconstructor: function(variants) {\n\t\tthis.variants = variants;\n\t\tthis.map = {};\n\t\tthis.variants.forEach(function(variant, index) {\n\t\t\tvariant.forEach(function(v) {\n\t\t\t\tthis.map[v]=index;\n\t\t\t}, this)\n\t\t}, this)\n\t},\n\tgetVariants: function(terms) {\n\t\tvar variants = [];\n\t\tif (Ext.isString(terms)) {terms = [terms]}\n\t\tif (Ext.isArray(terms)) {\n\t\t\tterms.forEach(function(term) {\n\t\t\t\tif (this.map[term]!=undefined) {\n\t\t\t\t\tvariants.push.apply(variants, this.variants[this.map[term]]);\n\t\t\t\t}\n\t\t\t}, this)\n\t\t}\n\t\treturn variants\n\t}\n})","Ext.define(\"Voyant.util.Downloadable\", {\n\tmixins: ['Voyant.util.Localization'],\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tdocumentFormat: undefined,\n\t\t\tdocumentFilename: undefined\n\t\t}\n\t},\n\n\tdownloadFromCorpusId: function(corpusId) {\n\t\tvar panel = this;\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: this.localize('exportTitle'),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\titems: {xtype: 'downloadoptions'},\n\t\t\t\tlisteners: {\n\t\t\t\t\tafterrender: function(form) {\n\t\t\t\t\t\t// make sure defaults are set based on panel's API\n\t\t\t\t\t\tform.getForm().setValues(panel.getApiParams(['documentFilename','documentFormat']));\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbuttons: [{\n\t            \ttext: this.localize(\"cancelButton\"),\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t\t            ui: 'default-toolbar',\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t},{\n\t            \ttext: this.localize('downloadButton'),\n\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t            \tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar values = btn.up('form').getValues();\n\t        \t\t\tpanel.setApiParams(values);\n\t        \t\t\tpanel.openDownloadCorpus(corpusId);\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: this\n\t            }]\n\t\t\t},\n\t\t\tbodyPadding: 5\n\t\t}).show()\n\t},\n\t\n    openDownloadCorpus: function(corpusId) {\n\t\tvar url = this.getTromboneUrl()+\"?corpus=\"+corpusId+\"&tool=corpus.CorpusExporter&outputFormat=zip\"+\n\t\t\t\"&zipFilename=DownloadedVoyantCorpus-\"+corpusId+\".zip\"+\n\t\t\t(this.getApiParam(\"documentFormat\") ? \"&documentFormat=\"+this.getApiParam(\"documentFormat\") : '')+\n\t\t\t(this.getApiParam(\"documentFilename\") ? \"&documentFilename=\"+this.getApiParam(\"documentFilename\") : '')\n\t\tthis.openUrl(url)\n    }\n})","Ext.define('Voyant.util.Storage', {\n\tMAX_LENGTH: 950000, // keep it under 1 megabyte\n\t\n\tstoreResource: function(id, data) {\n\t\tvar dataString = Ext.encode(data);\n\t\t\n\t\tif (dataString.length > this.MAX_LENGTH) {\n\t\t\t// split into chunks\n\t\t\tvar dfd = new Ext.Deferred();\n\t\t\t\n\t\t\tvar numChunks = Math.ceil(dataString.length / this.MAX_LENGTH);\n\t\t\t\n\t\t\tvar chunkIds = [];\n\t\t\tfor (var i = 0; i < numChunks; i++) {\n\t\t\t\tchunkIds.push(id+'-chunk'+i);\n\t\t\t}\n\t\t\tthis._doStore(id+'-hasChunks', Ext.encode(chunkIds)).then(function() {\n\t\t\t\tvar chunkCount = 0;\n\t\t\t\tvar currIndex = 0;\n\t\t\t\tfor (var i = 0; i < numChunks; i++) {\n\t\t\t\t\tvar chunkString = dataString.substr(currIndex, this.MAX_LENGTH);\n\t\t\t\t\t\n\t\t\t\t\tthis._doStore(chunkIds[i], chunkString).then(function() {\n\t\t\t\t\t\tchunkCount++;\n\t\t\t\t\t\tif (chunkCount == numChunks) {\n\t\t\t\t\t\t\tdfd.resolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\tdfd.reject();\n\t\t\t\t\t}, null, this);\n\t\t\t\t\t\n\t\t\t\t\tcurrIndex += this.MAX_LENGTH;\n\t\t\t\t}\n\t\t\t}, function() {\n\t\t\t\tdfd.reject();\n\t\t\t}, null, this);\n\t\t\t\n\t\t\treturn dfd.promise;\n\t\t} else {\n\t\t\treturn this._doStore(id, dataString);\n\t\t}\n\t},\n\t\n\t_doStore: function(id, dataString) {\n\t\tvar dfd = new Ext.Deferred();\n\t\tExt.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: {\n                tool: 'resource.StoredResource',\n                resourceId: id,\n                storeResource: dataString\n            }\n        }).then(function(response) {\n            dfd.resolve();\n        }, function(response) {\n            dfd.reject();\n        });\n\t\t\n\t\treturn dfd.promise;\n\t},\n\t\n\tgetStoredResource: function(id) {\n\t\tvar dfd = new Ext.Deferred();\n\t\t\n\t\tExt.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: {\n                tool: 'resource.StoredResource',\n                verifyResourceId: id+'-hasChunks'\n            }\n        }).then(function(response) {\n        \tvar json = Ext.decode(response.responseText);\n        \tif (json && json.storedResource && json.storedResource.id && json.storedResource.id != '') {\n            \t// chunks\n            \tthis._doGetStored(json.storedResource.id, false).then(function(chunkIds) {\n            \t\tvar fullData = '';\n                    var dataChunks = {};\n\t            \tfor (var i = 0; i < chunkIds.length; i++) {\n\t            \t\tthis._doGetStored(chunkIds[i], true).then(function(response) {\n\t            \t\t\tvar chunkId = response[0];\n\t            \t\t\tvar value = response[1];\n\t            \t\t\tdataChunks[chunkId] = value;\n\t            \t\t\t\n\t            \t\t\tvar done = true;\n\t            \t\t\tfor (var j = chunkIds.length-1; j >= 0; j--) {\n\t            \t\t\t\tif (dataChunks[chunkIds[j]] === undefined) {\n\t            \t\t\t\t\tdone = false;\n\t            \t\t\t\t\tbreak;\n\t            \t\t\t\t}\n\t            \t\t\t}\n\t            \t\t\t\n\t            \t\t\tif (done) {\n\t            \t\t\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t            \t\t\t\t\tfullData += dataChunks[chunkIds[j]];\n\t            \t\t\t\t}\n\t            \t\t\t\tdfd.resolve(Ext.decode(fullData));\n\t            \t\t\t}\n\t            \t\t}, function() {\n\t                        dfd.reject();\n\t                    }, null, this);\n\t            \t}\n            \t}, function() {\n            \t\tdfd.reject();\n            \t}, null, this);\n        \t} else {\n            \t// no chunks\n\t\t\t\tthis._doGetStored(id, false).then(function(value) {\n\t\t\t\t\tdfd.resolve(value);\n\t\t\t\t}, function() {\n\t\t\t\t\tdfd.reject();\n\t\t\t\t}, null, this);\n        \t}\n        }, function() {\n        \tdfd.reject();\n        }, null, this);\n\t\t\n\t\treturn dfd.promise;\n\t},\n\t\n\t_doGetStored: function(id, isChunk) {\n\t\tvar dfd = new Ext.Deferred();\n\t\t\n\t\tExt.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: {\n                tool: 'resource.StoredResource',\n                retrieveResourceId: id,\n                failQuietly: true\n            }\n        }).then(function(response) {\n        \tvar json = Ext.decode(response.responseText);\n        \tvar id = json.storedResource.id;\n        \tvar value = json.storedResource.resource;\n        \tif (value.length == 0) {\n        \t\tdfd.reject();\n        \t} else {\n\t        \tif (isChunk != true) {\n\t        \t\tvalue = Ext.decode(value);\n\t        \t\tdfd.resolve(value);\n\t        \t} else {\n\t        \t\tdfd.resolve([id, value]);\n\t        \t}\n        \t}\n        }, function() {\n        \tdfd.reject();\n        }, null, this);\n\t\t\n\t\treturn dfd.promise;\n\t}\n});\n","/*\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\nExt.define(\"Voyant.util.DiacriticsRemover\", {\n    diacriticsMap: {},\n    \n    constructor: function() {\n        var defaultDiacriticsRemovalMap = [\n            {'base':'A', 'letters':'\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F'},\n            {'base':'AA','letters':'\\uA732'},\n            {'base':'AE','letters':'\\u00C6\\u01FC\\u01E2'},\n            {'base':'AO','letters':'\\uA734'},\n            {'base':'AU','letters':'\\uA736'},\n            {'base':'AV','letters':'\\uA738\\uA73A'},\n            {'base':'AY','letters':'\\uA73C'},\n            {'base':'B', 'letters':'\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181'},\n            {'base':'C', 'letters':'\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E'},\n            {'base':'D', 'letters':'\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779\\u00D0'},\n            {'base':'DZ','letters':'\\u01F1\\u01C4'},\n            {'base':'Dz','letters':'\\u01F2\\u01C5'},\n            {'base':'E', 'letters':'\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E'},\n            {'base':'F', 'letters':'\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B'},\n            {'base':'G', 'letters':'\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E'},\n            {'base':'H', 'letters':'\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D'},\n            {'base':'I', 'letters':'\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197'},\n            {'base':'J', 'letters':'\\u004A\\u24BF\\uFF2A\\u0134\\u0248'},\n            {'base':'K', 'letters':'\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2'},\n            {'base':'L', 'letters':'\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780'},\n            {'base':'LJ','letters':'\\u01C7'},\n            {'base':'Lj','letters':'\\u01C8'},\n            {'base':'M', 'letters':'\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C'},\n            {'base':'N', 'letters':'\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4'},\n            {'base':'NJ','letters':'\\u01CA'},\n            {'base':'Nj','letters':'\\u01CB'},\n            {'base':'O', 'letters':'\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C'},\n            {'base':'OI','letters':'\\u01A2'},\n            {'base':'OO','letters':'\\uA74E'},\n            {'base':'OU','letters':'\\u0222'},\n            {'base':'OE','letters':'\\u008C\\u0152'},\n            {'base':'oe','letters':'\\u009C\\u0153'},\n            {'base':'P', 'letters':'\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754'},\n            {'base':'Q', 'letters':'\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A'},\n            {'base':'R', 'letters':'\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782'},\n            {'base':'S', 'letters':'\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784'},\n            {'base':'T', 'letters':'\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786'},\n            {'base':'TZ','letters':'\\uA728'},\n            {'base':'U', 'letters':'\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244'},\n            {'base':'V', 'letters':'\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245'},\n            {'base':'VY','letters':'\\uA760'},\n            {'base':'W', 'letters':'\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72'},\n            {'base':'X', 'letters':'\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C'},\n            {'base':'Y', 'letters':'\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE'},\n            {'base':'Z', 'letters':'\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762'},\n            {'base':'a', 'letters':'\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250'},\n            {'base':'aa','letters':'\\uA733'},\n            {'base':'ae','letters':'\\u00E6\\u01FD\\u01E3'},\n            {'base':'ao','letters':'\\uA735'},\n            {'base':'au','letters':'\\uA737'},\n            {'base':'av','letters':'\\uA739\\uA73B'},\n            {'base':'ay','letters':'\\uA73D'},\n            {'base':'b', 'letters':'\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253'},\n            {'base':'c', 'letters':'\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184'},\n            {'base':'d', 'letters':'\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A'},\n            {'base':'dz','letters':'\\u01F3\\u01C6'},\n            {'base':'e', 'letters':'\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD'},\n            {'base':'f', 'letters':'\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C'},\n            {'base':'g', 'letters':'\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F'},\n            {'base':'h', 'letters':'\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265'},\n            {'base':'hv','letters':'\\u0195'},\n            {'base':'i', 'letters':'\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131'},\n            {'base':'j', 'letters':'\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249'},\n            {'base':'k', 'letters':'\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3'},\n            {'base':'l', 'letters':'\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747'},\n            {'base':'lj','letters':'\\u01C9'},\n            {'base':'m', 'letters':'\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F'},\n            {'base':'n', 'letters':'\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5'},\n            {'base':'nj','letters':'\\u01CC'},\n            {'base':'o', 'letters':'\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275'},\n            {'base':'oi','letters':'\\u01A3'},\n            {'base':'ou','letters':'\\u0223'},\n            {'base':'oo','letters':'\\uA74F'},\n            {'base':'p','letters':'\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755'},\n            {'base':'q','letters':'\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759'},\n            {'base':'r','letters':'\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783'},\n            {'base':'s','letters':'\\u0073\\u24E2\\uFF53\\u00DF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B'},\n            {'base':'t','letters':'\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787'},\n            {'base':'tz','letters':'\\uA729'},\n            {'base':'u','letters': '\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289'},\n            {'base':'v','letters':'\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C'},\n            {'base':'vy','letters':'\\uA761'},\n            {'base':'w','letters':'\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73'},\n            {'base':'x','letters':'\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D'},\n            {'base':'y','letters':'\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF'},\n            {'base':'z','letters':'\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763'}\n        ];\n        \n        this.diacriticsMap = {};\n        for (var i=0; i < defaultDiacriticsRemovalMap .length; i++){\n            var letters = defaultDiacriticsRemovalMap [i].letters;\n            for (var j=0; j < letters.length ; j++){\n                this.diacriticsMap[letters[j]] = defaultDiacriticsRemovalMap [i].base;\n            }\n        }\n    },\n    \n    // \"what?\" version ... http://jsperf.com/diacritics/12\n    removeDiacritics: function(str) {\n        return str.replace(/[^\\u0000-\\u007E]/g, function(a){\n            return this.diacriticsMap[a] || a; \n        }.bind(this));\n    }\n\n});","Ext.define(\"Voyant.notebook.util.Show\", {\n\ttransferable: ['show'],\n\t\n    /**\n\t * Shows a one-line summary of this object. For example, for a corpus:\n\t * \n\t * \tnew Corpus(\"Hello World!\").show(true);\n\t * \n\t * @param {boolean} [withID] Includes the corpus ID in parentheses at the end, if true.\n\t */\n\tshow: function(len) { // this is for instances\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tshow.call(this, this.getString ? this.getString(len) : this.toString(), !this.getString && Ext.isNumber(len) ? len : undefined);\n\t\t}\n\t},\n\tstatics: {\n\t\tshow: function(contents, len) {\n\t\t\tvar arg = contents;\n\t\t\tif (this.then) {\n\t\t\t\tthis.then(function(val) {\n\t\t\t\t\tshow.call(val, val, arg);\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tif (Ext.isArray(contents)) {\n\t\t\t\t\tvar allContents = \"\";\n\t\t\t\t\tcontents.forEach(function(content) {\n\t\t\t\t\t\tallContents += content.getString ? content.getString() : content.toString();\n\t\t\t\t\t});\n\t\t\t\t\tcontents = allContents;\n\t\t\t\t} else if (Ext.isString(this) || this instanceof String) {\n\t\t\t\t\tif (Ext.isNumber(contents)) {len = contents;}\n\t\t\t\t\tcontents = this;\n\t\t\t\t}\n\t\t\t\tif (contents.toHtml) {contents=contents.toHtml()}\n\t\t\t\telse if (contents.getString) {contents=contents.getString()}\n\t\t\t\telse if (contents.toString) {contents=contents.toString()}\n//\t\t\t\tcontents = contents.getString ? contents.getString() : contents.toString();\n\t\t\t\tif (contents.then) {\n\t\t\t\t\tcontents.then(function(text) {show(text, len)})\n\t\t\t\t} else {\n\t\t\t\t\tif (len && Ext.isNumber(len)) {contents = contents.substring(0,len)}\n\t\t\t\t\tif (Voyant.notebook.util.Show.SINGLE_LINE_MODE==false) {contents=\"<div class='\"+Voyant.notebook.util.Show.MODE+\"'>\"+contents+\"</div>\";}\n\t\t\t\t\tVoyant.notebook.util.Show.TARGET.insertHtml('beforeEnd',contents);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tshowError: function(error, more) {\n\t\t\tvar mode = Voyant.notebook.util.Show.MODE;\n\t\t\tVoyant.notebook.util.Show.MODE='error';\n\t\t\t\n\t\t\tif (this instanceof Voyant.util.ResponseError) {\n\t\t\t\terror = this;\n\t\t\t}\n\t\t\tif (error instanceof Voyant.util.ResponseError) {\n\t\t\t\tif (console) {console.error(error.getResponse())}\n\t\t\t\tmore = error.getResponse().responseText\n\t\t\t\terror = error.getMsg();\n\t\t\t}\n\t\t\t\n\t\t\telse {\n\n\t\t\t\tif (error.stack && !more) {more=error.stack}\n\t\t\t\tif (more && Ext.isString(more)===false) {more=more.toString()}\n\t\t\t\t\n\t\t\t}\n\n\t\t\tif (console) {console.error(error)}\n\t\t\tif (more) {\n\t\t\t\tif (console) {console.error(more);}\n\t\t\t\terror=\"<h3>\"+error.toString()+\"</h3><pre>\"+Ext.String.htmlEncode(more)+'</pre>';\n\t\t\t}\n\t\t\tshow(error);\n\t\t\tVoyant.notebook.util.Show.MODE = mode;\n\t\t},\n\t\tTARGET : null,\n\t\tMODE: 'info',\n\t\tSINGLE_LINE_MODE : false\n\t}\n});\n\nString.prototype.show = Voyant.notebook.util.Show.show;\nvar show = Voyant.notebook.util.Show.show;\nvar showError = Voyant.notebook.util.Show.showError;\n","Ext.define(\"Voyant.notebook.util.Embed\", {\n\ttransferable: ['embed'],\n\tembed: function() { // this is for instances\n\t\tembed.apply(this, arguments);\n\t},\n\tconstructor: function(config) {\n\t\tvar me = this;\n\t},\n\tstatics: {\n\t\ti18n: {},\n\t\tapi: {\n\t\t\tembeddedParameters: undefined,\n\t\t\tembeddedConfig: undefined\n\t\t},\n\t\tembed: function(cmp, config) {\n\t\t\tif (this.then) {\n\t\t\t\tthis.then(function(embedded) {\n\t\t\t\t\tembed.call(embedded, cmp, config)\n\t\t\t\t})\n\t\t\t} else if (Ext.isArray(cmp)) {\n\t\t\t\tVoyant.notebook.util.Show.SINGLE_LINE_MODE=true;\n\t\t\t\tshow(\"<table><tr>\");\n\t\t\t\tcmp.forEach(function(embeddable) {\n\t\t\t\t\tshow(\"<td>\");\n\t\t\t\t\tif (Ext.isArray(embeddable)) {\n\t\t\t\t\t\tif (embeddable[0].embeddable) {\n\t\t\t\t\t\t\tembeddable[0].embed.apply(embeddable[0], embeddable.slice(1))\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tembed.apply(this, embeddable)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tembed.apply(this, embeddable);\n\t\t\t\t\t}\n\t\t\t\t\tshow(\"</td>\")\n\t\t\t\t\t\n\t\t\t\t})\n//\t\t\t\tfor (var i=0; i<arguments.length; i++) {\n//\t\t\t\t\tvar unit = arguments[i];\n//\t\t\t\t\tshow(\"<td>\")\n//\t\t\t\t\tunit[0].embed.call(unit[0], unit[1], unit[2]);\n//\t\t\t\t\tshow(\"</td>\")\n//\t\t\t\t}\n\t\t\t\tshow(\"</tr></table>\")\n\t\t\t\tVoyant.notebook.util.Show.SINGLE_LINE_MODE=false;\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\t// use the default (first) embeddable panel if no panel is specified\n\t\t\t\tif (this.embeddable && (!cmp || Ext.isObject(cmp))) {\n\t\t\t\t\t// if the first argument is an object, use it as config instead\n\t\t\t\t\tif (Ext.isObject(cmp)) {config = cmp;}\n\t\t\t\t\tcmp = this.embeddable[0];\n\t\t\t\t}\n\t\t\t\tif (Ext.isString(cmp)) {\n\t\t\t\t\tcmp = Ext.ClassManager.getByAlias('widget.'+cmp.toLowerCase()) || Ext.ClassManager.get(cmp);\n\t\t\t\t}\n\t\t\t\tvar isEmbedded = false;\n\t\t\t\tif (Ext.isFunction(cmp)) {\n\t\t\t\t\tvar name = cmp.getName();\n\t\t\t\t\tif (this.embeddable && Ext.Array.each(this.embeddable, function(item) {\n\t\t\t\t\t\t\tif (item==name) {\n\t\t\t\t\t\t\t\tconfig = config || {};\n\t\t\t\t\t\t\t\tvar embeddedParams = {};\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tfor (key in Ext.ClassManager.get(Ext.getClassName(cmp)).api) {\n\t\t\t\t\t\t\t\t\tif (key in config) {\n\t\t\t\t\t\t\t\t\t\tembeddedParams[key] = config[key]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!embeddedParams.corpus) {\n\t\t\t\t\t\t\t\t\tif (Ext.getClassName(this)=='Voyant.data.model.Corpus') {\n\t\t\t\t\t\t\t\t\t\tembeddedParams.corpus = this.getId();\n\t\t\t\t\t\t\t\t\t} else if (this.getCorpus) {\n\t\t\t\t\t\t\t\t\t\tvar corpus = this.getCorpus();\n\t\t\t\t\t\t\t\t\t\tif (corpus) {\n\t\t\t\t\t\t\t\t\t\t\tembeddedParams.corpus = this.getCorpus().getId();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tExt.applyIf(config, {\n\t\t\t\t\t\t\t\t\tstyle: 'width: '+(config.width || '90%') + (Ext.isNumber(config.width) ? 'px' : '')+\n\t\t\t\t\t\t\t\t\t\t'; height: '+(config.height  || '400px') + (Ext.isNumber(config.height) ? 'px' : '')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tdelete config.width;\n\t\t\t\t\t\t\t\tdelete config.height;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tvar corpus = embeddedParams.corpus;\n\t\t\t\t\t\t\t\tdelete embeddedParams.corpus;\n\t\t\t\t\t\t\t\t\n\t\t    \t    \t    \tExt.applyIf(embeddedParams, Voyant.application.getModifiedApiParams());\n\t\t\t\t\t\t\t\t\n\t\t    \t    \t    \t\n\t\t\t\t\t\t\t\tvar embeddedConfigParamEncodded = Ext.encode(embeddedParams);\n\t\t\t\t\t\t\t\tvar embeddedConfigParam = encodeURIComponent(embeddedConfigParamEncodded);\n\n\t\t\t\t\t\t\t\tvar iframeId = Ext.id();\n\t\t\t\t\t\t\t\tvar url = Voyant.application.getBaseUrlFull()+\"tool/\"+name.substring(name.lastIndexOf(\".\")+1)+'/?';\n\t\t\t\t\t\t\t\tif (true || embeddedConfigParam.length>1800) {\n\t\t\t\t\t\t\t\t\tshow('<iframe style=\"'+config.style+'\" id=\"'+iframeId+'\" name=\"'+iframeId+'\"></iframe>');\n\t\t\t\t\t\t\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\t\t\t    \t    \tExt.Ajax.request({\n\t\t\t\t\t    \t    \t    url: Voyant.application.getTromboneUrl(),\n\t\t\t\t\t    \t    \t    params: {\n\t\t\t\t\t    \t        \t\ttool: 'resource.StoredResource',\n\t\t\t\t\t    \t        \t\tstoreResource: embeddedConfigParam\n\t\t\t\t\t    \t    \t    }\n\t\t\t\t\t    \t    \t}).then(function(response) {\n\t\t\t\t    \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n\t\t\t\t    \t    \t    \tvar params = {\n\t\t\t\t    \t    \t    \t\tminimal: true,\n\t\t\t\t    \t    \t    \t\tembeddedApiId: json.storedResource.id\n\t\t\t\t    \t    \t    \t}\n\t\t\t\t    \t    \t    \tif (corpus) {\n\t\t\t\t    \t    \t    \t\tparams.corpus = corpus;\n\t\t\t\t    \t    \t    \t}\n\t\t\t\t    \t    \t    \tExt.applyIf(params, Voyant.application.getModifiedApiParams());\n\t\t\t\t    \t    \t    \tdocument.getElementById(iframeId).setAttribute(\"src\",url+Ext.Object.toQueryString(params));\n\t\t\t\t\t\t\t\t\t\tdfd.resolve();\n\t\t\t\t\t    \t    \t}).otherwise(function(response) {\n\t\t\t\t\t    \t    \t\tshowError(response);\n\t\t\t\t\t    \t    \t\tdfd.reject();\n\t\t\t\t\t    \t    \t})\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tshow('<iframe src=\"'+url+embeddedConfigParam+'\" style=\"'+config.style+'\" id=\"'+iframeId+'\" name=\"'+iframeId+'\"></iframe>');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tisEmbedded = true;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this)===true) {\n\t\t\t\t\t\tVoyant.notebook.util.Embed.showWidgetNotRecognized.call(this);\n\t\t\t\t\t}\n\t\t\t\t\tif (!isEmbedded) {\n\t\t\t\t\t\tvar embedded = Ext.create(cmp, config);\n\t\t\t\t\t\tembedded.embed(config);\n\t\t\t\t\t\tisEmbedded = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!isEmbedded) {\n\t\t\t\t\t\n\t\t\t\t\tVoyant.notebook.util.Embed.showWidgetNotRecognized.call(this);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tshowWidgetNotRecognized: function() {\n\t\t\tvar msg = Voyant.notebook.util.Embed.i18n.widgetNotRecognized;\n\t\t\tif (this.embeddable) {\n\t\t\t\tmsg += Voyant.notebook.util.Embed.i18n.tryWidget+'<ul>'+this.embeddable.map(function(cmp) {\n\t\t\t\t\tvar widget = cmp.substring(cmp.lastIndexOf(\".\")+1).toLowerCase()\n\t\t\t\t\treturn \"\\\"<a href='../../docs/#!/guide/\"+widget+\"' target='voyantdocs'>\"+widget+\"</a>\\\"\"\n\t\t\t\t}).join(\", \")+\"</ul>\"\n\t\t\t}\n\t\t\tshowError(msg)\n\t\t}\n\n\t}\n})\n\nembed = Voyant.notebook.util.Embed.embed","Ext.define('Voyant.data.model.AnalysisToken', {\n    extend: 'Ext.data.Model',\n    idProperty: 'term',\n    fields: [\n         {name: 'term'},\n         {name: 'rawFreq', type: 'int'},\n         {name: 'relativeFreq', type: 'number'},\n         {name: 'cluster', type: 'int'},\n         {name: 'clusterCenter', type: 'boolean'},\n         {name: 'vector'}\n    ]\n});","Ext.define('Voyant.data.model.Context', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'id'},\n             {name: 'docIndex', 'type': 'int'},\n             {name: 'position', 'type': 'int'},\n             {name: 'docId'},\n             {name: 'left'},\n             {name: 'keyword'},\n             {name: 'term'},\n             {name: 'right'}\n        ],\n\n        getDocIndex: function() {return this.get(\"docIndex\")},\n        getLeft: function() {return this.get(\"left\")},\n        getMiddle: function() {return this.get(\"middle\")},\n        getHighlightedMiddle: function() {return \"<span class='keyword'>\"+this.getMiddle()+\"</span>\"},\n        getRight: function() {return this.get(\"right\")},\n        getPosition: function() {return this.get(\"position\")},\n        getHighlightedContext: function() {return this.getLeft()+this.getHighlightedMiddle()+this.getRight();}\n\t\n});","Ext.define('Voyant.data.model.CorpusFacet', {\n    extend: 'Ext.data.Model',\n    idProperty: 'label',\n    fields: [\n             {name: 'facet'},\n             {name: 'label'},\n             {name: 'inDocumentsCount', type: 'int'}\n    ],\n    getLabel: function() {\n    \treturn this.get('label')\n    },\n    getFacet: function() {\n    \treturn this.get('facet')\n    },\n\tgetInDocumentsCount: function() {\n\t\treturn this.get('inDocumentsCount')\n\t}\n});","Ext.define('Voyant.data.model.CorpusCollocate', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'term'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'contextTerm'},\n             {name: 'contextTermRawFreq', type: 'int'}\n    ],\n    \n    getTerm: function() {return this.getKeyword()},\n    getRawFreq: function() {return this.getKeywordRawFreq()},\n    getKeyword: function() {return this.get('term');},\n    getKeywordRawFreq: function() {return this.get('rawFreq');},\n    getContextTerm: function() {return this.get('contextTerm');},\n    getContextTermRawFreq: function() {return this.get('contextTermRawFreq');}\n});","/*\n * Corpus Term\n */\nExt.define('Voyant.data.model.CorpusTerm', {\n    extend: 'Ext.data.Model',\n    idProperty: 'term', // should be unique\n    fields: [\n             {name: 'id'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'inDocumentsCount', type: 'int'},\n             {name: 'relativeFreq', type: 'float'},\n             {name: 'relativePeakedness', type: 'float'},\n             {name: 'relativeSkewness', type: 'float'},\n             {name: 'comparisonRelativeFreqDifference', type: 'float'},\n             {name: 'distributions'},\n             {name: 'typeTokenRatio-lexical', type: 'float', calculate:  function(data) {\n        \t \treturn data['typesCount-lexical']/data['tokensCount-lexical'];\n             }}\n    ],\n    \n    /**\n     * Get the term.\n     * @returns {String} Returns the term.\n     */\n    getTerm: function() {\n    \treturn this.get('term');\n    },\n    \n    /**\n     * Get the term's raw frequency.\n     * @returns {Number} Returns the term's frequency.\n     */\n\tgetRawFreq: function() {\n\t\treturn parseInt(this.get('rawFreq'));\n\t},\n\t\n\tgetInDocumentsCount: function() {\n\t\treturn parseInt(this.get('inDocumentsCount'));\n\t},\n\t\n\tgetDistributions: function() {\n\t\treturn this.get('distributions');\n\t},\n\t\n\t/**\n\t * Show a one line summary of this term.\n\t */\n\tshow: function(config) {\n\t\tshow(this.getString(config))\n\t},\n\t\n\tgetString: function() {\n\t\treturn this.getTerm()+\": \"+this.getRawFreq();\n\t}\n});","Ext.define('Voyant.data.model.CorpusNgram', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'term'},\n             {name: 'length', type: 'int'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'distributions'}\n        ],\n    getTerm: function() {return this.get('term');}\n});","Ext.define('Voyant.data.model.Dimension', {\n    extend: 'Ext.data.Model',\n    fields: [\n        {name: 'percentage', type: 'number'}\n    ]\n});","Ext.define('Voyant.data.model.Document', {\n    extend: 'Ext.data.Model',\n    //requires: ['Voyant.data.store.DocumentTerms'],\n    fields: [\n             {name: 'corpus'},\n             {name: 'id'},\n             {name: 'pubDate'},\n             {name: 'publisher'},\n             {name: 'pubPlace'},\n             {name: 'keyword'},\n             {name: 'collection'},\n             {name: 'index', type: 'int'},\n             {name: 'tokensCount-lexical', type: 'int'},\n             {name: 'typesCount-lexical', type: 'int'},\n             {name: 'typeTokenRatio-lexical', type: 'float', calculate:  function(data) {\n        \t \treturn data['typesCount-lexical']/data['tokensCount-lexical'];\n             }},\n             {name: 'lastTokenStartOffset-lexical', type: 'int'},\n             {name: 'title'},\n             {name: 'language', convert: function(data) {return Ext.isEmpty(data) ? '' : data;}},\n             {name: 'sentencesCount', type: 'int'},\n             {name: 'averageWordsPerSentence', type: 'float', calculate:  function(data) {\n        \t \treturn data['sentencesCount'] ? data['tokensCount-lexical'] / data['sentencesCount'] : 0;\n\t\t\t }},\n\t\t\t {name: 'css', type: 'string'}\n    ],\n    \n    getLexicalTokensCount: function() {\n    \treturn this.get('tokensCount-lexical')\n    },\n    \n    getLexicalTypeTokenRatio: function() {\n    \treturn this.get('typeTokenRatio-lexical')\n    },\n    \n    loadDocumentTerms: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\tconfig = config || {};\n\t\t\tif (Ext.isNumber(config)) {\n\t\t\t\tconfig = {limit: config};\n\t\t\t}\n\t\t\tExt.applyIf(config, {\n\t\t\t\tlimit: 0\n\t\t\t})\n\t\t\tvar documentTerms = this.getDocumentTerms();\n\t\t\tdocumentTerms.load({\n\t\t\t\tparams: config,\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tdfd.resolve(documentTerms)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdfd.reject(operation)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t}\n    \t\n    },\n    \n    loadTokens: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\tconfig = config || {};\n\t\t\tif (Ext.isNumber(config)) {\n\t\t\t\tconfig = {limit: config};\n\t\t\t}\n\t\t\tExt.applyIf(config, {\n\t\t\t\tlimit: 0\n\t\t\t})\n\t\t\tvar tokens = this.getTokens({});\n\t\t\ttokens.load({\n\t\t\t\tparams: config,\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tdfd.resolve(tokens)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdfd.reject(operation)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t}\n    \t\n    },\n    \n    getTokens: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t    \tconfig = config || {};\n\t    \tExt.applyIf(config, {\n\t    \t\tproxy: {}\n\t    \t});\n\t    \tExt.applyIf(config.proxy, {\n\t    \t\textraParams: {}\n\t    \t})\n\t    \tExt.applyIf(config.proxy.extraParams, {\n\t    \t\tdocIndex: this.get('index')\n\t    \t})\n\t    \tExt.apply(config, {\n\t    \t\tdocId: this.get('id')\n\t    \t});\n\t    \treturn this.get('corpus').getTokens(config);\n\t\t}\n    },\n\n    getDocumentTerms: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t    \tconfig = config || {};\n\t    \tExt.applyIf(config, {\n\t    \t\tproxy: {}\n\t    \t});\n\t    \tExt.applyIf(config.proxy, {\n\t    \t\textraParams: {}\n\t    \t})\n\t    \tExt.applyIf(config.proxy.extraParams, {\n\t    \t\tdocIndex: this.get('index')\n\t    \t})\n\t    \tif (config.corpus) {\n\t    \t\treturn config.corpus.getDocumentTerms(config);\n\t    \t}\n\t    \treturn this.get('corpus').getDocumentTerms(config); // FIXME: when does this happen?\n\t\t}\n    },\n    \n    getIndex: function() {\n    \treturn this.get('index');\n    },\n    \n    getId: function() {\n    \treturn this.get('id');\n    },\n    \n    getFullLabel: function() {\n    \tvar author = this.getAuthor();\n    \treturn this.getTitle() + (author ? \"(\"+author+\")\" : ''); // TODO: complete full label\n    },\n    \n    getTitle: function() {\n    \tvar title = this.get('title');\n    \tif (title === undefined) title = '';\n    \ttitle = Ext.isArray(title) ? title.join(\"; \") : title;\n    \ttitle = title.trim().replace(/\\s+/g, ' '); // remove excess whitespace\n    \treturn title;\n    },\n    \n    getTruncated: function(string, max) {\n  \t\tif (string.length > max) {\n\t\t\t\t// maybe a file or URL?\n\t\t\t\tvar slash = string.lastIndexOf(\"/\");\n\t\t\t\tif (slash>-1) {\n\t\t\t\t\tstring = string.substr(slash+1);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (string.length>max) {\n\t\t\t\t\tvar space = string.indexOf(\" \", max-5);\n\t\t\t\t\tif (space < 0 || space > max) {\n\t\t\t\t\t\tspace = max;\n\t\t\t\t\t}\n\t\t\t\t\tstring = string.substring(0, space) + \"\u2026\";\n\t\t\t\t}\n\t\t}\n  \t\treturn string;\n    \t\n    },\n    \n    getShortTitle: function() {\n     \tvar title = this.getTitle();\n     \ttitle = title.replace(/\\.(html?|txt|xml|docx?|pdf|rtf|\\/)$/,'');\n     \ttitle = title.replace(/^(the|a|le|l'|un|une)\\s/,'');\n     \treturn this.getTruncated(title, 25);\n    },\n    \n    getTinyTitle: function() {\n    \treturn this.getTruncated(this.getShortTitle(), 10);\n    },\n    \n    getShortLabel: function() {\n    \tvar author = this.getAuthor(25);\n    \treturn (parseInt(this.getIndex())+1) + ') <i>' + this.getShortTitle() + \"</i>\" +(author ? \" (\"+author+\")\" : '')\n    },\n    \n    getTinyLabel: function() {\n    \treturn (parseInt(this.getIndex())+1) + ') ' + this.getTinyTitle();\n    },\n    \n    getPubDate: function() {\n    \treturn this.get(\"pubDate\");\n    },\n    \n    getPublisher: function() {\n    \treturn this.get(\"publisher\");\n    },\n    \n    getPubPlace: function() {\n    \treturn this.get(\"pubPlace\");\n    },\n    \n    getKeyword: function() {\n    \treturn this.getMultiple(\"keyword\");\n    },\n    \n    getCollection: function() {\n    \treturn this.getMultiple(\"collection\");\n    },\n    \n    getAuthor: function(max) {\n    \tthis.getMultiple(\"author\")\n    },\n    \n    getMultiple: function(field, max) {\n    \tvar val = this.get(field) || \"\";\n    \tval = Ext.isArray(val) ? val.join(\"; \") : val;\n    \tval = val.trim().replace(/\\s+/g, ' ');\n    \treturn max ? this.getTruncated(author, max) : val;\n    },\n    \n    getCorpusId: function() {\n    \treturn this.get('corpus').getAliasOrId();\n    },\n    \n    isPlainText: function() {\n    \tif (this.get(\"extra.Content-Type\") && new RegExp(\"plain\",\"i\").test(this.get(\"extra.Content-Type\"))) {\n    \t\treturn true\n    \t}\n    \treturn false;\n    },\n    \n    getAverageWordsPerSentence: function() {\n    \treturn this.get(\"averageWordsPerSentence\");\n    },\n    \n    show: function() {\n    \tshow(this.getFullLabel())\n    },\n    \n    getCorpus: function() {\n    \treturn this.get('corpus');\n    },\n    \n    \n    getText: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t    \tconfig = config || {};\n\t    \tExt.apply(config, {\n        \t\ttool: 'corpus.DocumentTokens',\n        \t\tcorpus: this.getCorpusId()\n\t    \t})\n\t    \tthis.getTokens(config).then(function(tokens) {\n\t    \t\tdfd.resolve(tokens);\n\t    \t});\n\t    \treturn dfd.promise\n\t\t}\n    },\n    \n    getPlainText: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t    \tconfig = config || {};\n\t    \tExt.apply(config, {\n    \t\t\toutputFormat: \"text\",\n    \t\t\ttemplate: \"docTokens2text\",\n    \t\t\tnoOthers: true\n\t    \t});\n\t\t\treturn this.getText();\n\t\t}\n    \t\n    },\n    \n    getLemmasArray: function(config) {\n    \tconfig = config || {};\n    \tconfig.docId = this.getId();\n\t\treturn this.getCorpus().getLemmasArray(config);\n//\t\tif (this.then) {\n//\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n//\t\t} else {\n//\t    \tconfig = config || {};\n//\t    \tExt.apply(config, {\n//    \t\t\tdocId: this.getId()\n//\t    \t});\n//\t\t\treturn this.getCorpus().getLemmasArray(config);\n//\t\t}\n    },\n    \n    getEntities: function(config) {\n    \tconfig = config || {};\n    \tExt.applyIf(config, {\n    \t\tproxy: {}\n    \t});\n    \tExt.applyIf(config.proxy, {\n    \t\textraParams: {}\n    \t})\n    \tExt.applyIf(config.proxy.extraParams, {\n    \t\tdocIndex: this.get('index')\n    \t})\n\t\treturn Ext.create(\"Voyant.data.store.DocumentEntities\", Ext.apply(config, {corpus: this.getCorpus(), docId: this.getId()}));\n    },\n    \n    loadEntities: function(config) {\n\t\tvar me = this;\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\tthis.getEntities().load({\n\t\t\t\tparams: config,\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tdfd.resolve(records)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdfd.reject(operation.error.response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t}\n\t},\n\t\n\tgetCSS: function() {\n\t\treturn this.get('css') || this.get('parent_css');\n\t}\n    \n});","Ext.define('Voyant.data.model.DocumentEntity', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'term'},\n             {name: 'docIndex', 'type': 'int'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'type'},\n             {name: 'positions'}\n        ],\n    getTerm: function() {return this.get('term');},\n    getDocIndex: function() {return this.get('docIndex')},\n    getRawFreq: function() {return this.get('rawFreq')},\n    getPositions: function() {return this.get('positions')}\n});","Ext.define('Voyant.data.model.DocumentQueryMatch', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'id'},\n             {name: 'count', 'type': 'int'},\n             {name: 'query'},\n             {name: 'distributions'}\n        ],\n    getCount: function() {return this.get('count')},\n    getDistributions: function() {return this.get(\"distributions\")},\n    getDocIds: function() {return this.get(\"docIds\")}\n});","Ext.define('Voyant.data.model.DocumentTerm', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'id'},\n             {name: 'term'},\n             {name: 'docIndex', 'type': 'int'},\n             {name: 'docId'},\n             {name: 'rawFreq', type: 'int'},\n             {name: 'relativeFreq', type: 'float'},\n             {name: 'tfidf', type: 'float'},\n             {name: 'zscore', type: 'float'},\n             {name: 'zscoreRatio', type: 'float'},\n             {name: 'distributions'}\n        ],\n    getTerm: function() {return this.get('term');},\n    getDocIndex: function() {return this.get('docIndex')},\n    getRawFreq: function() {return this.get('rawFreq')},\n    getRelativeFreq: function() {return this.get('relativeFreq')},\n    getDistributions: function() {return this.get('distributions')}\n});","Ext.define('Voyant.data.model.PrincipalComponent', {\n    extend: 'Ext.data.Model',\n    fields: [\n        {name: 'eigenValue', type: 'number'},\n        {name: 'eigenVectors'}\n    ]\n});","/*\n * Related Term\n */\nExt.define('Voyant.data.model.RelatedTerm', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'source'},\n             {name: 'target'},\n             {name: 'rawFreq', type: 'int'}\n    ],\n    \n    /**\n     * Get the source term.\n     * @returns {String} Returns the term.\n     */\n    getSource: function() {\n    \treturn this.get('source');\n    },\n    \n    /**\n     * Get the source term.\n     * @returns {String} Returns the term.\n     */\n    getTarget: function() {\n    \treturn this.get('target');\n    },\n    \n\t/**\n\t * Show a one line summary of this term.\n\t */\n\tshow: function(config) {\n\t\tshow(this.getString(config))\n\t},\n\t\n\tgetString: function() {\n\t\treturn this.getSource()+\"-\"+this.getTarget();\n\t}\n});","Ext.define('Voyant.data.model.StatisticalAnalysis', {\n    extend: 'Ext.data.Model',\n    requires: ['Voyant.data.model.PrincipalComponent', 'Voyant.data.model.Dimension', 'Voyant.data.model.AnalysisToken'],\n    fields: [\n         {name: 'id'}\n//         ,{name: 'dimensions', reference: 'Voyant.data.model.Dimension'}\n//         ,{name: 'tokens', reference: 'Voyant.data.model.AnalysisToken'}\n    ]\n    \n\t// alternative access methods to \"reference\" or \"hasMany\"\n\t,getPrincipalComponents: function() {\n\t\tvar pcs = [];\n\t\tthis.data.principalComponents.forEach(function(pc) {\n\t\t\tpcs.push(Ext.create('Voyant.data.model.PrincipalComponent', pc));\n\t\t});\n\t\treturn pcs;\n\t}\n\t,getDimensions: function() {\n\t\tvar dimensions = [];\n\t\tthis.data.dimensions.forEach(function(dim) {\n\t\t\tdimensions.push(Ext.create('Voyant.data.model.Dimension', {percentage: dim}));\n\t\t});\n\t\treturn dimensions;\n\t}\n\t,getTokens: function() {\n\t\tvar tokens = [];\n\t\tthis.data.tokens.forEach(function(tok) {\n\t\t\ttokens.push(Ext.create('Voyant.data.model.AnalysisToken', tok));\n\t\t});\n\t\treturn tokens;\n\t}\n\n\n//    ,hasMany: [{\n//    \tname: 'dimensions', model: 'Voyant.data.model.Dimension'\n//    },{\n//    \tname: 'tokens', model: 'Voyant.data.model.AnalysisToken'\n//    }]\n});","Ext.define('Voyant.data.model.Token', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'id'},\n             {name: 'docId'},\n             {name: 'docIndex', type: 'int'},\n             {name: 'token'},\n             {name: 'rawFreq'},\n             {name: 'tokenType'},\n             {name: 'position', type: 'int'},\n             {name: 'startOffset', type: 'int'},\n             {name: 'endOffset', type: 'int'}\n        ],\n    statics: {\n    \tgetInfoFromElement: function(arg) {\n    \t\tif (arg && arg.getId) {\n    \t\t\tvar parts = arg.getId().split(\"_\");\n    \t\t\treturn {\n    \t\t\t\tdocIndex: parseInt(parts[1]),\n    \t\t\t\tposition: parseInt(parts[2])\n    \t\t\t};\n    \t\t}\n    \t}\n    },\n\tisWord: function() {\n\t\treturn this.getTokenType()=='lexical'; // maybe something else later?\n\t},\n\tisStopword: function() {\n\t\treturn this.get(\"stopword\")==\"true\";\n\t},\n\tgetTokenType: function() {\n\t\treturn this.get(\"tokenType\");\n\t},\n\tgetId: function() {\n\t\treturn [\"\",this.getDocIndex(),this.getPosition()].join(\"_\");\n\t},\n\tgetDocIndex: function() {\n\t\treturn this.get(\"docIndex\");\n\t},\n\tgetDocId: function() {\n\t\treturn this.get(\"docId\");\n\t},\n\tgetTerm: function() {\n\t\treturn this.get(\"term\");\n\t},\n\tgetTermWithLineSpacing: function(isPlainText) {\n\t\tvar term = this.getTerm().replace(/<\\/?\\w+\\b.*?>/g, \"<br /><br />\").replace(/>\\s+</g,\"><\").replace(/<br \\/><br \\/>(<br \\/>)+/g,\"<br \\/><br \\/>\");\n\t\tif (isPlainText) {term = term.replace(/(\\r\\n|\\r|\\n)\\s*/g,\"<br />\");};\n\t\treturn term;\n\t},\n\tgetPosition: function() {\n\t\treturn this.get(\"position\");\n\t},\n\tgetDocumentRawFreq: function() {\n\t\treturn this.get(\"rawFreq\");\n\t}\n});","/*\n * Related Term\n */\nExt.define('Voyant.data.model.TermCorrelation', {\n    extend: 'Ext.data.Model',\n    fields: [\n             {name: 'source'},\n             {name: 'target'},\n             {name: 'correlation', type: 'float'},\n             {name: 'significance', type: 'float'},\n             {name: 'source-term', calculate: function(data) {return data.source.term}},\n             {name: 'target-term', calculate: function(data) {return data.target.term}},\n             {name: 'source-distributions', calculate: function(data) {return data.source.distributions}},\n             {name: 'target-distributions', calculate: function(data) {return data.target.distributions}}\n    ],\n    \n    /**\n     * Get the source term.\n     * @returns {String} Returns the term.\n     */\n    getSource: function() {\n    \treturn this.get('source');\n    },\n    \n    /**\n     * Get the source term.\n     * @returns {String} Returns the term.\n     */\n    getTarget: function() {\n    \treturn this.get('target');\n    },\n    \n\t/**\n\t * Show a one line summary of this term.\n\t */\n\tshow: function(config) {\n\t\tshow(this.getString(config))\n\t},\n\t\n\tgetString: function() {\n\t\treturn this.getSource()+\"-\"+this.getTarget();\n\t}\n});","Ext.define('Voyant.data.store.VoyantStore', {\r\n\tmixins: ['Voyant.util.Localization','Voyant.notebook.util.Embed'],\r\n\tconfig: {\r\n\t\tcorpus: undefined,\r\n\t\tparentPanel: undefined\r\n\t},\r\n\tconstructor: function(config, extras) {\r\n\t\tvar me = this;\r\n\t\tconfig = config || {};\r\n\t\tExt.applyIf(config, {\r\n\t\t\tremoteSort: true,\r\n\t\t\tautoLoad: false,\r\n//\t\t\tlisteners: {\r\n//\t\t\t\tbeforeload: function(store, operation) {\r\n//\t\t\t\t\tvar parent = this.getParentPanel();\r\n//\t\t\t\t\tif (parent !== undefined) {\r\n//\t\t\t\t\t\tvar params = parent.getApiParams();\r\n//\t\t\t\t\t\toperation = operation ? (operation===1 ? {} : operation) : {};\r\n//\t\t\t\t\t\toperation.params = operation.params || {};\r\n//\t\t\t\t\t\tfor (var key in params) {\r\n//\t\t\t\t\t\t\toperation.params[key] = params[key];\r\n//\t\t\t\t\t\t}\r\n//\t\t\t\t\t}\r\n//\t\t\t\t}\r\n//\t\t\t},\r\n//\t\t\tscope: this,\r\n\t\t\t// define buffered configuration even if ignored when this isn't a buffered store\r\n\t\t\tpagePurgeCount : 0, // don't purge any data\r\n\t\t\tpageSize : 100, // each request is more intenstive, so do fewer of them then default\r\n\t\t\tleadingBufferZone : 200 // stay two pages ahead\r\n\t\t});\r\n\t\tconfig.proxy = config.proxy || {};\r\n\t\tExt.applyIf(config.proxy, {\r\n\t\t\ttype: 'ajax',\r\n\t\t\turl: Voyant.application.getTromboneUrl(),\r\n\t\t\tactionMethods: {read: 'POST'},\r\n\t\t\treader: {\r\n\t\t\t\ttype: 'json',\r\n\t\t\t\trootProperty: extras['proxy.reader.rootProperty'],\r\n\t\t\t\ttotalProperty: extras['proxy.reader.totalProperty'],\r\n\t\t\t\tmetaProperty: extras['proxy.reader.metaProperty'] || 'metaData'\r\n\t\t\t},\r\n\t\t\tsimpleSortMode: true,\r\n\t\t\tlisteners: {\r\n\t\t\t\texception: function(proxy, request, operation) {\r\n\t\t\t\t\tif (me.parentPanel && me.parentPanel.showError) {\r\n\t\t\t\t\t\t// FIXME: this should probably send the request, not the operation\r\n\t\t\t\t\t\tme.parentPanel.showError(operation)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\tconfig.proxy.extraParams = config.proxy.extraParams || {};\r\n\t\tExt.applyIf(config.proxy.extraParams, {\r\n\t\t\ttool: extras['proxy.extraParams.tool']\r\n\t\t});\r\n\t\t\r\n\t\tif (config.parentPanel !== undefined) {\r\n\t\t\tExt.applyIf(config.proxy.extraParams, {\r\n\t\t\t\tforTool: config.parentPanel.xtype\r\n\t\t\t});\r\n\t\t\tthis.setParentPanel(config.parentPanel);\r\n\t\t\tconfig.parentPanel.on(\"loadedCorpus\", function(src, corpus) {\r\n\t\t\t\tthis.setCorpus(corpus);\r\n\t\t\t}, this);\r\n\t\t\tconfig.listeners = config.listeners || {};\r\n\t\t\tconfig.listeners.beforeload = {\r\n\t\t\t\t\tfn: function(store, operation) {\r\n\t\t\t\t\t\tvar parent = this.getParentPanel(), proxy = store.getProxy();\r\n\t\t\t\t\t\tif (parent !== undefined) {\r\n\r\n\t\t\t\t\t\t\tvar params = parent.getApiParams();\r\n\t\t\t\t\t\t\toperation = operation ? (operation===1 ? {} : operation) : {};\r\n\t\t\t\t\t\t\toperation.params = operation.params || {};\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// unset any previously set extra params (only applies with proxy and buffered store)\r\n\t\t\t\t\t\t\tif (proxy && this.isBufferedStore) {\r\n\t\t\t\t\t\t\t\tExt.Array.from(this.previouslySetExtraParams).forEach(function(key) {\r\n\t\t\t\t\t\t\t\t\tproxy.setExtraParam(key, undefined);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthis.previouslySetExtraParams = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor (var key in params) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t/* TODO NOT SURE ABOUT THIS\r\n\t\t\t\t\t\t\t\t// don't sent stopList when there's a query\r\n\t\t\t\t\t\t\t\tif (key==\"stopList\" && \"query\" in params && params.query) {continue;}\r\n\t\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (proxy && this.isBufferedStore) { // also set proxy for automatic buffering calls\r\n\t\t\t\t\t\t\t\t\tthis.previouslySetExtraParams.push(key);\r\n\t\t\t\t\t\t\t\t\tproxy.setExtraParam(key, params[key]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\toperation.params[key] = params[key];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tExt.apply(this, config);\r\n\t},\r\n\tsetCorpus: function(corpus) {\r\n\t\tif (corpus && this.getProxy && this.getProxy()) {\r\n\t\t\tthis.getProxy().setExtraParam('corpus', Ext.isString(corpus) ? corpus : corpus.getId());\r\n\t\t}\r\n\t\tthis.callParent(arguments);\r\n\t},\r\n\tgetString: function(config) {\r\n\t\tvar count = this.getCount();\r\n\t\treturn \"This store contains \"+this.getCount()+\" items\"+(count>0 ? \" with these fields: \"+this.getAt(0).getFields().map(function(field) {return field.getName()}).join(\", \") : \"\")+\".\"\r\n\t},\r\n\t\r\n\tembed: function(cmp, config) {\r\n\t\tif (!config && Ext.isObject(cmp)) {\r\n\t\t\tconfig = cmp;\r\n\t\t\tcmp = this.embeddable[0];\r\n\t\t}\r\n\t\tconfig = config || {};\r\n\t\t\r\n\t\tvar data = [];\r\n\t\tthis.each(function(record) {\r\n\t\t\tdata.push(record.data);\r\n\t\t}, this);\r\n\t\t\r\n\t\tExt.apply(config, {\r\n\t\t\tstoreJson: JSON.stringify({\r\n\t\t\t\tstoreClass: Ext.getClassName(this),\r\n\t\t\t\tstoreData: data\r\n\t\t\t})\r\n\t\t});\r\n\t\t\r\n\t\tembed.call(this, cmp, config);\r\n\t}\r\n\t\r\n});","Ext.define('Voyant.data.store.CAAnalysisMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n\tembeddable: ['Voyant.panel.ScatterPlot'],\n    model: 'Voyant.data.model.StatisticalAnalysis',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CA',\n\t\t\t'proxy.reader.rootProperty': 'correspondenceAnalysis',\n\t\t\t'proxy.reader.totalProperty': 'correspondenceAnalysis.totalTerms'\n\t\t}])\n\t\tconfig.proxy.extraParams.withDistributions = true;\n\t}\n});\n\nExt.define('Voyant.data.store.CAAnalysis', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CAAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CAAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.CAAnalysisBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CAAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CAAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.ContextsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.Context',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentContexts',\n\t\t\t'proxy.reader.rootProperty': 'documentContexts.contexts',\n\t\t\t'proxy.reader.totalProperty': 'documentContexts.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.Contexts', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.ContextsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.ContextsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.ContextsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.ContextsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.ContextsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.CorpusCollocatesMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.CorpusCollocate',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusCollocates',\n\t\t\t'proxy.reader.rootProperty': 'corpusCollocates.collocates',\n\t\t\t'proxy.reader.totalProperty': 'corpusCollocates.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusCollocates', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CorpusCollocatesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusCollocatesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusCollocatesBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CorpusCollocatesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusCollocatesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.CorpusFacetsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: Voyant.data.model.CorpusFacet,\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusFacets',\n\t\t\t'proxy.reader.rootProperty': 'corpusFacets.facets',\n\t\t\t'proxy.reader.totalProperty': 'corpusFacets.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusFacets', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CorpusFacetsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusFacetsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusFacetsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CorpusFacetsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusFacetsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.CorpusTermsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: Voyant.data.model.CorpusTerm,\n//    statics: {\n//    \ti18n: {\n//    \t\tgetString: \"This store has {0} terms with a total of {1} occurrences.\"\n//    \t}\n//    },\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusTerms',\n\t\t\t'proxy.reader.rootProperty': 'corpusTerms.terms',\n\t\t\t'proxy.reader.totalProperty': 'corpusTerms.total'\n\t\t}])\n\t},\n\n\tshow: function(config) {\n\t\tshow(this.getString(config))\n\t}\n\n});\n\n/*\n * Corpus Terms store.\n */\nExt.define('Voyant.data.store.CorpusTerms', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CorpusTermsMixin'],\n    model: Voyant.data.model.CorpusTerm,\n\t\n\t/**\n\t * @method each\n\t * Iterate over each {@link Voyant.data.model.CorpusTerm corpus term} in this store.\n\t * \n\t * \tnew Corpus(\"Hello Voyant!\").loadCorpusTerms().then(function(corpusTerms) {\n\t * \t\tcorpusTerms.each(function(corpusTerm) {\n\t * \t\t\tcorpusTerm.show();\n\t * \t\t});\n\t * \t});\n\t * \n\t * @param {function} function The function to call for each corpus term.\n\t */\n\t\n\t/**\n\t * @method show\n\t * Shows a one line summary of the corpus terms.\n\t * \n\t * \tnew Corpus(\"Hello Voyant!\").loadCorpusTerms().then(function(corpusTerms) {\n\t * \t\tcorpusTerms.show();\n\t * \t});\n\t */\n\t\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n\t\n});\n\nExt.define('Voyant.data.store.CorpusTermsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CorpusTermsMixin'],\n    model: Voyant.data.model.CorpusTerm,\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.DocumentQueryMatchesMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.DocumentQueryMatch',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentsFinder',\n\t\t\t'proxy.reader.rootProperty': 'documentsFinder.queries',\n\t\t\t'proxy.reader.totalProperty': undefined,\n\t\t\t'proxy.reader.metaProperty': 'documentsFinder.corpus'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentQueryMatches', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocumentQueryMatchesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentQueryMatchesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentQueryMatchesBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocumentQueryMatchesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentQueryMatchesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.DocumentTermsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.DocumentTerm',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentTerms',\n\t\t\t'proxy.reader.rootProperty': 'documentTerms.terms',\n\t\t\t'proxy.reader.totalProperty': 'documentTerms.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentTerms', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocumentTermsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentTermsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocumentTermsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.DocumentEntitiesMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.DocumentEntity',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentEntities',\n\t\t\t'proxy.reader.rootProperty': 'documentEntities.entities',\n\t\t\t'proxy.reader.totalProperty': 'documentEntities.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentEntities', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocumentEntitiesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentEntitiesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentEntitiesBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocumentEntitiesMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentEntitiesMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.DocumentsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.Document',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n\tsorters: {\n        property: 'index',\n        direction: 'ASC'\n\t},\n\tremoteSort: true,\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentsMetadata',\n\t\t\t'proxy.reader.rootProperty': 'documentsMetadata.documents',\n\t\t\t'proxy.reader.totalProperty': 'documentsMetadata.total'\n\t\t}])\n\t},\n\tlisteners: {\n\t\t load: function(store, records, successful, opts) {\n\t\t\t if (successful) {\n\t\t\t\t var corpus = store.getCorpus();\n\t\t\t\t records.forEach(function(record) {\n\t\t\t\t\t record.set('corpus', corpus);\n\t\t\t\t });\n\t\t\t }\n\t\t }\n\t},\n\tgetDocument: function(config) {\n\t\treturn Ext.isNumber(config) ? this.getAt(config) : this.getById(config);\n\t}\n\t\n});\n\nExt.define('Voyant.data.store.Documents', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocumentsMixin'],\n    model: 'Voyant.data.model.Document',\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocumentsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocumentsMixin'],\n    model: 'Voyant.data.model.Document',\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocumentsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.PCAAnalysisMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n\tembeddable: ['Voyant.panel.ScatterPlot'],\n    model: 'Voyant.data.model.StatisticalAnalysis',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.PCA',\n\t\t\t'proxy.reader.rootProperty': 'pcaAnalysis',\n\t\t\t'proxy.reader.totalProperty': 'pcaAnalysis.totalTerms'\n\t\t}])\n\t\tconfig.proxy.extraParams.withDistributions = true;\n\t}\n});\n\nExt.define('Voyant.data.store.PCAAnalysis', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.PCAAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.PCAAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.PCAAnalysisBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.PCAAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.PCAAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.DocSimAnalysisMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.StatisticalAnalysis',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentSimilarity',\n\t\t\t'proxy.reader.rootProperty': 'documentSimilarity',\n\t\t\t'proxy.reader.totalProperty': 'documentSimilarity.total'\n\t\t}])\n\t\tconfig.proxy.extraParams.withDistributions = true;\n\t}\n});\n\nExt.define('Voyant.data.store.DocSimAnalysis', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.DocSimAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocSimAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.DocSimAnalysisBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.DocSimAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.DocSimAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.CorpusNgramsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.CorpusNgram',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusNgrams',\n\t\t\t'proxy.reader.rootProperty': 'corpusNgrams.ngrams',\n\t\t\t'proxy.reader.totalProperty': 'corpusNgrams.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusNgrams', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.CorpusNgramsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusNgramsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.CorpusNgramsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.CorpusNgramsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.CorpusNgramsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n","Ext.define('Voyant.data.store.RelatedTermsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.RelatedTerm',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.SemanticGraph',\n\t\t\t'proxy.reader.rootProperty': 'semanticGraph.edges',\n\t\t\t'proxy.reader.totalProperty': 'semanticGraph.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.RelatedTerms', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.RelatedTermsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.RelatedTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.RelatedTermsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.RelatedTermsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.RelatedTermsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.TermCorrelationsMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.TermCorrelation',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.CorpusTermCorrelations',\n\t\t\t'proxy.extraParams.withDistributions': 'true',\n\t\t\t'proxy.reader.rootProperty': 'termCorrelations.correlations',\n\t\t\t'proxy.reader.totalProperty': 'termCorrelations.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.TermCorrelations', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.TermCorrelationsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TermCorrelationsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.TermCorrelationsBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.TermCorrelationsMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TermCorrelationsMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.TokensMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n    model: 'Voyant.data.model.Token',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.DocumentTokens',\n\t\t\t'proxy.reader.rootProperty': 'documentTokens.tokens',\n\t\t\t'proxy.reader.totalProperty': 'documentTokens.total'\n\t\t}])\n\t}\n});\n\nExt.define('Voyant.data.store.Tokens', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.TokensMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TokensMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.TokensBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.TokensMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TokensMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","Ext.define('Voyant.data.store.TSNEAnalysisMixin', {\n\tmixins: ['Voyant.data.store.VoyantStore'],\n\tembeddable: ['Voyant.panel.ScatterPlot'],\n    model: 'Voyant.data.model.StatisticalAnalysis',\n\tconstructor : function(config) {\n\t\tthis.mixins['Voyant.data.store.VoyantStore'].constructor.apply(this, [config, {\n\t\t\t'proxy.extraParams.tool': 'corpus.TSNE',\n\t\t\t'proxy.reader.rootProperty': 'tsneAnalysis',\n\t\t\t'proxy.reader.totalProperty': 'tsneAnalysis.totalTerms'\n\t\t}])\n\t\tconfig.proxy.extraParams.withDistributions = true;\n\t\tconfig.proxy.extraParams.noCache = 1;\n\t}\n});\n\nExt.define('Voyant.data.store.TSNEAnalysis', {\n\textend: 'Ext.data.Store',\n\tmixins: ['Voyant.data.store.TSNEAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TSNEAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});\n\nExt.define('Voyant.data.store.TSNEAnalysisBuffered', {\n\textend: 'Ext.data.BufferedStore',\n\tmixins: ['Voyant.data.store.TSNEAnalysisMixin'],\n\tconstructor : function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.data.store.TSNEAnalysisMixin'].constructor.apply(this, [config])\n\t\tthis.callParent([config]);\n\t}\n});","/*\n * @class VoyantTable\n * A VoyantTable can facilitate working with tabular data structures, as well as\n * displaying results (especially with {@link #embed} and {@link show}). \n * Here's a simple example showing the Zipf-Law distribution of the top 20 frequency terms.\n * \n * \tnew Corpus(\"austen\").loadCorpusTerms(20).then(function(corpusTerms) {\n * \t\tvar table = new VoyantTable({rowKey: 0}); // use first column as row key\n * \t\tcorpusTerms.each(function(corpusTerm) {\n *\t\t\ttable.addRow([corpusTerm.getTerm(), corpusTerm.getRawFreq()]);\n * \t\t});\n * \t\ttable.embed(\"voyantchart\"); // graph table as line chart\n * \t});\n */\nExt.define('Voyant.data.table.Table', {\n\talternateClassName: [\"VoyantTable\"],\n\tmixins: ['Voyant.notebook.util.Embed','Voyant.notebook.util.Show'],\n\tembeddable: ['Voyant.widget.VoyantTableTransform','Voyant.widget.VoyantChart','Voyant.widget.CodeEditor'],\n\tconfig: {\n\t\t\n\t\t/**\n\t\t * @private\n\t\t */\n\t\trows: [],\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\theaders: [],\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\trowsMap: {},\n\t\t\n\t\t/**\n\t\t * @private\n\t\t */\n\t\theadersMap: {},\n\t\t\n\t\t/**\n\t\t * Specifies that a specific header should serve as row key.\n\t\t * \n\t\t */\n\t\trowKey: undefined,\n\t\t\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tmodel: undefined\n\t},\n\t\n\tclone: function() {\n\t\tvar table = new VoyantTable();\n\t\ttable.setRows(Ext.clone(this.getRows()));\n\t\ttable.setHeaders(Ext.clone(this.getHeaders()))\n\t\ttable.setRowsMap(Ext.clone(this.getRowsMap()))\n\t\ttable.setHeadersMap(Ext.clone(this.getHeadersMap()))\n\t\ttable.setRowKey(Ext.clone(this.getRowKey()))\n\t\treturn table;\n\t},\n\n\tconstructor: function(config, opts) {\n\n\t\tconfig = config || {};\n\t\tif (config.fromBlock) {\n\t\t\tvar data = Voyant.notebook.Notebook.getDataFromBlock(config.fromBlock);\n\t\t\tif (data) {\n\t\t\t\tdata = data.trim();\n\t\t\t\tconfig.rows = [];\n\t\t\t\tdata.split(/\\n+/).forEach(function(line,i) {\n\t\t\t\t\tvar cells = line.split(\"\\t\");\n\t\t\t\t\tif (i==0 && !config.noHeaders) {\n\t\t\t\t\t\tconfig.headers = cells\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig.rows.push(cells)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t} else if (config.count && Ext.isArray(config.count)) {\n\t\t\t// create counts\n\t\t\tvar freqs = {};\n\t\t\tconfig.count.forEach(function(item) {freqs[item] = freqs[item] ? freqs[item]+1 : 1;});\n\t\t\t// sort counts\n\t\t\tvar counts = [];\n\t\t\tfor (var key in freqs) {counts.push([key, freqs[key]])}\n\t\t\tcounts.sort(function(a,b) {return b[1] - a[1]});\n\t\t\tif (config.limit && counts.length>config.limit) {\n\t\t\t\tcounts.splice(config.limit);\n\t\t\t}\n\t\t\tif (config.orientation && config.orientation==\"horizontal\") {\n\t\t\t\tconfig.headers = counts.map(function(item) {return item[0]});\n\t\t\t\tconfig.rows = [counts.map(function(item) {return item[1]})];\n\t\t\t} else {\n\t\t\t\tconfig.headers = config.headers ? config.headers : [\"Item\",\"Count\"];\n\t\t\t\tconfig.rows = counts;\n\t\t\t}\n\t\t} else if (config.isStore || config.store) {\n\t\t\tvar store = config.store ? config.store : config;\n\t\t\tif (opts && opts.headers) {\n\t\t\t\tconfig.headers = opts.headers;\n\t\t\t} else {\n\t\t\t\t// store.getModel() doesn't seem to work (for CorpusTerms at least)\n\t\t\t\t// so instead we'll try looking at the first record to get headers\n\t\t\t\tvar record = store.getAt(0);\n\t\t\t\tif (record) { // don't know what to do if this fails?\n\t\t\t\t\tconfig.headers = record.getFields().map(function(field) {return field.getName()});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// now we get rows\n\t\t\tconfig.rows = [];\n\t\t\tstore.each(function(record) {\n\t\t\t\tvar data = record.getData();\n\t\t\t\tvar cells = config.headers.map(function(header) {return data[header]}); // only from headers\n\t\t\t\tconfig.rows.push(cells);\n\t\t\t}, this);\n\t\t}\n\n\t\t// not sure why config isn't working\n\t\tif (!config.rows && Ext.isArray(config)) {\n\t\t\tconfig.rows = config;\n\t\t}\n\t\tif (!this.getHeaders()) {\n\t\t\tif (!config.headers && !config.noHeaders && config.rows) {\n\t\t\t\tthis.setHeaders(config.rows.shift())\n\t\t\t} else {\n\t\t\t\tthis.setHeaders(Ext.Array.from(config.headers));\n\t\t\t}\n\t\t}\n\t\tthis.setRows(Ext.Array.from(config.rows));\n\t\tthis.setRowKey(config.rowKey ? config.rowKey : this.getHeaders()[0]);\n\n\t\t// if we have no headers, use the index as header\n\t\tif (this.getHeaders().length==0) {\n\t\t\tvar firstRow = this.getRow(0, false);\n\t\t\tif (firstRow) {\n\t\t\t\tthis.setHeaders(firstRow.map(function(cell, i) {return i}));\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar headersMap = {};\n\t\tthis.getHeaders().forEach(function(header, i) {\n\t\t\theadersMap[header] = i;\n\t\t});\n\t\tthis.setHeadersMap(headersMap);\n\t\t\n\t\tthis.reMapRows();\n\t\t\n\t\tthis.callParent();\n\t},\n\taddRow: function(row) {\n\t\tif (Ext.isArray(row))\n\t\tif (Ext.isObject(row)) {\n\t\t\tvar len = this.getRows().length;\n\t\t\tfor (var key in row) {\n\t\t\t\tthis.updateCell(len, key, row[key])\n\t\t\t}\n\t\t\t\n\t\t} else if (Ext.isArray(row)) {\n\t\t\tthis.getRows().push(row);\n\t\t\tvar header = this.getColumnIndex(this.getRowKey());\n\t\t\tif (header!==undefined && row[header]!==undefined) {\n\t\t\t\tthis.getRowsMap()[row[header]] = this.getRows().length-1;\n\t\t\t}\n\t\t}\n\t},\n\teachRecord: function(fn, scope) {\n\t\tvar item, i=0, len=this.getRows().length;\n\t\tfor (; i<len; i++) {\n            item = this.getRecord(i);\n\t\t\tif (fn.call(scope || item, item, i, len) === false) {\n                break;\n            }\t\t\t\n\t\t}\n\t},\n\teachRow: function(fn, asMap, scope) {\n\t\tvar item, i=0, len=this.getRows().length;\n\t\tfor (; i<len; i++) {\n            item = this.getRow(i, asMap);\n\t\t\tif (fn.call(scope || item, item, i, len) === false) {\n                break;\n            }\t\t\t\n\t\t}\n\t},\n\tgetRow: function(index, asMap) {\n\t\tvar r = this.getRowIndex(index);\n\t\tif (asMap) {\n\t\t\tvar row = {};\n\t\t\tvar headers = this.getHeaders();\n\t\t\tExt.Array.from(this.getRows()[r]).forEach(function(item, i) {\n\t\t\t\trow[headers[i] || i] = item;\n\t\t\t}, this);\n\t\t\treturn row;\n\t\t} else {\n\t\t\treturn this.getRows()[r];\n\t\t}\n\t},\n\tgetRecord: function(index) {\n\t\tif (this.model) {return new this.model(this.getRow(index, true))}\n\t},\n\tmapRows: function(fn, asMap, scope) {\n\t\tvar rows = [];\n\t\tthis.eachRow(function(row, i) {\n//\t\t\tif (Object.keys(row).length>0) {\n\t\t\t\trows.push(fn.call(scope || this, row, i))\n//\t\t\t}\n\t\t}, asMap, this)\n\t\treturn rows;\n\t},\n\t\n\t/**\n\t * Update the cell value at the specified row and column.\n\t * \n\t * This will create the row and column as needed. If there's an existing value in the cell,\n\t * it will be added to the new value, unless the `replace` argument is set to true.\n\t * \n\t * @param {Number/String} row The cell's row.\n\t * @param {Number/String} column The cell's column.\n\t * @param {Mixed} value The cell's value.\n\t * @param {boolean} [replace] Replace the current value (if it exists), otherwise\n\t * the value is added to any current value (which is the default behaviour).\n\t */\n\tupdateCell: function(row, column, value, replace) {\n\t\tvar rows = this.getRows();\n\t\tvar r = Ext.isNumber(row) ? row : this.getRowIndex(row);\n\t\tvar c = this.getColumnIndex(column);\n\t\tif (rows[r]===undefined) {rows[r]=[]}\n\t\tif (rows[r][c]===undefined || replace) {rows[r][c]=value}\n\t\telse {rows[r][c]+=value}\n\t\t// add to rowsMap if this is the header\n\t\tif (this.getHeaders()[c]===this.getRowKey()) {\n\t\t\tthis.getRowsMap()[column] = r;\n\t\t}\n\t},\n\t\n\tgetRowIndex: function(key) {\n\t\tif (Ext.isNumber(key)) {return key;}\n\t\tif (Ext.isString(key)) {\n\t\t\tvar rowsMap = this.getRowsMap();\n\t\t\tif (!(key in rowsMap)) {\n\t\t\t\trowsMap[key] = this.getRows().length;\n\t\t\t\tthis.getRows().push(new Array(this.getHeaders().length))\n\t\t\t}\n\t\t\treturn rowsMap[key];\n\t\t}\n\t},\n\t\n\tgetColumnIndex: function(column) {\n\t\tvar headers = this.getHeaders();\n\t\tif (Ext.isNumber(column)) {\n\t\t\tif (headers[column]===undefined) {\n\t\t\t\theaders[column]=column;\n\t\t\t\tthis.getRows().forEach(function(row) {\n\t\t\t\t\trow.splice(column, 0, undefined);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn column;\n\t\t} else if (Ext.isString(column)) {\n\t\t\tif (!(column in this.getHeadersMap())) {\n\t\t\t\t// we don't have this column yet, so create it and expand rows\n\t\t\t\tthis.getHeaders().push(column);\n\t\t\t\tthis.getHeadersMap()[column] = this.getHeaders().length-1\n\t\t\t\tthis.getRows().forEach(function(row) {\n\t\t\t\t\trow.push(undefined)\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this.getHeadersMap()[column]\n\t\t}\n\t},\n\t\n\tgetColumnHeader: function(column) {\n\t\tvar c = this.getColumnIndex(column);\n\t\treturn this.getHeaders()[c];\n\t},\n\t\n\t/**\n\t * Compute the sum of the values in the column.\n\t * \n\t * @param {Number/String} column The column index (as a number) or key (as a string).\n\t */\n\tgetColumnSum: function(column) {\n\t\treturn Ext.Array.sum(this.getColumnValues(column, true));\n\t},\n\t\n\t/**\n\t * Compute the sum of the values in the column.\n\t * \n\t * @param {Number/String} column The column index (as a number) or key (as a string).\n\t */\n\tgetColumnMean: function(column) {\n\t\treturn Ext.Array.mean(this.getColumnValues(column, true));\n\t},\n\t\n\t/**\n\t * Get the largest value in the array.\n\t * \n\t * @param {Number/String} column The column index (as a number) or key (as a string).\n\t */\n\tgetColumnMax: function(column) {\n\t\treturn Ext.Array.max(this.getColumnValues(column, true));\n\t},\n\t\n\t/**\n\t * Get the smallest value in the array.\n\t * \n\t * @param {Number/String} column The column index (as a number) or key (as a string).\n\t */\n\tgetColumnMin: function(column) {\n\t\treturn Ext.Array.min(this.getColumnValues(column, true));\n\t},\n\t\n\tgetColumnValues: function(column, clean) {\n\t\tvar c = this.getColumnIndex(column), vals = [];\n\t\tthis.eachRow(function(row) {\n\t\t\tvals.push(row[c]);\n\t\t});\n\t\tif (clean) {return Ext.Array.clean(vals)}\n\t\telse {return vals;}\n\t},\n\t\n\t/**\n\t * @private\n\t */\n\treMapRows: function() {\n\t\tvar rowKey = this.getRowKey();\n\t\tvar rowsMap = {}\n\t\tthis.eachRow(function(row, i) {\n\t\t\tif (rowKey in row) {\n\t\t\t\trowsMap[row[rowKey]] = i;\n\t\t\t}\n\t\t}, true);\n\t\tthis.setRowsMap(rowsMap)\n\t},\n\t\n\tsortByColumn: function(columns) {\n\t\tvar rows = this.getRows(),\n\t\t\tsortColumnsIndices = Ext.Array.from(columns).map(function(column) {\n\t\t\t\tif (Ext.isObject(column)) {\n\t\t\t\t\tfor (key in column) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tindex: this.getColumnIndex(key),\n\t\t\t\t\t\t\tdirection: column[key].indexOf(\"asc\")>-1 ? 'asc' : 'desc'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tindex: this.getColumnIndex(column),\n\t\t\t\t\t\tdirection: \"desc\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\t\trows.sort(function(a, b) {\n\t\t\tfor (var i=0, len=sortColumnsIndices.length; i<len; i++) {\n\t\t\t\tvar header = sortColumnsIndices[i].index\n\t\t\t\tif (a[header]!=b[header]) {\n\t\t\t\t\tif (sortColumnsIndices[i].direction=='asc') {return a[header] > b[header] ? 1 : -1}\n\t\t\t\t\telse {return a[header] > b[header] ? -1 : 1}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.reMapRows();\n\t\treturn this;\n\t},\n\t\n\tloadCorrespondenceAnalysis: function(config) {\n\t\treturn this._doAnalysisLoad('table.CA', 'Voyant.data.store.CAAnalysis', config);\n\t},\n\t\n\tloadPrincipalComponentAnalysis: function(config) {\n\t\treturn this._doAnalysisLoad('table.PCA', 'Voyant.data.store.PCAAnalysis', config);\n\t},\n\t\n\tloadTSNEAnalysis: function(config) {\n\t\treturn this._doAnalysisLoad('table.TSNE', 'Voyant.data.store.TSNEAnalysis', config);\t\t\n\t},\n\t\n\t_doAnalysisLoad: function(tool, storeType, config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t    \tconfig = config || {};\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\tExt.apply(config, {\n\t\t        columnHeaders: true,\n\t\t        rowHeaders: true,\n\t\t        tool: tool,\n\t\t        analysisInput: this.toTsv(),\n\t\t        inputFormat: 'tsv'\n\t\t\t});\n\t\t\tvar store = Ext.create(storeType, {noCorpus: true});\n\t\t\tstore.load({\n\t\t\t\tparams: config,\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tdfd.resolve(store, records)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdfd.reject(operation.error.response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t}\n\t},\n\t\n\tembed: function(cmp, config) {\n\t\tif (!config && Ext.isObject(cmp)) {\n\t\t\tconfig = cmp;\n\t\t\tcmp = this.embeddable[0];\n\t\t}\n\t\tconfig = config || {};\n\t\t\n\t\tvar columnHeaders = Ext.Array.from(config.headers || this.getHeaders()).map(function(header) {return this.getColumnHeader(header);}, this);\n\t\t\n\t\tvar json = {\n\t\t\t\trowkey: this.getRowKey(),\n\t\t\t\tconfig: config,\n\t\t\t\theaders: columnHeaders\n\t\t};\n\t\tif (\"headers\" in config) {\n\t\t\tvar columnIndices = Ext.Array.from(config.headers).map(function(header) {return this.getColumnIndex(header);}, this);\n\t\t\tvar rows = [];\n\t\t\tthis.getRows().forEach(function(row) {\n\t\t\t\trows.push(columnIndices.map(function(i) {\n\t\t\t\t\treturn row[i]\n\t\t\t\t}))\n\t\t\t})\n\t\t\tExt.apply(json, {\n\t\t\t\trows: rows\n\t\t\t})\n\t\t} else {\n\t\t\tExt.apply(json, {\n\t\t\t\trows: this.getRows()\n\t\t\t})\n\t\t}\n\t\tExt.apply(config, {\n\t\t\ttableJson: JSON.stringify(json)\n\t\t});\n\t\tdelete config.axes;\n\t\tdelete config.series;\n\t\t\n\t\tembed.call(this, cmp, config);\n\t\t\n\t},\n\t\n\ttoTsv: function(config) {\n\t\tvar tsv = this.getHeaders().join(\"\\t\");\n\t\tthis.getRows().forEach(function(row, i) {\n\t\t\tif (config && Ext.isNumber(config) && i>config) {return;}\n\t\t\ttsv += \"\\n\"+row.map(function(cell) {\n\t\t\t\treturn Ext.isString(cell) ? cell.replace(/(\\n|\\t)/g, \"\") : cell;\n\t\t\t}).join(\"\\t\");\n\t\t})\n\t\treturn tsv;\n\t},\n\t\n\tgetString: function(config) {\n\t\tconfig = config || {};\n\t\tvar table = \"<table class='voyant-table' style='\"+(config.width ? ' width: '+config.width : '')+\"' id='\"+(config.id ? config.id : Ext.id())+\"'>\";\n\t\tvar headers = this.getHeaders();\n\t\tif (headers.length) {\n\t\t\ttable+=\"<thead><tr>\";\n\t\t\tfor (var i=0, len = headers.length; i<len; i++) {\n\t\t\t\ttable+=\"<th>\"+headers[i]+\"</th>\";\n\t\t\t}\n\t\t\ttable+=\"</tr></thead>\";\n\t\t}\n\t\ttable+=\"<tbody>\";\n\t\tfor (var i=0, len = Ext.isNumber(config) ? config : this.getRows().length; i<len; i++) {\n\t\t\tvar row = this.getRow(i);\n\t\t\tif (row && Ext.isArray(row)) {\n\t\t\t\ttable+=\"<tr>\";\n\t\t\t\trow.forEach(function(cell) {\n\t\t\t\t\ttable+=\"<td>\"+cell+\"</td>\";\n\t\t\t\t})\n\t\t\t\ttable+=\"</tr>\";\n\t\t\t}\n\t\t}\n\t\ttable+=\"</tbody></table>\";\n\t\treturn table;\n\t}\n});","/*\n * @class NetworkGraph\n * \n * A NetworkGraph can facilitate working with network graph data structures, as well as\n * displaying results (especially with {@link #embed} and {@link show}). \n * Here's a simple example showing the Zipf-Law distribution of the top 20 frequency terms.\n * \n * \tnew Corpus(\"austen\").loadCorpusTerms(20).then(function(corpusTerms) {\n * \t\tvar table = new VoyantTable({rowKey: 0}); // use first column as row key\n * \t\tcorpusTerms.each(function(corpusTerm) {\n *\t\t\ttable.addRow([corpusTerm.getTerm(), corpusTerm.getRawFreq()]);\n * \t\t});\n * \t\ttable.embed(\"voyantchart\"); // graph table as line chart\n * \t});\n */\nExt.define('Voyant.data.util.NetworkGraph', {\n\talternateClassName: [\"NetworkGraph\"],\n\tmixins: ['Voyant.notebook.util.Embed','Voyant.notebook.util.Show'],\n\tembeddable: [\"Voyant.widget.VoyantNetworkGraph\"],\n\tconfig: {\n\t\t\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tedges: [],\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tnodes: []\n\n\t},\n\n\tconstructor: function(config, opts) {\n\t\tconfig = config || {};\n\t\tthis.setEdges(Ext.Array.from(config.edges));\n\t\tthis.setNodes(Ext.Array.from(config.nodes));\n\t\tthis.callParent([config]);\n\t},\n\taddEdge: function(src, target, value) {\n\t\tthis.getEdges().push(Ext.isObject(src) ? src : {source: src, target: target, value: value});\n\t},\n\tgetNode: function(term) {\n\t\treturn Ext.Array.binarySearch(this.getNodes(), term, undefined, undefined, function(lhs, rhs) {\n\t\t\treturn (lhs.term < rhs.term) ? -1 : ((lhs.term > rhs.term) ? 1 : 0);\n\t\t})\n\t},\n\tembed: function(cmp, config) {\n\t\tif (!config && Ext.isObject(cmp)) {\n\t\t\tconfig = cmp;\n\t\t\tcmp = this.embeddable[0];\n\t\t}\n\t\tconfig = config || {};\n\t\tvar json = {\n\t\t\t\tedges: this.getEdges(),\n\t\t\t\tnodes: this.getNodes(),\n\t\t\t\tconfig: config\n\t\t};\n\t\tif (config.limit && json.edges.length>config.limit) {\n\t\t\tjson.edges = json.edges.slice(0, config.limit);\n\t\t\tvar terms = {};\n\t\t\tjson.edges.forEach(function(edge) {\n\t\t\t\tterms[\"_\"+edge.source] = true;\n\t\t\t\tterms[\"_\"+edge.target] = true;\n\t\t\t})\n\t\t\tvar nodes = [];\n\t\t\tjson.nodes.forEach(function(node) {\n\t\t\t\tif (\"_\"+node.term in terms) {\n\t\t\t\t\tnodes.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\tjson.nodes = nodes;\n\t\t}\n\t\tExt.apply(config, {\n\t\t\tjsonData: JSON.stringify(json)\n\t\t})\n\t\tembed.call(this, cmp, config);\n\t},\n\t\n\tgetString: function(config) {\n\t\tconfig = config || {};\n\t\treturn this.getEdges().map(function(edge) {edge.source+\"-\"+edge.target}).join(\"; \");\n\t}\n});","Ext.define('Voyant.data.util.Geonames', {\n    mixins: ['Voyant.util.Localization'],\n    statics: {\n    \t\ti18n: {\n    \t\t}\n    },\n\n\tconfig: {\n\t\tdata: {},\n\t\tqueries: undefined,\n\t\tcorpus: undefined,\n\t\tisIncrementalLoadingOccurrences: false,\n\t\tpreviousParams: {}\n\t},\n\tconstructor: function(config, opts) {\n\t\tconfig = config || {};\n\t\tthis.callParent([config]);\n\t\tthis.setCorpus(config.corpus);\n\t},\n\tload: function(params, dfd) {\n\t\tthis.setPreviousParams(params);\n\t\tdfd = dfd || Voyant.application.getDeferred(this);\n\t\tvar me = this, localParams = {\n\t\t\tcorpus: this.getCorpus().getAliasOrId(),\n\t\t\tqueries: this.getQueries(),\n\t\t\ttool: 'corpus.Dreamscape',\n\t\t\tlimit: 200\n\t\t};\n\t\tExt.apply(localParams, params || {});\n\t\t\n\t\tif (!params.noOverwrite) {\n\t\t\tme.setData({});\n\t\t}\n\n\t\tExt.Ajax.request({\n\t\t\turl: Voyant.application.getTromboneUrl(),\n\t\t\tparams: localParams,\n\t\t\tscope: this\n\t\t}).then(function(response) {\n\t\t\tvar data = Ext.JSON.decode(response.responseText);\n\t\t\tif (data && data.dreamscape && data.dreamscape.progress) {\n\t\t\t\tnew Voyant.widget.ProgressMonitor({\n\t\t\t\t\tprogress: data.dreamscape.progress,\n\t\t\t\t\tmaxMillisSinceStart: 1000*60*60, // an hour (!)\n\t\t\t\t\ttool: 'corpus.Dreamscape',\n\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\tme.load.call(me, params, dfd);\n\t\t\t\t\t},\n\t\t\t\t\tfailure: function(responseOrProgress) {\n\t\t\t\t\t\tVoyant.application.showResponseError(me.localize(\"failedToFetchGeonames\"), responseOrProgress);\n\t\t\t\t\t},\n\t\t\t\t\tscope: me\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (data && data.dreamscape && !data.dreamscape.progress) {\n\t\t\t\tif (!params.noOverwrite) {\n\t\t\t\t\tme.setData(data.dreamscape);\n\t\t\t\t}\n\t\t\t\tdfd.resolve(data);\n\t\t\t}\n\t\t}, function(response) {\n\t\t\tVoyant.application.showResponseError(me.localize('failedToFetchGeonames'), response);\n\t\t});\n\t\treturn dfd.promise;\n\t},\n\tgetCitiesCount: function() {\n\t\treturn Object.keys(this.getData().locations.locations).length;\n\t},\n\tgetTotalCitiesCount: function() {\n\t\treturn this.getData().locations.total;\n\t},\n\thasMoreCities: function() {\n\t\treturn this.getCitiesCount()<this.getTotalCitiesCount();\n\t},\n\teachCity: function(fn, scope, max) {\n\t\tvar locations = this.getData().locations.locations, orderedLocations = [];\n\t\tfor (var id in locations) { // create a sortable list with id\n\t\t\torderedLocations.push(Ext.apply(locations[id], {id: id}))\n\t\t}\n\t\torderedLocations.sort(function(c1, c2) { // order by rawFreq (count)\n\t\t\treturn c1.rawFreq == c2.rawFreq ? c1.label - c2.label : c2.rawFreq - c1.rawFreq;\n\t\t});\n\t\tif (max && orderedLocations.length>max) {orderedLocations = orderedLocations.slice(0,max)}\n\t\torderedLocations.forEach(function(location) {fn.call(scope, location);});\n\t},\n\tgetConnectionsCount: function() {\n\t\treturn this.getData().connections.connections.length;\n\t},\n\tgetTotalConnectionsCount: function() {\n\t\treturn this.getData().connections.total;\n\t},\n\teachConnection: function(fn, scope, max) {\n\t\tvar connections = this.getData().connections.connections,\n\t\t\tlocations = this.getData().locations.locations;\n\t\t\torderedConnections = [];\n\t\tfor (var i=0, len=connections.length; i<len; i++) {\n\t\t\tfn.call(scope, {\n\t\t\t\tsource: Ext.apply({id: connections[i].source}, locations[connections[i].source]),\n\t\t\t\ttarget: Ext.apply({id: connections[i].target}, locations[connections[i].target]),\n\t\t\t\trawFreq: connections[i].rawFreq\n\t\t\t});\n\t\t\tif (i>max) {break;}\n\t\t}\n\t},\n\tgetConnectionOccurrence: function(index) {\n\t\tif (!this.getData().locations) {return undefined;}\n\t\tvar connectionOccurrencesData = this.getData().connectionOccurrences,\n\t\t\tconnectionOccurrences = connectionOccurrencesData.connectionOccurrences;\n\t\t\tlocations = this.getData().locations.locations;\n\t\tif (!this.getIsIncrementalLoadingOccurrences() && connectionOccurrences.length<connectionOccurrencesData.total && index+100>connectionOccurrences.length) {\n\t\t\tthis.setIsIncrementalLoadingOccurrences(true);\n\t\t\tvar me = this;\n\t\t\tvar params = {};\n\t\t\tExt.apply(params, this.getPreviousParams);\n\t\t\tExt.apply(params, {\n\t\t\t\tstart: connectionOccurrences.length,\n\t\t\t\tnoOverwrite: true,\n\t\t\t\tsuppressLocations: true,\n\t\t\t\tsuppressConnections: true\n\t\t\t});\n\t\t\tthis.load(params).then(function(data) {\n\t\t\t\tme.setIsIncrementalLoadingOccurrences(false);\n\t\t\t\tme.getData().connectionOccurrences.connectionOccurrences = connectionOccurrences.concat(data.dreamscape.connectionOccurrences.connectionOccurrences);\n\t\t\t})\n\t\t}\n\t\tif (connectionOccurrences && connectionOccurrences[index]) {\n\t\t\tvar occurrence = connectionOccurrences[index];\n\t\t\toccurrence.index = index;\n\t\t\tExt.apply(occurrence.source, locations[occurrence.source.location]);\n\t\t\tExt.apply(occurrence.target, locations[occurrence.target.location]);\n\t\t\treturn occurrence;\n\t\t}\n\t\treturn null;\n\t},\n    getAllConnectionOccurrences: function(sourceId, targetId) {\n    \tdebugger\n        // TODO return all occurences of connection with given source and target, including those not loaded yet\n        var occurences = [];\n        for (var i = 0; i < this.getTotalConnectionsCount(); i++) {\n            var occurence = this.getConnectionOccurrence(i);\n            if (occurence && occurence.target.id == targetId && occurence.source.id == sourceId) {\n                occurences.push(occurence);\n            }\n        }\n        return occurences\n    }\n});","/*\n * @class Corpus\n * Corpus is possibly the most important class since in most cases you'll first create/load a corpus and then\n * interact with data derived from the corpus. In the simplest scenario you can create/load a corpus with a\n * corpus ID, a text string, a URL, or an array of text strings or URLs (see the {@link #constructor} and \n * {@link #input} config for a bit more information).\n * \n * \tnew Corpus(\"austen\"); // load an existing corpus\n * \n * \tnew Corpus(\"Hello Voyant!\"); // load a corpus with the specified text string\n * \n * \tnew Corpus(\"http://hermeneuti.ca/\"); // load a corpus with a URL\n * \n * It's important to understand that the constructor actually returns a promise for a corpus, since the corpus\n * data is loaded asynchronously. All documented methods below handle the promise properly.\n * \n * \tnew Corpus(\"Hello Voyant!\").show(); // the show method is called when the promise is filled\n * \n * You can also handle the promise yourself using {@link Ext.promise.Promise#then then}.\n * \n * \tnew Corpus(\"Hello Voyant!\").then(function(corpus) {\n * \t\tcorpus.show(); // essentially the same as above (but more work:)\n * \t});\n * \n * There are many parameters that can be specified when creating a corpus:\n * \n * - **sources**: {@link #corpus}, {@link #input}\n * - **formats**:\n * \t- **Text**: {@link #inputRemoveFrom}, {@link #inputRemoveFromAfter}, {@link #inputRemoveUntil}, {@link #inputRemoveUntilAfter}\n * \t- **XML**: {@link #xmlAuthorXpath}, {@link #xmlCollectionXpath}, {@link #xmlContentXpath}, {@link #xmlExtraMetadataXpath}, {@link #xmlKeywordXpath}, {@link #xmlPubPlaceXpath}, {@link #xmlPublisherXpath}, {@link #xmlTitleXpath}\n * \t- **Tables**: {@link #tableAuthor}, {@link #tableContent}, {@link #tableDocuments}, {@link #tableNoHeadersRow}, {@link #tableTitle}\n * - **other**: {@link #inputFormat}, {@link #subTitle}, {@link #title}, {@link #tokenization}\n */\nExt.define('Voyant.data.model.Corpus', {\n\talternateClassName: [\"Corpus\"],\n    mixins: ['Voyant.notebook.util.Embed','Voyant.notebook.util.Show','Voyant.util.Transferable','Voyant.util.Localization','Voyant.util.Assignable'],\n    transferable: ['loadCorpusTerms','loadTokens','getPlainText','getText','getWords','getString','getLemmasArray'],\n//    transferable: ['getSize','getId','getDocument','getDocuments','getCorpusTerms','getDocumentsCount','getWordTokensCount','getWordTypesCount','getDocumentTerms'],\n    embeddable: ['Voyant.panel.Summary','Voyant.panel.Cirrus','Voyant.panel.Documents','Voyant.panel.CorpusTerms','Voyant.panel.Reader','Voyant.panel.Trends','Voyant.panel.TermsRadio','Voyant.panel.DocumentTerms','Voyant.panel.TermsBerry','Voyant.panel.CollocatesGraph','Voyant.panel.Contexts','Voyant.panel.WordTree','Voyant.panel.Veliza','Voyant.panel.ScatterPlot','Voyant.panel.Topics'],\n\trequires: ['Voyant.util.ResponseError','Voyant.data.store.CorpusTerms','Voyant.data.store.Documents'/*,'Voyant.panel.Documents'*/],\n    extend: 'Ext.data.Model',\n    config: {\n    \t\n    \t/**\n    \t * @cfg {String} corpus The ID of a previously created corpus.\n    \t * \n    \t * A corpus ID can be used to try to retrieve a corpus that has been previously created.\n    \t * Typically the corpus ID is used as a first string argument, with an optional second\n    \t * argument for other parameters (especially those to recreate the corpus if needed).\n    \t * \n    \t * \t\tnew Corpus(\"goldbug\");\n    \t * \n    \t * \t\tnew Corpus(\"goldbug\", {\n    \t *\t\t\t// if corpus ID \"goldbug\" isn't found, use the input\n    \t * \t\t\tinput: \"https://gist.githubusercontent.com/sgsinclair/84c9da05e9e142af30779cc91440e8c1/raw/goldbug.txt\",\n    \t * \t\t\tinputRemoveUntil: 'THE GOLD-BUG',\n    \t * \t\t\tinputRemoveFrom: 'FOUR BEASTS IN ONE'\n    \t * \t\t});\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String/String[]} input Input sources for the corpus.\n    \t * \n    \t * The input sources can be either normal text or URLs (starting with `http`).\n    \t * \n    \t * Typically input sources are specified as a string or an array in the first argument, with an optional second argument for other parameters.\n    \t * \n    \t * \t\tnew Corpus(\"Hello Voyant!\"); // one document with this string\n    \t * \n    \t * \t\tnew Corpus([\"Hello Voyant!\", \"How are you?\"]); // two documents with these strings\n    \t * \n    \t * \t\tnew Corpus(\"http://hermeneuti.ca/\"); // one document from URL\n    \t * \n    \t * \t\tnew Corpus([\"http://hermeneuti.ca/\", \"https://en.wikipedia.org/wiki/Voyant_Tools\"]); // two documents from URLs\n    \t * \n    \t * \t\tnew Corpus(\"Hello Voyant!\", \"http://hermeneuti.ca/\"]); // two documents, one from string and one from URL\n    \t * \n    \t * \t\tnew Corpus(\"https://gist.githubusercontent.com/sgsinclair/84c9da05e9e142af30779cc91440e8c1/raw/goldbug.txt\", {\n    \t * \t\t\tinputRemoveUntil: 'THE GOLD-BUG',\n    \t * \t\t\tinputRemoveFrom: 'FOUR BEASTS IN ONE'\n    \t * \t\t});\n    \t * \n    \t * \t\t// use a corpus ID but also specify an input source if the corpus can't be found\n    \t * \t\tnew Corpus(\"goldbug\", {\n    \t * \t\t\tinput: \"https://gist.githubusercontent.com/sgsinclair/84c9da05e9e142af30779cc91440e8c1/raw/goldbug.txt\",\n    \t * \t\t\tinputRemoveUntil: 'THE GOLD-BUG',\n    \t * \t\t\tinputRemoveFrom: 'FOUR BEASTS IN ONE'\n    \t * \t\t});\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} inputFormat The input format of the corpus (the default is to auto-detect).\n    \t * \n    \t * The auto-detect format is usually reliable and inputFormat should only be used if the default\n    \t * behaviour isn't desired. Most of the relevant values are used for XML documents:\n    \t * \n    \t * - **DTOC**: Dynamic Table of Contexts XML format\n    \t * - **HTML**: Hypertext Markup Language\n    \t * - **RSS**: Really Simple Syndication XML format\n    \t * - **TEI**: Text Encoding Initiative XML format\n    \t * - **TEICORPUS**: Text Encoding Initiative Corpus XML format\n    \t * - **TEXT**: plain text\n    \t * - **XML**: treat the document as XML (sometimes overridding auto-detect of XML vocabularies like RSS and TEI)\n    \t * \n    \t * Other formats include **PDF**, **MSWORD**, **XLSX**, **RTF**, **ODT**, and **ZIP** (but again, these rarely need to be specified).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} tableDocuments Determine what is a document in a table (the entire table, by row, by column); only used for table-based documents.\n    \t * \n    \t * Possible values are:\n    \t * \n    \t * - **undefined or blank** (default): the entire table is one document\n    \t * - **rows**: each row of the table is a separate document\n    \t * - **columns**: each column of the table is a separate document\n    \t * \n    \t * See also [Creating a Corpus Tokenization](#!/guide/corpuscreator-section-tables).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} tableContent Determine how to extract body content from the table; only used for table-based documents.\n    \t * \n    \t * Columns are referred to by numbers, the first is column 1 (not 0).\n    \t * You can specify separate columns by using a comma or you can combined the contents of columns/cells by using a plus sign.\n    \t * \n    \t * Some examples:\n    \t * \n    \t * - **1**: use column 1\n    \t * - **1,2**: use columns 1 and 2 separately\n    \t * - **1+2,3**: combine columns 1 and two and use column 3 separately\n    \t * \n    \t * See also [Creating a Corpus Tokenization](#!/guide/corpuscreator-section-tables).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} tableAuthor Determine how to extract the author from each document; only used for table-based documents.\n    \t * \n    \t * Columns are referred to by numbers, the first is column 1 (not 0).\n    \t * You can specify separate columns by using a comma or you can combined the contents of columns/cells by using a plus sign.\n    \t * \n    \t * Some examples:\n    \t * \n    \t * - **1**: use column 1\n    \t * - **1,2**: use columns 1 and 2 separately\n    \t * - **1+2,3**: combine columns 1 and two and use column 3 separately\n    \t * \n    \t * See also [Creating a Corpus Tokenization](#!/guide/corpuscreator-section-tables).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} tableTitle Determine how to extract the title from each document; only used for table-based documents.\n    \t * \n    \t * Columns are referred to by numbers, the first is column 1 (not 0).\n    \t * You can specify separate columns by using a comma or you can combined the contents of columns/cells by using a plus sign.\n    \t * \n    \t * Some examples:\n    \t * \n    \t * - **1**: use column 1\n    \t * - **1,2**: use columns 1 and 2 separately\n    \t * - **1+2,3**: combine columns 1 and two and use column 3 separately\n    \t * \n    \t * See also [Creating a Corpus Tokenization](#!/guide/corpuscreator-section-tables).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} tableContent Determine how to extract body content from the table; only used for table-based documents.\n    \t * \n    \t * Columns are referred to by numbers, the first is column 1 (not 0).\n    \t * You can specify separate columns by using a comma or you can combined the contents of columns/cells by using a plus sign.\n    \t * \n    \t * Some examples:\n    \t * \n    \t * - **1**: use column 1\n    \t * - **1,2**: use columns 1 and 2 separately\n    \t * - **1+2,3**: combine columns 1 and two and use column 3 separately\n    \t * \n    \t * See also [Creating a Corpus Tokenization](#!/guide/corpuscreator-section-tables).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} tableNoHeadersRow Determine if the table has a first row of headers; only used for table-based documents.\n    \t * \n    \t * Provide a value of \"true\" if there is no header row, otherwise leave it blank or undefined (default).\n    \t * \n    \t * See also [Creating a Corpus Tokenization](#!/guide/corpuscreator-section-tables).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} tokenization The tokenization strategy to use\n    \t * \n    \t * This should usually be undefined, unless specific behaviour is required. These are the valid values:\n    \t * \n    \t * - **undefined or blank**: use the default tokenization (which uses Unicode rules for word segmentation)\n    \t * - **wordBoundaries**: use any Unicode character word boundaries for tokenization\n    \t * - **whitespace**: tokenize by whitespace only (punctuation and other characters will be kept with words)\n    \t * \n    \t * See also [Creating a Corpus Tokenization](#!/guide/corpuscreator-section-tokenization).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} xmlContentXpath The XPath expression that defines the location of document content (the body); only used for XML-based documents.\n    \t * \n    \t * \t\tnew Corpus(\"<doc><head>Hello world!</head><body>This is Voyant!</body></doc>\", {\n    \t * \t\t\t xmlContentXpath: \"//body\"\n    \t * \t\t}); // document would be: \"This is Voyant!\"\n    \t * \n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} xmlTitleXpath The XPath expression that defines the location of each document's title; only used for XML-based documents.\n    \t * \n    \t * \t\tnew Corpus(\"<doc><title>Hello world!</title><body>This is Voyant!</body></doc>\", {\n    \t * \t\t\t xmlTitleXpath: \"//title\"\n    \t * \t\t}); // title would be: \"Hello world!\"\n    \t * \n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\n    \t */\n\n    \t/**\n    \t * @cfg {String} xmlAuthorXpath The XPath expression that defines the location of each document's author; only used for XML-based documents.\n    \t * \n    \t * \t\tnew Corpus(\"<doc><author>St\u00e9fan Sinclair</author><body>This is Voyant!</body></doc>\", {\n    \t * \t\t\t xmlAuthorXpath: \"//author\"\n    \t * \t\t}); // author would be: \"St\u00e9fan Sinclair\"\n    \t * \n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} xmlPubPlaceXpath The XPath expression that defines the location of each document's publication place; only used for XML-based documents.\n    \t * \n    \t * \t\tnew Corpus(\"<doc><pubPlace>Montreal</pubPlace><body>This is Voyant!</body></doc>\", {\n    \t * \t\t\t xmlPubPlaceXpath: \"//pubPlace\"\n    \t * \t\t}); // publication place would be: \"Montreal\"\n    \t * \n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\n    \t */\n\n    \t/**\n    \t * @cfg {String} xmlPublisherXpath The XPath expression that defines the location of each document's publisher; only used for XML-based documents.\n    \t * \n    \t * \t\tnew Corpus(\"<doc><publisher>The Owl</publisher><body>This is Voyant!</body></doc>\", {\n    \t * \t\t\t xmlPublisherXpath: \"//publisher\"\n    \t * \t\t}); // publisher would be: \"The Owl\"\n    \t * \n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\n    \t */\n\n    \t/**\n    \t * @cfg {String} xmlKeywordXpath The XPath expression that defines the location of each document's keywords; only used for XML-based documents.\n    \t * \n    \t * \t\tnew Corpus(\"<doc><keyword>text analysis</keyword><body>This is Voyant!</body></doc>\", {\n    \t * \t\t\t xmlKeywordXpath: \"//keyword\"\n    \t * \t\t}); // publisher would be: \"text analysis\"\n    \t * \n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} xmlCollectionXpath The XPath expression that defines the location of each document's collection name; only used for XML-based documents.\n    \t * \n    \t * \t\tnew Corpus(\"<doc><collection>documentation</collection><body>This is Voyant!</body></doc>\", {\n    \t * \t\t\t xmlCollectionXpath: \"//collection\"\n    \t * \t\t}); // publisher would be: \"documentation\"\n    \t * \n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} xmlGroupByXpath The XPath expression that defines the location of each document's collection name; only used for XML-based documents.\n    \t * \n    \t * \t\tnew Corpus(\"<doc><sp s='Juliet'>Hello!</sp><sp s='Romeo'>Hi!</sp><sp s='Juliet'>Bye!</sp></doc>\", {\n    \t * \t\t\t xmlDocumentsXPath: '//sp',\n    \t *           xmlGroupByXpath: \"//@s\"\n    \t * \t\t}); // two docs: \"Hello! Bye!\" (Juliet) and \"Hi!\" (Romeo)\n    \t * \n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} xmlExtraMetadataXpath A value that defines the location of other metadata; only used for XML-based documents.\n    \t * \n    \t * \t\tnew Corpus(\"<doc><tool>Voyant</tool><phase>1</phase><body>This is Voyant!</body></doc>\", {\n    \t * \t\t\t xmlExtraMetadataXpath: \"tool=//tool\\nphase=//phase\"\n    \t * \t\t}); // tool would be \"Voyant\" and phase would be \"1\"\n    \t * \n    \t * Note that `xmlExtraMetadataXpath` is a bit different from the other XPath expressions in that it's\n    \t * possible to define multiple values (each on its own line) in the form of name=xpath.\n    \t * \n    \t * See also [Creating a Corpus with XML](#!/guide/corpuscreator-section-xml).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} xmlExtractorTemplate Pass the XML document through the XSL template located at the specified URL before extraction (this is ignored in XML-based documents).\n    \t * \n    \t * This is an advanced parameter that allows you to define a URL of an XSL template that can\n    \t * be called *before* text extraction (in other words, the other XML-based parameters apply\n    \t * after this template has been processed).\n    \t */\n\n    \t/**\n    \t * @cfg {String} inputRemoveUntil Omit text up until the start of the matching regular expression (this is ignored in XML-based documents).\n    \t * \n    \t * \t\tnew Corpus(\"Hello world! This is Voyant!\", {\n    \t * \t\t\t inputRemoveUntil: \"This\"\n    \t * \t\t}); // document would be: \"This is Voyant!\"\n    \t * \n    \t * See also [Creating a Corpus with Text](#!/guide/corpuscreator-section-text).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} inputRemoveUntilAfter Omit text up until the end of the matching regular expression (this is ignored in XML-based documents).\n    \t * \n    \t * \t\tnew Corpus(\"Hello world! This is Voyant!\", {\n    \t * \t\t\t inputRemoveUntilAfter: \"world!\"\n    \t * \t\t}); // document would be: \"This is Voyant!\"\n    \t * \n    \t * See also [Creating a Corpus with Text](#!/guide/corpuscreator-section-text).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} inputRemoveFrom Omit text from the start of the matching regular expression (this is ignored in XML-based documents).\n    \t * \n    \t * \t\tnew Corpus(\"Hello world! This is Voyant!\", {\n    \t * \t\t\t inputRemoveFrom: \"This\"\n    \t * \t\t}); // document would be: \"Hello world!\"\n    \t * \n    \t * See also [Creating a Corpus with Text](#!/guide/corpuscreator-section-text).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} inputRemoveFromAfter Omit text from the end of the matching regular expression (this is ignored in XML-based documents).\n    \t * \n    \t * \t\tnew Corpus(\"Hello world! This is Voyant!\", {\n    \t * \t\t\t inputRemoveFromAfter: \"world!\"\n    \t * \t\t}); // document would be: \"Hello world!\"\n    \t * \n    \t * See also [Creating a Corpus with Text](#!/guide/corpuscreator-section-text).\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} subTitle A sub-title for the corpus.\n    \t * \n    \t * This is currently not used, except in the Dynamic Table of Contexts skin. Still, it may be worth specifying a subtitle for later use.\n    \t */\n    \t\n    \t/**\n    \t * @cfg {String} title A title for the corpus.\n    \t * \n    \t * This is currently not used, except in the Dynamic Table of Contexts skin. Still, it may be worth specifying a title for later use.\n    \t */\n    \t \n    \t /**\n    \t * @cfg {String} curatorTsv a simple TSV of paths and labels for the DToC interface\n    \t *\n    \t * The DToC skin allows curation of XML tags and attributes in order to constrain the entries shown in the interface or to provide friendlier labels. This assumes plain text unicode input with one definition per line where the simple XPath expression is separated by a tab from a label.\n    \t *\n    \t *   \t p    \t paragraph\n    \t *   \t ref[@target*=\"religion\"]    \t religion\n    \t *\n    \t  * For more information see the DToC documentation on [Curating Tags](http://cwrc.ca/Documentation/public/index.html#DITA_Files-Various_Applications/DToC/CuratingTags.html)\n    \t */\n    \t \n    \t\n    \t\n    \tdocumentsStore: undefined\n    },\n    statics: {\n    \ti18n: {}\n    },\n    fields: [\n         {name: 'documentsCount', type: 'int'},\n         {name: 'lexicalTokensCount', type: 'int'},\n         {name: 'lexicalTypesCount', type: 'int'},\n         {name: 'createdTime', type: 'int'},\n         {name: 'createdDate', type: 'date', dateFormat: 'c'},\n         {name: 'title', type: 'string'},\n         {name: 'subTitle', type: 'string'},\n         {name: 'languagueCodes', type: 'string'}\n    ],\n    \n\t/**\n     * Create a promise for a new Corpus with relevant data loaded.\n     * \n     * The typical usage in Spyral is to call {@link #assign} in a first code block:\n     * \n     * \t\tnew Corpus(\"Hello Voyant!\").assign(\"corpus\");\n     * \n     * Then use the named variable in a subsequent code block:\n     * \n     * \t  corpus.show();\n     * \n     * Alternatively, the returned promise can be chained with {@link Ext.promise.Promise#then then}\n     * and a function argument that receives the Corpus as an argument.\n     * \n     * \tvar corpus;\n     * \tnew Corpus(\"Hello Voyant!\").then(function(data) {\n     * \t\tcorpus = data;\n     * \t\tcorpus.show();\n     * \t});\n     * \n     * The following scenarios are possible for the config argument:\n     * \n     * - a string that looks like a corpus ID (not a URL and no spaces): treated as a {@link #corpus} config\n     * - a string that doesn't look like a corpus ID: treated as an {@link #input} config\n     * - an array of strings: treated as an array of {@link #input} config values\n     * - an object: treated a normal config object\n     * \n     * As such, these two constructions do the same thing:\n     * \n     * \tnew Corpus(\"Hello World!\");\n     * \tnew Corpus({input: \"Hello World!\"});\n     * \n     * @param {String/String[]/Object} config The source document(s) as a text string, a URL, an array of text strings and URLs, or a config object.\n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return a Corpus but a promise to return a Corpus when it's finished loading\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\n\t * Corpus as an argument, as per the example above).\n\t */\n\tconstructor : function(source, config) {\n\t\tsource = source || {};\n\t\tconfig = config || {};\n\t\t\t\t\n\t\tthis.callParent([]); // only send config, not source\n\t\t\n\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\n\t\tif (Ext.isString(source)) { // a string could be a corpus ID or an input string (text or URL)\n\t\t\tif (/\\s/.test(source)==false && source.indexOf(\":\")==-1) { // looks like a corpus ID\n\t\t\t\tExt.apply(config, {\n\t\t\t\t\tcorpus: source\n\t\t\t\t});\n\t\t\t} else { // looks like input (text or URL)\n\t\t\t\tExt.apply(config, {\n\t\t\t\t\tinput: source\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (Ext.isArray(source)) { // assume we have an array of texts or URLs\n\t\t\tExt.apply(config, {\n\t\t\t\tinput: source\n\t\t\t});\n\t\t} else if (Ext.isObject(source)) { // copy the source to the config\n\t\t\tExt.apply(config, source);\n\t\t} else {\n\t\t\tVoyant.application.showError(this.localize(\"badDataTypeCorpus\")+\": (\"+ (typeof source)+\") \"+source);\n\t\t\tExt.defer(function() {\n\t\t\t\tdfd.reject(this.localize(\"badDataTypeCorpus\")+\": (\"+ (typeof source)+\") \"+source)\n\t\t\t}, 50, this);\n\t\t\treturn dfd.promise;\n\t\t}\n\t\t\n\t\tif (Ext.isObject(config)) {\n\t\t\t\n\t\t\tif (!config.corpus && !config.input && !config.inlineData) {\n\t\t\t\tVoyant.application.showError(this.localize(\"noCorpusOrInput\")+\": \"+config);\n\t\t\t\tExt.defer(function() {\n\t\t\t\t\tdfd.reject(this.localize(\"noCorpusOrInput\")+\": \"+config)\n\t\t\t\t}, 50, this);\n\t\t\t\treturn dfd.promise;\n\t\t\t}\n\t\t\t\n\t\t\tExt.apply(config, {tool: 'corpus.CorpusMetadata'})\n\n\t\t\tvar me = this;\n\t\t\tvar promise = Ext.Ajax.request({\n\t\t\t\turl: Voyant.application.getTromboneUrl(),\n\t\t\t\tparams: config\n\t\t\t}).then(function(response) {\n\t\t\t\tme.set(Ext.JSON.decode(response.responseText).corpus.metadata);\n\t\t\t\t// removed calls to set title and subtitle which should now be in metadata\n\t\t\t\tif (config.title || config.subTitle) {\n\t\t\t\t\tme.set('title', config.title);\n\t\t\t\t\tme.set('subTitle', config.subTitle);\n\t\t\t\t} else {\n\t\t\t\t\t// (removed calls for title and subtitle which should now be part of metadata\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn me;\n\t\t\t}, function(response){\n\t\t\t\tVoyant.application.showResponseError(me.localize('failedCreateCorpus'), response);\n\t\t\t}).then(function(corpus) {\n\t\t\t\tif (corpus.getDocumentsCount()==0) {\n\t\t\t\t\tVoyant.application.showError(me.localize(\"thisCorpus\")+\" \"+me.localize(\"isEmpty\")+\".\");\n\t\t\t\t}\n\t\t\t\tif (!('docsLimit' in config) || (config.docsLimit!==false && config.docsLimit>0)) {\n\t\t\t\t\tme.getDocuments().load({\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tlimit: ('docsLimit' in config) ? config.docsLimit : me.getDocumentsCount()\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\t\tme.setDocumentsStore(this);\n\t\t\t\t\t\t\t\tdfd.resolve(corpus)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdfd.reject(operation)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tdfd.resolve(corpus)\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t} else {\n\t\t\tVoyant.application.showError(this.localize(\"badDataTypeCorpus\")+\": (\"+ (typeof config)+\") \"+config);\n\t\t\tExt.defer(function() {\n\t\t\t\tdfd.reject(this.localize(\"badDataTypeCorpus\")+\": (\"+ (typeof config)+\") \"+config)\n\t\t\t}, 50, this);\n\t\t\treturn dfd.promise;\n\t\t}\n\t},\n\t\n\tgetId: function() {\n\t\t// overrides the getId() function from the model to handle promises\n    \treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('id');\t\t\n\t},\n\t\n\t\n\tgetAliasOrId: function() {\n\t\t// overrides the getId() function from the model to handle promises\n    \treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : (this.get('alias') || this.get('id'));\t\t\n\t},\n\t\n\t/**\n     * Create a promise for {@link Voyant.data.store.CorpusTerms Corpus Terms}.\n     * \n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\n     * provide a function that receives the {@link Voyant.data.store.CorpusTerms Corpus Terms} as an argument.\n     * \n     * \tnew Corpus(\"Hello Voyant!\").loadCorpusTerms().then(function(corpusTerms) {\n     * \t\tcorpusTerms.show();\n     * \t});\n     * \n     * @param {Number/Object} config\n     * \n     * - when this is a number, it's the maximum number of corpus terms to load (see {@link Voyant.data.store.CorpusTerms#limit})\n     * - otherwise this is a regular config object\n     * \n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return corpus terms but a promise to return a corpus terms when they're finished loading\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\n\t * corpus terms as an argument, as per the example above).\n\t */\n\tloadCorpusTerms: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\tconfig = config || {};\n\t\t\tif (Ext.isNumber(config)) {\n\t\t\t\tconfig = {limit: config};\n\t\t\t}\n\t\t\tExt.applyIf(config, {\n\t\t\t\tlimit: 0\n\t\t\t})\n\t\t\tvar corpusTerms = this.getCorpusTerms();\n\t\t\tcorpusTerms.load({\n\t\t\t\tparams: config,\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tdfd.resolve(corpusTerms)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdfd.reject(operation)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t}\n\t},\n\t\n\t/**\n     * Create a promise for {@link Voyant.data.store.Tokens Tokens}.\n     * \n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\n     * provide a function that receives the {@link Voyant.data.store.Tokens Tokens} as an argument.\n     * \n     * \tnew Corpus(\"Hello Voyant!\").loadTokens().then(function(tokens) {\n     * \t\ttokens.show();\n     * \t});\n     * \n     * @param {Number/Object} config\n     * \n     * - when this is a number, it's the maximum number of corpus terms to load (see {@link Voyant.data.store.CorpusTerms#limit})\n     * - otherwise this is a regular config object\n     * \t- **limit**: the maximum number of tokens to return (default is no limit)\n     * \t- **perDocLimit**: the maximum number of tokens to return per document\n     * \t- **start**: where to start (when pageing, default is 0)\n     * \t- **noOthers**: determine if only word tokens are returned (default is false)\n     * \t- **withPosLemmas**: try to populate pos (part-of-speech) tags and lemmas (only works in English for now)\n     * \t- **docIndex**: a comma-separated list of integers of document indices\n     * \t- **docId**: a comma-separated list of document IDs\n     * \t- **stopList**: the ID of an existing stopList resource or an array of words to skip\n     * \t- **whitelist**: the ID of an existing whitelist resource or an array of words to keep\n     * \n     * \n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return tokens but a promise to return tokens when they're finished loading\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\n\t * tokens as an argument, as per the example above).\n\t */\n\tloadTokens: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\tconfig = config || {};\n\t\t\tif (Ext.isNumber(config)) {\n\t\t\t\tconfig = {limit: config};\n\t\t\t}\n\t\t\tExt.applyIf(config, {\n\t\t\t\tlimit: 0\n\t\t\t})\n\t\t\tvar tokens = this.getTokens();\n\t\t\ttokens.load({\n\t\t\t\tparams: config,\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tdfd.resolve(tokens)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdfd.reject(operation)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t}\n\t},\n\t\n\tgetCorpusTerms: function(config) {\n\t\treturn Ext.create(\"Voyant.data.store.CorpusTerms\", Ext.apply(config || {}, {corpus: this}));\n\t},\n\t\n\tgetTokens: function(config) {\n\t\treturn Ext.create(\"Voyant.data.store.Tokens\", Ext.apply(config || {}, {corpus: this}));\n\t},\n\t\n\teach: function(fn, scope) {\n\t\tthis.getDocuments().each(function(doc, i) {\n\t\t\tfn.call(scope || doc, doc, i);\n\t\t})\n\t},\n\t\n\tmap: function(fn, scope) {\n\t\treturn this.getDocuments().getRange().map(function(doc, i) {\n\t\t\treturn fn.call(scope || doc, doc, i)\n\t\t}, scope || this)\n\t},\n\t\n\tgetCorpusCollocates: function(config) {\n\t\treturn Ext.create(\"Voyant.data.store.CorpusCollocates\", Ext.apply(config || {}, {corpus: this}));\n\t},\n\t\n\tgetDocumentQueryMatches: function(config) {\n\t\t// not expected to be called before corpus is defined\n\t\treturn Ext.create(\"Voyant.data.store.DocumentQueryMatches\", Ext.apply(config || {}, {corpus: this}));\n\t},\n\t\n\tgetDocumentTerms: function(config) {\n\t\treturn Ext.create(\"Voyant.data.store.DocumentTerms\", Ext.apply(config || {}, {corpus: this}));\n\t},\n\t\n\tgetDocumentEntities: function(config) {\n\t\treturn Ext.create(\"Voyant.data.store.DocumentEntities\", Ext.apply(config || {}, {corpus: this}));\n\t},\n\t\n\tloadContexts: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\tconfig = config || {};\n\t\t\tif (Ext.isNumber(config)) {\n\t\t\t\tconfig = {limit: config};\n\t\t\t}\n\t\t\tExt.applyIf(config, {\n\t\t\t\tlimit: 0\n\t\t\t})\n\t\t\tvar contexts = this.getContexts();\n\t\t\tcontexts.load({\n\t\t\t\tparams: config,\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tdfd.resolve(contexts)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdfd.reject(operation)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t}\n\t\t\n\t},\n\t\n\tgetContexts: function(config) {\n\t\treturn Ext.create(\"Voyant.data.store.Contexts\", Ext.apply(config || {}, {corpus: this}));\n\t},\n\t\n\tgetDocuments: function(config) {\n\t\treturn this.getDocumentsStore() ? this.getDocumentsStore() : Ext.create(\"Voyant.data.store.Documents\", Ext.apply(config || {}, {corpus: this}));\n\t\t//this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.getDocumentsStore();\n\t},\n\t\n\tgetDocument: function(config) {\n\t\tif (this.getDocumentsStore()) {\n\t\t\tif (config instanceof Voyant.data.model.Document) {\n\t\t\t\treturn config;\n\t\t\t}\n\t\t\telse if (Ext.isNumeric(config)) {\n\t\t\t\treturn this.getDocumentsStore().getAt(parseInt(config))\n\t\t\t}\n\t\t\telse if (Ext.isString(config)) {\n\t\t\t\treturn this.getDocumentsStore().getById(config)\n\t\t\t}\n\t\t}\n\t\treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.getDocumentsStore().getDocument(config);\n\t},\n\t\n\tgetDocumentsCount: function() {\n\t\treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('documentsCount');\n\t},\n\t\n\tgetWordTokensCount: function() {\n    \treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('lexicalTokensCount');\n\t},\n\t\n\tgetWordTypesCount: function() {\n    \treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('lexicalTypesCount');\n\t},\n\t\n\tgetCreatedTime: function() {\n    \treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('createdTime');\t\t\n\t},\n\t\n\trequiresPassword: function() {\n\t\tvar noPasswordAccess = this.getNoPasswordAccess();\n\t\treturn noPasswordAccess=='NONE' || noPasswordAccess=='NONCONSUMPTIVE';\n\t},\n\t\n\tgetNoPasswordAccess: function() {\n\t\t// overrides the getId() function from the model to handle promises\n    \treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('noPasswordAccess');\t\t\n\t},\n\t\n\tgetTitle: function() {\n\t\treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('title');\t\t\n\t},\n\t\n\tgetSubTitle: function() {\n\t\treturn this.then ? Voyant.application.getDeferredNestedPromise(this, arguments) : this.get('subTitle');\t\t\n\t},\n\t\n\tgetRelatedWords : function(config) {\n\t\treturn Ext.create(\"Voyant.data.store.RelatedTerms\", Ext.apply(config || {}, {corpus: this}))\n\t},\n\t\n\tloadRelatedWords : function(config) {\n\t\tvar me = this;\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\tconfig = config || {};\n\t\t\tif (Ext.isNumber(config)) {\n\t\t\t\tconfig = {limit: config};\n\t\t\t}\n\t\t\tExt.applyIf(config, {\n\t\t\t\tlimit: 0\n\t\t\t})\n\t\t\tvar relatedTerms = this.getRelatedWords();\n\t\t\trelatedTerms.load({\n\t\t\t\tparams: config,\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tdfd.resolve(records)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdfd.reject(operation.error.response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t}\n\t},\n\t\t\n\t/**\n     * Create a promise for a text representation of all the document bodies in the corpus.\n     * \n     * This does NOT necessarily return the full original document, but rather the body or main\n     * content, as extracted by Voyant. You can also request a {@link #plainText} version with\n     * the tags stripped.\n     * \n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\n     * provide a function that receives the text as an argument.\n     * \n     * \tnew Corpus(\"http://hermeneuti.ca\").getText().then(function(text) {\n     * \t\tshow(text.replace(/</g, \"&lt;\")); // show the markup \n     * \t});\n     * \n     * @param {Number/Object} config\n     * \n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\n     * - otherwise this is a regular config object that can contain the following:\n     * \t - `limit`: a limit on the total number of words (by default there's no limit)\n     * \t - `perDocLimit`: a limit on the number of words to fetch for each document (by default there's no limit)\n     * \t - `start`: start at this word index for each document\n     * \t - `stopList`: the ID of an existing stopList resource or an array of words to skip\n     * \t - `whitelist`: the ID of an existing whitelist resource or an array of words to keep\n     * \n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return text but a promise to return text when it's finished loading\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\n\t * text as an argument, as per the example above).\n\t */\n\tgetText: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments, this);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t    \tconfig = config || {};\n\t    \tif (Ext.isNumber(config)) {\n\t    \t\tconfig = {limit: config}\n\t    \t} else if (Ext.isString(config)) {\n\t    \t\tconfig = {limit: parseInt(config)}\n\t    \t};\n\t    \tExt.applyIf(config, {\n        \t\tlimit: 0,\n    \t\t\toutputFormat: \"text\",\n    \t\t\ttemplate: \"docTokens2text\"\n\t    \t});\n\t    \tExt.apply(config, {\n        \t\ttool: 'corpus.DocumentTokens',\n        \t\tcorpus: this.getAliasOrId()\n\t    \t});\n        \tExt.Ajax.request({\n        \t    url: Voyant.application.getTromboneUrl(),\n        \t    params: config,\n        \t    success: function(response, opts) {\n        \t    \tvar text = response.responseText.trim();\n        \t    \tif (config.transformCase) {\n        \t    \t\tif (config.transformCase.indexOf(\"lower\")>-1) {\n        \t    \t\t\ttext = text.toLowerCase();\n        \t    \t\t} else if (config.transformCase.indexOf(\"upper\")>-1) {\n        \t    \t\t\ttext = text.toUpperCase();\n        \t    \t\t}\n        \t    \t}\n        \t    \tdfd.resolve(text);\n        \t    },\n        \t    failure: function(response, opts) {\n        \t    \tdfd.reject(response);\n        \t    },\n        \t    scope: this\n        \t})\n\t    \treturn dfd.promise\n\t\t}\n    },\n    \n\t/**\n     * Create a promise for a plain text representation of all the text in the corpus.\n     * \n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\n     * provide a function that receives the text as an argument.\n     * \n     * \tnew Corpus(\"http://hermeneuti.ca\").getPlainText().then(function(text) {\n     * \t\tshow(text.trim().replace(/\\s+/g, \" \").substr(-150)); // show the end \n     * \t});\n     * \n     * @param {Number/Object} config\n     * \n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\n     * - otherwise this is a regular config object \u2013 see {@link #getText} for more details.\n     * \n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return text but a promise to return text when it's finished loading\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\n\t * text as an argument, as per the example above).\n\t */\n    getPlainText: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t    \tconfig = config || {};\n\t    \tif (Ext.isNumber(config)) {\n\t    \t\tconfig = {limit: config}\n\t    \t} else if (Ext.isString(config)) {\n\t    \t\tconfig = {limit: parseInt(config)}\n\t    \t}\n\t    \tExt.apply(config, {\n    \t\t\ttemplate: \"docTokens2plainText\"\n\t    \t});\n\t\t\treturn this.getText(config);\n\t\t}\n    \t\n    },\n\n\t/**\n     * Create a promise for a string containing just the words from the corpus.\n     * \n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\n     * provide a function that receives the text as an argument.\n     * \n     * \tnew Corpus(\"http://hermeneuti.ca\").getWords().then(function(words) {\n     * \t\tshow(words); // show the words \n     * \t});\n     * \n     * @param {Number/Object} config\n     * \n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\n     * - otherwise this is a regular config object \u2013 see {@link #getText} for more details.\n     * \n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return the words but a promise to return words when it's finished loading\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\n\t * words as a string argument, as per the example above).\n\t */\n    getWords: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t    \tconfig = config || {};\n\t    \tif (Ext.isNumber(config)) {\n\t    \t\tconfig = {limit: config}\n\t    \t} else if (Ext.isString(config)) {\n\t    \t\tconfig = {limit: parseInt(config)}\n\t    \t};\n\t    \tExt.applyIf(config, {\n    \t\t\ttemplate: \"docTokens2words\"\n\t    \t});\n\t\t\treturn this.getText(config);\n\t\t}\n    \t\n    },\n\t\n\t/**\n     * Create a promise for a string containing just the words from the corpus.\n     * \n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\n     * provide a function that receives the text as an argument.\n     * \n     * \tnew Corpus(\"http://hermeneuti.ca\").getWords().then(function(words) {\n     * \t\tshow(words); // show the words \n     * \t});\n     * \n     * @param {Number/Object} config\n     * \n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\n     * - otherwise this is a regular config object \u2013 see {@link #getText} for more details.\n     * \n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return the words but a promise to return words when it's finished loading\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\n\t * words as a string argument, as per the example above).\n\t */\n    getWordsArray: function(config) {\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t    \tthis.getWords(config).then(function(text) {\n\t\t\t\tdfd.resolve(text.split(\" \"));\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t}\n    \t\n    },\n    \n\t/**\n     * Create a promise for an array of lemmas from the corpus (only works for English).\n     * \n     * The typical usage is to chain the returned promise with {@link Ext.promise.Promise#then then} and\n     * provide a function that receives the lemmas as an argument.\n     * \n\t * \tnew Corpus(\"Hello world, I like Spyral notebooks!\", {language: \"en\"}).getLemmasArray().then(function(lemmas) {\n\t\t\tshow(lemmas.join(\", \"))\n\t *  });\n     * \n     * @param {Number/Object} config\n     * \n     * - when this is a number, it's the maximum number of words to fetch (though there may be any number of other tokens, like punctuation and space (but no tags).\n     * - otherwise this is a regular config object \u2013 see {@link #getText} for more details.\n     * \n\t * @returns {Ext.promise.Promise} *Important*: This doesn't immediately return the words but a promise to return words when it's finished loading\n\t * (you should normally chain the promise with {@link Ext.promise.Promise#then then} and provide a function that receives the\n\t * words as a string argument, as per the example above).\n\t */\n    getLemmasArray: function(config) {\n    \tconfig = config || {};\n\t\tif (this.then) {\n\t\t\treturn Voyant.application.getDeferredNestedPromise(this, arguments);\n\t\t} else {\n\t\t\tvar dfd = Voyant.application.getDeferred(this);\n\t\t\tExt.applyIf(config, {\n\t\t\t\ttemplate: \"docTokens2lemmas\",\n\t\t\t\twithPosLemmas: true,\n\t\t\t\tnoOthers: true\n\t\t\t})\n\t    \tthis.getWords(config).then(function(text) {\n\t    \t\tvar lemmas = text.split(\" \").map(function(word) {return word.substring(0, word.indexOf(\"/\"))})\n\t\t\t\tdfd.resolve(lemmas);\n\t\t\t})\n\t\t\treturn dfd.promise\n\t\t}\n    \t\n    },\n    \n    /**\n\t * Shows a one-line summary of this corpus.\n\t * \n\t * \tnew Corpus(\"Hello World!\").show(true);\n\t * \n\t * @method show\n\t * @param {boolean} [withID] Includes the corpus ID in parentheses at the end, if true.\n\t */\n\t\n\t/**\n\t * @method embed\n\t * Embed the current corpus in the specified tool.\n\t * \n\t * Because embed knows about promises, you don't need to handle promises when calling embed on a corpus.\n\t * \n\t * \tnew Corpus(\"Hello Voyant!\").embed(); // use summary as a default\n\t * \tnew Corpus(\"Hello Voyant!\").embed(\"corpusterms\"); // specify corpus terms tool\n\t * \tnew Corpus(\"Hello Voyant!\").embed(\"cirrus\", {width: \"300px\"}); // with config\n\t *  \n\t * @param {String} [tool] Specify which tool to use for embedding this corpus.\n\t * The following are recognized tool values: {@link Voyant.panel.Summary summary} (default), {@link Voyant.panel.Cirrus cirrus}, {@link Voyant.panel.Documents documents}, {@link Voyant.panel.CorpusTerms corpusterms}.\n\t * @param {Object} [config] Additional configuration options to pass to the tool.\n\t * In addition to the configuration options available from each tool listed in the tool param (see above), options include:\n\t * \n\t * - **width**: a CSS width value for the embedded tool (e.g. \"500px\", \"80em\", \"50%\")\n\t * - **height**: a CSS height value for the embedded tool (e.g. \"300px\", \"10em\", \"30%\")\n\t */\n    getString: function(config) {\n\t\tvar size = this.getDocumentsCount();\n\t\tvar message = this.localize('thisCorpus');\n\t\tif (size==0) {message += ' '+this.localize('isEmpty')+'.';}\n\t\telse {\n\t\t\tmessage+=' ';\n\t\t\tif (size>1) {\n\t\t\t\tmessage+=new Ext.XTemplate(this.localize('hasNdocuments')).apply({count: Ext.util.Format.number(size,\"0,000\")});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmessage+=this.localize('has1document');\n\t\t\t}\n\t\t\tmessage+=' '+new Ext.XTemplate(this.localize('widthNwordsAndNTypes')).apply({words: Ext.util.Format.number(this.getWordTokensCount(),\"0,000\"), types: Ext.util.Format.number(this.getWordTypesCount(),\"0,000\")})+'.'\n\t\t\tmessage+=\" \"+this.localize('created')+\" \";\n\t\t\tvar createdDate = this.get('createdDate');\n\t\t\tvar now = new Date();\n\t\t\tif (Ext.Array.each([\n\t\t    \t\t\t\t['year', Ext.Date.YEAR],\n\t\t    \t\t\t\t['month', Ext.Date.MONTH],\n\t\t    \t\t\t\t['day', Ext.Date.DAY],\n\t\t    \t\t\t\t['hour', Ext.Date.HOUR],\n\t\t    \t\t\t\t['minute', Ext.Date.MINUTE],\n\t\t    \t\t\t\t['second', Ext.Date.SECOND]\n\t\t    \t], function(time) {\n        \t\t\tif (Ext.Date.diff(createdDate, now, time[1])>(time[0]=='second' ? 1 : 0)) {\n        \t\t\t\tvar count = Ext.Date.diff(createdDate, now, time[1]);\n        \t\t\t\tmessage+=\"<span class='info-tip' data-qtip='\"+Ext.Date.format(createdDate, \"Y-m-d, H:i:s\")+\"'>\";\n        \t\t\t\tif (count==1) {message+=new Ext.XTemplate(this.localize(time[0]+'Ago')).apply({count: count, date: createdDate})}\n        \t\t\t\telse {message+=new Ext.XTemplate(this.localize(time[0]+'sAgo')).apply({count: count, date: createdDate})}\n        \t\t\t\tmessage+=\"</span>\";\n        \t\t\t\treturn false\n        \t\t\t}\n\t\t\t\t}, this\n\t\t\t)===true) { // if array returns true, none of the conditions matched, so say now\n\t\t\t\tmessage+=this.localize('now');\n\t\t\t}\n\t\t\tmessage+='.';\n\t\t\t\n\t\t\tmessage+='';\n\t\t}\n\t\tif (config===true) {message+=' ('+this.getId()+\")\";}\n\t\treturn message;\n    }\n    \n    \n\n});","Ext.define('Voyant.widget.CodeEditor', {\n\textend: 'Ext.panel.Panel',\n    mixins: ['Voyant.util.Localization','Voyant.util.Api','Voyant.notebook.util.Embed'],\n\talias: 'widget.codeeditor',\n    statics: {\n    \ti18n: {},\n\t\tapi: {\n\t\t\ttableJson: undefined,\n\t\t\tcontent: '',\n\t\t\tmode: 'ace/mode/text',\n\t\t\twidth: undefined\n\t\t}\n    },\n\tconstructor: function(config) {\n    \tconfig = config || {};\n\t\tvar me = this;\n    \tme.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n    \tme.buildFromParams();\n    \tExt.apply(me, {\n    \t\titems: {\n    \t\t\txtype: 'notebookcodeeditor',\n    \t\t\tcontent: config.content ? config.content : this.getApiParam('content'),\n    \t\t\tmode: config.mode ? config.mode : this.getApiParam(\"mode\")\n    \t\t}\n    \t})\n        me.callParent(arguments);\n\t},\n\tinitComponent: function(config) {\n    \tvar me = this, config = config || {};\n    \tme.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n    \tme.callParent(arguments);\n\t},\n\t\n\tbuildFromParams: function() {\n\t\tvar me = this, tableJson = this.getApiParam('tableJson');\n\t\tif (tableJson) {\n\t\t\tvar json = Ext.decode(tableJson);\n\t\t\tvar text = json.headers.join(\"\\t\") + \"\\n\"+\n\t\t\t\tjson.rows.map(function(row) {return row.join(\"\\t\")}).join(\"\\n\");\n\t\t\tthis.setApiParam('content', text);\n\t\t}\n\t}\n})","Ext.define('Voyant.widget.CorpusSelector', {\n    extend: 'Ext.form.field.ComboBox',\n    mixins: ['Voyant.util.Localization', 'Voyant.util.Api'],\n    alias: 'widget.corpusselector',\n    statics: {\n\t    \ti18n: {\n\t    \t},\n\t    \tapi: {\n\t    \t\topenMenu: undefined\n\t    \t}\n    },\n    \n    constructor: function(config) {\n        config = config || {};\n        \n        // need to call here to get openMenu\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\n\t    \tvar data = [['shakespeare',\"Shakespeare's Plays\"],['austen',\"Austen's Novels\"]];\t\n\t    \t// check API and server option for open menu values\n\t    \tif (this.getApiParam(\"openMenu\")) {\n\t\t\t\tdata = this.getStoreItemsFromDefinition(this.getApiParam(\"openMenu\"));\n\t\t} else if (Voyant.application && Voyant.application.getOpenMenu && Voyant.application.getOpenMenu()) {\n\t\t\tvar arg = Voyant.application.getOpenMenu();\n\t\t\targ = decodeURIComponent(arg);\n\t\t\targ = arg.replace(/\\+/g,' ');\n\t\t\tif (arg.charAt(0)=='\"' && arg.charAt(arg.length-1)=='\"') {\n\t\t\t\targ = arg.substring(1, arg.length-1);\n\t\t\t}\n\t\t\tdata = this.getStoreItemsFromDefinition(arg);\n\t    \t}\n\t\n\t    \tExt.applyIf(config, {\n\t    \t\tfieldLabel: this.localize('chooseCorpus'),\n\t            labelWidth: 125,\n\t            labelAlign: 'right',\n\t            name:'corpus',\n\t            queryMode:'local',\n\t            store: data\n\t    \t});\n        this.callParent([config]);\n    },\n\n    \tinitComponent: function(config) {\n    \t\tconfig = config || {};\n        this.callParent([config]);\n    },\n    \n    getStoreItemsFromDefinition: function(definition) {\n\t    \tvar data = [], items = definition.split(\";\");\n\t    \tfor (var i=0; i<items.length; i++) {\n\t    \t\tvar nameValue = items[i].split(\":\");\n\t    \t\tif (nameValue[0]) {\n\t        \t\tdata.push([nameValue[0],nameValue[1] ? nameValue[1] : nameValue[0]]);\n\t    \t\t}\n\t    \t}\n\t    \treturn data;\n    }\n})","Ext.define('Voyant.widget.ListEditor', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.listeditor',\n    layout: 'hbox',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n    initComponent: function(config) {\n    \tvar me = this;\n    \tvar value = this.up('window').panel.getApiParam(this.name);\n    \tvar data = value ? [{name: value, value: value}] : [];\n    \t\n    \tdata.splice(0, 0, {name : this.localize('none'),   value: ''},  {name : this.localize('new'),   value: 'new'})\n    \tExt.apply(me, {\n\t    \t\titems: [{\n\t    \t        xtype: 'combo',\n\t    \t        queryMode: 'local',\n\t    \t        value: value,\n\t    \t        triggerAction: 'all',\n\t    \t        editable: true,\n\t    \t        fieldLabel: this.localize(this.name+'Label'),\n\t    \t        labelAlign: 'right',\n\t    \t        name: this.name,\n\t    \t        displayField: 'name',\n\t    \t        valueField: 'value',\n\t    \t        store: {\n\t    \t            fields: ['name', 'value'],\n\t    \t            data: data\n\t    \t        }\n\t    \t\t}, {width: 10}, {xtype: 'tbspacer'}, {\n\t    \t\t\txtype: 'button',\n\t    \t\t\ttext: this.localize('editList'),\n\t\t            ui: 'default-toolbar',\n\t    \t\t\thandler: this.editList,\n\t    \t\t\tscope: this\n\t    \t\t}]\n    \t})\n        me.callParent(arguments);\n    },\n    \n    editList: function() {\n    \tvar win = this.up('window');\n    \tvar panel = win.panel;\n    \tvar value = this.down('combo').getValue();\n    \tExt.Ajax.request({\n    \t    url: panel.getTromboneUrl(),\n    \t    params: {\n        \t\ttool: 'resource.KeywordsManager',\n        \t\tlist: value\n    \t    },\n    \t    success: function(response){\n    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \tvar keywords = json.keywords.keywords.sort().join(\"\\n\");\n    \t\t\tExt.Msg.show({\n\t    \t\t    title: this.localize('editListTitle'),\n\t    \t\t    message: this.localize('editListMessage'),\n\t    \t\t    buttons: Ext.Msg.OKCANCEL,\n\t    \t\t    buttonText: {\n\t    \t\t        ok: this.localize('ok'),\n\t    \t\t        cancel: this.localize('cancel')\n\t    \t\t    },\n\t    \t\t    icon: Ext.Msg.INFO,\n\t    \t\t    prompt: true,\n\t    \t        multiline: true,\n\t    \t        value: keywords,\n\t    \t        original: keywords,\n\t    \t        fn: function(btn,value,list) {\n\t    \t        \tif (btn=='ok' && list.original!=value) {\n\t    \t        \t\tvar combo = this.down('combo')\n\t    \t        \t\tif (Ext.String.trim(value).length==0) {\n\t    \t        \t\t\tcombo.setValue('empty');\n\t    \t        \t\t}\n\t    \t        \t\telse {\n\t    \t        \t    \tExt.Ajax.request({\n\t    \t        \t    \t    url: panel.getTromboneUrl(),\n\t    \t        \t    \t    params: {\n\t    \t        \t        \t\ttool: 'resource.StoredResource',\n\t    \t        \t    \t\t\tstoreResource: value\n\t    \t        \t    \t    },\n\t    \t        \t    \t    combo: combo,\n\t    \t        \t    \t    success: function(response, req) {\n\t    \t        \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n\t    \t        \t    \t    \tvar store = req.combo.getStore();\n\t    \t        \t    \t    \tvar value = 'keywords-'+json.storedResource.id;\n\t    \t        \t    \t    \tstore.add({name: value, value: value});\n\t    \t        \t    \t    \treq.combo.setValue(value)\n\t    \t        \t    \t    \treq.combo.updateLayout()\n\t    \t        \t    \t    },\n\t    \t        \t    \t    scope: this\n\t    \t        \t    \t})\n\t    \t        \t\t}\n\t    \t        \t}\n\t    \t        },\n\t    \t        scope: this\n    \t\t\t})\n    \t    },\n    \t    scope: this\n    \t});\n    }\n})","Ext.define('Voyant.widget.StopListOption', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.stoplistoption',\n    layout: 'hbox',\n    statics: {\n    \t\tstoplists: {\n    \t\t    ar: \"stop.ar.arabic-lucene.txt\",\n    \t\t\tbg: \"stop.bu.bulgarian-lucene.txt\",\n    \t\t\tbr: \"stop.br.breton-lucene.txt\",\n    \t\t\tca: \"stop.ca.catalan-lucene.txt\",\n    \t\t\tckb: \"stop.ckb-turkish-lucene.txt\",\n    \t\t\tcn: \"stop.cn.chinese-lawrence.txt\",\n    \t\t\tcz: \"stop.cz.czech-lucene.txt\",\n    \t\t\tde: \"stop.de.german.txt\",\n    \t\t\tel: \"stop.el.greek-lucene.txt\",\n    \t\t\ten: \"stop.en.taporware.txt\",\n    \t\t\tes: \"stop.es.spanish.txt\",\n    \t\t\teu: \"stop.eu.basque-lucene.txt\",\n    \t\t\tfa: \"stop.fa.farsi-lucene.txt\",\n    \t\t\tfr: \"stop.fr.veronis.txt\",\n    \t\t\tga: \"stop.ga-irish-lucene.txt\",\n    \t\t\tgl: \"stop.ga.galician-lucene.txt\",\n    \t\t\tgrc: \"stop.grc.ancient-greek.txt\",\n    \t\t\thi: \"stop.hi.hindi-lucene.txt\",\n    \t\t\thu: \"stop.hu.hungarian.txt\",\n    \t\t\thy: \"stop.hy.armenian-lucene.txt\",\n    \t\t\tid: \"stop.id.indonesian-lucene.txt\",\n    \t\t\tit: \"stop.it.italian.txt\",\n    \t\t\tja: \"stop.ja.japanese-lucene.txt\",\n    \t\t\tla: \"stop.la.latin.txt\",\n    \t\t\tlv: \"stop.lv.latvian-lucene.txt\",\n    \t\t\tlt: \"stop.lt.lithuanian-lucene.txt\",\n    \t\t\tmu: \"stop.mu.multi.txt\",\n    \t\t\tnl: \"stop.nl.dutch.txt\",\n    \t\t\tno: \"stop.no.norwegian.txt\",\n    \t\t\tpt: \"stop.pt.brazilian.txt\",\n    \t\t\tro: \"stop.ro.romanian-lucene.txt\",\n    \t\t\tru: \"stop.ru.russian.txt\",\n    \t\t\tse: \"stop.se.swedish-long.txt\",\n    \t\t\tth: \"stop.th.thai-lucene.txt\",\n    \t\t\ttr: \"stop.tr.turkish-lucene.txt\"\n    \t\t},\n\t    \ti18n: {\n\t    \t\t\n\t    \t}\n    },\n    initComponent: function(config) {\n    \tvar me = this;\n    \tvar value = this.up('window').panel.getApiParam('stopList');\n    \tvar data = [];\n    \tfor (id in Voyant.widget.StopListOption.stoplists) {\n    \t\tdata.push({name: this.localize(id), value: Voyant.widget.StopListOption.stoplists[id]})\n    \t}\n    \tdata.sort(function(a,b) { // sort by label\n    \t\treturn a.name < b.name ? -1 : 1;\n    \t})\n    \tdata.splice(0, 0, {name : this.localize('auto'),   value: 'auto'}, {name : this.localize('none'),   value: ''},  {name : this.localize('new'),   value: 'new'})\n    \tExt.apply(me, {\n\t    \t\titems: [{\n\t    \t        xtype: 'combo',\n\t    \t        queryMode: 'local',\n\t    \t        value: value,\n\t    \t        triggerAction: 'all',\n\t    \t        editable: true,\n\t    \t        fieldLabel: this.localize('label'),\n\t    \t        labelAlign: 'right',\n\t    \t        name: 'stopList',\n\t    \t        displayField: 'name',\n\t    \t        valueField: 'value',\n\t    \t        store: {\n\t    \t            fields: ['name', 'value'],\n\t    \t            data: data\n\t    \t        }\n\t    \t\t}, {width: 10}, {xtype: 'tbspacer'}, {\n\t    \t\t\txtype: 'button',\n\t    \t\t\ttext: this.localize('editList'),\n\t\t            ui: 'default-toolbar',\n\t    \t\t\thandler: this.editList,\n\t    \t\t\tscope: this\n\t    \t\t}, {width: 10}, {\n\t    \t\t\txtype: 'checkbox',\n\t    \t\t\tname: 'stopListGlobal',\n\t    \t\t\tchecked: true,\n\t    \t\t\tboxLabel: this.localize('applyGlobally')\n\t    \t\t}]\n    \t})\n        me.callParent(arguments);\n    },\n    \n    editList: function() {\n    \tvar win = this.up('window');\n    \tvar panel = win.panel;\n    \tvar value = this.down('combo').getValue();\n    \tvar corpusId = panel.getApplication && panel.getApplication().getCorpus ? panel.getApplication().getCorpus().getId() : undefined;\n    \tif (value=='auto' && !corpusId) {\n    \t\tExt.Msg.show({\n\t\t\t    title: this.localize('noEditAutoTitle'),\n\t\t\t    message: this.localize('noEditAutoMessage'),\n\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t});\n    \t\treturn\n    \t}\n    \tExt.Ajax.request({\n    \t    url: panel.getTromboneUrl(),\n    \t    params: {\n        \t\ttool: 'resource.KeywordsManager',\n    \t\t\tstopList: value,\n    \t\t\tcorpus: corpusId\n    \t    },\n    \t    success: function(response){\n    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \tvar keywords = json.keywords.keywords.sort().join(\"\\n\");\n    \t\t\tExt.Msg.show({\n\t    \t\t    title: this.localize('editStopListTitle'),\n\t    \t\t    message: this.localize('editStopListMessage'),\n\t    \t\t    buttons: Ext.Msg.OKCANCEL,\n\t    \t\t    buttonText: {\n\t    \t\t        ok: this.localize('ok'),\n\t    \t\t        cancel: this.localize('cancel')\n\t    \t\t    },\n\t    \t\t    icon: Ext.Msg.INFO,\n\t    \t\t    prompt: true,\n\t    \t        multiline: true,\n\t    \t        value: keywords,\n\t    \t        original: keywords,\n\t    \t        fn: function(btn,value,stoplist) {\n\t    \t        \t// force lowercase for simple stopword list since it's lexical (this may change if the widget is used elsewhere)\t    \t        \tvalue = value.toLowerCase();\n\t    \t        \tvalue = value.toLowerCase();\n\t    \t        \tif (btn=='ok' && stoplist.original!=value) {\n\t    \t        \t\tvar combo = this.down('combo')\n\t    \t        \t\tif (Ext.String.trim(value).length==0) {\n\t    \t        \t\t\tcombo.setValue('empty');\n\t    \t        \t\t}\n\t    \t        \t\telse {\n\t    \t        \t    \tExt.Ajax.request({\n\t    \t        \t    \t    url: panel.getTromboneUrl(),\n\t    \t        \t    \t    params: {\n\t    \t        \t        \t\ttool: 'resource.StoredResource',\n\t    \t        \t    \t\t\tstoreResource: value,\n\t    \t        \t    \t\t\tcorpus: corpusId\n\t    \t        \t    \t    },\n\t    \t        \t    \t    combo: combo,\n\t    \t        \t    \t    success: function(response, req) {\n\t    \t        \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n\t    \t        \t    \t    \tvar store = req.combo.getStore();\n\t    \t        \t    \t    \tvar value = 'keywords-'+json.storedResource.id;\n\t    \t        \t    \t    \tstore.add({name: value, value: value});\n\t    \t        \t    \t    \treq.combo.setValue(value)\n\t    \t        \t    \t    \treq.combo.updateLayout()\n\t    \t        \t    \t    },\n\t    \t        \t    \t    scope: this\n\t    \t        \t    \t})\n\t    \t        \t\t}\n\t    \t        \t}\n\t    \t        },\n\t    \t        scope: this\n    \t\t\t})\n    \t    },\n    \t    scope: this\n    \t});\n    }\n})","Ext.define('Voyant.widget.QuerySearchField', {\n    extend: 'Ext.form.field.Tag',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.querysearchfield',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\tcorpus: undefined,\n\t\ttokenType: 'lexical',\n\t\tisDocsMode: false,\n\t\tinDocumentsCountOnly: undefined,\n\t\tstopList: undefined,\n\t\tshowAggregateInDocumentsCount: false,\n\t\tclearOnQuery: false,\n\t\tparentPanel: undefined,\n\t\tcurrentOriginalRawQueryPlan: undefined\n\t},\n\thasCorpusLoadedListener: false,\n\tisClearing: false, // flag for clearOnQuery\n    \n    constructor: function(config) {\n    \t\n    \tconfig = config || {};\n    \tvar itemTpl = config.itemTpl ? config.itemTpl : (config.inDocumentsCountOnly ?\n    \t\t\t('<tpl><tpl if=\"term.charAt(0)==\\'@\\'\">{term}</tpl><tpl if=\"term.charAt(0)!=\\'@\\'\">{term} ({inDocumentsCount})</tpl></tpl>') :\n    \t\t\t('<tpl><tpl if=\"term.charAt(0)==\\'@\\'\">{term}</tpl><tpl if=\"term.charAt(0)!=\\'@\\'\">{term} ({rawFreq})</tpl></tpl>'))\n    \tExt.applyIf(config, {\n    \t\tminWidth: 100,\n    \t\tmaxWidth: 200,\n    \t\tmatchFieldWidth : false,\n    \t\tminChars: 2,\n    \t    displayField: 'term',\n    \t    valueField: 'term',\n    \t    filterPickList: true,\n    \t    createNewOnEnter: true,\n    \t    createNewOnBlur: false,\n    \t    autoSelect: false,\n//    \t    emptyText: this.localize('querySearch'),\n    \t    tpl: [\n    \t    \t'<ul class=\"x-list-plain\"><tpl for=\".\">',\n    \t    \t'<li role=\"option\" class=\"x-boundlist-item\" style=\"white-space: nowrap;\">'+itemTpl+'</li>',\n    \t    \t'</tpl></ul>'\n    \t    ],\n    \t    triggers: {\n    \t        help: {\n    \t            weight: 2,\n    \t            cls: 'fa-trigger form-fa-help-trigger',\n    \t            handler: function() {\n    \t            \tExt.Msg.show({\n    \t            \t    title: this.localize('querySearch'),\n    \t            \t    message: this.getIsDocsMode() ? this.localize('querySearchDocsModeTip') : this.localize('querySearchTip'),\n    \t            \t    buttons: Ext.OK,\n    \t            \t    icon: Ext.Msg.INFO\n    \t            \t});\n    \t            },\n    \t            scope: 'this'\n    \t        }\n    \t   }\n    \t})\n    \tif (config.showAggregateInDocumentsCount) {\n    \t\tconfig.triggers.count = {\n\t            cls: 'fa-trigger',\n\t            handler: 'onHelpClick',\n\t            scope: 'this',\n\t            hidden: true\n    \t\t}\n    \t}\n    \tif (config.clearOnQuery) {\n    \t\tthis.setClearOnQuery(config.clearOnQuery);\n    \t}\n        this.callParent(arguments);\n    },\n    initComponent: function(config) {\n\n    \tvar me = this;\n\n    \tme.on(\"beforequery\", function(queryPlan) {\n\n    \t\tif (queryPlan.query) {\n    \t\t\tqueryPlan.query = queryPlan.query.trim();\n    \t\t\t\n    \t\t\t// set it in the raw state because we use it in the load event to add categories\n    \t\t\tvar originalRawQueryPlan = queryPlan.query.toLowerCase();\n    \t\t\tthis.setCurrentOriginalRawQueryPlan(queryPlan.query)\n    \t\t\t\n    \t\t\tif (queryPlan.query.charAt(0)!=\"@\") {\n\t    \t\t\tif (queryPlan.query.charAt(0)==\"^\") {\n\t    \t\t\t\tqueryPlan.query=queryPlan.query.substring(1)\n\t    \t\t\t\tqueryPlan.cancel = queryPlan.query.length==0; // cancel if it's just that character\n\t    \t\t\t}\n\t    \t\t\tif (queryPlan.query.charAt(0)==\"*\") { // convert leading wildcard to regex\n\t    \t\t\t\tqueryPlan.query = \".\"+queryPlan.query;\n\t    \t\t\t}\n\t    \t\t\tif (queryPlan.query.charAt(queryPlan.query.length-1)=='*' || queryPlan.query.charAt(queryPlan.query.length-1)=='|') {\n\t    \t\t\t\tqueryPlan.query=queryPlan.query.substring(0,queryPlan.query.length-1)\n\t    \t\t\t\tqueryPlan.cancel = queryPlan.query.length==0; // cancel if it's just that character\n\t    \t\t\t}\n\t    \t\t\tif (queryPlan.query.charAt(0)==\".\") {\n\t    \t\t\t\tqueryPlan.cancel = queryPlan.query.length< (/\\W/.test(queryPlan.query.charAt(1)) ? 5 : 4) // cancel if we only have 3 or fewer after .\n\t    \t\t\t}\n\t    \t\t\ttry {\n\t                    new RegExp(queryPlan.query);\n\t\t            }\n\t\t            catch(e) {\n\t\t            \tqueryPlan.cancel = true;\n\t\t            }\n\t\t            if (queryPlan.query.indexOf('\"')>-1) { // deal with unfinished phrases\n\t\t            \tif (queryPlan.query.indexOf(\" \")==-1) {queryPlan.cancel=true} // no space in phrase\n\t\t            \tif ((queryPlan.query.match(/\"/) || []).length!=2) {queryPlan.cancel=true;} // not balanced quotes\n\t\t            }\n\t\t            if (queryPlan.query.indexOf(\"*\")>-1) {\n\t\t            \t// skip for multiword or pipes\n\t\t            \tif (queryPlan.query.indexOf(\" \")==-1 && queryPlan.query.indexOf(\"|\")==-1) {\n\t\t            \t\tqueryPlan.query += \",^\"+queryPlan.query;\n\t\t            \t}\n\t\t            } else {\n\t\t            \tqueryPlan.query = queryPlan.query+\"*\"+ (queryPlan.query.indexOf(\" \")==-1  && queryPlan.query.indexOf(\"|\")==-1 ? \",\"+\"^\"+queryPlan.query+\"*\" : \"\")\n\t\t            }\n    \t\t\t} else if (queryPlan.query==\"@\") { // no letters yet\n    \t\t\t\tqueryPlan.cancel = true;\n    \t\t\t}\n\t            \n\t            var parent = me.getParentPanel();\n\t            if (queryPlan.cancel==false && parent) {\n\t            \tvar originalRawQueryPlanWithoutAt = originalRawQueryPlan.charAt(0)==\"@\" ? originalRawQueryPlan.substring(1) : originalRawQueryPlan;\n\t\t            for (var cat in parent.getApplication().getCategoriesManager().getCategories()) {\n\t\t            \tif (cat.toLowerCase().indexOf(originalRawQueryPlanWithoutAt)>-1) {\n\t\t            \t\tqueryPlan.query = \"@\"+cat+(originalRawQueryPlan.charAt(0)==\"@\" ? \"\" : \",\"+queryPlan.query);\n\t\t            \t}\n\t\t            }\t\n\t            }\n    \t\t}\n\t            \n\t            \n    \t}, this);\n    \t\n    \tme.on(\"change\", function(tags, queries) {\n    \t\t\n    \t\tif (!me.isClearing) {\n\t    \t\tqueries = queries.map(function(query) {return query.replace(/^(\\^?)\\*/, \"$1.*\")});\n\t    \t\tme.up('panel').fireEvent(\"query\", me, queries);\n\t    \t\tif (me.getClearOnQuery()) {\n\t    \t\t\tme.isClearing = true;\n\t    \t\t\tme.removeValue(me.getValueRecords());\n\t    \t\t}\n\t    \t\tif (me.triggers.count) {\n\t    \t\t\tme.triggers.count.show();\n\t    \t\t\tme.triggers.count.getEl().setHtml('0');\n\t    \t\t\tif (queries.length>0) {\n\t    \t\t\t\tme.getCorpus().getCorpusTerms().load({\n\t    \t\t\t\t\tparams: {\n\t    \t\t\t\t\t\tquery: queries.map(function(q) {return '('+q+')'}).join(\"|\"),\n\t\t\t\t    \t\t\ttokenType: me.getTokenType(),\n\t\t\t\t    \t\t\tstopList: me.getStopList(),\n\t\t\t\t    \t\t\tinDocumentsCountOnly: true\n\t    \t\t\t\t\t},\n\t    \t\t\t\t\tcallback: function(records, operation, success) {\n\t    \t\t\t\t\t\tif (success && records && records.length==1) {\n\t    \t\t\t\t\t\t\tme.triggers.count.getEl().setHtml(records[0].getInDocumentsCount())\n\t    \t\t\t\t\t\t}\n\t    \t\t\t\t\t}\n\t    \t\t\t\t})\n\t    \t\t\t} else {\n\t    \t\t\t\tme.triggers.count.hide();\n\t    \t\t\t}\n\t    \t\t}\n    \t\t} else {\n    \t\t\tme.isClearing = false;\n    \t\t}\n    \t});\n\n    \t// we need to make sure the panel is a voyantpanel\n    \t// so that we get loadedCorpus event after a call to Voyant.util.Toolable.replacePanel\n    \tvar parentPanel = me.findParentBy(function(clz) {\n    \t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n\t\t});\n    \tif (parentPanel != null) {\n    \t\tthis.setParentPanel(parentPanel);\n    \t\tif (parentPanel.getCorpus && parentPanel.getCorpus()) {\n    \t\t\tme.on(\"afterrender\", function(c) {\n    \t\t\t\tthis.doSetCorpus(parentPanel.getCorpus());\t\n    \t\t\t})\n    \t\t\tme.hasCorpusLoadedListener = true;    \t\t\t\n    \t\t} else {\n\t    \t    \tparentPanel.on(\"loadedCorpus\", function(src, corpus) {\n\t    \t    \t\tme.doSetCorpus(corpus);\n\t    \t    \t}, me);\n\t    \t    \tme.hasCorpusLoadedListener = true;    \t\t\t\n    \t\t}\n    \t}\n    \t\n    \tme.on(\"afterrender\", function(c) {\n    \t\t\n    \t\tif (me.hasCorpusLoadedListener === false) {\n    \t\t\tif (!me.getCorpus()) {\n    \t    \t\tparentPanel = me.findParentBy(function(clz) {\n    \t    \t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n        \t\t\t});\n    \t    \t\tif (parentPanel == null) {\n    \t    \t\t\tparentPanel = me.up('window').panel;\n    \t    \t\t}\n    \t    \t\tvar corpus = parentPanel.getApplication().getCorpus();\n    \t\t\t\tif (corpus !== undefined) {\n    \t\t\t\t\tme.doSetCorpus(corpus);\n    \t\t\t\t} else {\n    \t\t\t\t\tparentPanel.on(\"loadedCorpus\", function(src, corpus) {\n    \t\t\t\t\t\tme.doSetCorpus(corpus);\n    \t\t\t    \t}, me);\n    \t\t\t\t\tme.hasCorpusLoadedListener = true;\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n\t\t\t\n    \t\tif (me.triggers && me.triggers.help) {\n    \t\t\tExt.tip.QuickTipManager.register({\n    \t\t\t\ttarget: me.triggers.help.getEl(),\n    \t\t\t\ttext: me.getIsDocsMode() ? me.localize('querySearchDocsModeTip') : me.localize('querySearchTip')\n\t\t\t\t});\n\t\t\t}\n    \t\tif (me.triggers && me.triggers.count) {\n    \t\t\tExt.tip.QuickTipManager.register({\n    \t\t\t\ttarget: me.triggers.count.getEl(),\n    \t\t\t\ttext: me.localize('aggregateInDocumentsCount')\n\t\t\t\t});\n\t\t\t}\n    \t});\n    \t\n    \tme.on(\"beforedestroy\", function(c) {\n    \t\t\n    \t\tif (me.triggers && me.triggers.help) {\n    \t\t\tExt.tip.QuickTipManager.unregister(me.triggers.help.getEl());\n    \t\t}\n    \t\tif (me.triggers && me.triggers.count) {\n    \t\t\tExt.tip.QuickTipManager.unregister(me.triggers.count.getEl());\n    \t\t}\n    \t});\n    \t\n    \tme.callParent(arguments);\n    },\n    \n    doSetCorpus: function(corpus) {\n\t\t\n    \tif (corpus != null) {\n\t    \tthis.setCorpus(corpus);\n\t\t\tvar stopList = this.getStopList();\n\t\t\tif (stopList==undefined) {\n\t    \t\tif (this.getApiParam) {this.setStopList(this.getApiParam(\"stopList\"))}\n\t    \t\telse {\n\t    \t\t\tvar parent = this.up(\"panel\");\n\t    \t\t\twhile (parent) {\n\t    \t\t\t\tif (parent && parent.getApiParam) {\n\t\t    \t\t\t\tthis.setStopList(parent.getApiParam(\"stopList\"))\n\t\t    \t\t\t\tbreak;\n\t\t    \t\t\t}\n\t    \t\t\t\tparent = parent.up(\"panel\");\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t}\n\n\t\t\tvar categories = this.getApiParam ? this.getApiParam(\"categories\") : undefined;\n\t\t\tif (!categories) {\n    \t\t\tvar parent = this.up(\"panel\");\n    \t\t\twhile (parent) {\n    \t\t\t\tif (parent && parent.getApiParam) {\n    \t\t\t\t\tcategories = parent.getApiParam('categories');\n\t    \t\t\t\tbreak;\n\t    \t\t\t}\n    \t\t\t\tparent = parent.up(\"panel\");\n    \t\t\t}\n\t\t\t}\n\t\t\tvar store = corpus.getCorpusTerms({\t\t\t\t\n\t\t\t\tcorpus: corpus.getAliasOrId(),\n\t\t\t\tproxy: {\n\t\t\t\t\textraParams: {\n\t\t\t    \t\t\tlimit: 10,\n\t\t\t    \t\t\ttokenType: this.tokenType,\n\t\t\t    \t\t\tstopList: this.getStopList(),\n\t\t\t    \t\t\tinDocumentsCountOnly: this.getInDocumentsCountOnly(),\n\t\t\t    \t\t\tcategories: categories\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n//\t\t\tstore.on(\"load\", function() {\n//\t\t\t\tthis.fireEvent.apply(this, [\"load\"].concat(Array.prototype.slice.call(arguments)));\n//\t\t\t}, this);\n\n\t\t\tthis.setStore(store);\n    \t}\n    }\n    \n});\n","Ext.define('Voyant.widget.TotalPropertyStatus', {\n    extend: 'Ext.Component',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.totalpropertystatus',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n    initComponent: function() {\n        var me = this;\n        Ext.applyIf(me, {\n            tpl: this.localize('totalPropertyStatus'),\n            itemId: 'totalpropertystatus',\n            style: 'margin-right:5px',\n            listeners: {\n            \tafterrender: function(cmp) {\n            \t\tvar grid = cmp.up('grid')\n            \t\tif (grid) {\n            \t\t\tvar store = grid.getStore();\n            \t\t\tcmp.updateStatus(store.getTotalCount()); // make sure we set this in case of lazy render\n            \t\t\tgrid.getStore().on(\"totalcountchange\", cmp.updateStatus, cmp) // bind changes to update\n            \t\t}\n            \t}\n            }\n        })\n        me.callParent(arguments);\n    },\n    updateStatus: function(count) {\n    \tthis.update({count: count})\n    }\n});\n","Ext.define('Voyant.widget.DocumentSelector', {\r\n    mixins: ['Voyant.util.Localization'],\r\n    alias: 'widget.documentselector',\r\n\tglyph: 'xf10c@FontAwesome',\r\n\tstatics: {\r\n\t\ti18n: {\r\n\t\t}\r\n\t},\r\n\r\n\tconfig: {\r\n\t\tdocs: undefined,\r\n\t\tcorpus: undefined,\r\n\t\tsingleSelect: false\r\n\t},\r\n\t\r\n    initComponent: function() {\r\n\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tthis.setSingleSelect(this.config.singleSelect == undefined ? this.getSingleSelect() : this.config.singleSelect);\r\n\t\t\r\n\t\tExt.apply(me, {\r\n\t\t\ttext: this.localize('documents'),\r\n\t\t\tmenu: {\r\n\t\t\t\twidth: 250,\r\n\t\t\t\tfbar: [{\r\n\t\t\t\t\txtype: 'checkbox',\r\n\t\t\t\t\thidden: this.getSingleSelect(),\r\n\t\t\t\t\tboxLabel: this.localize(\"all\"),\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tchange: {\r\n\t\t\t\t\t\t\tfn: function(item, checked) {\r\n\t\t\t\t\t\t\t\tthis.getMenu().items.each(function(item) {\r\n\t\t\t\t\t\t\t\t\titem.setChecked(checked);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},{xtype:'tbfill'},{\r\n\t\t    \t\txtype: 'button',\r\n\t\t    \t\ttext: this.localize('ok'),\r\n\t\t\t\t\thidden: this.getSingleSelect(),\r\n\t    \t    \tscale: 'small',\r\n\t\t    \t\thandler: function(button, e) {\r\n\t\t    \t\t\tvar docs = [];\r\n\t\t    \t\t\tthis.getMenu().items.each(function(item) {\r\n\t\t    \t\t\t\tif (item.checked) {\r\n\t\t\t    \t\t\t\tdocs.push(item.docId);\r\n\t\t    \t\t\t\t}\r\n\t\t    \t\t\t}, this);\r\n\t\t    \t\t\t\r\n\t\t    \t\t\t// tell parent tool\r\n\t\t\t\t\t\tvar panel = button.findParentBy(function(clz) {\r\n\t\t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (panel) {\r\n\t\t\t    \t\t\tpanel.fireEvent('documentsSelected', button, docs);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t    \t\t\t// hide the opened menu\r\n\t\t    \t\t\tbutton.findParentBy(function(clz) {\r\n\t\t    \t\t\t\tif (clz.isXType(\"button\") && clz.hasVisibleMenu()) {\r\n\t\t    \t\t\t\t\tclz.hideMenu();\r\n\t\t    \t\t\t\t\treturn true;\r\n\t\t    \t\t\t\t}\r\n\t\t    \t\t\t\treturn false;\r\n\t\t    \t\t\t});\r\n\t\t    \t\t},\r\n\t\t    \t\tscope: this\r\n\t\t    \t},{\r\n\t\t    \t\txtype: 'button',\r\n\t\t    \t\ttext: this.localize('cancel'),\r\n\t    \t    \tscale: 'small',\r\n\t\t    \t\thandler: function(b, e) {\r\n\t\t    \t\t\tthis.findParentBy(function(clz) {\r\n\t\t    \t\t\t\tif (clz.isXType(\"button\") && clz.hasVisibleMenu()) {\r\n\t\t    \t\t\t\t\tclz.hideMenu();\r\n\t\t    \t\t\t\t\treturn true;\r\n\t\t    \t\t\t\t}\r\n\t\t    \t\t\t\treturn false;\r\n\t\t    \t\t\t}, this);\r\n\t\t    \t\t\tthis.hideMenu();\r\n\t\t    \t\t},\r\n\t\t    \t\tscope: this\r\n\t\t    \t}]\r\n\t\t\t},\r\n\t\t\tlisteners: {\r\n\t\t\t\tafterrender: function(selector) {\r\n\t\t\t\t\tselector.on(\"loadedCorpus\", function(src, corpus) {\r\n\t\t\t\t\t\tthis.setCorpus(corpus);\r\n\t\t\t\t\t\tif (corpus.getDocumentsCount()==1) {\r\n\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tselector.populate(corpus.getDocumentsStore().getRange(), true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, selector);\r\n\t\t\t\t\tvar panel = selector.findParentBy(function(clz) {\r\n\t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (panel) {\r\n\t\t\t\t\t\tpanel.on(\"loadedCorpus\", function(src, corpus) {\r\n\t\t\t\t\t\t\tselector.fireEvent(\"loadedCorpus\", src, corpus);\r\n\t\t\t\t\t\t}, selector);\r\n\t\t\t\t\t\tif (panel.getCorpus && panel.getCorpus()) {selector.fireEvent(\"loadedCorpus\", selector, panel.getCorpus());}\r\n\t\t\t\t\t\telse if (panel.getStore && panel.getStore() && panel.getStore().getCorpus && panel.getStore().getCorpus()) {\r\n\t\t\t\t\t\t\tselector.fireEvent(\"loadedCorpus\", selector, panel.getStore().getCorpus());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n    },\r\n    \r\n    populate: function(docs, replace) {\r\n    \tthis.setDocs(docs);\r\n    \t\r\n    \tvar menu = this.getMenu();\r\n    \tif (replace) {\r\n    \t\tmenu.removeAll();\r\n    \t}\r\n    \t\r\n    \tvar isSingleSelect = this.getSingleSelect();\r\n    \t\r\n    \tvar groupId = 'docGroup'+Ext.id();\r\n    \tdocs.forEach(function(doc, index) {\r\n    \t\tmenu.add({\r\n    \t\t\txtype: 'menucheckitem',\r\n    \t\t\ttext: doc.getShortTitle(),\r\n    \t\t\tdocId: doc.get('id'),\r\n    \t\t\tchecked: isSingleSelect && index == 0 || !isSingleSelect,\r\n    \t\t\tgroup: isSingleSelect ? groupId : undefined,\r\n    \t\t\tcheckHandler: function(item, checked) {\r\n    \t\t\t\tif (this.getSingleSelect() && checked) {\r\n    \t\t\t\t\tvar panel = this.findParentBy(function(clz) {\r\n    \t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\r\n    \t\t\t\t\t});\r\n    \t\t\t\t\tif (panel) {\r\n\t    \t\t\t\t\tpanel.fireEvent('documentSelected', this, doc);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t},\r\n    \t\t\tscope: this\r\n    \t\t});\r\n    \t}, this);\r\n    \t\r\n    }\r\n});\r\n\r\nExt.define('Voyant.widget.DocumentSelectorButton', {\r\n    extend: 'Ext.button.Button',\r\n    alias: 'widget.documentselectorbutton',\r\n    mixins: ['Voyant.widget.DocumentSelector'],\r\n    initComponent: function() {\r\n    \tthis.mixins[\"Voyant.widget.DocumentSelector\"].initComponent.apply(this, arguments);\r\n\t\tthis.callParent();\r\n    }\r\n})\r\n    \r\nExt.define('Voyant.widget.DocumentSelectorMenuItem', {\r\n    extend: 'Ext.menu.Item',\r\n    alias: 'widget.documentselectormenuitem',\r\n    mixins: ['Voyant.widget.DocumentSelector'],\r\n    initComponent: function() {\r\n    \tthis.mixins[\"Voyant.widget.DocumentSelector\"].initComponent.apply(this, arguments);\r\n\t\tthis.callParent();\r\n    }\r\n})\r\n","Ext.define('Voyant.widget.CorpusDocumentSelector', {\n    extend: 'Ext.button.Button',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.corpusdocumentselector',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\tcorpus: undefined,\n\t\tsingleSelect: false\n\t},\n\t\n    initComponent: function() {\n\t\tvar me = this;\n\t\t\n\t\tthis.setSingleSelect(this.config.singleSelect == undefined ? this.getSingleSelect() : this.config.singleSelect);\n\t\t\n\t\tExt.apply(me, {\n\t\t\ttext: this.localize('scale'),\n\t\t\tglyph: 'xf059@FontAwesome',\n\t\t\tmenu: {\n\t\t\t\titems: [{\n\t\t\t\t\ttext: this.localize(\"corpus\"),\n\t\t\t\t\tglyph: 'xf111@FontAwesome',\n\t\t\t\t\thandler: function(button) {\n\t\t\t\t\t\tvar panel = this.findParentBy(function(clz) {\n\t\t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (panel) {\n\t\t\t\t\t\t\tbutton.nextSibling().menu.items.each(function(item) {\n\t\t\t\t\t\t\t\titem.setChecked(false, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tpanel.fireEvent(\"corpusSelected\", this, this.getCorpus());\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t},{\n\t\t\t\t\txtype: 'documentselectormenuitem',\n\t\t\t\t\tsingleSelect: this.getSingleSelect()\n\t\t\t\t}]\n\t\t\t},\n\t\t\tlisteners: {\n\t\t\t\tafterrender: function(selector) {\n\t\t\t\t\tselector.on(\"loadedCorpus\", function(src, corpus) {\n\t\t\t\t\t\tthis.setCorpus(corpus);\n\t\t\t\t\t\tif (corpus.getDocumentsCount()==1) {\n\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, selector);\n\t\t\t\t\tvar panel = selector.findParentBy(function(clz) {\n\t\t\t\t\t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n\t\t\t\t\t});\n\t\t\t\t\tif (panel) {\n\t\t\t\t\t\tpanel.on(\"loadedCorpus\", function(src, corpus) {\n\t\t\t\t\t\t\tselector.fireEvent(\"loadedCorpus\", src, corpus);\n\t\t\t\t\t\t}, selector);\n\t\t\t\t\t\tif (panel.getCorpus && panel.getCorpus()) {selector.fireEvent(\"loadedCorpus\", selector, panel.getCorpus())}\n\t\t\t\t\t\telse if (panel.getStore && panel.getStore() && panel.getStore().getCorpus && panel.getStore().getCorpus()) {\n\t\t\t\t\t\t\tselector.fireEvent(\"loadedCorpus\", selector, panel.getStore().getCorpus());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tme.callParent(arguments);\t\n    }\n});","Ext.define('Voyant.widget.DownloadFilenameBuilder', {\n    extend: 'Ext.form.FieldContainer', //'Ext.container.Container',\n    mixins: ['Voyant.util.Localization', 'Ext.form.field.Field'],\n    alias: 'widget.downloadfilenamebuilder',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t    name: 'documentFilename',\n\t    itemId: 'documentFilename',\n\t\tfields: ['pubDate', 'title', 'author'],\n\t\tvalue: ['pubDate', 'title'],\n\t\twidth: 400\n\t},\n\t\n\n    initComponent: function(config) {\n    \tconfig = config || {};\n        var me = this;\n        \n        me.initField();\n\n        me.on('afterrender', function() {\n        \tthis.items.eachKey(function(key) {\n        \t\tnew Ext.dd.DropZone(this.items.get(key).getTargetEl(), {\n        \t\t\tddGroup: 'downloadfilename',\n        \t\t\tgetTargetFromEvent: function(e) {\n        \t\t\t\tvar target = e.getTarget();\n        \t\t\t\t// check that we're not dropping on another source\n        \t\t\t\treturn target.className && target.className.indexOf('dragsource')>-1 ? target.parentNode : target;\n        \t        },\n        \t        onNodeDrop : function(target, dd, e, data){\n        \t        \ttarget.appendChild(dd.el.dom);\n        \t            return true;\n        \t        }\n        \t\t});\n        \t}, this)\n        \t\n        \tthis.getFields().map(function(item) {\n        \t\titem = Ext.isString(item) ? {\n            \t\ttag: 'span',\n            \t\thtml: this.localize(item+\"Label\"),\n            \t\tvalue: item\n        \t\t} : item;\n        \t\tvar container = this.queryById(Ext.Array.contains(this.getValue(), item.value) ? 'enabled' : 'available')\n\t\t\t\tvar el = Ext.dom.Helper.append(container.getTargetEl(), Ext.apply(item, {cls: 'dragsource'}));\n    \t\t\tExt.create('Ext.dd.DragSource', el, {\n    \t\t\t\tddGroup: 'downloadfilename'\n                });\n        \t}, this)\n        }, me);\n        me.callParent(arguments);\n    }, \n    defaults: {\n    \txtype: 'container',\n    \twidth: '100%'\n    },\n    items: [{\n    \titemId: 'enabled',\n    \tcls: 'dropzone dropzone-enabled'\n    }, {\n    \titemId: 'available',\n    \tcls: 'dropzone dropzone-disabled'\n    }],\n    \n    \n    getValue: function() {\n    \treturn this.rendered ? this.getTargetEl().query('.dropzone-enabled .dragsource').map(function(source) {return source.getAttribute('value')}) : this.value;\n    },\n    \n    setValue: function(val) {\n    \tif (this.rendered) {\n        \tthis.getTargetEl().query(\".dragsource\", false).forEach(function(source) {\n        \t\tvar enabled = Ext.Array.contains(this.value, source.getAttribute('value'))\n        \t\tif (enabled && source.parent().hasCls('dropzone-disabled')) {\n        \t\t\tthis.queryById('enabled').getTargetEl().appendChild(source.dom);\n        \t\t} else if (!enabled && source.parent().hasCls('dropzone-enabled')) {\n        \t\t\tthis.queryById('available').getTargetEl().appendChild(source.dom);\n        \t\t}\n        \t}, this)\n    \t} else {\n    \t\tthis.value = val;\n    \t}\n    }\n    \n    \n});\n","Ext.define('Voyant.widget.DownloadFileFormat', {\n    extend: 'Ext.form.CheckboxGroup', //'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.downloadfileformat',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n    initComponent: function(config) {\n    \tconfig = config || {};\n        var me = this;\n        \n        Ext.apply(this, {\n        \tlabelAlign: config.labelAlign ? config.labelAlign : 'right'\n        })\n\n        Ext.applyIf(this, {\n        \tfieldLabel: this.localize('fieldLabel'),\n        \titems: [\n\t            {boxLabel: this.localize('original'), name: 'documentFormat', inputValue: 'SOURCE'},\n\t            {boxLabel: this.localize('voyantXml'), name: 'documentFormat', inputValue: 'VOYANT'},\n                {boxLabel: this.localize('plainText'), name: 'documentFormat', inputValue: 'TXT'}\n        \t],\n        \twidth: 450\n        })\n        me.on('afterrender', function() {\n        \tthis.query('checkbox').forEach(function(cmp) {\n        \t\tvar tooltip = this.localize(cmp.inputValue+\"Tip\");\n        \t\tif (tooltip.indexOf(cmp.inputValue+\"Tip\")==-1) {\n\t\t        \tExt.tip.QuickTipManager.register({\n\t\t                 target:cmp.getEl(),\n\t\t                 text: tooltip\n\t\t             });\n        \t\t}\n        \t}, this)\n        }, this)\n        me.on('beforedestroy', function() {\n        \tthis.query('checkbox').forEach(function(cmp) {\n        \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n        \t}, this);\n        }, this);\n\n        me.callParent(arguments);\n    }\n});\n","Ext.define('Voyant.widget.DownloadOptions', {\n    extend: 'Ext.form.FieldSet',\n    mixins: ['Voyant.util.Localization'],\n    requires: ['Voyant.widget.DownloadFileFormat', 'Voyant.widget.DownloadFilenameBuilder'],\n    alias: 'widget.downloadoptions',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\titems: [{xtype: 'downloadfileformat'}, {xtype: 'downloadfilenamebuilder'}]\n\t},\n    initComponent: function(config) {\n    \tconfig = config || {};\n    \tvar me = this;\n        Ext.apply(this, {\n        \ttitle: config.title ? config.title : this.localize('title')\n        })\n        me.callParent(arguments);\n    }\n});\n","Ext.define('Voyant.widget.FontFamilyOption', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.fontfamilyoption',\n    statics: {\n    \ti18n: {\n    \t},\n    \tfonts: [{name: \"Georgia\", value: 'Georgia, serif'},\n\t            {name: \"Palatino\", value: '\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif'},\n\t            {name: \"Times New Roman\", value: '\"Times New Roman\", Times, serif'},\n\t            {name: \"Arial\", value: 'Arial, Helvetica, sans-serif'},\n\t            {name: \"Arial Black\", value: '\"Arial Black\", Gadget, sans-serif'},\n\t            {name: \"Comic Sans MS\", value: '\"Comic Sans MS\", cursive, sans-serif'},\n\t            {name: \"Impact\", value: 'Impact, Charcoal, sans-serif'},\n\t            {name: \"Lato\", value: 'LatoWeb'},\n\t            {name: \"Lucida\", value: '\"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif'},\n\t            {name: \"Tahoma/Geneva\", value: 'Tahoma, Geneva, sans-serif'},\n\t            {name: \"Trebuchet MS/Helvetica\", value: '\"Trebuchet MS\", Helvetica, sans-serif'},\n\t            {name: \"Verdana/Geneva\", value: 'Verdana, Geneva, sans-serif'},\n\t            {name: \"Courrier New\", value: '\"Courier New\", Courier, monospace'},\n\t            {name: \"Lucida/Monaco\", value: '\"Lucida Console\", Monaco, monospace'}]\n    },\n    name: 'fontFamily',\n    initComponent: function(config) {\n    \tconfig = config || {};\n    \tvar me = this;\n    \tvar value = this.up('window').panel.getApiParam('fontFamily');\n    \tvar data = Ext.ClassManager.getClass(this).fonts;\n\n    \tif (!Ext.Array.contains(data.map(function(item) {return item.value}), value)) {\n        \tdata.splice(0, 0, {name : value, value: value});//\n    \t}\n    \t\n    \tExt.apply(me, {\n    \t\titems: {\n    \t\t\txtype: 'combo',\n    \t        queryMode: 'local',\n    \t        name: 'fontFamily',\n    \t        value: value,\n    \t        triggerAction: 'all',\n    \t        editable: true,\n    \t        fieldLabel: this.localize('label'),\n    \t        labelAlign: 'right',\n    \t        displayField: 'name',\n    \t        valueField: 'value',\n    \t        store: {\n    \t            fields: ['name', 'value'],\n    \t            data: data\n    \t        },\n    \t        width: 400\n    \t\t}\n    \t})\n        me.callParent(arguments);\n    }\n})","Ext.define('Voyant.widget.ColorPaletteOption', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.colorpaletteoption',\n    layout: 'hbox',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n    \n    paletteTpl: new Ext.XTemplate(\n\t\t'<tpl for=\".\">',\n\t\t\t'<div class=\"color\" style=\"background-color: rgb({color});\"></div>',\n\t\t'</tpl>'\n\t),\n\tpaletteStore: new Ext.data.ArrayStore({\n        fields: ['id', 'color'],\n        listeners: {\n        \tupdate: function(store, record, op, mod, details) {\n        \t},\n        \tscope: this\n        } \n    }),\n    \n    editPaletteWin: null,\n    spectrum: null,\n    \n    initComponent: function(config) {\n    \tvar me = this;\n\n    \tvar app = this.up('window').panel.getApplication();\n    \tvar data = [];\n    \tfor (var key in app.getPalettes()) {\n    \t\tdata.push({name: key, value: key});\n    \t}\n    \tvar value = app.getApiParam('palette');\n    \t\n    \tExt.apply(me, {\n\t    \t\titems: [{\n\t    \t        xtype: 'combo',\n\t    \t        queryMode: 'local',\n\t    \t        value: value,\n\t    \t        triggerAction: 'all',\n\t    \t        editable: true,\n\t    \t        fieldLabel: me.localize('palette'),\n\t    \t        labelAlign: 'right',\n\t    \t        name: 'palette',\n\t    \t        displayField: 'name',\n\t    \t        valueField: 'value',\n\t    \t        store: {\n\t    \t            fields: ['name', 'value'],\n\t    \t            data: data\n\t    \t        }\n\t    \t\t}, {width: 10}, {xtype: 'tbspacer'}, {\n\t    \t\t\txtype: 'button',\n\t    \t\t\ttext: this.localize('editList'),\n\t\t            ui: 'default-toolbar',\n\t    \t\t\thandler: this.editPalette,\n\t    \t\t\tscope: this\n\t    \t\t}\n//\t    \t\t, {width: 10}, {\n//\t    \t\t\txtype: 'checkbox',\n//\t    \t\t\tname: 'paletteGlobal',\n//\t    \t\t\tchecked: true,\n//\t    \t\t\tboxLabel: this.localize('applyGlobally')\n//\t    \t\t}\n\t    \t\t]\n    \t});\n        me.callParent(arguments);\n    },\n    \n    editPalette: function() {\n    \tvar value = this.down('combo').getValue();\n    \tthis.loadPalette(value);\n    \t\n    \tthis.editPaletteWin = Ext.create('Ext.window.Window', {\n\t\t\ttitle: this.localize('paletteEditor'),\n\t\t\tmodal: true,\n\t\t\theight: 300,\n\t\t\twidth: 425,\n\t\t\tpadding: 5,\n\t\t\tlayout: {\n\t\t\t\ttype: 'hbox',\n\t\t\t\talign: 'stretch'\n\t\t\t},\n\t\t\titems:[{\n\t\t\t\tflex: 1,\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\talign: 'stretch'\n\t\t\t\t},\n\t\t\t\titems: [{\n\t\t\t\t\theight: 24,\n\t\t\t\t\tmargin: '0 0 5 0',\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\ttext: this.localize('add'),\n\t\t\t\t\t\tmargin: '0 5 0 0',\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tvar color = this.spectrum.spectrum('get').toRgb();\n\t\t\t\t\t\t\tvar dv = this.editPaletteWin.down('dataview');\n\t\t\t\t\t\t\tthis.paletteStore.add([ [Ext.id(), [color.r, color.g, color.b]] ]);\n\t\t\t\t\t\t\tdv.refresh();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\ttext: this.localize('remove'),\n\t\t\t\t\t\tmargin: '0 5 0 0',\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tvar dv = this.editPaletteWin.down('dataview');\n\t\t\t\t\t\t\tvar sel = dv.getSelectionModel().getSelection()[0];\n\t\t\t\t\t\t\tif (sel != null) {\n\t\t\t\t\t\t\t\tthis.paletteStore.remove(sel);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdv.refresh();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\ttext: this.localize('clear'),\n\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\tthis.paletteStore.removeAll();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\txtype: 'dataview',\n\t\t\t\t\tflex: 1,\n\t\t\t\t\tscrollable: 'y',\n\t\t        \tstore: this.paletteStore,\n\t\t        \ttpl: this.paletteTpl,\n\t\t        \titemSelector: 'div.color',\n\t\t        \toverItemCls: 'over',\n\t\t        \tselectedItemCls: 'selected',\n\t\t        \tselectionModel: {\n\t\t        \t\tmode: 'SINGLE'\n\t\t        \t},\n\t\t        \tlisteners: {\n\t\t        \t\tselectionchange: function(viewmodel, selected, opts) {\n\t\t        \t\t\tif (selected[0] != null) {\n\t\t\t\t\t\t\t\tvar color = selected[0].get('color');\n\t\t\t\t\t\t\t\tvar parentPanel = this.up('window').panel;\n\t\t\t\t\t\t\t\tvar hex = parentPanel.getApplication().rgbToHex(color);\n\t\t\t\t\t\t\t\tthis.spectrum.spectrum('set', hex);\n\t\t\t\t\t\t\t}\n\t\t        \t\t},\n\t\t        \t\tscope: this\n\t\t        \t}\n\t\t\t\t}]\n\t\t\t},{\n\t\t\t\titemId: 'colorEditor',\n\t\t\t\twidth: 200,\n\t\t\t\tmargin: '0 0 0 5',\n\t\t\t\thtml: '<input type=\"text\" style=\"display: none;\" />'\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: this.localize('saveNewPalette'),\n\t\t\t\thandler: function(btn) {\n\t\t\t\t\tthis.savePalette();\n\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: this.localize('cancel'),\n\t\t\t\thandler: function(btn) {\n\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tclose: function(panel) {\n\t\t\t\t\tif (this.spectrum) {\n\t\t\t\t\t\tthis.spectrum.spectrum('destroy');\n\t\t\t\t\t\tthis.spectrum = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n    \t}).show();\n    \t\n    \tthis.initSpectrum();\n    },\n    \n    setColorForSelected: function(color) {\n    \tif (this.spectrum !== null) { // need check due to https://github.com/bgrins/spectrum/issues/387\n\t\t\tvar rgb = color.toRgb();\n\t\t\tvar rgbA = [rgb.r, rgb.g, rgb.b];\n\t\t\tvar dv = this.editPaletteWin.down('dataview');\n\t\t\tvar sel = dv.getSelectionModel().getSelection()[0];\n\t\t\tif (sel != null) {\n\t\t\t\tsel.set('color', rgbA);\n\t\t\t}\n    \t}\n\t},\n    \n\tinitSpectrum: function() {\n\t\tif (this.spectrum === null) {\n\t\t\tvar editor = this.editPaletteWin.down('#colorEditor');\n\t\t\tvar input = editor.el.down('input');\n\t\t\tthis.spectrum = $(input.dom).spectrum({\n\t\t\t\tflat: true,\n\t\t\t\tshowInput: true,\n\t\t\t\tshowButtons: false,\n\t\t\t\tpreferredFormat: 'hex',\n\t\t\t\tchange: this.setColorForSelected.bind(this),\n\t\t\t\tmove: this.setColorForSelected.bind(this)\n\t\t\t});\n\t\t}\n\t},\n\t\n    loadPalette: function(paletteId) {\n    \tvar parentPanel = this.up('window').panel;\n    \t\n    \tvar palette = parentPanel.getApplication().getColorPalette(paletteId);\n    \tvar paletteData = [];\n    \tpalette.forEach(function(c) {\n    \t\tpaletteData.push([Ext.id(), c]);\n    \t}, this);\n    \tthis.paletteStore.loadData(paletteData);\n    },\n    \n    savePalette: function() {\n    \tvar value = [];\n    \tthis.paletteStore.each(function(c) {\n    \t\tvalue.push(c.get('color'));\n    \t});\n    \tvar valueString = Ext.encode(value);\n    \tvar parentPanel = this.up('window').panel;\n    \tvar corpusId = parentPanel.getCorpus().getId();\n    \tExt.Ajax.request({\n    \t    url: parentPanel.getTromboneUrl(),\n    \t    params: {\n        \t\ttool: 'resource.StoredResource',\n    \t\t\tstoreResource: valueString,\n    \t\t\tcorpus: corpusId\n    \t    },\n    \t    success: function(response, req) {\n    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \tvar id = json.storedResource.id;\n    \t    \tvar combo = this.down('combo');\n    \t    \tvar store = combo.getStore();\n    \t    \tstore.add({name: id, value: id});\n    \t    \tcombo.setValue(id);\n    \t    \tcombo.updateLayout();\n    \t    \t\n    \t    \tparentPanel.getApplication().addColorPalette(id, value);\n    \t    },\n    \t    scope: this\n    \t});\n    }\n});","Ext.define('Voyant.widget.VoyantChart', {\n    extend: 'Ext.chart.CartesianChart',\n    mixins: ['Voyant.util.Localization','Voyant.util.Api','Voyant.notebook.util.Embed'],\n    alias: 'widget.voyantchart',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\ttableJson: undefined\n    \t}\n    },\n    constructor: function(config) {\n    \tconfig = config || {};\n    \tvar me = this;\n    \tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n    \tthis.callParent(arguments)\n    \t\n    },\n    initComponent: function(config) {\n    \tconfig = config || {};\n    \tthis.on(\"afterrender\", function() {\n        \tif (config && \"tableJson\" in config) {\n        \t\tExt.apply(this, this.getConfigFromTableJson(config.tableJson));\n        \t}\n        \telse if (this.getApiParam('tableJson')) {\n        \t\tvar chart = this.getConfigFromTableJson();\n        \t\tthis.setAxes(chart.axes);\n        \t\tthis.setSeries(chart.series);\n        \t\tthis.setLegend(chart.legend);\n        \t\tthis.setStore(chart.store);\n        \t\tthis.redraw();\n        \t}\n    \t}, this)\n    \tthis.callParent(arguments)\n    },\n    \n    getConfigFromTableJson: function(jsonString) {\n    \tjsonString = jsonString || this.getApiParam('tableJson');\n    \tif (!jsonString) {return {}};\n    \t\n\t\tvar json = JSON.parse(jsonString);\n\t\t\n\t\tjson.headers = json.headers.map(function(header) {return header})\n\t\t// if we have only one column add a second column with a counter (as category)\n\t\tif (json.headers.length==1) {\n\t\t\tjson.headers.push(1);\n\t\t\tjson.rowKey = 1;\n\t\t\tjson.rows.forEach(function(row, i) {if (row) {row.push(i)}})\n\t\t}\n\t\t\n\t\t// data\n\t\tvar data = [];\n\t\tif (!json.rowKey) {json.rowKey=json.headers[0];}\n\t\tjson.rows.forEach(function(row, i) {\n\t\t\tif (row) {\n\t\t\t\tvar map = {};\n\t\t\t\tmap[json.rowKey] = i;\n\t\t\t\trow = row.forEach(function(cell, j) {\n\t\t\t\t\tmap[json.headers[j]] = cell\n\t\t\t\t})\n\t\t\t\tdata.push(map);\n\t\t\t}\n\t\t})\n\n\t\t// start chart\n\t\tif (!json.config) {json.config = {}}\n\t\tvar chart = {\n\t\t\tstore: {\n\t\t        fields: Object.keys(data[0]),\n\t\t        data: data\n\t\t\t},\n\t        axes: Ext.isArray(json.config.axes) ? json.config.axes : [{},{}],\n\t        series: [],\n    \t\tlegend: json.config.noLegend || Object.keys(data[0]).length<3 ? undefined : {docked:'top'}\n\n\t\t}\n\n\t\t// axes\n\t\tif (!json.config.axes) {json.config.axes = [{},{}]}\n\t\tchart.axes.forEach(function(axis, i) {\n\t\t\tif (Ext.isObject(json.config.axes)) {\n\t\t\t\tExt.apply(axis, json.config.axes);\n\t\t\t} else if (Ext.isArray(json.config.axes)) {\n\t\t\t\tExt.apply(axis, json.config.axes[i]);\n\t\t\t}\n\t\t\tExt.applyIf(axis, {\n\t        \ttype: i==0 ? 'numeric' : 'category',\n\t        \tposition: i==0 ? 'left' : 'bottom',\n\t        \tlabel: i==0 ? {} : {rotation: {degrees:-30}}\n\t        });\n\t\t})\n\n\t\t// series\n\t\tfor (var i=0, len=json.headers.length; i<len;i++) {\n\t\t\tif (json.headers[i]==json.rowKey) {continue;} // don't chart the row key, that's the x axis \n\t\t\tvar cfg = {};\n\t\t\tif (json.config.series) {\n\t\t\t\tif (Ext.isObject(json.config.series)) {\n\t\t\t\t\tExt.apply(cfg, json.config.series);\n\t\t\t\t} else if (Ext.isArray(json.config.series)) {\n\t\t\t\t\tExt.apply(cfg, json.config.series[chart.series.length]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tExt.applyIf(cfg, {\n\t\t        type: 'line',\n\t\t        xField: json.rowKey,\n\t\t        yField: json.headers[i],\n\t\t        marker: {\n\t\t        \tradius: 2\n\t\t        },\n\t\t        highlightCfg: {\n\t                scaling: 2\n\t            },\n\t            tooltip: {\n\t            \ttrackMouse: true,\n\t            \trenderer: function (tooltip, record, item) {\n\t                    tooltip.setHtml(record.get(item.series.getYField())+\": \"+record.get(item.series.getYField()));\n\t                }\n\t            }\n\t\t\t});\n\t\t\tchart.series.push(cfg);\n\t\t}\n\t\t\n\t\treturn chart;\n    \t\n    }\n\n})","Ext.define('Voyant.widget.LiveSearchGrid', {\n    extend: 'Ext.grid.Panel',\n    \n    /**\n     * @private\n     * search value initialization\n     */\n    searchValue: null,\n    \n    /**\n     * @private\n     * The matched positions from the most recent search\n     */\n    matches: [],\n    \n    /**\n     * @private\n     * The current index matched.\n     */\n    currentIndex: null,\n    \n    /**\n     * @private\n     * The generated regular expression used for searching.\n     */\n    searchRegExp: null,\n    \n    /**\n     * @private\n     * Case sensitive mode.\n     */\n    caseSensitive: false,\n    \n    /**\n     * @private\n     * Regular expression mode.\n     */\n    regExpMode: false,\n    \n    /**\n     * @cfg {String} matchCls\n     * The matched string css classe.\n     */\n    matchCls: 'keyword',\n    \n    // Component initialization override: adds the top and bottom toolbars and setup headers renderer.\n    initComponent: function() {\n        var me = this;\n        me.callParent(arguments);\n    },\n    \n    // detects html tag\n    tagsRe: /<[^>]*>/gm,\n    \n    // DEL ASCII code\n    tagsProtect: '\\x0f',\n    \n    /**\n     * Finds all strings that matches the searched value in each grid cells.\n     * @private\n     */\n     onTextFieldChange: function(field, val) {\n         var me = this,\n             count = 0,\n             view = me.view,\n             cellSelector = view.cellSelector,\n             innerSelector = view.innerSelector,\n             columns = me.visibleColumnManager.getColumns();\n\n         view.refresh();\n\n         me.searchValue = val;\n         me.matches = [];\n         me.currentIndex = null;\n\n         if (me.searchValue !== null) {\n             me.searchRegExp = new RegExp(val, 'g' + (me.caseSensitive ? '' : 'i'));\n\n             me.store.each(function(record, idx) {\n                var node = view.getNode(record);\n\n                if (node) {\n                    Ext.Array.forEach(columns, function(column) {\n                    \t\n                        var cell = Ext.fly(node).down(column.getCellInnerSelector(), true),\n                            matches, cellHTML,\n                            seen;\n\n                        if (cell && column.isXType('widgetcolumn')==false) {\n                            matches = cell.innerHTML.match(me.tagsRe);\n                            cellHTML = cell.innerHTML.replace(me.tagsRe, me.tagsProtect);\n\n                            // populate indexes array, set currentIndex, and replace wrap matched string in a span\n                            cellHTML = cellHTML.replace(me.searchRegExp, function(m) {\n                                ++count;\n                                if (!seen) {\n                                    me.matches.push({\n                                        record: record,\n                                        column: column\n                                    });\n                                    seen = true;\n                                }\n                                return '<span class=\"' + me.matchCls + '\">' + m + '</span>';\n                            }, me);\n                            // restore protected tags\n                            Ext.each(matches, function(match) {\n                                cellHTML = cellHTML.replace(me.tagsProtect, match);\n                            });\n                            // update cell html\n                            cell.innerHTML = cellHTML;\n                        }\n                    });\n                }\n             }, me);\n\n             // results found\n             if (count) {\n                me.currentIndex = 0;\n                me.gotoCurrent();\n             }\n         }\n\n         // no results found\n         if (me.currentIndex === null) {\n             me.getSelectionModel().deselectAll();\n         }\n         field.focus();\n     },\n\n    privates: {\n        gotoCurrent: function() {\n            var pos = this.matches[this.currentIndex];\n            this.getNavigationModel().setPosition(pos.record, pos.column);\n            this.getSelectionModel().select(pos.record);\n        }\n    }\n});\n","Ext.define('Voyant.widget.ProgressMonitor', {\n\textend: \"Ext.Base\",\n\tmixins: ['Voyant.util.Localization'],\n\tmsgbox: undefined,\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\tprogress: undefined,\n\t\tscope: undefined,\n\t\tsuccess: undefined,\n\t\tfailure: undefined,\n\t\targs: undefined,\n\t\ttool: undefined,\n\t\tdelay: 1000,\n\t\tmaxMillisSinceStart: undefined\n\t},\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n\t\tif (!config || !config.progress || !config.progress.id) {\n\t\t\treturn Voyant.application.showError(this.localize(\"noProgress\"))\n\t\t}\n\t\tthis.initConfig(config);\n\t\tthis.callParent(arguments);\n\t\tthis.update();\n\t},\n\n\tupdate: function() {\n\t\tvar progress = this.getProgress(), scope = this.getScope();\n\t\tvar msg = scope.localize ? scope.localize(progress.code) : this.localize(progress.code);\n\t\tif (msg==\"[\"+progress.code+\"]\") {msg=progress.message}\n\t\tmsg+=\" (\"+(parseInt(progress.completion*100))+\"%)\";\n\t\tvar text = this.localize(progress.status.toLowerCase());\n\t\tif (!this.msgbox || this.msgbox.msg.html!=msg || !this.msgbox.progressBar || this.msgbox.progressBar.getText()!=text) {\n\t\t\tthis.msgbox = Ext.Msg.wait(msg, this.localize(\"progress\"), {\n\t\t\t\ttext: text\n\t\t\t});\n\t\t}\n\t\tif (progress.status==\"LAUNCH\" || progress.status==\"RUNNING\") {\n\t\t\tvar me = this;\n\t\t\tExt.defer(function() {\n\t\t\t\tExt.Ajax.request({\n\t\t\t\t     url: Voyant.application.getTromboneUrl(),\n\t\t\t\t     params: {\n\t\t\t\t    \t \ttool: \"progress.ProgressMonitor\",\n\t\t\t\t    \t \tid: progress.id,\n\t\t\t\t    \t \tmaxMillisSinceStart: me.getMaxMillisSinceStart()\n\t\t\t\t     }\n\t\t\t\t }).then(function(response, opt) {\n\t\t\t\t\t var data = Ext.decode(response.responseText);\n\t\t\t\t\t if (data && data.progress.progress) {\n\t\t\t\t\t\t me.setProgress(data.progress.progress);\n\t\t\t\t\t\t me.update();\n\t\t\t\t\t } else {\n\t\t\t\t\t\t me.finish(false, me.localize(\"badProgress\"))\n\t\t\t\t\t }\n\t\t\t\t }, function(response, opt) {\n\t\t\t\t\t me.finish(false, response);\n\t\t\t\t });\n\t\t\t}, this.getDelay(), this)\n\t\t} else {\n\t\t\tthis.finish(progress.status==\"FINISHED\", msg);\n\t\t}\n\t\tif (this.getDelay()<5000) {this.setDelay(this.getDelay()+500)} // longer delay, up to 5 secs\n\t},\n\t\n\tfinish: function(success, response) {\n\t\tvar callback = success ? this.getSuccess() : this.getFailure();\n\t\tvar args = this.getArgs(), progress = this.getProgress(), scope = this.getScope();\n\t\tthis.close();\n\t\tif (callback && callback.apply) {\n\t\t\tcallback.apply(scope, [success ? args : response || progress]);\n\t\t} else {\n\t\t\tVoyant.application.showError(response);\n\t\t}\n\t},\n\t\n\tclose: function() {\n\t\tif (this.msgbox) {\n\t\t\tthis.msgbox.close();\n\t\t}\n\t\tthis.destroy();\n\t}\n\n})","Ext.define('Voyant.widget.VoyantTableTransform', {\n\textend: 'Ext.panel.Panel',\n    mixins: ['Voyant.util.Localization','Voyant.util.Api','Voyant.notebook.util.Embed'],\n\talias: 'widget.voyanttabletransform',\n    statics: {\n    \ti18n: {},\n\t\tapi: {\n\t\t\ttableHtml: undefined,\n\t\t\ttableJson: undefined,\n\t\t\twidth: undefined,\n\t\t\tapi: undefined\n\t\t}\n    },\n    html: '',\n    config: {\n    \thiddenColumns: undefined\n    },\n\tconstructor: function(config) {\n    \tconfig = config || {};\n\t\tvar me = this;\n        me.callParent(arguments);\n\t},\n\tinitComponent: function(config) {\n    \tvar me = this, config = config || {};\n    \tme.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n    \tif (this.config.api && this.config.api.tableJson) {\n    \t\tthis.setApiParam(\"tableJson\", this.config.api.tableJson);\n    \t}\n\t\tme.on('afterrender', function() {\n\t    \tme.buildFromParams();\n\t\t\tvar table = this.getTargetEl().down('table');\n\t\t\tif (table) {\n\t\t\t\tvar parent = table.parent();\n\t\t\t\tvar grid = new Ext.ux.grid.TransformGrid(table, {\n\t\t\t\t\twidth: this.getApiParam('width') || parent.getWidth(),\n\t\t\t\t\theight: this.getApiParam('height') || 20+(table.query('tr').length*24) // based on grid heights in crisp\n\t\t\t\t});\n\t\t\t\tgrid.render(parent);\n\t\t\t\tif (this.getHiddenColumns()) {\n\t\t\t\t\tvar hides = {}; // map for speed\n\t\t\t\t\tExt.Array.from(this.getHiddenColumns()).forEach(function(header) {hides[header]=true})\n\t\t\t\t\tgrid.getColumns().forEach(function(column) {\n\t\t\t\t\t\tif (column.text in hides) {column.hide()}\n\t\t\t\t\t});\n\t\t\t\t\tExt.defer(function() {\n\t\t\t\t\t\tgrid.setWidth(grid.getEl().dom.parentNode.offsetWidth); // resize\n\t\t\t\t\t},10)\n\t\t\t\t}\n\t\t\t}\n\t\t}, me);\n\t\t\n    \tme.callParent(arguments);\n\t},\n\t\n\tbuildFromParams: function() {\n\t\tvar me = this, tableHtml = this.getApiParam('tableHtml'), tableJson = this.getApiParam('tableJson');\n\t\tif (tableHtml) {\n\t\t\tthis.setHtml(tableHtml);\n\t\t} else if (tableJson) {\n\t\t\tvar html = \"<table><thead><tr>\", json = JSON.parse(tableJson);\n\t\t\t\n\t\t\tif (json.headers) {\n\t\t\t\tjson.headers.forEach(function(header) {\n\t\t\t\t\thtml+=\"<th>\"+header+\"</th>\"\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tjson.rows[0].forEach(function(cell, i) {\n\t\t\t\t\thtml+=\"<th>\"+(i+1)+\"</th>\";\n\t\t\t\t})\n\t\t\t}\n\t\t\thtml+=\"</tr></thead><tbody>\";\n\t\t\tjson.rows.forEach(function(row) {\n\t\t\t\thtml+=\"<tr>\";\n\t\t\t\trow.forEach(function(cell) {\n\t\t\t\t\thtml+=\"<td>\"+cell+\"</td>\"\n\t\t\t\t})\n\t\t\t\thtml+=\"</tr>\";\n\t\t\t})\n\t\t\thtml+=\"</tbody></table>\";\n\t\t\tthis.setHtml(html);\n\t\t\tif (json.config && json.config.hidden) {this.setHiddenColumns(json.config.hidden)}\n\t\t}\n\t\t\n\t}\n\n})\n\n\n\n/**\n * A Grid which creates itself from an existing HTML table element.\n */\nExt.define('Ext.ux.grid.TransformGrid', {\n    extend: 'Ext.grid.Panel',\n\n    /**\n     * Creates the grid from HTML table element.\n     * @param {String/HTMLElement/Ext.Element} table The table element from which this grid will be created -\n     * The table MUST have some type of size defined for the grid to fill. The container will be\n     * automatically set to position relative if it isn't already.\n     * @param {Object} [config] A config object that sets properties on this grid and has two additional (optional)\n     * properties: fields and columns which allow for customizing data fields and columns for this grid.\n     */\n    constructor: function(table, config) {\n        config = Ext.apply({}, config);\n        this.table = Ext.get(table);\n\n        var configFields = config.fields || [],\n            configColumns = config.columns || [],\n            fields = [],\n            cols = [],\n            headers = table.query(\"thead th\"),\n            i = 0,\n            len = headers.length,\n            data = table.dom,\n            width,\n            height,\n            store,\n            col,\n            text,\n            name;\n\n        for (; i < len; ++i) {\n            col = headers[i];\n\n            text = col.innerHTML;\n            name = 'tcol-' + i;\n\n            fields.push(Ext.applyIf(configFields[i] || {}, {\n                name: name,\n                mapping: 'td:nth(' + (i + 1) + ')/@innerHTML'\n            }));\n\n            cols.push(Ext.applyIf(configColumns[i] || {}, {\n                text: text,\n                dataIndex: name,\n                //width: col.offsetWidth,\n                flex: 1,\n                tooltip: col.title,\n                sortable: true\n            }));\n        }\n\n        if (config.width) {\n            width = config.width;\n        } else {\n            width = table.getWidth() + 1;\n        }\n\n        if (config.height) {\n            height = config.height;\n        }\n\n        Ext.applyIf(config, {\n            store: {\n                data: data,\n                fields: fields,\n                proxy: {\n                    type: 'memory',\n                    reader: {\n                        record: 'tbody tr',\n                        type: 'xml'\n                    }\n                }\n            },\n            columns: cols,\n            width: width,\n            height: height\n        });\n        this.callParent([config]);\n        \n        if (config.remove !== false) {\n            // Don't use table.remove() as that destroys the row/cell data in the table in\n            // IE6-7 so it cannot be read by the data reader.\n            data.parentNode.removeChild(data);\n        }\n    },\n\n    doDestroy: function() {\n        this.table.remove();\n        this.tabl = null;\n        this.callParent();\n    }\n});\n","Ext.define('Voyant.widget.CategoriesOption', {\r\n\textend: 'Ext.container.Container',\r\n\tmixins: ['Voyant.util.Localization'],\r\n\talias: 'widget.categoriesoption',\r\n\tstatics: {\r\n\t\ti18n: {\r\n\t\t}\r\n\t},\r\n\tconfig: {\r\n\t\tbuilderWin: undefined\r\n\t},\r\n\tinitComponent: function() {\r\n\t\tvar value = this.up('window').panel.getApiParam('categories');\r\n    \tvar data = value ? [{name: value, value: value}] : [];\r\n\t\t\r\n\t\tExt.apply(this, {\r\n    \t\tlayout: 'hbox',\r\n    \t\titems: [{\r\n    \t\t\txtype: 'combo',\r\n    \t\t\tqueryMode: 'local',\r\n    \t\t\ttriggerAction: 'all',\r\n    \t\t\tfieldLabel: this.localize('categories'),\r\n    \t\t\tlabelAlign: 'right',\r\n    \t\t\tdisplayField: 'name',\r\n    \t\t\tvalueField: 'value',\r\n    \t\t\tstore: {\r\n    \t\t\t\tfields: ['name', 'value'],\r\n    \t\t\t\tdata: data\r\n    \t\t\t},\r\n    \t\t\tname: 'categories',\r\n    \t\t\tvalue: value\r\n    \t\t}, {width: 10}, {xtype: 'tbspacer'}, {\r\n    \t\t\txtype: 'button',\r\n    \t\t\ttext: this.localize('edit'),\r\n    \t\t\tui: 'default-toolbar',\r\n    \t\t\thandler: function() {\r\n    \t\t\t\tif (this.getBuilderWin() === undefined) {\r\n    \t\t\t\t\tvar panel = this.up('window').panel;\r\n    \t\t\t\t\tvar win = Ext.create('Voyant.widget.CategoriesBuilder', {\r\n    \t\t\t\t\t\tpanel: panel,\r\n    \t\t\t\t\t\theight: panel.getApplication().getViewport().getHeight()*0.75,\r\n    \t\t\t\t\t\twidth: panel.getApplication().getViewport().getWidth()*0.75\r\n    \t\t\t\t\t});\r\n    \t\t\t\t\twin.on('close', function(win) {\r\n    \t\t\t\t\t\tvar id = win.getCategoriesId();\r\n    \t\t\t\t\t\tif (id !== undefined) {\r\n\t    \t\t\t\t\t\tvar combo = this.down('combo');\r\n\t\t\t\t\t\t\t\tvar name = id;\r\n\t\t\t\t\t\t\t\tcombo.getStore().add({name: name, value: id});\r\n\t\t\t\t\t\t\t\tcombo.setValue(id);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.up('window').panel.setApiParam('categories', id);\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}, this);\r\n    \t\t\t\t\tthis.setBuilderWin(win);\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tvar categoriesId = this.down('combo').getValue();\r\n    \t\t\t\tthis.getBuilderWin().setCategoriesId(categoriesId);\r\n\t\t\t\t\tthis.getBuilderWin().show();\r\n    \t\t\t},\r\n    \t\t\tscope: this\r\n    \t\t}]\r\n    \t});\r\n\t\t\r\n\t\tthis.callParent(arguments);\r\n\t}\r\n});\r\n\r\nExt.define('Voyant.widget.CategoriesBuilder', {\r\n    extend: 'Ext.window.Window',\r\n    requires: ['Voyant.widget.FontFamilyOption'],\r\n    mixins: ['Voyant.util.Localization','Voyant.util.Api'],\r\n    alias: 'widget.categoriesbuilder',\r\n    statics: {\r\n    \ti18n: {\r\n    \t\ttitle: 'Categories Builder',\r\n    \t\tterms: 'Terms',\r\n    \t\tterm: 'Term',\r\n    \t\trawFreq: 'Count',\r\n    \t\trelativeFreq: 'Relative',\r\n    \t\tcategories: 'Categories',\r\n    \t\taddCategory: 'Add Category',\r\n    \t\tremoveCategory: 'Remove Category',\r\n    \t\tremoveTerms: 'Remove Selected Terms',\r\n    \t\tcategoryName: 'Category Name',\r\n    \t\tadd: 'Add',\r\n    \t\tcancel: 'Cancel',\r\n    \t\texists: 'Category already exists',\r\n    \t\tconfirmRemove: 'Are you sure you want to remove the category?',\r\n    \t\tsave: 'Save',\r\n    \t\tfeatures: 'Features',\r\n    \t\tcategory: 'Category',\r\n    \t\t\r\n    \t\tcolor: 'Color',\r\n    \t\tfont: 'Font',\r\n    \t\torientation: 'Orientation'\r\n    \t},\r\n    \tapi: {\r\n    \t\tstopList: 'auto',\r\n    \t\tquery: undefined\r\n    \t},\r\n    \tfeatures: {\r\n        \tcolor: {\r\n        \t\txtype: 'colorfield',\r\n        \t\tformat: '#hex6'\r\n//        \t\t,listeners: {\r\n//        \t\t\trender: function(field) {\r\n//        \t\t\t\tfield.on('change', function(field, color) {\r\n//        \t\t\t\t\tfield.inputEl.setStyle('background-color', color);\r\n//        \t\t\t\t});\r\n//        \t\t\t}\r\n//        \t\t}\r\n        \t},\r\n        \tfont: {\r\n        \t\txtype: 'combobox',\r\n        \t\tqueryMode: 'local',\r\n        \t\tdisplayField: 'name',\r\n        \t\tvalueField: 'value',\r\n        \t\tstore: {\r\n        \t\t\tfields: ['name', 'value'],\r\n        \t\t\tdata: Voyant.widget.FontFamilyOption.fonts\r\n        \t\t}\r\n        \t},\r\n        \torientation: {\r\n        \t\txtype: 'combobox',\r\n        \t\tqueryMode: 'local',\r\n        \t\tdisplayField: 'name',\r\n        \t\tvalueField: 'value',\r\n        \t\tstore: {\r\n        \t\t\tfields: ['name', 'value'],\r\n        \t\t\tdata: [{name: 'Horizontal', value: 0}, {name: 'Vertical', value: 90}]\r\n        \t\t}\r\n        \t}\r\n        }\r\n    },\r\n    config: {\r\n    \tcorpus: undefined,\r\n    \tbuilderWin: undefined,\r\n    \taddCategoryWin: undefined,\r\n    \tcategoriesId: undefined\r\n    },\r\n    \r\n    // window defaults\r\n    closeAction: 'hide',\r\n    modal: true,\r\n\theight: 250,\r\n\twidth: 500,\r\n\r\n    constructor: function(config) {\r\n    \tconfig = config || {};\r\n    \t\r\n    \tif (config.panel) {\r\n    \t\tthis.panel = config.panel;\r\n\t\t\tthis.app = this.panel.getApplication();\r\n\t\t\tthis.categoriesManager = this.app.getCategoriesManager();\r\n    \t} else {\r\n    \t\tif (window.console) {\r\n    \t\t\tconsole.warn('can\\'t find panel!');\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    initComponent: function() {\r\n    \tExt.apply(this, {\r\n    \t\theader: false,\r\n    \t\tlayout: 'fit',\r\n    \t\tonEsc: Ext.emptyFn,\r\n    \t\titems: {\r\n\t    \t\txtype: 'tabpanel',\r\n\t    \t\ttitle: this.localize('title'),\r\n\t    \t\ttabBarHeaderPosition: 1,\r\n\t    \t\titems: [{\r\n\t\t    \t\tlayout: 'border',\r\n\t\t    \t\ttitle: this.localize('categories'),\r\n\t\t    \t\titems: [{\r\n\t\t    \t\t\ttitle: this.localize('terms'),\r\n\t\t    \t\t\tsplit: true,\r\n\t\t    \t\t\twidth: 250,\r\n\t\t    \t\t\tregion: 'west',\r\n\t\t    \t\t\tlayout: 'fit',\r\n\t\t    \t\t\titems: {\r\n\t\t    \t\t\t\titemId: 'terms',\r\n\t\t    \t\t\t\txtype: 'grid',\r\n\t\t    \t\t\t\tstore: Ext.create('Voyant.data.store.CorpusTermsBuffered', {\r\n\t\t    \t\t        \tparentPanel: this\r\n\t\t    \t\t        }),\r\n\t\t    \t\t\t\tviewConfig: {\r\n\t\t    \t\t\t\t\tplugins: {\r\n\t\t    \t\t\t\t\t\tptype: 'gridviewdragdrop',\r\n\t\t    \t\t\t\t\t\tddGroup: 'terms',\r\n\t\t    \t\t\t\t\t\tcopy: true,\r\n\t\t    \t\t\t\t\t\tenableDrop: false, // can't drop on grid with buffered store\r\n\t\t    \t\t\t\t\t\tdragZone: {\r\n\t\t    \t\t\t\t\t\t\tgetDragText: function() {\r\n\t\t    \t\t\t\t\t\t\t\tvar text = '';\r\n\t\t    \t\t\t\t\t\t\t\tthis.dragData.records.forEach(function(d) {\r\n\t\t    \t\t\t\t\t\t\t\t\ttext += d.get('term')+', ';\r\n\t\t    \t\t\t\t\t\t\t\t});\r\n\t\t    \t\t\t\t\t\t\t\ttext = text.substr(0, text.length-2);\r\n\t\t    \t\t\t\t\t\t\t\tif (text.length > 20) {\r\n\t\t    \t\t\t\t\t\t\t\t\ttext = text.substr(0, 20) + '...';\r\n\t\t    \t\t\t\t\t\t\t\t}\r\n\t\t    \t\t\t\t\t\t\t\treturn text;\r\n\t\t    \t\t\t\t\t\t\t}\r\n\t\t    \t\t\t\t\t\t}\r\n\t\t    \t\t\t\t\t}\r\n\t\t    \t\t\t\t},\r\n\t\t    \t\t\t\tselModel: {\r\n\t\t    \t    \t\t\tmode: 'MULTI'\r\n\t\t    \t    \t\t},\r\n\t\t    \t\t\t\tcolumns: [{\r\n\t\t\t\t    \t\t\ttext: this.localize('term'),\r\n\t\t\t\t        \t\tdataIndex: 'term',\r\n\t\t\t\t        \t\tflex: 1,\r\n\t\t\t\t                sortable: true\r\n\t\t\t\t            },{\r\n\t\t\t\t            \ttext: this.localize('rawFreq'),\r\n\t\t\t\t            \tdataIndex: 'rawFreq',\r\n\t\t\t\t                width: 'autoSize',\r\n\t\t\t\t            \tsortable: true\r\n\t\t\t\t            },{\r\n\t\t\t\t            \ttext: this.localize('relativeFreq'),\r\n\t\t\t\t            \tdataIndex: 'relativeFreq',\r\n\t\t\t\t            \trenderer: function(val) {\r\n\t\t\t\t            \t\treturn Ext.util.Format.number(val*1000000, \"0,000\");\r\n\t\t\t\t            \t},\r\n\t\t\t\t                width: 'autoSize',\r\n\t\t\t\t                hidden: true,\r\n\t\t\t\t            \tsortable: true\r\n\t\t\t\t            }],\r\n\t\t\t\t            dockedItems: [{\r\n\t\t\t\t                dock: 'bottom',\r\n\t\t\t\t                xtype: 'toolbar',\r\n\t\t\t\t                overflowHandler: 'scroller',\r\n\t\t\t\t                items: [{\r\n\t\t\t\t                    xtype: 'querysearchfield'\r\n\t\t\t\t                }]\r\n\t\t\t\t            }],\r\n\t\t\t\t            listeners: {\r\n\t\t\t\t            \tquery: function(src, query) {\r\n\t\t\t\t            \t\tthis.setApiParam('query', query);\r\n\t\t\t\t            \t\tvar store = this.queryById('terms').getStore();\r\n\t\t\t\t            \t\tstore.removeAll();\r\n\t\t\t\t            \t\tstore.load();\r\n\t\t\t\t            \t},\r\n\t\t\t\t            \tscope: this\r\n\t\t\t\t            }\r\n\t\t    \t\t\t}\r\n\t\t    \t\t},{\r\n\t\t    \t\t\ttitle: this.localize('categories'),\r\n\t\t    \t\t\titemId: 'categories',\r\n\t\t    \t\t\tregion: 'center',\r\n\t\t    \t\t\txtype: 'panel',\r\n\t\t    \t\t\tlayout: {\r\n\t\t    \t\t\t\ttype: 'hbox',\r\n\t\t    \t\t\t\talign: 'stretch'\r\n\t\t    \t\t\t},\r\n\t\t    \t\t\tscrollable: 'x',\r\n\t\t    \t\t\tdockedItems: [{\r\n\t\t                    dock: 'bottom',\r\n\t\t                    xtype: 'toolbar',\r\n\t\t                    overflowHandler: 'scroller',\r\n\t\t                    items: [{\r\n\t\t                    \ttext: this.localize('addCategory'),\r\n\t\t                    \thandler: function() {\r\n\t\t                    \t\tthis.getAddCategoryWin().show();\r\n\t\t                    \t},\r\n\t\t                    \tscope: this\r\n\t\t                    },{\r\n\t\t                    \ttext: this.localize('removeTerms'),\r\n\t\t                    \thandler: function() {\r\n\t\t                    \t\tthis.queryById('categories').query('grid').forEach(function(grid) {\r\n\t\t                    \t\t\tgrid.getStore().remove(grid.getSelection());\r\n\t\t                    \t\t}, this);\r\n\t\t                    \t},\r\n\t\t                    \tscope: this\r\n\t\t                    }]\r\n\t\t    \t\t\t}],\r\n\t\t    \t\t\titems: []\r\n\t\t    \t\t}]\r\n\t    \t\t},{\r\n\t    \t\t\tlayout: 'fit',\r\n\t    \t\t\titemId: 'features',\r\n\t    \t\t\ttitle: this.localize('features'),\r\n\t    \t\t\txtype: 'grid',\r\n\t    \t\t\tscrollable: 'y',\r\n\t    \t\t\tstore: Ext.create('Ext.data.JsonStore', {\r\n\t\t    \t\t\tfields: ['category']\r\n\t\t    \t\t}),\r\n\t    \t\t\tcolumns: [{\r\n\t    \t\t\t\ttext: this.localize('category'),\r\n\t    \t\t\t\tdataIndex: 'category',\r\n\t    \t\t\t\tsortable: false,\r\n\t    \t\t\t\thideable: false,\r\n\t    \t\t\t\tflex: 1\r\n\t    \t\t\t}]\r\n\t    \t\t}]\r\n    \t\t},\r\n    \t\tbuttons: [{\r\n\t\t\t\ttext: this.localize('cancel'),\r\n\t\t\t\thandler: function(btn) {\r\n\t\t\t\t\tthis.setCategoriesId(undefined);\r\n\t\t\t\t\tbtn.up('window').close();\r\n\t\t\t\t},\r\n\t\t\t\tscope: this\r\n\t\t\t},{\r\n\t\t\t\ttext: this.localize('save'),\r\n\t\t\t\thandler: function(btn) {\r\n\t\t\t\t\tthis.processFeatures();\r\n\t\t\t\t\tthis.setColorTermsFromCategoryFeatures();\r\n\t\t\t\t\tthis.app.saveCategoryData(this.categoriesManager.getCategoryExportData()).then(function(id) {\r\n\t\t\t\t\t\tthis.setCategoriesId(id);\r\n\t\t\t\t\t\tbtn.up('window').close();\r\n\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\tthis.setCategoriesId(undefined);\r\n\t\t\t\t\t\tbtn.up('window').close();\r\n\t\t\t\t\t}, null, this);\r\n\t\t\t\t},\r\n\t\t\t\tscope: this\r\n\t\t\t}],\r\n\t\t\tlisteners: {\r\n\t\t\t\tshow: function() {\r\n\t\t\t\t\t// check to see if the widget value is different from the API\r\n\t\t\t\t\tif (this.getCategoriesId() && this.getCategoriesId()!=this.getApiParam(\"categories\")) {\r\n\t\t    \t\t\tthis.categoriesManager.loadCategoryData(this.getCategoriesId()).then(function(data) {\r\n\t\t\t\t\t\t\tthis.setColorTermsFromCategoryFeatures();\r\n\t\t\t\t\t\t\tthis.buildCategories();\r\n\t\t\t\t\t\t\tthis.buildFeatures();\r\n\t\t\t\t\t\t}, null, null, this);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.buildCategories();\r\n\t\t\t\t\t\tthis.buildFeatures();\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\tthis.down('tabpanel').setActiveTab(0);\r\n\t\t\t\t},\r\n\t\t\t\tafterrender: function(builder) {\r\n\t\t\t\t\tbuilder.on('loadedCorpus', function(src, corpus) {\r\n\t\t    \t\t\tthis.setCorpus(corpus);\r\n\t\t\t    \t\tvar terms = this.queryById('terms');\r\n\t\t\t    \t\tterms.getStore().load();\r\n\t\t    \t\t}, builder);\r\n\t\t    \t\t\r\n\t\t\t\t\tthis.panel.on('loadedCorpus', function(src, corpus) {\r\n\t    \t\t\t\tbuilder.fireEvent('loadedCorpus', src, corpus);\r\n\t    \t\t\t}, builder);\r\n\t    \t\t\tif (this.panel.getCorpus && this.panel.getCorpus()) {builder.fireEvent('loadedCorpus', builder, this.panel.getCorpus());}\r\n\t    \t\t\telse if (this.panel.getStore && this.panel.getStore() && this.panel.getStore().getCorpus && this.panel.getStore().getCorpus()) {\r\n\t    \t\t\t\tbuilder.fireEvent('loadedCorpus', builder, this.panel.getStore().getCorpus());\r\n\t    \t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tscope: this\r\n\t\t\t}\r\n    \t});\r\n    \t\r\n    \tthis.setAddCategoryWin(Ext.create('Ext.window.Window', {\r\n    \t\ttitle: this.localize('addCategory'),\r\n    \t\tmodal: true,\r\n    \t\tcloseAction: 'hide',\r\n    \t\tlayout: 'fit',\r\n    \t\titems: {\r\n    \t\t\txtype: 'form',\r\n    \t\t\twidth: 300,\r\n    \t\t\tdefaults: {\r\n    \t\t\t\tlabelAlign: 'right'\r\n    \t\t\t},\r\n\t    \t\titems: [{\r\n\t    \t\t\txtype: 'textfield',\r\n\t    \t\t\tfieldLabel: this.localize('categoryName'),\r\n\t    \t\t\tname: 'categoryName',\r\n\t    \t\t\tallowBlank: false,\r\n\t    \t\t\tvalidator: function(val) {\r\n\t    \t\t\t\treturn this.categoriesManager.getCategoryTerms(val) === undefined ? true : this.localize('exists');\r\n\t    \t\t\t}.bind(this),\r\n\t    \t\t\tenableKeyEvents: true,\r\n\t    \t\t\tlisteners: {\r\n\t    \t\t\t\tkeypress: function(field, evt) {\r\n\t    \t\t\t\t\tif (evt.getKey() === Ext.event.Event.ENTER) {\r\n\t    \t\t\t\t\t\tfield.up('form').queryById('addCategoryButton').click();\r\n\t    \t\t\t\t\t}\r\n\t    \t\t\t\t},\r\n\t    \t\t\t\tscope: this\r\n\t    \t\t\t}\r\n\t    \t\t}],\r\n\t    \t\tbuttons: [{\r\n\t    \t\t\ttext: this.localize('cancel'),\r\n\t    \t\t\thandler: function(btn) {\r\n\t    \t\t\t\tbtn.up('window').close();\r\n\t    \t\t\t}\r\n\t    \t\t},{\r\n\t    \t\t\titemId: 'addCategoryButton',\r\n\t    \t\t\ttext: this.localize('add'),\r\n\t    \t\t\thandler: function(btn) {\r\n\t    \t\t\t\tvar form = btn.up('form');\r\n\t    \t\t\t\tif (form.isValid()) {\r\n\t    \t\t\t\t\tvar name = form.getValues()['categoryName'];\r\n\t    \t\t\t\t\tthis.addCategory(name);\r\n\t    \t\t\t\t\tbtn.up('window').close();\r\n\t    \t\t\t\t}\r\n\t    \t\t\t},\r\n\t    \t\t\tscope: this\r\n\t    \t\t}]\r\n    \t\t},\r\n    \t\tlisteners: {\r\n    \t\t\tshow: function(win) {\r\n    \t\t\t\tvar form = win.down('form').getForm();\r\n    \t\t\t\tform.reset();\r\n\t\t\t\t\tform.clearInvalid();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}));\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    addCategory: function(name) {\r\n    \tthis.categoriesManager.addCategory(name);\r\n    \t\r\n    \tthis.queryById('features').getStore().add({category: name});\r\n\r\n    \tvar termsData = [];\r\n    \tvar terms = this.categoriesManager.getCategoryTerms(name);\r\n    \tif (terms !== undefined) {\r\n    \t\tfor (var i = 0; i < terms.length; i++) {\r\n    \t\t\ttermsData.push({term: terms[i]});\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tvar grid = this.queryById('categories').add({\r\n    \t\txtype: 'grid',\r\n    \t\tcategory: name,\r\n    \t\ttitle: name,\r\n//    \t\theader: {\r\n//    \t\t\titems: [{\r\n//    \t\t\t\txtype: 'colorbutton',\r\n//    \t\t\t\tformat: '#hex6',\r\n//    \t\t\t\tvalue: color,\r\n//    \t\t\t\twidth: 30,\r\n//    \t\t\t\theight: 15,\r\n//    \t\t\t\tlisteners: {\r\n//    \t\t\t\t\tchange: function(btn, color, pcolor) {\r\n//    \t\t\t\t\t\tthis.categoriesManager.setCategoryFeature(name, 'color', color);\r\n//    \t\t\t\t\t},\r\n//    \t\t\t\t\tafterrender: function(btn) {\r\n//    \t\t\t\t\t\tvar popup = btn.getPopup();\r\n//    \t\t\t\t\t\tpopup.listeners = {\r\n//    \t\t\t\t\t\t\tfocusleave: function(sel, evt) {\r\n//    \t\t\t\t\t\t\t\tsel.close(); // fix for conflict between selector and parent modal window, when you click outside of the selector\r\n//    \t\t\t\t\t\t\t}\r\n//    \t\t\t\t\t\t};\r\n//    \t\t\t\t\t},\r\n//    \t\t\t\t\tscope: this\r\n//    \t\t\t\t}\r\n//    \t\t\t}]\r\n//    \t\t},\r\n    \t\tframe: true,\r\n    \t\twidth: 150,\r\n    \t\tmargin: '10 0 10 10',\r\n    \t\tlayout: 'fit',\r\n    \t\ttools: [{\r\n    \t\t\ttype: 'close',\r\n    \t\t\ttooltip: this.localize('removeCategory'),\r\n    \t\t\tcallback: function(panel) {\r\n    \t\t\t\tExt.Msg.confirm(this.localize('removeCategory'), this.localize('confirmRemove'), function(btn) {\r\n    \t\t\t\t\tif (btn === 'yes') {\r\n    \t\t\t\t\t\tthis.removeCategory(name);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}, this);\r\n    \t\t\t},\r\n    \t\t\tscope: this\r\n    \t\t}],\r\n    \t\t\r\n    \t\tstore: Ext.create('Ext.data.JsonStore', {\r\n    \t\t\tdata: termsData,\r\n    \t\t\tfields: ['term']\r\n    \t\t}),\r\n    \t\tviewConfig: {\r\n\t    \t\tplugins: {\r\n\t    \t\t\tptype: 'gridviewdragdrop',\r\n\t\t\t\t\tddGroup: 'terms',\r\n\t\t\t\t\tdragZone: {\r\n\t\t\t\t\t\tgetDragText: function() {\r\n\t\t\t\t\t\t\tvar text = '';\r\n\t\t\t\t\t\t\tthis.dragData.records.forEach(function(d) {\r\n\t\t\t\t\t\t\t\ttext += d.get('term')+', ';\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn text.substr(0, text.length-2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t    \t\t}\r\n    \t\t},\r\n    \t\tselModel: {\r\n    \t\t\tmode: 'MULTI'\r\n    \t\t},\r\n    \t\tcolumns: [{\r\n        \t\tdataIndex: 'term',\r\n        \t\tflex: 1,\r\n                sortable: true\r\n            }],\r\n    \t\tlisteners: {\r\n    \t\t\tbeforedrop: function(node, data) {\r\n    \t\t\t\t// remove duplicates\r\n    \t\t\t\tvar categoriesManager = this.up('categoriesbuilder').categoriesManager;\r\n    \t\t\t\tfor (var i = data.records.length-1; i >= 0; i--) {\r\n    \t\t\t\t\tvar term = data.records[i].get('term');\r\n    \t\t\t\t\tif (categoriesManager.getCategoryForTerm(term) !== undefined) {\r\n    \t\t\t\t\t\tdata.records.splice(i, 1);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t},\r\n    \t\t\tdrop: function(node, data) {\r\n    \t\t\t\tdata.view.getSelectionModel().deselectAll();\r\n    \t\t\t\tthis.getSelectionModel().deselectAll();\r\n    \t\t\t\t\r\n    \t\t\t\tvar categoriesManager = this.up('categoriesbuilder').categoriesManager;\r\n    \t\t\t\tvar terms = [];\r\n    \t\t\t\tfor (var i = 0; i < data.records.length; i++) {\r\n    \t\t\t\t\tvar term = data.records[i].get('term');\r\n    \t\t\t\t\tif (categoriesManager.getCategoryForTerm(term) === undefined) {\r\n    \t\t\t\t\t\tterms.push(term);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\tcategoriesManager.addTerms(name, terms);\r\n    \t\t\t\t\r\n    \t\t\t\tvar source = data.view.up('grid');\r\n    \t\t\t\tif (source.category) {\r\n    \t\t\t\t\tcategoriesManager.removeTerms(source.category, terms);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t});\r\n    \t\r\n    \tvar titleEditor = new Ext.Editor({\r\n    \t\tupdateEl: true,\r\n    \t\talignment: 'l-l',\r\n    \t\tautoSize: {\r\n    \t\t\twidth: 'boundEl'\r\n    \t\t},\r\n    \t\tfield: {\r\n    \t\t\txtype: 'textfield',\r\n    \t\t\tallowBlank: false,\r\n    \t\t\tvalidator: function(val) {\r\n    \t\t\t\treturn this.categoriesManager.getCategoryTerms(val) === undefined || val ===  grid.getTitle() ? true : this.localize('exists');\r\n    \t\t\t}.bind(this)\r\n    \t\t},\r\n    \t\tlisteners: {\r\n    \t\t\tcomplete: function(ed, newvalue, oldvalue) {\r\n    \t\t\t\tthis.categoriesManager.renameCategory(oldvalue, newvalue);\r\n    \t\t\t\tthis.buildFeatures();\r\n    \t\t\t},\r\n    \t\t\tscope: this\r\n    \t\t}\r\n    \t});\r\n    \t\r\n    \tgrid.header.getTitle().textEl.on('dblclick', function(e, t) {\r\n    \t\ttitleEditor.startEdit(t);\r\n    \t});\r\n    },\r\n    \r\n    removeCategory: function(name) {\r\n    \tvar categoriesParent = this.queryById('categories');\r\n    \tvar panel = categoriesParent.queryBy(function(cmp) {\r\n    \t\tif (cmp.category && cmp.category == name) {\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t\treturn false;\r\n    \t});\r\n    \tcategoriesParent.remove(panel[0]);\r\n    \t\r\n    \tvar featuresStore = this.queryById('features').getStore();\r\n    \tfeaturesStore.removeAt(featuresStore.findExact('category', name));\r\n    \t\r\n\t\tthis.categoriesManager.removeCategory(name);\r\n    },\r\n    \r\n    addFeature: function(name) {\r\n\t\tthis.categoriesManager.addFeature(name);\r\n\t\tthis.buildFeatures();\r\n    },\r\n    \r\n    buildFeatures: function() {\r\n    \tthis.queryById('features').getStore().removeAll();\r\n    \t\r\n    \tvar fields = ['category'];\r\n\t\tvar columns = [{\r\n\t\t\tsortable: false,\r\n\t\t\ttext: this.localize('category'),\r\n\t\t\tdataIndex: 'category',\r\n\t\t\tflex: 1\r\n\t\t}];\r\n\t\tvar data = [];\r\n\t\t\r\n\t\tfor (var category in this.categoriesManager.getCategories()) {\r\n\t\t\tdata.push({category: category});\r\n\t\t}\r\n\t\t\r\n\t\tvar features = this.categoriesManager.getFeatures();\r\n\t\tvar featuresConfigs = Ext.ClassManager.getClass(this).features;\r\n\t\t\r\n\t\tfor (var feature in features) {\r\n\t\t\tfields.push(feature);\r\n\t\t\t\r\n\t\t\tvar featureConfig = featuresConfigs[feature];\r\n\t\t\tvar widgetConfig = Ext.applyIf({\r\n\t\t\t\tfeature: feature,\r\n\t\t\t\tlisteners: {\r\n\t\t\t\t\tchange: function(cmp, newvalue) {\r\n\t\t\t\t\t\tif (cmp.rendered) {\r\n\t\t\t\t\t\t\tvar rowIndex = cmp.up('gridview').indexOf(cmp.el.up('table'));\r\n\t\t\t\t\t\t\tvar record = cmp.up('grid').getStore().getAt(rowIndex);\r\n\t\t\t\t\t\t\tif (record) {\r\n\t\t\t\t\t\t\t\trecord.set(cmp.feature, newvalue);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (window.console) {\r\n\t\t\t\t\t\t\t\t\tconsole.warn('no record for', rowIndex, cmp);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tscope: this\r\n\t\t\t\t}\r\n\t\t\t}, featureConfig);\r\n\t\t\tif (featureConfig.listeners) {\r\n\t\t\t\tExt.applyIf(widgetConfig.listeners, featureConfig.listeners);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcolumns.push({\r\n\t\t\t\tsortable: false,\r\n\t\t\t\thideable: false,\r\n\t\t\t\ttext: this.localize(feature),\r\n\t\t\t\tdataIndex: feature,\r\n\t\t\t\tflex: 0.5,\r\n\t\t\t\txtype: 'widgetcolumn',\r\n\t\t\t\twidget: widgetConfig\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tfor (var category in this.categoriesManager.getCategories()) {\r\n\t\t\t\tvar value = this.categoriesManager.getCategoryFeature(category, feature);\r\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\t\tif (data[i].category == category) {\r\n\t\t\t\t\t\tdata[i][feature] = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvar store = Ext.create('Ext.data.JsonStore', {\r\n\t\t\tfields: fields,\r\n\t\t\tdata: data\r\n\t\t});\r\n\t\tthis.queryById('features').reconfigure(store, columns);\r\n    },\r\n\t\r\n\tprocessFeatures: function() {\r\n\t\tvar store = this.queryById('features').getStore();\r\n\t\tvar features = Object.keys(this.categoriesManager.getFeatures());\r\n\t\tstore.each(function(record) {\r\n\t\t\tvar category = record.get('category');\r\n\t\t\tfeatures.forEach(function(feature) {\r\n\t\t\t\tvar featureValue = record.get(feature);\r\n\t\t\t\tif (featureValue !== undefined) {\r\n\t\t\t\t\tthis.categoriesManager.setCategoryFeature(category, feature, featureValue);\r\n\t\t\t\t}\r\n\t\t\t}, this)\r\n\t\t}, this)\r\n\t},\r\n\r\n\tsetColorTermsFromCategoryFeatures: function() {\r\n        for (var category in this.categoriesManager.getCategories()) {\r\n            var color = this.categoriesManager.getCategoryFeature(category, 'color');\r\n            if (color !== undefined) {\r\n                var rgb = this.app.hexToRgb(color);\r\n                var terms = this.categoriesManager.getCategoryTerms(category);\r\n                for (var i = 0; i < terms.length; i++) {\r\n                    this.app.setColorForTerm(terms[i], rgb);\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    buildCategories: function() {\r\n\r\n    \tthis.queryById('categories').removeAll();\r\n    \t\r\n    \tvar cats = this.categoriesManager.getCategories();\r\n    \tfor (var key in cats) {\r\n    \t\tthis.addCategory(key);\r\n    \t}\r\n    }\r\n});","Ext.define('Voyant.widget.VoyantNetworkGraph', {\n    extend: 'Ext.panel.Panel',\n    mixins: ['Voyant.util.Localization','Voyant.util.Api','Voyant.notebook.util.Embed'],\n    embeddable: ['Voyant.widget.VoyantNetworkGraph'],\n    alias: 'widget.voyantnetworkgraph',\n    statics: {\n        i18n: {\n        },\n        api: {\n            jsonData: undefined,\n            docId: undefined,\n            docIndex: undefined,\n            json: undefined,\n            api: undefined\n        }\n    },\n    config: {\n        vis: undefined, // svg > g element\n        visLayout: undefined, // d3 layout algorithm\n        \n        // backing data. don't set through config, use config.nodes & config.edges\n        nodeData: undefined,\n        edgeData: undefined,\n        \n        nodeSelection: undefined, // d3 selection for nodes\n        edgeSelection: undefined, // d3 selection for edges\n        \n        currentNode: undefined,\n        currentEdge: undefined,\n        \n        zoom: undefined, // d3 zoom\n        zoomExtent: [0.25, 8],\n        \n        fixOnDrag: true, // fix node when dragged\n        \n        nodeScaling: {\n        \tminSize: 8,\n        \tmaxSize: 36,\n        \tscalingFunction: undefined\n        },\n        edgeScaling: {\n        \tminSize: 1,\n        \tmaxSize: 10,\n        \tscalingFunction: undefined\n        },\n        \n        graphStyle: {\n    \t\tnode: {\n    \t\t\tnormal: {\n    \t\t\t\tfill: '#c6dbef',\n    \t\t\t\tfillOpacity: 1,\n    \t\t\t\tstroke: '#6baed6',\n    \t\t\t\tstrokeOpacity: 1,\n    \t\t\t\tstrokeWidth: 1\n    \t\t\t},\n    \t\t\thighlight: {\n    \t\t\t\tfill: '#9ecae1',\n    \t\t\t\tfillOpacity: 1,\n    \t\t\t\tstroke: '#3182bd',\n    \t\t\t\tstrokeOpacity: 1,\n    \t\t\t\tstrokeWidth: 3\n    \t\t\t}\n    \t\t},\n    \t\tedge: {\n    \t\t\tnormal: {\n    \t\t\t\tstroke: '#000000',\n    \t\t\t\tstrokeOpacity: 0.25,\n    \t\t\t\tstrokeWidth: 1\n    \t\t\t},\n    \t\t\thighlight: {\n    \t\t\t\tstroke: '#000000',\n    \t\t\t\tstrokeOpacity: 0.5,\n    \t\t\t\tstrokeWidth: 3\n    \t\t\t}\n    \t\t}\n    \t},\n    \t\n    \tgraphPhysics: {\n    \t\tdamping: 0.4, // 0 = no damping, 1 = full damping\n    \t\tcentralGravity: 0.1, // 0 = no grav, 1 = high grav\n    \t\tnodeGravity: -50,  // negative = repel, positive = attract\n\t\t\tspringLength: 100,\n\t\t\tspringStrength: 0.25, // 0 = not strong, >1 = probably too strong\n\t\t\tcollisionScale: 1.25 // 1 = default, 0 = no collision \n    \t}\n    },\n    constructor: function(config) {\n        config = config || {};\n        \n        this.setNodeData([]);\n        this.setEdgeData([]);\n        \n        this.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n        this.callParent(arguments);\n        \n        var json = {};\n        if (this.getApiParam('jsonData')) {\n            json = Ext.decode(this.getApiParam('jsonData'));\n        } else if (this.getApiParam('json')) {\n        \tjson = this.getApiParam('json');\n        } else if (config.json) {\n        \tjson = config.json;\n        } else if (config.edges) {\n        \tjson.edges = config.edges;\n        \tif (config.nodes) {\n        \t\tjson.nodes = config.nodes;\n        \t}\n        } else if (config && config.jsonData) {\n        \tjson = JSON.parse(config.jsonData);\n        }\n        this.loadJson(json);\n    },\n    initComponent: function(config) {\n        this.on('boxready', function(src, corpus) {\n            this.initGraph();\n            this.refreshGraph();\n        }, this);\n        \n        this.on('resize', function(panel, width, height) {\n            var vis = this.body.down('svg');\n            if (vis) {\n                var el = this.body;\n                var elHeight = el.getHeight();\n                var elWidth = el.getWidth();\n                vis.dom.setAttribute('width', elWidth);\n                vis.dom.setAttribute('height', elHeight);\n                this.getVisLayout()\n                    .force('x', d3.forceX(elWidth/2))\n\t    \t\t\t.force('y', d3.forceY(elHeight/2));\n                \n                if (this.getVisLayout().alpha() < 0.075) {\n                \tthis.getVisLayout().alpha(-1); // trigger end/zoomToFit\n                }\n            }\n        }, this);\n        \n        this.callParent(arguments);\n    },\n    \n    processJson: function(json) {\n    \tif (!json || !json.edges) {\n            if (json && json.links) {\n                json.edges = json.links;\n                delete json.links;\n            }\n            if (!json || !json.edges) {\n                json = json || {};\n                json.edges = [];\n            }\n        }\n    \tif (!json.nodes) {\n    \t\tjson.nodes = [];\n    \t}\n        if (json.nodes.length === 0) {\n            var wordFreq = {};\n            json.edges.forEach(function(edge) {\n                ['source', 'target'].forEach(function(loc) {\n                \tvar term = edge[loc];\n                    if (term in wordFreq == false) {\n                        wordFreq[term] = 1;\n                        json.nodes.push({term: term});\n                    } else {\n                        wordFreq[term]++;\n                    }\n                    edge.value = 1;\n                });\n            }, this);\n            json.nodes.forEach(function(node) {\n            \tvar val = wordFreq[node.term] === undefined ? 1 : wordFreq[node.term];\n                Ext.applyIf(node, {value: val});\n            });\n        } else {\n        \tjson.nodes.forEach(function(node) {\n        \t\tExt.applyIf(node, {value: 1});\n        \t});\n        }\n        \n        return json;\n    },\n    \n    loadJson: function(json) {\n    \tthis.processJson(json);\n    \t\n    \tvar existingTerms = {};\n\t\tthis.getNodeData().forEach(function(node) {\n\t\t\texistingTerms[node.term] = true;\n\t\t}, this);\n\t\t\n    \tvar newNodes = [];\n    \tvar newEdges = [];\n    \t\n    \tjson.nodes.forEach(function(node) {\n            if (existingTerms[node.term] === undefined) {\n            \tnode.id = this.idGet(node.term);\n            \tnewNodes.push(node);\n            }\n        }, this);\n        json.edges.forEach(function(newedge) {\n            var sourceId = this.idGet(newedge.source);\n            var targetId = this.idGet(newedge.target);\n            var edges = this.getEdgeData();\n            var exists = false;\n            for (var i = 0; i < edges.length; i++) {\n            \tvar edge = edges[i];\n            \tif ((edge.source.id == sourceId && edge.target.id == targetId) || (edge.target.id == sourceId && edge.source.id == targetId)) {\n            \t\texists = true;\n            \t\tbreak;\n            \t}\n            }\n            if (!exists) {\n            \tnewedge.source = sourceId;\n            \tnewedge.target = targetId;\n            \tnewedge.id = sourceId+'-'+targetId;\n\t            newEdges.push(newedge);\n            }\n        }, this);\n        \n        this.setNodeData(this.getNodeData().concat(newNodes));\n        this.setEdgeData(this.getEdgeData().concat(newEdges));\n        \n        this.refreshGraph();\n    },\n    \n    // get a DOM appropriate id\n    idGet: function(term) {\n    \treturn term.replace(/\\W/g, '_');\n    },\n    \n    updateDataForNode: function(nodeId, dataObj) {\n    \tvar data = this.getNodeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === nodeId) {\n\t\t\t\tExt.apply(data[i], dataObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n    },\n    \n    updateDataForEdge: function(edgeId, dataObj) {\n    \tvar data = this.getEdgeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === edgeId) {\n\t\t\t\tExt.apply(data[i], dataObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n    },\n    \n    addNode: function(dataObj) {\n    \tif (Ext.isString(dataObj)) {\n    \t\tdataObj = {term: dataObj};\n    \t}\n    \tif (dataObj.term) {\n    \t\tthis.loadJson({nodes: [dataObj]});\n    \t}\n    },\n    \n    removeNode: function(nodeId, removeOrphans) {\n    \tvar data = this.getNodeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === nodeId) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar potentialOrphans = {};\n\t\tdata = this.getEdgeData();\n\t\tfor (var i = data.length-1; i >= 0; i--) {\n\t\t\tvar match = false;\n\t\t\tif (data[i].source.id === nodeId) {\n\t\t\t\tmatch = true;\n\t\t\t\tpotentialOrphans[data[i].target.id] = true;\n\t\t\t}\n\t\t\tif (data[i].target.id === nodeId) {\n\t\t\t\tmatch = true;\n\t\t\t\tpotentialOrphans[data[i].source.id] = true;\n\t\t\t}\n\t\t\tif (match) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (removeOrphans) {\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\tif (potentialOrphans[data[i].source.id]) {\n\t\t\t\t\tdelete potentialOrphans[data[i].source.id];\n\t\t\t\t}\n\t\t\t\tif (potentialOrphans[data[i].target.id]) {\n\t\t\t\t\tdelete potentialOrphans[data[i].target.id];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var orphanId in potentialOrphans) {\n\t\t\t\tthis.removeNode(orphanId, true);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.refreshGraph();\n    },\n    \n    addEdge: function(dataObj) {\n    \tif (Ext.isObject(dataObj) && dataObj.source && dataObj.target) {\n    \t\tthis.loadJson({edges: [dataObj]});\n    \t}\n    },\n    \n    removeEdge: function(edgeId, removeOrphans) {\n    \tvar data = this.getEdgeData();\n    \tfor (var i = data.length-1; i >= 0; i--) {\n\t\t\tif (data[i].id === edgeId) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (removeOrphans) {\n\t\t\tvar potentialOrphans = {};\n\t\t\tdata = this.getNodeData();\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\tpotentialOrphans[data[i].id] = true;\n\t\t\t}\n\t\t\tdata = this.getEdgeData();\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\tif (potentialOrphans[data[i].source.id]) {\n\t\t\t\t\tdelete potentialOrphans[data[i].source.id];\n\t\t\t\t}\n\t\t\t\tif (potentialOrphans[data[i].target.id]) {\n\t\t\t\t\tdelete potentialOrphans[data[i].target.id];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var orphanId in potentialOrphans) {\n\t\t\t\tthis.removeNode(orphanId, true);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tthis.refreshGraph();\n    },\n    \n    initGraph: function() {\n        var el = this.getLayout().getRenderTarget();\n        el.update('');\n        var width = el.getWidth();\n        var height = el.getHeight();\n        \n        var physics = this.getGraphPhysics();\n        this.setVisLayout(d3.forceSimulation()\n        \t.velocityDecay(physics.damping)\n    \t\t.force('x', d3.forceX(width/2).strength(physics.centralGravity))\n    \t\t.force('y', d3.forceY(height/2).strength(physics.centralGravity))\n            .force('link', d3.forceLink().id(function(d) { return d.id; }).distance(physics.springLength).strength(physics.springStrength))\n            .force('charge', d3.forceManyBody().strength(physics.nodeGravity))\n            .force('collide', d3.forceCollide().radius(function(d) { return Math.sqrt(d.bbox.width * d.bbox.height)*physics.collisionScale; }))\n            .on('tick', function() {\n            \t this.getEdgeSelection()\n\t                .attr('x1', function(d) { return d.source.x; })\n\t                .attr('y1', function(d) { return d.source.y; })\n\t                .attr('x2', function(d) { return d.target.x; })\n\t                .attr('y2', function(d) { return d.target.y; });\n\t    \n            \t this.getNodeSelection()\n            \t \t.attr('transform', function(d) {\n            \t \t\tvar x = d.x - d.bbox.width*0.5;\n            \t \t\tvar y = d.y - d.bbox.height*0.5;\n            \t \t\treturn 'translate('+x+','+y+')';\n        \t \t\t});\n            \t \n            \t if (this.getVisLayout().alpha() < 0.075) {\n \t    \t\t\tthis.getVisLayout().alpha(-1); // trigger end event\n \t    \t\t}\n\t        }.bind(this))\n\t        .on('end', function() {\n\t    \t\tthis.zoomToFit();\n\t    \t}.bind(this))\n        );\n        \n        var svg = d3.select(el.dom).append('svg').attr('width', width).attr('height', height);\n        var g = svg.append('g');\n        \n        var zoom = d3.zoom()\n\t\t.scaleExtent(this.getZoomExtent())\n\t\t.on('zoom', function() {\n\t\t\tg.attr('transform', d3.event.transform);\n\t\t});\n\t\tthis.setZoom(zoom);\n\t\tsvg.call(zoom);\n        \n        this.setEdgeSelection(g.append('g').attr('class', 'edges').selectAll('.edge'));\n        this.setNodeSelection(g.append('g').attr('class', 'nodes').selectAll('.node'));\n        this.setVis(g);\n    },\n    \n    resetGraph: function() {\n\t    this.setNodeData([]);\n\t\tthis.setEdgeData([]);\n\t\tthis.refreshGraph();\n    },\n    \n    refreshGraph: function() {\n    \tif (this.getVisLayout() === undefined) return;\n    \t\n        var edgeData = this.getEdgeData();\n        var nodeData = this.getNodeData();\n        \n        var nodeExtent = d3.extent(nodeData, function(d) { return d.value; });\n        var nodeSum = d3.sum(nodeData, function(d) { return d.value; });\n        var edgeExtent = d3.extent(edgeData, function(d) { return d.value; });\n        var edgeSum = d3.sum(edgeData, function(d) { return d.value; });\n\n        var edgeScaling = this.getEdgeScaling();\n        if (edgeScaling.scalingFunction === undefined) {\n        \tedgeScaling.scalingFunction = d3.scaleLinear().domain(edgeExtent).range([edgeScaling.minSize, edgeScaling.maxSize]);\n        }\n        \n        var nodeScaling = this.getNodeScaling();\n        if (nodeScaling.scalingFunction === undefined) {\n        \tnodeScaling.scalingFunction = d3.scaleLog().domain(nodeExtent).range([nodeScaling.minSize, nodeScaling.maxSize]);\n        }\n        \n        var edge = this.getEdgeSelection().data(edgeData, function(d) { return d.id; });\n        edge.exit().remove();\n        var edgeEnter = edge.enter().append('line')\n        \t.attr('class', 'edge')\n        \t.attr('id', function(d) { return d.id; })\n        \t.style('cursor', 'pointer')\n        \t.style('stroke-width', function(d) { return edgeScaling.scalingFunction(d.value); })\n        \t.on('mouseover', this.edgeMouseOver.bind(this))\n            .on('mouseout', this.edgeMouseOut.bind(this))\n        \t.on('click', function(d) {\n        \t\td3.event.stopImmediatePropagation();\n\t\t\t\td3.event.preventDefault();\n\t\t\t\tthis.setCurrentEdge(d);\n\t\t\t\tthis.fireEvent('edgeclicked', this, d);\n        \t}.bind(this));\n        \n        this.setEdgeSelection(edgeEnter.merge(edge));\n        \n        var node = this.getNodeSelection().data(nodeData, function(d) { return d.id; });\n        node.exit().remove();\n        var nodeEnter = node.enter().append('g')\n            .attr('class', 'node')\n            .attr('id', function(d) { return d.id; })\n            .style('cursor', 'pointer')\n            .on('mouseover', this.nodeMouseOver.bind(this))\n            .on('mouseout', this.nodeMouseOut.bind(this))\n            .on('click', function(d) {\n\t\t\t\td3.event.stopImmediatePropagation();\n\t\t\t\td3.event.preventDefault();\n\t\t\t\tthis.setCurrentNode(d);\n\t\t\t\tthis.fireEvent('nodeclicked', this, d);\n\t\t\t}.bind(this))\n\t\t\t.on('dblclick', function(d) {\n\t\t\t\td3.event.stopImmediatePropagation();\n\t\t\t\td3.event.preventDefault();\n\t\t\t\tthis.fireEvent('nodedblclicked', this, d);\n\t\t\t}.bind(this))\n\t\t\t.on('contextmenu', function(d) {\n\t\t\t\td3.event.stopImmediatePropagation();\n\t\t\t\td3.event.preventDefault();\n\t\t\t\tthis.fireEvent('nodecontextclicked', this, d);\n\t\t\t}.bind(this))\n            .call(d3.drag()\n                .on('start', function(d) {\n                    if (!d3.event.active) this.getVisLayout().alphaTarget(0.3).restart();\n                    if (this.getFixOnDrag()) {\n\t                    d.fx = d.x;\n\t                    d.fy = d.y;\n                    }\n                    this.fireEvent('nodedragstart', this, d);\n            \t}.bind(this))\n                .on('drag', function(d) {\n                \tif (this.getFixOnDrag()) {\n\t                    d.fx = d3.event.x;\n\t                    d.fy = d3.event.y;\n                \t} else {\n                \t\td.x = d3.event.x;\n                \t\td.y = d3.event.y;\n                \t}\n                    this.fireEvent('nodedrag', this, d);\n                }.bind(this))\n                .on('end', function(d) {\n                \tif (!d3.event.active) this.getVisLayout().alphaTarget(0);\n                \tthis.fireEvent('nodedragend', this, d);\n                }.bind(this))\n            );\n\n        nodeEnter.append('rect');\n                \n        nodeEnter.append('text')\n            .text(function(d) { return d.term; })\n//            .attr('font-family', function(d) { return this.getApplication().getCategoriesManager().getFeatureForTerm('font', d.term); }.bind(this))\n            .attr('font-size', function(d) {return nodeScaling.scalingFunction(d.value)+'px';})\n//            .attr('text-anchor', 'middle')\n\t\t\t.attr('dominant-baseline', 'middle')\n\t\t\t.style('user-select', 'none')\n            .each(function(d) { d.bbox = this.getBBox(); });\n        \n        this.setNodeSelection(nodeEnter.merge(node));\n        \n        this.getNodeSelection().selectAll('rect')\n        \t.attr('width', function(d) { return d.bbox.width+16; })\n\t\t\t.attr('height', function(d) { return d.bbox.height+8; })\n\t\t\t.attr('rx', function(d) { return Math.max(2, d.bbox.height * 0.2); })\n\t\t\t.attr('ry', function(d) { return Math.max(2, d.bbox.height * 0.2); });\n        \n        this.getNodeSelection().selectAll('text')\n        \t.attr('dx', 8)\n\t\t\t.attr('dy', function(d) { return d.bbox.height*0.5+4; });\n        \n\n        this.getEdgeSelection().call(this.applyEdgeStyle.bind(this));\n        this.getNodeSelection().call(this.applyNodeStyle.bind(this));\n        \n        this.getVisLayout().nodes(nodeData);\n        this.getVisLayout().force('link').links(edgeData);\n        this.getVisLayout().alpha(1).restart();\n    },\n    \n    zoomToFit: function(paddingPercent, transitionDuration) {\n    \tvar bounds = this.getVis().node().getBBox();\n    \tvar width = bounds.width;\n    \tvar height = bounds.height;\n    \tvar midX = bounds.x + width/2;\n    \tvar midY = bounds.y + height/2;\n    \tvar svg = this.getVis().node().parentElement;\n    \tvar svgRect = svg.getBoundingClientRect();\n        var fullWidth = svgRect.width;\n        var fullHeight = svgRect.height;\n    \tvar scale = (paddingPercent || 0.8) / Math.max(width/fullWidth, height/fullHeight);\n    \tvar translate = [fullWidth/2 - scale*midX, fullHeight/2 - scale*midY];\n    \td3.select(svg)\n    \t\t.transition()\n    \t\t.duration(transitionDuration || 500)\n    \t\t.call(this.getZoom().transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n    },\n    \n    nodeScaling: function(min, max, total, value) {\n    \tif (min === max) {\n    \t\treturn 0.5;\n    \t} else {\n    \t\tvar scale = 1 / (max - min);\n    \t\treturn Math.max(0, (value-min)*scale);\n    \t}\n    },\n    \n    applyNodeStyle: function(sel, nodeState) {\n\t\tvar state = nodeState === undefined ? 'normal' : nodeState;\n\t\tvar style = this.getGraphStyle().node[state];\n    \tsel.selectAll(':not(text)')\n    \t\t.style('fill', function(d) { return style.fill; }.bind(this))\n    \t\t.style('fill-opacity', function(d) { return style.fillOpacity; }.bind(this))\n    \t\t.style('stroke', function(d) { return style.stroke; }.bind(this))\n    \t\t.style('stroke-opacity', function(d) { return style.strokeOpacity; }.bind(this))\n    \t\t.style('stroke-width', function(d) { return style.strokeWidth; }.bind(this));\n    },\n    \n    applyEdgeStyle: function(sel, edgeState) {\n    \tvar state = edgeState === undefined ? 'normal' : edgeState;\n    \tvar style = this.getGraphStyle().edge[state];\n    \tsel.style('stroke', function(d) { return style.stroke; }.bind(this))\n\t    \t.style('stroke-opacity', function(d) { return style.strokeOpacity; }.bind(this));\n//\t    \t.style('stroke-width', function(d) { return style.strokeWidth; }.bind(this));\n    },\n\n    edgeMouseOver: function(d) {\n    \tthis.getEdgeSelection().call(this.applyEdgeStyle.bind(this));\n    \tthis.getVis().select('#'+d.id).call(this.applyEdgeStyle.bind(this), 'highlight');\n    },\n    \n    edgeMouseOut: function(d) {\n    \tthis.getEdgeSelection().call(this.applyEdgeStyle.bind(this));\n    },\n    \n    nodeMouseOver: function(d) {\n    \tthis.setCurrentNode(d);\n\t\t\n    \tthis.getNodeSelection().call(this.applyNodeStyle.bind(this));\n\t\t\n\t\tthis.getEdgeSelection().each(function(link) {\n\t\t\tvar id;\n\t\t\tif (link.source.id == d.id) {\n\t\t\t\tid = link.target.id;\n\t\t\t} else if (link.target.id == d.id) {\n\t\t\t\tid = link.source.id;\n\t\t\t}\n\t\t\tif (id !== undefined) {\n\t\t\t\tthis.getVis().select('#'+id).call(this.applyNodeStyle.bind(this), 'highlight');\n\t\t\t\tthis.getVis().select('#'+link.id).call(this.applyEdgeStyle.bind(this), 'highlight');\n\t\t\t}\n\t\t}.bind(this));\n\t\t\n\t\tthis.getVis().select('#'+d.id).call(this.applyNodeStyle.bind(this), 'highlight');\n    },\n    \n    nodeMouseOut: function(d) {\n    \tthis.getNodeSelection().call(this.applyNodeStyle.bind(this));\n    \tthis.getEdgeSelection().call(this.applyEdgeStyle.bind(this));\n    }\n});","Ext.define('Voyant.widget.ReaderGraph', {\n    extend: 'Ext.container.Container',\n    mixins: ['Voyant.util.Localization'],\n    alias: 'widget.readergraph',\n    statics: {\n        i18n: {\n        }\n    },\n    config: {\n        parentPanel: undefined,\n        corpus: undefined,\n        documentsStore: undefined,\n        documentTermsStore: undefined,\n    \tlocationMarker: undefined,\n    \tisDetailedGraph: true\n    },\n    \n    locationMarkerColor: '#157fcc',\n\n    DETAILED_GRAPH_DOC_LIMIT: 25, // upper limit on document count for showing detailed graphs\n    LOCATION_UPDATE_FREQ: 100,\n\n    SCROLL_UP: -1,\n    SCROLL_EQ: 0,\n    SCROLL_DOWN: 1,\n\n    constructor: function(config) {\n        this.callParent(arguments);\n    },\n\n    initComponent: function() {\n        Ext.apply(this, {\n            layout: {\n                type: 'hbox'\n            },\n            items: []\n        });\n\n        this.setDocumentTermsStore(Ext.create(\"Ext.data.Store\", {\n\t\t\tmodel: \"Voyant.data.model.DocumentTerm\",\n    \t\tautoLoad: false,\n    \t\tremoteSort: false,\n    \t\tproxy: {\n\t\t\t\ttype: 'ajax',\n\t\t\t\turl: Voyant.application.getTromboneUrl(),\n\t\t\t\textraParams: {\n\t\t\t\t\ttool: 'corpus.DocumentTerms',\n\t\t\t\t\twithDistributions: true,\n\t\t\t\t\t// TODO handle positions\n\t\t\t\t\twithPositions: true,\n\t\t\t\t\tbins: 25,\n\t\t\t\t\tforTool: 'reader'\n\t\t\t\t},\n\t\t\t\treader: {\n\t\t\t\t\ttype: 'json',\n\t\t            rootProperty: 'documentTerms.terms',\n\t\t            totalProperty: 'documentTerms.total'\n\t\t\t\t},\n\t\t\t\tsimpleSortMode: true\n   \t\t    },\n   \t\t    listeners: {\n                load: function(store, records, successful, opts) {\n                    store.sort('docIndex', 'ASC');\n                    var graphDatas = {};\n                    var maxValue = 0;\n                    store.each(function(r) {\n                        var graphData = [];\n                        var dist = r.get('distributions');\n                        var docId = r.get('docId');\n                        var docIndex = r.get('docIndex');\n                        var term = r.get('term');\n                        for (var i = 0; i < dist.length; i++) {\n                            var bin = i;//docIndex * dist.length + i;\n                            var val = dist[i];\n                            if (val > maxValue) maxValue = val;\n                            graphData.push([docId, docIndex, bin, val, term]);\n                        }\n                        graphDatas[docIndex] = graphData;\n                    }, this);\n                    \n                    if (this.getIsDetailedGraph()) {\n                        var graphs = this.query('cartesian');\n                        for (var i = 0; i < graphs.length; i++) {\n                            var graph = graphs[i];\n                            var data = graphDatas[i];\n                            if (data !== undefined) {\n                                graph.getAxes()[0].setMaximum(maxValue);\n                                graph.getStore().loadData(data);\n                            } else {\n                                graph.getStore().removeAll();\n                            }\n                        }\n                    }\n   \t\t    \t},\n   \t\t    \tscope: this\n   \t\t    }\n    \t}));\n\n        this.callParent(arguments);\n\n        var parentPanel = this.findParentBy(function(clz) {\n    \t\treturn clz.mixins[\"Voyant.panel.Panel\"];\n        });\n    \tif (parentPanel != null) {\n            this.setParentPanel(parentPanel);\n    \t\tif (parentPanel.getCorpus && parentPanel.getCorpus()) {\n    \t\t\tthis.on(\"afterrender\", function(c) {\n    \t\t\t\tthis.setCorpus(parentPanel.getCorpus());\t\n    \t\t\t}, this);\n    \t\t} else {\n                parentPanel.on(\"loadedCorpus\", function(src, corpus) {\n                    this.setCorpus(corpus);\n                }, this);\n                this.hasCorpusLoadedListener = true;\n    \t\t}\n        }\n        \n        this.on('boxready', function() {\n            if (this.getLocationMarker() == undefined) {\n                this.setLocationMarker(Ext.DomHelper.append(this.getEl(), {tag: 'div', style: 'background-color: '+this.locationMarkerColor+'; height: 100%; width: 2px; position: absolute; top: 0; left: 0;'}));\n            }\n        });        \n    },\n\n    updateCorpus: function(corpus) {\n        var docs = corpus.getDocuments();\n        this.setDocumentsStore(docs);\n        this.getDocumentTermsStore().getProxy().setExtraParam('corpus', corpus.getId());\n        this.setIsDetailedGraph(docs.getTotalCount() < this.DETAILED_GRAPH_DOC_LIMIT);\n\n        this.generateChart(corpus, this);\n    },\n\n    loadQueryTerms: function(queryTerms) {\n    \tif (queryTerms && queryTerms.length > 0) {\n\t\t\tthis.getDocumentTermsStore().load({\n\t\t\t\tparams: {\n\t\t\t\t\tquery: queryTerms\n    \t\t\t}\n\t\t\t});\n\t\t}\n    },\n\n    generateChart: function(corpus, container) {\n        function getColor(index, alpha) {\n            var c = this.getParentPanel().getApplication().getColor(index);\n            return 'rgba('+c[0]+','+c[1]+','+c[2]+','+alpha+')';\n        }\n        \n        function map(value, istart, istop, ostart, ostop) {\n            return ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\n        }\n        \n        function addChart(docInfo) {\n            var index = docInfo.index;\n            var fraction = docInfo.fraction;\n            var height = docInfo.relativeHeight;\n            var bColor = getColor.call(this, index, 0.3);\n            var sColor = getColor.call(this, index, 1.0);\n            var chart = container.add({\n                xtype: 'cartesian',\n                plugins: {\n                    ptype: 'chartitemevents'\n                },\n                flex: fraction,\n                height: '100%',\n                insetPadding: 0,\n                background: {\n                    type: 'linear',\n                    degrees: 90,\n                    stops: [{\n                        offset: 0,\n                        color: bColor\n                    },{\n                        offset: height,\n                        color: bColor\n                    },{\n                        offset: height,\n                        color: 'white'\n                    },{\n                        offset: 1,\n                        color: 'white'\n                    }]\n                },\n                axes: [{\n                    type: 'numeric',\n                    position: 'left',\n                    fields: 'distribution',\n                    hidden: true\n                },{\n                    type: 'category',\n                    position: 'bottom',\n                    fields: 'bin',\n                    hidden: true\n                }],\n                series: [{\n                    type: 'line',\n                    xField: 'bin',\n                    yField: 'distribution',\n                    style: {\n                        lineWidth: 2,\n                        strokeStyle: sColor\n                    },\n                    tooltip: {\n                        corpus: corpus,\n                        trackMouse: true,\n                        style: 'background: #fff',\n                        showDelay: 0,\n                        dismissDelay: 500,\n                        hideDelay: 5,\n                        renderer: function(toolTip, record, ctx) {\n                            toolTip.setHtml(corpus.getDocument(record.get('docIndex')).getTitle()+\"<br>\"+record.get('term') + ': ' + record.get('distribution'));\n                        }\n                    }\n                }],\n                store: Ext.create('Ext.data.ArrayStore', {\n                    fields: ['docId', 'docIndex', 'bin', 'distribution', 'term'],\n                    data: []\n                }),\n                listeners: {\n                    itemclick: function(chart, item, event) {\n                        // var data = item.record.data;\n                        // var doc = this.getDocumentsStore().getAt(data.docIndex);\n                        // this.getParentPanel().getApplication().dispatchEvent('documentsClicked', this, [doc]);\n                    },\n                    scope: this\n                }\n            });\n            \n            chart.body.on('click', function(event, target) {\n                var el = Ext.get(target);\n                \n                var x = event.getX();\n                var box = el.getBox();\n                var fraction = (x - box.x) / box.width;\n\n                var chartContainer = el.parent('.x-panel');\n                var containerParent = chartContainer.parent();\n                var children = Ext.toArray(containerParent.dom.children);\n                var docIndex = children.indexOf(chartContainer.dom);\n\n                this.fireEvent('documentRelativePositionSelected', this, {docIndex: docIndex, fraction: fraction});\n            }, this);\n        }\n        \n        container.removeAll();\n        \n        var docs = corpus.getDocuments();\n        var tokensTotal = corpus.getWordTokensCount();\n        var docInfos = [];\n        var docMinSize = Number.MAX_VALUE;\n        var docMaxSize = -1;\n//      for (var i = 0; i < docs.getTotalCount(); i++) {\n        for (var i = 0; i < docs.getCount(); i++) {\n            var d = docs.getAt(i);\n            var docIndex = d.get('index');\n            var count = d.get('tokensCount-lexical');\n            if (count < docMinSize) docMinSize = count;\n            if (count > docMaxSize) docMaxSize = count;\n            var fraction = count / tokensTotal;\n            docInfos.push({\n                index: docIndex,\n                count: count,\n                fraction: fraction\n            });\n        }\n        \n        if (this.getIsDetailedGraph()) {\n            for (var i = 0; i < docInfos.length; i++) {\n                var d = docInfos[i];\n                d.relativeHeight = d.count==docMaxSize ? 1 : map(d.count, docMinSize, docMaxSize, 0.25, 1);\n                addChart.call(this, d);\n            }\n        } else {\n            var chart = container.add({\n                xtype: 'cartesian',\n                plugins: {\n                    ptype: 'chartitemevents'\n                },\n                flex: 1,\n                height: '100%',\n                insetPadding: 0,\n                axes: [{\n                    type: 'numeric',\n                    position: 'left',\n                    fields: 'count',\n                    hidden: true\n                },{\n                    type: 'category',\n                    position: 'bottom',\n                    fields: 'index',\n                    hidden: true\n                }],\n                series: [{\n                    type: 'bar',\n                    xField: 'index',\n                    yField: 'count',\n                    style: {\n                        minGapWidth: 0,\n                        minBarWidth: 1,\n                        lineWidth: 0,\n                        strokeStyle: 'none'\n                    },\n                    renderer: function (sprite, config, rendererData, index) {\n                        return {fillStyle: getColor.call(this, index, 0.3)};\n                    }.bind(this)\n                }],\n                store: Ext.create('Ext.data.JsonStore', {\n                    fields: [{name: 'index', type: 'int'}, {name: 'count', type: 'int'}, {name: 'fraction', type: 'float'}],\n                    data: docInfos\n                }),\n                listeners: {\n                    itemclick: function(chart, item, event) {\n                        var el = Ext.get(event.getTarget());\n                        var x = event.getX();\n                        var box = el.getBox();\n                        var docWidth = box.width / this.getCorpus().getDocuments().getCount();\n                        var docX = (x - box.x) % docWidth;\n                        var fraction = docX / docWidth;\n\n            \t\t\tvar data = item.record.data;\n                        var doc = this.getDocumentsStore().getAt(data.index);\n                        var docIndex = doc.getIndex();\n\n                        this.fireEvent('documentRelativePositionSelected', this, {docIndex: docIndex, fraction: fraction});\n                    },\n                    scope: this\n                }\n            });\n        }\n\n    },\n\n    moveLocationMarker: function(docIndex, fraction, scrollDir) {\n        var locMarkEl = Ext.get(this.getLocationMarker());\n        var locX = locMarkEl.getX();\n        if (this.getIsDetailedGraph()) {\n            var graph = this.query('cartesian')[docIndex];\n            if (graph) {\n                locX = graph.getX() + graph.getWidth()*fraction;\n            }\n        } else {\n            var graph = this.down('cartesian');\n            var docWidth = graph.getWidth() / this.getCorpus().getDocuments().getCount();\n            locX = graph.getX() + docWidth*docIndex + docWidth*fraction;\n        }\n        if (scrollDir != null) {\n            var currX = locMarkEl.getX();\n            // prevent location being set in opposite direction of scroll\n            if ((scrollDir == this.SCROLL_DOWN && currX > locX) || (scrollDir == this.SCROLL_UP && currX < locX)) locX = currX;\n        }\n        locMarkEl.setX(locX);\n    }\n});","Ext.define('Voyant.panel.Panel', {\n\tmixins: ['Voyant.util.Localization','Voyant.util.Api','Voyant.util.Toolable','Voyant.util.DetailedError'],\n\trequires: ['Voyant.widget.QuerySearchField','Voyant.widget.StopListOption','Voyant.widget.CategoriesOption','Voyant.widget.TotalPropertyStatus'],\n\talias: 'widget.voyantpanel',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tconfig: {\n\t\t\tcorpusValidated: false\n\t\t},\n\t\tapi: {\n\t\t\tcorpus: undefined,\n\t\t\tinput: undefined,\n\t\t\tinputFormat: undefined,\n\t\t\tsubtitle: undefined\n\t\t}\n\t},\n\tconfig: {\n\t\tcorpus: undefined\n\t},\n\tconstructor: function(config) {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\t\tthis.mixins['Voyant.util.Toolable'].constructor.apply(this, arguments);\n\t\tif (!this.glyph) {\n\t\t\tthis.glyph = Ext.ClassManager.getClass(this).glyph\n\t\t}\n\t\t\n\t\tthis.on(\"afterrender\", function() {\n\t\t\tif (this.getXType()!='facet' && this.getApiParam('subtitle') && this.getTitle()) {\n\t\t\t\tthis.setTitle(this.getTitle()+\" <i style='font-size: smaller;'>\"+this.getApiParam('subtitle')+\"</i>\")\n\t\t\t}\n\t\t\tif (this.isXType(\"grid\")) {\n\t\t\t\tthis.getSelectionModel().on(\"selectionchange\", function(store, records) {\n//\t\t\t\t\tconsole.warn(records, this.selectedRecordsToRemember)\n//\t\t\t\t\tthis.selectedRecordsToRemember = records;\n\t\t\t\t}, this);\n\t\t\t\tthis.getStore().on(\"beforeload\", function() {\n\t\t\t\t\tthis.selectedRecordsToRemember = this.getSelection();\n\t\t\t\t}, this)\n\t\t\t\tthis.getStore().on(\"load\", function(store, records) {\n\t\t\t\t\tif (Ext.Array.from(this.selectedRecordsToRemember).length>0) {\n\t\t\t\t\t\t// combine contents of store with contents of remembered items, filtering out duplicates\n\t\t\t\t\t\tvar seen = {}\n\t\t\t\t\t\tvar mergedRecords = Ext.Array.merge(this.selectedRecordsToRemember, records).filter(function(item) {\n\t\t\t\t\t\t\tif (!(item.getId() in seen)) {\n\t\t\t\t\t\t\t\tseen[item.getId()]=true;\n\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (store.isBufferedStore) {\n\t\t\t\t\t\t\tif (store.currentPage==1) {\n\t\t\t\t\t\t\t\tstore.data.addAll(mergedRecords);\n\t\t\t\t\t\t\t\tstore.totalCount = mergedRecords.length;\n\t\t\t\t\t\t\t\tstore.fireEvent('refresh', store);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstore.loadRecords(mergedRecords);\n\t\t\t\t\t\t\tthis.getSelectionModel().select(this.selectedRecordsToRemember);\n\t\t\t\t\t\t\tstore.fireEvent('refresh', store);\n\t\t\t\t\t\t\tthis.selectedRecordsToRemember = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\t\t}, this);\n\t\t\n\t\tthis.on({\n\t\t\tloadedCorpus: {\n\t\t\t\tfn: function(src, corpus) {\n\t\t    \t\t// make sure API is updated if we had a corpus and it's changed, this should be registered first, so hopefully be fired before tools receive notification\n\t\t    \t\tthis.setApiParam(\"corpus\", corpus.getAliasOrId());\n\t\t\t\t\tthis.setCorpus(corpus);\n\t\t\t\t},\n\t\t\t\tpriority: 999, // very high priority\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\t},\n\t\n\tgetApplication: function() {\n\t\treturn Voyant.application;\n\t},\n\t\n\tgetBaseUrl: function() {\n\t\treturn this.getApplication().getBaseUrl();\n\t},\n\t\n\topenUrl: function(url) {\n\t\tthis.getApplication().openUrl.apply(this, arguments);\n\t},\n\t\n\tgetTromboneUrl: function() {\n\t\treturn this.getApplication().getTromboneUrl();\n\t},\n\t\n\tdispatchEvent: function() {\n\t\tvar application = this.getApplication();\n\t\tapplication.dispatchEvent.apply(application, arguments);\n\t},\n\t\n\tshowError: function(config, response) {\n\t\tif (Ext.isString(config)) {\n\t\t\tconfig = {\n\t\t\t\tmessage: config\n\t\t\t}\n\t\t}\n\t\tExt.applyIf(config, {\n\t\t\ttitle: this.localize(\"error\")+\" (\"+this.localize(\"title\")+\")\"\n\t\t})\n\t\tthis.getApplication().showError(config, response)\n\t},\n\t\n\tshowResponseError: function(config, response) {\n\t\tthis.getApplication().showResponseError(config, response)\n\t},\n\t\n\ttoastError: function(config) {\n\t\tif (Ext.isString(config)) {\n\t\t\tconfig = {html: config}\n\t\t}\n\t\tExt.applyIf(config, {\n\t\t\tglyph: 'xf071@FontAwesome',\n\t\t\ttitle: this.localize(\"error\")\n\t\t})\n\t\tthis.toast(config);\n\t},\n\t\n\ttoastInfo: function(config) {\n\t\tif (Ext.isString(config)) {\n\t\t\tconfig = {html: config}\n\t\t}\n\t\tExt.applyIf(config, {\n\t\t\tglyph: 'xf05a@FontAwesome',\n\t\t\ttitle: this.localize(\"info\")\n\t\t})\n\t\tthis.toast(config);\n\t},\n\t\n\ttoast: function(config) {\n\t\tif (Ext.isString(config)) {\n\t\t\tconfig = {html: config}\n\t\t}\n\t\tExt.applyIf(config, {\n\t\t\t slideInDuration: 500,\n\t\t\t shadow: true,\n\t\t\t align: 'b',\n\t\t\t anchor: this.getTargetEl()\t\t\t\n\t\t})\n\t\tExt.toast(config);\n\t},\n\n\t/**\n\t * Checks to see if we have access to this corpus, first by checking the application's\n\t * access setting for the corpus, then by checking the corpus setting.\n\t * \n\t * Assumes we're only calling this from a non-consumptive tool.\n\t */\n\thasCorpusAccess: function(corpus) {\n\t\tvar app = this.getApplication();\n\t\tif (app) {\n\t\t\tvar corpusAccess = app.getCorpusAccess();\n\t\t\tif (corpusAccess=='ADMIN' || corpusAccess=='ACCESS') {return true;}\n\t\t}\n\t\tif (!corpus) {\n\t\t\tif (this.getCorpus) {\n\t\t\t\tcorpus = this.getCorpus();\n\t\t\t}\n\t\t\tif (!corpus && app.getCorpus) {\n\t\t\t\tcorpus = app.getCorpus();\n\t\t\t}\n\t\t}\n\t\tif (corpus) {\n\t\t\treturn corpus.getNoPasswordAccess()!='NONCONSUMPTIVE' && corpus.getNoPasswordAccess()!='NONE';\n\t\t}\n\t\treturn false; // don't know if we ever get here\n\t}\n\t\n});","\nExt.define('Voyant.panel.VoyantTabPanel', {\n\textend: 'Ext.tab.Panel',\n\talias: 'widget.voyanttabpanel',\n\tmixins: ['Voyant.panel.Panel'],\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tinitComponent: function() {\n    \tthis.callParent(arguments);\n\t},\n\tlisteners: {\n\t\ttabchange: function(panel, newTab) {\n\t\t\tthis.tools = [];\n\t\t\tthis.getHeader().tools = [];\n\t\t\tthis.query(\"toolmenu\").forEach(function(toolMenu) {\n\t\t\t\ttoolMenu.destroy();\n\t\t\t})\n\t\t\tthis.addTool(newTab.tools)\n\t\t\tthis.getApplication().dispatchEvent(\"panelChange\", this)\n\t\t},\n\t\tafterrender: function(panel) {\n\t\t\tthis.fireEvent(\"tabchange\", this, this.getActiveTab())\n\t\t}\n\t},\n\tshowOptionsClick: function(panel) {\n\t\tvar tab = panel.getActiveTab();\n\t\tif (tab.showOptionsClick) {\n\t\t\ttab.showOptionsClick.apply(tab, arguments)\n\t\t}\n\t}\n});","Ext.define('Voyant.widget.Facet', {\n\textend: 'Ext.grid.Panel',\n    mixins: ['Voyant.panel.Panel'],\n    alias: 'widget.facet',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tstopList: 'auto',\n\t\t\tquery: undefined\n\t\t}\n\t},\n\t\n\tconstructor: function(config) {\n        this.callParent(arguments);\n        Ext.applyIf(config || {}, {\n        \tincludeTools: [], // don't show tools in header\n        \trowLines: false,\n        \tcolumnLines: false, // ignored?\n        \tsubtitle: undefined\n        });\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, [config]);\n\t},\n\t\n\trowLines: false,\n\t\n    initComponent: function(){\n\n    \tvar me = this;\n    \tif (!this.store) {\n    \t\tthis.store = new Ext.create(\"Voyant.data.store.CorpusFacets\", {\n    \t\t\tproxy: {\n    \t\t\t\textraParams: {\n    \t\t\t\t\tfacet: this.facet\n    \t\t\t\t}\n    \t\t\t},\n    \t\t\tparentPanel: this\n    \t\t})\n    \t\tthis.store.getProxy().on(\"exception\", function(proxy, request, operation, eOpts) {\n\t\t    \tme.showResponseError(\"Unable to fetch facet: \"+me.facet, response);\n    \t\t})\n    \t}\n    \t\n        Ext.applyIf(this, {\n        \temptyText: this.localize(\"emptyText\"),\n        \thideHeaders: true,\n        \tselType: 'checkboxmodel',\n        \tcolumns: [\n        \t          { renderer: function(value, metaData, record) {return \"(\"+record.getInDocumentsCount()+\") \"+record.getLabel()}, flex: 1 }\n        \t]\n        });\n        this.callParent();\n        \n        if (this.corpus) {\n        \tthis.setStoreCorpus(this.corpus);\n        }\n        \n        this.on('loadedCorpus', function(src, corpus) {\n        \tthis.setStoreCorpus(corpus);\n        }, this);\n        \n        this.on(\"query\", function(src, query) {\n        \tthis.setApiParam(\"query\", query);\n        \t// not getting set from beforeload, so set params here\n        \tthis.store.load({\n        \t\tparams: this.getApiParams()\n        \t})\n        })\n    },\n    \n    setStoreCorpus: function(corpus) {\n//    \tthis.callParent(arguments)\n    \tif (this.getStore()) {\n        \tthis.getStore().setCorpus(corpus);\n        \tthis.getStore().load();\n    \t}\n    }\n});\n","// assuming Bubblelines library is loaded by containing page (via voyant.jsp)\nExt.define('Voyant.panel.Bubbles', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.bubbles',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n    \t\t * @property stopList The stop list to use to filter results.\n    \t\t * Choose from a pre-defined list, or enter a comma separated list of words, or enter an URL to a list of stop words in plain text (one per line).\n    \t\t * @type String\n    \t\t * @private\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\tdocIndex: 0,\n    \t\t\n    \t\tlimit: 100,\n    \t\t\n    \t\taudio: false,\n    \t\t\n    \t\tspeed: 30\n    \t\t\t\n    \t\t\t\n    \t},\n    \tglyph: 'xf06e@FontAwesome'\n\t},\n\tconfig: {\n    \toptions: {xtype: 'stoplistoption'},\n    \taudio: false\n\t},\n\t\n\t\n    constructor: function() {\n\n    \tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n\t\t\thtml: '<canvas style=\"width: 100%; height: 100%\"></canvas>',\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n\t            \txtype: 'documentselectorbutton',\n\t            \tsingleSelect: true\n\t            },{\n\t\t\t\t\txtype: 'slider',\n\t\t\t\t\tfieldLabel: this.localize('speed'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 40,\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tincrement: 1,\n\t\t\t\t\tminValue: 1,\n\t\t\t\t\tmaxValue: 60,\n\t\t\t\t\tvalue: 30,\n\t\t\t\t\tlisteners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(parseInt(this.getApiParam(\"speed\")));\n\t                \t\tif (this.bubbles) {this.bubbles.frameRate(cmp.getValue())}\n\t                \t\tthis.setAudio(cmp.getValue());\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('speedTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    changecomplete: function(cmp, val) {\n\t                    \tthis.setApiParam('speed', val);\n\t                \t\tif (this.bubbles) {this.bubbles.frameRate(val)}\n\t                    },\n\t                    scope: this\n\t\t\t\t\t}\n\t\t\t\t},{\n\t                xtype: 'checkbox',\n\t                boxLabel: this.localize('sound'),\n\t                listeners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(this.getApiParam(\"audio\")===true ||  this.getApiParam(\"audio\")==\"true\");\n\t                \t\tthis.setAudio(cmp.getValue());\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('soundTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    change: function(cmp, val) {\n\t                    \tthis.setApiParam('audio', val);\n\t                    \tthis.setAudio(val);\n\t                    },\n\t                    scope: this\n\t                }\n\t            },{xtype: 'tbfill'}, {\n\t    \t\t\txtype: 'tbtext',\n\t    \t\t\thtml: this.localize('adaptation') //https://www.m-i-b.com.ar/letters/en/\n\t    \t\t}]\n    \t\t}]\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\");\n    \t\tvar me = this;\n    \t\tExt.Ajax.request({\n    \t\t\turl: this.getBaseUrl()+'resources/voyant/current/bubbles/bubbles.pjs'\n    \t\t}).then(function(data) {\n    \t\t\tvar canvas = me.getTargetEl().dom.querySelector(\"canvas\");\n    \t\t\tme.bubbles = new Processing(canvas, data.responseText);\n    \t\t\tme.bubbles.size(me.getTargetEl().getWidth(),me.getTargetEl().getHeight());\n    \t\t\tme.bubbles.frameRate(me.getApiParam('speed'));\n    \t\t\tme.bubbles.bindJavascript(me);\n    \t\t\tme.bubbles.noLoop();\n    \t\t\tme.loadDocument();\n    \t\t})\n    \t}, this);\n    \t\n    \tthis.on(\"resize\", function() {\n    \t\tif (this.bubbles) {\n    \t\t\tthis.bubbles.size(this.body.getWidth(),this.body.getHeight());\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"documentselected\", function(src, doc) {\n    \t\tthis.setApiParam('docIndex', this.getCorpus().getDocument(doc).getIndex());\n    \t\tthis.loadDocument();\n    \t})\n    },\n    \n    setAudio: function(val) {\n    \tif (this.gainNode) {this.gainNode.gain.value=val ? 1 : 0;}\n    \tthis.callParent(arguments)\n    },\n\n    handleCurrentTerm: function(term) {\n    \tif (this.oscillator) {this.oscillator.frequency.value = this.terms[term] ? parseInt((this.terms[term]-this.minFreq) * 2000 / (this.maxFreq-this.minFreq)) : 0;}\n    },\n    \n    handleDocFinished: function() {\n    \tif (this.gainNode) {this.gainNode.gain.value = 0;}\n    \tvar index = parseInt(this.getApiParam('docIndex'));\n    \tif (index+1<this.getCorpus().getDocumentsCount()) {\n    \t\tthis.setApiParam('docIndex', index+1);\n    \t\tthis.loadDocument();\n    \t}\n    },\n    \n    loadDocument: function() {\n    \tvar me = this, doc = this.getCorpus().getDocument(parseInt(this.getApiParam('docIndex')));\n    \t// if we're not in a tab panel, set the document title as part of the header\n    \tif (!this.up(\"tabpanel\")) {\n        \tthis.setTitle(this.localize('title') + \" <span class='subtitle'>\"+doc.getFullLabel()+\"</span>\");\n    \t}\n\n    \tdoc.loadDocumentTerms(Ext.apply(this.getApiParams([\"stopList\"]), {\n    \t\tlimit: 100\n    \t})).then(function(documentTerms) {\n    \t\tme.terms = {};\n    \t\tdocumentTerms.each(function(documentTerm) {\n    \t\t\tme.terms[documentTerm.getTerm()] = documentTerm.getRawFreq();\n    \t\t})\n    \t\tvar values = Object.keys(me.terms).map(function(k){return me.terms[k]});\n    \t\tme.minFreq = Ext.Array.min(values);\n    \t\tme.maxFreq = Ext.Array.max(values);\n    \t\tme.getCorpus().loadTokens({whitelist: Object.keys(me.terms), noOthers: true, limit: 0, docIndex: me.getApiParam('docIndex')}).then(function(tokens) {\n    \t\t\tvar words = [];\n        \t\ttokens.each(function(token) {\n    \t\t\t\twords.push(token.getTerm().toLowerCase());\n        \t\t})\n        \t\tme.bubbles.setLines([doc.getTitle(),words.join(\" \")]);\n        \t\tme.bubbles.loop();\n        \t\tme.oscillator.frequency.value = 150;\n        \t\tme.gainNode.gain.value = me.getAudio() ? 1 : 0;\n    \t\t})\n    \t})\n    },\n    \n    initComponent: function() {\n    \t// make sure to load script\n\t\tExt.Loader.loadScript(this.getBaseUrl()+\"resources/processingjs/processing.min.js\");\n\t\t\n\t\tvar audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n\t\t\n\t\tthis.oscillator = audioCtx.createOscillator();\n\t\tthis.gainNode = audioCtx.createGain();\n\t\tthis.oscillator.connect(this.gainNode);\n\t\tthis.gainNode.connect(audioCtx.destination);\n\t\tthis.oscillator.frequency.value = 0;\n\t\tthis.oscillator.start();\n\t\tthis.gainNode.gain.value = 0;\n\n    \tthis.callParent(arguments);\n    }\n});","// assuming Bubblelines library is loaded by containing page (via voyant.jsp)\r\nExt.define('Voyant.panel.Bubblelines', {\r\n\textend: 'Ext.panel.Panel',\r\n\tmixins: ['Voyant.panel.Panel'],\r\n\talias: 'widget.bubblelines',\r\n    statics: {\r\n    \ti18n: {\r\n    \t},\r\n    \tapi: {\r\n    \t\t/**\r\n    \t\t * @property bins How many \"bins\" to separate a document into.\r\n    \t\t * @type Integer\r\n    \t\t * @private\r\n    \t\t */\r\n    \t\tbins: 50,\r\n        \t/**\r\n        \t * @property query A string to search for in a document.\r\n        \t * @type String\r\n    \t\t * @private\r\n        \t */\r\n    \t\tquery: null,\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * @property stopList The stop list to use to filter results.\r\n    \t\t * Choose from a pre-defined list, or enter a comma separated list of words, or enter an URL to a list of stop words in plain text (one per line).\r\n    \t\t * @type String\r\n    \t\t * @private\r\n    \t\t */\r\n    \t\tstopList: 'auto',\r\n    \t\t/**\r\n    \t\t * @property docId The document ID to restrict results to.\r\n    \t\t * @type String\r\n    \t\t * @private\r\n    \t\t */\r\n    \t\tdocId: undefined,\r\n    \t\t/**\r\n    \t\t * @property docIndex The document index to restrict results to.\r\n    \t\t * @type Integer\r\n    \t\t * @private\r\n    \t\t */\r\n    \t\tdocIndex: undefined,\r\n    \t\t/**\r\n    \t\t * @property maxDocs The maximum number of documents to show.\r\n    \t\t * @type Integer\r\n    \t\t * @private\r\n    \t\t */\r\n    \t\tmaxDocs: 50\r\n    \t},\r\n    \tglyph: 'xf06e@FontAwesome'\r\n\t},\r\n\tconfig: {\r\n\t\tbubblelines: undefined,\r\n\t\ttermStore: undefined,\r\n\t\tdocTermStore: undefined,\r\n\t\tselectedDocs: undefined,\r\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'},{xtype: 'colorpaletteoption'}]\r\n\t},\r\n\t\r\n\ttermTpl: new Ext.XTemplate(\r\n\t\t'<tpl for=\".\">',\r\n\t\t\t'<div class=\"term\" style=\"color: rgb({color});float: left;padding: 3px;margin: 2px;\">{term}</div>',\r\n\t\t'</tpl>'\r\n\t),\r\n    \r\n    constructor: function() {\r\n        this.callParent(arguments);\r\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\r\n    \t\r\n    \tthis.on('loadedCorpus', function(src, corpus) {\r\n    \t\tthis.setDocTermStore(corpus.getDocumentTerms({\r\n    \t\t\tproxy: {\r\n\t    \t\t\textraParams: {\r\n\t\t\t\t\t\twithDistributions: 'raw',\r\n\t\t\t\t\t\twithPositions: true\r\n\t\t\t\t\t}\r\n    \t\t\t},\r\n\t\t\t\tlisteners: {\r\n\t   \t\t    \t load: function(store, records, successful, options) {\r\n\t   \t\t    \t\trecords.forEach(function(record) {\r\n\t   \t\t    \t\t\tvar termData = this.processTerms(record);\r\n\t   \t\t    \t\t\tvar docId = record.get('docId');\r\n\t   \t\t    \t\t\tvar term = record.get('term');\r\n\t   \t\t    \t\t\tvar termObj = {};\r\n\t   \t\t    \t\t\ttermObj[term] = termData;\r\n\t   \t\t    \t\t\tthis.getBubblelines().addTermsToDoc(termObj, docId);\r\n\t   \t\t    \t\t}, this);\r\n\t   \t\t    \t\tthis.getBubblelines().doBubblelinesLayout();\r\n\t   \t\t\t\t},\r\n\t   \t\t\t\tscope: this\r\n\t   \t\t     }\r\n    \t\t}));\r\n    \t\t\r\n    \t\tif (this.isVisible() && this.getBubblelines()) {\r\n    \t\t\tthis.initLoad();\r\n    \t\t}\r\n    \t}, this);\r\n    \t\r\n        this.on('activate', function() { // load after tab activate (if we're in a tab panel)\r\n        \tif (this.getCorpus()) {\r\n\t\t\t\tExt.Function.defer(this.initLoad, 100, this);\r\n\t\t\t}\r\n    \t}, this);\r\n        \r\n        this.on('query', function(src, query) {\r\n    \t\tif (query !== undefined && query != '') {\r\n    \t\t\tthis.getDocTermsFromQuery(query);\r\n    \t\t}\r\n    \t}, this);\r\n        \r\n        this.on('documentsSelected', function(src, docIds) {\r\n        \tthis.setApiParam('docId', docIds);\r\n        \tthis.getBubblelines().cache.each(function(d) {\r\n        \t\td.hidden = docIds.indexOf(d.id) === -1;\r\n        \t});\r\n        \tthis.getBubblelines().drawGraph();\r\n        }, this);\r\n    \t\r\n    \tthis.on('termsClicked', function(src, terms) {\r\n    \t\tif (src !== this) {\r\n\t    \t\tvar queryTerms = [];\r\n\t    \t\tterms.forEach(function(term) {\r\n        \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\r\n        \t\t\telse if (term.term) {queryTerms.push(term.term);}\r\n        \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\r\n        \t\t});\r\n\t    \t\tthis.getDocTermsFromQuery(queryTerms);\r\n    \t\t}\r\n\t\t}, this);\r\n    \t\r\n    \tthis.on('documentTermsClicked', function(src, terms) {\r\n    \t\tvar queryTerms = [];\r\n    \t\tterms.forEach(function(term) {\r\n    \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\r\n    \t\t});\r\n    \t\tthis.getDocTermsFromQuery(queryTerms);\r\n    \t}, this);\r\n    \t\r\n    \tthis.down('#granularity').setValue(parseInt(this.getApiParam('bins')));\r\n    },\r\n    \r\n    initComponent: function() {\r\n    \tthis.setTermStore(Ext.create('Ext.data.ArrayStore', {\r\n            fields: ['term', 'color'],\r\n            listeners: {\r\n            \tload: function(store, records, successful, options) {\r\n            \t\tvar termsView = this.down('#termsView');\r\n            \t\tfor (var i = 0; i < records.length; i++) {\r\n            \t\t\tvar r = records[i];\r\n            \t\t\ttermsView.select(r, true);\r\n            \t\t}\r\n            \t},\r\n            \tscope: this\r\n            }\r\n        }));\r\n    \t\r\n    \tExt.apply(this, {\r\n    \t\ttitle: this.localize('title'),\r\n    \t\tdockedItems: [{\r\n                dock: 'bottom',\r\n                xtype: 'toolbar',\r\n                overflowHandler: 'scroller',\r\n                items: [{\r\n                \txtype: 'querysearchfield'\r\n                },{\r\n\t            \ttext: this.localize('clearTerms'),\r\n\t\t\t\t\tglyph: 'xf014@FontAwesome',\r\n\t            \thandler: function() {\r\n\t            \t\tthis.down('#termsView').getSelectionModel().deselectAll(true);\r\n\t            \t\tthis.getTermStore().removeAll();\r\n\t            \t\tthis.setApiParams({query: null});\r\n\t            \t\tthis.getBubblelines().removeAllTerms();\r\n\t            \t\tthis.getBubblelines().drawGraph();\r\n\t            \t},\r\n\t            \tscope: this                \t\t\t\r\n        \t\t},{\r\n\t            \txtype: 'documentselectorbutton'\r\n        \t\t},{\r\n\t            \txtype: 'slider',\r\n\t            \titemId: 'granularity',\r\n\t            \tfieldLabel: this.localize('granularity'),\r\n\t            \tlabelAlign: 'right',\r\n\t            \tlabelWidth: 70,\r\n\t            \twidth: 150,\r\n\t            \tincrement: 10,\r\n\t            \tminValue: 10,\r\n\t            \tmaxValue: 300,\r\n\t            \tlisteners: {\r\n\t            \t\tchangecomplete: function(slider, newvalue) {\r\n\t            \t\t\tthis.setApiParams({bins: newvalue});\r\n\t            \t\t\tthis.getBubblelines().bubbleSpacing = newvalue;\r\n\t            \t\t\tthis.reloadTermsData();\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n\t            },{\r\n\t            \txtype: 'checkbox',\r\n\t            \tboxLabel: this.localize('separateLines'),\r\n\t            \tboxLabelAlign: 'before',\r\n\t            \tchecked: false,\r\n\t            \thandler: function(checkbox, checked) {\r\n\t            \t\tthis.getBubblelines().SEPARATE_LINES_FOR_TERMS = checked;\r\n\t            \t\tthis.getBubblelines().lastClickedBubbles = {};\r\n\t            \t\tthis.getBubblelines().setCanvasHeight();\r\n\t    \t\t\t\tthis.getBubblelines().drawGraph();\r\n\t            \t},\r\n\t            \tscope: this\r\n\t            \t\r\n\t            }]\r\n    \t\t}],\r\n            border: false,\r\n            layout: 'fit',\r\n            items: {\r\n            \tlayout: {\r\n            \t\ttype: 'vbox',\r\n            \t\talign: 'stretch'\r\n            \t},\r\n            \tdefaults: {border: false},\r\n\t            items: [{\r\n\t            \theight: 30,\r\n\t            \titemId: 'termsView',\r\n\t            \txtype: 'dataview',\r\n\t            \tstore: this.getTermStore(),\r\n\t            \ttpl: this.termTpl,\r\n\t            \titemSelector: 'div.term',\r\n\t            \toverItemCls: 'over',\r\n\t            \tselectedItemCls: 'selected',\r\n\t            \tselectionModel: {\r\n\t            \t\tmode: 'SIMPLE'\r\n\t            \t},\r\n//\t            \tcls: 'selected', // default selected\r\n\t            \tfocusCls: '',\r\n\t            \tlisteners: {\r\n\t            \t\tbeforeitemclick: function(dv, record, item, index, event, opts) {\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\tdv.fireEvent('itemcontextmenu', dv, record, item, index, event, opts);\r\n\t            \t\t\treturn false;\r\n\t            \t\t},\r\n\t            \t\tbeforecontainerclick: function() {\r\n\t            \t\t\t// cancel deselect all\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\treturn false;\r\n\t            \t\t},\r\n\t            \t\tselectionchange: function(selModel, selections) {\r\n\t            \t\t\tvar dv = this.down('#termsView');\r\n\t            \t\t\tvar terms = [];\r\n\t            \t\t\t\r\n\t            \t\t\tdv.getStore().each(function(r) {\r\n\t            \t\t\t\tif (selections.indexOf(r) !== -1) {\r\n\t            \t\t\t\t\tterms.push(r.get('term'));\r\n\t            \t\t\t\t\tExt.fly(dv.getNodeByRecord(r)).removeCls('unselected').addCls('selected');\r\n\t            \t\t\t\t} else {\r\n\t            \t\t\t\t\tExt.fly(dv.getNodeByRecord(r)).removeCls('selected').addCls('unselected');\r\n\t            \t\t\t\t}\r\n\t            \t\t\t});\r\n\t            \t\t\t\r\n\t            \t\t\tfor (var index in this.getBubblelines().lastClickedBubbles) {\r\n\t            \t\t\t\tvar lcTerms = this.getBubblelines().lastClickedBubbles[index];\r\n\t            \t\t\t\tfor (var term in lcTerms) {\r\n\t            \t\t\t\t\tif (terms.indexOf(term) == -1) {\r\n\t            \t\t\t\t\t\tdelete this.getBubblelines().lastClickedBubbles[index][term];\r\n\t            \t\t\t\t\t}\r\n\t            \t\t\t\t}\r\n\t            \t\t\t\t\r\n\t            \t\t\t}\r\n\t            \t\t\tthis.getBubblelines().termsFilter = terms;\r\n\t            \t\t\tthis.getBubblelines().setCanvasHeight();\r\n\t            \t\t\tthis.getBubblelines().drawGraph();\r\n\t            \t\t},\r\n\t            \t\titemcontextmenu: function(dv, record, el, index, event) {\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\tvar isSelected = dv.isSelected(el);\r\n\t            \t\t\tvar menu = new Ext.menu.Menu({\r\n\t            \t\t\t\tfloating: true,\r\n\t            \t\t\t\titems: [{\r\n\t            \t\t\t\t\ttext: isSelected ? this.localize('hideTerm') : this.localize('showTerm'),\r\n\t            \t\t\t\t\thandler: function() {\r\n\t            \t\t\t\t\t\tif (isSelected) {\r\n\t            \t\t\t\t\t\t\tdv.deselect(index);\r\n\t            \t\t\t\t\t\t} else {\r\n\t            \t\t\t\t\t\t\tdv.select(index, true);\r\n\t            \t\t\t\t\t\t}\r\n\t            \t\t\t\t\t},\r\n\t            \t\t\t\t\tscope: this\r\n\t            \t\t\t\t},{\r\n\t            \t\t\t\t\ttext: this.localize('removeTerm'),\r\n\t            \t\t\t\t\thandler: function() {\r\n\t            \t\t\t\t\t\tdv.deselect(index);\r\n\t            \t\t\t\t\t\tvar term = this.getTermStore().getAt(index).get('term');\r\n\t            \t\t\t\t\t\tthis.getTermStore().removeAt(index);\r\n\t            \t\t\t\t\t\tdv.refresh();\r\n\t            \t\t\t\t\t\t\r\n\t            \t\t\t\t\t\tthis.getBubblelines().removeTerm(term);\r\n\t            \t\t\t\t\t\tthis.getBubblelines().setCanvasHeight();\r\n\t            \t\t\t\t\t\tthis.getBubblelines().drawGraph();\r\n\t            \t\t\t\t\t},\r\n\t            \t\t\t\t\tscope: this\r\n\t            \t\t\t\t}]\r\n\t            \t\t\t});\r\n\t            \t\t\tmenu.showAt(event.getXY());\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n\t            },{\r\n\t            \tflex: 1,\r\n\t            \txtype: 'container',\r\n\t            \tautoEl: 'div',\r\n\t            \titemId: 'canvasParent',\r\n\t            \tlayout: 'fit',\r\n\t            \toverflowY: 'auto',\r\n\t            \toverflowX: 'hidden'\r\n\t            }],\r\n\t            listeners: {\r\n\t            \trender: function(component) {\r\n\t            \t\tvar canvasParent = this.down('#canvasParent');\r\n\t                \tthis.setBubblelines(new Bubblelines({\r\n\t                \t\tcontainer: canvasParent,\r\n\t                \t\tclickHandler: this.bubbleClickHandler.bind(this)\r\n\t                \t}));\r\n\t                \tthis.getBubblelines().bubbleSpacing = parseInt(this.getApiParam('bins'));\r\n\t            \t},\r\n            \t\tafterlayout: function(container) {\r\n            \t\t\tif (this.getBubblelines().initialized === false) {\r\n            \t\t\t\tthis.getBubblelines().initializeCanvas();\r\n            \t\t\t}\r\n            \t\t},\r\n\t        \t\tresize: function(cnt, width, height) {\r\n\t        \t\t\tthis.getBubblelines().doBubblelinesLayout();\r\n\t        \t\t},\r\n            \t\tscope: this\r\n            \t}\r\n            }\r\n\t\t});\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    initLoad: function() {\r\n    \t// get doc info\r\n    \tvar docIds = [];\r\n\t\tthis.getCorpus().getDocuments().each(function(doc, index, total) {\r\n\t\t\tvar inLimit = index < this.getApiParam('maxDocs');\r\n\t\t\tthis.getBubblelines().addDocToCache({\r\n\t\t\t\tid: doc.getId(),\r\n\t\t\t\tindex: doc.getIndex(),\r\n\t\t\t\ttitle: doc.getShortTitle(),\r\n\t\t\t\ttotalTokens: doc.get('tokensCount-lexical'),\r\n\t\t\t\tterms: {},\r\n\t\t\t\thidden: !inLimit\r\n\t\t\t});\r\n\t\t\tif (inLimit) {\r\n\t\t\t\tdocIds.push(doc.getId());\r\n\t\t\t}\r\n\t\t}, this);\r\n\t\tthis.setApiParam('docId', docIds);\r\n\t\t\r\n\t\t// get top terms in corpus\r\n\t\tthis.getCorpus().getCorpusTerms({autoload: false}).load({\r\n\t\t\tcallback: function(records, operation, success) {\r\n\t\t    \tvar query = [];\r\n\t\t    \trecords.forEach(function(record, index) {\r\n\t\t\t\t\tquery.push(record.get('term'));\r\n\t\t\t\t}, this);\r\n\t\t    \tthis.getDocTermsFromQuery(query);\r\n\t\t    },\r\n\t\t    scope: this,\r\n\t\t    params: {\r\n\t\t    \tlimit: this.getApiParam('query') ? undefined : 5,\r\n\t\t    \tstopList: this.getApiParams('stopList'),\r\n\t\t    \tquery: this.getApiParam('query')\r\n\t\t    }\r\n\t\t});\r\n    },\r\n    \r\n    /**\r\n     * Get the results for the query(s) for each of the corpus documents.\r\n     * @param query {String|Array}\r\n     */\r\n    getDocTermsFromQuery: function(query) {\r\n    \tif (query) {this.setApiParam('query', query);} // make sure it's set for subsequent calls\r\n    \tif (this.getCorpus() && this.isVisible()) {\r\n\t\t\tthis.getDocTermStore().load({params: this.getApiParams()});\r\n    \t}\r\n\t},\r\n    \r\n\treloadTermsData: function() {\r\n\t\tvar terms = [];\r\n\t\tfor (var term in this.getBubblelines().currentTerms) {\r\n\t\t\tterms.push(term);\r\n\t\t}\r\n\t\tthis.getDocTermsFromQuery(terms);\r\n\t},\r\n\t\r\n    filterDocuments: function() {\r\n\t\tvar docIds = this.getApiParam('docId');\r\n\t\tif (docIds == '') {\r\n\t\t\tdocIds = [];\r\n\t\t\tthis.getCorpus().getDocuments().each(function(item, index) {\r\n\t\t\t\tdocIds.push(item.getId());\r\n\t\t\t});\r\n\t\t\tthis.setApiParams({docId: docIds});\r\n\t\t}\r\n\t\tif (typeof docIds == 'string') docIds = [docIds];\r\n\t\t\r\n\t\tif (docIds == null) {\r\n\t\t\tthis.setSelectedDocs(this.getCorpus().getDocuments().clone());\r\n\t\t\tvar count = this.getSelectedDocs().getCount();\r\n\t\t\tif (count > 10) {\r\n\t\t\t\tfor (var i = 10; i < count; i++) {\r\n\t\t\t\t\tthis.getSelectedDocs().removeAt(10);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdocIds = [];\r\n\t\t\tthis.getSelectedDocs().eachKey(function(docId, doc) {\r\n\t\t\t\tdocIds.push(docId);\r\n\t\t\t}, this);\r\n\t\t\tthis.setApiParams({docId: docIds});\r\n\t\t} else {\r\n\t\t\tthis.setSelectedDocs(this.getCorpus().getDocuments().filterBy(function(doc, docId) {\r\n\t\t\t\treturn docIds.indexOf(docId) != -1;\r\n\t\t\t}, this));\r\n\t\t}\r\n\t},\r\n\t\r\n\tprocessTerms: function(termRecord) {\r\n\t\tvar termObj;\r\n\t\tvar term = termRecord.get('term');\r\n\t\tvar rawFreq = termRecord.get('rawFreq');\r\n\t\tvar positions = termRecord.get('positions');\r\n\t\tif (rawFreq > 0) {\r\n\t\t\tvar color = this.getApplication().getColorForTerm(term);\r\n\t\t\tif (this.getTermStore().find('term', term) === -1) {\r\n\t\t\t\tthis.getTermStore().loadData([[term, color]], true);\r\n\t\t\t\tvar index = this.getTermStore().find('term', term);\r\n\t\t\t\tthis.down('#termsView').select(index, true); // manually select since the store's load listener isn't triggered\r\n\t\t\t}\r\n\t\t\tvar distributions = termRecord.get('distributions');\r\n\t\t\ttermObj = {positions: positions, distributions: distributions, rawFreq: rawFreq, color: color};\r\n\t\t} else {\r\n\t\t\ttermObj = false;\r\n\t\t}\r\n\t\t\r\n\t\treturn termObj;\r\n\t},\r\n\t\r\n\tbubbleClickHandler: function(data) {\r\n\t\tthis.getApplication().dispatchEvent('termsClicked', this, data);\r\n\t}\r\n});","Ext.define('Voyant.panel.Catalogue', {\n\textend: 'Ext.panel.Panel',\n\trequires: ['Voyant.widget.Facet'],\n\tmixins: ['Voyant.panel.Panel','Voyant.util.Downloadable'],\n\t\n\talias: 'widget.catalogue',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tconfig: undefined,\n    \t\tstopList: 'auto',\n    \t\tfacet: ['facet.title','facet.author','facet.language'],\n    \t\ttitle: undefined,\n    \t\tsplash: undefined,\n    \t\treader: \"reader\"\n    \t},\n\t\tglyph: 'xf1ea@FontAwesome'\n    },\n    config: {\n    \tfacets: {},\n    \tmatchingDocIds: [],\n    \tcustomResultsHtml: undefined\n    },\n    \n    constructor: function(config) {\n    \tconfig = config || {};\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tlayout: 'hbox',\n    \t\titems: [\n    \t\t        {\n    \t\t        \tlayout: 'vbox',\n    \t\t        \theight: '100%',\n    \t\t        \talign: 'stretch',\n    \t\t        \titemId: 'facets',\n    \t\t        \tdefaults: {\n    \t\t        \t\twidth: 250,\n    \t\t        \t\tflex: 1,\n    \t\t        \t\txtype: 'facet',\n    \t\t        \t\tmargin: 5,\n    \t\t        \t\tborder: true,\n    \t\t        \t\tframe: true,\n    \t\t            \tincludeTools: {\n    \t\t            \t\tclose: {\n    \t\t            \t\t\ttype: 'close',\n    \t\t                \t\ttooltip: this.localize('closeFacetTip'),\n    \t\t                \t\tcallback: function(facetCmp) {\n    \t\t                \t\t\tdelete this.facets[facetCmp.facet]; // remove from facets map\n    \t\t                \t\t\tfacetCmp.destroy(); // remove this facet\n    \t\t                \t\t\tthis.updateResults();\n    \t\t                \t\t},\n    \t\t                \t\tscope: this\n    \t\t            \t\t},\n    \t\t            \t\tadd: {\n    \t\t            \t\t\ttype: 'plus',\n    \t\t                \t\ttooltip: this.localize('plusFacetTip'),\n    \t\t                \t\tcallback: function() {\n    \t\t                \t\t\tthis.addFacet();\n    \t\t                \t\t},\n    \t\t                \t\tscope: this\n    \t\t            \t\t}\n    \t\t            \t}\n    \t\t        \t},\n    \t\t        \titems: []\n    \t\t        },\n    \t\t        {\n    \t\t        \txtype: 'panel',\n    \t\t        \thtml: config.customResultsHtml || '',\n    \t\t        \tflex: 1,\n    \t\t        \titemId: 'results',\n    \t\t        \theight: '100%',\n    \t\t        \talign: 'stretch',\n    \t\t        \tscrollable: true,\n    \t\t        \tmargin: 5,\n    \t\t        \tgetCorpus: function() { // for query search field\n    \t\t        \t\treturn this.findParentByType('panel').getCorpus();\n    \t\t        \t},\n    \t\t        \tlisteners: {\n    \t\t        \t\tquery: function(src, query) {\n    \t\t        \t\t\tthis.findParentByType('panel').updateResults(Ext.isString(query) ? [query] : query)\n    \t\t        \t\t}\n    \t\t        \t},\n    \t\t    \t\tdockedItems: [{\n    \t\t                dock: 'bottom',\n    \t\t                xtype: 'toolbar',\n    \t\t                overflowHandler: 'scroller',\n    \t\t                items: [{\n\t    \t\t        \t\titemId: 'sendToVoyant',\n\t    \t\t        \t\ttext: this.localize('sendToVoyantButton'),\n\t    \t\t        \t\tdisabled: true,\n\t    \t\t        \t\thandler: function() {\n\t    \t\t        \t\t\tthis.mask(this.localize(\"exportInProgress\"));\n\t    \t\t        \t\t\tvar catalogue = this;\n\t    \t\t            \t\tExt.Ajax.request({\n\t    \t\t            \t\t\turl: this.getApplication().getTromboneUrl(),\n\t    \t\t            \t\t\tparams: {\n\t    \t\t            \t\t\t\tcorpus: this.getCorpus().getId(),\n\t    \t\t            \t\t\t\ttool: 'corpus.CorpusManager',\n\t    \t\t            \t\t\t\tkeepDocuments: true,\n\t    \t\t            \t\t\t\tdocId: this.getMatchingDocIds()\n\t    \t\t            \t\t\t},\n\t    \t\t            \t\t    success: function(response, opts) {\n\t    \t\t            \t\t    \tcatalogue.unmask();\n\t    \t\t            \t\t    \tvar json = Ext.JSON.decode(response.responseText);\n\t\t                    \t\t\t\tvar url = catalogue.getBaseUrl()+\"?corpus=\"+json.corpus.id;\n\t\t                    \t\t\t\tcatalogue.openUrl(url);\n\t    \t\t            \t\t    },\n\t    \t\t            \t\t    failure: function(response, opts) {\n\t    \t\t            \t\t    \tcatalogue.unmask();\n\t    \t\t            \t\t    \tme.showResponseError(\"Unable to export corpus: \"+catalogue.getCorpus().getId(), response);\n\t    \t\t            \t\t    }\n\t    \t\t            \t\t})\n\t\n\t    \t\t        \t\t},\n\t    \t\t        \t\tscope: this\n\t    \t\t        \t},{\n\t    \t\t        \t\titemId: 'export',\n\t    \t\t        \t\ttext: this.localize('downloadButton'),\n\t    \t\t        \t\tdisabled: true,\n\t    \t\t        \t\thandler: function() {\n\t    \t\t        \t\t\tthis.mask(this.localize(\"exportInProgress\"));\n\t    \t\t        \t\t\tvar catalogue = this;\n\t    \t\t            \t\tExt.Ajax.request({\n\t    \t\t            \t\t\turl: this.getApplication().getTromboneUrl(),\n\t    \t\t            \t\t\tparams: {\n\t    \t\t            \t\t\t\tcorpus: this.getCorpus().getId(),\n\t    \t\t            \t\t\t\ttool: 'corpus.CorpusManager',\n\t    \t\t            \t\t\t\tkeepDocuments: true,\n\t    \t\t            \t\t\t\tdocId: this.getMatchingDocIds()\n\t    \t\t            \t\t\t},\n\t    \t\t            \t\t    success: function(response, opts) {\n\t    \t\t            \t\t    \tcatalogue.unmask();\n\t    \t\t            \t\t    \tvar json = Ext.JSON.decode(response.responseText);\n\t    \t\t            \t\t    \tcatalogue.downloadFromCorpusId(json.corpus.id);\n\t    \t\t            \t\t    },\n\t    \t\t            \t\t    failure: function(response, opts) {\n\t    \t\t            \t\t    \tcatalogue.unmask();\n\t    \t\t            \t\t    \tme.showResponseError(\"Unable to export corpus: \"+catalogue.getCorpus().getId(), response);\n\t    \t\t            \t\t    }\n\t    \t\t            \t\t})\n\t\n\t    \t\t        \t\t},\n\t    \t\t        \t\tscope: this\n\t    \t\t        \t},{\n\t    \t\t        \t\txtype: 'querysearchfield',\n\t    \t\t        \t\twidth: 200,\n\t    \t\t        \t\tflex: 1\n\t    \t\t        \t},{\n\t    \t\t        \t\titemId: 'status',\n\t    \t\t        \t\txtype: 'tbtext'\n\t    \t\t        \t}]\n    \t\t    \t\t}]\n    \t\t        }, {\n    \t\t        \txtype: this.getApiParam(\"reader\"),\n    \t\t        \tflex: 1,\n    \t\t        \theight: '100%',\n    \t\t        \talign: 'stretch',\n    \t\t        \theader: false\n    \t\t        }]\n    \t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tthis.queryById('status').update(new Ext.XTemplate(this.localize('noMatches')).apply([corpus.getDocumentsCount()]))\n    \t\tif (!this.getCustomResultsHtml()) {\n    \t\t\tif (this.getApiParam(\"splash\")) {\n        \t\t\tthis.setCustomResultsHtml(this.getApiParam(\"splash\"));\n        \t\t\tthis.updateResults();\n        \t\t\treturn;\n    \t\t\t}\n    \t\t\tthis.setCustomResultsHtml(new Ext.XTemplate(this.localize('noMatches')).apply([corpus.getDocumentsCount()]));\n    \t\t\tthis.updateResults();\n    \t    \tExt.Ajax.request({\n    \t    \t    url: this.getTromboneUrl(),\n    \t    \t    params: {\n    \t        \t\ttool: 'resource.StoredResource',\n    \t        \t\tverifyResourceId: 'customhtml-'+corpus.getAliasOrId()\n    \t    \t    },\n    \t    \t    success: function(response, req) {\n    \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \t    \tif (json && json.storedResource && json.storedResource.id) {\n    \t        \t    \tExt.Ajax.request({\n    \t        \t    \t    url: this.getTromboneUrl(),\n    \t        \t    \t    params: {\n    \t        \t        \t\ttool: 'resource.StoredResource',\n    \t        \t        \t\tretrieveResourceId: 'customhtml-'+corpus.getAliasOrId()\n    \t        \t    \t    },\n    \t        \t    \t    success: function(response, req) {\n    \t        \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t        \t    \t    \tif (json && json.storedResource && json.storedResource.resource) {\n    \t        \t    \t    \t\tthis.setCustomResultsHtml(json.storedResource.resource);\n    \t        \t    \t    \t\tthis.updateResults()\n    \t        \t    \t    \t}\n    \t        \t    \t    },\n    \t        \t    \t    scope: this\n    \t        \t    \t})\n    \t    \t    \t}\n    \t    \t    },\n    \t    \t    scope: this\n    \t    \t})\n\n    \t\t}\n    \t});\n    \t\n    \tthis.on('afterrender', function(panel) {\n    \t\t\n    \t\tvar facetsCmp = this.queryById('facets');\n\t\t\tthis.addFacet({\n\t\t\t\tfacet: 'lexical',\n    \t\t\tincludeTools: {add: {\n        \t\t\ttype: 'plus',\n            \t\ttooltip: this.localize('plusFacetTip'),\n            \t\tcallback: function() {\n            \t\t\tthis.addFacet();\n            \t\t},\n            \t\tscope: this\n        \t\t}},\n\t\t\t\tstore: new Voyant.data.store.CorpusTerms({\n\t\t\t\t\tparentPanel: this,\n    \t\t\t\tproxy: {\n    \t\t\t\t\textraParams: {\n    \t    \t\t\t\tstopList: this.getApiParam(\"stopList\")\n    \t\t\t\t\t}\n    \t\t\t\t}\n\t\t\t\t})\n\t\t\t}, facetsCmp)\n    \t\t\n    \t\tvar facets = this.getApiParam('facet');\n    \t\tif (Ext.isString(facets)) {facets = facets.split(\",\")}\n    \t\tfacets.forEach(function(facet) {\n    \t\t\tthis.addFacet({facet: facet}, facetsCmp)\n    \t\t\t/*\n    \t\t\tfacetCmp.getSelectionModel().on('selectionchange', function(model, selected) {\n    \t\t\t\tvar labels = [];\n    \t\t\t\tselected.forEach(function(model) {\n    \t\t\t\t\tlabels.push({facet: model.getFacet(), label: model.getLabel()})\n    \t\t\t\t})\n    \t\t\t\tpanel.getFacets()[facet] = labels;\n    \t\t\t\tpanel.updateResults();\n    \t\t\t})\n    \t\t\tfacetCmp.on('query', function(model, selected) {\n    \t\t\t\tpanel.getFacets()[facetCmp.facet] = [];\n    \t\t\t\tpanel.updateResults();\n    \t\t\t})*/\n    \t\t}, this);\n\t\t\t\n\n\t\t\t\n    \t\t/*\n\t\t\tfacetCmp.getSelectionModel().on('selectionchange', function(model, selected) {\n\t\t\t\tvar labels = [];\n\t\t\t\tselected.forEach(function(model) {\n\t\t\t\t\tlabels.push({facet: 'lexical', label: model.getTerm()})\n\t\t\t\t})\n\t\t\t\tpanel.getFacets()['lexical'] = labels;\n\t\t\t\tpanel.updateResults();\n\t\t\t})*/\n    \t\t\n        \tvar title = this.getApiParam(\"title\");\n        \tif (title) {this.setTitle(title)}\n    \t});\n    \t\n    \t\n    },\n    \n    addFacet: function(config, facetsCmp) {\n    \tif (!config) {\n    \t\t// select first, then add\n    \t\treturn this.selectFacet(function(facet) {\n    \t\t\tthis.addFacet({facet: facet})\n    \t\t})\n    \t}\n\t\tfacetsCmp = facetsCmp || this.queryById('facets');\n    \tvar facet = config.facet,\n    \t\titemTpl = '<span style=\"font-size: smaller;\">(<span class=\"info-tip\" data-qtip=\"'+this.localize('matchingDocuments')+'\">{inDocumentsCount}</span>)</span> {term}'+'<span style=\"font-size: smaller;\"> (<span class=\"info-tip\" data-qtip=\"'+this.localize('rawFreqs')+'\">{rawFreq}</span>)</span>'\n\n\t\tvar title = this.localize(facet+\"Title\");\n\t\tif (title==\"[\"+facet+\"Title]\") {\n\t\t\ttitle = facet.replace(/^facet\\./,\"\").replace(/^extra./,\"\");\n\t\t}\n\t\tvar matchingDocumentsLabel = this.localize('matchingDocuments');\n\t\t\n\t\tExt.applyIf(config, {\n\t\t\ttitle: title,\n\t\t\tcollapsible: true,\n\t\t\tfacet: facet,\n\t\t\tcolumns: [{\n\t\t\t\trenderer: function(value, metaData, record) {\n\t\t\t\t\treturn '<span style=\"font-size: smaller;\">(<span class=\"info-tip\" data-qtip=\"'+this.localize('matchingDocuments')+'\">'+record.getInDocumentsCount()+\"</span>) </span>\"+\n\t\t\t\t\t\t(record.getLabel ? record.getLabel() : record.getTerm()+'<span style=\"font-size: smaller;\"> (<span class=\"info-tip\" data-qtip=\"'+this.localize('rawFreqs')+'\">'+record.getRawFreq()+\"</span>)</span>\")\n\t\t\t\t},\n\t\t\t\tflex: 1\n\t\t\t}],\n\t\t\tbbar: [{\n\t\t\t\txtype: 'querysearchfield',\n\t\t\t\twidth: '100%',\n\t\t\t\ttokenType: facet.replace(\"facet.\", \"\"),\n\t\t\t\titemTpl: itemTpl\n\t\t\t}],\n\t\t\tcorpus: this.getCorpus()\n\t\t})\n\t\t\n\t\tvar facetCmp = facetsCmp.add(config);\n\t\t\n\t\tfacetCmp.getSelectionModel().on('selectionchange', function(model, selected) {\n\t\t\tvar labels = [];\n\t\t\tselected.forEach(function(model) {\n\t\t\t\tlabels.push({facet: facetCmp.facet, label: model.getLabel ? model.getLabel() : model.getTerm()})\n\t\t\t})\n\t\t\tthis.getFacets()[facet] = labels;\n\t\t\tthis.updateResults();\n\t\t}, this)\n\t\tfacetCmp.on('query', function(model, selected) {\n\t\t\tthis.getFacets()[facetCmp.facet] = [];\n\t\t\tthis.updateResults();\n\t\t}, this)\n    \treturn facetCmp;\n    },\n    \n    updateResults: function(queries) {\n    \tvar facets = this.getFacets();\n    \tif (!queries) {\n\t    \tvar queries = [];\n\t    \tfor (facet in facets) {\n\t    \t\tfacets[facet].forEach(function(label) {\n\t        \t\tqueries.push(label.facet+\":\"+label.label);\n\t    \t\t})\n\t    \t}\n\t    \tif (queries) {\n\t\t    \treturn this.updateResults(queries)\n\t    \t}\n    \t}\n\t\tvar results = this.queryById(\"results\").getTargetEl();\n\t\tvar catalogue = this;\n\t\tresults.update(this.getCustomResultsHtml() ? this.getCustomResultsHtml() : new Ext.XTemplate(this.localize('noMatches')).apply([this.getCorpus().getDocumentsCount()]));\n\t\tthis.queryById('status').update(new Ext.XTemplate(this.localize('noMatches')).apply([this.getCorpus().getDocumentsCount()]))\n\t\tthis.queryById('sendToVoyant').setDisabled(true);\n\t\tthis.queryById('export').setDisabled(true);\n    \tif (queries && queries.length>0) {\n    \t\tthis.mask(this.localize(\"loading\"));\n    \t\tvar documentQueryMatches = this.getCorpus().getDocumentQueryMatches();\n    \t\tdocumentQueryMatches.load({\n    \t\t\tparams: {query: queries, includeDocIds: true},\n    \t\t\tcallback: function(records, operation, success) {\n    \t\t\t\tthis.unmask();\n    \t\t\t\tif (records && records.length>0) {\n    \t\t\t\t\tthis.queryById('status').setHtml(records.length)\n    \t\t\t\t\tvar list = \"<ul>\";\n    \t\t\t\t\tvar matchingDocIds = [];\n    \t\t\t\t\trecords.forEach(function(record) {\n    \t\t\t\t\t\trecord.getDocIds().forEach(function(docId) {\n    \t\t\t\t\t\t\tmatchingDocIds.push(docId);\n    \t\t\t\t\t\t\tvar doc = documentQueryMatches.getCorpus().getDocument(docId);\n    \t\t\t\t\t\t\tvar item = \"<li id='\"+results.getId()+'_'+docId+\"' class='cataloguedoc'>\";\n    \t\t\t\t\t\t\titem += \"<a href='#' class='cataloguedoctitle' data='\"+docId+\"'>\"+doc.getTitle()+\"</a>\";\n    \t\t\t\t\t\t\tfor (facet in facets) {\n    \t\t\t\t\t\t\t\tif (facets[facet].length==0) {continue;}\n    \t\t\t\t\t\t\t\tvar labelItems = \"\";\n    \t\t\t\t\t\t\t\tif (facet!='facet.title') {\n    \t\t\t\t\t\t\t\t\tvar suffix = facet.replace(/^.+?\\./,\"\");\n    \t\t\t\t\t\t\t\t\tvar label = doc.get(suffix);\n    \t\t\t\t\t\t\t\t\tif (label) {\n    \t\t\t\t\t\t\t\t\t\tvar isArray = Ext.isArray(label);\n    \t\t\t\t\t\t\t\t\t\tif (isArray) {\n    \t\t\t\t\t\t\t\t\t\t\tlabelItems+=\"<li>\"+suffix+\"<ul>\"\n    \t\t\t\t\t\t\t\t\t\t} else {\n    \t\t\t\t\t\t\t\t\t\t\tlabel = [label];\n    \t\t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t\t\tlabel.forEach(function(l) {\n    \t\t\t\t\t\t\t\t\t\t\tvar isMatch = false;\n    \t\t\t\t\t\t\t\t\t\t\tfacets[facet].forEach(function(f) {\n    \t\t\t\t\t\t\t\t\t\t\t\tif (f.label==l) {isMatch=true}\n    \t\t\t\t\t\t\t\t\t\t\t\telse if (f.facet.indexOf('facet')==-1) {\n    \t\t\t\t\t\t\t\t\t\t\t\t\tf.label.split(/\\W+/).forEach(function(part) {\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\tif (part.trim().length>0 && l.toLowerCase().indexOf(part.toLowerCase())>-1) {\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisMatch=true;\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t\t\t\tlabelItems+=\"<li>\"+(isArray ? '' : suffix.replace('extra.','')+\": \")+(isMatch ? '<span class=\"keyword\">'+l+'</span>' : l)+\"</li>\"\n    \t\t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t\t\tif (isArray) {\n    \t\t\t\t\t\t\t\t\t\t\tlabelItems+=\"</ul></li>\";\n    \t\t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\tif (labelItems) {\n    \t\t\t\t\t\t\t\t\titem+=\"<ul>\"+labelItems+\"</ul>\";\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\titem += \"</li>\";\n    \t\t\t\t\t\t\tlist += item;\n    \t\t\t\t\t\t})\n    \t\t\t\t\t})\n    \t\t\t\t\tlist += \"</ul>\";\n    \t\t\t\t\tresults.update(list);\n    \t\t\t\t\tvar me = this;\n    \t\t\t\t\tvar lnks = results.query(\".cataloguedoctitle\");\n    \t\t\t\t\tlnks.forEach(function(lnk) {\n    \t\t\t\t\t\tExt.get(lnk).on(\"click\", function(e,el) {\n    \t\t\t\t\t\t\tthis.dispatchEvent(\"documentSelected\", me, el.getAttribute(\"data\"));\n    \t\t\t\t\t\t}, me)\n    \t\t\t\t\t});\n    \t\t\t\t\tif (lnks.length==1) {\n    \t\t\t\t\t\tthis.dispatchEvent(\"documentSelected\", me, lnks[0].getAttribute(\"data\"));\n    \t\t\t\t\t}\n    \t\t\t\t\tthis.queryById('status').update(new Ext.XTemplate(this.localize('queryMatches')).apply([matchingDocIds.length,this.getCorpus().getDocumentsCount()]))\n    \t\t\t\t\tthis.setMatchingDocIds(Ext.Array.clone(matchingDocIds));\n    \t\t\t\t\tif (matchingDocIds.length>0) {\n    \t\t\t\t\t\tthis.queryById('export').setDisabled(false);\n    \t\t\t\t\t\tthis.queryById('sendToVoyant').setDisabled(false);\n    \t\t\t\t\t}\n    \t\t\t\t\t\n    \t\t\t\t\t// now try to load some snippets, if need be\n    \t\t\t\t\tif (facets['lexical']) {\n    \t\t\t\t\t\tvar firstDocIds = matchingDocIds.splice(0,5);\n    \t\t\t\t\t\tthis.loadSnippets(firstDocIds, results.first().first());\n    \t\t\t\t\t\tif (matchingDocIds && matchingDocIds.length>0) {\n        \t\t\t\t\t\tthis.loadSnippets(matchingDocIds); // load the rest\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t},\n    \t\t\tscope: this\n    \t\t})    \t\t\n    \t}\n    },\n    \n    loadSnippets: function(docIds, elToMask) {\n\t\tvar results = this.queryById(\"results\").getTargetEl();\n    \tvar facets = this.getFacets();\n    \tif (facets['lexical']) {\n    \t\tvar queries = facets['lexical'].map(function(label) {return label.facet+\":\"+label.label});\n    \t\tvar contexts = this.getCorpus().getContexts({buffered: false});\n    \t\tif (elToMask) {\n    \t\t\telToMask.mask(this.localize(\"loadingSnippets\"));\n    \t\t}\n    \t\tcontexts.load({\n    \t\t\tmethod: 'POST',\n    \t\t\tparams: {\n                \tstripTags: \"all\",\n    \t\t\t\tquery: queries,\n    \t\t\t\tdocId: docIds,\n    \t\t\t\tperDocLimit: 3,\n    \t\t\t\tlimit: 100,\n    \t\t\t\taccurateTotalNotNeeded: true\n    \t\t\t},\n    \t\t\tscope: this,\n    \t\t\tcallback: function(records, operation, success) {\n    \t\t\t\tif (elToMask) {\n    \t\t\t\t\telToMask.unmask();\n    \t\t\t\t}\n    \t\t\t\tif (success && Ext.isArray(records) && records.length>0) {\n    \t\t\t\t\tvar snippets = {};\n    \t\t\t\t\trecords.forEach(function(record) {\n    \t\t\t\t\t\tif (!snippets[record.getDocIndex()]) {snippets[record.getDocIndex()]=[]}\n    \t\t\t\t\t\tsnippets[record.getDocIndex()].push(record);\n    \t\t\t\t\t})\n    \t\t\t\t\tfor (docIndex in snippets) {\n    \t\t\t\t\t\tvar id = this.getCorpus().getDocument(docIndex).getId();\n    \t\t\t\t\t\tvar html = '<li style=\"list-style-type: none; font-size: smaller;\">'+snippets[docIndex].map(function(snippet) {\n    \t\t\t\t\t\t\treturn snippet.getHighlightedContext();\n    \t\t\t\t\t\t}).join(\" \u2026 \")+'</li>'\n    \t\t\t\t\t\tvar docItem = results.down(\"#\"+results.getId()+\"_\"+id);\n    \t\t\t\t\t\tif (docItem.query(\"ul\")) {\n    \t\t\t\t\t\t\thtml=\"<ul>\"+html+\"</ul>\";\n    \t\t\t\t\t\t}\n    \t\t\t\t\t\tdocItem.insertHtml('beforeEnd', html)\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t}\n        \t})        \t\t\n    \t}\n\t\n    },\n    \n    selectFacet: function(callback) {\n    \tif (!this.facetsSelectionStore) {\n    \t\tvar keys = {};\n    \t\tthis.getCorpus().getDocuments().each(function(doc) {\n    \t\t\tfor (var key in doc.getData()) {\n    \t\t\t\tif (key!=\"corpus\" && key.indexOf(\"parent\")!==0 && key.indexOf(\"-lexical\")==\"-1\") {\n        \t\t\t\tkeys[key] = true\n    \t\t\t\t}\n    \t\t\t}\n    \t\t});\n    \t\tkeys = Object.keys(keys);\n    \t\tkeys.sort();\n    \t\tthis.facetsSelectionStore = Ext.create('Ext.data.ArrayStore', {\n    \t\t    fields: ['text'],\n    \t\t    data: keys.map(function(key) {return [key]})\n    \t\t});\n    \t}\n    \t\n    \tvar existingFacets = {};\n    \tthis.queryById('facets').items.each(function(cmp) {\n    \t\texistingFacets[cmp.facet]=true;\n    \t})\n\n    \tthis.facetsSelectionStore.filterBy(function(record) {\n    \t\treturn !(\"facet.\"+record.get('text') in existingFacets)\n    \t})\n    \t\n\t\tvar win = Ext.create('Ext.window.Window', {\n\t\t\ttitle: this.localize(\"selectFacet\"),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\twidth: 300,\n\t\t\t\titems: {\n\t\t\t\t\txtype: 'combo',\n\t\t\t\t\tstore: this.facetsSelectionStore,\n\t\t\t\t\tforceSelection: true,\n\t\t\t\t\twidth: 300\n\t\t\t\t},\n\t\t\t\tbuttons: [{\n\t            \ttext: this.localize(\"cancel\"),\n\t\t            ui: 'default-toolbar',\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t},{\n\t            \ttext: this.localize(\"select\"),\n\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t            \tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar facet = btn.up('window').down('combo').getValue();\n\t        \t\t\tif (!facet) {\n\t        \t\t\t\treturn this.showError(this.localize('selectValidFacet'));\n\t        \t\t\t} else {\n\t        \t\t\t\tcallback.call(this, \"facet.\"+facet);\n\t\t        \t\t\tbtn.up('window').close();\n\t        \t\t\t}\n\t        \t\t},\n\t        \t\tscope: this\n\t            }]\n\t\t\t},\n\t\t\tbodyPadding: 5\n\t\t}).show()\n    }\n    \n});\n","// assuming Cirrus library is loaded by containing page (via voyant.jsp)\n/**\n * Cirrus tool, a wordcloud-like visuaization.\n * \n * \t// simple cirrus\n * \tloadCorpus(\"austen\").tool(\"cirrus\");\n *\n * \t// define stopwords list and styling\n * \tloadCorpus(\"austen\").tool(\"cirrus\", {\n * \t\tstopList: 'auto',\n * \t\tstyle: 'width: 500px; height: 400px'\n * \t});\n */\nExt.define('Voyant.panel.Cirrus', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.cirrus',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n    \t\t * @cfg {String} stopList A comma-separated list of words, a named list or a URL to a plain text list, one word per line.\n    \t\t * @default auto\n    \t\t * \n    \t\t * By default this is set to 'auto' which auto-detects the document's language and loads an appropriate list (if available for that language). Set this to blank to not use the default stopList.\n    \t\t *  \n    \t\t * For more information see the <a href=\"#!/guide/search\">Stopwords documentation</a>.\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\tcategories: undefined,\n    \t\twhiteList: undefined, // specify a list of words to use\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} limit Specify the number of terms to load (which is separate from the number of {@link #visible} terms to show) at a time).\n    \t\t * @default 500\n    \t\t * \n    \t\t *  By default this is set to 'auto' which auto-detects the document's language and loads an appropriate list (if available for that language). Set this to blank to not use the default stopList.\n    \t\t */\n    \t\tlimit: 500,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} visible Specify the number of terms that are visible at a time.\n    \t\t * @default 50\n    \t\t */\n    \t\tvisible: 50,\n    \t\tterms: undefined,\n    \t\tdocId: undefined,\n    \t\tdocIndex: undefined,\n    \t\t\n    \t\tinlineData: undefined, // format should match CorpusTerm model, only term and rawFreq required\n\n    \t\tfontFamily: '\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif',\n    \t\tcirrusForceFlash: false,\n    \t\tbackground: '0xffffff',\n    \t\tfade: true,\n    \t\tsmoothness: 2,\n    \t\tdiagonals: 'none' // all, bigrams, none\n    \t},\n\t\tglyph: 'xf06e@FontAwesome'\n    },\n    \n    config: {\n    \t/**\n    \t * @private\n    \t */\n    \tmode: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \toptions: [\n    \t\t{xtype: 'stoplistoption'},\n    \t\t{\n\t    \t\txtype: 'listeditor',\n\t    \t\tname: 'whiteList'\n    \t    },\n    \t    {xtype: 'categoriesoption'},\n//    \t    {\n//    \t    \t// TODO this field does nothing\n//    \t        xtype: 'numberfield',\n//    \t        name: 'label',\n//    \t        fieldLabel: 'Max words',\n//    \t        labelAlign: 'right',\n//    \t        value: 500,\n//    \t        minValue: 50,\n//    \t        step: 50,\n//    \t        listeners: {\n//        \t        afterrender: function(field) {\n//        \t        \tvar win = field.up(\"window\");\n//        \t        \tif (win && win.panel) {field.setFieldLabel(win.panel.localize(\"maxTerms\"))}\n//        \t        }\n//    \t        }\n//    \t    },\n    \t    {xtype: 'fontfamilyoption'},\n    \t    {xtype: 'colorpaletteoption'}\n\n    \t],\n    \t/**\n    \t * @private\n    \t */\n    \trecords: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \tterms: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \tcirrusId: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \tvisLayout: undefined, // cloud layout algorithm\n    \t/**\n    \t * @private\n    \t */\n    \tvis: undefined, // actual vis\n    \t/**\n    \t * @private\n    \t */\n    \ttip: undefined,\n    \t/**\n    \t * @private\n    \t */\n    \tsizeAdjustment: 100, // amount to multiply a word's relative size by\n    \t/**\n    \t * @private\n    \t */\n    \tminFontSize: 12,\n    \t/**\n    \t * @private\n    \t */\n    \tlargestWordSize: 0,\n    \t/**\n    \t * @private\n    \t */\n    \tsmallestWordSize: 1000000\n    },\n    \n    MODE_CORPUS: 'corpus',\n    MODE_DOCUMENT: 'mode_document',\n    \n    layout: 'fit',\n    \n\t/**\n\t * @private\n\t */\n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.getApplication().getCategoriesManager().addFeature('orientation', function() { return ~~(Math.random() * 2) * 90; });\n    \t\n    \tthis.setCirrusId(Ext.id(null, 'cirrus_'));\n    },\n    \n    initComponent: function (config) {\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n        \t\t\txtype: 'corpusdocumentselector',\n        \t\t\tsingleSelect: true\n        \t\t},{\n        \t\t\tfieldLabel: this.localize('visibleTerms'),\n        \t\t\tlabelWidth: 40,\n        \t\t\twidth: 120,\n        \t\t\txtype: 'slider',\n\t            \tincrement: 25,\n\t            \tminValue: 25,\n\t            \tmaxValue: 500,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.maxValue = this.getApiParam(\"limit\")\n\t            \t\t\tslider.increment = parseInt(slider.maxValue/50)\n\t            \t\t\tslider.setValue(this.getApiParam(\"visible\"))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({visible: newvalue});\n\t            \t\t\tthis.loadFromTermsRecords();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                }]\n    \t\t}]\n    \t});\n\n    \tthis.callParent(arguments);\n    \t\n    \t\n    },\n    \n    listeners: {\n    \tboxready: function() {\n\t\t\tthis.initVisLayout(); // force in case we've changed fontFamily from options\n\n\t\t\tvar dataString = this.getApiParam('inlineData');\n        \tif (dataString !== undefined) {\n        \t\tif (dataString.charAt(0)==\"[\") {\n            \t\tvar jsonData = Ext.decode(dataString, true);\n        \t\t} else {\n        \t\t\tif (dataString.indexOf(\":\")>-1) {\n        \t\t\t\tjsonData = [];\n        \t\t\t\tdataString.split(\",\").forEach(function(term) {\n        \t\t\t\t\tparts = term.split(\":\");\n        \t\t\t\t\tjsonData.push({\n        \t\t\t\t\t\ttext: parts[0],\n        \t\t\t\t\t\trawFreq: parseInt(parts[1])\n        \t\t\t\t\t})\n        \t\t\t\t})\n        \t\t\t} else {\n        \t\t\t\tvar terms = {}\n        \t\t\t\tjsonData = [];\n        \t\t\t\tdataString.split(\",\").forEach(function(term) {\n        \t\t\t\t\tif (term in terms) {\n        \t\t\t\t\t\tterms[term]++;\n        \t\t\t\t\t} else {\n        \t\t\t\t\t\tterms[term] = 1;\n        \t\t\t\t\t}\n        \t\t\t\t});\n        \t\t\t\tfor (term in terms) {\n        \t\t\t\t\tjsonData.push({\n        \t\t\t\t\t\ttext: term,\n        \t\t\t\t\t\trawFreq: terms[term]\n        \t\t\t\t\t})\n        \t\t\t\t}\n        \t\t\t}\n        \t\t}\n        \t\tif (jsonData !== null && jsonData.length>0) {\n        \t\t\tthis.setApiParam('inlineData', jsonData);\n\t        \t    this.setTerms(jsonData);\n\t        \t    this.buildFromTerms();\n        \t\t}\n        \t}\n    \t},\n    \tresize: function(panel, width, height) {\n    \t\tif (this.getVisLayout() && this.getCorpus()) {\n    \t\t\tthis.setAdjustedSizes();\n    \t\t\t\n    \t\t\tvar el = this.getLayout().getRenderTarget();\n    \t    \twidth = el.getWidth();\n    \t\t\theight = el.getHeight();\n    \t\t\t\n    \t\t\tel.down('svg').set({width: width, height: height});\n    \t\t\tif (this.getTerms()) {\n        \t\t\tthis.getVisLayout().size([width, height]).stop().words(this.getTerms()).start();\n    \t\t\t}\n    \t\t}\n    \t},\n    \t\n    \tloadedCorpus: function(src, corpus) {\n\t\t\tthis.getApplication().getCategoriesManager().addFeature('font', this.getApiParam('fontFamily')); // make sure the default for font is set from the api\n    \t\tthis.initVisLayout(); // force in case we've changed fontFamily from options\n    \t\tif (this.getApiParam(\"docIndex\")) {\n    \t\t\tthis.fireEvent(\"documentSelected\", this, corpus.getDocument(this.getApiParam(\"docIndex\")));\n    \t\t} else if (this.getApiParam(\"docId\")) {\n    \t\t\tthis.fireEvent(\"documentSelected\", this, corpus.getDocument(this.getApiParam(\"docId\")));\n    \t\t} else {\n        \t\tthis.loadFromCorpus(corpus);\n\t\t\t}\n    \t},\n    \t\n    \tcorpusSelected: function(src, corpus) {\n    \t\tthis.loadFromCorpus(corpus);\n    \t\t\n    \t},\n    \t\n    \tdocumentSelected: function(src, document) {\n    \t\tif (document) {\n        \t\tvar corpus = this.getCorpus();\n        \t\tvar document = corpus.getDocument(document);\n        \t\tthis.setApiParam('docId', document.getId());\n        \t\tvar documentTerms = document.getDocumentTerms({autoload: false, corpus: corpus, pageSize: this.getApiParam(\"maxVisible\"), parentPanel: this});\n        \t\tthis.loadFromDocumentTerms(documentTerms);\n    \t\t}\n    \t},\n    \t\n    \tensureCorpusView: function(src, corpus) {\n    \t\tif (this.getMode() != this.MODE_CORPUS) {this.loadFromCorpus(corpus);}\n    \t}\n    },\n    \n    loadFromCorpus: function(corpus) {\n    \tvar jsonData = this.getApiParam('inlineData');\n    \tif (jsonData === undefined) {\n\t\t\tthis.setApiParams({docId: undefined, docIndex: undefined});\n\t\t\tthis.loadFromCorpusTerms(corpus.getCorpusTerms({autoload: false, pageSize: this.getApiParam(\"maxVisible\"), parentPanel: this}));\n    \t} else {\n    \t\t// if (jsonData !== undefined) {\n    \t\t// \tvar records = [];\n    \t\t// \tfor (var i = 0; i < jsonData.length; i++) {\n\t\t\t// \t\tvar wordData = jsonData[i];\n\t\t\t// \t\twordData.term = wordData.text; // inlineData/CorpusTerm format mismatch\n    \t\t// \t\tvar record = Ext.create('Voyant.data.model.CorpusTerm', wordData);\n    \t\t// \t\trecords.push(record);\n    \t\t// \t}\n    \t\t// \tthis.setRecords(records);\n    \t\t// \tthis.setMode(this.MODE_CORPUS);\n    \t\t// \tthis.loadFromTermsRecords();\n    \t\t// }\n    \t}\n    },\n    \n    loadFromDocumentTerms: function(documentTerms) {\n    \tdocumentTerms.load({\n\t\t    callback: function(records, operation, success) {\n\t\t    \tthis.setMode(this.MODE_DOCUMENT);\n\t\t    \tthis.setRecords(operation.getRecords()); // not sure why operation.records is different from records\n\t\t    \tthis.loadFromTermsRecords();\n\t\t    },\n\t\t    scope: this,\n\t\t    params: this.getApiParams()\n    \t});\n    },\n    \n    loadFromCorpusTerms: function(corpusTerms) {\n\t\tcorpusTerms.load({\n\t\t    callback: function(records, operation, success) {\n\t\t    \tthis.setMode(this.MODE_CORPUS);\n\t\t    \tthis.setRecords(operation.getRecords()); // not sure why operation.records is different from records\n\t\t\t\tthis.loadFromTermsRecords();\n\t\t    },\n\t\t    scope: this,\n\t\t    params: this.getApiParams()\n    \t});\n    },\n    \n    loadFromTermsRecords: function() {\n    \tvar records = this.getRecords();\n    \tvar visible = this.getApiParam(\"visible\");\n    \tif (visible>records.length) {visible=records.length;}\n    \tvar terms = [];\n    \tfor (var i=0; i<visible; i++) {\n    \t\tif (records[i].get('rawFreq')>0) {\n        \t\tterms.push({text: records[i].get('term').replace(/\"/g,''), rawFreq: records[i].get('rawFreq')});\n    \t\t}\n    \t}\n    \tthis.setTerms(terms);\n    \tthis.buildFromTerms();\n    },\n    \n    initVisLayout: function(forceLayout) {\n    \tif (forceLayout || this.getVisLayout() == undefined) {\n    \t\tvar cirrusForceFlash = this.getApiParam('cirrusForceFlash');\n    \t\tif (cirrusForceFlash == 'true' || cirrusForceFlash === true) {\n    \t\t\tthis.setApiParam('cirrusForceFlash', true);\n    \t\t\tvar id = this.getCirrusId();\n    \t\t\tvar appVars = {\n    \t\t\t\tid: id\n    \t\t\t};\n    \t\t\tvar keys = ['background','fade','smoothness','diagonals'];\n    \t\t\tfor (var i = 0; i < keys.length; i++) {\n    \t\t\t\tappVars[keys[i]] = this.getApiParam(keys[i]);\n    \t\t\t}\n    \t\t\t\n    \t\t\tvar swfscript = '<script type=\"text/javascript\" src=\"'+this.getApplication().getBaseUrl()+'resources/swfobject/swfobject.js'+'\">\u003c/script>';\n    \t\t\tvar cirrusLinks = '<script type=\"text/javascript\">'+\n\t\t\t\t'cirrusClickHandler'+id+' = function(word, value) {\\n'+\n\t\t\t\t'\\tif (window.console && console.info) console.info(word, value);\\n'+\n\t\t\t\t'\\tvar cirrusTool = Ext.getCmp(\"'+this.id+'\");\\n'+\n\t\t\t\t'\\tcirrusTool.dispatchEvent(\"termsClicked\", cirrusTool, [word]);\\n'+\n\t\t\t\t'}\\n'+\n\t\t\t\t'cirrusLoaded'+id+' = function() {\\n'+\n\t\t\t\t'\\tif (window.console && console.info) console.info(\"cirrus flash loaded\");\\n'+\n\t\t\t\t'}\\n'+\n\t\t\t\t'cirrusPNGHandler'+id+' = function(base64String) {\\n'+\n\t\t\t\t'\\tvar cirrusTool = Ext.getCmp(\"'+this.id+'\");\\n'+\n\t\t\t\t'\\tcirrusTool.cirrusPNGHandler(base64String);\\n'+\n\t\t\t\t'}'+\n\t\t\t\t'\u003c/script>';\n    \t\t\t\n    \t\t\tthis.update(swfscript+cirrusLinks, true, function() {\n    \t\t\t\tfunction loadFlash(component) {\n    \t\t\t\t\tif (typeof swfobject !== 'undefined') {\n    \t\t\t\t\t\tvar el = component.getLayout().getRenderTarget();\n    \t\t\t\t\t\tvar width = el.getWidth();\n    \t\t\t\t\t\tvar height = el.getHeight();\n    \t\t    \t\t\t\n\t        \t\t\t\tvar cirrusFlash = component.getApplication().getBaseUrl()+'resources/cirrus/flash/Cirrus.swf';\n\t        \t\t\t\tcomponent.add({\n\t        \t\t\t\t\txtype: 'flash',\n\t        \t\t\t\t\tid: appVars.id,\n\t        \t\t\t\t\turl: cirrusFlash,\n\t        \t\t\t\t\twidth: width,\n\t        \t\t\t\t\theight: height,\n\t        \t\t\t\t\tflashVars: appVars,\n\t        \t\t\t\t\tflashParams: {\n\t\t\t\t\t\t\t\t\tmenu: 'false',\n\t\t\t\t\t\t\t\t\tscale: 'showall',\n\t\t\t\t\t\t\t\t\tallowScriptAccess: 'always',\n\t\t\t\t\t\t\t\t\tbgcolor: '#222222',\n\t\t\t\t\t\t\t\t\twmode: 'opaque'\n\t        \t\t            }\n\t        \t\t\t\t});\n\t        \t\t\t\t\n\t        \t\t\t\tcomponent.cirrusFlashApp = Ext.get(appVars.id).first().dom;\n    \t\t\t\t\t} else {\n    \t\t\t\t\t\tsetTimeout(loadFlash, 50, component);\n    \t\t\t\t\t}\n        \t\t\t}\n    \t\t\t\tloadFlash(this);\n    \t\t\t\t\n    \t\t\t}, this);\n    \t\t} else {\n    \t\t\tvar el = this.getLayout().getRenderTarget();\n    \t\t\tel.update(\"\"); // make sure to clear existing contents (especially for re-layout)\n    \t    \tvar width = el.getWidth();\n\t\t\t\tvar height = el.getHeight();\n\t\t\t\tthis.setVisLayout(\n\t\t\t\t\td3.layoutCloud()\n\t\t\t\t\t\t.size([width, height])\n\t\t\t\t\t\t.overflow(true)\n\t\t\t\t\t\t.padding(1)\n\t\t\t\t\t\t.rotate(function(d) { return this.getApplication().getCategoriesManager().getFeatureForTerm('orientation', d.text); }.bind(this))\n\t\t\t\t\t\t.spiral('archimedean')\n\t\t\t\t\t\t.font(function(d) { return this.getApplication().getCategoriesManager().getFeatureForTerm('font', d.text); }.bind(this))\n\t\t\t\t\t\t.fontSize(function(d) {return d.fontSize; }.bind(this))\n\t\t\t\t\t\t.text(function(d) { return d.text; })\n\t\t\t\t\t\t.on('end', this.draw.bind(this))\n\t\t\t\t);\n\t\t\t\t\n\t\t\t\tvar svg = d3.select(el.dom).append('svg').attr('id',this.getCirrusId()).attr('class', 'cirrusGraph').attr('width', width).attr('height', height);\n\t\t\t\tthis.setVis(svg.append('g').attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')'));\n\t\t\t\t\n\t\t\t\tif (this.getTip() === undefined) {\n\t\t\t\t\tthis.setTip(Ext.create('Ext.tip.Tip', {}));\n\t\t\t\t}\n    \t\t}\n    \t}\n    },\n    \n    buildFromTerms: function() {\n\t\tvar terms = this.getTerms();\n    \tif (this.rendered && terms) {\n    \t\tif (this.getApiParam('cirrusForceFlash') === true) {\n    \t\t\tif (this.cirrusFlashApp !== undefined && this.cirrusFlashApp.clearAll !== undefined) {\n\t    \t\t\tvar words = [];\n\t    \t\t\tfor (var i = 0; i < terms.length; i++) {\n\t    \t\t\t\tvar t = terms[i];\n\t    \t\t\t\tif (!t.text && t.term) {t.text=t.term;}\n\t    \t\t\t\twords.push({word: t.text, size: t.rawFreq, label: t.rawFreq});\n\t    \t\t\t}\n\t    \t\t\tthis.cirrusFlashApp.clearAll();\n\t    \t\t\tthis.cirrusFlashApp.addWords(words);\n\t    \t\t\tthis.cirrusFlashApp.arrangeWords();\n    \t\t\t} else {\n    \t\t\t\tExt.defer(this.buildFromTerms, 50, this);\n    \t\t\t}\n    \t\t} else {\n\t    \t\tvar minSize = 1000;\n\t    \t\tvar maxSize = -1;\n\t    \t\tfor (var i = 0; i < terms.length; i++) {\n\t    \t\t\tvar size = terms[i].rawFreq;\n\t    \t\t\tif (size < minSize) minSize = size;\n\t    \t\t\tif (size > maxSize) maxSize = size;\n\t    \t\t}\n\t    \t\tthis.setSmallestWordSize(minSize);\n\t    \t\tthis.setLargestWordSize(maxSize);\n\t    \t\t\n\t    \t\t// set the relative sizes for each word (0.0 to 1.0), then adjust based on available area\n\t    \t\tthis.setRelativeSizes();\n\t    \t\tthis.setAdjustedSizes();\n\n\t//    \t\tvar fontSizer = d3.scalePow().range([10, 100]).domain([minSize, maxSize]);\n\n\t    \t\tthis.getVisLayout().words(terms).start();\n    \t\t}\n    \t} else {\n    \t\tExt.defer(this.buildFromTerms, 50, this);\n    \t}\n    },\n    \n    draw: function(words, bounds) {\n    \tvar panel = this;\n    \tvar el = this.getLayout().getRenderTarget();\n    \tvar width = this.getVisLayout().size()[0];\n    \tvar height = this.getVisLayout().size()[1];\n    \t\n    \tvar scale = bounds ? Math.min(\n\t\t\twidth / Math.abs(bounds[1].x - width / 2),\n\t\t\twidth / Math.abs(bounds[0].x - width / 2),\n\t\t\theight / Math.abs(bounds[1].y - height / 2),\n\t\t\theight / Math.abs(bounds[0].y - height / 2)\n    \t) / 2 : 1;\n    \t\n\t\tvar t = d3.transition().duration(1000);\n\t\t\t\n\t\tvar nodes = this.getVis().selectAll('text').data(words, function(d) {return d.text;});\n\t\t\n\t\tnodes.exit().transition(t)\n\t\t\t.style('font-size', '1px')\n\t\t\t.remove();\n\n\t\tvar nodesEnter = nodes.enter().append('text')\n\t\t\t.text(function(d) { return d.text; })\n\t\t\t.attr('text-anchor', 'middle')\n\t\t\t.attr('data-freq', function(d) { return d.rawFreq; })\n\t\t\t.attr('transform', function(d) { return 'translate(' + [d.x, d.y] + ')rotate(' + d.rotate + ')'; })\n\t\t\t.style('font-family', function(d) { return panel.getApplication().getCategoriesManager().getFeatureForTerm('font', d.text); })\n\t\t\t.style('fill', function(d) { return panel.getApplication().getColorForTerm(d.text, true); })\n\t\t\t.style('font-size', '1px')\n\t\t\t.on('click', function(obj) {panel.dispatchEvent('termsClicked', panel, [obj.text]);})\n\t\t\t.on('mouseover', function(obj) {\n\t\t\t\tthis.getTip().show();\n\t\t\t}.bind(this))\n\t\t\t.on('mousemove', function(obj) {\n\t\t\t\tvar tip = this.getTip();\n\t\t\t\ttip.update(obj.text+': '+obj.rawFreq);\n\t\t\t\tvar container = Ext.get(this.getCirrusId()).dom;\n\t\t\t\tvar coords = d3.mouse(container);\n\t\t\t\tcoords[1] += 30;\n\t\t\t\ttip.setPosition(coords);\n\t\t\t}.bind(this))\n\t\t\t.on('mouseout', function(obj) {\n\t\t\t\tthis.getTip().hide();\n\t\t\t}.bind(this));\n\t\t\n\t\tvar nodesUpdate = nodes.merge(nodesEnter);\n\t\t\n\t\tnodesUpdate.transition(t)\n\t\t\t.style('font-family', function(d) { return panel.getApplication().getCategoriesManager().getFeatureForTerm('font', d.text); })\n\t\t\t.style('fill', function(d) { return panel.getApplication().getColorForTerm(d.text, true); })\n\t\t\t.attr('transform', function(d) { return 'translate(' + [d.x, d.y] + ')rotate(' + d.rotate + ')'; })\n\t\t\t.style('font-size', function(d) { return d.fontSize + 'px'; });\n\t\t\n\t\tthis.getVis().transition(t).attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')scale(' + scale + ')');\n    },\n    \n    map: function(value, istart, istop, ostart, ostop) {\n\t\treturn ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\n\t},\n\t\n\tcalculateSizeAdjustment: function() {\n\t\tvar terms = this.getTerms();\n        if (terms !== undefined) {\n\t\t\tvar el = this.getLayout().getRenderTarget();\n\t\t\t\n\t        var stageArea = el.getWidth() * el.getHeight();\n\t        if (stageArea < 100000) this.setMinFontSize(8);\n\t        else this.setMinFontSize(12);\n        \n\t        var pixelsPerWord = stageArea / terms.length;\n\t        var totalWordsSize = 0;\n\t        for (var i = 0; i < terms.length; i++) {\n\t            var word = terms[i];\n\t            var wordArea = this.calculateWordArea(word);\n\t            totalWordsSize += wordArea;\n\t        }\n\n\t        this.setSizeAdjustment(stageArea / totalWordsSize);\n        }\n    },\n    \n    calculateWordArea: function(word) {\n        var baseSize = Math.log(word.relativeSize * 10) * Math.LOG10E; // take the relativeSize (0.1 to 1.0), multiply by 10, then get the base-10 log of it\n        var height = (baseSize + word.relativeSize) / 2; // find the average between relativeSize and the log\n        var width = 0; //(baseSize / 1.5) * word.text.length;\n        for (var i = 0; i < word.text.length; i++ ) {\n            var letter = word.text.charAt(i);\n            if (letter == 'f' || letter == 'i' || letter == 'j' || letter == 'l' || letter == 'r' || letter == 't') width += baseSize / 3;\n            else if (letter == 'm' || letter == 'w') width += baseSize / (4 / 3);\n            else width += baseSize / 1.9;\n        }\n        var wordArea = height * width;\n        return wordArea;\n    },\n    \n    setAdjustedSizes: function() {\n    \tthis.calculateSizeAdjustment();\n    \tvar terms = this.getTerms();\n    \tif (terms !== undefined) {\n\t\t\tfor (var i = 0; i < terms.length; i++) {\n\t\t\t\tvar term = terms[i];\n\t\t\t\tvar adjustedSize = this.findNewRelativeSize(term);\n\t\t\t\tterm.fontSize = adjustedSize > this.getMinFontSize() ? adjustedSize : this.getMinFontSize();\n\t\t\t}\n    \t}\n    },\n    \n    setRelativeSizes: function() {\n    \tvar terms = this.getTerms();\n    \tif (terms !== undefined) {\n\t    \tfor (var i = 0; i < terms.length; i++) {\n\t            var word = terms[i];\n\t            word.relativeSize = this.map(word.rawFreq, this.getSmallestWordSize(), this.getLargestWordSize(), 0.1, 1);\n\t        }\n    \t}\n    },\n    \n    findNewRelativeSize: function(word) {\n    \tvar areaMultiplier = this.getSizeAdjustment();\n        var area = this.calculateWordArea(word) * areaMultiplier;\n        // given the area = (x+6)*(2*x/3*y), solve for x\n        var newRelativeSize = (Math.sqrt(6) * Math.sqrt(6 * Math.pow(word.text.length, 2) + area * word.text.length) - 6 * word.text.length) / (2 * word.text.length);\n        return newRelativeSize;\n    }\n});","Ext.define('Voyant.panel.CollocatesGraph', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.collocatesgraph',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tquery: undefined,\n    \t\tmode: undefined,\n    \t\tlimit: 5,\n    \t\tstopList: 'auto',\n    \t\tterms: undefined,\n    \t\tcontext: 5,\n    \t\tcentralize: undefined\n    \t},\n\t\tglyph: 'xf1e0@FontAwesome'\n    },\n    \n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{\n    \t\txtype: 'categoriesoption'\n    \t}],\n    \t\n    \tnodeData: undefined,\n    \tlinkData: undefined,\n    \t\n    \tvisId: undefined,\n    \tvis: undefined,\n    \tvisLayout: undefined,\n    \tnodes: undefined,\n    \tlinks: undefined,\n    \tzoom: undefined,\n    \t\n    \tdragging: false,\n    \t\n    \tcontextMenu: undefined,\n    \t\n    \tcurrentNode: undefined,\n    \t\n    \tnetworkMode: undefined,\n    \t\n    \tgraphStyle: {\n    \t\tkeywordNode: {\n    \t\t\tnormal: {\n    \t\t\t\tfill: '#c6dbef',\n    \t\t\t\tstroke: '#6baed6'\n    \t\t\t},\n    \t\t\thighlight: {\n    \t\t\t\tfill: '#9ecae1',\n    \t\t\t\tstroke: '#3182bd'\n    \t\t\t}\n    \t\t},\n    \t\tcontextNode: {\n    \t\t\tnormal: {\n    \t\t\t\tfill: '#fdd0a2',\n    \t\t\t\tstroke: '#fdae6b'\n    \t\t\t},\n    \t\t\thighlight: {\n    \t\t\t\tfill: '#fd9a53',\n    \t\t\t\tstroke: '#e6550d'\n    \t\t\t}\n    \t\t},\n    \t\tlink: {\n    \t\t\tnormal: {\n    \t\t\t\tstroke: '#000000',\n    \t\t\t\tstrokeOpacity: 0.1\n    \t\t\t},\n    \t\t\thighlight: {\n    \t\t\t\tstroke: '#000000',\n    \t\t\t\tstrokeOpacity: 0.5\n    \t\t\t}\n    \t\t}\n    \t},\n    \t\n    \tgraphPhysics: {\n    \t\tdefaultMode: {\n\t    \t\tdamping: 0.4, // 0 = no damping, 1 = full damping\n\t    \t\tcentralGravity: 0.1, // 0 = no grav, 1 = high grav\n\t    \t\tnodeGravity: -50,  // negative = repel, positive = attract\n\t\t\t\tspringLength: 100,\n\t\t\t\tspringStrength: 0.25, // 0 = not strong, >1 = probably too strong\n\t\t\t\tcollisionScale: 1.25 // 1 = default, 0 = no collision \n    \t\t},\n    \t\tcentralizedMode: {\n    \t\t\tdamping: 0.4, // 0 = no damping, 1 = full damping\n    \t\t\tcentralGravity: 0.1, // 0 = no grav, 1 = high grav\n\t    \t\tnodeGravity: -1,  // negative = repel, positive = attract\n\t\t\t\tspringLength: 200,\n\t\t\t\tspringStrength: 1, // 0 = not strong, >1 = probably too strong\n\t\t\t\tcollisionScale: 1 // 1 = default, 0 = no collision \n    \t\t}\n    \t}\n    },\n\n    DEFAULT_MODE: 0,\n    CENTRALIZED_MODE: 1,\n    \n    constructor: function(config) {\n    \tthis.setNodeData([]);\n    \tthis.setLinkData([]);\n    \t\n    \tthis.setVisId(Ext.id(null, 'links_'));\n\n    \tthis.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        var me = this;\n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                   xtype: 'querysearchfield'\n                },{\n                \ttext: me.localize('clearTerms'),\n\t\t\t\t\tglyph: 'xf014@FontAwesome',\n                \thandler: this.resetGraph,\n                \tscope: me\n                },this.localize('context'),{\n                \txtype: 'slider',\n                \titemId: 'contextSlider',\n                \tminValue: 3,\n                \tvalue: 5,\n                \tmaxValue: 30,\n                \tincrement: 2,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(this.getApiParam('context'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tthis.setApiParam('context', slider.getValue());\n                \t\t\tif (this.getNetworkMode() === this.DEFAULT_MODE) {\n                    \t\t\tvar terms = this.getNodeData().map(function(node) { return node.term; });\n                \t\t\t\tif (terms.length > 0) {\n                \t\t\t\t\tthis.setNodeData([]);\n                \t\t\t\t\tthis.setLinkData([]);\n                \t\t\t\t\tthis.refresh();\n                \t\t\t\t\t\n                \t\t\t\t\tthis.loadFromQuery(terms);\n                \t\t\t\t}\n                \t\t\t}\n                \t\t},\n                \t\tscope: me\n                \t}\n                }]\n            }]\n        });\n        \n        this.setContextMenu(Ext.create('Ext.menu.Menu', {\n\t\t\trenderTo: Ext.getBody(),\n\t\t\titems: [{\n\t\t\t\txtype: 'box',\n\t\t\t\titemId: 'label',\n\t\t\t\tmargin: '5px 0px 5px 5px',\n\t\t\t\thtml: ''\n\t\t\t},{\n\t\t        xtype: 'menuseparator'\n\t\t\t},{\n\t\t\t\txtype: 'menucheckitem',\n\t\t\t\ttext: 'Fixed',\n\t\t\t\titemId: 'fixed',\n\t\t\t\tlisteners: {\n\t\t\t\t\tcheckchange: function(c, checked, e) {\n\t\t\t\t\t\tvar node = this.getCurrentNode();\n\t\t\t\t\t\tif (node !== undefined) {\n\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\tfixed: checked\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (checked) {\n\t\t\t\t\t\t\t\tdata.fx = node.x;\n\t\t\t\t\t\t\t\tdata.fy = node.y;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdata.fx = null;\n\t\t\t\t\t\t\t\tdata.fy = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.updateDataForNode(node.id, data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t},{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: 'Fetch Collocates',\n\t\t\t\tstyle: 'margin: 5px;',\n\t\t\t\thandler: function(b, e) {\n\t\t\t\t\tvar node = this.getCurrentNode();\n\t\t\t\t\tif (node !== undefined) {\n\t\t\t\t\t\tif (this.getNetworkMode() === this.CENTRALIZED_MODE) {\n\t\t\t\t\t\t\tthis.resetGraph();\n\t\t\t\t\t\t\tthis.setNetworkMode(this.DEFAULT_MODE);\n\t\t\t\t\t\t\tthis.setApiParam('centralize', undefined);\n\t\t\t\t\t\t\tnode.start = 0;\n\t\t\t\t\t\t\tnode.limit = this.getApiParam('limit');\n\t\t\t\t\t\t}\n\t\t    \t\t\tthis.fetchCollocatesForNode(node);\n\t\t    \t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: 'Centralize',\n\t\t\t\tstyle: 'margin: 5px;',\n\t\t\t\thandler: function(b, e) {\n\t\t\t\t\tvar node = this.getCurrentNode();\n\t\t\t\t\tif (node !== undefined) {\n\t\t    \t\t\tthis.doCentralize(node.term);\n\t\t    \t\t}\n\t\t\t\t\tthis.getContextMenu().hide();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: 'Remove',\n\t\t\t\tstyle: 'margin: 5px;',\n\t\t\t\thandler: function(b, e) {\n\t\t\t\t\tvar node = this.getCurrentNode();\n\t\t\t\t\tif (node !== undefined) {\n\t\t\t\t\t\tthis.removeNode(node.id);\n\t\t\t\t\t}\n\t\t\t\t\tb.up('menu').hide();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}]\n\t\t}));\n        \n        this.on('loadedCorpus', function(src, corpus) {\n\t\t\tif (this.isVisible()) {\n\t\t\t\tthis.initLoad();\n\t\t\t}\n        }, this);\n        \n        this.on('activate', function() { // load after tab activate (if we're in a tab panel)\n\t\t\tif (this.getCorpus()) {\n\t\t\t    if (this.getNodeData().length === 0) { // only initLoad if there isn't already data\n\t\t\t        Ext.Function.defer(this.initLoad, 100, this);\n\t\t\t    }\n\t\t\t}\n    \t}, this);\n        \n        this.on('query', function(src, query) {this.loadFromQuery(query);}, this);\n        \n        this.on('resize', function(panel, width, height) {\n        \tvar vis = Ext.get(this.getVisId());\n        \tif (vis) {\n        \t\tvar el = this.body;//this.getLayout().getRenderTarget();\n            \tvar elHeight = el.getHeight();\n            \tvar elWidth = el.getWidth();\n            \t\n        \t\tvis.el.dom.setAttribute('width', elWidth);\n        \t\tvis.el.dom.setAttribute('height', elHeight);\n        \t\tthis.getVisLayout()\n        \t\t\t.force('x', d3.forceX(elWidth/2))\n\t    \t\t\t.force('y', d3.forceY(elHeight/2));\n//        \t\t\t.alpha(0.5).restart(); // restarting physics messes up zoomToFit\n        \t\t\n        \t\tExt.Function.defer(this.zoomToFit, 100, this);\n //       \t\tthis.zoomToFit();\n        \t}\n\t\t}, this);\n        \n        me.callParent(arguments);\n\n    },\n    \n    initLoad: function() {\n\t\tthis.initGraph();\n\t\tthis.setNetworkMode(this.DEFAULT_MODE);\n\t\t\n\t\tif (this.getApiParam('centralize')) {\n\t\t\tthis.setNetworkMode(this.CENTRALIZED_MODE);\n\t\t\tvar term = this.getApiParam('centralize');\n\t\t\tthis.doCentralize(term);\n\t\t} else {\n\t\t\tvar limit = 3;\n\t\t\tvar query = this.getApiParam('query');\n\t\t\tif (query !== undefined) {\n\t\t\t\tlimit = Ext.isArray(query) ? query.length : query.split(',').length;\n\t\t\t}\n\t\t\tthis.getCorpus().getCorpusTerms({autoLoad: false}).load({\n\t\t\t\tparams: {\n\t\t\t\t\tlimit: limit,\n\t\t\t\t\tquery: query,\n\t\t\t\t\tstopList: this.getApiParam('stopList'),\n\t\t\t\t\tcategories: this.getApiParam(\"categories\")\n\t\t\t\t},\n\t\t\t    callback: function(records, operation, success) {\n\t\t\t    \tif (success) {\n\t\t\t    \t\tthis.loadFromCorpusTermRecords(records);\n\t\t\t    \t}\n\t\t\t    },\n\t\t\t    scope: this\n\t    \t});\n\t\t}\n    },\n    \n    loadFromQuery: function(query) {\n    \tif (Ext.isArray(query) && query.length==0) {\n    \t\tthis.setApiParam(\"query\", undefined);\n    \t\tthis.resetGraph();\n    \t\treturn;\n    \t}\n    \tthis.setApiParams({\n    \t\tmode: 'corpus',\n    \t\tquery: query\n    \t});\n    \tvar params = this.getApiParams();\n    \tparams.noCache=true;\n    \t(Ext.isString(query) ? [query] : query).forEach(function(q) {\n        \tthis.getCorpus().getCorpusCollocates({autoLoad: false}).load({\n        \t\tparams: Ext.apply(Ext.clone(params), {query: q}),\n        \t\tcallback: function(records, operations, success) {\n        \t\t\tif (success) {\n        \t\t\t\tthis.loadFromCorpusCollocateRecords(records);\n        \t\t\t}\n        \t\t},\n        \t\tscope: this\n        \t});\n    \t}, this);\n    },\n    \n    loadFromCorpusTermRecords: function(corpusTerms) {\n    \tif (Ext.isArray(corpusTerms) && corpusTerms.length>0) {\n    \t\tvar terms = [];\n    \t\tcorpusTerms.forEach(function(corpusTerm) {\n    \t\t\tterms.push(corpusTerm.getTerm());\n    \t\t});\n    \t\tthis.loadFromQuery(terms);\n    \t}\n    },\n    \n    loadFromCorpusCollocateRecords: function(records, keywordId) {\n    \tif (Ext.isArray(records)) {\n    \t\tvar start = this.getApiParam('limit');\n    \t\t\n    \t\tvar el = this.getLayout().getRenderTarget();\n    \t\tvar cX = el.getWidth()/2;\n    \t\tvar cY = el.getHeight()/2;\n    \t\t\n    \t\tvar existingKeys = {};\n    \t\tthis.getNodeData().forEach(function(item) {\n    \t\t\texistingKeys[item.id] = true;\n    \t\t}, this);\n    \t\t\n    \t\tvar newNodes = [];\n    \t\tvar newLinks = [];\n    \t\t\n    \t\trecords.forEach(function(corpusCollocate, index) {\n    \t\t\tvar term = corpusCollocate.getTerm();\n    \t\t\tvar contextTerm = corpusCollocate.getContextTerm();\n    \t\t\tvar termFreq = corpusCollocate.getKeywordRawFreq();\n    \t\t\tvar contextFreq = corpusCollocate.getContextTermRawFreq();\n    \t\t\t\n    \t\t\tvar termValue = termFreq;\n    \t\t\tvar contextValue = contextFreq;\n    \t\t\tif (this.getNetworkMode() === this.CENTRALIZED_MODE) {\n    \t\t\t\ttermValue = 0;\n    \t\t\t\tcontextValue = Math.log(contextFreq);\n    \t\t\t}\n    \t\t\t\n    \t\t\tvar termEntry = undefined;\n    \t\t\tvar contextTermEntry = undefined;\n    \t\t\t\n    \t\t\tif (index == 0) { // only process keyword once\n    \t\t\t\tif (keywordId === undefined) keywordId = this.idGet(term);\n\t    \t\t\tif (existingKeys[keywordId] !== undefined) {\n\t    \t\t\t\tthis.updateDataForNode(keywordId, {\n\t    \t\t\t\t\ttitle: term+' ('+termFreq+')',\n\t    \t\t\t\t\ttype: 'keyword',\n\t    \t\t\t\t\tvalue: termValue\n\t    \t\t\t\t});\n\t    \t\t\t} else {\n\t    \t\t\t\texistingKeys[keywordId] = true;\n\t    \t\t\t\t\n\t    \t\t\t\ttermEntry = {\n\t\t    \t\t\t\tid: keywordId,\n\t    \t\t\t\t\tterm: term,\n\t    \t\t\t\t\ttitle: term+' ('+termFreq+')',\n\t    \t\t\t\t\ttype: 'keyword',\n\t    \t\t\t\t\tvalue: termValue,\n\t    \t\t\t\t\tstart: start,\n\t    \t\t\t\t\tfixed: false,\n\t    \t\t\t\t\tx: cX,\n\t    \t\t\t\t\ty: cY\n\t\t\t\t\t\t};\n\t    \t\t\t\tnewNodes.push(termEntry);\n\t    \t\t\t}\n\t\t\t\t}\n    \t\t\t\n    \t\t\tif (term != contextTerm) {\n\t    \t\t\tvar contextId = this.idGet(contextTerm);\n\t    \t\t\tif (existingKeys[contextId] !== undefined) {\n\t    \t\t\t} else {\n\t    \t\t\t\texistingKeys[contextId] = true;\n\t    \t\t\t\t\n\t    \t\t\t\tcontextTermEntry = {\n    \t    \t\t\t\tid: contextId,\n    \t    \t\t\t\tterm: contextTerm,\n        \t\t\t\t\ttitle: contextTerm+' ('+contextFreq+')',\n        \t\t\t\t\ttype: 'context',\n        \t\t\t\t\tvalue: contextValue,\n        \t\t\t\t\tstart: 0,\n        \t\t\t\t\tfixed: false,\n\t    \t\t\t\t\tx: cX,\n\t    \t\t\t\t\ty: cY\n    \t\t\t\t\t};\n\t    \t\t\t\tnewNodes.push(contextTermEntry);\n\t    \t\t\t}\n\t    \t\t\t\n\t    \t\t\tvar existingLink = null;\n\t    \t\t\tvar linkData = this.getLinkData();\n\t    \t\t\tfor (var i = 0; i < linkData.length; i++) {\n\t    \t\t\t\tvar link = linkData[i];\n\t    \t\t\t\tif ((link.source.id == keywordId && link.target.id == contextId) || (link.source.id == contextId && link.target.id == keywordId)) {\n\t    \t\t\t\t\texistingLink = link;\n\t    \t\t\t\t\tbreak;\n\t    \t\t\t\t}\n\t    \t\t\t}\n\n\t    \t\t\tvar linkValue = corpusCollocate.getContextTermRawFreq();\n\t    \t\t\tif (existingLink === null) {\n\t    \t\t\t\tnewLinks.push({source: keywordId, target: contextId, value: linkValue, id: keywordId+'-'+contextId});\n\t    \t\t\t} else if (existingLink.value < linkValue) {\n//\t    \t\t\t\texistingLink.value = linkValue;\n\t    \t\t\t}\n    \t\t\t}\n    \t\t}, this);\n    \t\t\n    \t\tthis.setNodeData(this.getNodeData().concat(newNodes));\n    \t\tthis.setLinkData(this.getLinkData().concat(newLinks));\n    \t\t\n    \t\tthis.refresh();\t\t\n    \t}\n    },\n    \n    idGet: function(term) {\n    \treturn term.replace(/\\W/g, '_');\n    },\n    \n    updateDataForNode: function(nodeId, dataObj) {\n    \tvar data = this.getNodeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === nodeId) {\n\t\t\t\tExt.apply(data[i], dataObj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n    },\n    \n    removeNode: function(nodeId, removeOrphans) {\n    \tvar data = this.getNodeData();\n\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\tif (data[i].id === nodeId) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tdata = this.getLinkData();\n\t\tfor (var i = data.length-1; i >= 0; i--) {\n\t\t\tif (data[i].source.id === nodeId || data[i].target.id === nodeId) {\n\t\t\t\tdata.splice(i, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\tthis.setApiParam(\"query\", Ext.Array.remove(Ext.Array.from(this.getApiParam(\"query\")), nodeId));\n\t\t\n\t\tif (removeOrphans) {\n\t\t\t// TODO\n\t\t}\n\t\t\n\t\tthis.refresh();\n    },\n    \n    doCentralize: function(term) {\n    \tthis.setApiParam(\"centralize\",term);\n    \tthis.resetGraph();\n    \t\n    \tthis.setNetworkMode(this.CENTRALIZED_MODE);\n    \t\n    \tvar data = {\n\t\t\tid: this.idGet(term),\n\t\t\tterm: term,\n\t\t\ttitle: term+' ('+1+')',\n\t\t\ttype: 'keyword',\n\t\t\tvalue: 1000,\n\t\t\tstart: 0\n\t\t};\n\t\tthis.setNodeData([data]);\n\t\tthis.refresh();\n\t\t\n\t\tvar centralizeLimit = 150;\n\t\tvar limit = this.getApiParam('limit');\n\t\tthis.setApiParam('limit', centralizeLimit);\n\t\tthis.fetchCollocatesForNode(data);\n\t\tthis.setApiParam('limit', limit);\n    },\n    \n    // called by setNetworkMode\n    applyNetworkMode: function(mode) {\n    \tif (this.getVisLayout()) {\n\t    \tif (mode === this.DEFAULT_MODE) {\n\t    \t\tvar physics = this.getGraphPhysics().defaultMode;\n\t    \t\tthis.getVisLayout()\n\t    \t\t\t.velocityDecay(physics.damping)\n\t\t    \t\t.force('link', d3.forceLink().id(function(d) { return d.id; }).distance(physics.springLength).strength(physics.springStrength))\n\t\t\t\t\t.force('charge', d3.forceManyBody().strength(physics.nodeGravity))\n\t\t\t\t\t.force('collide', d3.forceCollide(function(d) { return Math.sqrt(d.bbox.width * d.bbox.height) * physics.collisionScale; }));\n\t    \t\tthis.getVisLayout().force('x').strength(physics.centralGravity);\n\t    \t\tthis.getVisLayout().force('y').strength(physics.centralGravity);\n\t    \t} else {\n\t    \t\tvar physics = this.getGraphPhysics().centralizedMode;\n\t    \t\tthis.getVisLayout()\n\t    \t\t\t.velocityDecay(physics.damping)\n\t\t    \t\t.force('link', d3.forceLink().id(function(d) { return d.id; }).distance(physics.springLength).strength(physics.springStrength))\n\t\t\t\t\t.force('charge', d3.forceManyBody().strength(function(d) {\n\t\t\t\t\t\tif (d.type === 'keyword') {\n\t\t\t\t\t\t\treturn -10000;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}))\n\t\t\t\t\t.force('collide', d3.forceCollide(function(d) {\n\t\t\t\t\t\tif (d.type === 'keyword') {\n\t\t\t\t\t\t\treturn d.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn Math.sqrt(d.bbox.width * d.bbox.height) * physics.collisionScale;\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t    \t\tthis.getVisLayout().force('x').strength(physics.centralGravity);\n\t    \t\tthis.getVisLayout().force('y').strength(physics.centralGravity);\n\t    \t}\n    \t}\n    \t\n    \treturn mode; // need to return mode for it to actually be set\n    },\n    \n    initGraph: function() {\n    \tvar el = this.getLayout().getRenderTarget();\n    \tel.update('');\n    \tvar width = el.getWidth();\n    \tvar height = el.getHeight();\n    \t\n    \tthis.setVisLayout(d3.forceSimulation()\n    \t\t.force('x', d3.forceX(width/2))\n    \t\t.force('y', d3.forceY(height/2))\n\t\t\t.on('tick', function() {\n\t    \t\tthis.getLinks()\n\t    \t\t\t.attr('x1', function(d) { return d.source.x; })\n\t    \t\t\t.attr('y1', function(d) { return d.source.y; })\n\t    \t\t\t.attr('x2', function(d) { return d.target.x; })\n\t    \t\t\t.attr('y2', function(d) { return d.target.y; });\n\t//    \t\tthis.getLinks().attr('d', function(d) {\n\t//\t\t\t\treturn 'M' + d[0].x + ',' + d[0].y\n\t//\t\t\t\t\t\t+ 'S' + d[1].x + ',' + d[1].y\n\t//\t\t\t\t\t\t+ ' ' + d[2].x + ',' + d[2].y;\n\t//\t\t\t});\n\t    \t\tthis.getNodes().attr('transform', function(d) {\n\t    \t\t\tvar x = d.x;\n\t    \t\t\tvar y = d.y;\n\t    \t\t\tif (this.getNetworkMode() === this.DEFAULT_MODE || d.type !== 'keyword') {\n\t\t    \t\t\tx -= d.bbox.width*0.5;\n\t\t    \t\t\ty -= d.bbox.height*0.5;\n\t    \t\t\t} else {\n\t    \t\t\t\t\n\t    \t\t\t}\n\t    \t\t\treturn 'translate('+x+','+y+')';\n\t    \t\t}.bind(this));\n\t    \t\t\n\t    \t\tif (!this.getDragging() && this.getVisLayout().alpha() < 0.075) {\n\t    \t\t\tthis.getVisLayout().alpha(-1); // trigger end event\n\t    \t\t}\n\t    \t}.bind(this))\n\t    \t.on('end', function() {\n        \t\tExt.Function.defer(this.zoomToFit, 100, this);\n\t    \t}.bind(this))\n\t\t);\n    \t\n    \tvar svg = d3.select(el.dom).append('svg').attr('id',this.getVisId()).attr('class', 'linksGraph').attr('width', width).attr('height', height);\n    \tvar g = svg.append('g');\n    \t\n    \tvar zoom = d3.zoom()\n    \t\t.scaleExtent([1/4, 4])\n    \t\t.on('zoom', function() {\n\t\t\t\tg.attr('transform', d3.event.transform);\n\t\t\t});\n    \tthis.setZoom(zoom);\n\t\tsvg.call(zoom);\n\t\t\n\t\tsvg.on('click', function() {\n    \t\tthis.getContextMenu().hide();\n    \t}.bind(this));\n    \t\n    \tthis.setLinks(g.append('g').attr('class', 'links').selectAll('.link'));\n    \tthis.setNodes(g.append('g').attr('class', 'nodes').selectAll('.node'));\n\t\tthis.setVis(g);\n    },\n    \n    resetGraph: function() {\n\t\tthis.setNodeData([]);\n    \tthis.setLinkData([]);\n\t\tthis.setNetworkMode(this.DEFAULT_MODE); // ? there was another version of this function without this\n\t\tthis.refresh();\n    },\n    \n    refresh: function() {\n    \tvar me = this;\n    \t\n    \tvar nodeData = this.getNodeData();\n    \tvar linkData = this.getLinkData();\n    \t\n//    \tvar nodeMap = d3.map(nodeData, function(d) { return d.id; });\n//    \tvar bilinks = [];\n//    \tlinkData.forEach(function(link) {\n//    \t\tvar s = link.source = nodeMap.get(link.source);\n//    \t\tvar t = link.target = nodeMap.get(link.target);\n//    \t\tvar i = {};\n//    \t\tnodeData.push(i);\n//    \t\tlinkData.push({source: s, target: i}, {source: i, target: t});\n//    \t\tbilinks.push([s,i,t]);\n//    \t});\n    \t\n    \tvar link = this.getLinks().data(linkData, function(d) { return d.id; });\n    \tlink.exit().remove();\n\t\tvar linkEnter = link.enter().append('line')\n\t\t\t.attr('class', 'link')\n\t\t\t.attr('id', function(d) { return d.id; })\n\t\t\t.on('mouseover', me.linkMouseOver.bind(me))\n\t\t\t.on('mouseout', me.linkMouseOut.bind(me))\n\t\t\t.on('click', function(data) {\n\t\t\t\td3.event.stopImmediatePropagation();\n\t\t\t\td3.event.preventDefault();\n\t\t\t\tthis.dispatchEvent('termsClicked', this, ['\"'+data.source.term+' '+data.target.term+'\"~'+this.getApiParam('context')]);\n\t\t\t}.bind(me))\n//\t\t\t.style('fill', 'none')\n\t\t\t.style('cursor', 'pointer')\n\t\t\t.style('stroke-width', function(d) {\n\t\t\t\tif (me.getNetworkMode() === me.DEFAULT_MODE) {\n\t\t\t\t\treturn Math.max(1, Math.min(15, Math.sqrt(d.value)));\n\t\t\t\t} else {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\tthis.setLinks(linkEnter.merge(link));\n\n    \tvar node = this.getNodes().data(nodeData, function(d) { return d.id; });\n    \tnode.exit().remove();\n    \tvar nodeEnter = node.enter().append('g')\n\t\t\t.attr('class', function(d) { return 'node '+d.type; })\n\t\t\t.attr('id', function(d) { return d.id; })\n\t\t\t.on('mouseover', me.nodeMouseOver.bind(me))\n\t\t\t.on('mouseout', me.nodeMouseOut.bind(me))\n\t\t\t.on('click', function(data) {\n\t\t\t\td3.event.stopImmediatePropagation();\n\t\t\t\td3.event.preventDefault();\n\t\t\t\tthis.dispatchEvent('termsClicked', this, [data.term]);\n\t\t\t}.bind(me))\n\t\t\t.on('dblclick', function(data) {\n\t\t\t\td3.event.stopImmediatePropagation();\n\t\t\t\td3.event.preventDefault();\n\t\t\t\tthis.fetchCollocatesForNode(data);\n\t\t\t}.bind(me))\n\t\t\t.on('contextmenu', function(d, i) {\n\t\t\t\td3.event.preventDefault();\n//\t\t\t\tme.getTip().hide();\n\t\t\t\tvar menu = me.getContextMenu();\n\t\t\t\tmenu.queryById('label').setHtml(d.term);\n    \t\t\tmenu.queryById('fixed').setChecked(d.fixed);\n\t\t\t\tmenu.showAt(d3.event.pageX+10, d3.event.pageY-50);\n\t\t\t})\n\t\t\t.call(d3.drag()\n\t\t\t\t.on('start', function(d) {\n\t\t\t\t\tme.setDragging(true);\n\t\t\t\t\tif (!d3.event.active) me.getVisLayout().alpha(0.3).restart();\n\t\t\t\t\td.fx = d.x;\n\t\t\t\t\td.fy = d.y;\n\t\t\t\t\td.fixed = true;\n\t\t\t\t})\n\t\t\t\t.on('drag', function(d) {\n\t\t\t\t\tme.getVisLayout().alpha(0.3); // don't let simulation end while the user is dragging\n\t\t\t\t\td.fx = d3.event.x;\n\t\t\t\t\td.fy = d3.event.y;\n\t\t\t\t\tif (me.isMasked()) {\n\t\t\t    \t\tif (!me.isOffCanvas(d3.event.x, d3.event.y)) {\n\t\t\t    \t\t\tme.unmask();\n\t\t\t    \t\t}\n\t\t\t    \t} else if (me.isOffCanvas(d3.event.x, d3.event.y)) {\n\t\t\t    \t\tme.mask(me.localize('releaseToRemove'));\n\t\t\t    \t}\n\t\t\t\t})\n\t\t\t\t.on('end', function(d) {\n\t\t\t\t\tme.setDragging(false);\n//\t\t\t\t\tif (!d3.event.active) me.getVisLayout().alpha(0);\n\t\t\t\t\tif (d.fixed != true) {\n\t\t\t\t\t\td.fx = null;\n\t\t\t\t\t\td.fy = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (me.isOffCanvas(d3.event.x, d3.event.y)) {\n\t    \t    \t\tme.unmask();\n\t    \t    \t\tme.mask(me.localize('cleaning'));\n\t    \t    \t\tme.removeNode(d.id);\n\t    \t    \t\tme.unmask();\n\t    \t    \t}\n\t\t\t\t})\n\t\t\t);\n    \t\n    \tnodeEnter.append('title').text(function(d) { return d.title; });\n    \t\n    \tif (this.getNetworkMode() === this.DEFAULT_MODE) {\n    \t\tnodeEnter.append('rect')\n\t\t\t\t.style('stroke-width', 1)\n\t\t\t\t.style('stroke-opacity', 1);\n    \t} else {\n    \t\tnodeEnter.filter(function(d) { return d.type === 'keyword'; }).append('circle')\n    \t\t\t.style('stroke-width', 1)\n    \t\t\t.style('stroke-opacity', 1);\n    \t}\n    \t\n    \tnodeEnter.append('text')\n\t\t\t.attr('font-family', function(d) { return me.getApplication().getCategoriesManager().getFeatureForTerm('font', d.term); })\n\t\t\t.attr('font-size', function(d) { return Math.max(10, Math.sqrt(d.value)); })\n\t\t\t.text(function(d) { return d.term; })\n\t\t\t.each(function(d) { d.bbox = this.getBBox(); }) // set bounding box for later use\n\t\t\t.style('cursor', 'pointer')\n\t\t\t.style('user-select', 'none')\n\t\t\t.attr('dominant-baseline', 'middle');\n    \t\n    \tthis.setNodes(nodeEnter.merge(node));\n    \t\n    \tif (this.getNetworkMode() === this.DEFAULT_MODE) {\n\t    \tthis.getVis().selectAll('rect')\n\t    \t\t.attr('width', function(d) { return d.bbox.width+16; })\n\t\t\t\t.attr('height', function(d) { return d.bbox.height+8; })\n\t\t\t\t.attr('rx', function(d) { return Math.max(2, d.bbox.height * 0.2); })\n\t\t\t\t.attr('ry', function(d) { return Math.max(2, d.bbox.height * 0.2); })\n\t\t\t\t.call(this.applyNodeStyle.bind(this));\n\t    \tthis.getVis().selectAll('text')\n\t\t    \t.attr('dx', 8)\n\t\t\t\t.attr('dy', function(d) { return d.bbox.height*0.5+4; });\n    \t} else {\n    \t\tthis.getVis().selectAll('circle')\n    \t\t\t.attr('r', function(d) { return Math.min(150, d.bbox.width); })\n    \t\t\t.call(this.applyNodeStyle.bind(this));\n    \t\tthis.getVis().selectAll('text')\n\t\t    \t.attr('dx', function(d) {\n\t\t    \t\tif (d.type === 'keyword') {\n\t\t    \t\t\treturn -d.bbox.width*0.5;\n\t\t\t    \t} else {\n\t\t\t    \t\treturn 8;\n\t\t\t    \t}\n\t    \t\t})\n\t\t\t\t.attr('dy', function(d) {\n\t\t\t\t\tif (d.type === 'keyword') {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn d.bbox.height*0.5+4;\n\t\t\t\t\t}\n\t\t\t\t});\n    \t}\n    \tthis.getVis().selectAll('line').call(this.applyLinkStyle.bind(this));\n    \t\n    \t\n    \tthis.getVisLayout().nodes(nodeData);\n    \tthis.getVisLayout().force('link').links(linkData);\n    \tthis.getVisLayout().alpha(1).restart();\n    },\n    \n    isOffCanvas: function(x, y) {\n    \tvar vis = Ext.get(this.getVisId());\n    \treturn x < 0 || y < 0 || x > vis.getWidth() || y > vis.getHeight();\n    },\n    \n    zoomToFit: function(paddingPercent, transitionDuration) {\n    \tvar bounds = this.getVis().node().getBBox();\n    \tvar width = bounds.width;\n    \tvar height = bounds.height;\n    \tvar midX = bounds.x + width/2;\n    \tvar midY = bounds.y + height/2;\n    \tvar svg = this.getVis().node().parentElement;\n    \tvar svgRect = svg.getBoundingClientRect();\n    \tvar fullWidth = svgRect.width;\n    \tvar fullHeight = svgRect.height;\n    \tvar scale = (paddingPercent || 0.8) / Math.max(width/fullWidth, height/fullHeight);\n    \tvar translate = [fullWidth/2 - scale*midX, fullHeight/2 - scale*midY];\n    \tif (width<1) {return} // FIXME: something strange with spyral\n     \t\n    \td3.select(svg)\n    \t\t.transition()\n    \t\t.duration(transitionDuration || 500)\n    \t\t.call(this.getZoom().transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n    },\n \n    applyNodeStyle: function(sel, nodeState) {\n\t\tvar state = nodeState === undefined ? 'normal' : nodeState;\n    \tsel.style('fill', function(d) { var type = d.type+'Node'; return this.getGraphStyle()[type][state].fill; }.bind(this));\n    \tsel.style('stroke', function(d) { var type = d.type+'Node'; return this.getGraphStyle()[type][state].stroke; }.bind(this));\n    },\n    \n    applyLinkStyle: function(sel, linkState) {\n    \tvar state = linkState === undefined ? 'normal' : linkState;\n    \tsel.style('stroke', function(d) { return this.getGraphStyle().link[state].stroke; }.bind(this));\n    \tsel.style('stroke-opacity', function(d) { return this.getGraphStyle().link[state].strokeOpacity; }.bind(this));\n    },\n    \n    linkMouseOver: function(d) {\n    \tthis.getVis().selectAll('line').call(this.applyLinkStyle.bind(this));\n    \tthis.getVis().select('#'+d.id).call(this.applyLinkStyle.bind(this), 'highlight');\n    },\n    \n    linkMouseOut: function(d) {\n    \tthis.getVis().selectAll('line').call(this.applyLinkStyle.bind(this));\n    },\n    \n    nodeMouseOver: function(d) {\n    \tthis.setCurrentNode(d);\n\t\t\n\t\tthis.getVis().selectAll('rect').call(this.applyNodeStyle.bind(this));\n\t\t\n\t\tthis.getLinks().each(function(link) {\n\t\t\tvar id;\n\t\t\tif (link.source.id == d.id) {\n\t\t\t\tid = link.target.id;\n\t\t\t} else if (link.target.id == d.id) {\n\t\t\t\tid = link.source.id;\n\t\t\t}\n\t\t\tif (id !== undefined) {\n\t\t\t\tthis.getVis().select('#'+id+' rect').call(this.applyNodeStyle.bind(this), 'highlight');\n\t\t\t\tthis.getVis().select('#'+link.id).call(this.applyLinkStyle.bind(this), 'highlight');\n\t\t\t}\n\t\t}.bind(this));\n\t\t\n\t\tthis.getVis().select('#'+d.id+' rect')\n\t\t\t.style('stroke-width', 3)\n\t\t\t.call(this.applyNodeStyle.bind(this), 'highlight');\n    },\n    \n    nodeMouseOut: function(d) {\n    \tif (!this.getContextMenu().isVisible()) {\n\t\t\tthis.setCurrentNode(undefined);\n\t\t}\n\t\t\n\t\tthis.getVis().selectAll('rect')\n\t\t\t.style('stroke-width', 1)\n\t\t\t.call(this.applyNodeStyle.bind(this));\n\t\t\n\t\tthis.getVis().selectAll('line')\n\t\t\t.call(this.applyLinkStyle.bind(this));\n    },\n    \n    fetchCollocatesForNode: function(d) {\n    \tvar limit = this.getApiParam('limit');\n    \tvar query = this.getApiParam(\"query\");\n    \t\n    \tvar query = Ext.Array.from(this.getApiParam(\"query\"));\n    \tExt.Array.include(query, d.term)\n\t\tthis.setApiParam(\"query\", query);\n\n    \tvar corpusCollocates = this.getCorpus().getCorpusCollocates({autoLoad: false});\n    \tcorpusCollocates.load({\n    \t\tparams: Ext.apply(this.getApiParams(), {query: d.term, start: d.start, limit: limit}),\n    \t\tcallback: function(records, operation, success) {\n    \t\t\tif (success) {\n    \t\t\t\tthis.updateDataForNode(d.id, {\n    \t\t\t\t\tstart: d.start+limit\n    \t\t\t\t});\n    \t    \t\t\n    \t    \t\tthis.loadFromCorpusCollocateRecords(records, d.id);\n    \t\t\t}\n    \t\t},\n    \t\tscope: this\n    \t});\n    }\n    \n});","Ext.define('Voyant.panel.Contexts', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\trequires: ['Voyant.data.store.Contexts'],\n\talias: 'widget.contexts',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tquery: undefined,\n    \t\tdocId: undefined,\n    \t\tdocIndex: undefined,\n    \t\tstopList: 'auto',\n    \t\tcontext: 5,\n    \t\texpand: 50\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n    constructor: function() {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        Ext.apply(me, { \n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : Ext.create(\"Voyant.data.store.ContextsBuffered\", {\n            \tparentPanel: this,\n            \tproxy: {\n            \t\textraParams: {\n                    \tstripTags: \"all\"            \t\t\t\n            \t\t}\n            \t}\n//            \tsortOnLoad: true,\n//            \tsorters: {\n//                    property: 'position',\n//                    direction: 'ASC'\n//            \t}\n            }),\n    \t\tselModel: {\n    \t\t\ttype: 'rowmodel',\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tthis.getApplication().dispatchEvent('termLocationClicked', this, selections);\n                    \t},\n                    \tscope: this\n                    }\n                }\n            },\n            plugins: [{ // the expander slider assumes there's only one plugin, needs to be updated if changed\n                ptype: 'rowexpander',\n                rowBodyTpl : new Ext.XTemplate('')\n            }],\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                }, this.localize('context'), {\n                \txtype: 'slider',\n                \tminValue: 5,\n                \tvalue: 5,\n                \tmaxValue: 50,\n                \tincrement: 5,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(me.getApiParam('context'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tme.setApiParam(\"context\", slider.getValue());\n           \t\t        \tme.getStore().clearAndLoad({params: me.getApiParams()});\n                \t\t}\n                \t}\n                }, this.localize('expand'), {\n                \txtype: 'slider',\n                \tminValue: 5,\n                \tvalue: 5,\n                \tmaxValue: 500,\n                \tincrement: 10,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(me.getApiParam('expand'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tme.setApiParam('expand', newValue);\n                \t\t\tvar view = me.getView();\n                \t\t\tvar recordsExpanded = me.plugins[0].recordsExpanded;\n                \t\t\tvar store = view.getStore();\n                \t\t\tfor (var id in recordsExpanded) {\n                \t\t\t\tvar record = store.getByInternalId(id);\n            \t\t\t\t\tvar row = view.getRow(record);\n            \t\t\t\t\tvar expandRow = row.parentNode.childNodes[1];\n                \t\t\t\tif (recordsExpanded[id]) {\n                \t\t\t\t\tview.fireEvent(\"expandbody\", row, record, expandRow, {force: true});\n                \t\t\t\t} else {\n                \t\t\t\t\tExt.fly(expandRow).down('.x-grid-rowbody').setHtml('');\n                \t\t\t\t}\n                \t\t\t}\n                \t\t}\n                \t}\n                },{\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}]\n            }],\n    \t\tcolumns: [{\n    \t\t\ttext: this.localize(\"document\"),\n    \t\t\ttoolTip: this.localize(\"documentTip\"),\n                width: 'autoSize',\n        \t\tdataIndex: 'docIndex',\n                sortable: true,\n                renderer: function (value, metaData, record, rowIndex, colIndex, store) {\n                \treturn store.getCorpus().getDocument(value).getTinyLabel();\n                }\n            },{\n    \t\t\ttext: this.localize(\"left\"),\n    \t\t\ttooltip: this.localize(\"leftTip\"),\n    \t\t\talign: 'right',\n        \t\tdataIndex: 'left',\n                sortable: true,\n                flex: 1\n            },{\n    \t\t\ttext: this.localize(\"term\"),\n    \t\t\ttooltip: this.localize(\"termTip\"),\n        \t\tdataIndex: 'term',\n                sortable: true,\n                width: 'autoSize'\n            },{\n    \t\t\ttext: this.localize(\"right\"),\n    \t\t\ttooltip: this.localize(\"rightTip\"),\n        \t\tdataIndex: 'right',\n                sortable: true,\n                flex: 1\n            },{\n    \t\t\ttext: this.localize(\"position\"),\n    \t\t\ttooltip: this.localize(\"positionTip\"),\n        \t\tdataIndex: 'position',\n                sortable: true,\n                hidden: true,\n                flex: 1\n            }],\n            listeners: {\n            \tscope: this,\n\t\t\t\tcorpusSelected: function() {\n\t\t\t\t\tif (this.getStore().getCorpus()) {\n\t\t\t\t\t\tthis.setApiParams({docId: undefined, docIndex: undefined})\n\t\t\t\t\t\tthis.getStore().clearAndLoad()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tdocumentsSelected: function(src, docs) {\n\t\t\t\t\tvar docIds = [];\n\t\t\t\t\tvar corpus = this.getStore().getCorpus();\n\t\t\t\t\tdocs.forEach(function(doc) {\n\t\t\t\t\t\tdocIds.push(corpus.getDocument(doc).getId())\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.setApiParams({docId: docIds, docIndex: undefined})\n\t\t\t\t\tthis.getStore().clearAndLoad()\n\t\t\t\t},\n\n            \tdocumentSegmentTermClicked: {\n\t           \t\t fn: function(src, documentSegmentTerm) {\n\t           \t\t\t if (!documentSegmentTerm.term) {return;}\n\t           \t\t\t params = {query: documentSegmentTerm.term};\n\t           \t\t\t if (documentSegmentTerm.docId) {\n\t           \t\t\t\t params.docId = documentSegmentTerm.docId;\n\t           \t\t\t }\n\t           \t\t\t else {\n\t           \t\t\t\t // default to first document\n\t           \t\t\t\t params.docIndex = documentSegmentTerm.docIndex ?  documentSegmentTerm.docIndex : 0;\n\t           \t\t\t }\n\t           \t\t\t this.setApiParams(params);\n\t       \t        \tif (this.isVisible()) {\n\t       \t\t        \tthis.getStore().clearAndLoad()\n\t       \t        \t}\n\t           \t\t },\n\t           \t\t scope: this\n            \t},\n\t           \t documentIndexTermsClicked: {\n\t           \t\t fn: function(src, documentIndexTerms) {\n\t           \t\t\t// this isn't quite right, since we want every term associated with a docIndex, but for now it will do\n\t           \t\t\tvar queriesHash = {};\n\t           \t\t\tvar queries = [];\n\t           \t\t\tvar docIndexHash = {};\n\t           \t\t\tvar docIndex = [];\n\t           \t\t\tdocumentIndexTerms.forEach(function(item) {\n\t           \t\t\t\tif (!queriesHash[item.term]) {\n\t           \t\t\t\t\tqueries.push(item.term);\n\t           \t\t\t\t\tqueriesHash[item.term]=true;\n\t           \t\t\t\t}\n\t           \t\t\t\tif (!docIndexHash[item.docIndex]) {\n\t           \t\t\t\t\tdocIndex.push(item.docIndex);\n\t           \t\t\t\t\tdocIndexHash[item.docIndex]=true;\n\t           \t\t\t\t}\n\t           \t\t\t});\n\t       \t        \tthis.setApiParams({\n\t       \t        \t\tdocId: undefined,\n\t       \t        \t\tdocIndex: docIndex,\n\t       \t        \t\tquery: queries\n\t       \t        \t});\n\t       \t        \tif (this.isVisible()) {\n\t       \t\t        \tthis.getStore().clearAndLoad({params: this.getApiParams()});\n\t       \t        \t}\n\t           \t\t },\n\t           \t\t scope: this\n\t           \t },\n                 afterrender: function(me) {\n                \t me.getView().on('expandbody', function( rowNode, record, expandRow, eOpts ) {\n                \t\t if (expandRow.textContent===\"\" || (eOpts && eOpts.force)) {\n                \t            var store = Ext.create(\"Voyant.data.store.Contexts\", {\n                \t            \tstripTags: \"all\",\n                \t            \tcorpus: me.getStore().getCorpus()\n                \t            });\n                \t            var data = record.getData();\n                \t            store.load({\n                \t            \tparams: {\n                    \t            \tquery: data.query,\n                    \t            \tdocIndex: data.docIndex,\n                    \t            \tposition: data.position,\n                    \t            \tlimit: 1,\n                    \t            \tcontext: me.getApiParam('expand')\n                \t            \t},\n                \t                callback: function(records, operation, success) {\n                \t                \tif (success && records.length==1) {\n                \t                \t\tdata = records[0].getData();\n                \t                \t\tExt.fly(operation.expandRow).down('.x-grid-rowbody').setHtml(data.left + \" <span class='word keyword'>\" + data.middle + \"</span> \" + data.right);\n                \t                \t}\n                \t                },\n                \t                expandRow: expandRow\n                \t            });\n                \t            \n                \t\t }\n                \t });\n                 }\n\n            }\n        });\n        \n        me.on(\"loadedCorpus\", function(src, corpus) {\n        \tif (this.hasCorpusAccess(corpus)==false) {\n        \t\tthis.mask(this.localize('limitedAccess'), 'mask-no-spinner');\n        \t}\n        \telse {\n        \t\tvar corpusTerms = corpus.getCorpusTerms({autoLoad: false});\n        \t\tcorpusTerms.load({\n        \t\t    callback: function(records, operation, success) {\n        \t\t    \tif (success && records.length>0) {\n        \t\t    \t\tthis.setApiParam(\"query\", [records[0].getTerm()]);\n        \t\t    \t\tthis.getStore().clearAndLoad({params: this.getApiParams()});\n        \t\t    \t}\n        \t\t    },\n        \t\t    scope: me,\n        \t\t    params: {\n        \t\t\t\tlimit: 1,\n        \t\t\t\tquery: this.getApiParam(\"query\"),\n        \t\t\t\tstopList: this.getApiParam(\"stopList\"),\n        \t\t\t\tforTool: 'contexts'\n        \t\t\t}\n            \t});\n        \t}\n        });\n        \n        me.on(\"query\", function(src, query) {\n        \tthis.setApiParam('query', query);\n        \tthis.getStore().clearAndLoad({params: this.getApiParams()});\n        }, me);\n        \n        me.on(\"documentTermsClicked\", function(src, documentTerms) {\n        \tvar documentIndexTerms = [];\n        \tdocumentTerms.forEach(function(documentTerm) {\n        \t\tdocumentIndexTerms.push({\n        \t\t\tterm: documentTerm.getTerm(),\n        \t\t\tdocIndex: documentTerm.getDocIndex()\n        \t\t});\n        \t});\n        \tthis.fireEvent(\"documentIndexTermsClicked\", this, documentIndexTerms);\n        });\n        \n        me.on(\"termsClicked\", function(src, terms) {\n        \tvar documentIndexTerms = [];\n        \tif (Ext.isString(terms)) {terms = [terms];}\n        \tterms.forEach(function(term) {\n        \t\tif (term.docIndex !== undefined) {\n            \t\tdocumentIndexTerms.push({\n            \t\t\tterm: term.term,\n            \t\t\tdocIndex: term.docIndex\n            \t\t});\n        \t\t}\n        \t});\n        \tif (documentIndexTerms.length > 0) {\n        \t\tthis.fireEvent(\"documentIndexTermsClicked\", this, documentIndexTerms);\n        \t}\n        });\n\n    \tme.callParent(arguments);\n     }\n     \n});","Ext.define('Voyant.panel.CorpusCollocates', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.corpuscollocates',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tcontext: 5,\n    \t\tquery: undefined,\n    \t\tdocId: undefined,\n    \t\tdocIndex: undefined,\n    \t\tsort: 'contextTermRawFreq'\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n    constructor: function(config) {\n    \t\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.isVisible()) {\n    \t\t\tthis.loadFromApis();\n    \t\t}\n    \t});\n    \t\n    \tif (config.embedded) {\n//    \t\tvar cls = Ext.getClass(config.embedded).getName();\n//    \t\tif (cls==\"Voyant.data.store.DocumentTerms\" || cls==\"Voyant.data.model.Document\") {\n//    \t\t\tthis.fireEvent('loadedCorpus', this, config.embedded.getCorpus())\n//    \t\t}\n    \t}\n    \telse if (config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus)\n    \t}\n    \t\n    \tthis.on(\"corpusTermsClicked\", function(src, terms) {\n    \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n        \t\tvar query = [];\n        \t\tterms.forEach(function(term) {\n        \t\t\tquery.push(term.get(\"term\"));\n        \t\t})\n        \t\tthis.setApiParams({\n        \t\t\tquery: query,\n        \t\t\tdocId: undefined,\n        \t\t\tdocIndex: undefined\n        \t\t});\n        \t\tif (this.isVisible()) {\n            \t\tthis.loadFromApis();\n        \t\t}\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"documentsClicked\", function(src, documents) {\n    \t\tvar docIds = [];\n    \t\tdocuments.forEach(function(doc) {docIds.push(doc.get('id'))});\n    \t\tthis.setApiParams({\n    \t\t\tdocId: docIds,\n    \t\t\tdocid: undefined,\n    \t\t\tquery: undefined\n    \t\t})\n    \t\tif (this.isVisible()) {\n        \t\tthis.loadFromApis();\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {this.loadFromApis()}\n    \t}, this)\n    \t\n    \tthis.on(\"query\", function(src, query) {\n    \t\tthis.setApiParam(\"query\", query);\n    \t\tthis.getStore().getProxy().setExtraParam(\"query\", query);\n    \t\tthis.loadFromApis();\n    \t}, this)\n    },\n    \n    loadFromApis: function() {\n    \tif (this.getStore().getCorpus()) {\n    \t\tif (this.getApiParam('query')) {\n    \t\t\tthis.getStore().clearAndLoad({params: this.getApiParams()});\n    \t\t}\n    \t\telse {\n\t\t\t\tvar corpusTerms = this.getStore().getCorpus().getCorpusTerms({\n\t\t\t\t\tleadingBufferZone: 0,\n\t\t\t\t\tautoLoad: false\n\t\t\t\t});\n        \t\tcorpusTerms.load({\n        \t\t    callback: function(records, operation, success) {\n        \t\t    \tif (success) {\n        \t\t    \t\tvar terms = [];\n        \t\t    \t\trecords.forEach(function(term) {\n        \t\t    \t\t\tterms.push(term.getTerm());\n        \t\t    \t\t})\n        \t\t    \t\tthis.getStore().getProxy().setExtraParam(\"query\", terms);\n        \t\t    \t\tthis.setApiParam('query', terms);\n        \t\t    \t\tthis.loadFromApis();\n        \t\t    \t}\n        \t\t    },\n        \t\t    scope: this,\n        \t\t    params: {\n        \t\t\t\tlimit: 10,\n        \t\t\t\tstopList: this.getApiParam(\"stopList\")\n        \t\t\t}\n            \t});\n\n    \t\t}\n    \t}\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        var store = Ext.create(\"Voyant.data.store.CorpusCollocatesBuffered\", {parentPanel: this});\n        \n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : store,\n    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tvar terms = [];\n                    \t\tvar context = this.getApiParam(\"context\")\n                    \t\tselections.forEach(function(selection) {\n                    \t\t\tterms.push('\"'+selection.getKeyword()+\" \"+selection.getContextTerm()+'\"~'+context)\n                    \t\t})\n                    \t\tthis.getApplication().dispatchEvent('termsClicked', this, terms);\n                    \t},\n                    \tscope: this\n                    }\n                }\n            }),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                }, this.localize('context'), {\n                \txtype: 'slider',\n                \tminValue: 1,\n                \tvalue: 5,\n                \tmaxValue: 30,\n                \tincrement: 2,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(me.getApiParam('context'))\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tme.setApiParam(\"context\", slider.getValue());\n\t\t\t\t\t\t\tme.loadFromApis();\n                \t\t}\n                \t}\n                },{\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}]\n            }],\n    \t\tcolumns: [{\n    \t\t\ttext: this.localize(\"term\"),\n        \t\tdataIndex: 'term',\n            \ttooltip: this.localize(\"termTip\"),\n                sortable: true,\n                flex: 1\n            },{\n    \t\t\ttext: this.localize(\"rawFreq\"),\n        \t\tdataIndex: 'rawFreq',\n            \ttooltip: this.localize(\"termRawFreqTip\"),\n                sortable: true,\n                width: 'autoSize',\n                hidden: true\n            },{\n            \ttext: this.localize(\"contextTerm\"),\n            \tdataIndex: 'contextTerm',\n            \ttooltip: this.localize(\"contextTermTip\"),\n            \tflex: 1,\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"contextTermRawFreq\"),\n            \ttooltip: this.localize(\"contextTermRawFreqTip\"),\n            \tdataIndex: 'contextTermRawFreq',\n            \twidth: 'autoSize',\n            \tsortable: true\n            }/*,{\n                xtype: 'widgetcolumn',\n                text: this.localize(\"trend\"),\n                tooltip: this.localize('trendTip'),\n                width: 120,\n                dataIndex: 'distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                }\n            }*/],\n            \n            listeners: {\n\t\t\t\tscope: this,\n            \ttermsClicked: function(src, terms) {\n\t\t\t\t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n\t\t\t\t\t\tvar queryTerms = [];\n\t\t\t\t\t\tterms.forEach(function(term) {\n\t\t\t\t\t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n\t\t\t\t\t\t\telse if (term.term) {queryTerms.push(term.term);}\n\t\t\t\t\t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (queryTerms.length > 0) {\n\t\t\t\t\t\t\tthis.setApiParams({\n\t\t\t\t\t\t\t\tdocIndex: undefined,\n\t\t\t\t\t\t\t\tdocId: undefined,\n\t\t\t\t\t\t\t\tquery: queryTerms\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (this.isVisible()) {\n\t\t\t\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tcorpusSelected: function() {\n\t\t\t\t\tif (this.getStore().getCorpus()) {\n\t\t\t\t\t\tthis.setApiParams({docId: undefined, docIndex: undefined})\n\t\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tdocumentsSelected: function(src, docs) {\n\t\t\t\t\tvar docIds = [];\n\t\t\t\t\tvar corpus = this.getStore().getCorpus();\n\t\t\t\t\tdocs.forEach(function(doc) {\n\t\t\t\t\t\tdocIds.push(corpus.getDocument(doc).getId())\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.setApiParams({docId: docIds, docIndex: undefined});\n\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t}\n            }\n        });\n\n        me.callParent(arguments);\n        \n        me.getStore().getProxy().setExtraParam(\"withDistributions\", true);\n        \n    }\n    \n})","Ext.define('Voyant.widget.CorpusTermSummary', {\n    extend: 'Ext.panel.Panel',\n    mixins: ['Voyant.panel.Panel'],\n    alias: 'widget.corpustermsummary',\n    statics: {\n        i18n: {\n        },\n        api: {\n            stopList: 'auto',\n            query: undefined,\n            limit: 5\n        }\n    },\n    config: {\n        corpus: undefined,\n        record: undefined, // Voyant.data.model.CorpusTerm\n        collocatesStore: undefined,\n        correlationsStore: undefined,\n        phrasesStore: undefined,\n        documentTermsStore: undefined\n    },\n    cls: 'corpus-term-summary',\n\n    constructor: function(config) {\n        if (config.record === undefined) {\n            console.warn('CorpusTermSummary: no config.record!');\n            return false;\n        }\n        \n        Ext.apply(this, {\n            items: {\n                itemId: 'main',\n                minHeight: 200,\n                scrollable: true,\n                margin: 5\n            },\n            dockedItems: {\n                dock: 'bottom',\n                xtype: 'toolbar',\n                items: {\n                    fieldLabel: this.localize('items'),\n                    labelWidth: 40,\n                    width: 120,\n                    xtype: 'slider',\n                    increment: 5,\n                    minValue: 5,\n                    maxValue: 59,\n                    listeners: {\n                        boxready: function(slider) {\n                            slider.setValue(this.getApiParam('limit'));\n                        },\n                        changecomplete: function(slider, newvalue) {\n                            this.setApiParam('limit', newvalue);\n                            this.loadStuff();\n                        },\n                        scope: this\n                    }\n                }\n            },\n            listeners: {\n                boxready: function() {\n                    this.body.on('click', function(e) {\n                        var target = e.getTarget(null, null, true);\n                        if (target && target.dom.tagName == 'A') {\n                            if (target.hasCls('corpus-type')) {\n                                this.dispatchEvent('termsClicked', this, [target.getHtml()]);\n                            }\n                        }\n                    }, this, {stopPropagation: true});\n                    \n                    this.getDockedItems().forEach(function(i) {\n                       i.getEl().on('click', null, this, {stopPropagation: true}); // stop owner container from receiving clicks\n                    });\n                    \n                    this.loadStuff();\n                },\n                scope: this\n            }\n        });\n        \n        Ext.applyIf(config, {\n            title: this.localize('title')+config.record.getTerm()\n        });\n\n        this.callParent(arguments);\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n        \n        var corpus = this.getRecord().store.getCorpus();\n        this.setCorpus(corpus);\n\n        this.setApiParam('query', this.getRecord().getTerm());\n        \n        this.setCollocatesStore(Ext.create('Voyant.data.store.CorpusCollocates', { corpus: corpus }));\n        this.setCorrelationsStore(Ext.create('Voyant.data.store.TermCorrelations', { corpus: corpus }));\n        this.setPhrasesStore(Ext.create('Voyant.data.store.CorpusNgrams', { corpus: corpus }));\n        this.setDocumentTermsStore(Ext.create('Voyant.data.store.DocumentTerms', { corpus: corpus }));\n        \n    },\n\n    loadStuff: function() {\n        this.getComponent('main').removeAll();\n        \n        var docIndexes = [];\n        for (var i = 0; i < this.getCorpus().getDocumentsCount(); i++) {\n            docIndexes[i] = i;\n        }\n        this.getComponent('main').add({\n            xtype: 'container',\n            cls: 'section',\n            layout: 'hbox',\n            align: 'bottom',\n            items: [{\n                xtype: 'container',\n                html: '<div class=\"header\">'+this.localize('distribution')+'</div>'\n            },{\n                itemId: 'distLine',\n                xtype: 'sparklineline',\n                values: [],\n                height: 20,\n                width: 200\n            }],\n            listeners: {\n                afterrender: function(container) {\n                    container.mask(this.localize('loading'));\n                    // TODO make distribution bins reflective of doc sizes\n                    this.getDocumentTermsStore().load({\n                        params: {\n                            query: this.getApiParam('query'),\n                            docIndex: docIndexes,\n                            withDistributions: true,\n                            bins: parseInt(this.getApiParam('limit'))*2\n                        },\n                        callback: function(records, op, success) {\n                            if (success && records && records.length>0) {\n                                var arrays = records.map(function(r) { return r.getDistributions(); });\n                                var values = arrays.reduce(function(a,b) { return a.concat(b); });\n                                this.down('#distLine').setValues(values);\n                                container.unmask();\n                            }\n                        },\n                        scope: this\n                    });\n                },\n                scope: this\n            }\n        });\n        \n        this.addSection(\n            this.localize('collocates'), this.getCollocatesStore(), this.getApiParams(),\n            '<tpl for=\".\" between=\"; \"><a href=\"#\" onclick=\"return false\" class=\"corpus-type keyword\" voyant:recordId=\"{term}\">{term}</a><span style=\"font-size: smaller\"> ({val})</span></tpl>',\n            function(r) {\n                return {term: r.getContextTerm(), val: r.getContextTermRawFreq()}\n            }\n        );\n        \n        this.addSection(\n            this.localize('correlations'), this.getCorrelationsStore(), this.getApiParams(),\n            '<tpl for=\".\" between=\"; \"><a href=\"#\" onclick=\"return false\" class=\"corpus-type keyword\" voyant:recordId=\"{term}\">{term}</a><span style=\"font-size: smaller\"> ({val})</span></tpl>',\n            function(r) {\n                return {term: r.get('source-term'), val: r.get('source').rawFreq}\n            }\n        );\n        \n        this.addSection(\n            this.localize('phrases'), this.getPhrasesStore(), Ext.apply({minLength: 3, sort: 'length'}, this.getApiParams()),\n            '<tpl for=\".\"><div>&ldquo;{phrase}&rdquo;</div></tpl>',\n            function(r) {\n                return {phrase: r.getTerm()}\n            }\n        );\n    },\n    \n    addSection: function(title, store, params, template, mapping) {\n        return this.getComponent('main').add({\n            xtype: 'container',\n            html: '<div class=\"header\">'+title+'</div>',\n            cls: 'section',\n            listeners: {\n                afterrender: function(container) {\n                    container.mask(this.localize('loading'));\n                    store.load({\n                        params: params,\n                        callback: function(records, op, success) {\n                            if (success && records && records.length>0) {\n                                container.unmask();\n                                Ext.dom.Helper.append(container.getTargetEl().first().first(),\n                                    new Ext.XTemplate('<div class=\"contents\">'+template+'</div>').apply(records.map(mapping))\n                                );\n                            }\n                        }\n                    });\n                },\n                scope: this\n            }\n        });\n    }\n});\n","Ext.define('Voyant.panel.Correlations', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.correlations',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tquery: undefined,\n    \t\tdocId: undefined,\n    \t\tdocIndex: undefined,\n    \t\tstopList: 'auto',\n    \t\tminInDocumentsCountRatio: 100\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \toptions: [{\n    \t\txtype: 'stoplistoption'\n    \t},\n        \t{xtype: 'categoriesoption'}\n        ]\n    },\n    constructor: function() {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        Ext.apply(me, { \n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n    \t\tstore: Ext.create(\"Voyant.data.store.TermCorrelationsBuffered\", {\n            \tparentPanel: this\n\t        }),\n\n    \t\tcolumns: [{\n    \t\t\ttext: this.localize(\"source\"),\n    \t\t\ttooltip: this.localize(\"sourceTip\"),\n        \t\tdataIndex: 'source-term',\n        \t\tsortable: false\n    \t\t},{\n                xtype: 'widgetcolumn',\n                tooltip: this.localize(\"trendTip\"),\n                width: 100,\n                dataIndex: 'source-distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                },\n                text: '\u2190'\n            },{\n                xtype: 'widgetcolumn',\n                tooltip: this.localize(\"trendTip\"),\n                width: 100,\n                dataIndex: 'target-distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                },\n                text: '\u2192',\n                align: 'right'\n            },{\n    \t\t\ttext: this.localize(\"target\"),\n    \t\t\ttooltip: this.localize(\"targetTip\"),\n        \t\tdataIndex: 'target-term',\n        \t\tsortable: false\n    \t\t},{\n    \t\t\ttext: this.localize(\"correlation\"),\n    \t\t\ttooltip: this.localize(\"correlationTip\"),\n        \t\tdataIndex: 'correlation'\n    \t\t},{\n    \t\t\ttext: this.localize(\"significance\"),\n    \t\t\ttooltip: this.localize(\"significanceTip\"),\n        \t\tdataIndex: 'significance'\n    \t\t}],\n    \t\t\n\n            listeners: {\n            \tscope: this,\n\t\t\t\tcorpusSelected: function() {\n\t\t\t\t\tthis.setApiParams({docIndex: undefined, docId: undefined});\n\t        \t\tthis.getStore().getProxy().setExtraParam('tool', 'corpus.CorpusTermCorrelations');\n\t        \t\tthis.getStore().load();\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\tdocumentsSelected: function(src, docs) {\n\t\t\t\t\tvar docIds = [];\n\t\t\t\t\tvar corpus = this.getStore().getCorpus();\n\t\t\t\t\tdocs.forEach(function(doc) {\n\t\t\t\t\t\tdocIds.push(corpus.getDocument(doc).getId())\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.setApiParams({docId: docIds, docIndex: undefined})\n\t        \t\tthis.getStore().getProxy().setExtraParam('tool', 'corpus.DocumentTermCorrelations');\n\t        \t\tthis.getStore().load();\n\t\t\t\t}\n\n            },\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                },{\n                    xtype: 'totalpropertystatus'\n                }, {\n                \txtype: 'tbspacer'\n                }, {\n                \txtype: 'tbtext',\n                \titemId: 'minInDocumentsCountRatioLabel',\n                \ttext: me.localize('minInDocumentsCountRatioLabel')\n                }, {\n        \t\t\txtype: 'slider',\n\t            \tincrement: 5,\n\t            \tminValue: 0,\n\t            \tmaxValue: 100,\n\t            \twidth: 75,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(this.getApiParam(\"minInDocumentsCountRatio\"))\n\t            \t\t\tslider.up('toolbar').getComponent(\"minInDocumentsCountRatioLabel\").setText(new Ext.XTemplate(me.localize(\"minInDocumentsCountRatioLabel\")).apply([this.getApiParam(\"minInDocumentsCountRatio\")]));\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({minInDocumentsCountRatio: newvalue});\n\t            \t\t\tslider.up('toolbar').getComponent(\"minInDocumentsCountRatioLabel\").setText(new Ext.XTemplate(me.localize(\"minInDocumentsCountRatioLabel\")).apply([newvalue]));\n\t            \t\t\tthis.getStore().load();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                },{\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}]\n            }]\n        });\n        \n        me.on(\"loadedCorpus\", function(src, corpus) {\n        \tif (corpus.getDocumentsCount()==1) { // switch to documents mode\n        \t\tthis.getStore().getProxy().setExtraParam('tool', 'corpus.DocumentTermCorrelations');\n        \t}\n        \tif (this.isVisible()) {\n        \t\tthis.getStore().load();\n        \t}\n        });\n        \n    \tme.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {this.getStore().load();}\n    \t}, this)\n\n    \tme.on(\"query\", function(src, query) {\n        \tthis.setApiParam(\"query\", query);\n        \tthis.getStore().load();\n        }, me);\n        \n        me.callParent(arguments);\n     }\n     \n});","Ext.define('Voyant.panel.CorpusCreator', {\n\textend: 'Ext.form.Panel',\n\trequires: ['Ext.form.field.File'],\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.corpuscreator',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tinputFormat: undefined,\n    \t\tlanguage: undefined,\n    \t\txmlDocumentsXpath: undefined,\n    \t\txmlGroupByXpath: undefined,\n    \t\txmlContentXpath: undefined,\n    \t\txmlTitleXpath: undefined,\n    \t\txmlAuthorXpath: undefined,\n    \t\txmlPubDateXpath: undefined,\n    \t\txmlPublisherXpath: undefined,\n    \t\txmlPubPlaceXpath: undefined,\n    \t\txmlKeywordsXpath: undefined,\n    \t\txmlCollectionXpath: undefined,\n    \t\txmlExtraMetadataXpath: undefined,\n    \t\thtmlGroupByQuery: undefined,\n    \t\thtmlDocumentsQuery: undefined,\n    \t\thtmlContentQuery: undefined,\n    \t\thtmlTitleQuery: undefined,\n    \t\thtmlAuthorQuery: undefined,\n    \t\thtmlPubDateQuery: undefined,\n    \t\thtmlPublisherQuery: undefined,\n    \t\thtmlPubPlaceQuery: undefined,\n    \t\thtmlKeywordsQuery: undefined,\n    \t\thtmlCollectionQuery: undefined,\n    \t\thtmlExtraMetadataQuery: undefined,\n    \t\t//jsonGroupByPointer: undefined,\n    \t\tjsonDocumentsPointer: undefined,\n    \t\tjsonContentPointer: undefined,\n    \t\tjsonTitlePointer: undefined,\n    \t\tjsonAuthorPointer: undefined,\n    \t\tjsonPubDatePointer: undefined,\n    \t\tjsonPublisherPointer: undefined,\n    \t\tjsonPubPlacePointer: undefined,\n    \t\tjsonKeywordsPointer: undefined,\n    \t\tjsonCollectionPointer: undefined,\n    \t\tjsonExtraMetadataPointer: undefined,\n    \t\ttokenization: undefined,\n    \t\tadminPassword: undefined,\n    \t\taccessPassword: undefined,\n    \t\tnoPasswordAccess: undefined,\n    \t\ttableDocuments: undefined,\n    \t\ttableContent: undefined,\n    \t\ttableTitle: undefined,\n    \t\ttableAuthor: undefined,\n    \t\ttitle: undefined,\n    \t\tsubTitle: undefined,\n    \t\tinputRemoveFrom: undefined,\n    \t\tinputRemoveFromAfter: undefined,\n    \t\tinputRemoveUntil: undefined,\n    \t\tinputRemoveUntilAfter: undefined,\n    \t\tsort: undefined\n    \t}\n    },\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n        config = config || {};\n        var me = this;\n    \tthis.mixins['Voyant.panel.Panel'].constructor.call(this, \n    \t\t\tExt.apply(config, {\n    \t\t\t\tincludeTools: {\n    \t\t\t\t\tgear: true,\n    \t\t\t\t\thelp: true,\n    \t\t\t\t\tlanguage: this.getLanguageToolMenu()\n    \t\t\t\t}\n    \t\t\t})\n    \t);\n    \t\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\twidth: 800,\n    \t\tframe: true,\n    \t\tpadding: 10,\n    \t\tstyle: {\n    \t\t    borderColor: '#aaa',\n    \t\t    borderStyle: 'solid'\n    \t\t},\n    \t\tframeHeader: true,\n    \t\tlayout: {\n    \t\t\ttype: 'vbox',\n    \t\t\talign: 'stretch'\n    \t\t},\n\t    \tdockedItems: [{\n\t    \t\txtype: 'toolbar',\n                overflowHandler: 'scroller',\n                dock: 'bottom',\n    \t    \tbuttonAlign: 'right',\n//    \t    \tdefaultButtonUI : 'default',\n\t    \t\titems: [{\n\t    \t\t\ttext: me.localize('Open'),\n                    glyph: 'xf115@FontAwesome', // not visible\n\t    \t\t\ttooltip: me.localize('SelectExisting'),\n\t    \t\t\thidden: this.getCorpus()!=undefined,\n\t    \t\t\thandler: function() {\n\t    \t\t\t\tExt.create('Ext.window.Window', {\n\t    \t\t\t\t    title: me.localize('Open'),\n\t    \t\t\t\t    layout: 'fit',\n\t    \t\t\t\t    modal: true,\n\t    \t\t\t\t    items: {  // Let's put an empty grid in just to illustrate fit layout\n\t    \t\t\t\t        xtype: 'form',\n\t    \t\t\t\t        submitEmptyText: false,\n\t    \t\t\t\t        margin: '5,5,5,5',\n\t    \t\t\t\t        items: {\n\t    \t\t\t\t        \txtype: 'corpusselector'\n//\t    \t\t\t\t            xtype:'combo',\n//\t    \t\t\t\t            labelWidth: 150,\n//\t    \t\t\t\t            fieldLabel:'Choose a corpus:',\n//\t    \t\t\t\t            name:'corpus',\n//\t    \t\t\t\t            queryMode:'local',\n//\t    \t\t\t\t            store:[['shakespeare',\"Shakespeare's Plays\"],['austen',\"Austen's Novels\"]],\t\t\t\t            \n//\t    \t\t\t\t            forceSelection:true\n\t    \t\t\t\t        },\n\t    \t\t\t\t        buttons: [\n\t    \t\t\t\t        \t{\n\t    \t\t\t\t        \t\ttext: me.localize('Open'),\n\t    \t\t\t                    glyph: 'xf00c@FontAwesome',\n\t    \t\t\t\t        \t\thandler: function(btn) {\n\t    \t\t\t\t        \t\t\tvar form = btn.up('form').getForm();\n\t    \t\t\t\t        \t\t\tvar corpus = btn.up('form').getForm().getValues().corpus;\n\t    \t\t\t\t        \t\t\tif (corpus!='') {\n\t    \t\t\t\t        \t\t\t\tme.loadCorpus({corpus: corpus});\n\t\t    \t\t\t\t        \t\t\tbtn.up('window').close();\n\t    \t\t\t\t        \t\t\t}\n\t    \t\t\t\t        \t\t\telse {\n\t    \t\t\t\t    \t        \t\tExt.Msg.show({\n\t    \t\t\t\t    \t        \t\t    title: me.localize('SelectExisting'),\n\t    \t\t\t\t    \t        \t\t    message: me.localize('PleaseSelectExisting'),\n\t    \t\t\t\t    \t        \t\t    buttons: Ext.Msg.OK,\n\t    \t\t\t\t    \t        \t\t    icon: Ext.Msg.ERROR\n\t    \t\t\t\t    \t        \t\t});\n\t    \t\t\t\t        \t\t\t}\n\t    \t\t\t\t        \t\t},\n\t    \t\t\t\t        \t\tflex: 1\n\t    \t\t\t\t            },{\n\t    \t\t\t\t        \t\ttext: me.localize('cancel'),\n\t    \t\t\t                    glyph: 'xf00d@FontAwesome',\n\t    \t\t\t\t        \t\tflex: 1,\n\t    \t\t\t\t        \t\thandler: function(btn) {\n\t    \t\t\t\t        \t\t\tbtn.up('window').close();\n\t    \t\t\t\t        \t\t}\n\t    \t\t\t\t        \t}\n\t    \t\t\t\t        ]\n\t    \t\t\t\t    }\n\t    \t\t\t\t}).show();\n\t    \t\t\t}\n\t    \t\t},{\n    \t        \txtype: 'fileuploadfield',\n                    glyph: 'xf093@FontAwesome',\n    \t        \tname: 'upload',\n        \t    \tbuttonOnly: true,\n        \t    \thideLabel: true,\n\t\t            ui: 'default-toolbar',\n        \t    \tbuttonText: me.localize('Upload'),\n        \t    \tlisteners: {\n        \t    \t\trender: function(filefield) {\n        \t    \t\t\tfilefield.fileInputEl.dom.setAttribute('multiple', true);\n        \t\t        \tExt.tip.QuickTipManager.register({\n       \t\t                 target: filefield.getEl(),\n       \t\t                 text: me.localize('UploadLocal')\n       \t\t             \t});\n        \t            },\n        \t            beforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n        \t            change: function(filefield, value) {\n        \t            \tif (value) {\n            \t            \tvar form = filefield.up('form').getForm();\n            \t            \tif (form.isValid()) {\n            \t            \t\tvar files = filefield.fileInputEl.dom.files;\n            \t            \t\tvar badFilesRe = /\\.(png|gif|jpe?g|xls|mp[234a]|mpeg|exe|wmv|avi|ppt|mpg|tif|wav|mov|psd|wma|ai|bmp|pps|aif|pub|dwg|indd|swf|asf|mbd|dmg|flv)$/i;\n            \t            \t\tvar goodFilesRe = /\\.(txt|pdf|html?|xml|docx?|rtf|pages|epub|odt|zip|jar|tar|gz|ar|cpio|bzip2|bz2|gzip|xlsx?)$/i;\n            \t            \t\tvar badFiles = [];\n            \t            \t\tvar unknownFiles = [];\n            \t            \t\tfor (var i = 0, len = files.length; i<len; i++) {\n            \t            \t\t\tvar filename = files[i].name;\n            \t            \t\t\tif (badFilesRe.test(filename)) {\n            \t            \t\t\t\tbadFiles.push(filename.split(\"/\").pop());\n            \t            \t\t\t}\n            \t            \t\t\telse if (!goodFilesRe.test(filename)) {\n            \t            \t\t\t\tunknownFiles.push(filename.split(\"/\").pop());\n            \t            \t\t\t}\n            \t            \t\t}\n            \t            \t\tif (badFiles.length>0 || unknownFiles.length>0) {\n            \t            \t\t\tvar file = filefield;\n            \t            \t\t\tExt.Msg.show({\n            \t            \t\t\t\ttitle: me.localize(\"fileTypesWarning\"),\n            \t            \t\t\t\ticon: Ext.MessageBox.ERROR,\n            \t            \t\t\t\tmessage: me.localize('fileTypesMessage')+'<ul>' +\n            \t            \t\t\t\t\t(badFiles.length > 0 ? ('<li>'+me.localize(\"badFiles\") + badFiles.slice(0, 5).join(\", \") + (badFiles.length>5 ? '\u2026' : '') + '</li>') : '') +\n            \t            \t\t\t\t\t(unknownFiles.length>0 ? ('<li>' +me.localize(\"unknownFiles\") + unknownFiles.slice(0, 5).join(\", \") + (unknownFiles.length>5 ? '\u2026' : '') +'</li>') : '')+\n            \t            \t\t\t\t\t'</ul>'+me.localize('sureContinue'),\n            \t            \t\t\t\tbuttons: Ext.Msg.YESNO,\n            \t            \t\t\t\tfn: function(btn) {\n            \t            \t\t\t        if (btn === 'yes') {\n            \t            \t\t\t        \tme.loadForm(form);\n            \t            \t\t\t        }\n            \t            \t\t\t        else {\n            \t            \t\t\t        \tfile.reset(); // make sure we can trigger a change next time\n            \t            \t\t\t        \tfile.fileInputEl.dom.setAttribute('multiple', true);\n            \t            \t\t\t        }\n            \t            \t\t\t    },\n            \t            \t\t\t\tscope: form\n            \t            \t\t\t});\n            \t            \t\t}\n            \t            \t\telse {\n            \t            \t\t\tme.loadForm(form);\n            \t            \t\t}\n            \t            \t}\n        \t            \t}\n        \t            }\n        \t    \t}\n\t    \t\t},'->', {\n\t    \t    \txtype: 'button',\n\t    \t    \tscale: 'large',\n        \t\t\tglyph: 'xf00d@FontAwesome',\n\t    \t    \ttext: this.localize('cancel'),\n\t    \t    \thidden: this.getCorpus()==undefined,\n\t    \t    \thandler: function(btn) {\n\t    \t        \tvar win = this.up(\"window\");\n\t    \t        \tif (win && win.isFloating()) {\n\t    \t        \t\twin.close();\n\t    \t        \t}\n\t    \t    \t}\n\t    \t    }, {\n\t    \t    \txtype: 'button',\n\t    \t    \tscale: 'large',\n                    glyph: 'xf00c@FontAwesome',\n\t    \t    \ttext: this.localize('reveal'),\n\t    \t    \tui: 'default',\n\t    \t    \twidth: 200,\n\t    \t    \thandler: function(btn) {\n\t    \t        \tvar input = btn.up('form').down('#input').getValue();\n\t    \t        \tif (input !== '') {\n\t    \t        \t\tvar api = me.getApiParams();\n\t    \t            \tdelete api.view;\n\t    \t            \tdelete api.stopList;\n\t    \t        \t\tif (api.inputFormat && input.trim().indexOf(\"<\")!==0) {\n\t    \t        \t\t\tExt.Msg.confirm(me.localize('error'), me.localize('errorNotXmlContinue'), function(buttonId) {\n\t    \t        \t\t\t\tif (buttonId=='yes') {\n\t\t\t\t    \t        \t\tme.loadCorpus(Ext.apply(api, {input: input}));\n\t    \t        \t\t\t\t}\n\t    \t        \t\t\t}, me);\n\t    \t        \t\t}\n\t    \t        \t\telse {\n\t\t    \t        \t\tme.loadCorpus(Ext.apply(api, {input: input}));\n\t    \t        \t\t}\n\t    \t        \t}\n\t    \t        \telse {\n\t    \t        \t\tExt.Msg.show({\n\t    \t        \t\t    title: me.localize('noTextProvided'),\n\t    \t        \t\t    message: me.localize('pleaseProvideText'),\n\t    \t        \t\t    buttons: Ext.Msg.OK,\n\t    \t        \t\t    icon: Ext.Msg.ERROR\n\t    \t        \t\t});\n\t    \t        \t}\n\t    \t    \t}\n\t    \t    }]\n\t    \t}],\n\t    \titems: [{\n\t    \t\thtml: this.getInitialConfig().addTextLabel,\n\t    \t\thidden: this.getInitialConfig().addTextLabel==undefined\n\t    \t},{\n//\t    \t\tlayout: 'fit',\n\t    \t\theight: 100,\n    \t    \txtype: 'textareafield',\n    \t    \titemId: 'input',\n    \t    \temptyText: this.localize('emptyInput')\n\t    \t}]\n        });\n        \n        me.on(\"boxready\", function(panel) {\n        \tvar app = this.getApplication();\n        \tif (app.getAllowInput && app.getAllowInput()==\"false\") {\n        \t\tif (app.getNoAllowInputText && app.getNoAllowInputText().trim().length>0) {\n        \t\t\tExt.defer(function() {\n            \t\t\tvar parent = panel.up(\"container\");\n            \t\t\tparent.removeAll(); // input box and copyright message\n            \t\t\tparent.add({\n            \t    \t\tframe: false,\n            \t    \t\tpadding: 10,\n            \t    \t\tstyle: {\n            \t    \t\t    borderColor: '#aaa',\n            \t    \t\t    borderStyle: 'solid'\n            \t    \t\t},\n            \t\t\t\thtml: app.getNoAllowInputText()\n            \t\t\t})\n        \t\t\t}, 100);\n        \t\t} else {\n            \t\tpanel.hide();\n            \t\tExt.create('Ext.window.Window', {\n            \t\t    layout: 'fit',\n            \t\t    header: false,\n            \t\t    modal: true,\n            \t\t    bodyPadding: 10,\n            \t\t    items: {  // Let's put an empty grid in just to illustrate fit layout\n            \t\t        html: \"<p style='color: red;'>\"+panel.localize('noAllowInputMessage')+\"</p>\"\n            \t\t    }\n            \t\t}).show();\n        \t\t}\n        \t}\n        })\n\n        me.callParent(arguments);\n        \n    },\n    \n    loadForm: function(form) {\n    \tvar params = {tool: this.getCorpus() ? 'corpus.CorpusMetadata' : 'corpus.CorpusCreator'};\n    \tif (this.getCorpus()) {\n    \t\tExt.apply(params, {\n    \t\t\tcorpus: this.getCorpus().getId(),\n    \t\t\taddDocuments: true\n    \t\t})\n    \t};\n    \tvar apiParams = this.getApiParams();\n    \tdelete apiParams.view;\n    \tdelete apiParams.stopList;\n    \tExt.apply(params, apiParams);\n    \tvar view = this.getApplication().getViewport();\n\t\tview.mask(this.localize('uploadingCorpus'));\n\t\tform.submit({\n\t\t\turl: this.getTromboneUrl(),\n\t\t\tparams: params,\n\t\t\tfailure: function(form, action) { // we always fail because of content-type\n            \tview.unmask();\n\t\t\t\tif (action.result && (action.result.corpus || action.result.stepEnabledCorpusCreator)) {\n\t\t\t\t\tvar corpusParams = {corpus: action.result.corpus ? action.result.corpus.metadata.id : action.result.stepEnabledCorpusCreator.storedId};\n\t\t\t\t\tExt.applyIf(corpusParams, apiParams); // adding title & subTitle here\n\t\t\t\t\tthis.setCorpus(undefined)\n\t\t\t\t\tthis.loadCorpus(corpusParams);\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\tthis.showResponseError(\"Unable to load corpus.\", action.response)\n\t\t\t\t}\n\t\t\t},\n\t\t\tscope: this\n\t\t});\n    },\n   \n    loadCorpus: function(params) {\n    \tif (this.getCorpus()) {\n    \t\tExt.apply(params, {\n    \t\t\tcorpus: this.getCorpus().getId(),\n    \t\t\taddDocuments: true\n    \t\t})\n    \t};\n    \t\n    \tvar win = this.up(\"window\");\n    \tif (win && win.isFloating()) {\n    \t\twin.close();\n    \t}\n    \t\n\t\tthis.getApplication().loadCorpusFromParams(params);\n    },\n    \n    showOptionsClick: function(panel) {\n    \tvar me = panel;\n    \tif (me.optionsWin === undefined) {\n    \t\tme.optionsWin = Ext.create('Ext.window.Window', {\n    \t\t\ttitle: me.localize('gearWinTitle'),\n    \t\t\tcloseAction: 'hide',\n//    \t\t\twidth: 500,\n    \t\t\tlayout: 'fit',\n    \t\t\tbodyPadding: 10,\n    \t\t\tanchor: '100% 100%',\n//    \t\t\tshrinkWrap: 3,\n    \t\t\titems: [{\n    \t\t\t\txtype: 'form',\n    \t\t\t\tdefaultType: 'textfield',\n        \t\t\tmaxHeight: me.getApplication().getViewport().getHeight()-120,\n        \t\t\tscrollable: true,\n    \t\t\t\tfieldDefaults: {\n    \t\t\t\t\tlabelAlign: 'right',\n    \t\t\t\t\tlabelWidth: 110,\n    \t\t\t\t\twidth: 350\n    \t\t\t\t},\n    \t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t    fieldLabel: me.localize('inputFormat'),\n\t\t\t\t\t\t    labelWidth: 90, // try to align with fieldset\n\t\t\t\t\t\t    name: 'inputFormat',\n\t\t\t\t\t\t    queryMode:'local',\n\t\t\t\t\t\t    store:[['',me.localize('inputFormatAuto')],['dtoc','DToC: Dynamic Table of Contexts'],['TEI',\"TEI: Text Encoding Initative\"],['TEI',\"TEI Corpus\"],['RSS',\"Really Simple Syndication: RSS\"]],\n\t\t\t\t\t\t    value: '',\n\t\t\t\t\t\t    listeners: {\n\t\t\t\t\t\t    \tafterrender: {\n\t\t\t\t\t\t    \t\tfn: function(combo) {\n\t\t\t\t\t\t    \t\t\tvar inputFormat = this.getApiParam('inputFormat');\n\t\t\t\t\t\t    \t\t\tif (inputFormat) {\n\t\t\t\t\t\t    \t\t\t\tcombo.setValue(inputFormat);\n\t\t\t\t\t\t    \t\t\t}\n\t\t\t\t\t\t    \t\t},\n\t\t\t\t\t\t    \t\tscope: me\n\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t    }\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\txtype: 'container',\n\t\t\t\t\t\t\thtml: '<p><i>'+new Ext.Template(me.localize('advancedOptionsText')).applyTemplate([me.getBaseUrl()+'docs/#!/guide/corpuscreator-section-xml'])+'</i></p>',\n\t\t\t\t\t\t\twidth: 375\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-titles' target='voyantdocs'>\"+me.localize('corpusOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('corpusTitle'),\n\t\t\t\t\t\t\t\t\tname: 'title'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('corpusSubTitle'),\n\t\t\t\t\t\t\t\t\tname: 'subTitle'\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize(\"corpusSort\"),\n\t\t\t\t\t\t\t\t\tname: 'sort',\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t    queryMode:'local',\n\t\t\t\t\t\t\t\t    store:[['',me.localize('corpusSortAuto')],['TITLEASC',me.localize('corpusSortTitle')],['AUTHORASC',me.localize('corpusSortAuthor')],['PUBDATEASC',me.localize('corpusSortPubDate')]],\n\t\t\t\t\t\t\t\t    value: '',\n\t\t\t\t\t\t\t\t    listeners: {\n\t\t\t\t\t\t\t\t    \tafterrender: {\n\t\t\t\t\t\t\t\t    \t\tfn: function(combo) {\n\t\t\t\t\t\t\t\t    \t\t\tvar inputFormat = this.getApiParam('sort');\n\t\t\t\t\t\t\t\t    \t\t\tif (inputFormat) {\n\t\t\t\t\t\t\t\t    \t\t\t\tcombo.setValue(inputFormat);\n\t\t\t\t\t\t\t\t    \t\t\t}\n\t\t\t\t\t\t\t\t    \t\t},\n\t\t\t\t\t\t\t\t    \t\tscope: me\n\t\t\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t\t\t    }\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-text' target='voyantdocs'>\"+me.localize('textOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"textOptionsText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('inputRemoveUntil'),\n\t\t\t\t\t\t\t\t\tname: 'inputRemoveUntil'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('inputRemoveUntilAfter'),\n\t\t\t\t\t\t\t\t\tname: 'inputRemoveUntilAfter'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('inputRemoveFrom'),\n\t\t\t\t\t\t\t\t\tname: 'inputRemoveFrom'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('inputRemoveFromAfter'),\n\t\t\t\t\t\t\t\t\tname: 'inputRemoveFromAfter'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-xml' target='voyantdocs'>\"+me.localize('xmlOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"xmlOptionsText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathContent'),\n\t\t\t\t\t\t\t\t\tname: 'xmlContentXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathTitle'),\n\t\t\t\t\t\t\t\t\tname: 'xmlTitleXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathAuthor'),\n\t\t\t\t\t\t\t\t\tname: 'xmlAuthorXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathDocuments'),\n\t\t\t\t\t\t\t\t\tname: 'xmlDocumentsXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathGroupBy'),\n\t\t\t\t\t\t\t\t\tname: 'xmlGroupByXpath'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t                        title: me.localize('xmlAdditionalOptions'),\n\t\t\t                        collapsible: true,\n\t\t\t                        collapsed: true,\n\t\t\t                        defaultType: 'textfield',\n\t\t\t                        items: [{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubDate'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlPubDateXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPublisher'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlPublisherXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubPlace'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlPubPlaceXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathKeywords'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlKeywordsXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathCollection'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlCollectionXpath'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\txtype: 'textareafield',\n\t\t\t\t\t\t\t\t\t\tgrow: true,\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathExtra'),\n\t\t\t\t\t\t\t\t\t\tname: 'xmlExtraMetadataXpath'\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-html' target='voyantdocs'>\"+me.localize('htmlOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+new Ext.Template(me.localize('htmlOptionsText')).applyTemplate([me.getBaseUrl()+'docs/#!/guide/corpuscreator-section-html'])+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathContent'),\n\t\t\t\t\t\t\t\t\tname: 'htmlContentQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathTitle'),\n\t\t\t\t\t\t\t\t\tname: 'htmlTitleQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathAuthor'),\n\t\t\t\t\t\t\t\t\tname: 'htmlAuthorQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathDocuments'),\n\t\t\t\t\t\t\t\t\tname: 'htmlDocumentsQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathGroupBy'),\n\t\t\t\t\t\t\t\t\tname: 'htmlGroupByQuery'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t                        title: me.localize('xmlAdditionalOptions'),\n\t\t\t                        collapsible: true,\n\t\t\t                        collapsed: true,\n\t\t\t                        defaultType: 'textfield',\n\t\t\t                        items: [{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubDate'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlPubDateQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPublisher'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlPublisherQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubPlace'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlPubPlaceQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathKeywords'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlKeywordsQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathCollection'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlCollectionQuery'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\txtype: 'textareafield',\n\t\t\t\t\t\t\t\t\t\tgrow: true,\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathExtra'),\n\t\t\t\t\t\t\t\t\t\tname: 'htmlExtraMetadataQuery'\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-json' target='voyantdocs'>\"+me.localize('jsonOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+new Ext.Template(me.localize('jsonOptionsText')).applyTemplate([me.getBaseUrl()+'docs/#!/guide/corpuscreator-section-json'])+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathContent'),\n\t\t\t\t\t\t\t\t\tname: 'jsonContentPointer'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathTitle'),\n\t\t\t\t\t\t\t\t\tname: 'jsonTitlePointer'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathAuthor'),\n\t\t\t\t\t\t\t\t\tname: 'jsonAuthorPointer'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathDocuments'),\n\t\t\t\t\t\t\t\t\tname: 'jsonDocumentsPointer'\n\t\t\t\t\t\t\t\t},/*{ \n\t\t\t\t\t\t\t\t\t// groupBy is tricky because documents are combined in ways that may conflict \n\t\t\t\t\t\t\t\t\t// with the other extraction options (especially since Pointer expects absolute\n\t\t \t\t\t\t\t\t\t// addresses from root). So for now we'll skip.\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathGroupBy'),\n\t\t\t\t\t\t\t\t\tname: 'jsonGroupByPointer'\n\t\t\t\t\t\t\t\t},*/{\n\t\t\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t                        title: me.localize('xmlAdditionalOptions'),\n\t\t\t                        collapsible: true,\n\t\t\t                        collapsed: true,\n\t\t\t                        defaultType: 'textfield',\n\t\t\t                        items: [{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubDate'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonPubDatePointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPublisher'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonPublisherPointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathPubPlace'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonPubPlacePointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathKeywords'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonKeywordsPointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathCollection'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonCollectionPointer'\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\txtype: 'textareafield',\n\t\t\t\t\t\t\t\t\t\tgrow: true,\n\t\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('xpathExtra'),\n\t\t\t\t\t\t\t\t\t\tname: 'jsonExtraMetadataPointer'\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-tables' target='voyantdocs'>\"+me.localize('tableOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+new Ext.Template(me.localize('tableOptionsText')).applyTemplate([me.getBaseUrl()+'docs/#!/guide/corpuscreator-section-tables'])+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                        \t},{\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('tableDocuments'),\n\t\t\t\t\t\t\t\t    name: 'tableDocuments',\n\t\t\t\t\t\t\t\t    queryMode:'local',\n\t\t\t\t\t\t\t\t    store:[['',me.localize('tableDocumentsTable')],['rows',me.localize('tableDocumentsRows')],['columns',me.localize(\"tableDocumentsColumns\")]],\n\t\t\t\t\t\t\t\t    forceSelection:true,\n\t\t\t\t\t\t\t\t    value: ''\n\t\t\t\t\t\t\t\t},{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"tableNoHeadersRowText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize(\"tableNoHeadersRow\"),\n\t\t\t\t\t\t\t\t\txtype: 'checkboxfield',\n\t\t\t\t\t\t\t\t\tname: 'tableNoHeadersRow',\n\t\t\t\t\t\t\t\t\tinputValue: \"true\"\n\t\t\t\t\t\t\t\t},{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"tableContentText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('tableContent'),\n\t\t\t\t\t\t\t\t\tvalidator: function(val) {return me.validatePositiveNumbersCsv.call(me, val)},\n\t\t\t\t\t\t\t\t\tname: 'tableContent'\n\t\t\t\t\t\t\t\t},{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"tableMetadataText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('tableAuthor'),\n\t\t\t\t\t\t\t\t\tvalidator: function(val) {return me.validatePositiveNumbersCsv.call(me, val)},\n\t\t\t\t\t\t\t\t\tname: 'tableAuthor'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('tableTitle'),\n\t\t\t\t\t\t\t\t\tvalidator: function(val) {return me.validatePositiveNumbersCsv.call(me, val)},\n\t\t\t\t\t\t\t\t\tname: 'tableTitle'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-processing' target='voyantdocs'>\"+me.localize('processingOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        items: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t    fieldLabel: me.localize(\"language\"),\n\t\t\t\t\t\t\t\t    name: 'language',\n\t\t\t\t\t\t\t\t    queryMode:'local', //?\n\t\t\t\t\t\t\t\t    store:[['',me._localizeClass(Voyant.widget.StopListOption, \"auto\")],['cn',me._localizeClass(Voyant.widget.StopListOption, \"cn\")],['bo',me._localizeClass(Voyant.widget.StopListOption, \"bo\")],['grc',me._localizeClass(Voyant.widget.StopListOption, \"grc\")]],\n\t\t\t\t\t\t\t\t    forceSelection:true,\n\t\t\t\t\t\t\t\t    value: ''\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t    fieldLabel: me.localize('tokenization'),\n\t\t\t\t\t\t\t\t    name: 'tokenization',\n\t\t\t\t\t\t\t\t    queryMode:'local', //?\n\t\t\t\t\t\t\t\t    store:[['',me.localize('tokenizationAuto')],['wordBoundaries',me.localize(\"tokenizationWordBoundaries\")],['whitespace',me.localize(\"tokenizationWhitespace\")]],\n\t\t\t\t\t\t\t\t    forceSelection:true,\n\t\t\t\t\t\t\t\t    value: ''\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},{\n\t        \t\t\t\txtype: 'fieldset',\n\t                        title: \"<a href='\"+me.getBaseUrl()+\"docs/#!/guide/corpuscreator-section-access-management' target='voyantdocs'>\"+me.localize('accessOptions')+\"</a>\",\n\t                        collapsible: true,\n\t                        collapsed: true,\n\t                        defaultType: 'textfield',\n\t                        items: [\n\t                            {\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"accessOptionsText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('adminPassword'),\n\t\t\t\t\t\t\t\t\tname: 'adminPassword'\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('accessPassword'),\n\t\t\t\t\t\t\t\t\tname: 'accessPassword'\n\t\t\t\t\t\t\t\t},{\n\t    \t\t\t\t\t\t\txtype: 'container',\n\t    \t\t\t\t\t\t\thtml: '<p><i>'+me.localize(\"accessModeWithoutPasswordText\")+'</i></p>',\n\t    \t\t\t\t\t\t\twidth: 375\n\t                            },{\n\t\t\t\t\t\t\t\t    xtype:'combo',\n\t\t\t\t\t\t\t\t\tfieldLabel: me.localize('accessModeWithoutPassword'),\n\t\t\t\t\t\t\t\t    name: 'noPasswordAccess',\n\t\t\t\t\t\t\t\t    queryMode:'local',\n\t\t\t\t\t\t\t\t    store:[['',me.localize('accessModeNonConsumptive')],['none',me.localize(\"accessModeNone\")]],\n\t\t\t\t\t\t\t\t    forceSelection:true,\n\t\t\t\t\t\t\t\t    value: ''\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t]\n    \t\t\t}],\n    \t\t\tbuttons: [{\n    \t\t\t\ttext: me.localize('ok'),\n    \t\t\t\thandler: function(button, event) {\n    \t\t\t\t\tvar win = button.findParentByType('window');\n    \t\t\t\t\tvar form = win.down('form');\n    \t\t\t\t\tif (form.isValid()) {\n        \t\t\t\t\tvar params = form.getValues();\n        \t\t\t\t\tme.setApiParams(params);\n        \t\t\t\t\twin.hide();\n    \t\t\t\t\t}\n    \t\t\t\t\telse {\n    \t\t\t\t\t\tme.showError({\n    \t\t\t\t\t\t\tmessage: me.localize(\"invalidForm\")\n    \t\t\t\t\t\t})\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t},{\n    \t\t\t\ttext: me.localize('cancel'),\n    \t\t\t\thandler: function(button, event) {\n    \t\t\t\t\tbutton.findParentByType('window').hide();\n    \t\t\t\t}\n    \t\t\t}]\n    \t\t});\n    \t}\n    \tme.optionsWin.showAt((me.getApplication().getViewport().getWidth()/2)-200,10);\n    },\n    \n    validatePositiveNumbersCsv: function(val) {\n    \tval = val.trim();\n    \tif (val.length>0) {\n        \tif (/[^\\d,+ ]/.test(val)) {\n        \t\treturn this.localize(\"numbersCommasOnly\");\n        \t}\n        \tif (/\\d\\s+\\d/.test(val)) {\n        \t\treturn this.localize(\"numbersNeedCommas\");\n        \t}\n        \tvar numbers = val.split(/\\s*[,+]\\s*/), number;\n        \tfor (var i=0, len=numbers.length; i<len; i++) {\n        \t\tnumber = numbers[i];\n        \t\tif (number.length==0) {\n        \t\t\treturn this.localize(\"numberEmpty\")\n        \t\t}\n        \t\tif (parseInt(number)==0) {\n        \t\t\treturn this.localize(\"numberZero\")\n        \t\t}\n        \t}\n    \t}\n    \treturn true;\n\t}\n    \n});","Ext.define('Voyant.panel.DreamScape', {\n    extend: 'Ext.Panel',\n    xtype: 'dreamscape',\n    mixins: ['Voyant.panel.Panel'],\n    statics: {\n        i18n: {\n        },\n        api: {\n            stopList: 'auto',\n            hide: [],\n            author: undefined,\n            title: undefined,\n            keyword: undefined,\n            pubDate: undefined,\n            citiesMaxCount: 500,\n            minPopulation: 10000,\n            citiesMinFreq: 1,\n            connectionsMaxCount: 2500,\n            connectionsMinFreq: 1,\n            millisPerAnimation: 2000,\n            annotationsId: undefined,\n            source: undefined,\n            overridesId: undefined,\n            filterHasLowerCaseForm: true,\n            filterIsPersonName: true,\n            preferredCoordinates: undefined\n        },\n        glyph: 'xf124@FontAwesome'\n    },\n    config: {\n        map: undefined, // OL object, should be set during init\n        overlay: undefined, // OL object, should be set during init\n        contentEl: undefined, // EXTJS Element, where info is shown\n        isOpenLayersLoaded: false,\n        isArcLoaded: false,\n        animationDelay: 25, // determines the delay between animation calls\n        isProj4Loaded: false,\n        projection: undefined,\n        filterWidgets: new Ext.util.MixedCollection(),\n        drawInteraction: undefined,\n        drawMode: false,\n        //currentAnnotation: undefined,\n        baseLayers: {},\n        annotations: undefined, // set during init if any values are stored, shouldn't be looked up (getAnnotations) after init\n        annotationsLoadedIfAvailable: false, // check api and local storage,\n        overrides: {}\n    },\n\n    html: '<div class=\"map\"></div><div class=\"ticker\"></div>',\n\n    cls: 'dreamscape',\n\n    constructor: function(config) {\n        this.callParent(arguments);\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n        Ext.Loader.loadScript({\n            url: this.getBaseUrl()+\"resources/openlayers/ol.js\",\n            onLoad: function() {\n                // Utility function to get layer by id\n                if (ol.Map.prototype.getLayer === undefined) {\n                    ol.Map.prototype.getLayer = function (id) {\n                        var layer = undefined;\n                        this.getLayers().forEach(function(lyr) {\n                            if (id === lyr.get('id')) {\n                                layer = lyr;\n                            }\n                        });\n                        return layer;\n                    }\n                }\n                this.setIsOpenLayersLoaded(true);\n            },\n            scope: this\n        });\n        Ext.Loader.loadScript({\n            url: this.getBaseUrl()+\"resources/dreamscape/arc.js\",\n            onLoad: function() {\n                this.setIsArcLoaded(true);\n            },\n            scope: this\n        });\n        Ext.Loader.loadScript({\n            url: \"https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.4.4/proj4.js\",\n            onLoad: function() {\n                this.setIsProj4Loaded(true);\n            },\n            scope: this\n        });\n        var annotationsId = this.getApiParam(\"annotationsId\");\n        if (annotationsId) {\n            var me = this;\n            Ext.Ajax.request({\n                url: this.getTromboneUrl(),\n                params: {\n                    tool: 'resource.StoredResource',\n                    retrieveResourceId: annotationsId\n                },\n                scope: this\n            }).then(function(response) {\n                var data = Ext.JSON.decode(response.responseText);\n                if (data.storedResource.resource) {\n                    var annotations = Ext.JSON.decode(data.storedResource.resource)\n                    if (Ext.isString(annotations)) {\n                        annotations = Ext.JSON.decode(annotations);\n                        me.setAnnotations(annotations)\n                    }\n                }\n                if (!me.getAnnotations()) {\n                    me.showError(me.localize(\"annotationsLoadFailed\"));\n                }\n                me.setAnnotationsLoadedIfAvailable(true);\n            }, function(response) {\n                me.showResponseError(me.localize(\"annotationsLoadFailed\"), response);\n                me.setAnnotationsLoadedIfAvailable(true);\n            });\n        } else {\n            this.setAnnotationsLoadedIfAvailable(true);\n        }\n    },\n    initComponent: function() {\n        var me = this;\n        this.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n        var hide = this.getApiParam(\"hide\");\n        if (Ext.isString(hide)) {\n            hide = hide.split(',');\n            this.setApiParam('hide');\n        }\n        var iconBase = this.getApplication().getBaseUrl()+\"resources/dreamscape/\";\n        Ext.apply(this, {\n            title: this.localize('title'),\n            bodyBorder: true,\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                itemId: 'bottomToolbar',\n                overflowHandler: 'scroller',\n                items: [\n                    {\n                        text: this.localize('display'),\n                        tooltip: this.localize('displayTip'),\n                        glyph: 'xf013@FontAwesome',\n                        menu: {\n                            defaults: { // these are intended for the radiogroups after the separator (and should be ignored by the menu items above the separator)\n                                xtype: 'menucheckitem',\n                                checkHandler: function(item, checked) {\n                                    var map = this.getMap(), id = item.getItemId();\n                                    this.getFilterWidgets().each(function(filter) {\n                                        map.getLayer(filter.getId()+\"-\"+id).setVisible(checked);\n                                    })\n                                    var hide = Ext.Array.from(this.getApiParam('hide'));\n                                    if (checked) {\n                                        hide = Ext.Array.remove(hide, id);\n                                    } else {\n                                        hide.push(id);\n                                        hide = Ext.Array.unique(hide);\n                                    }\n                                    this.setApiParam(\"hide\", hide);\n                                    item.getMenu().setDisabled(checked==false);\n                                },\n                                scope: this,\n                                checked: true\n                            },\n                            items: [{\n                                xtype: 'menuitem',\n                                text: this.localize('baseLayer'),\n                                tooltip: this.localize('baseLayerTip'),\n                                glyph: 'xf279@FontAwesome',\n                                menu: {\n                                    items: [{\n                                        xtype: 'radiogroup',\n                                        columns: 1,\n                                        vertical: true,\n                                        defaults: {\n                                            cls: 'map-menu-item',\n                                            handler: function(item, checked) {\n                                                if(checked){\n                                                    var panel = this;\n                                                    id = item.getItemId();\n                                                    var layer = this.getBaseLayers()[id];\n                                                    if (layer) {\n                                                        layer.setOpacity(1);\n                                                        this.getMap().getLayers().setAt(0, layer);\n                                                    }\n                                                    if(id == 'osm' || id == 'arcGIS') {\n                                                        this.getMap().getLayer(\"overlayLayer\").setVisible(false);\n                                                    } else {\n                                                        this.getMap().getLayer(\"overlayLayer\").setVisible(true);\n                                                    }\n                                                }\n                                            },\n                                            listeners: {\n                                                afterrender: function(item) {\n                                                    Ext.create('Ext.tip.ToolTip', {\n                                                        target: item,\n                                                        html: '<div class=\"map-menu-item-tooltip '+item.getItemId()+'\"></div>',\n                                                        anchor: 'right'\n                                                    });\n                                                }\n                                            },\n                                            scope: this\n                                        },\n                                        items: [\n                                            {\n                                                boxLabel: this.localize('watercolor'),\n                                                itemId: 'watercolor',\n                                                cls: ['map-menu-item','watercolor'],\n                                                checked: true\n                                            },{\n                                                boxLabel: this.localize('wms4326'),\n                                                cls: ['map-menu-item','wms4326'],\n                                                itemId: 'wms4326'\n                                            },{\n                                                boxLabel: this.localize('osm'),\n                                                cls: ['map-menu-item','osm'],\n                                                itemId: 'osm'\n                                            },{\n                                                boxLabel: this.localize('arcGIS'),\n                                                cls: ['map-menu-item','arcGIS'],\n                                                itemId: 'arcGIS'\n                                            }\n                                        ]\n                                    }]\n                                }\n                            },{\n                                xtype: 'menuitem',\n                                text: this.localize('projection'),\n                                tooltip: this.localize('projectionTip'),\n                                glyph: 'xf0ac@FontAwesome',\n                                menu: {\n                                    items: [{\n                                        xtype: 'radiogroup',\n                                        columns: 1,\n                                        vertical: true,\n                                        defaults: {\n                                            handler: function(item, checked) {\n                                                if(checked){\n                                                    var panel = this;\n                                                    id = item.getItemId();\n                                                    var view = undefined\n                                                    if (id === \"webMercatorProjection\") {\n                                                        this.setProjection(ol.proj.get('EPSG:3857'));\n                                                    } else if (id === \"mercatorProjection\") {\n                                                        this.setProjection(ol.proj.get('EPSG:4326'));\n                                                    } else if (id === \"gallPetersProjection\") {\n                                                        proj4.defs('cea',\"+proj=cea +lon_0=0 +lat_ts=45 +x_0=0 +y_0=0 +ellps=WGS84 +units=m +no_defs\");\n                                                        var gallPetersProjection = ol.proj.get('cea');\n                                                        this.setProjection(gallPetersProjection);\n                                                    } else if (id === \"sphereMollweideProjection\") {\n                                                        proj4.defs('ESRI:54009', '+proj=moll +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs');\n                                                        var sphereMollweideProjection = ol.proj.get('ESRI:54009');\n                                                        sphereMollweideProjection.setExtent([-18e6, -9e6, 18e6, 9e6]);\n                                                        this.setProjection(sphereMollweideProjection);\n                                                    }\n                                                    var newProjExtent = this.getProjection().getExtent();\n                                                    // If using Mercator projection, earth with is measured in degrees, otherwise it's in meters\n                                                    var earthWidth = this.getProjection() == ol.proj.get(\"EPSG:4326\") ? 360 : 40075016.68557849;\n                                                    var newView = new ol.View({\n                                                        projection: this.getProjection(),\n                                                        center: ol.extent.getCenter(newProjExtent || [0, 0, 0, 0]),\n                                                        maxResolution: earthWidth / panel.body.dom.offsetWidth,\n                                                        zoom: 0\n                                                    });\n                                                    var map = this.getMap();\n                                                    var layers = map.getLayers();\n                                                    layers.forEach(function(layer) {\n                                                        if(layer.getSource().getFeatures){\n                                                            var features = layer.getSource().getFeatures();\n                                                            features.forEach(function(feature){\n                                                                var newGeometry = feature.getGeometry().transform(map.getView().getProjection(), panel.getProjection());\n                                                                feature.setGeometry(newGeometry);\n                                                            })\n                                                        }\n                                                    });\n\n                                                    map.setView(newView);\n                                                }\n                                            },\n                                            listeners: {\n                                                afterrender: function(item) {\n                                                    Ext.create('Ext.tip.ToolTip', {\n                                                        target: item,\n                                                        html: '<div class=\"map-menu-item-tooltip '+item.getItemId()+'\"></div>',\n                                                        anchor: 'right'\n                                                    });\n                                                }\n                                            },\n                                            scope: this\n                                        },\n                                        items: [\n                                            {\n                                                boxLabel: this.localize('webMercatorProjection'),\n                                                itemId: 'webMercatorProjection',\n                                                cls: ['map-menu-item','webMercatorProjection'],\n                                                checked: true\n                                            },{\n                                                boxLabel: this.localize('mercatorProjection'),\n                                                cls: ['map-menu-item','mercatorProjection'],\n                                                itemId: 'mercatorProjection'\n                                            },{\n                                                boxLabel: this.localize('gallPetersProjection'),\n                                                cls: ['map-menu-item','gallPetersProjection'],\n                                                itemId: 'gallPetersProjection'\n                                            },{\n                                                boxLabel: this.localize('sphereMollweideProjection'),\n                                                cls: ['map-menu-item','sphereMollweideProjection'],\n                                                itemId: 'sphereMollweideProjection'\n                                            }\n                                        ]\n                                    }]\n\n                                }\n                            },'-',{\n                                text: this.localize('cities'),\n                                checked: Ext.Array.contains(hide, \"cities\")==false,\n                                itemId: 'cities',\n                                menu: {\n                                    defaults: {\n                                        labelAlign: 'right',\n                                        labelWidth: 140\n                                    },\n                                    items: [{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('citiesMaxCount'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('citiesMaxCount')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    this.setApiParam('citiesMaxCount', newVal);\n                                                    var currentCitiesCount = filter.getGeonames().getCitiesCount();\n                                                    if (newVal<oldVal || newVal<=currentCitiesCount) {\n                                                        this.filterUpdate(filter);\n                                                    } else if (filter.getGeonames().hasMoreCities()) {\n                                                        filter.loadGeonames()\n                                                    } else {\n                                                        cmp.setValue(currentCitiesCount); // will call change\n                                                        this.toastInfo(new Ext.XTemplate(this.localize(\"allNCitiesShown\")).apply([currentCitiesCount]))\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    },{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('citiesMinPopulation'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('minPopulation')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.setApiParam('minPopulation', newVal);\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    if (newVal>oldVal) {\n                                                        this.filterUpdate(filter);\n                                                    } else {\n                                                        filter.loadGeonames()\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    },{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('citiesMinFreq'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('citiesMinFreq')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    this.setApiParam('citiesMinFreq', newVal);\n                                                    if (newVal>oldVal) {\n                                                        this.filterUpdate(filter);\n                                                    } else {\n                                                        filter.loadGeonames()\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    }]\n                                }\n                            },{\n                                text: this.localize('connections'),\n                                checked: Ext.Array.contains(hide, \"connections\")==false,\n                                itemId: 'connections',\n                                menu: {\n                                    defaults: {\n                                        labelWidth: 140,\n                                        labelAlign: 'right'\n                                    },\n                                    items: [{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('connectionsMaxCount'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('connectionsMaxCount')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    this.setApiParam('connectionsMaxCount', newVal);\n                                                    if (newVal>oldVal) {\n                                                        this.filterUpdate(filter);\n                                                    } else {\n                                                        filter.loadGeonames()\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    },{\n                                        xtype: 'numberfield',\n                                        fieldLabel: this.localize('connectionsMinFreq'),\n                                        minValue: 1,\n                                        value: parseInt(this.getApiParam('connectionsMinFreq')),\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    this.setApiParam('connectionsMinFreq', newVal);\n                                                    if (newVal>oldVal) {\n                                                        this.filterUpdate(filter);\n                                                    } else {\n                                                        filter.loadGeonames()\n                                                    }\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    }]\n                                }\n\n                            },{\n                                xtype: 'menucheckitem',\n                                checked: Ext.Array.contains(hide, \"animation\")==false,\n                                text: this.localize('animations'),\n                                itemId: 'animation',\n                                menu: {\n                                    defaults: {\n                                        labelWidth: 170,\n                                        labelAlign: 'right',\n                                        width: 280\n                                    },\n                                    items: [{\n                                        xtype: 'sliderfield',\n                                        fieldLabel: this.localize('millisPerAnimation'),\n                                        value: parseInt(this.getApiParam('millisPerAnimation')),\n                                        minValue: this.getAnimationDelay(),\n                                        maxValue: 10000,\n                                        listeners: {\n                                            change: function(cmp, newVal, oldVal) {\n                                                this.getFilterWidgets().each(function(filter) {\n                                                    filter.setMillisPerAnimation(newVal);\n                                                    filter.animate();\n                                                }, this);\n                                            },\n                                            scope: this\n                                        }\n                                    }]\n                                }\n                            }]\n                        }\n                    }, '-', {\n                        text: this.localize('add'),\n                        itemId: 'addFilter',\n                        glyph: 'xf067@FontAwesome',\n                        handler: function(cmp) {\n                            var colors = this.getApplication().getColorPalette(this.getApiParam('palette'), true),\n                                color = colors[0]; // default to first\n\n                            // find an available color\n                            for (var i=0, len=colors.length; i<len; i++) {\n                                var hasMatch = false;\n                                this.getFilterWidgets().each(function(filter) {\n                                    if (filter.getColor()==colors[i]) {\n                                        hasMatch = true;\n                                        return false;\n                                    }\n                                })\n                                if (hasMatch==false) {\n                                    color = colors[i];\n                                    break;\n                                }\n                            }\n                            var filter = cmp.ownerCt.add({\n                                xtype: 'geonamesfilter',\n                                corpus: this.getCorpus(),\n                                color: color,\n                                listeners: {\n                                    removeFilterWidget: function(filter) {\n                                        var map = this.getMap(), id = filter.getItemId(), filters = this.getFilterWidgets();\n                                        [\"connections\",\"cities\",\"animation\"].forEach(function(layer) {\n                                            map.removeLayer(map.getLayer(id+\"-\"+layer));\n                                        })\n                                        filters.remove(filter);\n                                        if (filters.getCount()==0) { // we always want at least one filter\n                                            // simulate adding a filter\n                                            this.getDockedComponent('bottomToolbar').getComponent('addFilter').click();\n                                        }\n                                    },\n                                    filterUpdate: this.filterUpdate,\n                                    scope: this\n                                }\n                            })\n                            this.getFilterWidgets().add(filter.getId(), filter);\n\n                            var map = this.getMap();\n\n                            var connectionsLayer = new ol.layer.Vector({\n                                source: new ol.source.Vector({\n                                    wrapX: false,\n                                    useSpatialIndex: true // needed to call getExtent()\n                                }),\n                                id: filter.getId()+\"-connections\",\n                                visible: true,\n                                opacity: 0.2,\n                                style: this.travelStyleFunction.bind(this),\n                                updateWhileAnimating: true, // optional, for instant visual feedback\n                                updateWhileInteracting: true // optional, for instant visual feedback\n                            });\n                            map.addLayer(connectionsLayer);\n\n                            var citiesLayer = new ol.layer.Vector({\n                                source: new ol.source.Vector({\n                                    wrapX: false,\n                                    useSpatialIndex: true // needed to call getExtent()\n                                }),\n                                id: filter.getId()+\"-cities\",\n                                opacity: 0.5,\n                                style: this.cityStyleFunction.bind(this)\n                            });\n                            map.addLayer(citiesLayer);\n\n                            var animationLayer = new ol.layer.Vector({\n                                source: new ol.source.Vector({\n                                    wrapX: false,\n                                    useSpatialIndex: true // needed to call getExtent()\n                                }),\n                                id: filter.getId()+\"-animation\",\n                                style:  this.animationStyleFunction.bind(this)\n                            });\n                            map.addLayer(animationLayer);\n                        },\n                        scope: this\n                    }]\n            }]\n        });\n\n        this.on(\"loadedCorpus\", function(src, corpus) {\n            this.tryInit();\n        }, this);\n\n        this.callParent();\n    },\n\n    tryInit: function() {\n        if (this.getIsOpenLayersLoaded() && this.getIsArcLoaded() && this.getIsProj4Loaded() && this.getAnnotationsLoadedIfAvailable()) {\n            var el = this.body.down('.map').setId(Ext.id());\n            /*\n            var overlayEl = this.body.down('.ol-popup');\n            var overlay = new ol.Overlay({\n                element: overlayEl.dom,\n                autoPan: true,\n                autoPanAnimation: {\n                    duration: 250\n                }\n            });\n            this.setOverlay(overlay);\n            */\n            var panel = this;\n            // Add a click handler to hide the popup\n            /*\n            var closer = overlayEl.down(\".ol-popup-closer\").dom;\n            closer.onclick = function() {\n                overlay.setPosition(undefined);\n                closer.blur();\n                panel.getMap().getLayer(\"preview\").getSource().clear();\n\n//                if(panel.getDrawMode()) {\n//                    panel.getDockedComponent('bottomToolbar').getComponent('annotate').click();\n//                }\n                return false;\n            };\n            */\n\n            var baseLayers = this.getBaseLayers();\n            baseLayers['wms4326'] = new ol.layer.Tile({\n                preload: Infinity,\n                source: new ol.source.TileWMS({\n                    url: 'https://ahocevar.com/geoserver/wms',\n                    crossOrigin: '',\n                    params: {\n                        'LAYERS': 'ne:NE1_HR_LC_SR_W_DR',\n                        'TILED': true\n                    },\n                    projection: 'EPSG:4326'\n                })\n            });\n\n            baseLayers['watercolor'] =  new ol.layer.Tile({\n                preload: Infinity,\n                source: new ol.source.Stamen({\n                    //cacheSize: 2048,\n                    layer: 'watercolor',\n                    projection: \"EPSG:3857\"\n                })\n            });\n\n            baseLayers['osm'] = new ol.layer.Tile({\n                preload: Infinity,\n                source: new ol.source.OSM({\n                    projection: \"EPSG:3857\"\n                })\n            });\n\n            baseLayers['arcGIS'] = new ol.layer.Tile({\n                preload: Infinity,\n                source: new ol.source.TileArcGISRest({\n                    url: \"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer\",\n                    projection: \"EPSG:3857\"\n                })\n            });\n\n//            this.setContentEl(overlayEl.down('.popup-content'));\n            var map = new ol.Map({\n                layers: [\n                    baseLayers['watercolor'],\n\n                    new ol.layer.Tile({\n                        preload: Infinity,\n                        source: new ol.source.Stamen({\n                            cacheize: 2048,\n                            layer: 'toner-hybrid',\n                            projection: \"EPSG:3857\"\n                        }),\n                        id: 'overlayLayer'\n                    })\n                ],\n//                overlays: [overlay],\n                target: el.getId(),\n                loadTilesWhileInteracting: true,\n                view: new ol.View({\n                    center: [0, 0],\n                    maxResolution: 40075016.68557849 / panel.body.dom.offsetWidth,\n                    zoom: 0\n                })\n            });\n\n            map.on('singleclick', this.handleSingleClick, this);\n            // Add a click handler to the map to render the popup\n            map.on('singleclicking', function(event) {\n                var pixel = event.pixel;\n                var features = map.getFeaturesAtPixel(pixel);\n                if (features) {\n                \t\tfor (var i=0; i<features.length; i++) {\n                \t\t\tvar feature = features[i];\n                \t\t\tif (feature.get(\"type\")=='city') {\n                \t\t\t\tthis.handleLocationClick(feature);\n                \t\t\t}\n                \t\t}\n                \t\tvar feature = features[0];\n                \t\tdebugger\n                }\n                \n                if(features) {\n                    var foundFeature = false;\n                    features.forEach( function(feature) {\n                        if( feature.get(\"type\") === \"city\" && feature.get(\"selected\")) { // city\n                            panel.dispatchEvent(\"termsClicked\", panel, [feature.get(\"forms\").join(\"|\")])\n                            foundFeature = true;\n                        } else if (feature.get(\"type\") === \"connection\" && feature.get(\"selected\") && !foundFeature) { // connection\n                            panel.getFilterWidgets().each(function (filter) {\n                                var geonames = filter.getGeonames();\n                                if (geonames != null) {\n                                    var occurrences = geonames.getAllConnectionOccurrences(feature.get(\"source\"), feature.get(\"target\"));\n                                    var infos = \"<ul>\";\n                                    var docIndex = -1;\n                                    occurrences.forEach(function(occ) {\n                                        if(occ.docIndex != docIndex) {\n                                            docIndex = occ.docIndex;\n                                            infos += '<h4>' + panel.getCorpus().getDocument(docIndex).getFullLabel() + ':</h4>';\n                                        }\n                                        infos += '<li>'+ occ.source.left+'<a href=\"http://www.geonames.org/' + occ.source.id + '\" target=\"_blank\" docIndex='+occ.docIndex +' offset='+occ.source.position+\n                                            ' location='+occ.source.form + ' cityId=' + occ.source.id + ' coordinates=' + JSON.stringify(sourceCoordinates) + ' class=\"termLocationLink\">' + occ.source.form + '</a> '+occ.source.right + ' [...] ' +\n                                            occ.target.left+'<a href=\"http://www.geonames.org/' + occ.target.id + '\" target=\"_blank\" docIndex='+occ.docIndex+' offset='+occ.target.position+\n                                            ' location='+occ.target.form+ ' cityId=' + occ.target.id + ' coordinates=' + JSON.stringify(targetCoordinates) + ' class=\"termLocationLink\">' + occ.target.form + '</a> '+occ.target.right + '</li>';\n                                    });\n                                    var header = feature.get(\"text\");\n                                    infos += \"</ul>\";\n                                    panel.getContentEl().setHtml('<h3>' + header + '</h3>' + infos);\n                                    panel.getOverlay().setPosition(event.coordinate);\n                                    var links = Ext.select('.termLocationLink');\n\n//                                    function contextMenuListener(el) {\n//                                        el.addEventListener( \"contextmenu\", function(e) {\n//                                            e.preventDefault();\n//                                            panel.openContextMenu(e.layerX, e.layerY, el);\n//                                            return false;\n//                                        }, false);\n//                                    }\n\n                                    links.elements.forEach(function(link) {\n//                                        contextMenuListener(link);\n                                        link.onmouseover = function(){panel.showTermInCorpus(link.getAttribute(\"docIndex\"), link.getAttribute(\"offset\"), link.getAttribute('location'))};\n                                    });\n                                }\n                            });\n                            foundFeature = true\n                        } /*else if (feature.get(\"type\") === \"annotation\" && !foundFeature) { //annotation\n                            panel.setCurrentAnnotation(feature);\n                            panel.getContentEl().setHtml('<textarea class=\"annotation-text\" rows=\"5\" cols=\"60\">'+(feature.get(\"text\")?feature.get(\"text\"):\"\")+'</textarea>' +\n                                '<button class=\"saveAnnotation\">Save</button><button class=\"deleteAnnotation\">Delete</button>');\n                            panel.getOverlay().setPosition(event.coordinate);\n                            panel.getContentEl().down('.deleteAnnotation').dom.onclick = function() {panel.deleteAnnotation()};\n                            panel.getContentEl().down('.saveAnnotation').dom.onclick = function() {panel.saveAnnotation()};\n                            panel.getContentEl().down('.annotation-text').dom.focus();\n                        } */\n                    }, this);\n                }\n            });\n\n            // Layer for selected vector\n            var selectedLayer = new ol.layer.Vector({\n                map: map,\n                source: new ol.source.Vector({\n                    wrapX: false,\n                    useSpatialIndex: false // optional, might improve performance\n                }),\n                zIndex: 10,\n                selected: true,\n                style: function(feature) {\n                    if(feature.get(\"type\") === \"city\")\n                    {\n                        return panel.cityStyleFunction(feature, map.getView().getResolution());\n                    } else if(feature.get(\"type\") === \"connection\") {\n                        return panel.travelStyleFunction(feature, map.getView().getResolution());\n                    }\n                },\n                updateWhileAnimating: true, // optional, for instant visual feedback\n                updateWhileInteracting: true // optional, for instant visual feedback\n            });\n\n            // Layer for edit preview\n            var previewLayer = new ol.layer.Vector({\n                map: map,\n                source: new ol.source.Vector({\n                    wrapX: false,\n                    useSpatialIndex: false // optional, might improve performance\n                }),\n                preview: true,\n                zIndex: 15,\n                id: \"preview\",\n                style: function(feature) {\n                    if(feature.get(\"type\") === \"city\")\n                    {\n                        return panel.cityStyleFunction(feature, map.getView().getResolution());\n                    } else if(feature.get(\"type\") === \"connection\") {\n                        return panel.travelStyleFunction(feature, map.getView().getResolution());\n                    }\n                },\n                updateWhileAnimating: true, // optional, for instant visual feedback\n                updateWhileInteracting: true // optional, for instant visual feedback\n            });\n            map.addLayer(previewLayer);\n\n            // Add handler to update selected vector when mouse is moved\n            map.on('pointermove', function(event) {\n            \t\n            \t// set cursoe to pointer if we have a feature\n            \t  var pixel = map.getEventPixel(event.originalEvent);\n            \t  var hit = map.hasFeatureAtPixel(pixel);\n            \t  map.getViewport().style.cursor = hit ? 'pointer' : '';\n            \t  \n                if(!panel.getDrawMode()) {\n                    selectedLayer.getSource().clear();\n                    var coordinate = event.coordinate;\n                    var pixel = event.pixel;\n                    var features = map.getFeaturesAtPixel(pixel);\n                    if(features) {\n                        var i = 0;\n                        while(features[i].get(\"selected\")){\n                            i++;\n                            if (i === features.length) break;\n                        }\n                        if (i < features.length) {\n                            var feature = features[i];\n\n                            var baseTextStyle = {\n                                font: '12px Calibri,sans-serif',\n                                textAlign: 'center',\n                                offsetY: -15,\n                                fill: new ol.style.Fill({\n                                    color: [0,0,0,1]\n                                }),\n                                stroke: new ol.style.Stroke({\n                                    color: [255,255,255,0.5],\n                                    width: 4\n                                })\n                            };\n\n                            baseTextStyle.text = feature.get(\"text\");\n\n                            var textOverlayStyle = new ol.style.Style({\n                                text: new ol.style.Text(baseTextStyle),\n                                zIndex: 1\n                            });\n\n                            if (!(feature.get(\"type\") === \"annotation\")) {\n                                var selectedFeature = new ol.Feature({\n                                    text: feature.get(\"text\"),\n                                    geometry: feature.getGeometry(),\n                                    forms: feature.get(\"forms\"),\n                                    selected: true,\n                                    coordinates: feature.get(\"coordinates\"),\n                                    width: feature.get(\"width\"),\n                                    visible: feature.get(\"visible\"),\n                                    color: feature.get(\"color\"),\n                                    type: feature.get(\"type\"),\n                                    confidence: feature.get(\"confidence\"),\n                                    source: feature.get(\"source\"),\n                                    target: feature.get(\"target\"),\n                                    cityId: feature.get(\"cityId\")\n                                });\n                                selectedLayer.getSource().addFeature(selectedFeature);\n                            }\n                            var geometry = feature.getGeometry();\n                            var point = event.coordinate;\n                            var textFeature = new ol.Feature({\n                                geometry: new ol.geom.Point(point),\n                                selected: true\n                            });\n                            textFeature.setStyle(textOverlayStyle);\n                            selectedLayer.getSource().addFeature(textFeature);\n\n                            // Highlight all connection where selected city is source or target\n\n                            if(feature.get(\"type\") === \"city\") {\n                                var layers = panel.getMap().getLayers();\n                                layers.forEach(function (layer) {\n                                    var layerId = layer.get(\"id\");\n                                    if (layerId && layerId.indexOf(\"connections\") !== -1) {\n                                        connections = layer.getSource().getFeatures();\n                                        connections.forEach(function (connection) {\n                                            if(connection.get(\"target\") === feature.get(\"cityId\") || connection.get(\"source\") === feature.get(\"cityId\")) {\n                                                selectedLayer.getSource().addFeature(new ol.Feature({\n                                                    geometry: connection.getGeometry(),\n                                                    selected: true,\n                                                    coordinates: connection.get(\"coordinates\"),\n                                                    width: connection.get(\"width\"),\n                                                    visible: connection.get(\"visible\"),\n                                                    color: connection.get(\"color\"),\n                                                    type: connection.get(\"type\")\n                                                }));\n                                            }\n                                        })\n                                    }\n                                })\n                            }\n                        }\n                    }\n                }\n            });\n            var source = new ol.source.Vector({wrapX: false});\n\n            var annotations = new ol.layer.Vector({\n                source: source,\n                id: \"annotations\"\n            });\n\n            var annotationsObj = this.getAnnotations();\n            if (annotationsObj) {\n                var geojson = new ol.format.GeoJSON();\n                var features = geojson.readFeatures(annotationsObj);\n                source.addFeatures(features);\n            }\n\n            map.addLayer(annotations);\n\n            this.setDrawInteraction(\n                new ol.interaction.Draw({\n                    source: source,\n                    type: \"Polygon\",\n                    freehand: true,\n                    alias: \"draw\"\n                })\n            );\n            this.getDrawInteraction().on('drawend', function (evt) {\n                evt.feature.set('type', 'annotation');\n//                panel.setCurrentAnnotation(evt.feature);\n                panel.editAnnotation(evt.feature);\n//                panel.getContentEl().setHtml('<textarea class=\"annotation-text\" rows=\"5\" cols=\"60\"></textarea>'+\n//                    '<button class=\"saveAnnotation\">Save</button><button class=\"deleteAnnotation\">Cancel</button>');\n//                panel.getContentEl().down('.deleteAnnotation').dom.onclick = function() {panel.deleteAnnotation()};\n//                panel.getContentEl().down('.saveAnnotation').dom.onclick = function() {panel.saveAnnotation()};\n//                panel.getOverlay().setPosition(evt.feature.getGeometry().getLastCoordinate());\n//                panel.getContentEl().down('.annotation-text').dom.focus();\n            });\n\n            /*\n            map.getViewport().addEventListener('contextmenu', function (e) {\n                e.preventDefault();\n                panel.openContextMenu(e.layerX, e.layerY);\n                return false;\n            }, false);\n            */\n\n            this.setMap(map);\n\n            var zoom = this.getTargetEl().down(\".ol-zoom\");\n            Ext.create('Ext.Button', {\n                glyph:'xf075@FontAwesome',\n                cls: 'annotate',\n                renderTo: this.getTargetEl().down(\".ticker\").parent(),\n                tooltip: this.localize('annotateTip'),\n                enableToggle: true,\n                toggleHandler: function(cmp, state) {\n                    if (state) {\n                        this.getMap().addInteraction(this.getDrawInteraction());\n                    } else {\n                        this.getMap().removeInteraction(this.getDrawInteraction());\n                    }\n                },\n                scope: this\n            })\n\n            // simulate adding a filter\n            this.getDockedComponent('bottomToolbar').getComponent('addFilter').click();\n        } else {\n            Ext.defer(this.tryInit, 500, this); // try again in a half second\n        }\n    },\n    \n    editAnnotation: function(feature) {\n    \t\tvar text = feature.get(\"text\"), buttons = [];\n    \t\tExt.Msg.show({\n    \t\t\ttitle: this.localize(\"editAnnotation\"),\n    \t\t\tmessage: this.localize(\"editAnnotationMessage\"),\n    \t\t\tbuttons: Ext.Msg.OKCANCEL,\n            multiline: true,\n            value: text,\n            scope: this,\n            callback: function(btn, val) {\n            \t\tif (btn=='ok') {\n            \t\t\tif (val==\"\") {\n            \t\t\t\tthis.getMap().getLayer(\"annotations\").getSource().removeFeature(feature);\n            \t\t\t} else {\n            \t\t\t\tfeature.set(\"text\", val);\n            \t\t\t}\n            \t        var geojson  = new ol.format.GeoJSON;\n            \t        var features = this.getMap().getLayer(\"annotations\").getSource().getFeatures();\n            \t        var transformedFeatures = [];\n            \t        var projection = this.getProjection();\n            \t        features.forEach(function (feature) {\n            \t            transformedFeature = feature.clone();\n            \t            transformedFeature.getGeometry().transform(projection?projection:'EPSG:3857', 'EPSG:3857');\n            \t            transformedFeatures.push(transformedFeature);\n            \t        })\n            \t        var json = geojson.writeFeatures(transformedFeatures);\n            \t        this.storeAnnotations(json);\n            \t\t}\n            }\n    \t\t})\n\n    },\n\n    /*\n    deleteAnnotation: function() {\n        this.body.down('.ol-popup').down(\".ol-popup-closer\").dom.click();\n        this.getMap().getLayer(\"annotations\").getSource().removeFeature(this.getCurrentAnnotation());\n        var geojson  = new ol.format.GeoJSON;\n        var features = this.getMap().getLayer(\"annotations\").getSource().getFeatures();\n        var transformedFeatures = [];\n        var projection = this.getProjection();\n        features.forEach(function (feature) {\n            transformedFeature = feature.clone();\n            transformedFeature.getGeometry().transform(projection?projection:'EPSG:3857', 'EPSG:3857');\n            transformedFeatures.push(transformedFeature);\n        })\n        var json = geojson.writeFeatures(transformedFeatures);\n        this.storeAnnotations(json);\n//        localStorage['annotations'] = JSON.stringify(json);\n    },\n    */\n\n    storeAnnotations: function(json) {\n        this.mask(\"storingAnnotations\");\n        var me = this;\n        Ext.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: {\n                tool: 'resource.StoredResource',\n                storeResource: JSON.stringify(json)\n            },\n            scope: this\n        }).then(function(response) {\n            me.unmask();\n            var data = Ext.JSON.decode(response.responseText);\n            me.setApiParam(\"annotationsId\", data.storedResource.id);\n            me.toastInfo(me.localize('annotationsUpdated'));\n        }, function(response) {\n            me.unmask();\n            me.showResponseError(me.localize(\"annotationsUpdateFailed\"), response);\n        });\n    },\n\n    /*\n    saveAnnotation: function() {\n        this.getCurrentAnnotation().set(\"text\", this.getContentEl().down('.annotation-text').dom.value);\n        this.getOverlay().setPosition(undefined);\n//        if(this.getDrawMode()) {\n//            this.getDockedComponent('bottomToolbar').getComponent('annotate').click();\n//        }\n        var geojson  = new ol.format.GeoJSON;\n        var features = this.getMap().getLayer(\"annotations\").getSource().getFeatures();\n        var transformedFeatures = [];\n        var projection = this.getProjection();\n        features.forEach(function (feature) {\n            transformedFeature = feature.clone();\n            transformedFeature.getGeometry().transform(projection?projection:'EPSG:3857', 'EPSG:3857');\n            transformedFeatures.push(transformedFeature);\n        })\n        var json = geojson.writeFeatures(transformedFeatures);\n        this.storeAnnotations(json);\n//        localStorage['annotations'] = JSON.stringify(json);\n    },\n    */\n\n    // Style for vector after animation\n    travelStyleFunction: function(feature, resolution) {\n\n        var stroke = new ol.style.Stroke({\n            color: feature.get('color'),\n            width: feature.get('width')\n        });\n\n        var styles = [\n            new ol.style.Style({\n                stroke: stroke\n            })];\n\n        // Add arrow at the end of vectors\n        var geometry = feature.getGeometry();\n        var end = geometry.getLastCoordinate();\n        var beforeEnd = geometry.getCoordinateAt(0.9);\n        var dx = end[0] - beforeEnd[0];\n        var dy = end[1] - beforeEnd[1];\n        var rotation = Math.atan2(dy, dx);\n\n        var lineStr1 = new ol.geom.LineString([end, [end[0] - 10 * resolution, end[1] + 10 * resolution]]);\n        lineStr1.rotate(rotation, end);\n        var lineStr2 = new ol.geom.LineString([end, [end[0] - 10 * resolution, end[1] - 10 * resolution]]);\n        lineStr2.rotate(rotation, end);\n\n        styles.push(new ol.style.Style({\n            geometry: lineStr1,\n            stroke: stroke\n        }));\n        styles.push(new ol.style.Style({\n            geometry: lineStr2,\n            stroke: stroke\n        }));\n\n        return styles;\n    },\n\n    // Style for cities\n    cityStyleFunction: function(feature, resolution) {\n        if(feature.get(\"visible\")) {\n            var diameter = Math.PI * 2 * feature.get(\"width\");\n            var confArc = feature.get(\"confidence\") ? diameter * feature.get(\"confidence\") : diameter;\n            return (new ol.style.Style({\n                image: new ol.style.Circle({\n                    radius: feature.get(\"width\"),\n                    fill: new ol.style.Fill({\n                        color: feature.get(\"color\")\n                    }),\n                    stroke: new ol.style.Stroke({\n                        lineDash: [confArc, diameter - confArc],\n                        color: 'rgb(255, 255, 255)',\n                        width: 2\n                    })\n                })\n            }));\n        } else {\n            return false;\n        }\n    },\n\n    // Style for vector during animation\n    animationStyleFunction: function (feature) {\n        return [new ol.style.Style({\n            stroke: new ol.style.Stroke({\n                color: feature.get(\"color\"),\n                width: 5\n            })\n        }), new ol.style.Style({\n            geometry: new ol.geom.Circle(feature.getGeometry().getFirstCoordinate()),\n            stroke: new ol.style.Stroke({\n                color: \"white\",\n                width: 10\n            })\n        }), new ol.style.Style({\n            geometry: new ol.geom.Circle(feature.getGeometry().getLastCoordinate()),\n            stroke: new ol.style.Stroke({\n                color: \"white\",\n                width: 10\n            })\n        })];\n    },\n\n    showTermInCorpus: function(docIndex, position, location) {\n        var term = Ext.create(\"Voyant.data.model.Context\", {\n            docIndex: docIndex,\n            position: position,\n            term: location\n        });\n        this.getApplication().dispatchEvent('termLocationClicked', this, [term]);\n    },\n   \n    /**\n     * Update all filters\n     */\n    reloadFilters: function() {\n        this.getFilterWidgets().each(function(filter) {\n        \t\tfilter.loadGeonames();\n        }, this);\n    },\n\n    filterUpdate: function(filter) {\n        var panel = this;\n        filter.clearAnimation();\n\n        var map = this.getMap(), color = filter.getColor();\n\n        var citiesMaxCount = parseInt(this.getApiParam(\"citiesMaxCount\"));\n\n        // determine max rawFreq for sizing\n        var max = 0;\n        filter.getGeonames().eachCity(function(city) {if (city.rawFreq>max) {max=city.rawFreq;}}, this, citiesMaxCount);\n\n        // generate cities\n        var layerSource = map.getLayer(filter.getId()+\"-cities\").getSource();\n\n        var hide = Ext.Array.from(this.getApiParam(\"hide\"));\n\n        layerSource.clear();\n        var minPopulation = parseInt(this.getApiParam(\"minPopulation\"));\n        var citiesMinFreq = parseInt(this.getApiParam(\"citiesMinFreq\"));\n        var validCitiesHash = {};\n\n        filter.getGeonames().eachCity(function(city) {\n\n            if ((!minPopulation || city.population>=minPopulation) && (!citiesMinFreq || city.rawFreq>=citiesMinFreq)) {\n                validCitiesHash[city.id]=true;\n                var coordinates = [parseFloat(city.lng), parseFloat(city.lat)]\n                var feature = new ol.Feature({\n\n                    geometry: new ol.geom.Point(coordinates).transform(ol.proj.get('EPSG:4326'), panel.getProjection()?panel.getProjection():ol.proj.get('EPSG:3857')),\n                    text: city.label + \" (\"+city.rawFreq+\")\",\n                    description: city.label,\n                    color: color,\n                    selected: false,\n                    width: 3+ (Math.sqrt(city.rawFreq/max)*20),\n                    visible: true,\n                    coordinates: coordinates,\n                    forms: city.forms,\n                    cityId: city.id,\n                    type: \"city\",\n                    confidence: city.confidence ? city.confidence*100 : undefined\n                });\n                layerSource.addFeature(feature);\n            }\n        }, this, citiesMaxCount);\n\n        if (layerSource.getFeatures().length>0) {\n            map.getView().fit(layerSource.getExtent());\n        }\n\n        map.getLayer(filter.getId()+\"-cities\").setVisible(Ext.Array.contains(hide, \"cities\")==false);\n\n        layerSource = map.getLayer(filter.getId()+\"-connections\").getSource();\n        layerSource.clear();\n\n        if (Object.keys(validCitiesHash).length==0) {\n            this.toastInfo(\"No cities available for current criteria.\");\n        }\n\n        max = 0;\n        filter.getGeonames().eachConnection(function(connection) {\n            if (connection.rawFreq>max) {max=connection.rawFreq;}\n        }, this);\n\n        // we'll go through all collections to see if we have valid cities\n        var counter = 0,\n            maxConnectionsCount = parseInt(this.getApiParam('connectionsMaxCount')),\n            connectionsMinFreq = parseInt(this.getApiParam('connectionsMinFreq'));\n        filter.getGeonames().eachConnection(function(connection) {\n            if ((!connectionsMinFreq || connection.rawFreq>=connectionsMinFreq) && (!maxConnectionsCount || counter<maxConnectionsCount) && connection.source.id in validCitiesHash && connection.target.id in validCitiesHash && (!minPopulation || (connection.source.population>=minPopulation && connection.target.population>=minPopulation))) {\n                var arcGenerator = new arc.GreatCircle(\n                    {x: connection.source.lng, y: connection.source.lat},\n                    {x: connection.target.lng, y: connection.target.lat});\n                var arcLine = arcGenerator.Arc(100, {offset: 100});\n                var label = connection.source.label+\" -> \"+connection.target.label + \" (\"+connection.rawFreq+\")\"\n                arcLine.geometries.forEach(function(geometry) {\n                    var line = new ol.geom.LineString(geometry.coords);\n                    line.transform(ol.proj.get('EPSG:4326'), panel.getProjection()?panel.getProjection():ol.proj.get('EPSG:3857'));\n                    var feature = new ol.Feature({\n                        geometry: line,\n                        text: label,\n                        color: color,\n                        width: 3+ (Math.sqrt(connection.rawFreq/max)*10),\n                        source: connection.source.id,\n                        target: connection.target.id,\n                        type: \"connection\"\n                    });\n                    layerSource.addFeature(feature);\n                }, this);\n                counter++;\n            }\n        }, this);\n\n        map.getLayer(filter.getId()+\"-connections\").setVisible(Ext.Array.contains(hide, \"connections\")==false)\n\n        filter.animate();\n\n    },\n    \n    handleSingleClick: function(event) {\n        var features = this.getMap().getFeaturesAtPixel(event.pixel);\n        if (features) {\n        \t\tfor (var i=0; i<features.length; i++) {\n        \t\t\tvar feature = features[i];\n        \t\t\tvar featureType = feature.get(\"type\")\n        \t\t\tif (featureType=='city') {\n        \t\t\t\tthis.handleLocationClick(event, feature);\n        \t\t\t\tbreak;\n        \t\t\t} else if (featureType==\"connection\") {\n        \t\t\t\tthis.handleConnectionClick(feature, event.pixel[0], event.pixel[1]);\n        \t\t\t\tbreak;\n        \t\t\t}else if (featureType==\"annotation\") {\n        \t\t\t\tthis.editAnnotation(feature);\n        \t\t\t\tbreak;\n        \t\t\t}\n        \t\t}\n        }\n\n    },\n    \n    handleConnectionClick: function(feature, x, y) {\n\t\tExt.create('Ext.menu.Menu', {\n\t\t\titems: [{\n    \t\t\t\ttext: this.localize(\"viewConnections\"),\n    \t\t\t\ttooltip: this.localize(\"viewConnectionsTip\"),\n    \t\t\t\tglyph: 'xf02d@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tthis.mask(\"loadingConnections\");\n    \t\t\t\t\tvar me = this;\n    \t\t            Ext.Ajax.request({\n    \t\t                url: this.getTromboneUrl(),\n    \t\t                params: {\n    \t\t                    tool: 'corpus.Dreamscape',\n    \t\t                    corpus: this.getCorpus().getId(),\n    \t\t                    suppressLocations: true,\n    \t\t                    suppressConnections: true,\n    \t\t                    sourceId: feature.get(\"source\"),\n    \t\t                    targetId: feature.get(\"target\"),\n    \t\t                    context: 2,\n    \t\t                    limit: 25\n    \t\t                },\n    \t\t                scope: this\n    \t\t            }).then(function(response) {\n\t                \t\tme.unmask();\n    \t\t                var data = Ext.JSON.decode(response.responseText);\n    \t\t                if (data && data.dreamscape && data.dreamscape.connectionOccurrences) {\n    \t\t                \t\tvar out = \"<table style='font-size:smaller'>\";\n    \t\t                \t\tdata.dreamscape.connectionOccurrences.connectionOccurrences.forEach(function(occurrence) {\n    \t\t                \t\t\tout+=\"<tr><td style='text-align: right'>\"+occurrence.source.left+\"</td><td class='keyword' style='text-align: center'>\"+\n    \t\t                \t\t\t\toccurrence.source.term+\"</td><td>\"+occurrence.source.right+\"</td><td>\u2026</td><td style='text-align: right'>\"+occurrence.target.left+\"</td><td class='keyword' style='text-align: center'>\"+\n    \t\t                \t\t\t\toccurrence.target.term+\"</td><td>\"+occurrence.target.right+\"</td></tr>\";\n    \t\t                \t\t})\n    \t\t                \t\tout += \"</table>\";\n    \t\t                \t\tExt.Msg.alert(me.localize(\"occurrences\"), out);\n    \t\t                }\n    \t\t            }, function(response) {\n\t                \t\tme.unmask();\n                \t\t\treturn me.showError(me.localize(\"occurrencesNotLoaded\"))\t    \t\t                \t\t\t\n    \t\t            });\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t\t}]\n\t\t}).showAt(x, y)\n    },\n    \n    \n    handleLocationClick: function(event, feature) {\n\t\tvar currentGeonameId = feature.get(\"cityId\");\n\t\tvar e = Ext.create('Ext.menu.Menu', {\n\t\t\titems: [{\n    \t\t\t\ttext: this.localize(\"viewOccurrences\"),\n    \t\t\t\ttooltip: this.localize(\"viewOccurrencesTip\"),\n    \t\t\t\tglyph: 'xf02d@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tthis.mask(\"loadingOccurrences\");\n    \t\t\t\t\tvar me = this;\n    \t\t            Ext.Ajax.request({\n    \t\t                url: this.getTromboneUrl(),\n    \t\t                params: {\n    \t\t                    tool: 'corpus.Dreamscape',\n    \t\t                    corpus: this.getCorpus().getId(),\n    \t\t                    suppressLocations: true,\n    \t\t                    suppressConnections: true,\n    \t\t                    suppressConnectionOccurrences: true,\n    \t\t                    locationId: currentGeonameId,\n    \t\t                    limit: 25\n    \t\t                },\n    \t\t                scope: this\n    \t\t            }).then(function(response) {\n\t                \t\tme.unmask();\n    \t\t                var data = Ext.JSON.decode(response.responseText);\n    \t\t                if (data && data.dreamscape && data.dreamscape.occurrences) {\n    \t\t                \t\tvar out = \"<table style='font-size:smaller'>\";\n    \t\t                \t\tdata.dreamscape.occurrences.occurrences.forEach(function(occurrence) {\n    \t\t                \t\t\tout+=\"<tr><td style='text-align: right'>\"+occurrence.left+\"</td><td class='keyword' style='text-align: center'>\"+occurrence.term+\"</td><td>\"+occurrence.right+\"</td></tr>\";\n    \t\t                \t\t})\n    \t\t                \t\tout += \"</table>\";\n    \t\t                \t\tExt.Msg.alert(me.localize(\"occurrences\"), out);\n    \t\t                }\n    \t\t            }, function(response) {\n\t                \t\tme.unmask();\n                \t\t\treturn me.showError(me.localize(\"occurrencesNotLoaded\"))\t    \t\t                \t\t\t\n    \t\t            });\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t\t},{\n    \t\t\t\ttext: this.localize(\"openInVoyant\"),\n    \t\t\t\ttooltip: this.localize(\"openInVoyantTip\"),\n    \t\t\t\tglyph: 'xf08e@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tthis.dispatchEvent('termsClicked', this, feature.get(\"forms\"));\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t\t},{\n    \t\t\t\ttext: this.localize(\"editLocation\"),\n    \t\t\t\ttooltip: this.localize(\"editLocationTip\"),\n    \t\t\t\tglyph: 'xf124@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tthis.mask(\"loadingAlternatives\");\n    \t\t\t\t\tvar me = this;\n    \t\t            Ext.Ajax.request({\n    \t\t                url: this.getTromboneUrl(),\n    \t\t                params: {\n    \t\t                    tool: 'util.Geonames',\n    \t\t                    query: feature.get(\"forms\")\n    \t\t                },\n    \t\t                scope: this\n    \t\t            }).then(function(response) {\n\t                \t\tme.unmask();\n    \t\t                var data = Ext.JSON.decode(response.responseText);\n    \t\t                if (data && data.geonames && data.geonames.locations) {\n    \t\t                \t\tvar items = []; \t\t \n    \t\t                \t\tObject.values(data.geonames.locations.locations).forEach(function(location) {\n    \t\t                \t\t\titems.push({\n    \t\t                \t\t\t\tboxLabel: location.label+\" (\"+location.population+\")\",\n    \t\t                \t\t\t\tname: 'id',\n    \t\t                \t\t\t\tinputValue: location.id,\n    \t\t                \t\t\t\tchecked: location.id==currentGeonameId\n    \t\t                \t\t\t})\n    \t\t                \t\t})\n    \t\t                \t\tif (items.length==0) {\n    \t\t                \t\t\treturn me.showError(me.localize(\"editLocationNoLocationsFound\"))\n    \t\t                \t\t} else if (items.length==1 && items[0].inputValue==currentGeonameId) {\n    \t\t                \t\t\treturn me.showError(me.localize(\"editLocationNoAlternativesFound\"))\t    \t\t                \t\t\t\n    \t\t                \t\t}\n\t    \t\t                \tExt.create('Ext.window.Window', {\n\t\t\t\t\t\t\t\ttitle: me.localize(\"editLocation\"),\n\t\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\txtype: 'form',\n\t\t\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\t        xtype: 'radiogroup',\n\t\t\t\t\t\t\t\t        columns: 1,\n\t\t\t\t\t\t\t\t        vertical: true,\n\t\t\t\t\t\t\t\t        items: items\n\t\t\t\t\t\t\t\t    }],\n\t\t\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\t\t\tafterrender: function(form) {\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\t\t\t\t\ttext: me.localize(\"cancel\"),\n\t\t\t\t\t\t\t            ui: 'default-toolbar',\n\t\t\t\t\t\t                glyph: 'xf00d@FontAwesome',\n\t\t\t\t\t\t        \t\t\tflex: 1,\n\t\t\t\t\t\t        \t\t\thandler: function(btn) {\n\t\t\t\t\t\t        \t\t\t\tbtn.up('window').destroy();\n\t\t\t\t\t\t        \t\t\t}\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\ttext: me.localize(\"confirmTitle\"),\n\t\t\t\t\t\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t\t\t\t\t            \t\t\tflex: 1,\n\t\t\t\t\t            \t\t\thandler: function(btn) {\n\t\t\t\t\t            \t\t\t\tvar newId = btn.up(\"form\").getValues().id;\n\t\t\t\t\t            \t\t\t\tif (newId && newId!=currentGeonameId) {\n\t\t\t\t\t    \t\t\t\t\t\t\tvar config = {};\n\t\t\t\t\t    \t\t\t\t\t\t\tconfig[currentGeonameId] = newId;\n\t\t\t\t\t    \t\t\t\t\t\t\tme.appendOverrides(config);\n\t\t\t\t\t            \t\t\t\t}\n\t\t\t\t\t\t        \t\t\t\tbtn.up('window').destroy();\n\t\t\t\t\t            \t\t\t}\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).show();\n    \t\t                }\n    \t\t            }, function(response) {\n\t                \t\tme.unmask();\n    \t\t                me.showResponseError(me.localize(\"editLocationServerError\"), response);\n\n    \t\t            });\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t},{\n    \t\t\t\ttext: this.localize(\"removeLocation\"),\n    \t\t\t\ttooltip: this.localize(\"removeLocationTip\"),\n    \t\t\t\tglyph: 'xf00d@FontAwesome',\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tExt.Msg.confirm(\n\t    \t\t\t\t\tthis.localize(\"removeLocationConfirmTitle\"),\n\t    \t\t\t\t\tthis.localize(\"removeLocationConfirm\"),\n\t    \t\t\t\t\tfunction(btn) {\n\t    \t\t\t\t\t\tif (btn==\"yes\") {\n\t    \t\t\t\t\t\t\tvar config = {};\n\t    \t\t\t\t\t\t\tconfig[currentGeonameId] = \"\";\n\t    \t\t\t\t\t\t\tthis.appendOverrides(config);\n\t    \t\t\t\t\t\t}\n\t    \t\t\t\t\t},\n\t    \t\t\t\t\tthis\n    \t\t\t\t\t)\n    \t\t\t\t},\n    \t\t\t\tscope: this\n\t\t\t}    \t\t\t\t\n\n\t\t\t],\n\t\t\tlisteners: {\n\t\t\t\tfocusleave : function(menu) {\n\t\t\t\t\tmenu.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}).showAt(event.pixel[0], event.pixel[1])    \t\t\n    },\n    \n    appendOverrides: function(config, isAll) {\n    \t\t// if we have overridesId defined but we haven't loaded all IDs yet\n    \t\tif (this.getApiParam(\"overridesId\") && !isAll) {\n    \t\t\tvar me = this;\n    \t\t\tExt.Ajax.request({\n                url: this.getTromboneUrl(),\n                params: {\n                    tool: 'resource.StoredResource',\n                    retrieveResourceId: this.getApiParam(\"overridesId\")\n                },\n                scope: this\n            }).then(function(response) {\n                var data = Ext.JSON.decode(response.responseText);\n                if (data && data.storedResource && data.storedResource.resource) {\n                \t\tvar newConfig = Ext.decode(data.storedResource.resource);\n                \t\tExt.apply(newConfig, config);\n                \t\t// call again, this time specifying that we have all\n                \t\tme.appendOverrides(newConfig, true);\n                } else {\n                    me.showResponseError(me.localize(\"overidesRetrieveError\"), response);\n                }\n            \t\n            }, function(response) {\n                me.showResponseError(me.localize(\"overidesRetrieveError\"), response);\n            });\n    \t\t} else {\n    \t\t\tvar me = this;\n    \t\t\tExt.Ajax.request({\n                url: this.getTromboneUrl(),\n                params: {\n                    tool: 'resource.StoredResource',\n                    storeResource: Ext.encode(config)\n                },\n                scope: this\n            }).then(function(response) {\n                var data = Ext.JSON.decode(response.responseText);\n                if (data && data.storedResource && data.storedResource.id) {\n                    me.setApiParam(\"overridesId\", data.storedResource.id);\n                    me.reloadFilters();\n                } else {\n                    me.showResponseError(me.localize(\"overidesRetrieveError\"), response);\n                }\n            }, function(response) {\n                me.showResponseError(me.localize(\"overidesStorageError\"), response);\n            });\n    \t\t}\n    }    \n\n});\n\nExt.define('Voyant.widget.GeonamesFilter', {\n    extend: 'Ext.Button',\n    xtype: 'geonamesfilter',\n    mixins: ['Voyant.util.Localization'],\n    statics: {\n        i18n: {\n            filter: 'Filter',\n            authorLabel: 'authors',\n            titleLabel: 'titles',\n            keywordLabel: 'full text',\n            pubDateLabel: \"dates\",\n            loading: \"Loading geographical information\u2026\",\n//            loadedAll: \"All available cities and connections have been loaded (see options under the <i>Show</i> menu in the toolbar).\",\n//            loadedSome: \"Loaded {currentCitiesCount} of {totalCitiesCount} available locations and {currentConnectionsCount} of {totalConnectionsCount} available connections (see options under the <b>Show</b> menu in the toolbar).\",\n//            disclaimer: \"Please note that geographical information is generated automatically and may be inaccurate (<a href='{url}' target='_blank'>more information</a>).</p>\",\n            disclaimer: \"This is an experimental tool and the accuracy of the data is variable (<a href='{url}' target='_blank'>see help</a>).\",\n            noDataForField: \"No data seems to be available for this field so it will be disabled.\",\n            close: \"Close\"\n        }\n    },\n    config: {\n        corpus: undefined, // used by querysearchfields among other things\n        geonames: undefined,\n        color: \"#f00\",\n        timeout: undefined,\n        currentConnectionOccurrence: undefined,\n        animationLayer: undefined,\n        millisPerAnimation: 2000,\n        stepByStepMode: false,\n        keepAnimationInFrame: false\n    },\n    constructor: function(config) {\n        config = config || {};\n        var geonames = new Voyant.data.util.Geonames({\n            corpus: config.corpus\n        });\n        this.setGeonames(geonames);\n        var me = this;\n        Ext.applyIf(config,\n            {\n                tooltip: this.localize('filterTip'),\n                style: \"background-color: white; color: \"+config.color,\n                glyph: 'xf0b0@FontAwesome',\n                menu: {\n                    defaults: {\n                        xtype: 'querysearchfield',\n                        labelWidth: 60,\n                        labelAlign: 'right',\n                        width: 250,\n                        maxWidth: 250,\n                        padding: 2,\n                        listeners: { // don't set scope to this so that load keeps the widget scope\n                            change: function(cmp, vals) {\n                                me.loadGeonames();\n                            },\n                            load: function(store, records, success, operation) {\n                                if (records.length==0 && operation.getParams().query==\"\") {\n                                    Ext.Msg.show({\n                                        buttonText: {ok: me.localize('close')},\n                                        icon: Ext.MessageBox.INFO,\n                                        message: me.localize(\"noDataForField\"),\n                                        buttons: Ext.Msg.OK\n                                    });\n                                    this.disable();\n                                }\n                            }\n                        }\n\n                    },\n                    items: [{\n                        fieldLabel: this.localize('authorLabel'),\n                        tokenType: 'author',\n                        itemId: 'author'\n                    },{\n                        fieldLabel: this.localize('titleLabel'),\n                        itemId: 'title',\n                        tokenType: 'title'\n                    },{\n                        fieldLabel: this.localize('keywordLabel')\n                    },{\n                        xtype: 'multislider',\n                        fieldLabel: this.localize('pubDateLabel'),\n                        itemId: 'pubDate',\n                        tokenType: 'pubDate',\n                        values: [0,1],\n                        hidden: true,\n                        listeners: {\n                            afterrender: function(cmp) {\n                                this.getCorpus().getCorpusTerms().load({\n                                    params: {\n                                        tokenType: 'pubDate',\n                                        limit: 1,\n                                        sort: \"TERMASC\"\n                                    },\n                                    callback: function(records) {\n                                        if (records.length==0) {\n                                            // no pubDate, see if we can parse from titles\n                                            var vals = [];\n                                            this.getCorpus().each(function(doc) {\n                                                var val = parseInt(doc.getTitle());\n                                                if (isNaN(val)==false) {\n                                                    vals.push(parseInt(doc.getTitle()))\n                                                }\n                                            }, this);\n                                            if (vals.length>1) {\n                                                cmp.setMinValue(vals[0]);\n                                                cmp.setMaxValue(vals[vals.length-1]);\n                                                cmp.tokenType = 'title';\n                                                cmp.suspendEvent('changecomplete');\n                                                cmp.setValue([vals[0], vals[vals.length-1]]);\n                                                cmp.resumeEvent('changecomplete');\n                                                cmp.setVisible(true);\n                                            }\n                                        } else {\n                                            cmp.setMinValue(parseInt(records[0].getTerm()))\n                                            this.getCorpus().getCorpusTerms().load({\n                                                params: {\n                                                    tokenType: 'pubDate',\n                                                    limit: 1,\n                                                    sort: \"TERMDESC\"\n                                                },\n                                                callback: function(records) {\n                                                    cmp.setMaxValue(parseInt(records[0].getTerm())),\n                                                        cmp.setVisible(true);\n                                                },\n                                                scope: this\n                                            });\n                                        }\n                                    },\n                                    scope: this\n                                })\n                            },\n                            changecomplete: function(cmp, newVal) {\n                                this.loadGeonames();\n                            },\n                            scope: this\n                        }\n                    }, {\n                        xtype: 'fieldset',\n                        title: \"Animation\",\n                        items: [{\n                            xtype: 'container',\n                            layout: 'hbox',\n                            defaults: {\n                                xtype: 'button',\n                                text: \"\",\n                                ui: 'default-toolbar'\n                            },\n                            items: [{\n                                glyph: 'xf048@FontAwesome', // step back\n                                handler: function() {\n                                    this.getAnimationLayer().getSource().clear();\n                                    this.clearAnimation();\n                                    var currentConnectionOccurrence = this.getCurrentConnectionOccurrence();\n                                    currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(currentConnectionOccurrence ? currentConnectionOccurrence.index-1 : 0);\n                                    this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                                    this.animate();\n                                },\n                                scope: this\n                            },{\n                                glyph: 'xf04c@FontAwesome', // play\n                                handler: function(cmp) {\n                                    if (cmp.getGlyph().glyphConfig==\"xf04b@FontAwesome\") {\n                                        this.clearAnimation();\n                                        cmp.setGlyph(new Ext.Glyph('xf04c@FontAwesome'));\n                                        this.setStepByStepMode(false);\n                                        this.animate();\n                                    } else {\n                                        cmp.setGlyph(new Ext.Glyph('xf04b@FontAwesome'));\n//                                         this.clearAnimation();\n//                                         this.getAnimationLayer().getSource().clear();\n                                        this.setStepByStepMode(true);\n                                    }\n//                                     this.setCurrentConnectionOccurrence(this.getGeonames().getConnectionOccurrence(0));\n                                },\n                                scope: this\n\n                            },{\n                                glyph: 'xf051@FontAwesome', // step forward\n                                handler: function() {\n                                    this.getAnimationLayer().getSource().clear();\n                                    this.clearAnimation();\n                                    var currentConnectionOccurrence = this.getCurrentConnectionOccurrence();\n                                    currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(currentConnectionOccurrence ? currentConnectionOccurrence.index+1 : 0);\n                                    this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                                    this.animate();\n                                },\n                                scope: this\n                            }, {\n                                xtype: 'tbtext',\n                                text: \"&nbsp;&nbsp;\"\n                            }, {\n                                glyph: 'xf01e@FontAwesome', // reset\n                                handler: function() {\n                                    this.getAnimationLayer().getSource().clear();\n                                    this.clearAnimation();\n                                    this.setCurrentConnectionOccurrence(this.getGeonames().getConnectionOccurrence(0));\n                                    this.animate();\n                                },\n                                scope: this\n                            }]\n                        }, {\n                            xtype: 'checkbox',\n                            checked: false,\n                            handler: function(item, checked) {\n                                me.setKeepAnimationInFrame(checked);\n                            },\n                            boxLabel: \"Keep animation in frame\"\n                        }]\n\n                    },{\n                        xtype: \"container\",\n                        text: \"&nbsp;\"\n                    },{\n                        xtype: 'button',\n                        text: 'remove',\n                        scope:this,\n                        //margin: 3,\n                        handler: function(cmp) {\n                            // assumes coupling with dreamscape\n                            this.fireEvent(\"removeFilterWidget\", this);\n                            cmp.ownerCt.ownerCmp.destroy();\n                        }\n                    }]\n                }\n            });\n        this.callParent([config]);\n        this.on(\"afterrender\", function(cmp) {\n            cmp.getTargetEl().down('.x-btn-glyph').setStyle('color', this.getColor());\n            var panel = cmp.up(\"panel\")\n            panel.mask(cmp.localize(\"loading\"));\n            cmp.loadGeonames().then(function(geonames) {\n                panel.unmask();\n                if (panel.getFilterWidgets().getCount()==1) {\n                    var currentCitiesCount = geonames.getCitiesCount(),\n                        totalCitiesCount = geonames.getTotalCitiesCount(),\n                        currentConnectionsCount = geonames.getConnectionsCount(),\n                        totalConnectionsCount = geonames.getTotalConnectionsCount();\n                    message = cmp.localize(currentCitiesCount==totalCitiesCount && currentConnectionsCount==totalConnectionsCount ? \"loadedAll\" : \"loadedSome\") +\n                        \"<br><br>\"+cmp.localize(\"disclaimer\");\n                    panel.toastInfo({\n                        autoCloseDelay: 5000,\n\n                        closable: true,\n                        maxWidth: '90%',\n                        html: new Ext.Template(cmp.localize(\"disclaimer\")).apply({\n                            currentCitiesCount: currentCitiesCount,\n                            totalCitiesCount: totalCitiesCount,\n                            currentConnectionsCount: currentConnectionsCount,\n                            totalConnectionsCount: totalConnectionsCount,\n                            url: panel.getBaseUrl()+\"docs/#!/guide/dreamscape\"\n                        })\n\n                    });\n                }\n            })\n        }, this);\n    },\n    loadGeonames: function(params) {\n        var me = this;\n        params = params || {};\n\n        // add queries\n        var queries  = [];\n        this.query('querysearchfield').forEach(function(querysearchfield) {\n            var id = querysearchfield.getItemId();\n            querysearchfield.getValue().forEach(function(query) {\n                queries.push(id+\":\"+query);\n            })\n        });\n        var pubDateSlider = this.down(\"multislider\");\n        if (pubDateSlider && pubDateSlider.isVisible()) {\n            var vals = pubDateSlider.getValue();\n            queries.push(pubDateSlider.tokenType+\":[\"+vals[0]+\"-\"+vals[1]+\"]\")\n        }\n        if (queries.length>0 && !(\"query\" in params)) {params.query=queries;}\n\n        // add params from tool\n        var panel  = this.up('panel');\n        if (panel && panel.getApiParams) {\n            Ext.applyIf(params, panel.getApiParams([\"minPopulation\",\"connectionsMaxCount\",\"connectionsMinFreq\",\"source\",\"overridesId\",\"filterHasLowerCaseForm\",\"filterIsPersonName\",\"preferredCoordinates\"]))\n        }\n\n        this.mask(\"\u2026\");\n        var geonames = this.getGeonames();\n        return geonames.load(params).then(function() {\n            me.unmask();\n            me.fireEvent(\"filterUpdate\", me, geonames);\n            return geonames;\n        });\n    },\n\n    clearAnimation: function() {\n        if (this.getTimeout()) {clearTimeout(this.getTimeout());}\n    },\n\n    animate: function() {\n        var panel = this.up('panel');\n        if (!panel) {return;}\n        this.clearAnimation();\n        var currentConnectionOccurrence = this.getCurrentConnectionOccurrence();\n        if (currentConnectionOccurrence) {\n            var animationLayer = this.getAnimationLayer();\n            if (!animationLayer) {\n                animationLayer = this.up('panel').getMap().getLayer(this.getId()+\"-animation\");\n                this.setAnimationLayer(animationLayer);\n            }\n            if (animationLayer) {\n                var features = animationLayer.getSource().getFeatures();\n                if (features.length==0) {\n                    if (!panel) {return;}\n                    var connectionsLayerSource = panel.getMap().getLayer(this.getId()+\"-connections\").getSource();\n                    var connectionsFeatures = connectionsLayerSource.getFeatures();\n                    var hasMatch = false;\n                    for (var i=0, len=connectionsFeatures.length; i<len; i++) {\n                        if (currentConnectionOccurrence.source.id==connectionsFeatures[i].get(\"source\") && currentConnectionOccurrence.target.id==connectionsFeatures[i].get(\"target\")) {\n                            hasMatch = connectionsFeatures[i];\n                            break;\n                        }\n                    }\n                    if (hasMatch) {\n                        // check to see if we need to reposition the map, use displayed feature as basis for extent\n                        if(this.getKeepAnimationInFrame()) {\n                            var map = panel.getMap();\n                            var extent = panel.getMap().getView().calculateExtent(map.getSize());\n                            var isVisible = ol.extent.containsExtent(extent, hasMatch.getGeometry().getExtent());\n                            if(!isVisible) {\n                                newExtent = ol.extent.extend(extent, hasMatch.getGeometry().getExtent());\n                                map.getView().fit(newExtent);\n                            }\n                        }\n\n                        var arcGenerator = new arc.GreatCircle(\n                            {x: currentConnectionOccurrence.source.lng, y: currentConnectionOccurrence.source.lat},\n                            {x: currentConnectionOccurrence.target.lng, y: currentConnectionOccurrence.target.lat});\n                        var arcLine = arcGenerator.Arc(100, {offset: 100});\n                        var label = currentConnectionOccurrence.source.label+\" -> \"+currentConnectionOccurrence.target.label;\n                        arcLine.geometries.forEach(function(geometry) {\n                            var line = new ol.geom.LineString([]); // can be empty since we generate a line during next animate call\n                            line.transform(ol.proj.get('EPSG:4326'), panel.getProjection()?panel.getProjection():ol.proj.get('EPSG:3857'));\n                            var feature = new ol.Feature({\n                                geometry: line,\n                                allcoords: geometry.coords ,\n                                text: label,\n                                color: this.getColor(),\n                                width: 5,\n                                start: new Date().getTime()\n                            });\n                            animationLayer.getSource().addFeature(feature);\n                        }, this);\n\n                        var ticker = panel.body.down(\".ticker\");\n\n                        panel.body.down(\".ticker\").setHtml(\n                            currentConnectionOccurrence.source.left+\" <span class='keyword'>\"+currentConnectionOccurrence.source.term+\"</span> \"+currentConnectionOccurrence.source.right+\" \u2026 \"+\n                            currentConnectionOccurrence.target.left+\" <span class='keyword'>\"+currentConnectionOccurrence.target.term+\"</span> \"+currentConnectionOccurrence.target.right\n                        );\n                        return this.setTimeout(setTimeout(this.animate.bind(this), 1));\n\n                    } else {\n                        if (!this.getGeonames()) {return;}\n                        currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(currentConnectionOccurrence.index+1);\n                        this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                        animationLayer.getSource().clear();\n                        return this.setTimeout(setTimeout(this.animate.bind(this), 1));\n\n                    }\n                } else if (features.length>0) {\n\n                    var coords = features[0].getGeometry().getCoordinates(),\n                        allcoords = features[0].get(\"allcoords\");\n                    if (coords.length<allcoords.length) {\n                        var elapsed = new Date().getTime()-features[0].get('start'),\n                            len = elapsed*allcoords.length/this.getMillisPerAnimation()\n                        line = new ol.geom.LineString(allcoords.slice(0,len));\n                        line.transform(ol.proj.get('EPSG:4326'), panel.getProjection()?panel.getProjection():ol.proj.get('EPSG:3857'));\n                        features[0].set(\"geometry\", line);\n                        return this.setTimeout(setTimeout(this.animate.bind(this), 25));\n\n                    }\n                    // if we get here, all features should have been changed\n                    currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(currentConnectionOccurrence.index+1);\n                    if(!this.getStepByStepMode()) {\n                        this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                        animationLayer.getSource().clear();\n                        return this.setTimeout(setTimeout(this.animate.bind(this), 1));\n                    }\n                }\n            }\n        } else {\n            if (!this.getGeonames()) {return;}\n            currentConnectionOccurrence = this.getGeonames().getConnectionOccurrence(0);\n            if (currentConnectionOccurrence) {\n                this.setCurrentConnectionOccurrence(currentConnectionOccurrence);\n                return this.setTimeout(setTimeout(this.animate.bind(this), 1));\n            }\n        }\n    }\n});\n","// assuming Knots library is loaded by containing page (via voyant.jsp)\r\nExt.define('Voyant.panel.Knots', {\r\n\textend: 'Ext.panel.Panel',\r\n\tmixins: ['Voyant.panel.Panel'],\r\n\talias: 'widget.knots',\r\n    statics: {\r\n    \ti18n: {\r\n    \t},\r\n    \tapi: {\r\n    \t\t/**\r\n        \t * @property query A string to search for in a document.\r\n        \t * @type String\r\n    \t\t * @private\r\n        \t */\r\n    \t\tquery: null,\r\n    \t\t/**\r\n    \t\t * @property stopList The stop list to use to filter results.\r\n    \t\t * Choose from a pre-defined list, or enter a comma separated list of words, or enter an URL to a list of stop words in plain text (one per line).\r\n    \t\t * @type String\r\n    \t\t * @private\r\n    \t\t */\r\n    \t\tstopList: 'auto',\r\n    \t\t/**\r\n    \t\t * @property docId The document ID to restrict results to.\r\n    \t\t * @type String\r\n    \t\t * @private\r\n    \t\t */\r\n    \t\tdocId: undefined,\r\n    \t\t\r\n    \t\taudio: false\r\n    \t},\r\n    \tglyph: 'xf06e@FontAwesome'\r\n\t},\r\n\tconfig: {\r\n\t\tknots: undefined,\r\n\t\ttermStore: undefined,\r\n\t\tdocTermStore: undefined,\r\n\t\ttokensStore: undefined,\r\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'},{xtype: 'colorpaletteoption'}],\r\n    \trefreshInterval: 100,\r\n    \tstartAngle: 315,\r\n    \tangleIncrement: 15,\r\n    \tcurrentTerm: undefined\r\n\t},\r\n\t\r\n\ttermTpl: new Ext.XTemplate(\r\n\t\t'<tpl for=\".\">',\r\n\t\t\t'<div class=\"term\" style=\"color: rgb({color});float: left;padding: 3px;margin: 2px;\">{term}</div>',\r\n\t\t'</tpl>'\r\n\t),\r\n\t\r\n    constructor: function() {\r\n        this.callParent(arguments);\r\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\r\n    \t\r\n    \tthis.on('loadedCorpus', function(src, corpus) {\r\n    \t\tvar firstDoc = corpus.getDocument(0);\r\n    \t\tvar pDoc = this.processDocument(firstDoc);\r\n    \t\tthis.getKnots().setCurrentDoc(pDoc);\r\n    \t\t\r\n    \t\tthis.setApiParams({docId: firstDoc.getId()});\r\n    \t\tthis.getDocTermStore().getProxy().setExtraParam('corpus', corpus.getId());\r\n    \t\tthis.getTokensStore().setCorpus(corpus);\r\n    \t\tthis.getDocTermStore().load({params: {\r\n\t\t    \tlimit: 5,\r\n\t\t    \tstopList: this.getApiParams('stopList')\r\n\t\t    }});\r\n    \t}, this);\r\n    \t\r\n        this.on('activate', function() { // load after tab activate (if we're in a tab panel)\r\n\t\t\tif (this.getCorpus()) {\t\t\t\t\r\n\t\t\t\tExt.Function.defer(function() {\r\n\t\t\t\t\tthis.getDocTermStore().load({params: {\r\n\t\t\t\t    \tlimit: 5,\r\n\t\t\t\t    \tstopList: this.getApiParams('stopList')\r\n\t\t\t\t    }});\r\n\t\t\t\t}, 100, this);\r\n\t\t\t}\r\n    \t}, this);\r\n        \r\n        this.on('query', function(src, query) {\r\n    \t\tif (query !== undefined && query != '') {\r\n    \t\t\tthis.getDocTermsFromQuery(query);\r\n    \t\t}\r\n    \t}, this);\r\n        \r\n        this.on('documentSelected', function(src, doc) {\r\n        \t\r\n        \tvar document = this.getCorpus().getDocument(doc)\r\n        \tthis.setApiParam('docId', document.getId());\r\n        \t\r\n        \tvar terms = this.getKnots().currentDoc.terms;\r\n        \tvar termsToKeep = [];\r\n        \tfor (var t in terms) {\r\n        \t\ttermsToKeep.push(t);\r\n        \t}\r\n        \t\r\n//        \tthis.getTermStore().removeAll();\r\n    \t\tthis.setApiParams({query: termsToKeep});\r\n    \t\t\r\n    \t\tvar limit = termsToKeep.length;\r\n    \t\tif (limit === 0) {\r\n    \t\t\tlimit = 5;\r\n    \t\t}\r\n        \t\r\n        \tthis.getKnots().setCurrentDoc(this.processDocument(document));\r\n        \t\r\n        \tthis.getDocTermStore().load({params: {\r\n\t\t    \tquery: termsToKeep,\r\n\t\t    \tlimit: limit,\r\n\t\t    \tstopList: this.getApiParams('stopList')\r\n\t\t    }});\r\n        }, this);\r\n        \r\n        this.on('termsClicked', function(src, terms) {\r\n    \t\tvar queryTerms = [];\r\n    \t\tterms.forEach(function(term) {\r\n    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\r\n    \t\t\telse if (term.term) {queryTerms.push(term.term);}\r\n    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\r\n    \t\t});\r\n    \t\tif (queryTerms.length > 0) {\r\n    \t\t\tthis.getDocTermsFromQuery(queryTerms);\r\n    \t\t}\r\n\t\t}, this);\r\n        \r\n\t\tthis.on('corpusTermsClicked', function(src, terms) {\r\n\t\t\tvar queryTerms = [];\r\n    \t\tterms.forEach(function(term) {\r\n    \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\r\n    \t\t});\r\n    \t\tthis.getDocTermsFromQuery(queryTerms);\r\n\t\t}, this);\r\n\t\t\r\n\t\tthis.on('documentTermsClicked', function(src, terms) {\r\n\t\t\tvar queryTerms = [];\r\n    \t\tterms.forEach(function(term) {\r\n    \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\r\n    \t\t});\r\n    \t\tthis.getDocTermsFromQuery(queryTerms);\r\n\t\t}, this);\r\n    },\r\n    \r\n    initComponent: function() {\r\n    \tthis.setTermStore(Ext.create('Ext.data.ArrayStore', {\r\n\t        fields: ['term', 'color']\r\n\t    }));\r\n    \t\r\n    \tthis.setDocTermStore(Ext.create(\"Ext.data.Store\", {\r\n\t\t\tmodel: \"Voyant.data.model.DocumentTerm\",\r\n    \t\tautoLoad: false,\r\n    \t\tremoteSort: false,\r\n    \t\tproxy: {\r\n\t\t\t\ttype: 'ajax',\r\n\t\t\t\turl: Voyant.application.getTromboneUrl(),\r\n\t\t\t\textraParams: {\r\n\t\t\t\t\ttool: 'corpus.DocumentTerms',\r\n\t\t\t\t\twithDistributions: 'raw',\r\n\t\t\t\t\twithPositions: true\r\n\t\t\t\t},\r\n\t\t\t\treader: {\r\n\t\t\t\t\ttype: 'json',\r\n\t\t            rootProperty: 'documentTerms.terms',\r\n\t\t            totalProperty: 'documentTerms.total'\r\n\t\t\t\t},\r\n\t\t\t\tsimpleSortMode: true\r\n   \t\t     },\r\n   \t\t     listeners: {\r\n   \t\t    \t beforeload: function(store) {\r\n   \t\t    \t\t store.getProxy().setExtraParam('docId', this.getApiParam('docId'));\r\n   \t\t    \t },\r\n   \t\t    \t load: function(store, records, successful, options) {\r\n   \t\t    \t\tvar termObj = {};\r\n   \t\t    \t\tif (records && records.length>0) {\r\n   \t   \t\t    \t\trecords.forEach(function(record) {\r\n   \t   \t\t    \t\t\tvar termData = this.processTerms(record);\r\n   \t   \t\t    \t\t\tvar docId = record.get('docId');\r\n   \t   \t\t    \t\t\tvar term = record.get('term');\r\n   \t   \t\t    \t\t\ttermObj[term] = termData;\r\n   \t   \t\t    \t\t}, this);\r\n   \t   \t\t    \t\tthis.getKnots().addTerms(termObj);\r\n   \t   \t\t    \t\tthis.getKnots().buildGraph();\r\n   \t\t    \t\t}\r\n   \t\t    \t\telse {\r\n   \t\t    \t\t\tthis.toastInfo({\r\n   \t\t    \t\t\t\thtml: this.localize(\"noTermsFound\"),\r\n   \t\t    \t\t\t\talign: 'bl'\r\n   \t\t    \t\t\t})\r\n   \t\t    \t\t}\r\n   \t\t\t\t},\r\n   \t\t\t\tscope: this\r\n   \t\t     }\r\n    \t}));\r\n    \t\r\n    \tthis.setTokensStore(Ext.create(\"Voyant.data.store.Tokens\", {\r\n        \tstripTags: \"all\",\r\n        \tlisteners: {\r\n        \t\tbeforeload: function(store) {\r\n  \t\t    \t\t store.getProxy().setExtraParam('docId', this.getApiParam('docId'));\r\n  \t\t    \t},\r\n        \t\tload: function(store, records, successful, options) {\r\n        \t\t\tvar context = '';\r\n        \t\t\tvar currTerm = this.getCurrentTerm();\r\n        \t\t\trecords.forEach(function(record) {\r\n        \t\t\t\tif (record.getPosition() == currTerm.tokenId) {\r\n        \t\t\t\t\tcontext += '<strong>'+record.getTerm()+'</strong>';\r\n        \t\t\t\t} else {\r\n        \t\t\t\t\tcontext += record.getTerm();\r\n        \t\t\t\t}\r\n        \t\t\t});\r\n        \t\t\t\r\n        \t\t\tExt.Msg.show({\r\n        \t\t\t\ttitle: this.localize('context'),\r\n        \t\t\t\tmessage: context,\r\n        \t\t\t\tbuttons: Ext.Msg.OK,\r\n        \t\t\t    icon: Ext.Msg.INFO\r\n        \t\t\t});\r\n        \t\t},\r\n   \t\t\t\tscope: this\r\n        \t}\r\n        }));\r\n    \t\r\n    \tExt.apply(this, {\r\n    \t\ttitle: this.localize('title'),\r\n    \t\tdockedItems: [{\r\n                dock: 'bottom',\r\n                xtype: 'toolbar',\r\n                overflowHandler: 'scroller',\r\n                items: [{\r\n                \txtype: 'querysearchfield'\r\n                },{\r\n\t            \ttext: this.localize('clearTerms'),\r\n\t            \tglyph: 'xf00d@FontAwesome',\r\n\t            \thandler: function() {\r\n\t            \t\tthis.down('#termsView').getSelectionModel().deselectAll(true);\r\n\t            \t\tthis.getTermStore().removeAll();\r\n\t            \t\tthis.setApiParams({query: null});\r\n\t            \t\tthis.getKnots().removeAllTerms();\r\n\t            \t\tthis.getKnots().drawGraph();\r\n\t            \t},\r\n\t            \tscope: this\r\n\t            },{\r\n\t            \txtype: 'documentselectorbutton',\r\n\t            \tsingleSelect: true\r\n\t            },{\r\n\t\t\t\t\txtype: 'slider',\r\n\t\t\t\t\titemId: 'speed',\r\n\t\t\t\t\tfieldLabel: this.localize(\"speed\"),\r\n\t\t\t\t\tlabelAlign: 'right',\r\n\t\t\t\t\tlabelWidth: 50,\r\n\t\t\t\t\twidth: 100,\r\n\t\t\t\t\tincrement: 50,\r\n\t\t\t\t\tminValue: 0,\r\n\t\t\t\t\tmaxValue: 500,\r\n\t\t\t\t\tvalue: 500-this.getRefreshInterval(),\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tchangecomplete: function(slider, newvalue) {\r\n\t\t\t\t\t\t\tthis.setRefreshInterval(500-newvalue);\r\n\t\t\t\t\t\t\tif (this.getKnots()) {this.getKnots().buildGraph();}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t}\r\n\t\t\t\t},{\r\n\t\t\t\t\txtype: 'slider',\r\n\t\t\t\t\titemId: 'startAngle',\r\n\t\t\t\t\tfieldLabel: this.localize('startAngle'),\r\n\t\t\t\t\tlabelAlign: 'right',\r\n\t\t\t\t\tlabelWidth: 35,\r\n\t\t\t\t\twidth: 85,\r\n\t\t\t\t\tincrement: 15,\r\n\t\t\t\t\tminValue: 0,\r\n\t\t\t\t\tmaxValue: 360,\r\n\t\t\t\t\tvalue: this.getStartAngle(),\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tchangecomplete: function(slider, newvalue) {\r\n\t\t\t\t\t\t\tthis.setStartAngle(newvalue);\r\n\t\t\t\t\t\t\tif (this.getKnots()) {this.getKnots().buildGraph();}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t}\r\n\t\t\t\t},{\r\n\t\t\t\t\txtype: 'slider',\r\n\t\t\t\t\titemId: 'tangles',\r\n\t\t\t\t\tfieldLabel: this.localize('tangles'),\r\n\t\t\t\t\tlabelAlign: 'right',\r\n\t\t\t\t\tlabelWidth: 30,\r\n\t\t\t\t\twidth: 80,\r\n\t\t\t\t\tincrement: 5,\r\n\t\t\t\t\tminValue: 5,\r\n\t\t\t\t\tmaxValue: 90,\r\n\t\t\t\t\tvalue: this.getAngleIncrement(),\r\n\t\t\t\t\tlisteners: {\r\n\t\t\t\t\t\tchangecomplete: function(slider, newvalue) {\r\n\t\t\t\t\t\t\tthis.setAngleIncrement(newvalue);\r\n\t\t\t\t\t\t\tif (this.getKnots()) {this.getKnots().buildGraph();}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tscope: this\r\n\t\t\t\t\t}\r\n\t\t\t\t},{\r\n\t                xtype: 'checkbox',\r\n\t                boxLabel: this.localize('sound'),\r\n\t                listeners: {\r\n\t                \trender: function(cmp) {\r\n\t                \t\tcmp.setValue(this.getApiParam(\"audio\")===true ||  this.getApiParam(\"audio\")==\"true\")\r\n\t    \t\t        \tExt.tip.QuickTipManager.register({\r\n\t    \t\t        \t\ttarget: cmp.getEl(),\r\n\t   \t\t                 \ttext: this.localize('soundTip')\r\n\t    \t\t        \t});\r\n\t                \t\t\r\n\t                \t},\r\n\t                \tbeforedestroy: function(cmp) {\r\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\r\n\t                \t},\r\n\t                    change: function(cmp, val) {\r\n\t                    \tif (this.getKnots()) {\r\n\t\t                    \tthis.getKnots().setAudio(val);\r\n\t                    \t}\r\n\t                    },\r\n\t                    scope: this\r\n\t                }\r\n\t            }]\r\n    \t\t}],\r\n            border: false,\r\n            layout: 'fit',\r\n            items: {\r\n            \tlayout: {\r\n            \t\ttype: 'vbox',\r\n            \t\talign: 'stretch'\r\n            \t},\r\n            \tdefaults: {border: false},\r\n\t            items: [{\r\n\t            \theight: 30,\r\n\t            \titemId: 'termsView',\r\n\t            \txtype: 'dataview',\r\n\t            \tstore: this.getTermStore(),\r\n\t            \ttpl: this.termTpl,\r\n\t            \titemSelector: 'div.term',\r\n\t            \toverItemCls: 'over',\r\n\t            \tselectedItemCls: 'selected',\r\n\t            \tselectionModel: {\r\n\t            \t\tmode: 'SIMPLE'\r\n\t            \t},\r\n//\t            \tcls: 'selected', // default selected\r\n\t            \tfocusCls: '',\r\n\t            \tlisteners: {\r\n\t            \t\tbeforeitemclick: function(dv, record, item, index, event, opts) {\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\tdv.fireEvent('itemcontextmenu', dv, record, item, index, event, opts);\r\n\t            \t\t\treturn false;\r\n\t            \t\t},\r\n\t            \t\tbeforecontainerclick: function() {\r\n\t            \t\t\t// cancel deselect all\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\treturn false;\r\n\t            \t\t},\r\n\t            \t\tselectionchange: function(selModel, selections) {\r\n\t            \t\t\tvar dv = this.down('#termsView');\r\n\t            \t\t\tvar terms = [];\r\n\t            \t\t\t\r\n\t            \t\t\tdv.getStore().each(function(r) {\r\n\t            \t\t\t\tif (selections.indexOf(r) !== -1) {\r\n\t            \t\t\t\t\tterms.push(r.get('term'));\r\n\t            \t\t\t\t\tExt.fly(dv.getNodeByRecord(r)).removeCls('unselected').addCls('selected');\r\n\t            \t\t\t\t} else {\r\n\t            \t\t\t\t\tExt.fly(dv.getNodeByRecord(r)).removeCls('selected').addCls('unselected');\r\n\t            \t\t\t\t}\r\n\t            \t\t\t});\r\n\t            \t\t\t\r\n\t            \t\t\tthis.getKnots().termsFilter = terms;\r\n\t            \t\t\tthis.getKnots().drawGraph();\r\n\t            \t\t},\r\n\t            \t\titemcontextmenu: function(dv, record, el, index, event) {\r\n\t            \t\t\tevent.preventDefault();\r\n\t            \t\t\tevent.stopPropagation();\r\n\t            \t\t\tvar isSelected = dv.isSelected(el);\r\n\t            \t\t\tvar menu = new Ext.menu.Menu({\r\n\t            \t\t\t\tfloating: true,\r\n\t            \t\t\t\titems: [{\r\n\t            \t\t\t\t\ttext: isSelected ? this.localize('hideTerm') : this.localize('showTerm'),\r\n\t            \t\t\t\t\thandler: function() {\r\n\t            \t\t\t\t\t\tif (isSelected) {\r\n\t            \t\t\t\t\t\t\tdv.deselect(index);\r\n\t            \t\t\t\t\t\t} else {\r\n\t            \t\t\t\t\t\t\tdv.select(index, true);\r\n\t            \t\t\t\t\t\t}\r\n\t            \t\t\t\t\t},\r\n\t            \t\t\t\t\tscope: this\r\n\t            \t\t\t\t},{\r\n\t            \t\t\t\t\ttext: this.localize('removeTerm'),\r\n\t            \t\t\t\t\thandler: function() {\r\n\t            \t\t\t\t\t\tdv.deselect(index);\r\n\t            \t\t\t\t\t\tvar term = this.getTermStore().getAt(index).get('term');\r\n\t            \t\t\t\t\t\tthis.getTermStore().removeAt(index);\r\n\t            \t\t\t\t\t\tdv.refresh();\r\n\t            \t\t\t\t\t\t\r\n\t            \t\t\t\t\t\tthis.getKnots().removeTerm(term);\r\n\t            \t\t\t\t\t\tthis.getKnots().drawGraph();\r\n\t            \t\t\t\t\t},\r\n\t            \t\t\t\t\tscope: this\r\n\t            \t\t\t\t}]\r\n\t            \t\t\t});\r\n\t            \t\t\tmenu.showAt(event.getXY());\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n\t            },{\r\n\t            \tflex: 1,\r\n\t            \txtype: 'container',\r\n\t            \tautoEl: 'div',\r\n\t            \titemId: 'canvasParent',\r\n\t            \tlayout: 'fit',\r\n\t            \toverflowY: 'auto',\r\n\t            \toverflowX: 'hidden'\r\n\t            }],\r\n\t            listeners: {\r\n\t            \trender: function(component) {\r\n\t            \t\tvar canvasParent = this.down('#canvasParent');\r\n\t                \tthis.setKnots(new Knots({\r\n\t                \t\tcontainer: canvasParent,\r\n\t                \t\tclickHandler: this.knotClickHandler.bind(this),\r\n\t                \t\taudio: this.getApiParam(\"audio\")===true ||  this.getApiParam(\"audio\")==\"true\"\r\n\t                \t}));\r\n\t            \t},\r\n            \t\tafterlayout: function(container) {\r\n            \t\t\tif (this.getKnots().initialized === false) {\r\n            \t\t\t\tthis.getKnots().initializeCanvas();\r\n            \t\t\t}\r\n            \t\t},\r\n\t        \t\tresize: function(cnt, width, height) {\r\n\t        \t\t\tthis.getKnots().doLayout();\r\n\t        \t\t},\r\n            \t\tscope: this\r\n            \t}\r\n            }\r\n\t\t});\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    updateRefreshInterval: function(value) {\r\n    \tif (this.getKnots()) {\r\n    \t\tif (value < 50) {\r\n    \t\t\tvalue = 50;\r\n    \t\t\tthis.getKnots().progressiveDraw = false;\r\n    \t\t} else {\r\n    \t\t\tthis.getKnots().progressiveDraw = true;\r\n    \t\t}\r\n    \t\tthis.getKnots().refreshInterval = value;\r\n\t\t\tthis.getKnots().buildGraph(this.getKnots().drawStep);\r\n    \t}\r\n    },\r\n    \r\n    updateStartAngle: function(value) {\r\n    \tif (this.getKnots()) {\r\n\t\t\tthis.getKnots().startAngle = value;\r\n\t\t\tthis.getKnots().recache();\r\n\t\t\tthis.getKnots().buildGraph();\r\n    \t}\r\n    },\r\n    \r\n    updateAngleIncrement: function(value) {\r\n    \tif (this.getKnots()) {\r\n\t    \tthis.getKnots().angleIncrement = value;\r\n\t\t\tthis.getKnots().recache();\r\n\t\t\tthis.getKnots().buildGraph();\r\n    \t}\r\n    },\r\n    \r\n    loadFromCorpusTerms: function(corpusTerms) {\r\n    \tif (this.getKnots()) { // get rid of existing terms\r\n    \t\tthis.getKnots().removeAllTerms();\r\n    \t\tthis.getTermStore().removeAll(true);\r\n    \t}\r\n\t\tcorpusTerms.load({\r\n\t\t    callback: function(records, operation, success) {\r\n\t\t    \tvar query = []; //this.getApiParam('query') || [];\r\n\t\t\t\tif (typeof query == 'string') query = [query];\r\n\t\t    \trecords.forEach(function(record, index) {\r\n\t\t\t\t\tquery.push(record.get('term'));\r\n\t\t\t\t}, this);\r\n\t\t    \tthis.getDocTermsFromQuery(query);\r\n\t\t    },\r\n\t\t    scope: this,\r\n\t\t    params: {\r\n\t\t    \tlimit: 5,\r\n\t\t    \tstopList: this.getApiParams('stopList')\r\n\t\t    }\r\n    \t});\r\n    },\r\n    \r\n    /**\r\n     * Get the results for the query(s) for each of the corpus documents.\r\n     * @param query {String|Array}\r\n     * @private\r\n     */\r\n    getDocTermsFromQuery: function(query) {\r\n    \tif (query) {this.setApiParam(\"query\", query);} // make sure it's set for subsequent calls\r\n    \tvar corpus = this.getCorpus();\r\n    \tif (corpus && this.isVisible()) {\r\n    \t\tthis.setApiParams({query: query}); // assumes docId already set\r\n\t\t\tthis.getDocTermStore().load({params: this.getApiParams()});\r\n    \t}\r\n\t},\r\n    \r\n\treloadTermsData: function() {\r\n\t\tvar terms = [];\r\n\t\tfor (var term in this.bubblelines.currentTerms) {\r\n\t\t\tterms.push(term);\r\n\t\t}\r\n\t\tthis.getDocTermsFromQuery(terms);\r\n\t},\r\n\t\r\n    filterDocuments: function() {\r\n\t\tvar docIds = this.getApiParam('docId');\r\n\t\tif (docIds == '') {\r\n\t\t\tdocIds = [];\r\n\t\t\tthis.getCorpus().getDocuments().each(function(item, index) {\r\n\t\t\t\tdocIds.push(item.getId());\r\n\t\t\t});\r\n\t\t\tthis.setApiParams({docId: docIds});\r\n\t\t}\r\n\t\tif (typeof docIds == 'string') docIds = [docIds];\r\n\t\t\r\n\t\tif (docIds == null) {\r\n\t\t\tthis.selectedDocs = this.getCorpus().getDocuments().clone();\r\n\t\t\tvar count = this.selectedDocs.getCount();\r\n\t\t\tif (count > 10) {\r\n\t\t\t\tfor (var i = 10; i < count; i++) {\r\n\t\t\t\t\tthis.selectedDocs.removeAt(10);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdocIds = [];\r\n\t\t\tthis.selectedDocs.eachKey(function(docId, doc) {\r\n\t\t\t\tdocIds.push(docId);\r\n\t\t\t}, this);\r\n\t\t\tthis.setApiParams({docId: docIds});\r\n\t\t} else {\r\n\t\t\tthis.selectedDocs = this.getCorpus().getDocuments().filterBy(function(doc, docId) {\r\n\t\t\t\treturn docIds.indexOf(docId) != -1;\r\n\t\t\t}, this);\r\n\t\t}\r\n\t},\r\n\t\r\n\t// produce format that knots can use\r\n\tprocessDocument: function(doc) {\r\n\t\tvar title = doc.getShortTitle();\r\n\t\ttitle = title.replace('&hellip;', '...');\r\n\t\r\n\t\treturn {\r\n\t\t\tid: doc.getId(),\r\n\t\t\tindex: doc.get('index'),\r\n\t\t\ttitle: title,\r\n\t\t\ttotalTokens: doc.get('tokensCount-lexical'),\r\n\t\t\tterms: {},\r\n\t\t\tlineLength: undefined\r\n\t\t};\r\n\t},\r\n\t\r\n\tprocessTerms: function(termRecord) {\r\n\t\tvar termObj;\r\n\t\tvar term = termRecord.get('term');\r\n\t\tvar rawFreq = termRecord.get('rawFreq');\r\n\t\tvar positions = termRecord.get('positions');\r\n\t\tif (rawFreq > 0) {\r\n\t\t\tvar color = this.getApplication().getColorForTerm(term);\r\n\t\t\tif (this.getTermStore().find('term', term) === -1) {\r\n\t\t\t\tthis.getTermStore().loadData([[term, color]], true);\r\n\t\t\t\tvar index = this.getTermStore().find('term', term);\r\n\t\t\t\tthis.down('#termsView').select(index, true); // manually select since the store's load listener isn't triggered\r\n\t\t\t}\r\n\t\t\tvar distributions = termRecord.get('distributions');\r\n\t\t\ttermObj = {term: term, positions: positions, distributions: distributions, rawFreq: rawFreq, color: color};\r\n\t\t} else {\r\n\t\t\ttermObj = false;\r\n\t\t}\r\n\t\t\r\n\t\treturn termObj;\r\n\t},\r\n\t\r\n\tknotClickHandler: function(data) {\r\n\t\tthis.setCurrentTerm(data);\r\n\t\tvar start = data.tokenId - 10;\r\n\t\tif (start < 0) start = 0;\r\n\t\tthis.getTokensStore().load({\r\n\t\t\tstart: start,\r\n\t\t\tlimit: 21\r\n\t\t});\r\n\t\t\r\n\t\tdata = [data].map(function(item) {return item.term}); // make an array for the event dispatch\r\n\t\tthis.getApplication().dispatchEvent('termsClicked', this, data);\r\n\t}\r\n});","Ext.define('Voyant.panel.Phrases', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.phrases',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tquery: undefined,\n    \t\tdocId: undefined,\n    \t\tdocIndex: undefined,\n    \t\tsort: 'length',\n    \t\tdir: 'desc',\n    \t\tminLength: 2,\n    \t\tmaxLength: 50,\n    \t\toverlapFilter: 'length'\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \t/**\n    \t * @private\n    \t */\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n    },\n    constructor: function(config) {\n    \t\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.isVisible()) {\n            \tif (this.hasCorpusAccess(corpus)==false) {\n            \t\tthis.mask(this.localize('limitedAccess'), 'mask-no-spinner');\n            \t} else {\n        \t\t\tthis.loadFromApis();\n            \t}\n    \t\t}\n    \t\t\n    \t});\n    \t\n    \tif (config.embedded) {\n//    \t\tvar cls = Ext.getClass(config.embedded).getName();\n//    \t\tif (cls==\"Voyant.data.store.DocumentTerms\" || cls==\"Voyant.data.model.Document\") {\n//    \t\t\tthis.fireEvent('loadedCorpus', this, config.embedded.getCorpus())\n//    \t\t}\n    \t}\n    \telse if (config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus)\n    \t}\n    \t\n    \tthis.on(\"corpusTermsClicked\", function(src, terms) {\n    \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n        \t\tvar query = [];\n        \t\tterms.forEach(function(term) {\n        \t\t\tquery.push(term.get(\"term\"));\n        \t\t})\n        \t\tthis.setApiParams({\n        \t\t\tquery: query,\n        \t\t\tdocId: undefined,\n        \t\t\tdocIndex: undefined\n        \t\t});\n        \t\tif (this.isVisible()) {\n            \t\tthis.getStore().load({params: this.getApiParams()});\n        \t\t}\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {this.loadFromApis()}\n    \t}, this)\n    \t\n    \tthis.on(\"query\", function(src, query) {\n    \t\tthis.setApiParam(\"query\", query);\n    \t\tthis.getStore().getProxy().setExtraParam(\"query\", query);\n    \t\tthis.loadFromApis();\n    \t}, this)\n    },\n    \n    loadFromApis: function() {\n    \tif (this.getStore().getCorpus()) {\n    \t\t\tthis.getStore().load({params: this.getApiParams()});\n    \t}\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        var store = Ext.create(\"Voyant.data.store.CorpusNgramsBuffered\", {\n        \tparentPanel: me\n        });\n        \n        store.on(\"beforeload\", function(store) {\n    \t\treturn me.hasCorpusAccess(store.getCorpus());\n        });\n        me.on(\"sortchange\", function( ct, column, direction, eOpts ) {\n        \tthis.setApiParam('sort', column.dataIndex);\n        \tthis.setApiParam('dir', direction);\n        \tvar api = this.getApiParams([\"stopList\", \"query\", \"docId\", \"docIndex\", \"sort\", \"dir\", \"minLength\", \"maxLength\", \"overlapFilter\"]);\n        \tvar proxy = this.getStore().getProxy();\n        \tfor (var key in api) {proxy.setExtraParam(key, api[key]);}\n        }, me)\n\n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : store,\n    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tvar terms = [];\n                    \t\tvar context = this.getApiParam(\"context\")\n                    \t\tselections.forEach(function(selection) {\n                    \t\t\tterms.push('\"'+selection.getTerm()+'\"')\n                    \t\t})\n                    \t\tthis.getApplication().dispatchEvent('termsClicked', this, terms);\n                    \t},\n                    \tscope: this\n                    }\n                }\n            }),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                }, '-', {\n                \ttext: me.localize('length'),\n                \ttooltip: 'test',\n                \txtype: 'label'\n                }, {\n                \txtype: 'slider',\n                \tminValue: 2,\n                \tvalues: [2, 30],\n                \tmaxValue: 30,\n                \tincrement: 1,\n                \twidth: 75,\n                \ttooltip: this.localize(\"lengthTip\"),\n                \tlisteners: {\n                \t\trender: {\n                \t\t\tfn: function(slider) {\n                \t\t\t\tvar values = slider.getValues();\n                \t\t\t\tslider.setValue(0, parseInt(this.getApiParam(\"minLength\", values[0])))\n                \t\t\t\tslider.setValue(1, parseInt(this.getApiParam(\"maxLength\", values[1])))\n\t                \t\t},\n\t                \t\tscope: me\n                \t\t},\n                \t\tchangecomplete: {\n                \t\t\tfn: function(slider, newValue) {\n                \t\t\t\tvar values = slider.getValues();\n                \t\t\t\tthis.setApiParam(\"minLength\", parseInt(values[0]));\n                \t\t\t\tthis.setApiParam(\"maxLength\", parseInt(values[1]));\n                        \t\tthis.getStore().load({params: this.getApiParams()});\n                    \t\t},\n                    \t\tscope: me\n                \t\t}\n                \t}\n                }, {\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}, '-', {\n                    xtype: 'button',\n                    text: this.localize('overlap'),\n                    tooltip: this.localize('overlapTip'),\n                    menu: {\n                    \titems: [\n                           {\n                        \t   xtype: 'menucheckitem',\n                               text: this.localize(\"overlapNone\"),\n                               group: 'overlap',\n                               inputValue: 'none',\n                               checkHandler: function() {\n                            \t   this.setApiParam('overlapFilter', 'none')\n                            \t   this.getStore().load({params: this.getApiParams()})\n                               },\n                               scope: this\n                           }, {\n                        \t   xtype: 'menucheckitem',\n                               text: this.localize(\"overlapLength\"),\n                               group: 'overlap',\n                               inputValue: 'length',\n                               checkHandler: function() {\n                            \t   this.setApiParam('overlapFilter', 'length')\n                            \t   this.getStore().load({params: this.getApiParams()})\n                               },\n                               scope: this\n                           }, {\n                        \t   xtype: 'menucheckitem',\n                               text: this.localize(\"overlapFreq\"),\n                               group: 'overlap',\n                               inputValue: 'rawFreq',\n                               checkHandler: function() {\n                            \t   this.setApiParam('overlapFilter', 'rawfreq')\n                            \t   this.getStore().load({params: this.getApiParams()})\n                               },\n                               scope: this\n                           }\n\t                   ],\n\t                   listeners: {\n\t                \t   afterrender: {\n\t                \t\t   fn: function(menu) {\n\t                \t\t\t   var overlapFilter = this.getApiParam('overlapFilter');\n\t                \t\t\t   menu.items.each(function(item) {\n\t                \t\t\t\t   if (item.group) {\n\t                \t\t\t\t\t   item.setChecked(item.inputValue==overlapFilter);\n\t                \t\t\t\t   }\n\t                \t\t\t   }, this)\n\t                \t\t   },\n\t                \t\t   scope: this\n\t                \t   }\n                \n\t                   }\n                    }\n                }]\n            }],\n    \t\tcolumns: [{\n    \t\t\ttext: this.localize(\"term\"),\n        \t\tdataIndex: 'term',\n            \ttooltip: this.localize(\"termTip\"),\n                sortable: true,\n                flex: 1\n            },{\n    \t\t\ttext: this.localize(\"rawFreq\"),\n        \t\tdataIndex: 'rawFreq',\n            \ttooltip: this.localize(\"termRawFreqTip\"),\n                sortable: true,\n                width: 'autoSize'\n            },{\n            \ttext: this.localize(\"length\"),\n            \tdataIndex: 'length',\n            \ttooltip: this.localize(\"lengthTip\"),\n            \tsortable: true,\n                width: 'autoSize'\n            },{\n                xtype: 'widgetcolumn',\n                text: this.localize(\"trend\"),\n                tooltip: this.localize('trendTip'),\n                width: 120,\n                dataIndex: 'distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                }\n            }],\n            \n            listeners: {\n\t\t\t\tcorpusSelected: function() {\n\t\t\t\t\tthis.setApiParams({docIndex: undefined, docId: undefined});\n\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t},\n\t\t\t\tdocumentsSelected: function(src, docs) {\n\t\t\t\t\tvar docIds = [];\n\t\t\t\t\tvar corpus = this.getStore().getCorpus();\n\t\t\t\t\tdocs.forEach(function(doc) {\n\t\t\t\t\t\tdocIds.push(corpus.getDocument(doc).getId())\n\t\t\t\t\t}, this);\n\t\t\t\t\tthis.setApiParams({docId: docIds, docIndex: undefined})\n\t\t\t\t\tthis.loadFromApis();\n\t\t\t\t},\n            \ttermsClicked: {\n            \t\tfn: function(src, terms) {\n                \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n                    \t\tvar queryTerms = [];\n                    \t\tterms.forEach(function(term) {\n                    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n                    \t\t\telse if (term.term) {queryTerms.push(term.term);}\n                    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n                    \t\t});\n                    \t\tif (queryTerms.length > 0) {\n                    \t\t\tthis.setApiParams({\n                    \t\t\t\tdocIndex: undefined,\n                    \t\t\t\tdocId: undefined,\n                    \t\t\t\tquery: queryTerms\n                    \t\t\t});\n                        \t\tif (this.isVisible()) {\n                            \t\tif (this.isVisible()) {\n                                \t\tthis.getStore().clearAndLoad({params: this.getApiParams()});\n                            \t\t}\n                        \t\t}\n                    \t\t}\n                \t\t}\n                \t},\n                \tscope: this\n            \t}\n            }\n        });\n\n        me.callParent(arguments);\n        \n        me.getStore().getProxy().setExtraParam(\"withDistributions\", true);\n        \n    }\n    \n})","/**\n * Corpus Terms tool, a grid that shows the terms in the corpus.\n * \n * <iframe src=\"../?corpus=austen&view=corpusterms\" style=\"max-width: 500px; height: 300px\"></iframe>\n * \n * The typical use is not to instantiate this class directly, but to embed the tool from a corpus.\n * \n * \t\tvar austen;\n * \t\tnew Corpus(\"austen\").then(function(corpus) {\n * \t\t\tausten = corpus;\n * \t\t\tausten.embed('CorpusTerms'); // simply embed\n * \t\t\tausten.embed('CorpusTerms', {query: '^lov*'}); // embed with query\n * \t\t});\n */\nExt.define('Voyant.panel.CorpusTerms', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.corpusterms',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String} stopList A comma-separated list of words, a named list or a URL to a plain text list, one word per line.\n    \t\t * \n    \t\t *  By default this is set to 'auto' which auto-detects the document's language and loads an appropriate list (if available for that language). Set this to blank to not use the default stopList.\n    \t\t *  \n    \t\t * For more information see the <a href=\"#!/guide/search\">Stopwords documentation</a>.\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String/String[]} query A query or array of queries (queries can be separated by a comma).\n    \t\t * \n    \t\t * For query syntax, see the <a href=\"#!/guide/search\">search documentation</a>.\n    \t\t */\n    \t\tquery: undefined,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} maxBins The maximum number of bins to use for distributions in Trend.\n    \t\t * \n    \t\t * By default this is set to 100 (in other words, if there are more than 100 documents in the corpus, they will be forced into 100 bins).\n    \t\t * Higher values are possible but it can cause performance issues and necessitate more data transfer (values for each one of the bins for each one of the terms).\n    \t\t * @cfg\n    \t\t */\n    \t\tmaxBins: 100,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String} comparisonCorpus An existing corpus to be used for comparison purposes.\n    \t\t * \n    \t\t * None of the columns visible by default use comparisonCorpus so this is an advanced parameter used when the \"Comparison\" column is shown.\n    \t\t * The comparison column shows the relative frequency of the term in the corpus compared to the relative frequency of the same term in a comparison corpus.\n    \t\t */\n    \t\tcomparisonCorpus: undefined\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \t/**\n    \t * @private\n    \t */\n    \toptions: [{\n    \t\txtype: 'stoplistoption'\n    \t},{xtype: 'categoriesoption'},{\n    \t\txtype: 'corpusselector',\n    \t\tname: 'comparisonCorpus',\n    \t\tfieldLabel: 'comparison corpus'\n    \t}]\n    },\n\t/**\n\t * @private\n\t */\n    constructor: function(config) {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    \n    initComponent: function() {\n        var me = this;\n\n        var store = Ext.create(\"Voyant.data.store.CorpusTermsBuffered\", {\n        \tparentPanel: this,\n        \tproxy: {\n        \t\textraParams: {\n        \t\t\twithDistributions: 'relative',\n        \t\t\tforTool: 'corpusterms'\n        \t\t}\n        \t}\n        });\n        \n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : store,\n    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n                pruneRemoved: false,\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tif (selections && selections.length>0) {\n                        \t\tthis.getApplication().dispatchEvent('corpusTermsClicked', this, selections);\n                    \t\t}\n                    \t},\n                    \tscope: this\n                    }\n                },\n                mode: 'SIMPLE'\n            }),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                }]\n            }],\n            \n            plugins: [{\n                ptype: 'rowexpander',\n                rowBodyTpl: new Ext.XTemplate('')\n            }],\n            viewConfig: {\n                listeners: {\n                    // TODO widget disappears when scrolled off screen\n                    expandbody: function(rowNode, record, expandRow, eOpts) {\n                        if (expandRow.textContent==='' || (eOpts && eOpts.force)) {\n                            Ext.create('Voyant.widget.CorpusTermSummary', {\n                                record: record,\n                                header: false,\n                                renderTo: expandRow.querySelector('div')\n                            });\n                        }\n                    },\n                    scope: this\n                }\n            },\n\n    \t\tcolumns: [{\n                xtype: 'rownumberer',\n                width: 'autoSize',\n                sortable: false\n            },{\n    \t\t\ttext: this.localize(\"term\"),\n            \ttooltip: this.localize(\"termTip\"),\n        \t\tdataIndex: 'term',\n        \t\tflex: 1,\n                sortable: true\n            },{\n            \ttext: this.localize(\"rawFreq\"),\n            \ttooltip: this.localize(\"rawFreqTip\"),\n            \tdataIndex: 'rawFreq',\n                width: 'autoSize',\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"relativeFreq\"),\n            \ttooltip: this.localize(\"relativeFreqTip\"),\n            \tdataIndex: 'relativeFreq',\n            \trenderer: function(val) {\n            \t\tvar percent = val*100;\n            \t\treturn Ext.util.Format.number(val*1000000, \"0,000\")/* + \" (%\"+\n            \t\t\t(val*100 <  .1 ? \"<0.1\" : Ext.util.Format.number(val*100, \"0.0\"))+\")\"*/\n            \t},\n                width: 'autoSize',\n                hidden: true,\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"relativePeakedness\"),\n            \ttooltip: this.localize(\"relativePeakednessTip\"),\n            \tdataIndex: 'relativePeakedness',\n            \trenderer: Ext.util.Format.numberRenderer(\"0,000.0\"),\n                width: 'autoSize',\n                hidden: true,\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"relativeSkewness\"),\n            \ttooltip: this.localize(\"relativeSkewnessTip\"),\n            \tdataIndex: 'relativeSkewness',\n            \trenderer: Ext.util.Format.numberRenderer(\"0,000.0\"),\n                width: 'autoSize',\n                hidden: true,\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"corpusComparisonDifference\"),\n            \ttooltip: this.localize(\"corpusComparisonDifferenceTip\"),\n            \tdataIndex: 'comparisonRelativeFreqDifference',\n            \trenderer: Ext.util.Format.numberRenderer(\"0,000.00000\"),\n                width: 'autoSize',\n                hidden: !this.getApiParam('comparisonCorpus'),\n            \tsortable: true,\n            \tlisteners: {\n            \t\tshow: function(ct, column, eopts) {\n            \t\t\tif (!me.getApiParam('comparisonCorpus')) {\n            \t\t\t\tme.showError(me.localize('noCorpusComparison'))\n            \t\t\t}\n            \t\t}\n            \t}\n            },{\n                xtype: 'widgetcolumn',\n                text: this.localize(\"trend\"),\n                tooltip: this.localize(\"trendTip\"),\n                flex: 1,\n                dataIndex: 'distributions',\n                widget: {\n                    xtype: 'sparklineline',\n                    tipTpl: new Ext.XTemplate('{[this.getDocumentTitle(values.x,values.y)]}', {\n                    \tgetDocumentTitle: function(docIndex, relativeFreq) {\n                    \t\treturn this.panel.store.getCorpus().getDocument(docIndex).getTitle()+\"<br>\"+this.panel.localize(\"relativeFreqLabel\")+\" \"+Ext.util.Format.number(relativeFreq*1000000, \"0,000\")\n                    \t},\n                    \tpanel: me \n                    })\n                }\n            }]\n        });\n        \n    \tme.on('loadedCorpus', function(src, corpus) {\n//    \t\tthis.setApiParam('query', undefined);\n    \t\tif (corpus.getDocumentsCount()>100) {\n    \t\t\tthis.getStore().getProxy().setExtraParam('bins', this.getApiParam('maxBins'));\n    \t\t}\n    \t\tif (this.isVisible()) {\n        \t\tthis.getStore().load()\n    \t\t}\n    \t}, me);\n    \t\n    \tme.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (me.getStore().getCorpus()) {\n    \t\t\tme.getStore().load({params: this.getApiParams()});\n    \t\t}\n    \t}, me);\n\n    \t\n    \tme.on(\"query\", function(src, query) {\n    \t\tthis.setApiParam('query', query);\n    \t\tthis.getStore().removeAll();\n    \t\tthis.getStore().load();\n    \t}, me);\n\n\n        me.callParent(arguments);\n        \n    }\n})\n","Ext.define('Voyant.panel.DocumentTerms', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\trequires: ['Voyant.data.store.DocumentTerms'],\n\talias: 'widget.documentterms',\n\tconfig: {\n\t\toptions: [{\n    \t\txtype: 'stoplistoption'\n    \t},{xtype: 'categoriesoption'}]\n    },\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tquery: undefined,\n    \t\tdocId: undefined,\n    \t\tdocIndex: undefined,\n    \t\tbins: 10\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    constructor: function(config) {\n    \t\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tvar store = this.getStore();\n    \t\tstore.setCorpus(corpus);\n    \t\tif (this.isVisible()) {\n        \t\tstore.load();\n    \t\t}\n    \t});\n    \t\n    \tif (config.embedded) {\n    \t\tif (window.console) {\n    \t\t\tconsole.warn(config.embedded.then);\n    \t\t}\n    \t\tvar cls = Ext.getClass(config.embedded).getName();\n    \t\tif (cls==\"Voyant.data.store.DocumentTerms\" || cls==\"Voyant.data.model.Document\") {\n    \t\t\tthis.fireEvent('loadedCorpus', this, config.embedded.getCorpus());\n    \t\t}\n    \t}\n    \telse if (config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus);\n    \t}\n    \t\n    \tthis.on(\"query\", function(src, query) {\n    \t\tthis.fireEvent(\"corpusTermsClicked\", src, query);\n    \t}, this);\n    \t\n    \tthis.on(\"corpusTermsClicked\", function(src, terms) {\n    \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n        \t\tvar query = [];\n        \t\tterms.forEach(function(term) {\n        \t\t\tquery.push(Ext.isString(term) ? term : term.get(\"term\"));\n        \t\t});\n        \t\tthis.setApiParams({\n        \t\t\tquery: query,\n        \t\t\tdocId: undefined,\n        \t\t\tdocIndex: undefined\n        \t\t});\n        \t\tif (this.isVisible()) {\n            \t\tthis.getStore().load({params: this.getApiParams()});\n        \t\t}\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"documentsClicked\", function(src, documents) {\n    \t\tvar docIds = [];\n    \t\tdocuments.forEach(function(doc) {docIds.push(doc.get('id'));});\n    \t\tthis.setApiParams({\n    \t\t\tdocId: docIds,\n    \t\t\tquery: undefined\n    \t\t});\n    \t\tif (this.isVisible()) {\n        \t\tthis.getStore().load({params: this.getApiParams()});\n    \t\t}\n    \t});\n    \t\n    \tthis.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {\n    \t\t\tthis.getStore().load({params: this.getApiParams()});\n    \t\t}\n    \t}, this);\n    },\n    \n    initComponent: function() {\n        var me = this;\n\n        var store = Ext.create(\"Voyant.data.store.DocumentTermsBuffered\", {parentPanel: this});\n        \n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n            store : store,\n    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tthis.getApplication().dispatchEvent('documentTermsClicked', this, selections);\n                    \t},\n                    \tscope: this\n                    }\n                },\n                pruneRemoved: false,\n    \t\t\tmode: 'SIMPLE'\n            }),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                }, {\n                    xtype: 'totalpropertystatus'\n                },{\n        \t\t\txtype: 'corpusdocumentselector'\n        \t\t}]\n            }],\n    \t\tcolumns: [{\n    \t\t\ttext: '#',\n    \t\t\twidth: 30,\n        \t\tdataIndex: 'docIndex',\n                sortable: true,\n                renderer: function(v) {return v+1;} // 0-based to 1-based\n            },{\n    \t\t\ttext: this.localize(\"term\"),\n        \t\tdataIndex: 'term',\n            \ttooltip: this.localize(\"termTip\"),\n                sortable: true,\n                flex: 1\n            },{\n            \ttext: this.localize(\"rawFreq\"),\n            \tdataIndex: 'rawFreq',\n            \ttooltip: this.localize(\"rawFreqTip\"),\n            \twidth: 'autoSize',\n            \tsortable: true\n            },{\n            \ttext: this.localize(\"relativeFreq\"),\n            \ttooltip: this.localize(\"relativeFreqTip\"),\n            \tdataIndex: 'relativeFreq',\n            \twidth: 'autoSize',\n            \tsortable: true,\n            \trenderer: Ext.util.Format.numberRenderer('0,000')\n            },{\n            \ttext: this.localize(\"tfidf\"),\n            \ttooltip: this.localize(\"tfidfTip\"),\n            \tdataIndex: 'tfidf',\n            \twidth: 'autoSize',\n            \tsortable: true,\n            \thidden: true,\n            \trenderer: Ext.util.Format.numberRenderer('0,000.000')\n            },{\n            \ttext: this.localize(\"zscore\"),\n            \ttooltip: this.localize(\"zscoreTip\"),\n            \tdataIndex: 'zscore',\n            \twidth: 'autoSize',\n            \tsortable: true,\n            \thidden: true,\n            \trenderer: Ext.util.Format.numberRenderer('0,000.000')\n            },{\n                xtype: 'widgetcolumn',\n                text: this.localize(\"trend\"),\n                tooltip: this.localize('trendTip'),\n                flex: 1,\n                dataIndex: 'distributions',\n                widget: {\n                    xtype: 'sparklineline'\n                }\n            }],\n            \n            listeners: {\n            \ttermsClicked: {\n            \t\tfn: function(src, terms) {\n                \t\tif (this.getStore().getCorpus()) { // make sure we have a corpus\n                    \t\tvar queryTerms = [];\n                    \t\tterms.forEach(function(term) {\n                    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n                    \t\t\telse if (term.term) {queryTerms.push(term.term);}\n                    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n                    \t\t});\n                    \t\tif (queryTerms.length > 0) {\n                    \t\t\tthis.setApiParams({\n                    \t\t\t\tdocIndex: undefined,\n                    \t\t\t\tdocId: undefined,\n                    \t\t\t\tquery: queryTerms\n                    \t\t\t});\n                        \t\tif (this.isVisible()) {\n                            \t\tif (this.isVisible()) {\n                                \t\tthis.getStore().load({params: this.getApiParams()});\n                            \t\t}\n                        \t\t}\n                    \t\t}\n                \t\t}\n                \t},\n                \tscope: this\n            \t}\n            }\n        });\n\n        me.callParent(arguments);\n        \n        me.getStore().getProxy().setExtraParam(\"withDistributions\", true);\n        \n    }\n    \n});\n","Ext.define('Voyant.panel.Documents', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel','Voyant.util.Downloadable'],\n\talias: 'widget.documents',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tquery: undefined,\n    \t\tdocIndex: undefined,\n    \t\tdocId: undefined\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    \n    MODE_EDITING: 'editing',\n    MODE_NORMAL: 'normal',\n    config: {\n    \toptions: [{\n    \t\txtype: 'stoplistoption'\n    \t},\n        \t{xtype: 'categoriesoption'}\n        ],\n    \tmode: this.MODE_NORMAL\n    },\n\n    constructor: function(config) {\n    \t\n    \tvar store = Ext.create(\"Voyant.data.store.Documents\", {\n    \t    selModel: {pruneRemoved: false},\n    \t    proxy: {\n    \t    \textraParams: {\n    \t    \t\tforTool: 'documents'\n    \t    \t}\n    \t    }\n    \t});\n    \t\n    \tvar dockedItemsItems = [{\n            xtype: 'querysearchfield'\n        }, {\n            xtype: 'totalpropertystatus'\n        }]\n    \t\n    \tvar me = this;\n    \t\n    \tif (!config || config.mode!=this.MODE_EDITING) {\n    \t\tdockedItemsItems.push({\n            \ttext: this.localize(\"modify\"),\n            \ttooltip: this.localize(\"modifyTip\"),\n    \t\t\tglyph: 'xf044@FontAwesome',\n    \t\t\tscope: this,\n    \t\t\titemId: 'modifyButton',\n            \thandler: function(btn) {\n            \t\tvar win = Ext.create('Ext.window.Window', {\n            \t\t    title: this.localize(\"title\"),\n            \t\t    modal: true,\n            \t\t    width: \"80%\",\n            \t\t    minWidth: 300,\n            \t\t    minHeight: 200,\n            \t\t    height: \"80%\",\n            \t\t    layout: 'fit',\n            \t\t    frame: true,\n            \t\t    border: true,\n            \t\t    items: {\n            \t\t    \txtype: 'documents',\n            \t\t    \tmode: this.MODE_EDITING,\n            \t\t    \tcorpus: this.getStore().getCorpus(),\n            \t\t    \theader: false,\n            \t\t    \tviewConfig: {\n            \t\t            plugins:{\n            \t\t                ptype:'gridviewdragdrop'\n            \t\t            },\n            \t\t            listeners: {\n            \t\t            \tbeforedrop: function(node, data, overModel, dropPosition, dropHandlers) {\n            \t\t            \t\tif (this.getStore().getCount()<this.getStore().getCorpus().getDocumentsCount()) {\n            \t\t            \t\t\tvar panel = this.up(\"panel\");\n            \t\t        \t\t\t\tExt.Msg.show({\n            \t\t        \t\t\t\t    title: panel.localize('error'),\n            \t\t        \t\t\t\t    message: panel.localize('reorderFilteredError'),\n            \t\t        \t\t\t\t    buttons: Ext.Msg.OK,\n            \t\t        \t\t\t\t    icon: Ext.Msg.ERROR\n            \t\t        \t\t\t\t});\n            \t\t            \t\t\treturn false;\n            \t\t            \t\t}\n            \t\t            \t\treturn true;\n            \t\t            \t}\n            \t\t            }\n            \t\t    \t}\n            \t\t    },\n            \t\t    buttons: [{\n                \t\t\ttext: this.localize('add'),\n                \t\t\ttooltip: this.localize(\"addTip\"),\n                \t\t\tglyph: 'xf067@FontAwesome',\n                \t\t\thandler: function(btn) {\n                \t\t\t\tbtn.up(\"window\").close();\n                \t\t\t\tExt.create('Ext.window.Window', {\n                \t\t\t\t\theader: false,\n                        \t\t    modal: true,\n                        \t\t    layout: 'fit',\n                        \t\t    items: {\n                        \t\t    \txtype: 'corpuscreator',\n                        \t\t    \tcorpus: this.getStore().getCorpus()\n                        \t\t    }\n                        \t\t}).show();\n                \t\t\t},\n                \t\t\tscope: this\n                \t\t}, {\n                \t\t\ttext: this.localize('remove'),\n                \t\t\ttooltip: this.localize(\"removeTip\"),\n                \t\t\tglyph: 'xf05e@FontAwesome',\n                \t\t\thidden: this.getStore().getCorpus().getDocumentsCount()==1,\n                \t\t\thandler: this.keepRemoveReorderHandler,\n                \t\t\titemId: 'remove',\n                \t\t\tscope: this\n                \t\t}, {\n                \t\t\ttext: this.localize('keep'),\n                \t\t\ttooltip: this.localize(\"keepTip\"),\n                \t\t\tglyph: 'xf00c@FontAwesome',\n                \t\t\thidden: this.getStore().getCorpus().getDocumentsCount()==1,\n                \t\t\thandler: this.keepRemoveReorderHandler,\n                \t\t\titemId: 'keep',\n                \t\t\tscope: this\n                \t\t}, {\n                \t\t\ttext: this.localize('reorder'),\n                \t\t\ttooltip: this.localize(\"reorderTip\"),\n                \t\t\tglyph: 'xf0dc@FontAwesome',\n                \t\t\thidden: this.getStore().getCorpus().getDocumentsCount()==1,\n                \t\t\thandler: this.keepRemoveReorderHandler,\n                \t\t\titemId: 'reorder',\n                \t\t\tscope: this\n                \t\t},{\n            \t\t        text: 'Cancel',\n                \t\t\tglyph: 'xf00d@FontAwesome',\n            \t\t        handler: function(btn) {\n            \t\t        \tbtn.up(\"window\").close();\n            \t\t        }\n            \t\t    }]\n            \t\t}).show();\n\n            \t}\n    \t\t}, {\n    \t\t\ttext: this.localize('downloadButton'),\n\t\t    \tglyph: 'xf019@FontAwesome',\n    \t\t\titemId: 'downloadButton',\n    \t\t\thandler: function() {\n    \t\t\t\tme.downloadFromCorpusId(me.getStore().getCorpus().getId())\n    \t\t\t}\n    \t\t})\n    \t}\n    \t\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n\t    \tcolumns:[\n\t    \t   {\n\t    \t\t   xtype: 'rownumberer',\n\t    \t        renderer: function(value, metaData, record) {return record.getIndex()+1},\n\t    \t        sortable: false\n\t    \t    },{\n\t    \t        text: this.localize('documentTitle'),\n\t    \t        dataIndex: 'title',\n\t    \t        sortable: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getTitle();},\n\t    \t        flex: 3\n\t    \t    },{\n\t    \t        text: this.localize('documentAuthor'),\n\t    \t        dataIndex: 'author',\n\t    \t        sortable: true,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getAuthor();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentPubDate'),\n\t    \t        dataIndex: 'pubDate',\n\t    \t        sortable: true,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getPubDate();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentPublisher'),\n\t    \t        dataIndex: 'publisher',\n\t    \t        sortable: false,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getPublisher();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentPubPlace'),\n\t    \t        dataIndex: 'pubPlace',\n\t    \t        sortable: false,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getPubPlace();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentKeyword'),\n\t    \t        dataIndex: 'keyword',\n\t    \t        sortable: false,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getKeyword();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('documentCollection'),\n\t    \t        dataIndex: 'collection',\n\t    \t        sortable: false,\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metadata, record) {return record.getCollection();},\n\t    \t        flex: 2\n\t    \t    },{\n\t    \t        text: this.localize('tokensCountLexical'),\n\t    \t        dataIndex: 'tokensCount-lexical',\n\t    \t        renderer: Ext.util.Format.numberRenderer('0,000'),\n\t    \t        sortable: true,\n\t    \t        width: 'autoSize'\n\t    \t    },{\n\t    \t        text: this.localize('typesCountLexical'),\n\t    \t        dataIndex: 'typesCount-lexical',\n\t    \t        renderer: Ext.util.Format.numberRenderer('0,000'),\n\t    \t        width: 'autoSize'\n\t    \t    },{\n\t    \t        text: this.localize('typeTokenRatioLexical'),\n\t    \t        dataIndex: 'typeTokenRatio-lexical',\n\t    \t        renderer: function(val) {return Ext.util.Format.percent(val)},\n\t    \t        width: 'autoSize'\n\t    \t    },{\n\t    \t        text: this.localize('averageWordsPerSentence'),\n\t    \t        dataIndex: 'averageWordsPerSentence',\n\t    \t        renderer: Ext.util.Format.numberRenderer('0,000.0'),\n\t            \ttooltip: this.localize(\"averageWordsPerSentenceTip\"),\n\t    \t        width: 'autoSize'\n\t    \t    },{\n\t    \t        text: this.localize('language'),\n\t    \t        dataIndex: 'language',\n\t    \t        hidden: true,\n\t    \t        renderer: function(val, metaData, record, rowIndex, colIndex, store, view) {return view.ownerCt.getLanguage(val);},\n\t    \t        width: 'autoSize'\n\t    \t    }\n\t    \t],\n\t    \t\n\t        store: store,\n\t    \t\n\t    \tselModel: {\n\t    \t\ttype: 'rowmodel',\n\t    \t\tmode: 'MULTI',\n                listeners: {\n                    selectionchange: {\n                    \tfn: function(sm, selections) {\n                    \t\tthis.getApplication().dispatchEvent('documentsClicked', this, selections, this.getStore().getCorpus());\n                    \t},\n                    \tscope: this\n                    }\n                }\n            },\n            \n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: dockedItemsItems\n            }]\n    \t});\n    \t\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n        \n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n\n    \t\tthis.store.setCorpus(corpus);\n\n    \t\tif (this.isVisible()) {\n        \t\tthis.store.load({params: this.getApiParams()});\n    \t\t} else {\n    \t\t\tthis.on('afterrender', function() {\n            \t\tthis.store.load({params: this.getApiParams()});\n    \t\t\t}, this);\n    \t\t}\n    \t\tif (this.hasCorpusAccess(corpus)==false) {\n    \t\t\tthis.queryById('modifyButton').hide();\n    \t\t\tthis.queryById('downloadButton').hide();\n    \t\t}\n    \t\t/*\n    \t\tvar me = this;\n    \t\tExt.Ajax.request({\n    \t\t\turl: this.getApplication().getTromboneUrl(),\n    \t\t\tparams: {\n    \t\t\t\tcorpus: corpus.getId(),\n    \t\t\t\ttool: 'corpus.CorpusManager',\n    \t\t\t\tgetAccess: true\n    \t\t\t},\n    \t\t    success: function(response, opts) {\n    \t\t        var obj = Ext.decode(response.responseText);\n    \t\t        if (obj && obj)\n    \t\t        debugger\n    \t\t        console.dir(obj);\n    \t\t        me\n    \t\t    },\n    \t\t    failure: function(response, opts) {\n    \t\t    \tme.showError(response);\n    \t\t    }\n    \t\t})\n    \t\t*/\n    \t})\n    \t\n    \tthis.on(\"activate\", function() { // load after tab activate (if we're in a tab panel)\n    \t\tif (this.getStore().getCorpus()) {\n    \t\t\tthis.getStore().load({params: this.getApiParams()});\n    \t\t}\n    \t}, this);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('query', function(src, query) {\n    \t\tthis.setApiParam('query', query);\n    \t\tthis.store.load({params: this.getApiParams()});\n    \t})\n    \t\n    \tif (config.embedded) {\n        \tif (Ext.getClass(config.embedded).getName() == \"Voyant.data.model.Corpus\") {\n        \t\tconfig.corpus = config.embedded\n        \t}\n        \telse if (Ext.getClass(config.embedded).getName() == \"Voyant.data.store.Documents\") {\n        \t\tthis.store.setRecords(config.embedded.getData())\n        \t\tconfig.corpus = config.embedded.getCorpus()\n        \t}\n    \t\t\n    \t}\n    \t\n    \t// if we have a corpus, load it\n    \tif (config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus)\n    \t}\n    },\n    \n    keepRemoveReorderHandler: function(btn) {\n    \t// we're not sure which scope we're in, so ensure we're talking about this buttons panel\n\t\tvar panel = btn.up(\"window\").down(\"documents\");\n\t\tvar selection = panel.getSelection();\n\t\tvar docs = panel.getStore().getCorpus().getDocumentsCount();\n\t\tvar btnMode = btn.getItemId();\n\t\t// if reordering, check to make sure that we're not looking at a subset\n\t\tif (btnMode=='reorder') {\n\t\t\tif (panel.getStore().getCount()<docs) {\n\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t    title: this.localize('error'),\n\t\t\t\t    message: this.localize('reorderFilteredError'),\n\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdocIndex = [];\n\t\t\t\tpanel.getStore().each(function(doc) {\n\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t    }, this);\n\t\t\t\tfor (var i=1; i<docIndex.length; i++) {\n\t\t\t\t\tif (docIndex[i-1]>docIndex[i]) {\n\t\t\t\t\t\treturn Ext.Msg.confirm(panel.localize('newCorpus'), new Ext.Template(panel.localize(btnMode+'Documents')).applyTemplate([selection.length]), function(confirmBtn){\n\t\t\t\t\t\t\tif (confirmBtn==='yes') {\n\t\t\t\t\t\t\t\tdocIndex = [];\n\t\t\t\t\t\t\t\tthis.getStore().each(function(doc) {\n\t\t\t\t\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t\t\t\t\t    }, this);\n\t\t\t\t\t\t\t\tvar params = {docIndex: docIndex};\n\t\t\t\t\t\t\t\tparams[btnMode+\"Documents\"] = true;\n\t\t\t\t\t\t\t\tthis.editCorpus(params)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, panel);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// if we get here it's because nothing's been reordered\n\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t    title: this.localize('error'),\n\t\t\t\t    message: this.localize('reorderOriginalError'),\n\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif (selection.length>0) {\n\t\t\tif (selection.length==docs) {\n\t\t\t\tif (docs==1) {\n\t\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t\t    title: this.localize('error'),\n\t\t\t\t\t    message: this.localize('onlyOneError'),\n\t\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t\t    title: this.localize('error'),\n\t\t\t\t\t    message: this.localize('allSelectedError'),\n\t\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn Ext.Msg.confirm(this.localize('newCorpus'), new Ext.Template(this.localize(btnMode+'SelectedDocuments')).applyTemplate([selection.length]), function(confirmBtn){\n\t\t\t\t\tif (confirmBtn==='yes') {\n\t\t\t\t\t\tdocIndex = [];\n\t\t\t\t\t\tselection.forEach(function(doc){\n\t\t\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t\t\t\t})\n\t\t\t\t\t\tvar params = {docIndex: docIndex};\n\t\t\t\t\t\tparams[btnMode+\"Documents\"] = true;\n\t\t\t\t\t\tthis.editCorpus(params)\n\t\t\t\t\t}\n\t\t\t\t}, panel);\n\t\t\t}\n\t\t}\n\t\telse if (panel.getApiParam(\"query\") && panel.getStore().getCount()<docs) {\n\t\t\treturn Ext.Msg.confirm(this.localize('newCorpus'), new Ext.Template(this.localize(btnMode+'FilteredDocuments')).applyTemplate([selection.length]), function(confirmBtn){\n\t\t\t\tif (confirmBtn==='yes') {\n\t\t\t\t\tdocIndex = [];\n\t\t\t\t\tthis.getStore().each(function(doc) {\n\t\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t\t    }, this);\n\t\t\t\t\tvar params = {docIndex: docIndex};\n\t\t\t\t\tparams[btnMode+\"Documents\"] = true;\n\t\t\t\t\tthis.editCorpus(params)\n\t\t\t\t}\n\t\t\t}, panel);\n\t\t}\n\t\telse {\n\t\t\treturn Ext.Msg.show({\n\t\t\t    title: this.localize('error'),\n\t\t\t    message: this.localize('selectOrFilterError'),\n\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t});\n\t\t}    \t\n    },\n    \n    editCorpus: function(params) {\n    \t\n    \tExt.apply(params, {\n    \t\ttool: 'corpus.CorpusManager',\n    \t\tcorpus: this.getStore().getCorpus().getId()\n    \t})\n\n    \t// mask main viewport while we create a new corpus\n    \tvar app = this.getApplication();\n    \tvar view = app.getViewport();\n\t\tview.mask(this.localize(\"Creating new corpus\u2026\"));\n    \tExt.Ajax.request({\n    \t\turl: this.getApplication().getTromboneUrl(),\n    \t\tmethod: 'POST',\n    \t\tparams: params,\n    \t\tsuccess: function(response) {\n    \t\t\tview.unmask();\n    \t\t\tvar obj = Ext.decode(response.responseText);\n\t\t\t\tapp.openUrl(app.getBaseUrl()+\"?corpus=\"+obj.corpus.id);\n//    \t\t\tview.mask(\"Loading new corpus\u2026\")\n//    \t\t\tnew Voyant.data.model.Corpus({corpus: obj.corpus.id}).then(function(corpus) {\n//    \t\t\t\tview.unmask();\n//    \t\t\t\tapp.openUrl(app.getBaseUrl()+\"/?corpus=\"+obj.corpus.id)\n//    \t\t\t\tapp.dispatchEvent('loadedCorpus', app, corpus);\n//    \t\t\t}).fail(function(message, response) {\n//    \t\t\t\tview.unmask();\n//    \t\t\t\tapp.showErrorResponse({message: message}, response);\n//    \t\t\t});\n    \t\t}\n    \t});\n    \t\n    \t// close editing window if we're in modal mode, should happen asynchronously while new corpus is created\n    \tvar win = this.up(\"window\");\n    \tif (win && win.isFloating()) {win.close()}\n    }\n})","Ext.define('Voyant.panel.DocumentsFinder', {\n\textend: 'Ext.grid.Panel',\n\trequire: ['Voyant.data.store.DocumentQueryMatches','Ext.grid.plugin.CellEditing'],\n\tmixins: ['Voyant.panel.Panel'/*,'Voyant.util.Localization'*/],\n\talias: 'widget.documentsfinder',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n    config: {\n    \texportGridAll: false // prevents export all options from grid\n    },\n\n    constructor: function(config) {\n    \t\n        this.cellEditing = Ext.create(\"Ext.grid.plugin.CellEditing\", {\n            clicksToEdit: 1\n        });\n\n        this.cellEditing.on('edit', this.onEditComplete, this);\n    \t\n    \tvar me = this;\n    \t\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\temptyText: this.localize(\"emptyText\"),\n    \t\tplugins: [this.cellEditing],\n    \t\tbbar: [\n    \t\t       {\n                       text: this.localize('addRow'),\n                       glyph: 'xf055@FontAwesome',\n                       handler: this.addRow,\n                       scope: this\n    \t\t       },{\n                       text: this.localize('exportNewCorpus'),\n                       disabled: true,\n                       glyph: 'xf08e@FontAwesome',\n                       tooltip: this.localize('exportNewCorpusTip'),\n                       handler: function() {\n                    \t   var query = this.getQueryFromStore();\n                    \t   if (query) {\n                    \t\t   this.setLoading(true);\n\t   \t               \t\t\tvar documentQueryMatches = this.getCorpus().getDocumentQueryMatches();\n\t\t            \t\t\tdocumentQueryMatches.load({\n\t\t            \t\t\t\tparams: {query: query, createNewCorpus: true},\n\t\t            \t\t\t\tcallback: function(records, operation, success) {\n\t\t                     \t\t   this.setLoading(false);\n\t\t            \t\t\t\t\tif (success) {\n\t\t            \t\t\t\t\t\tvar corpus = operation.getProxy().getReader().rawData.documentsFinder.corpus;\n\t\t            \t\t\t\t\t\tvar url = this.getBaseUrl()+'?corpus='+corpus;\n\t\t                         \t\t   Ext.Msg.alert({\n\t\t                        \t\t\t   title: this.localize('title'),\n\t\t                        \t\t\t   message: \"<a href='\"+url+\"' target='_blank'>New Corpus</a>\"\n\t\t                        \t\t   })\n\t\t            \t\t\t\t\t}\n\t\t            \t\t\t\t\telse {\n\t\t            \t\t\t\t\t\tExt.create(\"Voyant.util.ResponseError\", {\n\t\t            \t\t\t\t\t\t\tmsg: this.localize(\"unsuccessfulQuery\"),\n\t\t            \t\t\t\t\t\t\tresponse: operation.getError().response\n\t\t            \t\t\t\t\t\t}).show();\n\t\t            \t\t\t\t\t}\n\t\t            \t\t\t\t},\n\t\t            \t\t\t\tscope: this\n\t\t            \t\t\t})\n                    \t\t   \n                    \t   }\n                    \t   else {\n                    \t\t   Ext.Msg.alert({\n                    \t\t\t   title: this.localize('title'),\n                    \t\t\t   message: this.localize('noMatches')\n                    \t\t   })\n                    \t   }\n                       },\n                       scope: this,\n                       cls: 'exportBtn'\n    \t\t       },{\n    \t\t    \t   xtype: 'tbtext',\n    \t\t    \t   name: 'status',\n    \t\t    \t   cls: 'status'\n    \t\t       }\n    \t\t],\n\t    \tcolumns:[\n \t    \t    {\n\t    \t        text: this.localize('query'),\n\t    \t        dataIndex: 'query',\n\t    \t        renderer: function(value) {\n\t    \t        \treturn Ext.isEmpty(value) ? '<span class=\"placeholder\">'+me.localize('emptyQuery') + '</span>' : value;\n\t    \t        },\n\t    \t        editor: true,\n\t    \t        minWidth: 150,\n\t    \t        maxWidth: 300\n\t    \t    },{\n\t    \t        text: this.localize('field'),\n\t    \t        dataIndex: 'field',\n\t    \t        editor: {\n\t    \t        \txtype: 'combo',\n\t                    typeAhead: true,\n\t                    triggerAction: 'all',\n\t                    forceSelection: true,\n\t                    value: '',\n\t                    valueField: 'value',\n\t                    listeners: {\n\t                    \tchange:function() {\n\t                    \t  if (Ext.isEmpty(this.getValue())) {\n\t\t                    \t    this.reset();\n\t\t                    \t  }\n\t\t                    \t}\n\t                    },\n\t                    store: new Ext.data.Store({\n\t                        fields: ['text','value'],\n\t                \t\tdata: [[this.localize('textField'),'text'],[this.localize('advancedField'),'advanced']]\n\t                    })\n\t    \t        },\n\t    \t        width: 150,\n                    renderer: function(v) {return Ext.isEmpty(v) ? '' : me.localize(v+\"Field\")}\n\t    \t    },{\n\t    \t        text: this.localize('operator'),\n\t    \t        dataIndex: 'operator',\n\t    \t        editor: {\n\t    \t        \txtype: 'combo',\n\t                    forceSelection: true,\n\t                    store: new Ext.data.Store({\n\t                        autoDestroy: true,\n\t                        fields: ['text','value'],\n\t                        displayField:  'text',\n\t                        valueField: 'value',\n\t                \t\tdata: [{text:'AND',value:'+'},{text:'OR',value:''}]\n\t                    })\n\t    \t        },\n\t    \t        minWidth: 75,\n\t    \t        maxWidth: 75\n\t    \t    },{\n\t    \t        text: this.localize('count'),\n\t    \t        dataIndex: 'count',\n\t    \t        renderer: function(value, metadata, record) {\n\t    \t        \treturn Ext.isEmpty(record.get('query')) ? '' : Ext.util.Format.number(value, '0,000')\n\t    \t        },\n\t    \t        minWidth: 100,\n\t    \t        maxWidth: 100\n\t    \t    },{\n\t    \t    \txtype: 'actioncolumn',\n\t                width: 25,\n\t                getGlyph: 'xf014@FontAwesome',\n\t                tooltip: this.localize('deleteQueryTip'),\n\t                menuDisabled: true,\n\t                sortable: false,\n\t                handler: this.removeRow,\n\t                scope: this\n\t    \t    }\n\t    \t],\n\t    \t\n\t    \tstore: new Ext.data.Store({\n                // destroy the store if the grid is destroyed\n                autoDestroy: true,\n                fields: ['id','operator','field','query','count'],\n\t    \t\tdata: [['','','','',0]]\n            })\n      \t});\n    \t\t\t\n        this.callParent(arguments);\n        \n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n        \n  \n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tvar docs = corpus.getDocuments();\n    \t\tif (docs && docs.getCount()>0) {\n    \t\t\tvar doc = docs.getDocument(0);\n    \t\t\tvar records = [];\n    \t\t\t[\"title\",\"author\",\"pubDate\",\"publisher\",\"pubPlace\"].forEach(function(field) {\n    \t\t\t\tif (!Ext.isEmpty(doc.get(field))) {\n    \t\t\t\t\trecords.push([this.localize(field+'Field'),field])\n    \t\t\t\t}\n    \t\t\t}, this);\n    \t\t\tif (records) {\n    \t\t\t\tvar editor = this.getColumnManager().getHeaderByDataIndex(\"field\").getEditor();\n    \t\t\t\tvar store = editor.getStore();\n    \t\t\t\tstore.each(function(record) {\n    \t\t\t\t\trecords.push([record.get('text'), record.get('value')]);\n    \t\t\t\t}, this);\n    \t\t\t\teditor.setStore(Ext.create(\"Ext.data.Store\",{\n    \t\t\t\t\tfields: ['text','value'],\n    \t\t\t\t\tdata: records\n    \t\t\t\t}))\n    \t\t\t}\n    \t\t\tthis.updateStatus(0);\n    \t\t\tthis.setLoading(false);\n    \t\t}\n    \t})\n    \t\n    },\n    \n    removeRow:function(grid, rowIndex) {\n    \tthis.getStore().removeAt(rowIndex);\n    \tif (this.getStore().getCount()==0) {this.addRow();}\n    \tthis.updateAggregate();\n    },\n    \n    addRow: function() {\n    \tthis.store.loadData([['','','','',0]], true);\n    },\n    \n    onEditComplete: function(editor, context) {\n    \t\n    \t\n    \tvar query = this.getQueryFromRecord(context.record);\n\t\tif (Ext.isEmpty(query)) {\n\t\t\tcontext.record.set('count','');\n\t\t\tthis.updateAggregate();\n\t\t}\n\t\telse {\n\t\t\tvar cell = context.view.getCell(context.record, this.getColumnManager().getHeaderByDataIndex(\"count\"));\n\t\t\tcell.mask(\"loading\");\n\t\t\tvar documentQueryMatches = this.getCorpus().getDocumentQueryMatches();\n\t\t\tdocumentQueryMatches.load({\n\t\t\t\tparams: {\n\t\t\t\t\tquery: query\n\t\t\t\t},\n\t\t\t\tcallback: function(records, operation, success) {\n\t\t\t\t\tcell.unmask();\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tcontext.record.set('count', records.length==0 ? 0 : records[0].get('count'))\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tExt.create(\"Voyant.util.ResponseError\", {\n\t\t\t\t\t\t\tmsg: this.localize(\"unsuccessfulQuery\"),\n\t\t\t\t\t\t\tresponse: operation.getError().response\n\t\t\t\t\t\t}).show();\n\t\t\t\t\t\tcontext.record.set('count',0);\n\t\t\t\t\t}\n\t\t\t\t\tthis.updateAggregate();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t})\n\t\t}\n\n    },\n    \n    getQueryFromRecord: function(record) {\n\t\tif (Ext.isEmpty(record) || Ext.isEmpty(record.get('query'))) {return \"\"}\n\t\tvar query = record.get('query').trim();\n\t\tif (Ext.isEmpty(query)) {return \"\"}\n\t\tvar field = record.get('field');\n\t\treturn Ext.isEmpty(field ? field.trim() : field) ? query : field+\":\"+query\n    },\n    \n    getQueryFromStore: function() {\n    \tvar query = \"\";\n \t\tthis.getStore().each(function(record) {\n \t\t\tvar q = this.getQueryFromRecord(record);\n \t\t\tif (!Ext.isEmpty(q)) {\n \t\t\t\tif (!Ext.isEmpty(query)) {\n \t\t\t\t\tvar op = record.get('operator');\n \t\t\t\t\tquery += op== 'AND' ? ' + ' : ' | '\n \t\t\t\t}\n \t\t\t\tquery+=q\n \t\t\t}\n \t\t}, this)\n \t\tconsole.warn(query)\n \t\treturn query;\n    },\n    \n    updateAggregate: function() {\n    \tvar count = this.getStore().sum('count');\n    \tif (!count || typeof count == 'string') {\n    \t\tthis.updateStatus(0);\n    \t}\n    \telse if (count==1) {\n    \t\tvar count = this.getStore().getAt(0).get('count');\n    \t\tthis.updateStatus(this.getStore().getAt(0).get('count'))\n    \t}\n    \telse {\n    \t\t\n    \t\tvar query = this.getQueryFromStore();\n    \t\tif (!Ext.isEmpty(query)) {\n            \tif (!this.status) {this.status=this.down(\"[cls~=status]\")} // make sure we have status for masking\n    \t\t\tthis.status.mask(this.localize(\"loading\"));\n    \t\t\tvar documentQueryMatches = this.getCorpus().getDocumentQueryMatches();\n    \t\t\tdocumentQueryMatches.load({\n    \t\t\t\tparams: {query: query},\n    \t\t\t\tcallback: function(records, operation, success) {\n    \t\t\t\t\t\n    \t\t\t\t\tthis.status.unmask();\n    \t\t\t\t\tif (success) {\n    \t\t\t\t\t\tthis.updateStatus(records[0].get('count'));\n    \t\t\t\t\t}\n    \t\t\t\t\telse {\n    \t\t\t\t\t\tExt.create(\"Voyant.util.ResponseError\", {\n    \t\t\t\t\t\t\tmsg: this.localize(\"unsuccessfulQuery\"),\n    \t\t\t\t\t\t\tresponse: operation.getError().response\n    \t\t\t\t\t\t}).show();\n    \t\t\t\t\t\tthis.updateStatus(0);\n    \t\t\t\t\t}\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t})\n    \t\t}\n    \t}\n    },\n    \n    updateStatus: function(count) {\n    \tif (!this.status) {this.status=this.down(\"[cls~=status]\")}\n    \tif (!this.exportBtn) {this.exportBtn=this.down(\"[cls~=exportBtn]\")}\n    \tif (count==0) {\n        \tthis.status.update(new Ext.XTemplate(this.localize('noMatches')).apply([this.getCorpus().getDocumentsCount()]))\n    \t}\n    \telse {\n    \t\tthis.status.update(new Ext.XTemplate(this.localize('queryMatches')).apply([count,this.getCorpus().getDocumentsCount()]))\n    \t}\n    \tthis.exportBtn.setDisabled(count==0);\n    \t\n    }\n    \n})","Ext.define('Voyant.panel.Dummy', {\n    extend: 'Ext.Panel',\n    xtype: 'dummy',\n\tautoScroll: true,\n    initComponent: function() {\n        var me = this;\n        \n        var columns = 3;\n        \n        Ext.apply(this, {\n    \t\txtype: 'tabpanel',\n    \t\titems: [{\n                title: 'Tab 1',\n                icon: null,\n                glyph: 42,\n                html: \"one\"\n            }, {\n                title: 'Tab 2',\n                icon: null,\n                glyph: 70,\n                html: \"two\"\n            }]\n        })\n        \n        this.callParent();\n    }\n});","// assuming Bubblelines library is loaded by containing page (via voyant.jsp)\nExt.define('Voyant.panel.Fountain', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.fountain',\n    statics: {\n    \ti18n: {\n    \t\ttitle: \"FountainMeter\"\n    \t},\n    \tapi: {\n    \t\t/**\n    \t\t * @property stopList The stop list to use to filter results.\n    \t\t * Choose from a pre-defined list, or enter a comma separated list of words, or enter an URL to a list of stop words in plain text (one per line).\n    \t\t * @type String\n    \t\t * @private\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\tdocIndex: 0,\n    \t\t\n    \t\tspeed: 30,\n    \t\t\n    \t\tgroups: undefined\n    \t\t\t\n    \t},\n    \tglyph: 'xf06e@FontAwesome'\n\t},\n\tconfig: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n    \taudio: false,\n    \twords: [],\n    \tgroups: {},\n    \tmoveWordsTimeout: undefined\n\t},\n\t\n\t\n    constructor: function() {\n\n    \tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tlayout: {\n    \t\t\ttype: 'hbox',\n    \t\t\talign: 'stretch'\n    \t\t},\n    \t\titems: [{\n        \t\thtml: '<svg></svg>',\n        \t\titemId: 'fountain',\n        \t\tflex: 2\n    \t\t},{\n    \t\t\tflex: 1,\n    \t\t\tlayout:  'vbox',\n    \t\t\titems: [{\n    \t\t\t\t   xtype: 'polar',\n    \t\t\t\t   itemId: 'gauge',\n    \t\t\t\t   width: 300,\n    \t\t\t\t   flex: 1,\n    \t\t\t\t   store: {\n    \t\t\t\t       fields: ['mph', 'fuel', 'temp', 'rpm'],\n    \t\t\t\t       data: [{val: 10}]\n    \t\t\t\t   },\n    \t\t\t\t   series: {\n    \t\t\t\t       type: 'gauge',\n    \t\t\t\t       colors: this.getApplication().getColorPalette(this.getApplication().getApiParam('palette'), true),\n    \t\t\t\t       angleField: 'val',\n    \t\t\t\t       donut: 20\n    \t\t\t\t   }\n    \t\t\t\t},{\n\t\t    \t\t\twidth: 300,\n\t\t    \t\t\theight: 16,\n    \t\t\t\t\titems: {\n    \t\t    \t\t\txtype: 'sparklineline',\n        \t\t\t\t    itemId: 'gaugsparkline',\n    \t\t    \t\t\tvalues: [0,1,2,34],\n    \t\t    \t\t\theight: 16,\n    \t\t    \t\t\twidth: 300\n    \t\t\t\t\t},\n\t\t    \t\t\tlisteners: {\n\t\t    \t\t\t\tafterrender: function(cmp) {\n\t\t    \t\t\t\t\tcmp.getTargetEl().setStyle(\"cursor\", \"pointer\");\n\t\t\t    \t\t\t\tcmp.getTargetEl().on(\"click\", function(e, t, eOpts) {\n\t    \t\t\t\t\t    \tclearTimeout(this.getMoveWordsTimeout());\n\t\t    \t\t\t\t\t\tthis.getWords().forEach(function(word) {\n\n\t\t    \t\t\t\t\t\t\tif (word.svg) {\n\t\t    \t\t\t\t\t\t\t\tword.svg.remove();\n\t\t    \t\t\t\t\t\t\t\tdelete word.svg;\n\t\t    \t\t\t\t\t\t\t}\n\t\t    \t\t\t\t\t\t\tword.direction = -1; // reset\n\t\t    \t\t\t\t\t\t})\n\t\t    \t\t\t\t\t\tvar pos = Math.floor(e.event.offsetX * this.getWords().length / t.offsetWidth)\n\t\t    \t\t\t\t\t\tthis.moveWords(pos);\n\t\t    \t\t\t\t\t}, this);\n\t\t    \t\t\t\t},\n\t\t    \t\t\t\tscope: this\n\t\t    \t\t\t}\n    \t\t\t\t}]\n    \t\t}],\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n\t            \txtype: 'documentselectorbutton',\n\t            \tsingleSelect: true\n\t            },{\n\t\t\t\t\txtype: 'slider',\n\t\t\t\t\tfieldLabel: this.localize('speed'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 40,\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tincrement: 1,\n\t\t\t\t\tminValue: 1,\n\t\t\t\t\tmaxValue: 60,\n\t\t\t\t\tvalue: 30,\n\t\t\t\t\tlisteners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(parseInt(this.getApiParam(\"speed\")));\n\t                \t\tif (this.bubbles) {this.bubbles.frameRate(cmp.getValue())}\n\t                \t\tthis.setAudio(cmp.getValue());\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('speedTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    changecomplete: function(cmp, val) {\n\t                    \tthis.setApiParam('speed', val);\n\t                \t\tif (this.bubbles) {this.bubbles.frameRate(val)}\n\t                    },\n\t                    scope: this\n\t\t\t\t\t}\n\t\t\t\t}]\n    \t\t}]\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tthis.loadDocument();\n    \t}, this);\n    \t\n    },\n    \n    loadDocument: function() {\n    \tvar me = this;\n    \tvar docIndex = parseInt(this.getApiParam('docIndex')) || 0;\n    \tthis.getCorpus().getWordsArray({docIndex: docIndex, stopList: 'auto'}).then(function(words) {\n\n    \t\t// fold to lower case\n    \t\tvar lcwords = words.map(function(w) {return w.toLowerCase()});\n    \t\t\n    \t\t// if we don't have any groups of words, form them based on words that are longer than four letters\n    \t\tif (me.getApiParam(\"groups\")==undefined) {\n    \t\t\tvar group = {};\n    \t\t\tlcwords.forEach(function(w) {\n    \t\t\t\tif (w.length>5 && !(w in group)) {\n    \t\t\t\t\tgroup[w] = w.length;\n    \t\t\t\t} \n    \t\t\t});\n    \t\t\tvar maxLen = Math.max.apply(this, Object.values(group))\n    \t\t\tvar lenVal = d3.scaleLinear().domain([4,maxLen]).range([.5,1])\n    \t\t\tfor (var w in group) {\n    \t\t\t\tgroup[w] = lenVal(group[w]); // convert length to val between 0 and 1\n    \t\t\t}\n    \t\t\tme.setGroups({length: {\n    \t\t\t\tcolor: me.getApplication().getColorForTerm(\"length\"),\n    \t\t\t\tterms: group\n    \t\t\t}})\n    \t\t}\n\n    \t\tvar el = me.getComponent('fountain').getTargetEl();\n\t\t\tvar svgEl = el.down(\"svg\");\n    \t\tsvgEl.set({width: el.getWidth(), height: el.getHeight()});\n    \t\tvar svgDom = svgEl.dom\n    \t\tvar svg = d3.select(svgDom);\n    \t\tsvg.selectAll(\"*\").remove(); // clear\n    \t\t\n    \t\t// create words and set min height (highest point)\n    \t\tvar types = {};\n    \t\tvar groups = me.getGroups();\n\n    \t\tme.setWords(words.slice(0,1000).map(function(w) {\n    \t\t\tvar word = new me.FountainWord(w.toLowerCase());\n    \t\t\tif (word.word in types) {types[word.word]++}\n    \t\t\telse {types[word.word]=1;}\n    \t\t\tword.min = parseInt(Math.random()*svgDom.clientHeight*.05);\n    \t\t\tvar yshift = Math.sqrt(Math.random()*10)\n    \t\t\tword.yshift = Math.random()*2<1 ? - yshift : yshift;\n    \t\t\tword.jump = svgDom.clientHeight/10\n    \t\t\tword.groupVals = {};\n    \t\t\tfor (var g in groups) {\n    \t\t\t\tif (word.word in groups[g].terms) {\n    \t\t\t\t\tword.groupVals[g] = groups[g].terms[word.word]\n    \t\t\t\t}\n    \t\t\t}\n    \t\t\treturn word;\n    \t\t}));\n    \t\tvar max = Math.max.apply(this, Object.values(types));\n    \t\tvar fontSize = d3.scaleLog().domain([1,Math.max.apply(this, Object.values(types))]).range([4,12]);\n    \t\tme.getWords().forEach(function(word) {\n    \t\t\tword.fontSize = fontSize(types[word.word])\n    \t\t})\n    \t\tme.moveWords();\n    \t})\n    },\n    \n    FountainWord: function(word) {\n    \tthis.word = word;\n    \tthis.direction = -1;\n    },\n    \n    moveWords: function(until) {\n\n    \tvar words = this.getWords(),\n    \t\tsvg = this.getComponent('fountain').getTargetEl().down(\"svg\").dom,\n\t\t\theight = svg.clientHeight,\n\t\t\twidth = svg.clientWidth,\n\t\t\tgroups = this.getGroups();\n\t\tvar opacity = d3.scaleLinear().domain([0,height]).range([1,0]);\n\n\t\tvar gaugeVals = [];\n\t\tvar seen = 0;\n    \tfor (var i=0; i<words.length; i++) {\n    \t\tseen++;\n    \t\t\n\t\t\t// make sure to count group hits for all words since start to current point\n\t\t\tif (Object.keys(words[i].groupVals).length==0) {\n\t\t\t\tgaugeVals.push(0)\n\t\t\t} else {\n\t\t\t\tObject.values(words[i].groupVals).forEach(function(val) {\n\t\t\t\t\tgaugeVals.push(val);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n    \t\tif (words[i].direction<0) { // going up\n    \t\t\t\n\t\t\t\t\n    \t\t\tif (!words[i].svg) {\n    \t    \t\tvar word = d3.select(svg)\n    \t    \t\t\t.append(\"text\")\n    \t    \t\t\t.text(words[i].word)\n    \t    \t\t\t.attr(\"font-size\", words[i].fontSize)\n    \t    \t\t\t.attr(\"text-anchor\", \"middle\")\n    \t    \t\t\t.attr(\"x\", width/2)\n    \t    \t\t\t.attr(\"y\", height-(Math.random()*height)/5)\n    \t    \t\t\t.attr(\"fill\", Object.keys(words[i].groupVals).length==0 ? \"black\" : this.getApplication().getColorForTerm(Object.keys(words[i].groupVals).shift(), true));\n    \t    \t\twords[i].ys = [height];\n    \t    \t\twords[i].svg = word;\n    \t    \t\tif (!until || i>until) {\n    \t    \t\t\tbreak;\n    \t    \t\t}\n    \t\t\t} else {\n    \t\t\t\tvar y = parseInt(words[i].svg.attr(\"y\"));\n        \t\t\tvar delta = y-words[i].min;\n        \t\t\tvar change = delta/5\n        \t\t\twords[i].svg.attr(\"y\", y-change);\n        \t\t\twords[i].svg.attr(\"x\", parseInt(words[i].svg.attr(\"x\"))+words[i].yshift);\n        \t\t\ty = parseInt(words[i].svg.attr(\"y\"))\n        \t\t\twords[i].ys.push(y);\n        \t\t\tif (y<=words[i].min) {\n        \t\t\t\twords[i].direction = 1;\n        \t\t\t}\n    \t\t\t}\n    \t\t\t\n    \t\t} else if (words[i].direction>0) { // going down\n    \t\t\tif (words[i].svg && words[i].ys.length>0) {\n        \t\t\twords[i].svg.attr(\"y\", words[i].ys.pop());\n        \t\t\twords[i].svg.attr(\"x\", parseInt(words[i].svg.attr(\"x\"))+words[i].yshift);\n        \t\t\twords[i].svg.attr(\"opacity\", opacity(parseInt(words[i].svg.attr(\"y\"))));\n    \t\t\t\t\n    \t\t\t} else {\n    \t\t\t\twords[i].direction = 0;\n    \t\t\t}\n    \t\t} else {\n    \t\t\tif (\"svg\" in words[i]) {\n    \t\t\t\twords[i].svg.remove()\n    \t\t\t\tdelete words[i].svg\n    \t\t\t}\n    \t\t}\n    \t\t\n    \t}\n\n    \tvar avg = gaugeVals.length==0 ? 0 : Ext.mean(gaugeVals)*100;\n    \tvar polar = this.down(\"polar\")\n    \tpolar.getStore().getAt(0).set(\"val\", avg)\n    \tpolar.setSprites({\n            type: 'text',\n            text: Ext.util.Format.number(avg, '%0.0'),\n            x: 145,\n            y: 240\n        });\n    \tvar sparkline = this.down(\"sparklineline\");\n    \tsparkline.setValues(gaugeVals.length>100 ? this.chunkify(gaugeVals, 100, true).map(function(vals) {return Ext.mean(vals)}) : gaugeVals);\n    \tsparkline.setWidth(seen*sparkline.ownerCt.getWidth()/words.length)\n    \t\n    \tthis.setMoveWordsTimeout(Ext.defer(this.moveWords, 100, this));\n    },\n    \n    // https://stackoverflow.com/questions/8188548/splitting-a-js-array-into-n-arrays\n    chunkify: function(a, n, balanced) {\n        if (n < 2)\n            return [a];\n\n        var len = a.length,\n                out = [],\n                i = 0,\n                size;\n\n        if (len % n === 0) {\n            size = Math.floor(len / n);\n            while (i < len) {\n                out.push(a.slice(i, i += size));\n            }\n        }\n\n        else if (balanced) {\n            while (i < len) {\n                size = Math.ceil((len - i) / n--);\n                out.push(a.slice(i, i += size));\n            }\n        }\n\n        else {\n\n            n--;\n            size = Math.floor(len / n);\n            if (len % size === 0)\n                size--;\n            while (i < size * n) {\n                out.push(a.slice(i, i += size));\n            }\n            out.push(a.slice(size * n));\n\n        }\n\n        return out;    \t\n    },\n    \n    initComponent: function() {\n    \tthis.callParent(arguments);\n    }\n});","Ext.define('Voyant.panel.RezoViz', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.rezoviz',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tquery: undefined,\n    \t\tlimit: 25,\n    \t\tstopList: 'auto',\n    \t\ttype: ['organization','location','person'],\n    \t\tminEdgeCount: 2\n    \t},\n\t\tglyph: 'xf1cb@FontAwesome'\n    },\n    \n    config: {\n    \tnetwork: undefined, // the vis network graph\n    \tnodesStore: undefined, // used by combo\n    \tnodesDataSet: undefined, // used by vis\n    \tedgesDataSet: undefined, // used by vis\n    \tisNetworkBounded: true,\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n\n    categorizedNodeOptions: {\n    \tlocation: {\n    \t\tfont: {\n    \t\t\tcolor: 'green'\n    \t\t}\n    \t},\n    \tperson: {\n    \t\tfont: {\n    \t\t\tcolor: 'maroon'\n    \t\t}\n    \t},\n    \torganization: {\n    \t\tfont: {\n    \t\t\tcolor: 'purple'\n    \t\t}\n    \t}\n    },\n    nodeOptions: {\n\t\tshape: 'box',\n\t\tcolor: {\n\t\t\tborder: 'rgba(0,0,0,0.1)',\n\t\t\tbackground: 'rgba(255,255,255,1)'\n\t\t},\n\t\tscaling:{\n            label: {\n              min: 8,\n              max: 20\n            }\n          }\n\t},\n\tedgeOptions: {\n\t\tcolor: {\n\t\t\tcolor: 'rgba(0,0,0,0.1)',\n\t\t\thighlight: 'black',\n\t\t\thover: 'red'\n\t\t},\n\t\tlabelHighlightBold: false\n\t},\n\thighlightOptions: {\n\t\tfont: {\n\t\t\tcolor: 'white'\n\t\t},\n\t\tcolor: {\n\t\t\tbackground: 'black'/*,\n\t\t\thover: {\n\t\t\t\tborder: '#CB157F',\n\t\t\t\tbackground: '#EB42A5'\n\t\t\t}*/\n\t\t}\n\t},\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        var me = this;\n        \n        this.setNodesStore(Ext.create('Ext.data.Store', {\n        \tfields: ['id', 'term', 'type', 'rawFreq'],\n        \tsortOnLoad: true,\n        \tsorters: 'term'\n        }));\n        \n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'combo',\n                    queryMode: 'local',\n                    valueField: 'term',\n                    displayField: 'term',\n                    store: this.getNodesStore(),\n                    listeners: {\n\t\t\t\t\t\tselect: function(combo, record) {\n\t\t\t\t\t\t\tthis.getNetwork().selectNodes([record.get('id')]);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n                    }\n                },{\n                \txtype: 'button',\n\t                text: this.localize('categories'),\n\t                menu: {\n\t                \titems: [{\n\t                \t\txtype: 'menucheckitem',\n\t                \t\ttext: this.localize('people'),\n\t                \t\titemId: 'person',\n\t                \t\tchecked: true\n\t                \t},{\n\t                \t\txtype: 'menucheckitem',\n\t                \t\ttext: this.localize('locations'),\n\t                \t\titemId: 'location',\n\t                \t\tchecked: true\n\t                \t},{\n\t                \t\txtype: 'menucheckitem',\n\t                \t\ttext: this.localize('organizations'),\n\t                \t\titemId: 'organization',\n\t                \t\tchecked: true\n\t                \t},{\n\t                \t\txtype: 'button',\n\t                \t\ttext: this.localize('reload'),\n\t                \t\tstyle: 'margin: 5px;',\n\t                \t\thandler: this.categoriesHandler,\n\t                \t\tscope: this\n\t                \t}]\n\t                }\n                },{\n\t\t\t\t\txtype: 'numberfield',\n\t\t\t\t\titemId: 'minEdgeCount',\n\t\t\t\t\tfieldLabel: this.localize('minEdgeCount'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 120,\n\t\t\t\t\twidth: 170,\n\t\t\t\t\tmaxValue: 10,\n\t\t\t\t\tminValue: 1,\n\t\t\t\t\tallowDecimals: false,\n\t\t\t\t\tallowExponential: false,\n\t\t\t\t\tallowOnlyWhitespace: false,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\trender: function(field) {\n\t\t\t\t\t\t\tfield.setRawValue(this.getApiParam('minEdgeCount'));\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchange: function(field, newVal) {\n\t\t\t\t\t\t\tif (field.isValid()) {\n\t\t\t\t\t\t\t\tthis.setApiParam('minEdgeCount', newVal);\n\t\t\t\t\t\t\t\tthis.getEntities();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n                },{ xtype: 'tbseparator' },{\n                \txtype: 'slider',\n                \tfieldLabel: this.localize('repulsion'),\n                \tlabelAlign: 'right',\n                \tlabelWidth: 70,\n                \twidth: 150,\n                \tvalue: 100,\n                \tincrement: 10,\n                \tminValue: 0,\n                \tmaxValue: 500,\n                \tlisteners: {\n                \t\tchangecomplete: function(slider, val) {\n                \t\t\tthis.getNetwork().physics.options.repulsion.nodeDistance = val;\n                \t\t\tthis.getNetwork().startSimulation();\n                \t\t},\n                \t\tscope: this\n                \t}\n                },{\n                \txtype: 'slider',\n                \tfieldLabel: this.localize('stiffness'),\n                \tlabelAlign: 'right',\n                \tlabelWidth: 70,\n                \twidth: 150,\n                \tvalue: 4,\n                \tincrement: 1,\n                \tminValue: 0,\n                \tmaxValue: 10,\n                \tlisteners: {\n                \t\tchangecomplete: function(slider, val) {\n                \t\t\tval /= 100;\n                \t\t\tthis.getNetwork().physics.options.repulsion.springConstant = val;\n                \t\t\tthis.getNetwork().startSimulation();\n                \t\t},\n                \t\tscope: this\n                \t}\n                },{\n                \txtype: 'slider',\n                \tfieldLabel: this.localize('friction'),\n                \tlabelAlign: 'right',\n                \tlabelWidth: 55,\n                \twidth: 150,\n                \tvalue: 9,\n                \tincrement: 10,\n                \tminValue: 0,\n                \tmaxValue: 100,\n                \tlisteners: {\n                \t\tchangecomplete: function(slider, val) {\n                \t\t\tval /= 100;\n                \t\t\tthis.getNetwork().physics.options.repulsion.damping = val;\n                \t\t\tthis.getNetwork().startSimulation();\n                \t\t},\n                \t\tscope: this\n                \t}\n                }]\n            }]\n        });\n        \n        this.on('loadedCorpus', function(src, corpus) {\n        \tdebugger\n        \tif (corpus.getDocumentsCount()==1) {\n        \t\tthis.setApiParam(\"minEdgeCount\", 1);\n        \t}\n        \tthis.getEntities();\n        }, this);\n        \n        this.on('resize', function(panel, width, height) {\n\n\t\t}, this);\n        \n        me.callParent(arguments);\n    },\n    \n    getEntities: function() {\n    \tvar corpusId = this.getCorpus().getId();\n    \tvar el = this.getLayout().getRenderTarget();\n    \tel.mask(this.localize('loadingEntities'));\n    \tExt.Ajax.request({\n    \t\turl: this.getApplication().getTromboneUrl(),\n    \t\tmethod: 'POST',\n    \t\tparams: {\n    \t\t\ttool: 'corpus.EntityCollocationsGraph',\n    \t\t\ttype: this.getApiParam('type'),\n    \t\t\tlimit: this.getApiParam('limit'),\n    \t\t\tminEdgeCount: this.getApiParam(\"minEdgeCount\"),\n    \t\t\tcorpus: corpusId\n    \t\t},\n    \t\tsuccess: function(response) {\n    \t\t\tel.unmask();\n    \t\t\tvar obj = Ext.decode(response.responseText);\n    \t\t\tif (obj.entityCollocationsGraph.edges.length==0) {\n    \t\t\t\tthis.showError({msg: this.localize('noEntities')});\n    \t\t\t\tExt.Msg.confirm(this.localize('error'), this.localize('noEntitiesForEdgeCount'), function(button) {\n    \t\t\t\t\tif (button === 'yes') {\n    \t\t\t\t\t\tvar newEdgeCount = Math.max(1, this.getApiParam('minEdgeCount')-1);\n    \t\t\t\t\t\tthis.queryById('minEdgeCount').setRawValue(newEdgeCount);\n    \t\t\t\t\t\tthis.setApiParam('minEdgeCount', newEdgeCount);\n    \t\t\t\t\t\tthis.getEntities();\n    \t\t\t\t\t}\n    \t\t\t\t}, this);\n    \t\t\t}\n    \t\t\telse {\n        \t\t\tthis.processEntities(obj.entityCollocationsGraph);\n        \t\t\tthis.initGraph();\n    \t\t\t}\n    \t\t},\n    \t\tscope: this\n    \t});\n    },\n    \n    processEntities: function(entityParent) {\n    \tvar nodes = entityParent.nodes;\n    \tvar edges = entityParent.edges;\n    \t\n    \t// we need to calculate the font size because the scaling option doesn't seem to work as advertised\n    \tvar extent = d3.extent(nodes, function(node) {return node.rawFreq;});\n    \tvar min = extent[0];\n    \tvar max = extent[1];    \t\n    \tvar scaleFont = d3.scale.linear()\n                    .domain([min, max])\n                    .range([10, 24]);\n    \t\n    \tvar visNodes = [];\n    \tfor (var i = 0; i < nodes.length; i++) {\n    \t\tvar n = nodes[i];\n    \t\tn.id = i;\n    \t\tvisNodes.push({id: i, label: n.term, value: nodes[i].rawFreq, font: {size: scaleFont(n.rawFreq), color: this.categorizedNodeOptions[n.type].font.color}, type: n.type, rawFreq: n.rawFreq, title: n.term + (n.rawFreq ? ' ('+n.rawFreq+')':'')});\n    \t}\n    \t\n    \tthis.getNodesStore().loadData(nodes);\n    \t\n    \tvar visEdges = [];\n    \tfor (var i = 0; i < edges.length; i++) {\n    \t\tvar link = edges[i].nodes;\n    \t\tvisEdges.push({from: link[0], to: link[1], title: edges[i].count, value: 200*edges[i].count});\n    \t}\n    \t\n    \tthis.setNodesDataSet(new vis.DataSet(visNodes));\n    \tthis.setEdgesDataSet(new vis.DataSet(visEdges));\n    },\n    \n    initGraph: function() {\n    \tvar el = this.getLayout().getRenderTarget();\n    \tel.update(''); // clear\n    \t\n    \t// explicitly set dimensions\n    \tel.setWidth(el.getWidth());\n    \tel.setHeight(el.getHeight());\n\n    \tvar options = {\n\t\t\tinteraction: {\n    \t\t\thover: true,\n    \t\t\thoverConnectedEdges: true,\n    \t\t\tmultiselect: false\n    \t\t},\n    \t\tphysics: {\n    \t\t\tsolver: 'repulsion',\n    \t\t\trepulsion: {\n    \t\t\t\tcentralGravity: 0.1\n    \t\t\t}\n    \t\t},\n    \t\tnodes: this.nodeOptions,\n    \t\tedges: this.edgeOptions\n    \t};\n    \t\n    \t\n    \tvar network = new vis.Network(el.dom, {\n    \t\tnodes: this.getNodesDataSet(),\n    \t\tedges: this.getEdgesDataSet()\n    \t}, options);\n\n    \tif (this.getIsNetworkBounded()) {\n\t    \tnetwork.on('beforeDrawing', function (ctx) {\n\t    \t\tvar el = this.getLayout().getRenderTarget();\n\t    \t\tvar width = el.getWidth();\n\t    \t\tvar height = el.getHeight();\n\t    \t\t\n\t    \t    var nodePositions = network.getPositions();\n\t    \t    for (var id in nodePositions) {\n\t    \t    \tvar node = nodePositions[id];\n\t    \t    \tvar xy = network.canvasToDOM(node);\n\t    \t    \tvar boundedX = Math.max(0, Math.min(width, xy.x));\n\t    \t    \tvar boundedY = Math.max(0, Math.min(height, xy.y));\n\t    \t    \tvar bXY = network.DOMtoCanvas({x: boundedX, y: boundedY});\n\t    \t    \tnetwork.body.nodes[id].x = bXY.x;\n\t    \t    \tnetwork.body.nodes[id].y = bXY.y;\n\t    \t    }\n\t    \t}.bind(this));\n    \t}\n    \t\n    \tnetwork.on('selectNode', function(params) {\n    \t\tvar node = params.nodes[0];\n    \t\tthis.doNodeSelect(node);\n    \t}.bind(this));\n    \tnetwork.on('deselectNode', function(params) {\n    \t\tnetwork.unselectAll(); // need this due to our custom selecting code\n    \t\t\n    \t\tvar node = params.nodes[0];\n    \t\tif (node !== undefined) {\n    \t\t\t// select clicked node after deselection is finished\n    \t\t\tsetTimeout(this.doNodeSelect.bind(this), 5, node);\n    \t\t}\n    \t}.bind(this));\n    \tnetwork.on('selectEdge', function(params) {\n    \t\t// prevent edge selection\n    \t\tnetwork.unselectAll();\n    \t});\n    \t\n    \tthis.setNetwork(network);\n    },\n    \n    doNodeSelect: function(node) {\n\t\tvar term = this.getNodesDataSet().get(node).label;\n\t\tthis.dispatchEvent(\"termsClicked\", this, [term]);\n    \tvar network = this.getNetwork();\n\t\tvar nodes = network.getConnectedNodes(node);\n\t\tnodes.push(node);\n\t\tvar edges = network.getConnectedEdges(node);\n\t\t\n\t\t// custom selection to avoid selecting edges between the secondary/connected nodes\n\t\tnetwork.unselectAll();\n\t\tfor (var i = 0; i < nodes.length; i++) {\n\t\t\tvar n = nodes[i];\n\t\t\tvar nodeObj = network.body.nodes[n];\n\t\t\tnetwork.selectionHandler.selectObject(nodeObj, false);\n\t\t}\n\t\tfor (var i = 0; i < edges.length; i++) {\n\t\t\tvar e = edges[i];\n\t\t\tvar edgeObj = network.body.edges[e];\n\t\t\tnetwork.selectionHandler.selectObject(edgeObj, false);\n\t\t}\n\t\t\n\t\tnetwork.redraw(); // need to force redraw if coming from deselect\n    },\n    \n    categoriesHandler: function(item) {\n    \tvar categories = [];\n    \titem.up('menu').items.each(function(checkitem) {\n    \t\tif (checkitem.checked) {\n    \t\t\tcategories.push(checkitem.itemId);\n    \t\t}\n    \t});\n    \t\n    \tthis.setApiParam('type', categories);\n    \tthis.getEntities();\n    },\n    \n    map: function(value, istart, istop, ostart, ostop) {\n\t\treturn ostart + (ostop - ostart) * ((value - istart) / (istop - istart));\n\t}\n});","Ext.define('Voyant.panel.Loom', {\n    extend: 'Ext.panel.Panel',\n    mixins: ['Voyant.panel.Panel'],\n    alias: 'widget.loom',\n    statics: {\n        i18n: {\n        \ttitle: \"Loom\",\n        \tcontrols: \"Controls\",\n        \tfrequenciesGroup: \"Frequencies\",\n        \tcoverageGroup: \"Coverage\",\n        \tdistributionsGroup: \"Distribution\",\n        \ttermsGroup: \"Terms\",\n        \tinDocumentsLabel: \"in documents\",\n        \tinDocumentsLabelTip: \"each term must be present in the number of documents defined by this range\",\n        \tspanSomeLabel: \"some documents\",\n        \tspanSomeLabelTip: \"each term must be present in at least one document defined by this range\",\n        \tspanAllLabel: \"all documents\",\n        \tspanAllLabelTip: \"each term must be present in all documents defined by this range\",\n        \tspanOnlyLabel: \"only documents\",\n        \tspanOnlyLabelTip: \"each term must be present in only the documents defined by this range\",\n        \trawFreqLabel: \"raw frequency\",\n        \trawFreqLabelTip: \"raw term frequencies for the term must be between these values (inclusively)\",\n        \trawFreqPercentileLabel: \"raw frequency percentile\",\n        \trawFreqPercentileLabelTip: \"raw term frequencies for the term must be between these percentile values (inclusively), this is useful for saying something like terms in the top 90th percentile which will provide 10% of words regardless of the variation in values.\",\n        \tdistributionsStdDevLabel: \"standard deviation of distributions\",\n        \tdistributionsStdDevLabelTip: \"the standard deviation of term distribution scores must be between the defined range of values (lower will be for values that are more consistent, higher will be for values that have greater variability)\",\n        \tdistributionsStdDevPercentileLabel: \"percentile of standard deviations of distributions\",\n        \tdistributionsStdDevPercentileLabelTip: \"the percentile of standard deviations of distributions must be between the defined range of values (lower will be for values that are more consistent, higher will be for values that have greater variability)\",\n        \ttermsLengthLabel: \"term length\",\n        \ttermsLengthLabelTip: \"the length (number of characters) of the term (word)\",\n        \ttermsLengthPercentileLabel: \"term length percentile\",\n        \ttermsLengthPercentileLabelTip: \"the percentile of the length (number of characters) of the term (word)\",\n        \tdistributionIncreasesLabel: \"increases in distribution values\",\n        \tdistributionIncreasesLabelTip: \"the number of increases of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionConsecutiveIncreasesLabel: \"consecutive decreases in distribution values\",\n        \tdistributionConsecutiveIncreasesLabelTip: \"the number of consecutive decreases of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionDecreasesLabel: \"decreases in distribution values\",\n        \tdistributionDecreasesLabelTip: \"the number of decreases of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionConsecutiveDecreasesLabel: \"consecutive decreases in distribution values\",\n        \tdistributionConsecutiveDecreasesLabelTip: \"the number of consecutive decreases of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionMaxLabel: \"distribution maximum\",\n        \tdistributionMaxLabelTip: \"the maximum of the distribution values must be between the defined range (inclusively)\",\n        \tdistributionMinLabel: \"distribution minimum\",\n        \tdistributionMinLabelTip: \"the minimum of the distribution values must be between the defined range (inclusively)\",\n        \tpresetsGroup: \"pre-sets\",\n        \tpresetHighFreq: \"terms that are high frequency\",\n        \tpresetHighFreqLonger: \"terms that are longer and high frequency\",\n        \tpresetSingleDoc: \"higher frequency terms that only occur once\",\n        \tpresetIncreaseDistributions: \"terms that generally increase in frequency\",\n        \tpresetDecreaseDistributions: \"terms that generally decrease in frequency \",\n        \tpresetNearStartDistributions: \"terms that peak in distribution toward the beginning \",\n        \tpresetNearEndDistributions: \"terms that peak in distribution toward the end \",\n        \tpresetSporadicDistributions: \"terms whose distributions vary the most\",\n        \tvisibleTerms: \"max terms\",\n        \tscaling: \"scaling\",\n        \tscaleLinear: \"linear\",\n        \tscaleLog: \"logarithmic\",\n        \tscaleSqrt: \"square root\"\n        \t\n        },\n        api: {\n            limit: 500,\n            stopList: 'auto',\n            inDocuments: undefined,\n            spanSome: undefined,\n            spanAll: undefined,\n            spanOnly: undefined,\n            termLength: undefined,\n            termsLengthPercentile: undefined,\n            rawFreq: undefined,\n            rawFreqPercentile: undefined,\n            distributionsStdDev: undefined,\n            distributionsStdDevPercentile: undefined,\n            distributionIncreases: undefined,\n            distributionDecreases: undefined,\n            distributionConsecutiveIncreases: undefined,\n            distributionConsecutiveDecreases: undefined,\n            distributionMax: undefined,\n            distributionMin: undefined,\n            scaling: 'linear'\n        },\n        glyph: 'xf1e0@FontAwesome'\n    },\n    \n    config: {\n    \tstore: undefined,\n    \tterms: undefined,\n    \toptions: [\n    \t\t{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}\n    \t],\n    \tcontrols: undefined\n    },\n\n\n    constructor: function(config) {\n        this.callParent(arguments);\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n        \n    initComponent: function() {\n    \t\n        this.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n        \n    \tvar controls = new Ext.util.MixedCollection({\n    \t\tallowFunctions: true\n    \t});\n    \tcontrols.addAll({\n    \t\tinDocuments: new Voyant.util.LoomControl({\n\t    \t\tgroup: 'coverage',\n\t    \t\tname: 'inDocuments',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMin(1);\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar count = record.getDistributions().filter(function(val) {return val>0}).length;\n\t        \t\treturn count >= this.getLow() && count <= this.getHigh();\n\t        \t}\n    \t\t}),\n    \t\tspanSome :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'coverage',\n\t    \t\tname: 'spanSome',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length-1);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tfor (var i=low; i<high+1; i++) {\n\t        \t\t\tif (vals[i]>0) {return true}\n\t        \t\t}\n\t        \t\treturn false;\n\t        \t}\n    \t\t}),\n    \t\tspanAll :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'coverage',\n\t    \t\tname: 'spanAll',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length-1);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tfor (var i=low; i<high+1; i++) {\n\t        \t\t\tif (vals[i]==0) {return false}\n\t        \t\t}\n\t        \t\treturn true;\n\t        \t}\n    \t\t}),\n    \t\tspanOnly :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'coverage',\n\t    \t\tname: 'spanOnly',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length-1);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tfor (var i=0; i<vals.length; i++) {\n\t        \t\t\tif (i<low || i>high) {\n\t        \t\t\t\tif (vals[i]>0) {return false}\n\t        \t\t\t} else {\n\t        \t\t\t\tif (vals[i]==0) {return false}\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn true;\n\t        \t}\n    \t\t}),\n    \t\trawFreq :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'frequencies',\n\t    \t\tname: 'rawFreq',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tvar vals = store.getRange().map(function(r) {return r.get('rawFreq')});\n\t    \t\t\tthis.setMin(Ext.Array.min(vals))\n\t    \t\t\tthis.setMax(Ext.Array.max(vals))\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), val = record.get(\"rawFreq\");\n\t        \t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\trawFreqPercentile :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'frequencies',\n\t    \t\tname: 'rawFreqPercentile',\n\t    \t\tmin: 0,\n\t    \t\tmax: 100,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.vals = store.getRange().map(function(r) {return r.get('rawFreq')});\n\t    \t\t\tthis.vals.sort(function (a, b) {  return a - b;  });\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(),\n\t        \t\t\tind = Ext.Array.indexOf(this.vals, record.get(\"rawFreq\")),\n\t        \t\t\tval = Math.round(ind*100/this.vals.length)\n\t        \t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\tdistributionsStdDev :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'frequencies',\n\t    \t\tname: 'distributionsStdDev',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tvar allvals = Ext.Array.flatten(store.getRange().map(function(r) {return r.getDistributions()}));\n\t    \t\t\t// we'll scale to all available distributions, otherwise we're not making similar comparisons\n\t    \t\t\tvar scale = d3.scaleLinear().domain([d3.min(allvals),d3.max(allvals)]).range([0,100]);\n\t    \t\t\tstore.each(function(record) {\n\t    \t\t\t\tif (record.get(\"distributionsStdDev\")===undefined) {\n\t    \t\t\t\t\t// https://derickbailey.com/2014/09/21/calculating-standard-deviation-with-array-map-and-array-reduce-in-javascript/\n\t    \t\t\t\t\t// https://gist.github.com/Daniel-Hug/7273430\n\t\t    \t\t\t\tvar vals = record.getDistributions();\n\t\t    \t\t\t\tvar scaledVals = vals.map(function(v) {return scale(v)});\n\t\t    \t\t\t\tvar avg = Ext.Array.mean(scaledVals);\n\t\t\t\t\t\t\tvar squareDiffs = vals.map(function(value){\n\t\t\t\t\t\t\t\t    var diff = value - avg;\n\t\t\t\t\t\t\t\t    var sqrDiff = diff * diff;\n\t\t\t\t\t\t\t\t    return sqrDiff;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar avgSquareDiff = Ext.Array.mean(squareDiffs);\n\t\t\t\t\t\t\tvar stdDev = Math.sqrt(avgSquareDiff);\n\t\t\t\t\t\t\trecord.set(\"distributionsStdDev\", stdDev);\n\t    \t\t\t\t}\n\t    \t\t\t})\n\t    \t\t\tvar vals = store.getRange().map(function(r) {return r.get('distributionsStdDev')});\n\t    \t\t\tthis.setMin(Ext.Array.min(vals))\n\t    \t\t\tthis.setMax(Ext.Array.max(vals))\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(),\n\t        \t\t\tval = record.get(\"distributionsStdDev\");\n\t        \t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\tdistributionsStdDevPercentile :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'frequencies',\n\t    \t\tname: 'distributionsStdDevPercentile',\n\t    \t\tmin: 0,\n\t    \t\tmax: 100,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.vals = store.getRange().map(function(r) {return r.get('distributionsStdDev')});\n\t    \t\t\tthis.vals.sort(function (a, b) {  return a - b;  });\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(),\n        \t\t\t\tind = Ext.Array.indexOf(this.vals, record.get(\"distributionsStdDev\")),\n        \t\t\t\tval = Math.round(ind*100/this.vals.length)\n        \t\t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\ttermsLength :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'terms',\n\t    \t\tname: 'termsLength',\n\t    \t\toffsetTipText: true,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tvar vals = store.getRange().map(function(r) {return r.get('term').length});\n\t    \t\t\tthis.setMin(Ext.Array.min(vals))\n\t    \t\t\tthis.setMax(Ext.Array.max(vals))\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), val = record.get(\"term\").length;\n\t        \t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\ttermsLengthPercentile :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'terms',\n\t    \t\tname: 'termsLengthPercentile',\n\t    \t\tmin: 0,\n\t    \t\tmax: 100,\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.vals = store.getRange().map(function(r) {return r.get('term').length});\n\t    \t\t\tthis.vals.sort(function (a, b) {  return a - b;  });\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(),\n        \t\t\t\tind = Ext.Array.indexOf(this.vals, record.get(\"term\").length),\n        \t\t\t\tval = Math.round(ind*100/this.vals.length)\n        \t\t\treturn val>=low && val <= high;\n\t        \t}\n    \t\t}),\n    \t\tdistributionIncreases :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionIncreases',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tvar increases = 0;\n\t        \t\tfor (var i=1;i<vals.length;i++) {\n\t        \t\t\tif (vals[i]>vals[i-1]) {\n\t        \t\t\t\tincreases++;\n\t        \t\t\t\tif (increases>high) {return false}\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn increases>=low;\n\t        \t}\n    \t\t}),\n    \t\tdistributionConsecutiveIncreases :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionConsecutiveIncreases',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tvar increases = 0;\n\t        \t\tfor (var i=1;i<vals.length;i++) {\n\t        \t\t\tif (vals[i]>vals[i-1]) {\n\t        \t\t\t\tincreases++;\n\t        \t\t\t\tif (increases>high) {return false}\n\t        \t\t\t} else {\n\t        \t\t\t\tincreases=0;\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn increases>=low;\n\t        \t}\n    \t\t}),\n    \t\tdistributionDecreases :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionDecreases',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tvar decreases = 0;\n\t        \t\tfor (var i=1;i<vals.length;i++) {\n\t        \t\t\tif (vals[i]<vals[i-1]) {\n\t        \t\t\t\tdecreases++;\n\t        \t\t\t\tif (decreases>high) {return false}\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn decreases>=low;\n\t        \t}\n    \t\t}),\n    \t\tdistributionConsecutiveDecreases :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionConsecutiveDecreases',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions();\n\t        \t\tvar decreases = 0;\n\t        \t\tfor (var i=1;i<vals.length;i++) {\n\t        \t\t\tif (vals[i]<vals[i-1]) {\n\t        \t\t\t\tdecreases++;\n\t        \t\t\t\tif (decreases>high) {return false}\n\t        \t\t\t} else {\n\t        \t\t\t\tdecreases = 0;\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\treturn decreases>=low;\n\t        \t}\n    \t\t}),\n    \t\tdistributionMax :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionMax',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions(), val = Ext.Array.max(vals);\n\t        \t\tfor (var i=low;i<high;i++) { // look at every value in case there are duplicate values\n\t        \t\t\tif (vals[i]==val) {return true}\n\t        \t\t}\n\t        \t\treturn false;\n\t        \t}\n    \t\t}),\n    \t\tdistributionMin :new Voyant.util.LoomControl({\n\t    \t\tgroup: 'distributions',\n\t    \t\tname: 'distributionMin',\n\t    \t\tinitControl: function(store) {\n\t    \t\t\tthis.setMax(store.getAt(0).getDistributions().length);\n\t        \t},\n\t        \tvalidateRecord: function(record) {\n\t        \t\tvar low = this.getLow(), high = this.getHigh(), vals = record.getDistributions(), val = Ext.Array.min(vals);\n\t        \t\tfor (var i=low;i<high;i++) { // look at every value in case there are duplicate values\n\t        \t\t\tif (vals[i]==val) {return true}\n\t        \t\t}\n\t        \t\treturn false;\n\t        \t}\n    \t\t})\n    \t});\n\n    \tcontrols.each(function(control) {\n    \t\tvar val = this.getApiParam(control.getName()), vals = (val || \"\").split(\",\");\n    \t\tcontrol.setEnabled(val!==undefined);\n    \t\tif (vals.length==2) {\n    \t\t\tcontrol.setLow(parseInt(vals[0]))\n    \t\t\tcontrol.setHigh(parseInt(vals[1]))\n    \t\t}\n    \t\tcontrol.on(\"change\", function(control) {\n    \t\t\tif (control.getEnabled()) {\n    \t\t\t\tthis.setApiParam(control.getName(), control.getLow()+\",\"+control.getHigh());\n    \t\t\t} else {\n    \t\t\t\tthis.setApiParam(control.getName(), undefined);\n    \t\t\t}\n    \t\t\tthis.filterRecords();\n    \t\t}, this);\n    \t}, this);\n\n    \tthis.setControls(controls);\n    \t\n    \t// used below in preset handlers\n    \tvar me = this;\n    \tvar clearApiParamsForControls = function() {\n    \t\tvar currentParams = me.getApiParams();\n    \t\tvar params = {};\n    \t\tme.controls.each(function(control) {\n    \t\t\tcontrol.setEnabled(false, true);\n    \t\t\tvar name = control.getName();\n    \t\t\tif (name in currentParams) {\n    \t\t\t\tme.setApiParam(name, undefined)\n    \t\t\t}\n    \t\t})\n    \t}\n\n    \t\n    \tvar tbitems = [{\n    \t\ttext: this.localize(\"presetsGroup\"),\n    \t\tmenu: {\n    \t\t\titems: [{\n    \t\t\t\ttext: this.localize('presetHighFreq'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t    \tthis.filterRecords();\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetHighFreqLonger'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tthis.controls.getByKey(\"termsLengthPercentile\").setEnabled(true, true).setValues(50,100, true);\n    \t\t\t\t\tthis.controls.getByKey(\"rawFreqPercentile\").setEnabled(true, true).setValues(50,100);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetSingleDoc'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tthis.controls.getByKey(\"inDocuments\").setEnabled(true, true).setValues(1,1);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetIncreaseDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tvar control = this.controls.getByKey(\"distributionIncreases\");\n    \t\t\t\t\tvar max = control.getMax();\n    \t\t\t\t\tcontrol.setEnabled(true, true).setValues(Math.round(max*.75),max);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetDecreaseDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tvar control = this.controls.getByKey(\"distributionDecreases\");\n    \t\t\t\t\tvar max = control.getMax();\n    \t\t\t\t\tcontrol.setEnabled(true, true).setValues(Math.round(max*.75),max);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetNearStartDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tvar control = this.controls.getByKey(\"distributionMax\");\n    \t\t\t\t\tvar max = control.getMax();\n    \t\t\t\t\tcontrol.setEnabled(true, true).setValues(0, Math.round(max*.2));\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetNearEndDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tvar control = this.controls.getByKey(\"distributionMax\");\n    \t\t\t\t\tvar max = control.getMax();\n    \t\t\t\t\tcontrol.setEnabled(true, true).setValues(Math.round(max*.8), max);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t},{\n    \t\t\t\ttext: this.localize('presetSporadicDistributions'),\n    \t\t\t\thandler: function() {\n    \t\t\t\t\tclearApiParamsForControls();\n    \t\t\t\t\tthis.controls.getByKey(\"distributionsStdDevPercentile\").setEnabled(true, true).setValues(80, 100);\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t}]\n    \t\t}\n    \t}, {\n    \t\txtype: 'tbspacer'\n    \t}];\n    \t[\"frequencies\",\"coverage\",\"distributions\",\"terms\"].map(function(group) {\n    \t\ttbitems.push({\n    \t\t\ttext: this.localize(group+\"Group\"),\n    \t\t\tmenu: {\n    \t\t\t\titems: controls.filterBy(function(control) {return control.getGroup()==group}).getRange().map(function(control) {\n    \t\t\t\t\treturn {\n    \t\t\t\t\t\txtype: 'menucheckitem',\n    \t\t\t\t\t\tchecked: control.getEnabled(),\n\t\t\t\t\t\t\ttext: this.localize(control.getName()+\"Label\"),\n\t\t\t\t\t\t\ttooltip: this.localize(control.getName()+\"LabelTip\"),\n\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\tbeforerender: function(cmp) {\n\t\t\t\t\t\t\t\t\tcmp.setChecked(control.getEnabled());\n\t\t\t\t\t\t\t\t\tcontrol.on(\"change\", function() {\n\t\t\t\t\t\t\t\t\t\tcmp.setChecked(control.getEnabled());\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tclick: function(cmp) {\n\t\t\t\t\t\t\t\t\tcontrol.setEnabled(cmp.checked)\n\t\t\t\t\t\t\t\t\tcmp.getMenu().setDisabled(!cmp.checked)\n\t\t\t\t\t\t\t\t\tif (cmp.checked) {cmp.getMenu().show();}\n\t\t\t\t\t\t\t\t\telse {cmp.getMenu().hide()}\n\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t},\n\t\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\t\tdisabled: !control.getEnabled(),\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\txtype: 'multislider',\n\t\t\t\t\t\t\t\t\twidth: 100,\n\t\t\t\t\t\t\t\t\tminValue: control.getMin() || 0,\n\t\t\t\t\t\t\t\t\tmaxValue: control.getMax() || 0,\n\t\t\t\t\t\t\t\t\tvalues: [(control.getLow() || 0), (control.getHigh() || 0)],\n\t\t\t\t\t\t\t\t\ttipText: function(t) {\n\t\t\t\t\t\t\t\t\t\treturn control.getOffsetTipText() ? t.value+1 : t.value;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tlisteners: {\n    \t\t\t\t\t\t\t\t\tbeforerender: function(slider) {\n    \t\t\t\t\t\t\t\t\t\tslider.updateFromControl(control);\n    \t\t\t\t\t\t\t\t\t\tcontrol.on(\"change\", function() {\n    \t\t\t\t\t\t\t\t\t\t\tslider.updateFromControl(control);\n    \t\t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t\t},\n    \t\t\t\t\t\t\t\t\tchangecomplete: function(slider) {\n    \t\t\t\t\t\t\t\t\t\tcontrol.setValues(slider.getValues());\n    \t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tupdateFromControl: function(control) {\n\t\t\t\t\t\t\t\t\t\tthis.setMinValue(control.getMin() || 0);\n\t\t\t\t\t\t\t\t\t\tthis.setMaxValue(control.getMax());\n\t\t\t\t\t\t\t\t\t\tthis.setValue(0, control.getLow() || 0)\n\t\t\t\t\t\t\t\t\t\tthis.setValue(1, control.getHigh()===undefined ? (control.getMax() || 0) : control.getHigh())\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t}, this)\n    \t\t\t}\n    \t\t});\n    \t}, this);\n    \t\n        Ext.apply(this, {\n            title: this.localize('title'),\n            layout: {\n            \ttype: 'hbox',\n            \talign: 'stretch'\n            },\n            listeners: {\n            \tafterrender: function() {\n            \t\tvar terms = this.getComponent(\"terms\"), threads = this.getComponent(\"threads\");\n            \t\t\n            \t\t// this is a quick and dirty implementation to mirror actions in the terms panel to the threads panel,\n            \t\t// but it should probably redone locally to the threads logic and using the tips\n            \t\tterms.on(\"termHovered\", function(src, term) {\n            \t\t\tvar thick = threads.getTargetEl().dom.querySelector(\"path[term=\"+term+\"]\");\n            \t\t\tif (thick) {\n                \t\t\tvar fadeIt = function(node, time) {\n                \t\t\t\topacity = node.getAttribute(\"opacity\");\n                \t\t\t\tif (opacity>0) {\n                \t\t\t\t\topacity-=.01;\n                \t\t\t\t\tnode.setAttribute(\"opacity\", opacity)\n                \t\t\t\t\ttime=time/2\n                \t\t\t\t\tExt.defer(fadeIt, time, this, [node, time]);\n                \t\t\t\t}\n                \t\t\t}   \n                \t\t\tthick.setAttribute(\"opacity\", 1);\n                \t\t\tfadeIt(thick, 1000);\n            \t\t\t}\n            \t\t})\n            \t}\n            },\n            items: [{\n            \titemId: 'terms',\n            \twidth: 100,\n            \tlayout: 'fit',\n            \tlisteners: {\n            \t\tfilterchange: function(store) {\n            \t\t\tvar el = this.getTargetEl(), width = el.getWidth(), height = el.getHeight(), len = store.getCount();\n            \t\t\tel.setHtml(\" \")\n            \t\t\tterms = store.getRange().map(function(r,i) {\n            \t\t\t\treturn {\n            \t\t\t\t\tterm: r.getTerm(),\n            \t\t\t\t\tcol: Voyant.application.getColorForTerm(r.getTerm(), true),\n            \t\t\t\t\tx: width/2,\n            \t\t\t\t\ty: i*height/len\n            \t\t\t\t}\n            \t\t\t});\n            \t\t\tterms.sort(function(a, b) {return a.term.localeCompare(b.term)});\n            \t\t\t\n            \t\t\t// attempts to use fisheye code failed with larger number or words http://bl.ocks.org/jczaplew/8603055\n\n            \t\t\t\n            \t\t\t\n          \t\t\t  var svg = d3.select(el.dom).append(\"svg\")\n      \t\t\t    .attr(\"width\", width)\n      \t\t\t    .attr(\"height\", height)\n      \t\t\t  .append(\"g\")\n      \t\t\t    .attr(\"transform\", \"translate(-.5,-.5)\");\n          \t\t\t  \n          \t\t\tvar textHeight = Math.ceil(height/terms.length);\n        \t\t\t  var text = svg.selectAll(\"ytext\")\n      \t\t\t    .data(terms)\n      \t\t\t  .enter().append(\"text\")\n      \t\t\t    .text(function(d,i){return d.term})\n      \t\t\t    .attr(\"class\", \"ytext\") \n      \t\t\t    .attr(\"text-anchor\", \"middle\")\n    \t\t\t  \t.attr(\"x\", width/2)\n    \t\t\t  \t.attr(\"y\", function(t, i) {return textHeight*i})\n      \t\t\t    .attr(\"fill\", function(d) {return Voyant.application.getColorForTerm(d.term, true)})\n\n            \t\t\tvar textHeight = Math.ceil(height/terms.length);\n\n            \t\t\t\n            \t\t\tvar fisheye = d3.fisheye.circular()\n\t            \t\t    .radius(50)\n\t            \t\t    .distortion(2);\n            \t\t\t\n            \t\t\tyFisheye = d3.fisheye.scale(d3.scaleIdentity).domain([0, height]);\n            \t\t\t\n            \t\t\tvar me = this;\n            \t\t\tsvg.on(\"mousemove\", function() {\n            \t\t\t\tvar mouse = d3.mouse(this);\n            \t\t\t\t\tcurrentItem = Math.round(mouse[1]*terms.length/height),\n            \t\t\t\t\tcurrentItem = Math.min(currentItem, terms.length-1);\n            \t\t\t\tfisheye.focus(mouse[1]);\n            \t\t\t\tyFisheye.focus(mouse[1]);\n            \t\t\t\t\n            \t\t\tvar nodes = text.nodes();\n            \t\t\tif (nodes[currentItem]) {\n                \t\t\tme.fireEvent(\"termHovered\", me, nodes[currentItem].textContent)\n            \t\t\t}\n            \t\t\t\n            \t\t\tvar fs = 14, y=Math.max(mouse[1],fs), fo=1;\n            \t\t\td3.select(nodes[currentItem])\n            \t\t\t\t.attr(\"y\", function(d) { return y })\n            \t\t\t\t.attr(\"font-size\", fs)\n            \t\t\t\t.attr(\"fill-opacity\", fo)\n            \t\t\t\t\n            \t\t\tvar yin = undefined;\n            \t\t\tfor (var i=currentItem-1;i>-1;i--) {\n            \t\t\t\tif (fs>=8) {\n            \t\t\t\t\ty-=fs\n            \t\t\t\t\tfs-=.5\n            \t\t\t\t} else {\n            \t\t\t\t\tif (yin==undefined) {\n            \t\t\t\t\t\tyin = y/i\n            \t\t\t\t\t}\n            \t\t\t\t\ty-=yin;\n            \t\t\t\t}\n            \t\t\t\tif (fo>.1) {fo-=.05}\n                \t\t\td3.select(nodes[i])\n            \t\t\t\t.attr(\"y\", function(d) { return y })\n            \t\t\t\t.attr(\"font-size\", fs)\n            \t\t\t\t.attr(\"fill-opacity\", fo)\n            \t\t\t}\n            \t\t\t\n            \t\t\tfs = 14, y=Math.max(mouse[1],fs), fo=1, yin=undefined;\n            \t\t\t\n\n            \t\t\tfor (var i=currentItem+1,len=terms.length;i<len;i++) {\n            \t\t\t\tif (fs>=8) {\n            \t\t\t\t\ty+=fs\n            \t\t\t\t\tfs-=.5\n            \t\t\t\t} else {\n            \t\t\t\t\tif (yin==undefined) {\n            \t\t\t\t\t\tyin = (height-y)/(len-i)\n            \t\t\t\t\t}\n            \t\t\t\t\ty+=yin;\n            \t\t\t\t}\n            \t\t\t\tif (fo>.1) {fo-=.05}\n                \t\t\td3.select(nodes[i])\n            \t\t\t\t.attr(\"y\", function(d) { return y })\n            \t\t\t\t.attr(\"font-size\", fs)\n            \t\t\t\t.attr(\"fill-opacity\", fo)\n            \t\t\t}\n\n            \t\t\t})\n\n            \t\t}\n            \t}\n            },{\n            \titemId: 'threads',\n//                html: '<canvas></canvas>',\n                layout: 'fit',\n                flex: 1,\n                listeners: {\n//                \tboxready: function() {\n//                \t\tthis.body.down(\"canvas\").dom.width=this.getTargetEl().getWidth();\n//                \t\tthis.body.down(\"canvas\").dom.height=this.getTargetEl().getHeight();\n//                \t},\n            \t\tfilterchange: function(store) {\n            \t\t\tvar el = this.getTargetEl(), width = el.getWidth(), height = el.getHeight();\n            \t\t\tel.setHtml(\" \"); // empty\n            \t\t\tterms = store.getRange().map(function(r) {return {\n            \t\t\t\tterm: r.getTerm(),\n            \t\t\t\tvals: r.getDistributions()\n            \t\t\t}})\n            \t\t\tvar svg = d3.select(el.dom).append(\"svg\")\n            \t\t      .attr(\"width\", el.getWidth())\n            \t\t      .attr(\"height\", el.getHeight());\n            \t\t\t\n            \t\t\tif (terms.length==0) {\n            \t\t\t\treturn this.up(\"panel\").toastInfo(\"No hits\")\n            \t\t\t}\n            \t\t\t\n            \t\t\tvar xincrement = width/terms[0].vals.length;\n            \t\t\t\n            \t\t\tvar scale, scaleApi = this.up('loom').getApiParam(\"scaling\");\n            \t\t\tif (scaleApi==\"sqrt\") {scale = d3.scaleSqrt()}\n            \t\t\telse if (scaleApi==\"log\") {scale = d3.scaleLog();}\n            \t\t\telse {scale = d3.scaleLinear();}\n            \t\t\t\n            \t\t\tvar yscale = scale\n            \t\t\t\t.domain([\n            \t\t\t\t\tMath.max(1e-6, Ext.Array.min(terms.map(function(t) {return Ext.Array.min(t.vals)}))),\n            \t\t\t\t\tMath.max(1e-6, Ext.Array.max(terms.map(function(t) {return Ext.Array.max(t.vals)})))\n            \t\t\t\t\t]).range([1e-6, height-2]);\n            \t\t\t\n//            \t\t\tconsole.warn(\n//            \t\t\t\t\tMath.max(1e-6, Ext.Array.min(terms.map(function(t) {return Ext.Array.min(t.vals)}))),\n//            \t\t\t\t\tMath.max(1e-6, Ext.Array.max(terms.map(function(t) {return Ext.Array.max(t.vals)})))\n//            \t\t\t\t\t);\n            \t\t\t\n            \t\t\tvar valueline = d3.line()\n            \t\t\t\t.curve(d3.curveCardinal)\n\t            \t\t    .x(function(d, i) { return (xincrement/2)+(xincrement*i)})\n\t            \t\t    .y(function(d) { return height-1-yscale(d)});\n            \t\t\t\n        \t\t\t    var tooltip = svg.append(\"g\")\n        \t\t\t    \t.attr(\"opacity\", 0);\n        \t\t\t    \n        \t\t\t    var tooltipbox = tooltip.append(\"rect\")\n        \t\t\t    \t.attr(\"fill\", \"white\")\n        \t\t\t    \t.attr(\"text-anchor\", \"middle\")\n        \t\t\t    \t.attr(\"alignment-baseline\", \"middle\")\n        \t\t\t    \t.attr(\"stroke\", \"rgba(0,0,0,.05)\")\n        \t\t\t    \t.attr(\"class\", \"rect\")\n        \t\t\t    \t.attr(\"x\", 100)\n        \t\t\t    \t.attr(\"y\", 100)\n        \t\t\t    \t.attr(\"width\", 70)\n        \t\t\t    \t.attr(\"height\", 16)\n        \t\t\t    \t.attr(\"opacity\", 1)\n        \t\t\t    \t\n        \t\t\t    var tooltiptext = tooltip\n        \t\t\t    \t.append(\"text\")\n        \t\t\t    \t.attr(\"text-anchor\", \"middle\")\n        \t\t\t    \t.attr(\"alignment-baseline\", \"middle\")\n        \t\t\t    \t.attr(\"x\", 100)\n        \t\t\t    \t.attr(\"y\", 100)\n//        \t\t\t    \t.attr(\"width\", 100)\n//        \t\t\t    \t.attr(\"height\", 12)\n        \t\t\t    \t.text(\"testing\")\n\n            \t\t\tterms.forEach(function(term) {\n            \t\t\t\tvar color = Voyant.application.getColorForTerm(term.term, true)\n            \t\t\t\t\n            \t\t\t\t// draw a first line, always visible\n            \t\t\t\tsvg.append(\"path\")\n            \t\t\t      .datum(term.vals)\n\t\t\t\t\t\t      .attr(\"fill\", \"none\")\n\t\t\t\t\t\t      .attr(\"stroke\", color)\n\t\t\t\t\t\t      .attr(\"opacity\", .5)\n\t\t\t\t\t\t      .attr(\"stroke-linejoin\", \"round\")\n\t\t\t\t\t\t      .attr(\"stroke-linecap\", \"round\")\n\t\t\t\t\t\t      .attr(\"stroke-width\", 1)\n\t\t\t\t\t\t      .attr(\"class\", \"line\")\n            \t\t\t      .attr(\"d\", valueline)\n\n            \t\t\t\t\n            \t\t\t    // draw a second line to make it easier to hover (line width 1 is harder to find)\n            \t\t\t\tsvg.append(\"path\")\n            \t\t\t      .datum(term.vals)\n\t\t\t\t\t\t      .attr(\"fill\", \"none\")\n\t\t\t\t\t\t      .attr(\"stroke\", color)\n\t\t\t\t\t\t      .attr(\"opacity\", 0)\n\t\t\t\t\t\t      .attr(\"stroke-width\", 3)\n\t\t\t\t\t\t      .attr(\"class\", \"line\")\n            \t\t\t      .attr(\"term\", term.term)\n            \t\t\t      .attr(\"d\", valueline)\n\t\t\t\t\t\t      .on('mouseover', function() { // on mouse out hide line, circles and text\n\t\t\t\t\t\t    \t  d3.select(this)\n\t\t\t\t\t\t    \t  \t.attr(\"opacity\", 1);\n\t\t\t\t\t\t    \t  \n\t\t\t\t\t\t    \t  var coords = d3.mouse(this);\n\t\t\t\t\t\t    \t  \n\t\t\t\t\t\t    \t  tooltip\n\t\t\t\t\t\t    \t  \t.attr(\"opacity\", 1)\n\t\t\t\t\t\t    \t  \t\n\t\t\t\t\t\t    \t  tooltipbox\n\t\t\t\t\t\t    \t  \t.attr(\"x\", coords[0]-35)\n\t\t\t\t\t\t    \t  \t.attr(\"y\", coords[1] -8+ (coords[1]>height/2 ? -18 : 18))\n\t\t\t\t\t\t\t    \t \n\t\t\t\t\t\t    \t  tooltiptext\n\t\t\t\t\t\t\t    \t  \t.text(term.term)\n\t\t\t\t\t\t\t    \t  \t.attr(\"fill\", color)\n\t\t\t\t\t\t\t    \t  \t.attr(\"x\", coords[0])\n\t\t\t\t\t\t\t    \t  \t.attr(\"y\", coords[1] + (coords[1]>height/2 ? -18 : 18))\n\n\t\t\t\t\t\t      })\n\t\t\t\t\t\t      .on('mouseout', function() { // on mouse out hide line, circles and text\n\t\t\t\t\t\t    \t  d3.select(this)\n\t\t\t\t\t\t    \t  \t.attr(\"opacity\", 0);\n\t\t\t\t\t\t    \t  tooltip.attr(\"opacity\", 0)\n\t\t\t\t\t\t      })\n\t\t\t\t\t\t      \n\t\t\t\t\t\t      tooltip.raise(); // make sure this is at top level for legibility\n\n            \t\t\t}, this)\n            \t\t}\n\n                }\n            }],\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [tbitems[0], tbitems[2], tbitems[3], tbitems[4], tbitems[5]/*, {\n                \ttext: this.localize(\"controls\"),\n                \ttooltip: this.localize(\"controlsTip\"),\n                \tmenu: {\n                    \titems: tbitems\n                \t}\n                }*/,{\n        \t\t\tfieldLabel: this.localize('visibleTerms'),\n        \t\t\tlabelWidth: 70,\n        \t\t\twidth: 120,\n        \t\t\txtype: 'slider',\n\t            \tincrement: 25,\n\t            \tminValue: 25,\n\t            \tmaxValue: 5000,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"limit\")));\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({limit: newvalue});\n\t            \t\t\t// maybe not necessary when value is smaller\n\t            \t\t\tthis.fireEvent(\"loadedCorpus\", this, this.getCorpus())\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                },{\n                \ttext: this.localize(\"scaling\"),\n                \tmenu: {\n                \t\tdefaults: {\n                \t\t\txtype: 'menucheckitem',\n                \t\t\thandler: function(cmp) {\n                \t\t\t\tthis.setApiParam(\"scaling\", cmp.getItemId());\n                        \t\tthis.getComponent(\"threads\").fireEventArgs(\"filterchange\", [this.getStore()]);\n                \t\t\t},\n                \t\t\tscope: this,\n                \t\t\tlisteners: {\n                \t\t\t\tafterrender: function(cmp) {\n                \t\t\t\t\tcmp.setChecked(cmp.getItemId()==this.getApiParam(\"scaling\"))\n                \t\t\t\t},\n                \t\t\t\tscope: this\n                \t\t\t},\n                \t\t\tgroup: 'scaling'\n                \t\t},\n                \t\titems: [{\n                \t\t\ttext: this.localize(\"scaleLinear\"),\n                \t\t\titemId: 'linear'\n                \t\t},{\n                \t\t\ttext: this.localize(\"scaleLog\"),\n                \t\t\titemId: 'log'\n                \t\t},{\n                \t\t\ttext: this.localize(\"scaleSqrt\"),\n                \t\t\titemId: 'sqrt'\n                \t\t}]\n                \n                \t}\n                }]\n              }]\n        });\n        \n        this.on('loadedCorpus', function(src, corpus) {\n        \tvar store = corpus.getDocumentsCount()==1 ? corpus.getDocumentTerms() : corpus.getCorpusTerms();\n        \tstore.on(\"load\", function() {\n        \t    this.updateControlsFromStore();\n\t\t    \tthis.filterRecords();\n        \t}, this);\n        \tstore.on(\"filterchange\", function() {\n        \t\tthis.getComponent(\"terms\").fireEventArgs(\"filterchange\", arguments);\n        \t\tthis.getComponent(\"threads\").fireEventArgs(\"filterchange\", arguments);\n        \t\t\n        \t}, this);\n        \tthis.setStore(store);\n        \tparams = this.getApiParams();\n        \tExt.apply(params, {\n        \t\twithDistributions: true\n        \t});\n        \tstore.load({\n    \t\t    callback: function(records, operation, success) {\n    \t\t    \tthis.filterRecords();\n    \t\t    },\n    \t\t    scope: this,\n    \t\t    params: params\n        \t});\n\n        }, this);\n        \n        this.callParent(arguments);\n    },\n\n    filterRecords: function() {\n    \tvar store = this.getStore();\n    \tstore.clearFilter();\n    \tvar limit = parseInt(this.getApiParam(\"limit\")), hit = 0;\n    \tstore.filterBy(function(record) {\n    \t\tvar keep = Ext.Array.every(this.getControls().getRange(), function(control) {\n    \t\t\treturn control.getEnabled()==false || control.getValidateRecord().call(control, record);\n    \t\t}, this);\n    \t\treturn keep && hit++<limit;\n    \t}, this)\n    },\n    \n    updateControlsFromStore: function() {\n    \tvar store = this.getStore();\n    \tthis.getControls().each(function(control) {\n    \t\tcontrol.suspendEvent(\"change\");\n    \t\tcontrol.initControl.call(this, store);\n    \t\tif (control.getMin()===undefined) {control.setMin(0);}\n    \t\tif (control.getLow()==undefined) {control.setLow(control.getMin())}\n    \t\tif (control.getMax()===undefined) {control.setMax(1);} // shouldn't happen\n    \t\tif (control.getHigh()==undefined) {control.setHigh(control.getMax())}\n    \t\tcontrol.resumeEvent(\"change\");\n    \t})\n    },\n    \n    revalidate: function() {\n    \tvar canvas = this.body.down('canvas').dom, ctx = canvas.getContext(\"2d\");\n    \tctx.clearRect(0,0,canvas.width,canvas.height);\n\n    \tvar controls = this.query('loomcontrol');\n    \t\n    \tvar loomTermRecords = new Voyant.panel.LoomTermRecords();\n    \tthis.getStore().each(function(record) {\n    \t\tvar vals = record.getDistributions().map(function(v) {return true;})\n    \t\tExt.Array.each(controls, function(control) {\n    \t\t\tif (control.getChecked()) {\n    \t\t\t\tif (control.validateRecord) {\n    \t\t\t\t\tvar newvals = control.validateRecord.call(this, control.getField(), record, record.getDistributions());\n//    \t\t\t\t\tconsole.warn(control.getName(), newvals)\n    \t\t\t\t\tif (Ext.isBoolean(newvals) && !newvals) {\n    \t\t\t\t\t\tvals = false;\n    \t\t\t\t\t\treturn false;\n    \t\t\t\t\t} else if (Ext.isArray(newvals)) {\n        \t\t\t\t\tfor (var i=0; i<vals.length; i++) {\n        \t\t\t\t\t\tvals[i] = vals[i] && newvals[i];\n        \t\t\t\t\t}\n        \t\t\t\t\treturn Ext.Array.some(vals, function(v) {return v})\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t}\n    \t\t});\n    \t\tif (Ext.isArray(vals) && Ext.Array.some(vals, function(v) {return v})) {\n    \t\t\tloomTermRecords.add(record);\n    \t\t}\n    \t})\n    \t\n    \tloomTermRecords.update(canvas, ctx);\n    }\n    \n});\n\nExt.define('Voyant.panel.LoomTermRecords', {\n\tconfig: {\n\t\ttermRecords: []\n\t},\n\tconstructor: function(config) {\n\t\tthis.setTermRecords([])\n\t    this.callParent(arguments);\n\t},\n\tadd: function(record) {\n\t\tthis.getTermRecords().push(new Voyant.panel.LoomTermRecord(record));\n\t},\n\tupdate: function(canvas, ctx) {\n\t\tvar min = Ext.Array.min(this.getTermRecords().map(function(r) {return Ext.Array.min(r.getValues())}))\n\t\tvar max = Ext.Array.max(this.getTermRecords().map(function(r) {return Ext.Array.max(r.getValues())}))\n\t\tthis.getTermRecords().forEach(function(r) {\n\t\t\tr.update(canvas, ctx, min, max)\n\t\t})\n\t}\n})\n\nExt.define('Voyant.panel.LoomTermRecord', {\n\tconfig: {\n\t\trecord: undefined,\n\t\tvalues: undefined,\n\t\tterm: undefined,\n\t\ttexts: undefined\n\t},\n\tconstructor: function(config) {\n\t\tthis.setRecord(config);\n\t\tthis.setValues(config.getDistributions());\n\t\tvar term = config.getTerm();\n\t\tthis.setTerm(term);\n\t\tthis.setTexts(config.getDistributions().map(function(v) {\n\t\t\treturn new Ext.draw.sprite.Text({\n\t\t\t\ttype: 'text',\n\t\t\t\ttext: term\n\t\t\t})\n\t\t}))\n\t    this.callParent(arguments);\n\t},\n\tupdate: function(canvas, ctx, min, max) {\n\t\tvar values = this.getValues(), columnWidth = canvas.offsetWidth/(values.length),\n\t\t\theight = canvas.offsetHeight, term = this.getTerm();\n\t\tthis.getTexts().forEach(function(text, i) {\n\t\t\tvar y = values[i]*height/max;\n\t\t    ctx.fillText(term, (columnWidth/2)+(i*columnWidth), height-y);\n\t\t})\n\t}\n})\n\nExt.define('Voyant.util.LoomControl', {\n    extend: 'Ext.Base',\n    mixins: ['Ext.mixin.Observable'],\n    constructor: function(config) {\n    \tthis.mixins.observable.constructor.call(this, config);\n        this.callParent(arguments);\n    },\n    config: {\n    \tgroup: undefined,\n    \tname: undefined,\n    \tenabled: false,\n    \tmin: undefined,\n    \tmax: undefined,\n    \tlow: undefined,\n    \thigh: undefined,\n    \tinitControls: Ext.emptyFn,\n    \tvalidateRecord: Ext.emptyFn,\n\t\toffsetTipText: false\n    },\n    setMin: function() {\n    \tthis.callParent(arguments);\n    \tthis.fireEvent(\"change\", this);\n    \treturn this;\n    },\n    setMax: function() {\n    \tthis.callParent(arguments);\n    \tthis.fireEvent(\"change\", this);\n    \treturn this;\n    },\n    setLow: function() {\n    \tthis.callParent(arguments);\n    \tthis.fireEvent(\"change\", this);\n    \treturn this;\n    },\n    setHigh: function() {\n    \tthis.callParent(arguments);\n    \tthis.fireEvent(\"change\", this);\n    \treturn this;\n    },\n    setValues: function(low, high) {\n    \tthis.suspendEvent(\"change\");\n    \tif (Ext.isArray(low)) {\n        \tthis.setLow(low[0]);\n        \tthis.setHigh(low[1]);\n    \t} else {\n        \tthis.setLow(low);\n        \tthis.setHigh(high);\n    \t}\n    \tthis.resumeEvent(\"change\");\n    \tif (arguments.length < 3 || !arguments[2]) {this.fireEvent(\"change\", this);}\n    \treturn this;\n    },\n    setEnabled: function() {\n    \tthis.callParent(arguments);\n    \tif (arguments.length < 2 || !arguments[1]) {this.fireEvent(\"change\", this);}\n    \treturn this;\n    }\n    \n})","Ext.define('Voyant.panel.MicroSearch', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.microsearch',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tquery: undefined\n    \t},\n\t\tglyph: 'xf1ea@FontAwesome'\n    },\n    config: {\n    \t/**\n    \t * @private\n    \t */\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n    \t\n    \t/**\n    \t * @private\n    \t */\n    \tmaxTokens: 0,\n    \t\n    \t/**\n    \t * @private\n    \t */\n    \ttokensPerSegment: 0,\n    \t\n    \t/**\n    \t * @private\n    \t */\n    \tmaxVerticalLines: 0,\n    \t\n    \t/**\n    \t * @private\n    \t */\n    \tmaxSegments: 0\n    },\n    constructor: function(config ) {\n\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \txtype: 'querysearchfield'\n                }]\n    \t\t}]\n    \t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.rendered) {\n    \t\t\tthis.initialize();\n    \t\t}\n    \t\telse {\n    \t\t\tthis.on(\"afterrender\", function() {\n    \t\t\t\tthis.initialize();\n    \t\t\t}, this)\n    \t\t}\n\n    \t});\n    \t\n    \tthis.on('query', function(src, query) {\n    \t\tthis.setApiParam('query', query);\n    \t\tthis.updateSearchResults();\n    \t})\n    \t\n    },\n    \n    initialize: function() {\n\n    \tvar el = this.getTargetEl(), corpus = this.getCorpus();\n    \t\n\t\tvar lineSize = 5; // pixels, including margins below and above\n\t\tthis.setMaxVerticalLines(Math.floor((el.getHeight() - 10 /* margin of 5px */) / lineSize));\n\t\t\n\t\t// max segments\n\t\tvar gutterSize = 10;\n\t\tvar corpusSize = corpus.getDocumentsCount();\n\t\tvar gutter = corpusSize * gutterSize;\n\t\tvar columnSize = Math.floor((el.getWidth() - gutter - 10 /* margin of 5px */) / corpusSize);\n\t\tif (columnSize>200) {columnSize=200;}\n\t\tvar segmentWidth = 3; // each segment is 3 pixels\n\t\tvar maxSegmentsPerLine = Math.floor(columnSize / segmentWidth);\n\t\tif (maxSegmentsPerLine<1) {maxSegmentsPerLine=1;}\n\t\t\n\t\t// and the answer is...\n\t\tthis.setMaxSegments(maxSegmentsPerLine * this.getMaxVerticalLines());\n\t\t\n\t\tvar documentsStore = corpus.getDocuments();\n\t\tthis.setMaxTokens(documentsStore.max('tokensCount-lexical'));\n\n\t\tthis.setTokensPerSegment(this.getMaxTokens() < this.getMaxSegments() ? 1 : Math.ceil(this.getMaxTokens()/this.getMaxSegments()));\n\t\t\n\n\t\tvar canvas = \"<table cellpadding='0' cellspacing='0' style='height: 100%'><tr>\";\n\t\tthis.segments = [];\n\t\tdocumentsStore.each(function(document) {\n\t\t\tdocIndex = document.getIndex();\n\t\t\tcanvas+='<td style=\"overflow: hidden; vertical-align: top; width: '+columnSize+'px;\">'+\n\t\t\t\t'<div class=\"docLabel\" style=\"white-space: nowrap; width: '+columnSize+'px;\" data-qtip=\"'+document.getFullLabel()+'\">'+document.getFullLabel()+\"</div>\"+\n\t\t\t\t'<canvas style=\"display: block;\" width=\"'+columnSize+'\" height=\"'+el.getHeight()+'\" id=\"'+this.body.id+'-'+docIndex+'\">'+\n\t\t\t\t'</td>';\n\t\t\tif (docIndex+1<corpusSize) {canvas+='<td style=\"width: '+gutterSize+'px;\">&nbsp;</td>';}\n\t\t}, this);\n\t\tcanvas+='</tr></table>';\n\t\tel.update(canvas);\n\t\t\n\t\tthis.updateSearchResults();\n\t\t\n    \tif (!this.getApiParam('query')) {\n    \t\tvar me = this;\n    \t\treturn this.getCorpus().loadCorpusTerms({limit: 1, stopList: this.getApiParam('stopList'), categories: this.getApiParam(\"categories\")}).then(function(corpusTerms) {\n    \t\t\tvar term = corpusTerms.getAt(0).getTerm();\n    \t\t\tvar q = me.down('querysearchfield');\n    \t\t\tq.addValue(new Voyant.data.model.CorpusTerm({term: term}));\n    \t\t\tme.fireEvent(\"query\", me, [term])\n    \t\t});\n    \t}\n\n    },\n    \n    updateSearchResults: function() {\n    \tquery = this.getApiParam('query');\n    \tif (Ext.Array.from(query).length==0) { // draw simple lines\n        \tthis.getCorpus().getDocuments().each(function(document) {\n        \t\tvar distributions = this.redistributeDistributions(document, new Array(this.getMaxSegments()));\n        \t\tthis.drawDocumentDistributions(document, distributions);\n        \t}, this)\n    \t} else {\n    \t\tthis.mask(this.localize('loading'))\n    \t\tthis.getCorpus().getDocumentTerms().load({\n    \t\t\tparams: {\n    \t\t\t\tquery: Ext.Array.from(query).join('|'), // treat as one query\n        \t\t\twithDistributions: 'relative',\n        \t\t\tbins: this.getMaxSegments(),\n        \t\t\tcategories: this.getApiParam('categories')\n    \t\t\t},\n    \t\t\tcallback: function(records, operation, success) {\n    \t\t\t\tthis.unmask();\n    \t\t\t\tvar max = 0, min = Number.MAX_VALUE, docs = [], m;\n    \t\t\t\trecords.forEach(function(record) {\n    \t\t\t\t\tvar doc = this.getCorpus().getDocument(record.getDocIndex());\n    \t\t\t\t\tvar distributions = this.redistributeDistributions(doc, record.getDistributions())\n    \t\t\t\t\tm = Ext.Array.max(distributions);\n    \t\t\t\t\tif (m>max) {max=m;}\n    \t\t\t\t\tdistributions.forEach(function(d) {\n    \t\t\t\t\t\tif (d && d<min) {\n    \t\t\t\t\t\t\tmin = d;\n    \t\t\t\t\t\t}\n    \t\t\t\t\t})\n    \t\t\t\t\tdocs[record.getDocIndex()] = this.redistributeDistributions(doc, record.getDistributions());\n    \t\t\t\t}, this);\n    \t\t\t\tdocs.forEach(function(distributions, i) {\n                    \tthis.drawDocumentDistributions(this.getCorpus().getDocument(i), distributions, min || Ext.Array.min(distributions), max || Ext.Array.max(distributions));\n    \t\t\t\t}, this)\n    \t\t\t},\n    \t\t\tscope: this\n    \t\t})\n    \t}\n    },\n    \n    redistributeDistributions: function(doc, distributions) {\n\t\tvar segments = Math.ceil(doc.getLexicalTokensCount() / this.getTokensPerSegment());\n\n\t\t// redistribute if needed, we'll take the mean of the distribution values to maintain comparison across segments\n    \tif (distributions.length>segments) {\n    \t\tvar newdistributions = [];\n    \t\tfor (var i=0; i<distributions.length; i++) {\n    \t\t\tvar a = parseInt(i*segments/distributions.length);\n    \t\t\tif (newdistributions[a]) {newdistributions[a].push(distributions[i])}\n    \t\t\telse {newdistributions[a]=[distributions[i]];}\n    \t\t}\n\t\t\tdistributions = newdistributions\n    \t\tfor (var i=0; i<distributions.length; i++) {\n    \t\t\tdistributions[i] = Ext.Array.mean(distributions[i]);\n    \t\t}\n    \t}\n    \treturn distributions;\n    },\n    \n    drawDocumentDistributions: function(doc, distributions, min, max) {\n    \tvar canvas = this.getTargetEl().dom.querySelector(\"#\"+this.body.id+\"-\"+doc.getIndex());\n    \tvar c = canvas.getContext('2d');\n    \tvar x = 0, w = canvas.clientWidth, y = 0;\n    \tfor (var j=0; j<distributions.length;j++) {\n    \t\tc.fillStyle = distributions[j] ? \"rgba(250,0,0,\"+(((distributions[j]-min)*.8/(max-min))+.2)+\")\" : \"rgb(230,230,230)\";\n    \t\tc.fillRect(x,y,3,3)\n    \t\tx+=3;\n    \t\tif (x>=w) {x=0; y+=5}\n    \t}\n    \t\n    }\n});","Ext.define('Voyant.panel.Mandala', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.mandala',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n    \t\t * @property stopList The stop list to use to filter results.\n    \t\t * Choose from a pre-defined list, or enter a comma separated list of words, or enter an URL to a list of stop words in plain text (one per line).\n    \t\t * @type String\n    \t\t * @private\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\tquery: undefined,\n    \t\t\n    \t\tlabels: true\n    \t\t\n    \t},\n    \tglyph: 'xf1db@FontAwesome'\n\t},\n\t\n\tgutter: 5,\n\t\n\ttextFont: '12px sans-serif',\n\t\n\tconfig: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n\t},\n\t\n    constructor: function() {\n\n    \tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n\t\t\thtml: '<div style=\"text-align: center\"><canvas width=\"800\" height=\"600\"></canvas></div>',\n\t\t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \ttext: this.localize('add'),\n        \t\t\tglyph: 'xf067@FontAwesome',\n                \thandler: function() {\n                \t\tthis.editMagnet();\n                \t},\n                \tscope: this\n                },{\n                \ttext: this.localize('clear'),\n\t\t\t\t\tglyph: 'xf014@FontAwesome',\n                \thandler: function() {\n                \t\tthis.setApiParam('query', undefined);\n                \t\tthis.updateFromQueries(true);\n                \t\tthis.editMagnet();\n                \t},\n                \tscope: this\n\t            },{\n\t                xtype: 'checkbox',\n\t                boxLabel: this.localize('labels'),\n\t                listeners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(this.getApiParam(\"labels\")===true);\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('labelsTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    change: function(cmp, val) {\n\t                    \tthis.setApiParam('labels', val);\n\t                    \tthis.draw();\n\t                    },\n\t                    scope: this\n\t                }\n\t            }]\n    \t\t}]\t\t\t\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.on('boxready', function(cmp) {\n\t\t\tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\");\n\t\t\tvar me = this;\n    \t\tcanvas.addEventListener('mousemove', function(evt) {\n    \t\t\tvar rect = canvas.getBoundingClientRect(), x =  evt.clientX - rect.left, y = evt.clientY - rect.top,\n\t\t\t\tchange = false, docRadius = parseInt(me.textFont)/2;\n    \t\t\tif (me.documents) {\n    \t\t\t\tme.documents.forEach(function(doc) {\n    \t\t\t\t\tvar isHovering = x > doc.x-docRadius && x < doc.x+docRadius && y > doc.y-docRadius && y < doc.y+docRadius;    \t\t\t\t\t\n    \t\t\t\t\tif (isHovering!=doc.isHovering) {change = true;}\n    \t\t\t\t\tdoc.isHovering = isHovering;\n    \t\t\t\t})\n    \t\t\t}\n\t\t\t\tradius = parseInt(me.textFont)/2;\n\t\t\t\tfor (term in me.magnets) {\n\t\t\t\t\tvar isHovering = x > me.magnets[term].x-radius && x < me.magnets[term].x+radius && y > me.magnets[term].y-radius && y < me.magnets[term].y+radius;    \t\t\t\t\t\n\t\t\t\t\tif (isHovering!=me.magnets[term].isHovering) {change = true;}\n\t\t\t\t\tme.magnets[term].isHovering = isHovering;\n\t\t\t\t}\n\t\t\t\tif (change) {\n\t\t\t\t\tme.draw();\n\t\t\t\t}\n    \t    }, false);\n    \t\tcanvas.addEventListener('click', function(evt) {\n    \t\t\tvar rect = canvas.getBoundingClientRect(), x =  evt.clientX - rect.left, y = evt.clientY - rect.top,\n\t\t\t\t\tdocRadius = parseInt(me.textFont)/2;\n\t\t\t\tfor (term in me.magnets) {\n\t\t\t\t\tif (x > me.magnets[term].x-radius && x < me.magnets[term].x+radius && y > me.magnets[term].y-radius && y < me.magnets[term].y+radius) {\n\t\t\t\t\t\tme.editMagnet(term);\n\t\t\t\t\t}\n\t\t\t\t}\n    \t    }, false);\n    \t})\n    \t\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tthis.documents = [];\n    \t\tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\"), ctx = canvas.getContext(\"2d\"), radius = canvas.width/2;\n    \t\tctx.font = this.textFont;\n    \t\tcorpus.getDocuments().each(function(document) {\n    \t\t\tvar label = document.getTinyTitle();\n    \t\t\tthis.documents.push({\n    \t\t\t\tdoc: document,\n    \t\t\t\tlabel: label,\n    \t\t\t\twidth: ctx.measureText(label).width,\n    \t\t\t\tx: radius,\n    \t\t\t\ty: radius,\n    \t\t\t\tmatches: [],\n    \t\t\t\tisHovering: false\n    \t\t\t});\n    \t\t}, this);\n    \t\tthis.updateDocs(canvas);\n    \t\tthis.draw();\n    \t\tthis.updateFromQueries();\n    \t}, this);\n    \t\n    \tthis.on(\"resize\", function() {\n    \t\tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\"),\n    \t\t\tdiam = Math.min(this.getTargetEl().getWidth(), this.getTargetEl().getHeight());\n    \t\tcanvas.width = diam;\n    \t\tcanvas.height = diam;\n\t    \tthis.updateMagnets();\n\t    \tthis.updateDocs();\n    \t\tthis.draw(canvas)\n    \t})\n    },\n    \n    editMagnet: function(term) {\n    \tvar me = this, currentTerms = Ext.Array.from(me.getApiParam('query'));\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: this.localize(\"EditMagnet\"),\n\t\t\tmodal: true,\n\t\t\titems: {\n\t\t\t\txtype: 'form',\n\t\t\t\twidth: 300,\n\t\t\t\titems: [{\n\t\t\t\t\txtype: 'querysearchfield',\n\t\t\t\t\tcorpus: this.getCorpus(),\n\t\t\t\t\tstore: this.getCorpus().getCorpusTerms({\n\t\t\t\t\t\tproxy: {\n\t\t\t\t\t\t\textraParams: {\n\t\t\t\t\t\t\t\tstopList: this.getApiParam('stopList')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tstopList: this.getApiParam('stopList'),\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tafterrender: function(field) {\n\t\t\t\t\t\t\tif (term) {\n\t\t\t\t\t\t\t\tvar termObj = new Ext.create(\"Voyant.data.model.CorpusTerm\", {\n\t\t\t\t\t\t\t\t\tterm: term\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tfield.getStore().loadData(termObj, true)\n\t\t\t\t\t\t\t\tfield.setValue(termObj);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\txtype: \"numberfield\",\n\t\t\t\t    fieldLabel: me.localize('rotateClockwise'),\n\t\t\t\t    minValue: 0,\n\t\t\t\t    maxValue: currentTerms.length-1,\n\t\t\t\t    value: 0,\n\t\t\t\t    stepValue: 1,\n\t\t\t\t    width: 200,\n\t\t\t\t    name: \"rotate\"\n\t\t\t\t}],\n\t\t\t\tbuttons: [{\n\t            \ttext: this.localize(\"remove\"),\n\t\t\t\t\tglyph: 'xf0e2@FontAwesome',\n\t            \tflex: 1,\n\t\t            ui: 'default-toolbar',\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar queries = Ext.Array.filter(Ext.Array.from(me.getApiParam('query')), function(query) {\n\t        \t\t\t\treturn query!=term\n\t        \t\t\t});\n\t        \t\t\tme.setApiParam('query', queries);\n\t        \t\t\tme.updateFromQueries(queries.length==0);\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: this\n\t\t\t\t},{xtype: 'tbfill'}, {\n\t            \ttext: this.localize(\"cancel\"),\n\t\t            ui: 'default-toolbar',\n\t                glyph: 'xf00d@FontAwesome',\n\t        \t\tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t}\n\t\t\t\t},{\n\t            \ttext: this.localize(\"update\"),\n\t\t\t\t\tglyph: 'xf00c@FontAwesome',\n\t            \tflex: 1,\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar val = btn.up('window').down('querysearchfield').getValue().join(\"|\")\n\t        \t\t\tif (val) {\n\n\t        \t\t\t\t// start by updating the term in place\n\t\t        \t\t\tvar position = -1;\n\t\t        \t\t\tfor (var i=0; i<currentTerms.length; i++) {\n\t\t        \t\t\t\tif (term==currentTerms[i]) {\n\t\t        \t\t\t\t\tposition=i;\n\t\t        \t\t\t\t\tcurrentTerms[i]=val;\n\t\t        \t\t\t\t\t\n\t\t\t\t        \t\t\t// see if we need to shift\n\t\t\t\t        \t\t\tvar rotate = btn.up('window').down('numberfield').getValue();\n\t\t\t\t        \t\t\tif (rotate) {\n\t\t\t\t        \t\t\t\tcurrentTerms.splice(i, 1);\n\t\t\t\t        \t\t\t\tvar newpos = i+rotate;\n\t\t\t\t        \t\t\t\tif (newpos>currentTerms.length) {newpos-=currentTerms.length+1;}\n\t\t\t\t        \t\t\t\tcurrentTerms.splice(newpos, 0, val);\n\t\t\t\t        \t\t\t}\n\t\t\t\t        \t\t\tbreak\n\t\t\t\t        \t\t\t\n\t\t        \t\t\t\t}\n\t\t        \t\t\t}\n\t\t        \t\t\tif (position==-1) { // not sure why it couldn't be found\n\t\t        \t\t\t\tcurrentTerms.push(val);\n\t\t        \t\t\t}\t\t        \t\t\t\n\t        \t\t\t}\n\t        \t\t\t\n\t        \t\t\tme.setApiParam('query', currentTerms);\n\t        \t\t\tme.updateFromQueries(currentTerms.length==0);\n\t        \t\t\tbtn.up('window').close();\n\t        \t\t},\n\t        \t\tscope: this\n\t            }]\n\t\t\t},\n\t\t\tbodyPadding: 5\n\t\t}).show()\n    },\n    \n    updateFromQueries: function(allowEmpty) {\n\t\tthis.magnets = undefined;\n\t\tthis.documents.forEach(function(doc) {doc.matches=[]})\n\t\tthis.updateDocs();\n\t\tthis.draw();\n    \tif (this.documents) {\n    \t\tvar params = this.getApiParams();\n    \t\tif (!params.query) {params.limit=10;}\n        \tvar queries = Ext.Array.from(this.getApiParam('query'));\n        \tif (!allowEmpty || queries.length>0) {\n        \t\tthis.getCorpus().getCorpusTerms().load({\n        \t\t\tparams: Ext.apply(params, {withDistributions: true}),\n        \t\t\tcallback: function(records) {\n        \t\t    \tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\"), ctx = canvas.getContext(\"2d\");\n        \t\t    \t\tdiam = canvas.width, rad = diam /2;\n        \t\t    \tctx.font = this.textFont;\n        \t\t    \tvar magnets = {};\n        \t\t    \tfor (var i=0, len=records.length; i<len; i++) {\n        \t\t    \t\tvar term = records[i].getTerm();\n        \t\t    \t\trecords[i].getDistributions().forEach(function(val, i) {\n        \t\t    \t\t\tif (val>0) {\n        \t\t    \t\t\t\tthis.documents[i].matches.push(term)\n        \t\t    \t\t\t}\n        \t\t    \t\t}, this);\n        \t\t    \t\tmagnets[term] = {\n        \t\t    \t\t\trecord: records[i],\n        \t\t    \t\t\tcolour: this.getApplication().getColor(i),\n        \t\t    \t\t\twidth: ctx.measureText(term).width,\n        \t\t    \t\t\tisHovering: false\n        \t\t    \t\t}\n        \t\t    \t}\n\n        \t\t    \tthis.magnets = {};\n        \t\t    \t\n        \t\t    \t// try ordering by queries\n        \t\t    \tqueries.forEach(function(query) {\n        \t\t    \t\tif (magnets[query]) {\n            \t\t    \t\tthis.magnets[query] = magnets[query]\n            \t\t    \t\tdelete magnets[query]\n        \t\t    \t\t}\n        \t\t    \t}, this);\n        \t\t    \t\n        \t\t    \t// now for any leftovers\n        \t\t    \tfor (term in magnets) {\n        \t\t    \t\tthis.magnets[term] = magnets[term]\n        \t\t    \t}\n        \t\t    \t\n        \t\t    \tthis.setApiParam('query', Object.keys(this.magnets))\n        \t\t    \tthis.updateMagnets();\n        \t\t    \tthis.updateDocs();\n        \t\t    \tthis.draw();\n        \t\t\t},\n        \t\t\tscope: this\n        \t\t})\n        \t}\n    \t}\n    },\n    \n    updateMagnets: function(canvas) {\n    \tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\"), diam = canvas.width, rad = diam /2;\n    \tvar len = Object.keys(this.magnets || {}).length;\n    \tvar i = 0;\n    \tfor (var term in this.magnets) {\n    \t\tExt.apply(this.magnets[term], {\n\t\t\t\tx:  rad+((rad-this.gutter-50) * Math.cos(2 * Math.PI * i / len)),\n\t\t\t\ty:  rad+((rad-this.gutter-50) * Math.sin(2 * Math.PI * i / len))\n    \t\t})\n    \t\ti++;\n    \t}\n    },\n    \n    updateDocs: function(canvas) {\n    \tcanvas = canvas ||  this.getTargetEl().dom.querySelector(\"canvas\"), diam = canvas.width, rad = diam /2;\n    \tvar notMatching = [];\n    \tif (this.documents) {\n        \tthis.documents.forEach(function(doc, i) {\n        \t\tif (Ext.Array.from(doc.matches).length==0) {notMatching.push(i);} // will be set around perimeter below\n        \t\telse if (Ext.Array.from(doc.matches).length==1) { // try to set it away from magnet\n        \t\t\tvar x = (Math.random()*15)+15, y = (Math.random()*15)+15;\n        \t\t\tdoc.targetX = this.magnets[doc.matches[0]].x + (Math.round(Math.random())==0 ? x : -x);\n        \t\t\tdoc.targetY = this.magnets[doc.matches[0]].y + (Math.round(Math.random())==0 ? y : -y);\n        \t\t} else {\n        \t\t\t// determine the weighted position\n        \t\t\tvar x = 0, y = 0,\n        \t\t\t\tvals = doc.matches.map(function(term) {return this.magnets[term].record.getDistributions()[i]}, this),\n        \t\t\t\tmin = Ext.Array.min(vals), max = Ext.Array.max(vals);\n        \t\t\tvar weights = 0;\n        \t\t\tdoc.matches.forEach(function(term, j) {\n        \t\t\t\tweight = max==min ? 1 : ((vals[j]-min)+min)/((max-min)+min);\n        \t\t\t\tweights += weight;\n        \t\t\t\tx += this.magnets[term].x*weight;\n        \t\t\t\ty += this.magnets[term].y*weight;\n        \t\t\t\t\n        \t\t\t}, this)\n        \t\t\tdoc.targetX = x/weights\n        \t\t\tdoc.targetY = y/weights\n        \t\t}\n        \t}, this);\n        \t\n        \t// set around perimeter\n        \tfor (var i=0, len=notMatching.length; i<len; i++) {\n        \t\tExt.apply(this.documents[i], {\n    \t\t\t\ttargetX:  rad+((rad-this.gutter) * Math.cos(2 * Math.PI * i / len)),\n    \t\t\t\ttargetY:  rad+((rad-this.gutter) * Math.sin(2 * Math.PI * i / len))\n        \t\t})\n        \t}\n    \t}\n    },\n    \n    draw: function(canvas, ctx) {\n    \tcanvas = canvas ||  this.getTargetEl().dom.querySelector(\"canvas\");\n    \tctx = ctx || canvas.getContext(\"2d\");\n    \tctx.font = this.textFont;\n    \tvar radius = canvas.width/2;\n    \tctx.clearRect(0,0,canvas.width,canvas.height);\n    \tvar labels = this.getApiParam('labels');\n    \t\n    \t// draw circle\n    \tctx.beginPath();\n    \tctx.strokeStyle = \"rgba(0,0,0,.1)\"\n        ctx.fillStyle = \"rgba(0,0,0,.02)\"\n    \tctx.arc(radius, radius, radius-this.gutter, 0, 2 * Math.PI, false);\n    \tctx.fill();\n    \tctx.lineWidth = 2;\n    \tctx.stroke();\n    \t\n    \t// determine if we're animating a move and need to come back\n    \tvar needRedraw = false;\n    \t\n    \t// draw documents\n    \t\n    \tif (this.documents && this.documents.length>0) {\n    \t\tvar needMove = false;\n    \t\t\n    \t\tvar noHovering = Ext.Array.each(this.documents, function(doc) {\n    \t\t\treturn !doc.isHovering\n    \t\t}, this);\n    \t\t\n    \t\tif (noHovering===true) {\n    \t\t\tnoHovering = Ext.Array.each(Object.keys(this.magnets || {}), function(term) {\n        \t\t\treturn !this.magnets[term].isHovering\n        \t\t}, this);\n    \t\t}\n\t\t\t// go through a first time to draw connecting lines underneath\n    \t\tvar hoveringTerms = {}; hoveringDocs = [];\n    \t\tthis.documents.forEach(function(document, j) {\n\t        \tdocument.matches.forEach(function(term, i) {\n\t        \t\tctx.beginPath();\n\t        \t\tctx.moveTo(document.x, document.y);\n\t        \t\tctx.lineTo(this.magnets[term].x, this.magnets[term].y);\n\t        \t\tif (noHovering===true) {\n\t\t        \t\tctx.strokeStyle = \"rgba(\"+this.magnets[term].colour.join(\",\")+\",.1)\";\n\t        \t\t} else {\n\t        \t\t\tif (document.isHovering || this.magnets[term].isHovering) {\n\t        \t\t\t\thoveringDocs[j]=true;\n\t        \t\t\t\thoveringTerms[term]=true;\n\t\t\t        \t\tctx.strokeStyle = \"rgba(\"+this.magnets[term].colour.join(\",\")+\",.5)\";\n\t        \t\t\t} else {\n\t\t        \t\t\tctx.strokeStyle = \"rgba(0,0,0,.02)\";\n\t        \t\t\t}\n\t        \t\t}\n\t        \t\tctx.stroke();\n\t        \t}, this);\n    \t\t}, this);\n    \t\t\t\n\t\t\t// now a second time for labels/markers\n    \t\tvar halfSize = parseInt(this.textFont)/2, height = parseInt(this.textFont)+4;\n    \t\tthis.documents.forEach(function(document, i) {\n    \t\t\t\n    \t\t\t// draw marker/label\n    \t\t\tif (labels || document.isHovering || hoveringDocs[i]==true) {\n\t    \t\t    var width = document.width+4;\n\t\t\t        ctx.fillStyle = document.isHovering || hoveringDocs[i]==true || noHovering===true ? \"white\" : \"rgba(255,255,255,.05)\"\n\t    \t\t    ctx.fillRect(document.x-(width/2), document.y-(height/2), width, height);\n\t\t\t        ctx.strokeStyle = document.isHovering || hoveringDocs[i]==true || noHovering===true ? \"rgba(0,0,0,.2)\" : \"rgba(0,0,0,.05)\"\n\t    \t\t    ctx.strokeRect(document.x-(width/2), document.y-(height/2), width, height);\n\t\t\t        ctx.textAlign = \"center\";\n\t\t\t        ctx.fillStyle = document.isHovering || hoveringDocs[i]==true || noHovering===true ? \"rgba(0,0,0,.8)\" : \"rgba(0,0,0,.05)\";\n\t    \t\t    ctx.fillText(document.label, document.x, document.y);\n    \t\t\t} else {\n    \t\t    \tctx.beginPath();\n    \t\t        ctx.fillStyle = \"rgba(0,0,0,.8)\"\n    \t\t    \tctx.arc(document.x, document.y, halfSize, 0, 2 * Math.PI);\n    \t        \tctx.fill();\n    \t\t    \tctx.stroke();\n    \t\t\t}\n\t        \t\n\t        \t// determine if we need to move\n\t\t    \tvar dx = Math.abs(document.x - document.targetX), dy = Math.abs(document.y- document.targetY)\n\t\t    \tif (dx!=0 || dy!=0) {\n\t\t    \t\tif (dx<1) {document.x = document.targetX}\n\t\t    \t\telse {\n\t\t    \t\t\tdx/=2;\n\t\t    \t\t\tdocument.x = document.x > document.targetX ? document.x-dx : document.x+dx;\n\t\t    \t\t}\n\t\t    \t\tif (dy<1) {document.y = document.targetY}\n\t\t    \t\telse {\n\t\t    \t\t\tdy/=2;\n\t\t    \t\t\tdocument.y = document.y > document.targetY ? document.y-dy : document.y+dy;\n\t\t    \t\t}\n\t\t    \t\tneedRedraw = true;\n\t\t    \t}\n    \t\t}, this);\n    \t\t\n    \t\t// now magnets\n    \t\tvar i = 0, height = parseInt(this.textFont)+4;\n\t        ctx.textAlign = \"center\";\n\t        ctx.textBaseline=\"middle\";\n\t        for (var term in this.magnets) {\n\t        \tif (labels || term in hoveringTerms || this.magnets[term].isHovering) {\n\t    \t\t    var width = this.magnets[term].width+4;\n\t\t\t        ctx.fillStyle = term in hoveringTerms || this.magnets[term].isHovering || noHovering===true ? \"white\" : \"rgba(255,255,255,.05)\";\n\t    \t\t    ctx.fillRect(this.magnets[term].x-(width/2), this.magnets[term].y-(height/2), width, height);\n\t\t\t        ctx.strokeStyle = term in hoveringTerms || this.magnets[term].isHovering || noHovering===true ? \"rgb(\"+this.magnets[term].colour.join(\",\")+\")\" : \"rgba(0,0,0,.05)\";\n\t    \t\t    ctx.strokeRect(this.magnets[term].x-(width/2), this.magnets[term].y-(height/2), width, height);\n\t\t\t        ctx.textAlign = \"center\";\n\t\t\t        ctx.fillStyle = term in hoveringTerms || this.magnets[term].isHovering || noHovering===true ?\"rgba(0,0,0,.8)\" : \"rgba(0,0,0,.05)\";\n\t    \t\t    ctx.fillText(term, this.magnets[term].x, this.magnets[term].y);\n\t        \t} else {\n\t\t\t    \tctx.beginPath();\n\t\t\t        ctx.fillStyle = \"rgb(\"+this.magnets[term].colour.join(\",\")+\")\"\n\t\t\t        ctx.strokeStyle = \"rgb(\"+this.magnets[term].colour.join(\",\")+\")\"\n\t\t\t    \tctx.arc(this.magnets[term].x, this.magnets[term].y, 12, 0, 2 * Math.PI);\n\t\t        \tctx.fill();\n\t\t\t    \tctx.stroke();\n\t        \t}\n    \t\t}\n    \t}\n    \t\n\t\tif (needRedraw) {\n\t\t\tvar me = this;\n\t\t\tsetTimeout(function() {\n\t\t\t\tme.draw();\n\t\t\t}, 100);\n\t\t} else if (this.documents) {\n\t\t\tvar minDist = Math.max(radius/this.documents.length, 50), spring = .1\n\t\t\tfor (var i=0, len=this.documents.length; i<len; i++) {\n\t\t\t\tfor (var j=0; j<len; j++) {\n\t\t\t\t\tif (i<j) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar dx = this.documents[i].x  - this.documents[j].x,\n\t\t\t\t\t\t\tdy = this.documents[i].y - this.documents[j].y,\n\t\t\t\t\t\t\tdist = Math.sqrt(dx * dx + dy * dy);\n\t\t\t\t\t\tif (dist < minDist) {\n\t\t\t\t\t\t\tvar ax = dx * spring, ay = dy * spring;\n\t\t\t\t\t\t\tthis.documents[i].targetX += ax;\n\t\t\t\t\t\t\tthis.documents[j].targetX -= ax;\n\t\t\t\t\t\t\tthis.documents[i].targetY += ay;\n\t\t\t\t\t\t\tthis.documents[j].targetY -= ay;\n\t\t\t\t\t\t\tneedRedraw = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (needRedraw) {\n\t\t\t\tvar me = this;\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tme.draw();\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t}\n    }\n    \n});","Ext.define('Voyant.panel.MicroOcp', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.microocp',\n    statics: {\n    \ti18n: {\n    \t\ttitle: \"MicroOCP\"\n    \t},\n    \tapi: {\n    \t\tconfig: undefined,\n    \t\tstopList: 'auto',\n    \t\turi: undefined\n    \t},\n\t\tglyph: 'xf1ea@FontAwesome'\n    },\n    config: {\n    \teditor: undefined\n    },\n    \n    constructor: function(config) {\n    \tconfig = config || {};\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n\t\t\n\t\t\n\t    var store = Ext.create('Ext.data.Store', {\n\t        fields: [{\n\t            name: 'cocoa',\n\t            type: 'string'\n\t        }]});\n\t    \n\t    var microocp = this;\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tlayout: 'border',\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                groupId: 'tbar',\n                items: [{\n                \ttext: \"Create New Voyant Corpus\",\n                \thandler: function() {\n                \t\tvar items = this.down('grid').getSelectionModel().getSelection().map(function(item) {return item.get(\"cocoa\")});\n              // items = [\"one\",\"one two\",\"two\"]\n                \t\tif (items.length==0) {\n                \t\t\treturn this.showError({title: \"Error\", msg: \"No items are selected in the grid (on the right).\"})\n                \t\t}\n                \t\t// convert to map for faster lookup\n                \t\titemsMap = {};\n                \t\titems.forEach(function(item) {itemsMap[item]=true})\n                \t\t\n                \t\t\n\t\t\t\t\t\tvar str = this.getEditor().getValue();\n               // str = \"<one>this<one two>is<two>a</one>sentence<two> <one>another\"\n\t\t\t\t\t\tvar tags = /<(\\/)?(\\w+)(\\s(\\w+))?>/g;\n\t\t\t\t\t\tvar matches;\n\t\t\t\t\t\tvar tagsMap = {}\n\t\t\t\t\t\twhile ((matches = tags.exec(str)) != null) {\n\t\t\t\t\t\t\tvar isClose = matches[1]==\"/\", tag = matches[2], attr = matches[4],\n\t\t\t\t\t\t\t\titem = (matches[4] ? matches[2]+\" \"+matches[4] : matches[2]);\n\t\t\t\t\t\t\tif (isClose || item in itemsMap) {\n\t\t\t\t\t\t\t\tif (tag in tagsMap) {\n\t\t\t\t\t\t\t\t\ttagsMap[tag][tagsMap[tag].length-1].end = matches.index\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!isClose) {\n\t\t\t\t\t\t\t\t\tif (!(tag in tagsMap)) {tagsMap[tag] = []}\n\t\t\t\t\t\t\t\t\ttagsMap[tag].push({\n\t\t\t\t\t\t\t\t\t\tstart: matches.index+matches[0].length,\n\t\t\t\t\t\t\t\t\t\ttag: tag,\n\t\t\t\t\t\t\t\t\t\tattr: attr\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (item in itemsMap) {\n\t\t\t\t\t\t\t\tif (tag in tagsMap) {\n\t\t\t\t\t\t\t\t\ttagsMap[tag][tagsMap[tag].length-1].end = matches.index\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n                \t\t// this should be more robust\n                \t\tisGroupItems = this.getDockedComponent(1).down('checkbox').checked;\n\n                \t\tvar documents = [];\n                \t\tif (isGroupItems) {\n                \t\t\tvar docs = {};\n    \t\t\t\t\t\tfor (var tag in tagsMap) {\n    \t\t\t\t\t\t\ttagsMap[tag].forEach(function(entry,i) {\n    \t\t\t\t\t\t\t\tvar text = str.substring(entry.start, entry.end).replace(/<\\/?\\w+(\\s+\\w)*>/g, \"\").trim();\n    \t\t\t\t\t\t\t\tif (text) {\n    \t\t\t\t\t\t\t\t\tvar item = entry.tag+(entry.attr ? \" \"+entry.attr : \"\");\n    \t\t\t\t\t\t\t\t\tif (item in docs) {\n    \t\t\t\t\t\t\t\t\t\tdocs[item]+= text;\n    \t\t\t\t\t\t\t\t\t} else {\n    \t\t\t\t\t\t\t\t\t\tdocs[item] = text;\n    \t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t})\n    \t\t\t\t\t\t}\n    \t\t\t\t\t\tfor (var item in docs) {\n    \t\t\t\t\t\t\tdocuments.push({\n    \t\t\t\t\t\t\t\ttitle: item,\n    \t\t\t\t\t\t\t\ttext: docs[item]\n    \t\t\t\t\t\t\t})\n    \t\t\t\t\t\t}\n                \t\t} else {\n    \t\t\t\t\t\tfor (var tag in tagsMap) {\n    \t\t\t\t\t\t\ttagsMap[tag].forEach(function(entry,i) {\n    \t\t\t\t\t\t\t\tvar text = str.substring(entry.start, entry.end).replace(/<\\/?\\w+(\\s+\\w)*>/g, \"\").trim();\n    \t\t\t\t\t\t\t\tif (text) {\n    \t\t\t\t\t\t\t\t\tdocuments.push({\n    \t\t\t\t\t\t\t\t\t\ttitle: entry.tag+(entry.attr ? \" \"+entry.attr : \"\")+\" \"+(i+1),\n    \t\t\t\t\t\t\t\t\t\ttext: text\n    \t\t\t\t\t\t\t\t\t})\n    \t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t})\n    \t\t\t\t\t\t}\n                \t\t}\n\n                \t\tif (documents.length==0) {\n                \t\t\treturn this.showError({title: \"Error\", msg: \"No documents found.\"})\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.mask();\n\t\t\t\t\t\tvar progress = Ext.Msg.progress(\"Creating\", \"Creating new corpus.\");\n\t\t\t\t\t\t// create new corpus\n\t\t\t\t\t\tvar me = this;\n\t\t\t\t\t\tnew Corpus({\n\t\t\t\t\t\t\tinputFormat: 'json',\n\t\t\t\t\t\t\tinput: Ext.JSON.encode({documents: documents}),\n\t\t\t\t\t\t\tjsonDocumentsPointer: \"/documents\",\n\t\t\t\t\t\t\tjsonTitlePointer: \"/title\",\n\t\t\t\t\t\t\tjsonContentPointer: \"/text\"\n\t\t\t\t\t\t}).then(function (corpus) {\n\t\t\t\t\t\t\tprogress.close();\n\t\t\t\t\t\t\tme.unmask();\n\t\t\t\t\t\t\tvar app = me.getApplication();\n\t\t\t\t\t\t\tme.openUrl(app.getBaseUrl()+\"?corpus=\"+corpus.getAliasOrId())\n\t\t\t\t\t\t});\n\n                \t\t\n                \t},\n                \tscope: this\n                },{\n                \txtype: 'checkbox',\n                \tboxLabel: \"Combine documents with the same tag attribute.\",\n                \tchecked: true\n                }]\n            }],\n    \t\titems: [{\n\t\t        \txtype: 'panel',\n    \t\t    \tautoScroll: true,\n\t\t        \tflex: 1,\n\t\t        \theight: '100%',\n\t\t        \talign: 'stretch',\n\t\t        \theader: false,\n\t\t        \tregion: 'center',\n\t\t        \tlisteners: {\n\t\t        \t\tboxready: function() {\n\t\t        \t\t\tvar me = this;\n\t\t        \t\t\tvar editor = ace.edit(Ext.getDom(this.getEl()));\n\t\t        \t\t\tmicroocp.setEditor(editor); // set to the containing panel\n//\t\t        \t\t\teditor.setOptions({enableBasicAutocompletion: false, enableLiveAutocompletion: false});\n//\t\t        \t\t\teditor.setTheme(\"ace/theme/monokai\");\n\t\t        \t\t\teditor.getSession().setMode(\"ace/mode/xml\")\n//\t\t        \t\t\teditor.$blockScrolling = Infinity;\n//\t\t        \t\t\teditor.getSession().setUseWorker(true);\n//\t\t        \t\t\teditor.setTheme(this.getTheme());\n//\t\t        \t\t\teditor.getSession().setMode(this.getMode());\n//\t\t        \t\t\teditor.setOptions({minLines: 6, maxLines: this.getMode().indexOf(\"javascript\")>-1 ? Infinity : 10, autoScrollEditorIntoView: true, scrollPastEnd: true});\n//\t\t        \t\t\teditor.setHighlightActiveLine(false);\n\t\t        \t\t\teditor.renderer.setShowPrintMargin(false);\n\t\t        \t\t\teditor.renderer.setShowGutter(false);\n//\t\t        \t\t\teditor.setValue(this.getContent() ? this.getContent() : this.localize('emptyText'));\n//\t\t        \t\t\teditor.clearSelection();\n//\t\t        \t\t    editor.on(\"focus\", function() {\n//\t\t        \t\t    \tme.getEditor().renderer.setShowGutter(true);\n//\t\t        \t\t    }, this);\n\t\t        \t\t\teditor.$blockScrolling = Infinity\n\t\t        \t\t\teditor.setOptions({autoScrollEditorIntoView: true});\n\t\t        \t\t\teditor.setBehavioursEnabled(false); // disable auto-complete\n\t\t        \t\t\teditor.on(\"change\", function(delta) {\n\t\t        \t\t\t\treparse = false;\n\t\t        \t\t\t\tif (delta.action==\"insert\") {\n\t\t        \t\t\t\t\tif (delta.lines[0].indexOf(\">\")==0) { // close tag\n\t\t        \t\t\t\t\t\treparse = true\n\t\t        \t\t\t\t\t}\n\t\t        \t\t\t\t} else if (delta.action==\"remove\") {\n\t\t        \t\t\t\t\tfor (var i=0; i<delta.lines.length; i++) {\n\t\t        \t\t\t\t\t\tif (delta.lines[i].indexOf(\">\")>-1) {\n\t\t        \t\t\t\t\t\t\treparse = true;\n\t\t        \t\t\t\t\t\t\tbreak;\n\t\t        \t\t\t\t\t\t}\n\t\t        \t\t\t\t\t}\n\t\t        \t\t\t\t}\n\t\t        \t\t\t\tif (reparse) {\n\t\t        \t\t\t\t\tExt.defer(function() {\n\t\t        \t\t\t\t\t\tvar str = editor.getValue();\n\t\t        \t\t\t\t\t\tvar tags = /<(\\w+)(\\s(\\w+))?>/g;\n\t\t        \t\t\t\t\t\tvar matches;\n\t\t        \t\t\t\t\t\tvar expressions = {}\n\t\t        \t\t\t\t\t\twhile ((matches = tags.exec(str)) != null) {\n\t\t        \t\t\t\t\t\t\tif (matches[3]) {expressions[matches[1]+\" \"+matches[3]]=true}\n\t\t        \t\t\t\t\t\t\telse {expressions[matches[1]]=true}\n\t\t        \t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\t\n\t\t        \t\t\t\t\t\tvar store = this.up(\"panel\").down(\"grid\").getStore();\n\t\t        \t\t\t\t\t\tvar inStoreItems = {};\n\t\t        \t\t\t\t\t\tstore.getRange().forEach(function(item) {inStoreItems[item.get(\"cocoa\")]=true;});\n\t\t        \t\t\t\t\t\t\n\t\t        \t\t\t\t\t\tfor (item in expressions) {\n\t\t        \t\t\t\t\t\t\tif (!(item in inStoreItems)) {\n\t\t        \t\t\t\t\t\t\t\tstore.add({cocoa: item});\n\t\t        \t\t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\tfor (inStoreItem in inStoreItems) {\n\t\t        \t\t\t\t\t\t\tif (!(inStoreItem in expressions)) {\n\t\t        \t\t\t\t\t\t\t\tvar rec = store.findRecord(\"cocoa\", inStoreItem)\n\t\t        \t\t\t\t\t\t\t\tstore.remove(rec);\n\t\t        \t\t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\t}\n\t\t        \t\t\t\t\t\t\n\t\t        \t\t\t\t\t\t\n\t\t        \t\t\t\t\t}, 100, me)\n\t\t        \t\t\t\t}\n\t\t        \t\t\t})\n\t\t            \t\tif (microocp.getApiParam(\"uri\")) {\n\t\t            \t\t\tNotebook.loadDataFromUrl(microocp.getApiParam(\"uri\")).then(function(data) {\n\t\t            \t\t\t\tmicroocp.getEditor().setValue(data);\n\t\t            \t\t\t})\n\t\t            \t\t}\n\n\t\t        \t\t}\n\n\t\t        \t}\n\t\t        }, {\n\t\t        \txtype: 'grid',\n\t\t        \tregion: 'east',\n\t\t        \theight: '100%',\n\t\t        \talign: 'stretch',\n//    \t\t    \tautoScroll: true,\n    \t\t    \tscrollable: true,\n    \t\t    \theader: false,\n\n\t\t        \twidth: 200,\n\t\t    \t\tselModel: Ext.create('Ext.selection.CheckboxModel', {\n\t\t    \t\t\tmode: 'SIMPLE'\n\t\t            }),\n\t\t            store: store,\n\t\t            columns: [ {\n\t\t                text: 'COCOA',\n\t\t                flex: 1,\n\t\t                dataIndex: 'cocoa'\n\t\t            }]\n\t\t        }]\n    \t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.getApiParam('uri')) {return;}\n    \t\tvar me = this;\n    \t\tcorpus.getPlainText().then(function(text) {\n    \t\t\ttext = text.replace(/(\\r\\n|\\r|\\n)(\\r\\n|\\r|\\n)(\\r\\n|\\r|\\n)+/g,\"\\n\\n\")\n    \t\t\tvar editor = me.getEditor();\n    \t\t\teditor.setValue(text).trim();\n    \t\t\teditor.scrollToLine(1, true, true, function () {});\n    \t\t})\n    \t}, this);\n    \t\n    \tthis.on('afterrender', function(panel) {\n    \t\tExt.Msg.alert(\"MicroOCP\", \"MicroOCP is an experimental prototype that is intended to give a taste of working with the COCOA markup format (COunt and COncordance on the Atlas). Cocoa tags are like switches, you can place one and that tag remains in effect until the next instance of the tag, which can have an optional attribute (single word). As an enhancement to COCOA, you can also close a tag.<pre>&lt;speaker jack&gt;I'm falling &lt;speaker jill&gt;down the hill.&lt;/speaker&gt;</pre>\")\n    \t});\n    \t\n    \t\n    }\n        \n});\n","Ext.define('Voyant.panel.Reader', {\n\textend: 'Ext.panel.Panel',\n\trequires: ['Voyant.data.store.Tokens'],\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.reader',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstart: 0,\n    \t\tlimit: 1000,\n    \t\tskipToDocId: undefined,\n    \t\tquery: undefined\n    \t},\n    \tglyph: 'xf0f6@FontAwesome'\n\t},\n    config: {\n    \tinnerContainer: undefined,\n    \ttokensStore: undefined,\n    \tdocumentsStore: undefined,\n    \tdocumentTermsStore: undefined,\n    \texportVisualization: false,\n    \tlastScrollTop: 0,\n\t\tscrollIntoView: false,\n\t\tinsertWhere: 'beforeEnd',\n    \tlastLocationUpdate: new Date(),\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n    \n    SCROLL_UP: -1,\n    SCROLL_EQ: 0,\n    SCROLL_DOWN: 1,\n    \n\tLOCATION_UPDATE_FREQ: 100,\n\t\n\tINITIAL_LIMIT: 1000, // need to keep track since limit can be changed when scrolling,\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function(config) {\n    \tvar tokensStore = Ext.create(\"Voyant.data.store.Tokens\", {\n    \t\tparentTool: this,\n    \t\tproxy: {\n    \t\t\textraParams: {\n    \t\t\t\tforTool: 'reader'\n    \t\t\t}\n    \t\t}\n    \t})\n    \tvar me = this;\n    \ttokensStore.on(\"beforeload\", function(store) {\n    \t\treturn me.hasCorpusAccess(store.getCorpus());\n    \t})\n    \ttokensStore.on(\"load\", function(s, records, success) {\n    \t\tif (success) {\n\t    \t\tvar contents = \"\";\n\t    \t\tvar documentFrequency = this.localize(\"documentFrequency\");\n\t    \t\tvar isPlainText = false;\n\t    \t\tvar docIndex = -1;\n\t    \t\tvar isLastNewLine = false;\n\t    \t\trecords.forEach(function(record) {\n\t    \t\t\tif (record.getPosition()==0) {\n\t    \t\t\t\tcontents+=\"<h3>\"+this.getDocumentsStore().getById(record.getDocId()).getFullLabel()+\"</h3>\";\n\t    \t\t\t}\n\t    \t\t\tif (record.getDocIndex()!=docIndex) {\n\t    \t\t\t\tisPlainText = this.getDocumentsStore().getById(record.getDocId()).isPlainText();\n\t    \t\t\t\tdocIndex = record.getDocIndex();\n\t    \t\t\t}\n\t    \t\t\tif (record.isWord()) {\n\t    \t\t\t\tisLastNewLine = false;\n\t    \t\t\t\tcontents += \"<span class='word' id='\"+ record.getId() + \"' data-qtip='\"+documentFrequency+\" \"+record.getDocumentRawFreq()+\"'>\"+ record.getTerm() + \"</span>\";\n\t    \t\t\t}\n\t    \t\t\telse {\n\t    \t\t\t\tvar newContents = record.getTermWithLineSpacing(isPlainText);\n\t    \t\t\t\tvar isNewLine = newContents.indexOf(\"<br />\")==0;\n\t    \t\t\t\tif (isLastNewLine && (isNewLine || newContents.trim().length==0)) {}\n\t    \t\t\t\telse {\n\t    \t\t\t\t\tcontents += newContents;\n\t    \t\t\t\t\tisLastNewLine = isNewLine;\n\t    \t\t\t\t}\n\t    \t\t\t}\n\t    \t\t}, this);\n\t    \t\tthis.updateText(contents);\n\t    \t\t\n\t    \t\tvar keyword = this.down('querysearchfield').getValue();\n\t    \t\tif (keyword != '') {\n//\t    \t\t\tthis.highlightKeywords(keyword);\n\t    \t\t}\n    \t\t}\n    \t}, this);\n    \tthis.setTokensStore(tokensStore);\n    \t\n    \tthis.on(\"query\", function(src, queries) {\n    \t\tthis.loadQueryTerms(queries);\n    \t}, this);\n    \t\n    \tthis.setDocumentTermsStore(Ext.create(\"Ext.data.Store\", {\n\t\t\tmodel: \"Voyant.data.model.DocumentTerm\",\n    \t\tautoLoad: false,\n    \t\tremoteSort: false,\n    \t\tproxy: {\n\t\t\t\ttype: 'ajax',\n\t\t\t\turl: Voyant.application.getTromboneUrl(),\n\t\t\t\textraParams: {\n\t\t\t\t\ttool: 'corpus.DocumentTerms',\n\t\t\t\t\twithDistributions: true,\n\t\t\t\t\t// TODO handle positions\n\t\t\t\t\twithPositions: true,\n\t\t\t\t\tbins: 25,\n\t\t\t\t\tforTool: 'reader'\n\t\t\t\t},\n\t\t\t\treader: {\n\t\t\t\t\ttype: 'json',\n\t\t            rootProperty: 'documentTerms.terms',\n\t\t            totalProperty: 'documentTerms.total'\n\t\t\t\t},\n\t\t\t\tsimpleSortMode: true\n   \t\t    },\n   \t\t    listeners: {\n   \t\t    load: function(store, records, successful, opts) {\n   \t\t    \t\tstore.sort('docIndex', 'ASC');\n   \t\t    \t\tvar term; // store last accessed term\n   \t\t    \t\tstore.each(function(r) {\n   \t\t    \t\t\tterm = r.get('term');\n   \t\t    \t\t}, this);\n   \t\t    \t\t \n   \t\t    \t\tthis.highlightKeywords(term);\n//   \t\t    \t\t this.down('querysearchfield').setValue(term);\n   \t\t    \t},\n   \t\t    \tscope: this\n   \t\t    }\n    \t}));\n    \t\n    \tthis.on(\"afterrender\", function() {\n    \t\tvar centerPanel = this.down('panel[region=\"center\"]');\n    \t\tthis.setInnerContainer(centerPanel.getLayout().getRenderTarget());\n    \t\t\n    \t\t// scroll listener\n    \t\tcenterPanel.body.on(\"scroll\", function(event, target) {\n    \t\t\tvar scrollDir = this.getLastScrollTop() < target.scrollTop ? this.SCROLL_DOWN\n    \t\t\t\t\t\t\t\t: this.getLastScrollTop() > target.scrollTop ? this.SCROLL_UP\n\t\t\t\t\t\t\t\t\t: this.SCROLL_EQ;\n    \t\t\t\n    \t\t\t// scroll up\n    \t\t\tif (scrollDir == this.SCROLL_UP && target.scrollTop < 1) {\n    \t\t\t\tthis.fetchPrevious(true);\n    \t\t\t// scroll down\n    \t\t\t} else if (scrollDir == this.SCROLL_DOWN && target.scrollHeight - target.scrollTop < target.offsetHeight*1.5) {//target.scrollTop+target.offsetHeight>target.scrollHeight/2) { // more than half-way down\n    \t\t\t\tthis.fetchNext(false);\n    \t\t\t} else {\n    \t\t\t\tvar amount;\n    \t\t\t\tif (target.scrollTop == 0) {\n    \t\t\t\t\tamount = 0;\n    \t\t\t\t} else if (target.scrollHeight - target.scrollTop == target.clientHeight) {\n    \t\t\t\t\tamount = 1;\n    \t\t\t\t} else {\n    \t\t\t\t\tamount = (target.scrollTop + target.clientHeight * 0.5) / target.scrollHeight;\n    \t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar now = new Date();\n        \t\t\tif (now - this.getLastLocationUpdate() > this.LOCATION_UPDATE_FREQ || amount == 0 || amount == 1) {\n        \t\t\t\tthis.updateLocationMarker(amount, scrollDir);\n        \t\t\t}\n    \t\t\t}\n    \t\t\tthis.setLastScrollTop(target.scrollTop);\n    \t\t}, this);\n    \t\t\n    \t\t// click listener\n    \t\tcenterPanel.body.on(\"click\", function(event, target) {\n    \t\t\ttarget = Ext.get(target);\n    \t\t\tif (target.hasCls('word')) {\n    \t\t\t\tvar info = Voyant.data.model.Token.getInfoFromElement(target);\n    \t\t\t\tvar term = target.getHtml();\n    \t\t\t\tvar data = [{\n    \t\t\t\t\tterm: term,\n    \t\t\t\t\tdocIndex: info.docIndex\n    \t\t\t\t}];\n    \t\t\t\tthis.loadQueryTerms([term]);\n    \t\t\t\tthis.getApplication().dispatchEvent('termsClicked', this, data);\n    \t\t\t}\n    \t\t}, this);\n    \t\t\n    \t\tif (this.getCorpus()) {\n    \t\t\tthis.load();\n\t    \t\tvar query = this.getApiParam('query');\n\t    \t\tif (query) {\n\t    \t\t\tthis.loadQueryTerms(Ext.isString(query) ? [query] : query);\n\t    \t\t}\n    \t\t}\n\t\t\tthis.on(\"loadedCorpus\", function() {\n    \t\t\tthis.load(true); // make sure to clear in case we're replacing the corpus\n\t    \t\tvar query = this.getApiParam('query');\n\t    \t\tif (query) {\n\t    \t\t\tthis.loadQueryTerms(Ext.isString(query) ? [query] : query);\n\t    \t\t}\n\t\t\t}, this);\n    \t}, this);\n    \t\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tcls: 'voyant-reader',\n    \t    layout: 'fit',\n    \t    items: {\n    \t    \tlayout: 'border',\n    \t    \titems: [{\n    \t\t    \tbodyPadding: 10,\n    \t\t    \tregion: 'center',\n    \t\t    \tborder: false,\n    \t\t    \tautoScroll: true,\n    \t\t    \thtml: '<div class=\"readerContainer\"></div>'\n    \t\t    },{\n\t\t\t\t\txtype: 'readergraph',\n    \t\t    \tregion: 'south',\n    \t\t    \theight: 40,\n    \t\t    \tsplit: {\n    \t\t    \t\tsize: 2\n    \t\t    \t},\n    \t\t    \tsplitterResize: true,\n\t\t\t\t\tborder: false,\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tdocumentRelativePositionSelected: function(src, data) {\n\t\t\t\t\t\t\tvar doc = this.getDocumentsStore().getAt(data.docIndex);\n\t\t\t\t\t\t\tvar totalTokens = doc.get('tokensCount-lexical');\n\t\t\t\t\t\t\tvar position = Math.floor(totalTokens * data.fraction);\n\t\t\t\t\t\t\tvar bufferPosition = position - (this.getApiParam('limit')/2);\n\t\t\t\t\t\t\tthis.setApiParams({'skipToDocId': doc.getId(), start: bufferPosition < 0 ? 0 : bufferPosition});\n\t\t\t\t\t\t\tthis.load(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n    \t\t    }]\n    \t    },\n    \t\t// TODO clearing search loads default document terms into chart but probably shouldn't\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \tglyph: 'xf060@FontAwesome',\n            \t\thandler: function() {\n            \t\t\tthis.fetchPrevious(true);\n            \t\t},\n            \t\tscope: this\n            \t},{\n            \t\tglyph: 'xf061@FontAwesome',\n            \t\thandler: function() {\n            \t\t\tthis.fetchNext(true);\n            \t\t},\n            \t\tscope: this\n            \t},{xtype: 'tbseparator'},{\n                    xtype: 'querysearchfield'\n                }]\n    \t\t}],\n    \t\tlisteners: {\n    \t\t\tloadedCorpus: function(src, corpus) {\n    \t    \t\tthis.getTokensStore().setCorpus(corpus);\n    \t    \t\tthis.getDocumentTermsStore().getProxy().setExtraParam('corpus', corpus.getId());\n    \t    \t\t\n    \t    \t\tvar docs = corpus.getDocuments();\n    \t    \t\tthis.setDocumentsStore(docs);\n    \t    \t\t\n    \t    \t\tif (this.rendered) {\n    \t    \t\t\tthis.load();\n        \t    \t\tif (this.hasCorpusAccess(corpus)==false) {\n        \t    \t\t\tthis.mask(this.localize(\"limitedAccess\"), 'mask-no-spinner')\n        \t    \t\t}\n        \t    \t\tvar query = this.getApiParam('query');\n        \t    \t\tif (query) {\n        \t    \t\t\tthis.loadQueryTerms(Ext.isString(query) ? [query] : query);\n        \t    \t\t}\n    \t    \t\t}\n    \t    \t\t\n    \t\t\t},\n            \ttermsClicked: function(src, terms) {\n            \t\tvar queryTerms = [];\n            \t\tterms.forEach(function(term) {\n            \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n            \t\t\telse if (term.term) {queryTerms.push(term.term);}\n            \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n            \t\t});\n            \t\tif (queryTerms.length > 0) {\n            \t\t\tthis.loadQueryTerms(queryTerms);\n            \t\t}\n        \t\t},\n        \t\tcorpusTermsClicked: function(src, terms) {\n        \t\t\tvar queryTerms = [];\n            \t\tterms.forEach(function(term) {\n            \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\n            \t\t});\n            \t\tthis.loadQueryTerms(queryTerms);\n        \t\t},\n        \t\tdocumentTermsClicked: function(src, terms) {\n        \t\t\tvar queryTerms = [];\n            \t\tterms.forEach(function(term) {\n            \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\n            \t\t});\n            \t\tthis.loadQueryTerms(queryTerms);\n        \t\t},\n        \t\tdocumentSelected: function(src, document) {\n        \t\t\tvar corpus = this.getTokensStore().getCorpus();\n        \t\t\tvar doc = corpus.getDocument(document);\n        \t\t\tthis.setApiParams({'skipToDocId': doc.getId(), start: 0});\n\t\t\t\t\tthis.load(true);\n        \t\t},\n        \t\tdocumentsClicked: function(src, documents, corpus) {\n        \t\t\tif (documents.length > 0) {\n            \t\t\tvar doc = documents[0];\n            \t\t\tthis.setApiParams({'skipToDocId': doc.getId(), start: 0});\n\t\t\t\t\t\tthis.load(true);\n            \t\t}\n        \t\t},\n        \t\ttermLocationClicked: function(src, terms) {\n    \t\t\t\tif (terms[0] !== undefined) {\n    \t\t\t\t\tvar term = terms[0];\n    \t\t\t\t\tvar docIndex = term.get('docIndex');\n    \t\t\t\t\tvar position = term.get('position');\n    \t\t\t\t\tvar bufferPosition = position - (this.getApiParam('limit')/2);\n    \t\t\t\t\tvar doc = this.getCorpus().getDocument(docIndex);\n    \t\t\t\t\tthis.setApiParams({'skipToDocId': doc.getId(), start: bufferPosition < 0 ? 0 : bufferPosition});\n    \t\t\t\t\tthis.load(true, {\n    \t\t\t\t\t\tcallback: function() {\n    \t\t\t\t\t\t\tvar el = this.body.dom.querySelector(\"#_\" + docIndex + \"_\" + position);\n    \t\t\t\t\t\t\tif (el) {\n    \t\t\t\t\t\t\t\tel.scrollIntoView();\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\tthis.highlightKeywords(term.get('term'), false);\n    \t\t\t\t\t\t},\n    \t\t\t\t\t\tscope: this\n    \t\t\t\t\t});\n    \t\t\t\t};\n        \t\t},\n        \t\tdocumentIndexTermsClicked: function(src, terms) {\n        \t\t\tif (terms[0] !== undefined) {\n    \t\t\t\t\tvar term = terms[0];\n    \t\t\t\t\tvar termRec = Ext.create('Voyant.data.model.Token', term);\n    \t\t\t\t\tthis.fireEvent('termLocationClicked', this, [termRec]);\n        \t\t\t}\n        \t\t},\n        \t\tscope: this\n    \t\t}\n    \t});\n    \t\n        this.callParent(arguments);\n    },\n    \n    loadQueryTerms: function(queryTerms) {\n    \tif (queryTerms && queryTerms.length > 0) {\n\t\t\tthis.getDocumentTermsStore().load({\n\t\t\t\tparams: {\n\t\t\t\t\tquery: queryTerms/*,\n    \t\t\t\tdocIndex: undefined,\n    \t\t\t\tdocId: undefined,\n    \t\t\t\tpage: undefined,\n    \t\t\t\tstart: undefined,\n    \t\t\t\tlimit: undefined*/\n    \t\t\t}\n\t\t\t});\n\t\t\tthis.down('readergraph').loadQueryTerms(queryTerms);\n\t\t}\n    },\n    \n    highlightKeywords: function(query, doScroll) {\n\t\tif (!Ext.isArray(query)) query = [query];\n\t\t\n\t\tthis.getInnerContainer().first().select('span[class*=keyword]').removeCls('keyword');\n\t\t\n\t\tvar spans = [];\n\t\tvar caseInsensitiveQuery = new RegExp('^'+query[0]+'$', 'i');\n\t\tvar nodes = this.getInnerContainer().first().select('span.word');\n\t\tnodes.each(function(el, compEl, index) {\n\t\t\tif (el.dom.firstChild && el.dom.firstChild.nodeValue.match(caseInsensitiveQuery)) {\n\t\t\t\tel.addCls('keyword');\n\t\t\t\tspans.push(el.dom);\n\t\t\t}\n\t\t});\n\t\t\n//\t\tif (doScroll && spans[0] !== undefined) {\n//\t\t\tExt.get(nodes[0]).scrollIntoView(reader).frame(\"ff0000\", 1, { duration: 2 });\n//\t\t}\n\t},\n    \n\tfetchPrevious: function(scroll) {\n\t\tvar readerContainer = this.getInnerContainer().first();\n\t\tvar first = readerContainer.first('.word');\n\t\tif (first != null && first.hasCls(\"loading\")===false) {\n\t\t\twhile(first) {\n\t\t\t\tif (first.hasCls(\"word\")) {\n\t\t\t\t\tvar info = Voyant.data.model.Token.getInfoFromElement(first);\n\t\t\t\t\tvar docIndex = info.docIndex;\n\t\t\t\t\tvar start = info.position;\n\t\t\t\t\tvar doc = this.getDocumentsStore().getAt(docIndex);    \t\t\t\t\t\t\n\t\t\t\t\tvar limit = this.getApiParam('limit');\n\t\t\t\t\tvar getPrevDoc = false;\n\t\t\t\t\tif (docIndex === 0 && start === 0) {\n\t\t\t\t\t\tvar scrollContainer = this.down('panel[region=\"center\"]').body;\n\t\t\t\t\t\tvar scrollNeeded = first.getScrollIntoViewXY(scrollContainer, scrollContainer.dom.scrollTop, scrollContainer.dom.scrollLeft);\n\t\t\t\t\t\tif (scrollNeeded.y != 0) {\n\t\t\t\t\t\t\tfirst.dom.scrollIntoView();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfirst.frame(\"red\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (docIndex > 0 && start === 0) {\n\t\t\t\t\t\tgetPrevDoc = true;\n\t\t\t\t\t\tdocIndex--;\n\t\t\t\t\t\tdoc = this.getDocumentsStore().getAt(docIndex);\n\t\t\t\t\t\tvar totalTokens = doc.get('tokensCount-lexical');\n\t\t\t\t\t\tstart = totalTokens-limit;\n\t\t\t\t\t\tif (start < 0) {\n\t\t\t\t\t\t\tstart = 0;\n\t\t\t\t\t\t\tthis.setApiParam('limit', totalTokens);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlimit--; // subtract one to limit for the word we're removing. need to do this to account for non-lexical tokens before/after first word.\n\t\t\t\t\t\tstart -= limit;\n\t\t\t\t\t}\n\t\t\t\t\tif (start < 0) start = 0;\n\t\t\t\t\t\n\t\t\t\t\tvar mask = first.insertSibling(\"<div class='loading'>\"+this.localize('loading')+\"</div>\", 'before', false).mask();\n\t\t\t\t\tif (!getPrevDoc) {\n\t\t\t\t\t\tfirst.destroy();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar id = doc.getId();\n\t\t\t\t\tthis.setApiParams({'skipToDocId': id, start: start});\n\t\t\t\t\tthis.setInsertWhere('afterBegin')\n\t\t\t\t\tthis.setScrollIntoView(scroll);\n\t\t\t\t\tthis.load();\n\t\t\t\t\tthis.setApiParam('limit', this.INITIAL_LIMIT);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tfirst.destroy(); // remove non word\n\t\t\t\tfirst = readerContainer.first();\n\t\t\t}\n\t\t}\n\t},\n\t\n\tfetchNext: function(scroll) {\n\t\tvar readerContainer = this.getInnerContainer().first();\n\t\tvar last = readerContainer.last();\n\t\tif (last.hasCls(\"loading\")===false) {\n\t\t\twhile(last) {\n\t\t\t\tif (last.hasCls(\"word\")) {\n\t\t\t\t\tvar info = Voyant.data.model.Token.getInfoFromElement(last);\n\t\t\t\t\tvar docIndex = info.docIndex;\n\t\t\t\t\tvar start = info.position;\n\t\t\t\t\tvar doc = this.getDocumentsStore().getAt(info.docIndex);\n\t\t\t\t\tvar id = doc.getId();\n\t\t\t\t\t\n\t\t\t\t\tvar totalTokens = doc.get('tokensCount-lexical');\n\t\t\t\t\tif (start + this.getApiParam('limit') >= totalTokens && docIndex == this.getCorpus().getDocumentsCount()-1) {\n\t\t\t\t\t\tvar limit = totalTokens - start;\n\t\t\t\t\t\tif (limit <= 1) {\n\t\t\t\t\t\t\tlast.dom.scrollIntoView();\n\t\t\t\t\t\t\tlast.frame(\"red\")\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.setApiParam('limit', limit);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// remove any text after the last word\n\t\t\t\t\tvar nextSib = last.dom.nextSibling;\n\t\t\t\t\twhile(nextSib) {\n\t\t\t\t\t\tvar oldNext = nextSib;\n\t\t\t\t\t\tnextSib = nextSib.nextSibling;\n\t\t\t\t\t\toldNext.parentNode.removeChild(oldNext);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar mask = last.insertSibling(\"<div class='loading'>\"+this.localize('loading')+\"</div>\", 'after', false).mask();\n\t\t\t\t\tlast.destroy();\n\t\t\t\t\tthis.setApiParams({'skipToDocId': id, start: info.position});\n\t\t\t\t\tthis.setInsertWhere('beforeEnd');\n\t\t\t\t\tthis.setScrollIntoView(scroll);\n\t\t\t\t\tthis.load(); // callback not working on buffered store\n\t\t\t\t\tthis.setApiParam('limit', this.INITIAL_LIMIT);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlast.destroy(); // remove non word\n\t\t\t\tlast = readerContainer.last();\n\t\t\t}\n\t\t}\n\t},\n\t\n    load: function(doClear, config) {\n    \tif (doClear) {\n    \t\tthis.getInnerContainer().first().destroy(); // clear everything\n    \t\tthis.getInnerContainer().setHtml('<div class=\"readerContainer\"><div class=\"loading\">'+this.localize('loading')+'</div></div>');\n\t\t\tthis.getInnerContainer().first().first().mask();\n\t\t}\n    \tthis.getTokensStore().load(Ext.apply(config || {}, {\n    \t\tparams: Ext.apply(this.getApiParams(), {\n    \t\t\tstripTags: 'blocksOnly',\n    \t\t\tstopList: '' // token requests shouldn't have stopList\n    \t\t})\n    \t}));\n    },\n    \n    updateText: function(contents) {\n    \tvar loadingMask = this.getInnerContainer().down('.loading');\n    \tif (loadingMask) loadingMask.destroy();\n    \t// FIXME: something is weird here in tool/Reader mode, this.getInnerContainer() seems empty but this.getInnerContainer().first() gets the canvas?!?\n    \tvar inserted = this.getInnerContainer().first().insertHtml(this.getInsertWhere()/* where is this defined? */, contents, true); // return Element, not dom\n    \tif (inserted && this.getScrollIntoView()) {\n    \t\tinserted.dom.scrollIntoView(); // use dom\n    \t\t// we can't rely on the returned element because it can be a transient fly element, but the id is right in a deferred call\n    \t\tExt.Function.defer(function() {\n    \t\t\tvar el = Ext.get(inserted.id); // re-get el\n    \t\t\tif (el) {el.frame(\"red\")}\n    \t\t}, 100);\n    \t}\n    \tvar target = this.down('panel[region=\"center\"]').body.dom;\n    \tvar amount;\n\t\tif (target.scrollTop == 0) {\n\t\t\tamount = 0;\n\t\t} else if (target.scrollHeight - target.scrollTop == target.clientHeight) {\n\t\t\tamount = 1;\n\t\t} else {\n\t\t\tamount = (target.scrollTop + target.clientHeight * 0.5) / target.scrollHeight;\n\t\t}\n    \tthis.updateLocationMarker(amount);\n\t},\n\t\n\tupdateLocationMarker: function(amount, scrollDir) {\n\t\tvar readerWords = Ext.DomQuery.select('.word', this.getInnerContainer().down('.readerContainer', true));\n\t\tvar firstWord = readerWords[0];\n\t\tvar lastWord = readerWords[readerWords.length-1];\n\t\tif (firstWord !== undefined && lastWord !== undefined) {\n\t\t\tvar corpus = this.getCorpus();\n\t\t\tvar partialFirstDoc = false;\n\t\t\t\n\t\t\tvar info1 = Voyant.data.model.Token.getInfoFromElement(Ext.get(firstWord));\n\t\t\tvar info2 = Voyant.data.model.Token.getInfoFromElement(Ext.get(lastWord));\n\t\t\tif (info1.position !== 0) {\n\t\t\t\tpartialFirstDoc = true;\n\t\t\t}\n\n\t\t\tvar docTokens = {};\n\t\t\tvar totalTokens = 0;\n\t\t\tvar currIndex = info1.docIndex;\n\t\t\twhile (currIndex <= info2.docIndex) {\n\t\t\t\tvar tokens = corpus.getDocument(currIndex).get('tokensCount-lexical');\n\t\t\t\tif (currIndex === info2.docIndex) {\n\t\t\t\t\ttokens = info2.position; // only count tokens up until last displayed word\n\t\t\t\t}\n\t\t\t\tif (currIndex === info1.docIndex) {\n\t\t\t\t\ttokens -= info1.position; // subtract missing tokens, if any\n\t\t\t\t}\n\t\t\t\ttotalTokens += tokens;\n\t\t\t\tdocTokens[currIndex] = tokens;\n\t\t\t\tcurrIndex++;\n\t\t\t}\n\t\t\t\n\t\t\tvar tokenPos = Math.round(totalTokens * amount);\n\t\t\tvar docIndex = 0;\n\t\t\tvar currToken = 0;\n\t\t\tfor (var i = info1.docIndex; i <= info2.docIndex; i++) {\n\t\t\t\tdocIndex = i;\n\t\t\t\tcurrToken += docTokens[i];\n\t\t\t\tif (currToken >= tokenPos) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar remains = (currToken - tokenPos);\n\t\t\tvar tokenPosInDoc = docTokens[docIndex] - remains;\n\t\t\t\n\t\t\tif (partialFirstDoc && docIndex === info1.docIndex) {\n\t\t\t\ttokenPosInDoc += info1.position;\n\t\t\t}\n\t\t\t\t\n\t\t\tvar fraction = tokenPosInDoc / corpus.getDocument(docIndex).get('tokensCount-lexical');\n\n\t\t\tthis.down('readergraph').moveLocationMarker(docIndex, fraction, scrollDir);\n\t\t}\n\t},\n    \n    updateChart: function() {\n    \t\n    }\n});\n","Ext.define('Voyant.panel.SimpleDocReader', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.simpledocreader',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tdocIndex: undefined,\n    \t\tdocId: undefined\n    \t},\n    \tglyph: 'xf0f6@FontAwesome'\n\t},\n    config: {\n    },\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function(config) {\n    \tvar me = this;\n    \tExt.apply(this, {\n    \t\thtml: '<iframe style=\"width: 100%; height: 100%; border: none;\"></iframe>',\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \tglyph: 'xf060@FontAwesome',\n            \t\thandler: this.fetchPrevious,\n            \t\tscope: this\n            \t},{\n            \t\tglyph: 'xf061@FontAwesome',\n            \t\thandler: this.fetchNext,\n            \t\tscope: this\n                }]\n    \t\t}],\n    \t\tlisteners: {\n    \t\t\tloadedCorpus: function(src, corpus) {\n    \t\t\t\t\n    \t\t\t\t// we can keep the reader blank to begin\n    \t\t\t\tif (this.getApiParam(\"autoLoadOnLoadedCorpus\", \"false\")===\"true\") {return;}\n    \t\t\t\t\n    \t\t\t\tthis.fireEvent(\"documentSelected\", this, 0);\n    \t\t\t\t\n    \t\t\t},\n        \t\tdocumentSelected: function(src, document) {\n        \t\t\tthis.setApiParams({\n        \t\t\t\tdocIndex: this.getCorpus().getDocument(document).getIndex(),\n        \t\t\t\tdocId: undefined\n        \t\t\t});\n        \t\t\tthis.fetch();\n        \t\t},\n        \t\tscope: this\n    \t\t}\n    \t});\n    \t\n        this.callParent(arguments);\n    },\n    \n\tfetchPrevious: function() {\n\t\tvar doc;\n\t\tif (this.getApiParam(\"docIndex\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docIndex\"));}\n\t\telse if (this.getApiParam(\"docId\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docId\"));}\n\t\telse {doc = this.getCorpus().getDocument(1);}\n\t\tif (doc.getIndex()>0) {\n\t\t\tthis.setApiParams({docIndex: doc.getIndex()-1, docId: undefined});\n\t\t\tthis.fetch();\n\t\t} else {\n\t\t\tthis.toastInfo(this.localize('noPrevious'))\n\t\t}\n\t},\n\t\n\tfetchNext: function() {\n\t\tvar doc;\n\t\tif (this.getApiParam(\"docIndex\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docIndex\"));}\n\t\telse if (this.getApiParam(\"docId\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docId\"));}\n\t\telse {\n\t\t\tthis.setApiParams({docIndex: 0, docId: undefined});\n\t\t\treturn this.fetch();\n\t\t}\n\t\tif (doc.getIndex()<this.getCorpus().getDocumentsCount()-1) {\n\t\t\tthis.setApiParams({docIndex: doc.getIndex()+1, docId: undefined});\n\t\t\tthis.fetch();\n\t\t} else {\n\t\t\tthis.toastInfo(this.localize('noNext'))\n\t\t}\n\t},\n\t\n\tfetch: function() {\n\t\tvar doc;\n\t\tif (this.getApiParam(\"docIndex\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docIndex\"));}\n\t\telse if (this.getApiParam(\"docId\")!==undefined) {doc = this.getCorpus().getDocument(this.getApiParam(\"docId\"));}\n\t\telse {doc = this.getCorpus().getDocument(0);}\n\t\tvar iframe = this.getTargetEl().down(\"iframe\", true);\n\t\tiframe.setAttribute(\"src\", \"about:blank\")\n\t\tif (this.getApiParam(\"originalUrlMetadataKey\")) {\n\t\t\tvar url = doc.get(this.getApiParam(\"originalUrlMetadataKey\"));\n\t\t\tif (url) {\n\t\t\t\tiframe.setAttribute(\"src\", url)\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar params = {\n\t\t\tcorpus: this.getCorpus().getId(),\n\t\t\tdocIndex: doc.getIndex(),\n\t\t\ttool: 'corpus.DocumentTokens',\n\t\t\ttemplate: 'docTokensPlusStructure2html',\n\t\t\toutputFormat: 'html',\n\t\t\tlimit: 0\n\t\t}\n\t\tvar url = this.getTromboneUrl() + \"?\" + Ext.Object.toQueryString(params);\n\t\tiframe.setAttribute(\"src\", url);\n\n\t}\n});\n","Ext.define('Voyant.panel.ScatterPlot', {\r\n\textend: 'Ext.panel.Panel',\r\n\tmixins: ['Voyant.panel.Panel'],\r\n\trequires: ['Ext.chart.CartesianChart'],\r\n\talias: 'widget.scatterplot',\r\n    statics: {\r\n    \ti18n: {\r\n    \t},\r\n    \tapi: {\r\n    \t\tdocId: undefined,\r\n    \t\tanalysis: 'ca',\r\n    \t\tlimit: 50,\r\n    \t\tdimensions: 3,\r\n    \t\tbins: 10,\r\n    \t\tclusters: 3,\r\n    \t\tperplexity: 15,\r\n    \t\titerations: 1500,\r\n    \t\tcomparisonType: 'relative',\r\n    \t\tstopList: 'auto',\r\n    \t\ttarget: undefined,\r\n    \t\tterm: undefined,\r\n    \t\tquery: undefined,\r\n    \t\twhitelist: undefined,\r\n    \t\tlabel: ['summary', 'docs', 'terms'],\r\n    \t\tstoreJson: undefined\r\n    \t},\r\n\t\tglyph: 'xf06e@FontAwesome'\r\n    },\r\n\tconfig: {\r\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\r\n    \tcaStore: null,\r\n    \tpcaStore: null,\r\n    \ttsneStore: null,\r\n    \tdocSimStore: null,\r\n    \ttermStore: null,\r\n    \tchartMenu: null,\r\n    \tnewTerm: null,\r\n    \ttermsTimeout: null,\r\n    \thighlightData: {x: 0, y: 0, r: 0},\r\n        highlightTask: null\r\n\t},\r\n    \r\n    tokenFreqTipTemplate: null,\r\n    docFreqTipTemplate: null,\r\n    \r\n    constructor: function(config) {\r\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\r\n\t\tif (\"storeJson\" in config) {\r\n    \t\tvar json = JSON.parse(config.storeJson);\r\n    \t\tExt.apply(config, json);\r\n    \t}\r\n\t\tthis.callParent(arguments);\r\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\r\n    },\r\n    \r\n    initComponent: function() {\r\n    \tthis.setCaStore(Ext.create('Voyant.data.store.CAAnalysis', {\r\n    \t\tlisteners: {load: this.maskAndBuildChart, scope: this}\r\n    \t}));\r\n    \tthis.setPcaStore(Ext.create('Voyant.data.store.PCAAnalysis', {\r\n    \t\tlisteners: {load: this.maskAndBuildChart, scope: this}\r\n    \t}));\r\n    \tthis.setTsneStore(Ext.create('Voyant.data.store.TSNEAnalysis', {\r\n    \t\tlisteners: {load: this.maskAndBuildChart, scope: this}\r\n    \t}));\r\n    \tthis.setDocSimStore(Ext.create('Voyant.data.store.DocSimAnalysis', {\r\n    \t\tlisteners: {load: this.maskAndBuildChart, scope: this}\r\n    \t}));\r\n    \t\r\n    \tthis.setTermStore(Ext.create('Ext.data.JsonStore', {\r\n\t\t\tfields: [\r\n\t\t\t\t{name: 'term'},\r\n\t\t\t\t{name: 'rawFreq', type: 'int'},\r\n\t\t\t\t{name: 'relativeFreq', type: 'number'},\r\n\t\t\t\t{name: 'coordinates', mapping : 'vector'},\r\n\t\t\t\t{name: 'category'}\r\n\t\t\t],\r\n\t\t\tsorters: [{property: 'rawFreq', direction: 'DESC'}],\r\n\t\t\tgroupField: 'category'\r\n\t\t}));\r\n    \t\r\n    \tthis.setChartMenu(Ext.create('Ext.menu.Menu', {\r\n    \t\titems: [\r\n    \t\t\t{text: this.localize('remove'), itemId: 'remove', glyph: 'xf068@FontAwesome'},\r\n    \t\t\t{text: this.localize('nearby'), itemId: 'nearby', glyph: 'xf0b2@FontAwesome'}\r\n    \t\t],\r\n    \t\tlisteners: {\r\n    \t\t\thide: function() {\r\n    \t\t\t\tvar series = this.down('#chart').getSeries();\r\n    \t\t\t\tseries[0].enableToolTips();\r\n    \t\t\t\tseries[1].enableToolTips();\r\n    \t\t\t},\r\n    \t\t\tscope: this\r\n    \t\t}\r\n    \t}));\r\n    \t\r\n    \tthis.tokenFreqTipTemplate = new Ext.Template(this.localize('tokenFreqTip'));\r\n    \tthis.docFreqTipTemplate = new Ext.Template(this.localize('docFreqTip'));\r\n    \t\r\n        Ext.apply(this, {\r\n        \ttitle: this.localize('title'),\r\n        \tlayout: 'border',\r\n        \tautoDestroy: true,\r\n        \titems: [{\r\n    \t\t\titemId: 'chartParent',\r\n    \t\t\tregion: 'center',\r\n    \t\t\tlayout: 'fit',\r\n        \t\ttbar: {\r\n        \t\t\toverflowHandler: 'scroller',\r\n        \t\t\titems: [{\r\n        \t\t\t\txtype: 'querysearchfield',\r\n        \t\t\t\titemId: 'filterTerms',\r\n        \t\t\t\twidth: 150\r\n        \t\t\t},{\r\n                \t\ttext: this.localize('labels'),\r\n                \t\titemId: 'labels',\r\n                \t\tglyph: 'xf02b@FontAwesome',\r\n                \t\tmenu: {\r\n                \t\t\titems: [\r\n                \t\t\t    {text: this.localize(\"summaryLabel\"), itemId: 'summary', xtype: 'menucheckitem'},\r\n                \t\t\t    {text: this.localize(\"docsLabel\"), itemId: 'docs', xtype: 'menucheckitem'},\r\n                \t\t\t    {text: this.localize(\"termsLabel\"), itemId: 'terms', xtype: 'menucheckitem'}\r\n                \t\t\t],\r\n        \t\t\t\t\tlisteners: {\r\n        \t\t\t\t\t\tafterrender: function(menu) {\r\n        \t\t\t\t\t\t\tvar labels = this.getApiParam('label');\r\n        \t\t\t\t\t\t\tmenu.items.each(function(item) {\r\n        \t\t\t\t\t\t\t\titem.setChecked(labels.indexOf(item.getItemId())>-1)\r\n        \t\t\t\t\t\t\t})\r\n        \t\t\t\t\t\t},\r\n        \t\t\t\t\t\tclick: function(menu, item) {\r\n        \t\t\t\t\t\t\tvar labels = this.getApiParam(\"label\");\r\n        \t\t\t\t\t\t\tvar label = item.getItemId();\r\n        \t\t\t\t\t\t\tif (Ext.isString(labels)) {labels = [labels]}\r\n        \t\t\t\t\t\t\tif (item.checked && labels.indexOf(label)==-1) {\r\n        \t\t\t\t\t\t\t\tlabels.push(label)\r\n        \t\t\t\t\t\t\t} else if (!item.checked && labels.indexOf(label)>-1) {\r\n        \t\t\t\t\t\t\t\tlabels = labels.filter(function(item) {return item!=label})\r\n        \t\t\t\t\t\t\t}\r\n        \t\t\t\t\t\t\tthis.setApiParam(\"label\", labels);\r\n        \t\t\t\t\t\t\tthis.doLabels();\r\n        \t\t\t\t\t\t\tthis.queryById('chart').redraw();\r\n        \t\t\t\t\t\t},\r\n        \t\t\t\t\t\tscope: this\r\n        \t\t\t\t\t}\r\n                \t\t}\r\n                \t}]\r\n        \t\t\t\r\n        \t\t},\r\n        \t\tlisteners: {\r\n        \t\t\tquery: function(component, value) {\r\n        \t\t\t\tthis.getTermStore().filter([{property: 'term', value: value, anyMatch: true}]);\r\n        \t\t\t\tthis.filterChart(value);\r\n        \t\t\t},\r\n        \t\t\tscope: this\r\n        \t\t}\r\n    \t\t},{\r\n    \t\t\titemId: 'optionsPanel',\r\n        \t\ttitle: this.localize('options'),\r\n        \t\tregion: 'west',\r\n        \t\tsplit: true,\r\n        \t\tcollapsible: true,\r\n        \t\tcollapseMode: 'header',\r\n        \t\twidth: 135,\r\n        \t\tscrollable: 'y',\r\n        \t\tlayout: {\r\n        \t\t\ttype: 'vbox',\r\n        \t\t\talign: 'stretch'\r\n        \t\t},\r\n        \t\tdefaults: {\r\n        \t\t\txtype: 'button',\r\n        \t\t\tmargin: '5',\r\n        \t\t\tlabelAlign: 'top'\r\n        \t\t},\r\n        \t\titems: [{\r\n        \t\t\txtype: 'label',\r\n        \t\t\ttext: this.localize('input')\r\n        \t\t},{\r\n    \t\t\t\txtype: 'documentselectorbutton'\r\n    \t\t\t},{\r\n\t            \ttext: this.localize('freqsMode'),\r\n\t            \titemId: 'comparisonType',\r\n\t\t\t\t\tglyph: 'xf201@FontAwesome',\r\n\t\t\t\t    tooltip: this.localize('freqsModeTip'),\r\n\t\t\t\t    menu: {\r\n\t\t\t\t    \titems: [\r\n\t\t\t               {text: this.localize(\"rawFrequencies\"), itemId: 'comparisonType_raw', group: 'freqsMode', xtype: 'menucheckitem'},\r\n\t\t\t               {text: this.localize(\"relativeFrequencies\"), itemId: 'comparisonType_relative', group: 'freqsMode', xtype: 'menucheckitem'},\r\n\t\t\t               {text: this.localize(\"tfidf\"), itemId: 'comparisonType_tfidf', group: 'freqsMode', xtype: 'menucheckitem'}\r\n\t\t\t            ],\r\n       \t\t\t\t\tlisteners: {\r\n    \t\t\t\t\t\tclick: function(menu, item) {\r\n    \t\t\t\t\t\t\tif (item !== undefined) {\r\n    \t\t\t\t\t\t\t\tvar type = item.getItemId().split('_')[1];\r\n    \t\t\t\t\t\t\t\tif (type !== this.getApiParam('comparisonType')) {\r\n\t    \t\t\t\t\t\t\t\tthis.setApiParam('comparisonType', type);\r\n\t    \t\t\t\t\t\t\t\tthis.loadFromApis(true);\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t},\r\n    \t\t\t\t\t\tscope: this\r\n    \t\t\t\t    }\r\n\t\t\t\t    }\r\n        \t\t},{\r\n        \t\t\tfieldLabel: this.localize('numTerms'),\r\n        \t\t\titemId: 'limit',\r\n        \t\t\txtype: 'numberfield',\r\n        \t\t\tminValue: 5,\r\n        \t\t\tlisteners: {\r\n        \t\t\t\tchange: function(numb, newValue, oldValue) {\r\n        \t\t\t\t\tfunction doLoad() {\r\n        \t\t\t\t\t\tthis.setApiParam('limit', newValue);\r\n            \t\t\t\t\tthis.loadFromApis();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (oldValue !== null) {\r\n\t\t\t\t\t\t\t\tif (this.getTermsTimeout() !== null) {\r\n\t\t\t\t\t\t\t\t\tclearTimeout(this.getTermsTimeout());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (numb.isValid()) {\r\n\t\t\t\t\t\t\t\t\tthis.setTermsTimeout(setTimeout(doLoad.bind(this), 500));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n        \t\t\t\t},\r\n        \t\t\t\tscope: this\r\n        \t\t\t}\r\n        \t\t},{\r\n        \t\t\txtype: 'container',\r\n        \t\t\thtml: '<hr style=\"border: none; border-top: 1px solid #cfcfcf;\"/>'\r\n        \t\t},{\r\n        \t\t\txtype: 'label',\r\n        \t\t\ttext: this.localize('output')\r\n        \t\t},{\r\n            \t\ttext: this.localize('analysis'),\r\n            \t\titemId: 'analysis',\r\n            \t\tglyph: 'xf1ec@FontAwesome',\r\n                    overflowHandler: 'scroller',\r\n        \t\t\tmenu: {\r\n    \t\t\t\t\titems: [\r\n    \t\t\t\t\t    {text: this.localize('pca'), itemId: 'analysis_pca', group:'analysis', xtype: 'menucheckitem'},\r\n    \t\t\t\t\t    {text: this.localize('ca'), itemId: 'analysis_ca', group:'analysis', xtype: 'menucheckitem'},\r\n    \t\t\t\t\t    {text: this.localize('tsne'), itemId: 'analysis_tsne', group:'analysis', xtype: 'menucheckitem'},\r\n    \t\t\t\t\t    {text: this.localize('docSim'), itemId: 'analysis_docSim', group:'analysis', xtype: 'menucheckitem'}\r\n    \t\t\t\t\t],\r\n    \t\t\t\t\tlisteners: {\r\n    \t\t\t\t\t\tclick: function(menu, item) {\r\n    \t\t\t\t\t\t\tif (item !== undefined) {\r\n    \t\t\t\t\t\t\t\tvar analysis = item.getItemId().split('_')[1];\r\n    \t\t\t\t\t\t\t\tif (analysis !== this.getApiParam('analysis')) {\r\n    \t\t\t\t\t\t\t\t\tthis.doAnalysisChange(analysis);\r\n    \t\t\t\t\t\t\t\t\tthis.loadFromApis(true);\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t},\r\n    \t\t\t\t\t\tscope: this\r\n    \t\t\t\t\t}\r\n        \t\t\t}\r\n\t            },{\r\n\t            \tfieldLabel: this.localize('perplexity'),\r\n\t            \titemId: 'perplexity',\r\n\t            \txtype: 'slider',\r\n\t            \tminValue: 5,\r\n\t            \tmaxValue: 100,\r\n\t            \tincrement: 1,\r\n\t            \tlisteners: {\r\n\t            \t\tchangecomplete: function(slider, newValue) {\r\n\t            \t\t\tthis.setApiParam('perplexity', newValue);\r\n\t            \t\t\tthis.loadFromApis(true);\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n\t            },{\r\n\t            \tfieldLabel: this.localize('iterations'),\r\n\t            \titemId: 'iterations',\r\n\t            \txtype: 'slider',\r\n\t            \tminValue: 100,\r\n\t            \tmaxValue: 5000,\r\n\t            \tincrement: 100,\r\n\t            \tlisteners: {\r\n\t            \t\tchangecomplete: function(slider, newValue) {\r\n\t            \t\t\tthis.setApiParam('iterations', newValue);\r\n\t            \t\t\tthis.loadFromApis(true);\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n\t            },{\r\n            \t\ttext: this.localize('clusters'),\r\n            \t\titemId: 'clusters',\r\n            \t\tglyph: 'xf192@FontAwesome',\r\n            \t\tmenu: {\r\n            \t\t\titems: [\r\n            \t\t\t    {text: '1', itemId: 'clusters_1', group: 'clusters', xtype: 'menucheckitem'},\r\n            \t\t\t    {text: '2', itemId: 'clusters_2', group: 'clusters', xtype: 'menucheckitem'},\r\n            \t\t\t    {text: '3', itemId: 'clusters_3', group: 'clusters', xtype: 'menucheckitem'},\r\n            \t\t\t    {text: '4', itemId: 'clusters_4', group: 'clusters', xtype: 'menucheckitem'},\r\n            \t\t\t    {text: '5', itemId: 'clusters_5', group: 'clusters', xtype: 'menucheckitem'}\r\n            \t\t\t],\r\n    \t\t\t\t\tlisteners: {\r\n    \t\t\t\t\t\tclick: function(menu, item) {\r\n    \t\t\t\t\t\t\tif (item !== undefined) {\r\n    \t\t\t\t\t\t\t\tvar clusters = parseInt(item.getItemId().split('_')[1]);\r\n    \t\t\t\t\t\t\t\tif (clusters !== this.getApiParam('clusters')) {\r\n        \t\t\t\t\t\t\t\tthis.setApiParam('clusters', clusters);\r\n        \t\t\t\t\t\t\t\tthis.loadFromApis(true);\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t},\r\n    \t\t\t\t\t\tscope: this\r\n    \t\t\t\t\t}\r\n            \t\t}\r\n            \t},{\r\n            \t\ttext: this.localize('dimensions'),\r\n            \t\titemId: 'dimensions',\r\n            \t\tglyph: 'xf1b2@FontAwesome',\r\n            \t\tmenu: {\r\n            \t\t\titems: [\r\n            \t\t\t    {text: '2', itemId: 'dimensions_2', group: 'dimensions', xtype: 'menucheckitem'},\r\n            \t\t\t    {text: '3', itemId: 'dimensions_3', group: 'dimensions', xtype: 'menucheckitem'}\r\n            \t\t\t],\r\n    \t\t\t\t\tlisteners: {\r\n    \t\t\t\t\t\tclick: function(menu, item) {\r\n    \t\t\t\t\t\t\tif (item !== undefined) {\r\n    \t\t\t\t\t\t\t\tvar dims = parseInt(item.getItemId().split('_')[1]);\r\n    \t\t\t\t\t\t\t\tif (dims !== this.getApiParam('dimensions')) {\r\n        \t\t\t\t\t\t\t\tif (dims == 3 && this.getApiParam('analysis') == 'ca' && this.getCorpus().getDocumentsCount() == 3) {\r\n        \t\t\t\t\t\t\t\t\tdims = 2;\r\n        \t\t\t\t\t\t\t\t\t// TODO add info message 'Because of the nature of Correspondence Analysis, you can only use 2 dimensions with 3 documents.'\r\n        \t\t\t\t\t\t\t\t\treturn false;\r\n        \t\t\t\t\t\t\t\t}\r\n        \t\t\t\t\t\t\t\t\r\n        \t\t\t\t\t\t\t\tthis.setApiParam('dimensions', dims);\r\n        \t\t\t\t\t\t\t\tthis.loadFromApis(true);\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t},\r\n    \t\t\t\t\t\tscope: this\r\n    \t\t\t\t\t}\r\n            \t\t}\r\n        \t\t},{\r\n        \t\t\titemId: 'reloadButton',\r\n        \t\t\ttext: this.localize('reload'),\r\n        \t\t\tglyph: 'xf021@FontAwesome',\r\n        \t\t\thandler: function() {\r\n        \t\t\t\tthis.loadFromApis();\r\n        \t\t\t},\r\n        \t\t\tscope: this\r\n        \t\t}]\r\n        \t},{\r\n        \t\titemId: 'termsGrid',\r\n        \t\txtype: 'grid',\r\n        \t\ttitle: this.localize('terms'),\r\n        \t\tregion: 'east',\r\n        \t\twidth: 250,\r\n        \t\tsplit: true,\r\n        \t\tcollapsible: true,\r\n        \t\tcollapseMode: 'header',\r\n        \t\tforceFit: true,\r\n        \t\tfeatures: [{\r\n        \t\t\tftype: 'grouping',\r\n        \t\t\thideGroupedHeader: true,\r\n                    enableGroupingMenu: false\r\n        \t\t}],\r\n        \t\tbbar: {\r\n                    overflowHandler: 'scroller',\r\n        \t\t\titems: [{\r\n        \t\t\t\titemId: 'nearbyButton',\r\n                        xtype: 'button',\r\n                        text: this.localize('nearby'),\r\n                        glyph: 'xf0b2@FontAwesome',\r\n                        flex: 1,\r\n                        handler: function(btn) {\r\n                        \tvar sel = btn.up('panel').getSelection()[0];\r\n                        \tif (sel === undefined) {\r\n                        \t\tthis.toastError({\r\n                        \t\t\thtml: this.localize(\"noTermSelected\"),\r\n                        \t\t     anchor: btn.up(\"panel\").getTargetEl()\r\n                        \t\t });\r\n                        \t}\r\n                        \telse {\r\n\t                        \tvar term = sel.get('term');\r\n\t                        \tthis.getNearbyForTerm(term);\r\n                        \t}\r\n                        },\r\n                        scope: this\r\n                    },{\r\n                    \titemId: 'removeButton',\r\n                        xtype: 'button',\r\n                        text: this.localize('remove'),\r\n                        glyph: 'xf068@FontAwesome',\r\n                        flex: 1,\r\n                        handler: function(btn) {\r\n                        \tvar sel = btn.up('panel').getSelection()[0];\r\n                        \tif (sel === undefined) {\r\n                        \t\tthis.toastError({\r\n                        \t\t\thtml: this.localize(\"noTermSelected\"),\r\n                        \t\t     anchor: btn.up(\"panel\").getTargetEl()\r\n                        \t\t });\r\n                        \t}\r\n                        \telse {\r\n\t                        \tvar term = sel.get('term');\r\n\t                        \tthis.removeTerm(term);\r\n                        \t}\r\n                        },\r\n                        scope: this\r\n                    }]\r\n        \t\t\t\r\n        \t\t},\r\n        \t\ttbar: {\r\n                    overflowHandler: 'scroller',\r\n                    items: [{\r\n                    \txtype: 'querysearchfield',\r\n                    \titemId: 'addTerms',\r\n//                    \temptyText: this.localize('addTerm'),\r\n                    \tflex: 1\r\n                    }]\r\n                },\r\n        \t\tcolumns: [{\r\n        \t\t\ttext: this.localize('term'),\r\n    \t\t\t\tdataIndex: 'term',\r\n    \t\t\t\tflex: 1,\r\n                    sortable: true\r\n    \t\t\t},{\r\n    \t\t\t\ttext: this.localize('rawFreq'),\r\n    \t\t\t\tdataIndex: 'rawFreq',\r\n    \t\t\t\tflex: 0.75,\r\n    \t\t\t\tminWidth: 70,\r\n                    sortable: true\r\n    \t\t\t},{\r\n    \t\t\t\ttext: this.localize('relFreq'),\r\n    \t\t\t\tdataIndex: 'relativeFreq',\r\n    \t\t\t\tflex: 0.75,\r\n    \t\t\t\tminWidth: 70,\r\n                    sortable: true,\r\n                    hidden: true\r\n    \t\t\t}],\r\n    \t\t\tselModel: {\r\n    \t\t\t\ttype: 'rowmodel',\r\n    \t\t\t\tmode: 'SINGLE',\r\n    \t\t\t\tallowDeselect: true,\r\n    \t\t\t\ttoggleOnClick: true,\r\n                    listeners: {\r\n                        selectionchange: {\r\n                        \tfn: function(sm, selections) {\r\n//                        \t\tthis.getApplication().dispatchEvent('corpusTermsClicked', this, selections);\r\n                        \t\tvar sel = selections[0];\r\n                        \t\tif (sel !== undefined) {\r\n\t                        \t\tvar term = sel.get('term');\r\n\t                        \t\tvar isDoc = sel.get('category') === 'document';\r\n\t                        \t\tthis.selectTerm(term, isDoc);\r\n\t                        \t\t\r\n\t                        \t\tif (isDoc) {\r\n\t                        \t\t\tthis.queryById('nearbyButton').disable();\r\n\t                        \t\t\tthis.queryById('removeButton').disable();\r\n\t                        \t\t} else {\r\n\t                        \t\t\tthis.queryById('nearbyButton').enable();\r\n\t                        \t\t\tthis.queryById('removeButton').enable();\r\n\t                        \t\t}\r\n                        \t\t} else {\r\n                        \t\t\tthis.selectTerm();\r\n                        \t\t}\r\n                        \t},\r\n                        \tscope: this\r\n                        }\r\n                    }\r\n                },\r\n        \t\tstore: this.getTermStore(),\r\n        \t\tlisteners: {\r\n        \t\t\texpand: function(panel) {\r\n        \t\t\t\tpanel.getView().refresh();\r\n        \t\t\t},\r\n        \t\t\tquery: function(component, value) {\r\n        \t\t\t\tif (value.length > 0 && this.getTermStore().findExact('term', value[0]) === -1) {\r\n\t                \t\tthis.setNewTerm(value);\r\n\t                \t\tthis.loadFromApis();\r\n    \t\t\t\t\t} else {\r\n    \t\t\t\t\t\tthis.setNewTerm(null);\r\n    \t\t\t\t\t}\r\n        \t\t\t},\r\n        \t\t\tscope: this\r\n        \t\t}\r\n        \t}]\r\n        });\r\n        \r\n        this.on('boxready', function(component, width, height) {\r\n\t\t\tif (width < 400) {\r\n\t\t\t\tthis.queryById('optionsPanel').collapse();\r\n\t\t\t\tthis.queryById('termsGrid').collapse();\r\n\t\t\t}\r\n\t\t\tif (this.config.storeClass && this.config.storeData) {\r\n\t\t\t\tthis.loadStoreFromJson(this.config.storeClass, this.config.storeData);\r\n\t\t\t}\r\n\t\t}, this);\r\n        \r\n        this.on('beforedestroy', function(component) {\r\n        \tvar oldChart = this.queryById('chart');\r\n        \tif (oldChart !== null) {\r\n        \t\tthis.queryById('chartParent').remove(oldChart);\r\n        \t}\r\n        }, this);\r\n        \r\n        // create a listener for corpus loading (defined here, in case we need to load it next)\r\n    \tthis.on('loadedCorpus', function(src, corpus) {\r\n    \t\tfunction setCheckItemFromApi(apiParamName) {\r\n    \t\t\tvar value = this.getApiParam(apiParamName);\r\n    \t\t\tvar menu = this.queryById(apiParamName);\r\n    \t\t\tvar item = menu.down('#'+apiParamName+'_'+value);\r\n    \t\t\titem.setChecked(true);\r\n    \t\t}\r\n    \t\tvar setCheckBound = setCheckItemFromApi.bind(this);\r\n    \t\t\r\n    \t\tsetCheckBound('analysis');\r\n    \t\tthis.doAnalysisChange(this.getApiParam('analysis'));\r\n    \t\t\r\n    \t\tsetCheckBound('comparisonType');\r\n    \t\tsetCheckBound('clusters');\r\n\r\n    \t\tthis.queryById('perplexity').setValue(this.getApiParam('perplexity'));\r\n    \t\tthis.queryById('iterations').setValue(this.getApiParam('iterations'));\r\n    \t\t\r\n    \t\tif (corpus.getDocumentsCount() == 3) {\r\n    \t\t\tthis.setApiParam('dimensions', 2);\r\n    \t\t}\r\n    \t\tsetCheckBound('dimensions');\r\n\r\n    \t\tthis.getCaStore().setCorpus(corpus);\r\n    \t\tthis.getPcaStore().setCorpus(corpus);\r\n    \t\tthis.getDocSimStore().setCorpus(corpus);\r\n    \t\tthis.loadFromApis();\r\n    \t}, this);\r\n    \t\r\n    \tthis.on('documentsSelected', function(src, docIds) {\r\n    \t\tthis.setApiParam('docId', docIds);\r\n    \t\tthis.loadFromApis();\r\n    \t}, this);\r\n        \r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    doAnalysisChange: function(analysis) {\r\n    \tthis.setApiParam('analysis', analysis);\r\n\t\tthis.queryById('nearbyButton').setDisabled(analysis === 'tsne');\r\n\t\tthis.queryById('reloadButton').setVisible(analysis === 'tsne');\r\n\t\tthis.queryById('perplexity').setVisible(analysis === 'tsne');\r\n\t\tthis.queryById('iterations').setVisible(analysis === 'tsne');\r\n\t\tif (analysis === 'ca') {\r\n\t\t\t// TODO handling for when there's no corpus\r\n\t\t\tif (this.getCorpus().getDocumentsCount() == 3) {\r\n\t\t\t\tthis.setApiParam('dimensions', 2);\r\n\t\t\t\tthis.queryById('dimensions').menu.items.get(0).setChecked(true); // need 1-2 docs or 4+ docs for 3 dimensions\r\n\t\t\t}\r\n\t\t}\r\n    },\r\n    \r\n    loadStoreFromJson: function(storeClass, storeData) {\r\n\t\tif (storeClass == 'Voyant.data.store.CAAnalysis') {\r\n\t\t\tthis.getCaStore().loadRawData(storeData);\r\n\t\t\tthis.doAnalysisChange('ca');\r\n\t\t\tthis.maskAndBuildChart.call(this, this.getCaStore());\r\n\t\t} else if (storeClass == 'Voyant.data.store.PCAAnalysis') {\r\n\t\t\tthis.getPcaStore().loadRawData(storeData);\r\n\t\t\tthis.doAnalysisChange('pca');\r\n\t\t\tthis.maskAndBuildChart.call(this, this.getPcaStore());\r\n\t\t} else if (storeClass == 'Voyant.data.store.TSNEAnalysis') {\r\n\t\t\tthis.getTsneStore().loadRawData(storeData);\r\n\t\t\tthis.doAnalysisChange('tsne');\r\n\t\t\tthis.maskAndBuildChart.call(this, this.getTsneStore());\r\n\t\t} else if (storeClass == 'Voyant.data.store.DocSimAnalysis') {\r\n\t\t\tthis.getDocSimStore().loadRawData(storeData);\r\n\t\t\tthis.doAnalysisChange('docSim');\r\n\t\t\tthis.maskAndBuildChart.call(this, this.getDocSimStore());\r\n\t\t}\r\n    },\r\n    \r\n    maskAndBuildChart: function(store) {\r\n    \tthis.queryById('chartParent').mask(this.localize('plotting'));\r\n    \tExt.defer(this.buildChart, 50, this, [store]);\r\n    },\r\n\r\n    buildChart: function(store) {\r\n    \tvar that = this; // needed for tooltip renderer\r\n    \t\r\n    \tvar oldChart = this.queryById('chart');\r\n    \tif (oldChart !== null) {\r\n    \t\tthis.queryById('chartParent').remove(oldChart);\r\n    \t}\r\n    \t\r\n    \tthis.queryById('termsGrid').getSelectionModel().deselectAll();\r\n    \t\r\n    \tvar rec = store.getAt(0);\r\n        var numDims = this.getApiParam('dimensions');\r\n        \r\n    \tvar summary = '';    \t\r\n    \tif (this.getApiParam('analysis') === 'pca') {\r\n    \t\t// calculate the percentage of original data represented by the dominant principal components\r\n\t\t\tvar pcs = rec.getPrincipalComponents();\r\n\t\t\tvar eigenTotal = 0;\r\n\t\t\tfor (var i = 0; i < pcs.length; i++) {\r\n\t\t\t\tvar pc = pcs[i];\r\n\t\t\t\teigenTotal += parseFloat(pc.get('eigenValue'));\r\n\t\t\t}\r\n\t\t\tif (eigenTotal == 0) {\r\n\t\t\t\t// do nothing\r\n\t\t\t} else {\r\n\t\t\t\tsummary = this.localize('pcTitle')+'\\n';\r\n\t\t\t\tvar pcMapping = ['xAxis', 'yAxis', 'fill'];\r\n\t\t\t\tfor (var i = 0; i < pcs.length; i++) {\r\n\t\t\t\t\tif (i >= numDims) break;\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar eigenValue = pcs[i].get('eigenValue');\r\n\t\t\t\t\tvar percentage = eigenValue / eigenTotal * 100;\r\n\t\t\t\t\tsummary += this.localize('pc')+' '+(i+1)+' ('+this.localize(pcMapping[i])+'): '+Math.round(percentage*100)/100+'%\\n';\r\n\t\t\t\t}\r\n\t\t\t}\r\n    \t} else if (this.getApiParam('analysis') === 'tsne') {\r\n    \t\t\r\n    \t} else {\r\n    \t\tsummary = this.localize('caTitle')+'\\n';\r\n    \t\tvar pcMapping = ['xAxis', 'yAxis', 'fill'];\r\n    \t\t\r\n    \t\tvar dimensions = rec.getDimensions();\r\n    \t\tfor (var i = 0; i < dimensions.length; i++) {\r\n    \t\t\tif (i >= numDims) break;\r\n    \t\t\t\r\n    \t\t\tvar percentage = dimensions[i].get('percentage');\r\n    \t\t\tsummary += this.localize('dimension')+' '+(i+1)+' ('+this.localize(pcMapping[i])+'): '+Math.round(percentage*100)/100+'%\\n';\r\n    \t\t}\r\n    \t}\r\n        \r\n        var maxFreq = 0;\r\n        var minFreq = Number.MAX_VALUE;\r\n        var maxFill = 0;\r\n        var minFill = Number.MAX_VALUE;\r\n        \r\n        \r\n        if (this.getApiParam('analysis') !== 'docSim') { // docSim doesn't return terms so keep the current ones\r\n\t        this.getTermStore().removeAll();\r\n        }\r\n\t        \r\n        var tokens = rec.getTokens();\r\n        var termData = [];\r\n        var docData = [];\r\n        tokens.forEach(function(token) {\r\n        \tvar freq = token.get('rawFreq');\r\n        \tvar category = token.get('category');\r\n        \tif (category === undefined) {\r\n        \t\tcategory = 'term'; // some analyses don't define categories\r\n        \t\ttoken.set('category', 'term');\r\n        \t}\r\n        \tvar isTerm = category === 'term';\r\n        \tif (isTerm) {\r\n\t        \tif (freq > maxFreq) maxFreq = freq;\r\n\t        \tif (freq < minFreq) minFreq = freq;\r\n        \t}\r\n        \tif (this.getTermStore().findExact('term', token.get('term') === -1)) {\r\n        \t\tthis.getTermStore().addSorted(token);\r\n        \t}\r\n        \tif (numDims === 3) {\r\n\t\t\t\tvar z = token.get('vector')[2];\r\n\t\t\t\tif (z !== undefined) {\r\n\t\t\t\t\tif (z < minFill) minFill = z;\r\n\t\t\t\t\tif (z > maxFill) maxFill = z;\r\n\t\t\t\t}\r\n\t\t\t}\r\n        \tvar tokenData = {\r\n        \t\tx: token.get('vector')[0], y: token.get('vector')[1] || 0, z: token.get('vector')[2] || 0,\r\n    \t\t\tterm: token.get('term'), rawFreq: freq, relativeFreq: token.get('relativeFreq'), cluster: token.get('cluster'), category: category,\r\n    \t\t\tdisabled: false\r\n        \t};\r\n        \tif (!isTerm) {\r\n        \t\tif (token.get('category') === 'bin') {\r\n        \t\t\ttokenData.term = tokenData.title = \"Bin \"+token.get('docIndex');\r\n        \t\t} else {\r\n\t        \t\ttokenData.docIndex = token.get('docIndex');\r\n\t        \t\tvar doc = this.getCorpus().getDocument(tokenData.docIndex);\r\n\t        \t\tif (doc !== null) {\r\n\t\t        \t\ttokenData.term = doc.getShortTitle();\r\n\t\t        \t\ttokenData.title = doc.getTitle();\r\n\t        \t\t}\r\n        \t\t}\r\n        \t\tdocData.push(tokenData);\r\n        \t} else {\r\n        \t\ttermData.push(tokenData);\r\n        \t}\r\n        }, this);\r\n        \r\n        var newCount = this.getTermStore().getCount();\r\n        this.queryById('limit').setRawValue(newCount);\r\n        this.setApiParam('limit', newCount);\r\n        \r\n        \r\n    \tvar termSeriesStore = Ext.create('Ext.data.JsonStore', {\r\n    \t\tfields: ['term', 'x', 'y', 'z', 'rawFreq', 'relativeFreq', 'cluster', 'category', 'docIndex', 'disabled'],\r\n    \t\tdata: termData\r\n    \t});\r\n    \tvar docSeriesStore = Ext.create('Ext.data.JsonStore', {\r\n    \t\tfields: ['term', 'x', 'y', 'z', 'rawFreq', 'relativeFreq', 'cluster', 'category', 'docIndex', 'disabled'],\r\n    \t\tdata: docData\r\n    \t});\r\n    \t\r\n    \tvar config = {\r\n        \titemId: 'chart',\r\n        \txtype: 'cartesian',\r\n        \tinteractions: ['crosszoom','panzoom','itemhighlight'],\r\n        \tplugins: {\r\n                ptype: 'chartitemevents'\r\n            },\r\n        \taxes: [{\r\n        \t\ttype: 'numeric',\r\n        \t\tposition: 'bottom',\r\n        \t\tfields: ['x'],\r\n        \t\tlabel: {\r\n                    rotate:{degrees:-30}\r\n            \t}\r\n        \t},{\r\n        \t\ttype: 'numeric',\r\n        \t\tposition: 'left',\r\n        \t\tfields: ['y']\r\n        \t}],\r\n        \tsprites: [{\r\n        \t\ttype: 'text',\r\n        \t\ttext: summary,\r\n        \t\tx: 70,\r\n        \t\ty: 70\r\n        \t}],\r\n        \tinnerPadding: {top: 25, right: 25, bottom: 25, left: 25},\r\n        \tseries: [{\r\n        \t\ttype: 'customScatter',\r\n        \t\txField: 'x',\r\n        \t\tyField: 'y',\r\n        \t\tstore: termSeriesStore,\r\n        \t\tlabel: {\r\n        \t\t\tfont: '14px Helvetica',\r\n        \t\t\tfield: 'term',\r\n        \t\t\tdisplay: 'over'\r\n        \t\t},\r\n        \t\ttooltip: {\r\n        \t\t\ttrackMouse: true,\r\n        \t\t\tstyle: 'background: #fff',\r\n        \t\t\trenderer: function (toolTip, record, ctx) {\r\n        \t\t\t\ttoolTip.setHtml(that.tokenFreqTipTemplate.apply([record.get('term'),record.get('rawFreq'),record.get('relativeFreq')]));\r\n        \t\t\t}\r\n        \t\t},\r\n        \t\tmarker: {\r\n        \t\t    type: 'circle'\r\n        \t\t},\r\n        \t\thighlight: {\r\n        \t\t\tfillStyle: 'yellow',\r\n                    strokeStyle: 'black'\r\n        \t\t},\r\n        \t\trenderer: function (sprite, config, rendererData, index) {\r\n    \t\t\t\tvar store = rendererData.store;\r\n    \t\t\t\tvar item = store.getAt(index);\r\n    \t\t\t\tif (item !== null) {\r\n\t    \t\t\t\tvar clusterIndex = item.get('cluster');\r\n\t    \t\t\t\tvar scatterplot = that;\r\n\t    \t\t\t\t\r\n\t    \t\t\t\tif (clusterIndex === -1) {\r\n\t    \t\t\t\t\t// no clusters were specified in initial call\r\n\t    \t\t\t\t\tclusterIndex = 0;\r\n\t    \t\t\t\t}\r\n\t    \t\t\t\t\r\n\t    \t\t\t\tvar fillAlpha = 0.65;\r\n\t    \t\t\t\tvar strokeAlpha = 1;\r\n\t    \t\t\t\tif (item.get('disabled') === true) {\r\n\t    \t\t\t\t\tfillAlpha = 0.1;\r\n\t    \t\t\t\t\tstrokeAlpha = 0.1;\r\n\t    \t\t\t\t} else if (numDims === 3 && item.get('z')) {\r\n\t    \t\t\t\t\tfillAlpha = scatterplot.interpolate(item.get('z'), minFill, maxFill, 0, 1);\r\n\t    \t\t\t\t}\r\n\t    \t\t\t\tvar color = scatterplot.getApplication().getColor(clusterIndex);\r\n\t    \t\t\t\tconfig.fillStyle = 'rgba('+color.join(',')+','+fillAlpha+')';\r\n\t    \t\t\t\tconfig.strokeStyle = 'rgba('+color.join(',')+','+strokeAlpha+')';\r\n\t    \t\t\t\t\r\n\t    \t\t\t\tvar freq = item.get('rawFreq');\r\n\t    \t\t\t\tvar radius = scatterplot.interpolate(freq, minFreq, maxFreq, 2, 20);\r\n\t    \t\t\t\tconfig.radius = radius;\r\n    \t\t\t\t}\r\n    \t\t\t},\r\n    \t\t\tscope: this\r\n        \t},{\r\n        \t\ttype: 'customScatter',\r\n        \t\txField: 'x',\r\n        \t\tyField: 'y',\r\n        \t\tstore: docSeriesStore,\r\n        \t\tlabel: {\r\n        \t\t\tfont: '14px Helvetica',\r\n        \t\t\tfield: 'term',\r\n        \t\t\tdisplay: 'over',\r\n        \t\t\tcolor: this.getDefaultDocColor(true)\r\n        \t\t},\r\n        \t\ttooltip: {\r\n        \t\t\ttrackMouse: true,\r\n        \t\t\tstyle: 'background: #fff',\r\n        \t\t\trenderer: function (toolTip, record, ctx) {\r\n        \t\t\t\ttoolTip.setHtml(that.docFreqTipTemplate.apply([record.get('title'),record.get('rawFreq')]));\r\n        \t\t\t}\r\n        \t\t},\r\n        \t\tmarker: {\r\n        \t\t    type: 'diamond'\r\n        \t\t},\r\n        \t\thighlight: {\r\n        \t\t\tfillStyle: 'yellow',\r\n                    strokeStyle: 'black'\r\n        \t\t},\r\n        \t\trenderer: function (sprite, config, rendererData, index) {\r\n    \t\t\t\tvar store = rendererData.store;\r\n    \t\t\t\tvar item = store.getAt(index);\r\n    \t\t\t\tif (item !== null) {\r\n\t    \t\t\t\tvar clusterIndex = item.get('cluster');\r\n\t    \t\t\t\tvar scatterplot = that;\r\n\t    \t\t\t\t\r\n\t    \t\t\t\tvar color;\r\n\t    \t\t\t\tif (clusterIndex === -1 || scatterplot.getApiParam('analysis') !== 'docSim') {\r\n\t    \t\t\t\t\tcolor = scatterplot.getDefaultDocColor();\r\n\t    \t\t\t\t} else {\r\n\t    \t\t\t\t\tcolor = scatterplot.getApplication().getColor(clusterIndex);\t\r\n\t    \t\t\t\t}\r\n\t    \t\t\t\t\r\n\t    \t\t\t\tvar a = 0.65;\r\n\t    \t\t\t\tif (numDims === 3 && item.get('z')) {\r\n\t    \t\t\t\t\ta = scatterplot.interpolate(item.get('z'), minFill, maxFill, 0, 1);\r\n\t    \t\t\t\t}\r\n\t    \t\t\t\t\r\n\t    \t\t\t\tconfig.fillStyle = 'rgba('+color.join(',')+','+a+')';\r\n\t    \t\t\t\tconfig.strokeStyle = 'rgba('+color.join(',')+',1)';\r\n\t    \t\t\t\tconfig.radius = 5;\r\n    \t\t\t\t}\r\n    \t\t\t},\r\n    \t\t\tscope: this\r\n        \t\t\r\n        \t\t\r\n        \t}],\r\n        \tlisteners: {\r\n        \t\titemclick: function(chart, item, event) {\r\n        \t\t\tvar data = item.record.data;\r\n        \t\t\tif (data.category === 'doc') {\r\n        \t\t\t\tvar record = this.getCorpus().getDocument(data.docIndex);\r\n\t            \t\tthis.getApplication().dispatchEvent('documentsClicked', this, [record]);\r\n        \t\t\t} else if (data.category === 'term') {\r\n\t        \t\t\tvar record = Ext.create('Voyant.data.model.CorpusTerm', data);\r\n\t            \t\tthis.getApplication().dispatchEvent('corpusTermsClicked', this, [record]);\r\n        \t\t\t}\r\n        \t\t},\r\n        \t\trender: function(chart) {\r\n        \t\t\tchart.body.on('contextmenu', function(event, target) {\r\n\t        \t\t\tevent.preventDefault();\r\n\t        \t\t\t\r\n\t\t            \tvar xy = event.getXY();\r\n\t\t            \tvar parentXY = Ext.fly(target).getXY();\r\n\t\t            \tvar x = xy[0] - parentXY[0];\r\n\t\t            \tvar y = xy[1] - parentXY[1];\r\n\t\t            \tvar chartItem = this.down('#chart').getItemForPoint(x,y);\r\n\t\t            \tif (chartItem != null && chartItem.record.get('category') === 'term') {\r\n\t\t            \t\tvar series = this.down('#chart').getSeries();\r\n\t\t            \t\tseries[0].disableToolTips();\r\n\t\t            \t\tseries[1].disableToolTips();\r\n\t\t            \t\t\r\n\t\t            \t\tvar term = chartItem.record.get('term');\r\n\t\t            \t\t\r\n\t\t            \t\tvar text = (new Ext.Template(this.localize('removeTerm'))).apply([term]);\r\n\t\t            \t\tthis.getChartMenu().queryById('remove').setText(text);\r\n\t\t            \t\ttext = (new Ext.Template(this.localize('nearbyTerm'))).apply([term]);\r\n\t\t            \t\tvar nearby = this.getChartMenu().queryById('nearby');\r\n\t\t            \t\tnearby.setText(text);\r\n\t\t            \t\tnearby.setDisabled(this.getApiParam('analysis') === 'tsne');\r\n\t\t            \t\t\r\n\t\t            \t\tthis.getChartMenu().on('click', function(menu, item) {\r\n\t\t            \t\t\tif (item !== undefined) {\r\n\t\t            \t\t\t\tvar term = chartItem.record.get('term');\r\n\t\t\t            \t\t\tif (item.getItemId() === 'nearby') {\r\n\t\t\t            \t\t\t\tthis.getNearbyForTerm(term);\r\n\t\t\t            \t\t\t} else {\r\n\t\t\t            \t\t\t\tthis.removeTerm(term);\r\n\t\t\t            \t\t\t}\r\n\t\t            \t\t\t}\r\n\t\t            \t\t}, this, {single: true});\r\n\t\t            \t\tthis.getChartMenu().showAt(xy);\r\n\t\t            \t}\r\n\t\t            }, this);\r\n        \t\t},\r\n        \t\tscope: this\r\n        \t}\r\n        };\r\n    \t\r\n    \tvar chart = Ext.create('Ext.chart.CartesianChart', config);\r\n    \tthis.queryById('chartParent').insert(0, chart);\r\n    \t\r\n    \tthis.queryById('chartParent').unmask();\r\n    \t\r\n    \tthis.doLabels();\r\n    \t\r\n    \tif (this.getNewTerm() !== null) {\r\n        \tthis.selectTerm(this.getNewTerm()[0]);\r\n        \tthis.setNewTerm(null);\r\n        }\r\n    },\r\n    \r\n    getDefaultDocColor: function(returnHex) {\r\n    \tvar color = this.getApplication().getColor(6, returnHex);\r\n    \treturn color;\r\n    },\r\n    \r\n    doLabels: function() {\r\n    \tvar chart = this.queryById('chart');\r\n    \tvar series = chart.getSeries();\r\n    \tvar summary = chart.getSurface('chart').getItems()[0];\r\n    \tvar labels = this.getApiParam(\"label\");\r\n    \tif (labels.indexOf(\"summary\")>-1) {summary.show();}\r\n    \telse {summary.hide();}\r\n    \tif (labels.indexOf(\"terms\")>-1) {series[0].getLabel().show();}\r\n    \telse {series[0].getLabel().hide();}\r\n    \tif (labels.indexOf(\"docs\")>-1) {series[1].getLabel().show();}\r\n    \telse {series[1].getLabel().hide();}\r\n    },\r\n    \r\n    selectTerm: function(term, isDoc) {\r\n    \tvar chart = this.down('#chart');\r\n    \tif (chart !== null) {\r\n\t    \tif (term === undefined) {\r\n\t\t\t\tchart.getSeries()[0].setHighlightItem(null);\r\n\t\t\t\tchart.getSeries()[1].setHighlightItem(null);\r\n\t    \t} else {\r\n\t\t    \tvar series, index;\r\n\t\t    \tif (isDoc === true) {\r\n\t\t    \t\tseries = chart.getSeries()[1];\r\n\t\t\t    \tindex = series.getStore().findExact('title', term);\r\n\t\t    \t} else {\r\n\t\t\t    \tseries = chart.getSeries()[0];\r\n\t\t\t    \tindex = series.getStore().findExact('term', term);\r\n\t\t    \t}\r\n\t\t    \tif (index !== -1) {\r\n\t\t    \t\tvar record = series.getStore().getAt(index);\r\n\t\t    \t\tvar sprite = series.getSprites()[0];\r\n\t\t    \t\t// constructing series item, like in the chart series source\r\n\t\t    \t\tvar item = {\r\n\t\t\t\t\t\tseries: series,\r\n\t\t                category: series.getItemInstancing() ? 'items' : 'markers',\r\n\t\t                index: index,\r\n\t\t                record: record,\r\n\t\t                field: series.getYField(),\r\n\t\t                sprite: sprite\r\n\t\t    \t\t};\r\n\t\t    \t\tseries.setHighlightItem(item);\r\n\t\t    \t\tif (isDoc) {\r\n\t\t    \t\t\tchart.getSeries()[0].setHighlightItem(null);\r\n\t\t    \t\t} else {\r\n\t\t    \t\t\tchart.getSeries()[1].setHighlightItem(null);\r\n\t\t    \t\t}\r\n\t\t    \t\t\r\n\t\t    \t\tvar point = this.getPointFromIndex(series, index);\r\n\t\t    \t\tthis.setHighlightData({x: point[0], y: point[1], r: 50});\r\n\t\t    \t\t\r\n\t\t    \t\tif (this.getHighlightTask() == null) {\r\n\t\t    \t\t\tthis.setHighlightTask(Ext.TaskManager.newTask({\r\n\t\t        \t\t\trun: this.doHighlight,\r\n\t\t        \t\t\tscope: this,\r\n\t\t        \t\t\tinterval: 25,\r\n\t\t        \t\t\trepeat: this.getHighlightData().r\r\n\t\t        \t\t}));\r\n\t\t    \t\t}\r\n\t\t    \t\tthis.getHighlightTask().restart();\r\n\t\t    \t}\r\n\t    \t}\r\n    \t}\r\n    },\r\n    \r\n    getPointFromIndex: function(series, index) {\r\n\t\tvar sprite = series.getSprites()[0];\r\n\t\tif (sprite.surfaceMatrix !== null) {\r\n\t\t\tvar matrix = sprite.attr.matrix.clone().prependMatrix(sprite.surfaceMatrix);\r\n\t\t\tvar dataX = sprite.attr.dataX[index];\r\n\t\t\tvar dataY = sprite.attr.dataY[index];\r\n\t\t\treturn matrix.transformPoint([dataX, dataY]);\r\n\t\t} else {\r\n\t\t\treturn [0,0];\r\n\t\t}\r\n    },\r\n    \r\n    doHighlight: function() {\r\n    \tvar chart = this.down('#chart');\r\n    \tif (this.getHighlightData().r > 0) {\r\n\t    \tvar surf = chart.getSurface();\r\n\t\t\tvar highlight = null;\r\n\t\t\tvar items = surf.getItems();\r\n\t\t\tfor (var i = 0; i < items.length; i++) {\r\n\t\t\t\tvar item = items[i];\r\n\t\t\t\tif (item.id == 'customHighlight') {\r\n\t\t\t\t\thighlight = item;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (highlight == null) {\r\n\t\t\t\tsurf.add({\r\n\t\t\t\t\tid: 'customHighlight',\r\n\t\t\t\t\ttype: 'circle',\r\n\t\t\t\t\tstrokeStyle: 'red',\r\n\t\t\t\t\tfillStyle: 'none',\r\n\t\t\t\t\tradius: this.getHighlightData().r,\r\n\t\t\t\t\tx: this.getHighlightData().x,\r\n\t\t\t\t\ty: this.getHighlightData().y\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\thighlight.setAttributes({\r\n\t\t\t\t\tx: this.getHighlightData().x,\r\n\t\t\t\t\ty: this.getHighlightData().y,\r\n\t\t\t\t\tradius: this.getHighlightData().r\r\n\t\t\t\t});\r\n\t\t\t\tthis.getHighlightData().r -= 1.5;\r\n\t\t\t\tif (this.getHighlightData().r <= 0) {\r\n\t\t\t\t\tthis.getHighlightData().r = 0;\r\n\t\t\t\t\tsurf.remove(highlight, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tchart.redraw();\r\n    \t}\r\n    },\r\n    \r\n    filterChart: function(query) {\r\n    \tif (Ext.isString(query)) query = [query];\r\n    \tvar reQueries = [];\r\n    \tfor (var i = 0; i < query.length; i++) {\r\n    \t\tvar re = new RegExp(query[i]);\r\n    \t\treQueries.push(re);\r\n    \t}\r\n    \t\r\n    \t// filter terms\r\n    \tvar chart = this.queryById('chart');\r\n    \tvar series0 = chart.getSeries()[0];\r\n    \tvar label0 = series0.getLabel();\r\n    \tseries0.getStore().each(function(item) {\r\n    \t\tvar match = false;\r\n    \t\tif (reQueries.length == 0) match = true;\r\n    \t\telse {\r\n\t    \t\tfor (var i = 0; i < reQueries.length; i++) {\r\n\t    \t\t\tmatch = match || reQueries[i].test(item.get('term'));\r\n\t    \t\t\tif (match) break;\r\n\t    \t\t}\r\n    \t\t}\r\n    \t\titem.set('disabled', !match);\r\n    \t\tvar index = item.store.indexOf(item);\r\n    \t\tlabel0.setAttributesFor(index, {hidden: !match});\r\n    \t}, this);\r\n\r\n\t\tchart.redraw();\r\n    },\r\n    \r\n    getCurrentTerms: function() {\r\n    \tvar terms = [];\r\n    \tthis.getTermStore().each(function(r) {\r\n    \t\tif (r.get('category') === 'term') {\r\n    \t\t\tterms.push(r.get('term'));\r\n    \t\t}\r\n    \t});\r\n    \treturn terms;\r\n    },\r\n    \r\n    getNearbyForTerm: function(term) {\r\n    \tvar limit = Math.max(2000, Math.round(this.getCorpus().getWordTokensCount() / 100));\r\n\t\tthis.setApiParams({limit: limit, target: term});\r\n\t\tthis.loadFromApis();\r\n\t\tthis.setApiParam('target', undefined);\r\n    },\r\n    \r\n    removeTerm: function(term) {\r\n    \tvar series = this.down('#chart').getSeries()[0];\r\n    \tvar index = series.getStore().findExact('term', term);\r\n    \tseries.getStore().removeAt(index);\r\n    \t\r\n    \tindex = this.getTermStore().findExact('term', term);\r\n    \tthis.getTermStore().removeAt(index);\r\n    \t\r\n    \tvar newCount = this.getTermStore().getCount();\r\n        this.queryById('limit').setRawValue(newCount);\r\n    },\r\n    \r\n    loadFromApis: function(keepCurrentTerms) {\r\n    \tthis.queryById('chartParent').mask(this.localize('analyzing'));\r\n    \t\r\n    \tvar params = {};\r\n    \tvar terms = this.getCurrentTerms();\r\n    \tif (this.getNewTerm() !== null) {\r\n    \t\tterms = terms.concat(this.getNewTerm());\r\n    \t\tthis.setApiParam('limit', terms.length);\r\n    \t}\r\n    \tif (terms.length > 0) {\r\n    \t\tif (this.getNewTerm() !== null || keepCurrentTerms) {\r\n    \t\t\tparams.query = terms.join(',');\r\n    \t\t}\r\n//    \t\tparams.term = terms;\r\n    \t}\r\n    \tExt.apply(params, this.getApiParams());\r\n    \tif (params.target != null) {\r\n    \t\tparams.term = terms;\r\n    \t}\r\n    \tif (params.analysis === 'pca') {\r\n    \t\tthis.getPcaStore().load({\r\n\t    \t\tparams: params\r\n\t    \t});\r\n    \t} else if (params.analysis === 'tsne'){\r\n    \t\tthis.getTsneStore().load({\r\n\t    \t\tparams: params\r\n\t    \t});\r\n    \t} else if (params.analysis === 'docSim'){\r\n    \t\tthis.getDocSimStore().load({\r\n\t    \t\tparams: params\r\n\t    \t});\r\n    \t} else {\r\n    \t\tthis.getCaStore().load({\r\n\t    \t\tparams: params\r\n\t    \t});\r\n    \t}\r\n    },\r\n    \r\n    interpolate: function(lambda, minSrc, maxSrc, minDst, maxDst) {\r\n        return minDst + (maxDst - minDst) * Math.max(0, Math.min(1, (lambda - minSrc) / (maxSrc - minSrc)));\r\n    }\r\n});\r\n\r\n/*\r\n * Adds tool tip disabling.\r\n */\r\nExt.define('Ext.chart.series.CustomScatter', {\r\n\textend: 'Ext.chart.series.Scatter',\r\n\t\r\n\talias: 'series.customScatter',\r\n    type: 'customScatter',\r\n    seriesType: 'scatterSeries',\r\n\t\r\n\ttipsDisabled: false,\r\n\t\r\n\tenableToolTips: function() {\r\n\t\tthis.tipsDisabled = false;\r\n\t},\r\n\t\r\n\tdisableToolTips: function() {\r\n\t\tthis.tipsDisabled = true;\r\n\t},\r\n\t\r\n    showTip: function (item, xy) {\r\n    \tif (this.tipsDisabled) {\r\n    \t\treturn;\r\n    \t}\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    }\r\n});","Ext.define('Voyant.panel.StreamGraph', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.streamgraph',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tlimit: 5,\n    \t\tstopList: 'auto',\n    \t\tquery: undefined,\n    \t\twithDistributions: 'relative',\n    \t\tbins: 50,\n    \t\tdocIndex: undefined,\n    \t\tdocId: undefined\n    \t},\n\t\tglyph: 'xf1fe@FontAwesome'\n    },\n    \n    config: {\n    \tvisLayout: undefined,\n    \tvis: undefined,\n    \tmode: 'corpus',\n    \t\n    \tlayerData: undefined,\n    \t\n    \tgraphId: undefined,\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n    \n    graphMargin: {top: 20, right: 60, bottom: 110, left: 80},\n    \n    MODE_CORPUS: 'corpus',\n    MODE_DOCUMENT: 'document',\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.setGraphId(Ext.id(null, 'streamgraph_'));\n    },\n    \n    initComponent: function() {\n        var me = this;\n        \n        Ext.apply(me, {\n    \t\ttitle: this.localize('title'),\n    \t\ttbar: new Ext.Toolbar({\n                overflowHandler: 'scroller',\n\t\t\t\titems: ['->',{\n\t\t\t\t\txtype: 'legend',\n\t\t\t\t\tstore: new Ext.data.JsonStore({\n\t\t\t\t\t\tfields: ['name', 'mark', 'active']\n\t\t\t\t\t}),\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\titemclick: function(view, record, el, index) {\n\t\t\t\t\t\t\tvar isActive = Ext.fly(el.firstElementChild).hasCls('x-legend-inactive');\n\t\t\t\t\t\t\trecord.set('active', isActive);\n\t\t\t\t\t\t\tvar terms = this.getCurrentTerms();\n\t\t\t\t\t\t\tthis.setApiParams({query: terms, limit: terms.length, stopList: undefined, categories: this.getApiParam(\"categories\")});\n\t\t\t\t\t\t\tthis.loadFromCorpus();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},'->']\n\t\t\t}),\n\t\t\tbbar: {\n                overflowHandler: 'scroller',\n\t\t\t\titems: [{\n                \txtype: 'querysearchfield'\n                },{\n\t            \txtype: 'button',\n\t            \ttext: this.localize('clearTerms'),\n\t            \thandler: function() {\n\t            \t\tthis.setApiParams({query: undefined});\n\t            \t\tthis.loadFromRecords([]);\n\t            \t},\n\t            \tscope: this\n\t            },{\n\t            \txtype: 'corpusdocumentselector',\n\t            \tsingleSelect: true\n\t            },{\n\t            \ttext: this.localize('freqsMode'),\n\t\t\t\t\tglyph: 'xf201@FontAwesome',\n\t\t\t\t    tooltip: this.localize('freqsModeTip'),\n\t\t\t\t    menu: {\n\t\t\t\t    \titems: [{\n\t\t\t\t               text: this.localize('relativeFrequencies'),\n\t\t\t\t               checked: true,\n\t\t\t\t               itemId: 'relative',\n\t\t\t\t               group: 'freqsMode',\n\t\t\t\t               checkHandler: function(item, checked) {\n\t\t\t\t            \t   if (checked) {\n\t\t\t\t                \t   this.setApiParam('withDistributions', 'relative');\n\t\t\t\t                \t   this.loadFromCorpus();\n\t\t\t\t            \t   }\n\t\t\t\t               },\n\t\t\t\t               scope: this\n\t\t\t\t           }, {\n\t\t\t\t               text: this.localize('rawFrequencies'),\n\t\t\t\t               checked: false,\n\t\t\t\t               itemId: 'raw',\n\t\t\t\t               group: 'freqsMode',\n\t\t\t\t               checkHandler: function(item, checked) {\n\t\t\t\t            \t   if (checked) {\n\t\t\t\t                \t   this.setApiParam('withDistributions', 'raw');\n\t\t\t\t                \t   this.loadFromCorpus();\n\t\t\t\t            \t   }\n\t\t\t\t               },\n\t\t\t\t               scope: this\n\t\t\t           }]\n\t\t\t\t    }\n\t            },{\n\t            \txtype: 'slider',\n\t            \titemId: 'segmentsSlider',\n\t            \tfieldLabel: this.localize('segments'),\n\t            \tlabelAlign: 'right',\n\t            \tlabelWidth: 70,\n\t            \twidth: 150,\n\t            \tincrement: 10,\n\t            \tminValue: 10,\n\t            \tmaxValue: 300,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(this.getApiParam('bins'));\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({bins: newvalue});\n\t            \t\t\tthis.loadFromCorpus();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t            }]\n\t\t\t}\n        });\n        \n        this.on('loadedCorpus', function(src, corpus) {\n        \tif (this.getCorpus().getDocumentsCount() == 1 && this.getMode() != this.MODE_DOCUMENT) {\n\t\t\t\tthis.setMode(this.MODE_DOCUMENT);\n\t\t\t}\n\t\t\tif (!('bins' in this.getModifiedApiParams())) {\n\t\t\t\tif (this.getMode() == this.MODE_CORPUS) {\n\t\t\t\t\tvar count = corpus.getDocumentsCount();\n\t\t\t\t\tvar binsMax = 100;\n\t\t\t\t\tthis.setApiParam('bins', count > binsMax ? binsMax : count);\n\t\t\t\t}\n\t\t\t}\n    \t\tif (this.isVisible()) {\n    \t\t\tthis.loadFromCorpus();\n    \t\t}\n        }, this);\n        \n        this.on('corpusSelected', function(src, corpus) {\n    \t\tif (src.isXType('corpusdocumentselector')) {\n    \t\t\tthis.setMode(this.MODE_CORPUS);\n    \t\t\tthis.setApiParams({docId: undefined, docIndex: undefined});\n    \t\t\tthis.setCorpus(corpus);\n        \t\tthis.loadFromCorpus();\n    \t\t}\n    \t});\n        \n        this.on('documentSelected', function(src, doc) {\n        \tvar docId = doc.getId();\n        \tthis.setApiParam('docId', docId);\n        \tthis.loadFromDocumentTerms();\n        }, this);\n        \n\t\tthis.on('query', function(src, query) {\n        \tvar terms = this.getCurrentTerms();\n        \tterms.push(query);\n        \tthis.setApiParams({query: terms, limit: terms.length, stopList: undefined});\n        \tif (this.getMode() === this.MODE_DOCUMENT) {\n        \t\tthis.loadFromDocumentTerms();\n        \t} else {\n        \t\tthis.loadFromCorpusTerms(this.getCorpus().getCorpusTerms());\n        \t}\n        }, this);\n\t\t\n        this.on('resize', this.resizeGraph, this);\n        \n        this.on('boxready', this.initGraph, this);\n        \n        me.callParent(arguments);\n    },\n    \n    loadFromCorpus: function() {\n    \tvar corpus = this.getCorpus();\n\t\tif (this.getApiParam('docId') || this.getApiParam('docIndex')) {\n\t\t\tthis.loadFromDocumentTerms();\n\t\t} else if (corpus.getDocumentsCount() == 1) {\n\t\t\tthis.loadFromDocument(corpus.getDocument(0));\n\t\t} else {\n\t\t\tthis.loadFromCorpusTerms(corpus.getCorpusTerms());\n\t\t}\n\t},\n\n    loadFromCorpusTerms: function(corpusTerms) {\n    \tvar params = this.getApiParams(['limit','stopList','query','withDistributions','bins','categories']);\n\t\t// ensure that we're not beyond the number of documents\n\t\tif (params.bins && params.bins > this.getCorpus().getDocumentsCount()) {\n\t\t\tparams.bins = this.getCorpus().getDocumentsCount();\n\t\t}\n\t\tcorpusTerms.load({\n\t\t    callback: function(records, operation, success) {\n\t\t    \tif (success) {\n\t\t    \t\tthis.setMode(this.MODE_CORPUS);\n\t\t\t    \tthis.loadFromRecords(records);\n\t\t    \t} else {\n\t\t\t\t\tVoyant.application.showResponseError(this.localize('failedGetCorpusTerms'), operation);\n\t\t    \t}\n\t\t    },\n\t\t    scope: this,\n\t\t    params: params\n    \t});\n    },\n    \n    loadFromDocument: function(document) {\n    \tif (document.then) {\n    \t\tvar me = this;\n    \t\tdocument.then(function(document) {me.loadFromDocument(document);});\n    \t} else {\n    \t\tvar ids = [];\n    \t\tif (Ext.getClassName(document)==\"Voyant.data.model.Document\") {\n        \t\tthis.setApiParams({\n        \t\t\tdocIndex: undefined,\n        \t\t\tquery: undefined,\n        \t\t\tdocId: document.getId()\n        \t\t});\n        \t\tif (this.isVisible()) {\n                \tthis.loadFromDocumentTerms();\n        \t\t}\n    \t\t}\n    \t}\n    },\n    \n    loadFromDocumentTerms: function(documentTerms) {\n    \tif (this.getCorpus()) {\n        \tdocumentTerms = documentTerms || this.getCorpus().getDocumentTerms({autoLoad: false});\n    \t\tdocumentTerms.load({\n    \t\t    callback: function(records, operation, success) {\n    \t\t    \tif (success) {\n    \t\t    \t\tthis.setMode(this.MODE_DOCUMENT);\n    \t\t    \t\tthis.loadFromRecords(records);\n    \t\t    \t}\n    \t\t    \telse {\n    \t\t\t\t\tVoyant.application.showResponseError(this.localize('failedGetDocumentTerms'), operation);\n    \t\t    \t}\n    \t\t    },\n    \t\t    scope: this,\n    \t\t    params: this.getApiParams(['docId','docIndex','limit','stopList','query','withDistributions','bins','categories'])\n        \t});\n    \t}\n    },\n    \n    loadFromRecords: function(records) {\n    \tvar legendData = [];\n    \tvar layers = [];\n    \trecords.forEach(function(record, index) {\n    \t\tvar key = record.getTerm();\n    \t\tvar values = record.get('distributions');\n    \t\tfor (var i = 0; i < values.length; i++) {\n    \t\t\tif (layers[i] === undefined) {\n    \t\t\t\tlayers[i] = {};\n    \t\t\t}\n    \t\t\tlayers[i][key] = values[i];\n    \t\t}\n    \t\tlegendData.push({id: key, name: key, mark: this.getApplication().getColorForTerm(key, true), active: true});\n    \t}, this);\n    \t\n    \tthis.setLayerData(layers);\n    \t\n    \tthis.down('[xtype=legend]').getStore().loadData(legendData);\n\n    \tthis.doLayout();\n    },\n    \n    doLayout: function(layers) {\n    \tvar layers = this.getLayerData();\n    \tif (layers !== undefined) {\n    \t\tvar me = this;\n    \t\t\n\t    \tvar keys = [];\n\t    \tthis.down('[xtype=legend]').getStore().each(function(r) { keys.push(r.getId()); });\n\t    \t\n\t    \tvar steps;\n\t    \tif (this.getMode() === this.MODE_DOCUMENT) {\n\t    \t\tsteps = this.getApiParam('bins');\n\t    \t} else {\n\t    \t\tvar bins = this.getApiParam('bins');\n\t    \t\tvar docsCount = this.getCorpus().getDocumentsCount();\n\t    \t\t\n\t    \t\tsteps = bins < docsCount ? bins : docsCount;\n\t    \t}\n\t    \t\n\t    \tthis.getVisLayout().keys(keys);\n\t    \tvar processedLayers = this.getVisLayout()(layers);\n\t    \t\n\t    \tvar width = this.body.down('svg').getWidth() - this.graphMargin.left - this.graphMargin.right;\n\t    \tvar x = d3.scaleLinear().domain([0, steps-1]).range([0, width]);\n\t    \t\n\t    \tvar min = d3.min(processedLayers, function(layer) {\n\t    \t\treturn d3.min(layer, function(d) { return d[0]; });\n\t    \t});\n\t    \tvar max = d3.max(processedLayers, function(layer) {\n\t    \t\treturn d3.max(layer, function(d) { return d[1]; });\n\t    \t});\n\t    \t\n\t    \tvar height = this.body.down('svg').getHeight() - this.graphMargin.top - this.graphMargin.bottom;\n\t    \tvar y = d3.scaleLinear().domain([min, max]).range([height, 0]);\n\t    \t\n\t    \tvar area = d3.area()\n\t\t    \t.x(function(d, i) { return x(i); })\n\t\t\t    .y0(function(d) { return y(d[0]); })\n\t\t\t    .y1(function(d) { return y(d[1]); })\n\t\t\t    .curve(d3.curveCatmullRom);\n\t    \t\n\t    \tvar xAxis;\n\t    \tif (this.getMode() === this.MODE_CORPUS) {\n\t    \t\tvar xAxisDomain = [];\n\t    \t\tthis.getCorpus().getDocuments().each(function(doc) {\n\t    \t\t\txAxisDomain.push(doc.getTinyLabel());\n\t    \t\t});\n\t    \t\tvar xAxisScale = d3.scalePoint().domain(xAxisDomain).range([0, width]);    \t\t\n\t    \t\txAxis = d3.axisBottom(xAxisScale);\n\t    \t} else {\n\t    \t\txAxis = d3.axisBottom(x);\n\t    \t}\n\t    \t\n\t    \tvar yAxis = d3.axisLeft(y);\n\t    \t\n\t    \tvar paths = this.getVis().selectAll('path').data(processedLayers, function(d) { return d; });\n\t    \t\n\t    \tpaths\n\t    \t\t.attr('d', function(d) { return area(d); })\n\t\t    \t.style('fill', function(d) { return me.getApplication().getColorForTerm(d.key, true); })\n\t\t\t\t.select('title').text(function (d) { return d.key; });\n\t    \t\n\t    \tpaths.enter().append('path')\n\t\t\t\t.attr('d', function(d) { return area(d); })\n\t\t\t\t.style('fill', function(d) { return me.getApplication().getColorForTerm(d.key, true); })\n\t\t\t\t.append('title').text(function (d) { return d.key; });\n\t    \t\n\t    \tpaths.exit().remove();\n\t    \t\n\t    \tthis.getVis().selectAll('g.axis').remove();\n\t    \t\n\t    \tthis.getVis().append('g')\n\t    \t\t.attr('class', 'axis x')\n\t    \t\t.attr('transform', 'translate(0,'+height+')')\n\t    \t\t.call(xAxis);\n\t    \t\n\t    \tvar xAxisText;\n\t    \tif (this.getMode() === this.MODE_CORPUS) {\n\t    \t\tthis.getVis().select('g.axis.x').selectAll('text').each(function() {\n\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t.attr('text-anchor', 'end')\n\t\t\t\t\t\t.attr('transform', 'rotate(-45)');\n\t    \t\t});\n\t    \t\t\n\t    \t\txAxisText = this.localize('documents');\n\t    \t} else {\n\t    \t\txAxisText = this.localize('documentSegments');\n\t    \t}\n\t    \tthis.getVis().select('g.axis.x').append(\"text\")\n\t\t\t\t.attr('text-anchor', 'middle')\n\t\t\t\t.attr('transform', 'translate('+width/2+', '+(this.graphMargin.bottom-30)+')')\n\t\t\t\t.attr('fill', '#000')\n\t\t\t\t.text(xAxisText);\n\t    \t\n\t    \tthis.getVis().append('g')\n\t\t\t\t.attr('class', 'axis y')\n\t\t\t\t.attr('transform', 'translate(0,0)')\n\t\t\t\t.call(yAxis);\n\t    \t\n\t    \tvar yAxisText;\n\t    \tif (this.getApiParam('withDistributions') === 'raw') {\n\t    \t\tyAxisText = this.localize('rawFrequencies');\n\t    \t} else {\n\t    \t\tyAxisText = this.localize('relativeFrequencies');\n\t    \t}\n\t    \tthis.getVis().select('g.axis.y').append(\"text\")\n\t\t\t\t.attr('text-anchor', 'middle')\n\t\t\t\t.attr('transform', 'translate(-'+(this.graphMargin.left-20)+', '+height/2+') rotate(-90)')\n\t\t\t\t.attr('fill', '#000')\n\t\t\t\t.text(yAxisText);\n    \t}\n    },\n    \n\tgetCurrentTerms: function() {\n    \tvar terms = [];\n    \tthis.down('[xtype=legend]').getStore().each(function(record) {\n    \t\tif (record.get('active')) {\n    \t\t\tterms.push(record.get('name'));\n    \t\t}\n    \t}, this);\n    \treturn terms;\n    },\n\t\n    initGraph: function() {\n    \tif (this.getVisLayout() === undefined) {\n\t    \tvar el = this.getLayout().getRenderTarget();\n\t    \t\n\t    \tthis.setVisLayout(d3.stack().offset(d3.stackOffsetWiggle).order(d3.stackOrderInsideOut));\n\t\t\tthis.setVis(d3.select(el.dom).append('svg').attr('id',this.getGraphId()).append('g').attr('transform', 'translate('+this.graphMargin.left+','+this.graphMargin.top+')'));\n\t\t\t\n\t\t\tthis.resizeGraph();\n    \t}\n    },\n    \n    resizeGraph: function() {\n    \tvar el = this.body;//getLayout().getRenderTarget();\n    \tvar width = el.getWidth();\n\t\tvar height = el.getHeight();\n\t\t\n\t\td3.select(el.dom).select('svg').attr('width', width).attr('height', height);\n\t\t\n\t\tthis.doLayout();\n    }\n});\n\n","/**\n * The Summary panel provides an overview of a corpus, and the content will\n * depend on whether the corpus includes one document or many.\n */\nExt.define('Voyant.panel.Summary', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.summary',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String} stopList A list of words to exclude.\n    \t\t * \n    \t\t * Stopword lists can take one of several forms and they can be combined with commas:\n    \t\t * \n    \t\t * * *auto*: automatically detect the language (this is recommended and the default so it doesn't need to be specified)\n    \t\t * * specially named stopword lists including stop.ar.arabic-lucene.txt, stop.bg.bulgarian-lucene.txt, stop.br.breton-lucene.txt, stop.ca.catalan-lucene.txt, stop.ckb.kurdish-lucene.txt, stop.cn.chinese-lawrence.txt, stop.cz.czech-lucene.txt, stop.de.citelab.txt, stop.de.german.txt, stop.el.greek-lucene.txt, stop.en.glasgow.txt, stop.en.smart.txt, stop.en.taporware.txt, stop.es.spanish.txt, stop.eu.basque-luence.txt, stop.fa.farsi-lucene.txt, stop.fr.steffens.txt, stop.fr.veronis.txt, stop.ga.ga-irish.txt, stop.gl.galician-lucene.txt, stop.hi.hindi-lucene.txt, stop.hu.hungarian.txt, stop.hy.armenian-lucene.txt, stop.id.indonesian-lucene.txt, stop.it.italian.txt, stop.ja.japanese.txt, stop.lt.lithuanian-lucene.txt, stop.lv.latvian-lucene.txt, stop.mu.multi.txt, stop.nl.dutch.txt, stop.no.norwegian.txt, stop.ro.romanian-lucene.txt, stop.se.swedish-long.txt, stop.se.swedish-short.txt, stop.th.thai-lucene.txt, stop.tr.turkish-lucene.txt\n    \t\t * * individual words to be excluded\n    \t\t * * URLs that point to plain text UTF-8 files with one stopword per line (lines with leading hash symbols (#) are skipped)\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\t\n    \t\tstart: 0,\n    \t\t\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} limit The number of items to include in most lists (document length, vocabulary density, most frequent terms).\n    \t\t */\n    \t\tlimit: 5,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} numberOfDocumentsForDistinctiveWords The number of items to include in the list of distinctive words (similar to the limit parameter but specific to distinctive words).\n    \t\t */\n    \t\tnumberOfDocumentsForDistinctiveWords: 10\n    \t},\n\t\tglyph: 'xf1ea@FontAwesome'\n    },\n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}]\n    },\n    autoScroll: true,\n    cls: 'corpus-summary',\n    \n    constructor: function(config ) {\n\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\titems: {\n    \t\t\titemId: 'main',\n    \t\t\tcls: 'main',\n    \t\t\tmargin: 10\n    \t\t},\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n        \t\t\tfieldLabel: this.localize('items'),\n        \t\t\tlabelWidth: 40,\n        \t\t\twidth: 120,\n        \t\t\txtype: 'slider',\n\t            \tincrement: 5,\n\t            \tminValue: 5,\n\t            \tmaxValue: 59,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(this.getApiParam(\"limit\"))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({limit: newvalue});\n\t            \t\t\tthis.loadSummary();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                }]\n    \t\t}]\n    \t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.on(\"afterrender\", function() {\n        \tthis.body.addListener('click', function(e) {\n    \t\t\tvar target = e.getTarget(null, null, true);\n    \t\t\tif (target && target.dom.tagName == 'A') {\n    \t\t\t\tif (target.hasCls('document-id')) {\n    \t\t\t\t\tvar docId = target.getAttribute('val', 'voyant');\n    \t\t\t\t\tvar doc = this.getCorpus().getDocuments().getById(docId);\n    \t\t\t\t\tthis.dispatchEvent('documentsClicked', this, [doc]);\n    \t\t\t\t} else if (target.hasCls('corpus-type')) {\n    \t\t\t\t\tthis.dispatchEvent('termsClicked', this, [target.getHtml()]);\n    \t\t\t\t} else if (target.hasCls('document-type')) {\n    \t\t\t\t\tthis.dispatchEvent('documentIndexTermsClicked', this, [{\n    \t\t\t\t\t\tterm: target.getHtml(),\n    \t\t\t\t\t\tdocIndex: target.getAttribute(\"docIndex\", 'voyant')\n    \t\t\t\t\t}]);\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}, this);\n    \t})\n    \t\n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tif (this.rendered) {\n    \t\t\tthis.loadSummary();\n    \t\t}\n    \t\telse {\n    \t\t\tthis.on(\"afterrender\", function() {\n    \t\t\t\tthis.loadSummary();\n    \t\t\t}, this)\n    \t\t}\n\n    \t});\n    \t\n    \t// if we have a corpus, load it\n    \tif (config && config.corpus) {\n    \t\tthis.fireEvent('loadedCorpus', this, config.corpus);\n    \t}\n    \t\n    \tthis.on(\"resize\", function() {\n    \t\tvar available = this.getWidth()-200;\n    \t\tthis.query(\"sparklineline\").forEach(function(spark) {\n    \t\t\tif (spark.getWidth()>available) {\n    \t\t\t\tspark.setWidth(available);\n    \t\t\t}\n    \t\t})\n    \t}, this)\n    },\n    \n    loadSummary: function() {\n    \t\n    \tvar me = this;\n    \t\n    \tvar main = this.queryById('main');\n    \t\n    \tmain.removeAll();\n    \tmain.add({\n    \t\thtml: this.getCorpus().getString()\n    \t});\n    \t\n    \tvar docs = this.getCorpus().getDocuments().getRange();\n    \tvar limit = this.getApiParam('limit');\n    \t\n    \tif (docs.length>1) {\n    \t\t\n    \t\tdocs.sort(function(d1, d2) {return d2.getLexicalTokensCount()-d1.getLexicalTokensCount()});\n        \tvar docsLengthTpl = new Ext.XTemplate('<tpl for=\".\" between=\"; \"><a href=\"#\" onclick=\"return false\" class=\"document-id\" voyant:val=\"{id}\" data-qtip=\"{title}\">{shortTitle}</a><span style=\"font-size: smaller\"> (<span class=\"info-tip\" data-qtip=\"{valTip}\">{val}</span>)</span></a></tpl>')\n\n        \t\n        \tvar sparkWidth;\n        \tif (docs.length<25) {sparkWidth=docs.length*4;}\n        \telse if (docs.length<50) {sparkWidth=docs.length*2;}\n        \telse if (docs.length>100) {\n        \t\tvar available  = main.getWidth()-200;\n        \t\tsparkWidth = available < docs.length ? docs.length : available;\n        \t}\n        \t\n        \tvar numberOfTerms = this.localize('numberOfTerms');\n        \tmain.add({\n\t    \t\tcls: 'section',\n        \t\titems: [{\n\t\t    \t\tlayout: 'hbox',\n\t\t    \t\talign: 'bottom',\n\t\t    \t\titems: [{\n\t\t    \t\t\thtml: this.localize('docsLength'),\n\t\t    \t\t\tcls: 'header'\n\t\t    \t\t}, {\n\t\t    \t\t\txtype: 'sparklineline',\n\t\t    \t\t\tvalues: this.getCorpus().getDocuments().getRange().map(function(doc) {return doc.getLexicalTokensCount()}),\n\t\t                tipTpl: new Ext.XTemplate('{[this.getDocumentTitle(values.x,values.y)]}', {\n\t\t                \tgetDocumentTitle: function(docIndex, len) {\n\t\t                \t\treturn '('+len+') '+this.panel.getCorpus().getDocument(docIndex).getTitle()\n\t\t                \t},\n\t\t                \tpanel: me \n\t\t                }),\n\t\t    \t\t\theight: 16,\n\t\t    \t\t\twidth: sparkWidth\n\t\t    \t\t}]\n\t\t    \t},{\n\t    \t\t\thtml: '<ul><li>'+this.localize('longest')+\" \"+docsLengthTpl.apply(docs.slice(0, docs.length>limit ? limit : parseInt(docs.length/2)).map(function(doc) {return {\n\t\t\t\t\t\tid: doc.getId(),\n\t\t\t\t\t\tshortTitle: doc.getShortTitle(),\n\t\t\t\t\t\ttitle: doc.getTitle(),\n\t\t\t\t\t\tval: doc.getLexicalTokensCount(),\n\t\t\t\t\t\tvalTip: numberOfTerms\n\t\t\t\t\t}}))+'</li>'+\n\t    \t\t\t\t'<li>'+this.localize('shortest')+\" \"+docsLengthTpl.apply(docs.slice(-(docs.length>limit ? limit : parseInt(docs.length/2))).reverse().map(function(doc) {return {\n\t    \t\t\t\t\tid: doc.getId(),\n\t    \t\t\t\t\tshortTitle: doc.getShortTitle(),\n\t    \t\t\t\t\ttitle: doc.getTitle(),\n\t    \t\t\t\t\tval: doc.getLexicalTokensCount(),\n\t    \t\t\t\t\tvalTip: numberOfTerms\n\t    \t\t\t\t}}))+'</li>'\n\t        \t}]\n        \t})\n        \t\n    \t\tdocs.sort(function(d1, d2) {return d2.getLexicalTypeTokenRatio()-d1.getLexicalTypeTokenRatio()});\n        \tmain.add({\n        \t\tcls: 'section',\n        \t\titems: [{\n\t\t    \t\tlayout: 'hbox',\n\t\t    \t\talign: 'bottom',\n\t\t    \t\tcls: 'section',\n\t\t    \t\titems: [{\n\t\t    \t\t\thtml: this.localize(\"docsDensity\"),\n\t\t    \t\t\tcls: 'header'\n\t\t    \t\t}, {\n\t\t    \t\t\txtype: 'sparklineline',\n\t\t    \t\t\tvalues: this.getCorpus().getDocuments().getRange().map(function(doc) {return Ext.util.Format.number(doc.getLexicalTypeTokenRatio(),'0.000')}),\n\t\t                tipTpl: new Ext.XTemplate('{[this.getDocumentTitle(values.x,values.y)]}', {\n\t\t                \tgetDocumentTitle: function(docIndex, len) {\n\t\t                \t\treturn '('+len+') '+this.panel.getCorpus().getDocument(docIndex).getTitle()\n\t\t                \t},\n\t\t                \tpanel: me \n\t\t                }),\n\t\t    \t\t\theight: 16,\n\t\t    \t\t\twidth: sparkWidth\n\t\t    \t\t}]\n\t\t    \t},{\n\t    \t\t\thtml: '<ul><li>'+this.localize('highest')+docsLengthTpl.apply(docs.slice(0, docs.length>limit ? limit : parseInt(docs.length/2)).map(function(doc) {return {\n\t\t\t\t\t\tid: doc.getId(),\n\t\t\t\t\t\tshortTitle: doc.getShortTitle(),\n\t\t\t\t\t\ttitle: doc.getTitle(),\n\t\t\t\t\t\tval: Ext.util.Format.number(doc.getLexicalTypeTokenRatio(),'0.000'),\n\t\t\t\t\t\tvalTip: numberOfTerms\n\t\t\t\t\t}}))+'</li>'+\n\t    \t\t\t\t'<li>'+this.localize('lowest')+docsLengthTpl.apply(docs.slice(-(docs.length>limit ? limit : parseInt(docs.length/2))).reverse().map(function(doc) {return {\n\t    \t\t\t\t\tid: doc.getId(),\n\t    \t\t\t\t\tshortTitle: doc.getShortTitle(),\n\t    \t\t\t\t\ttitle: doc.getTitle(),\n\t    \t\t\t\t\tval: Ext.util.Format.number(doc.getLexicalTypeTokenRatio(),'0.000'),\n\t    \t\t\t\t\tvalTip: numberOfTerms\n\t    \t\t\t\t}}))+'</li>'\n\t        \t}]\n        \t})\n \n        \t// words per sentence\n    \t\tdocs.sort(function(d1, d2) {return d2.getAverageWordsPerSentence()-d1.getAverageWordsPerSentence()});\n        \tmain.add({\n        \t\tcls: 'section',\n        \t\titems: [{\n\t\t    \t\tlayout: 'hbox',\n\t\t    \t\talign: 'bottom',\n\t\t    \t\tcls: 'section',\n\t\t    \t\titems: [{\n\t\t    \t\t\thtml: this.localize(\"averageWordsPerSentence\"),\n\t\t    \t\t\tcls: 'header'\n\t\t    \t\t}, {\n\t\t    \t\t\txtype: 'sparklineline',\n\t\t    \t\t\tvalues: this.getCorpus().getDocuments().getRange().map(function(doc) {return Ext.util.Format.number(doc.getAverageWordsPerSentence(),'0.0')}),\n\t\t                tipTpl: new Ext.XTemplate('{[this.getDocumentTitle(values.x,values.y)]}', {\n\t\t                \tgetDocumentTitle: function(docIndex, len) {\n\t\t                \t\treturn '('+len+') '+this.panel.getCorpus().getDocument(docIndex).getTitle()\n\t\t                \t},\n\t\t                \tpanel: me \n\t\t                }),\n\t\t    \t\t\theight: 16,\n\t\t    \t\t\twidth: sparkWidth\n\t\t    \t\t}]\n\t\t    \t},{\n\t    \t\t\thtml: '<ul><li>'+this.localize('highest')+docsLengthTpl.apply(docs.slice(0, docs.length>limit ? limit : parseInt(docs.length/2)).map(function(doc) {return {\n\t\t\t\t\t\tid: doc.getId(),\n\t\t\t\t\t\tshortTitle: doc.getShortTitle(),\n\t\t\t\t\t\ttitle: doc.getTitle(),\n\t\t\t\t\t\tval: Ext.util.Format.number(doc.getAverageWordsPerSentence(),'0.0'),\n\t\t\t\t\t\tvalTip: numberOfTerms\n\t\t\t\t\t}}))+'</li>'+\n\t    \t\t\t\t'<li>'+this.localize('lowest')+docsLengthTpl.apply(docs.slice(-(docs.length>limit ? limit : parseInt(docs.length/2))).reverse().map(function(doc) {return {\n\t    \t\t\t\t\tid: doc.getId(),\n\t    \t\t\t\t\tshortTitle: doc.getShortTitle(),\n\t    \t\t\t\t\ttitle: doc.getTitle(),\n\t    \t\t\t\t\tval: Ext.util.Format.number(doc.getAverageWordsPerSentence(),'0.0'),\n\t    \t\t\t\t\tvalTip: numberOfTerms\n\t    \t\t\t\t}}))+'</li>'\n\t        \t}]\n        \t})        \t\n    \t} else { // single document, we can still show word density and average words per sentence\n    \t\tvar doc = docs[0];\n    \t\tif (doc) {\n            \tmain.add({\n            \t\tcls: 'section',\n            \t\thtml:\"<b>\"+this.localize(\"docsDensity\")+\"</b> \"+Ext.util.Format.number(doc.getLexicalTypeTokenRatio(),'0.000')\n            \t});    \t\t\n            \tmain.add({\n            \t\tcls: 'section',\n            \t\thtml: \"<b>\"+this.localize(\"averageWordsPerSentence\")+\"</b> \"+Ext.util.Format.number(doc.getAverageWordsPerSentence(),'0.0')\n            \t});    \t\t\n    \t\t}\n    \t}\n    \t\n    \tmain.add({\n    \t\thtml: this.localize(\"mostFrequentWords\"),\n    \t\tcls: 'section',\n    \t\tlisteners: {\n    \t\t\tafterrender: function(container) {\n    \t\t\t\tcontainer.mask(me.localize(\"loading\"));\n    \t\t\t\tme.getCorpus().getCorpusTerms().load({\n    \t\t\t\t\tparams: {\n    \t\t\t\t\t\tlimit: me.getApiParam('limit'),\n    \t\t\t\t\t\tstopList: me.getApiParam('stopList'),\n    \t\t\t\t\t\tforTool: 'summary'\n    \t\t\t\t\t},\n    \t\t\t\t\tcallback: function(records, operation, success) {\n    \t\t\t\t\t\tif (success && records && records.length>0) {\n    \t\t\t\t\t\t\tcontainer.unmask();\n    \t\t\t\t\t\t\tExt.dom.Helper.append(container.getTargetEl().first().first(),\n\t\t\t   \t        \t\t\t new Ext.XTemplate('<tpl for=\".\" between=\"; \"><a href=\"#\" onclick=\"return false\" class=\"corpus-type keyword\" voyant:recordId=\"{id}\">{term}</a><span style=\"font-size: smaller\"> ({val})</span></tpl>')\n\t\t\t   \t        \t\t \t\t.apply(records.map(function(term) {\n\t\t\t   \t        \t\t \t\t\treturn {\n\t\t\t\t   \t        \t\t \t\t\tid: term.getId(),\n\t\t\t\t   \t        \t\t \t\t\tterm: term.getTerm(),\n\t\t\t\t   \t        \t\t \t\t\tval: term.getRawFreq()\n\t\t\t   \t        \t\t \t\t\t}\n\t\t   \t        \t\t \t\t}))\n\t\t   \t        \t\t \t)\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t})\n    \t\t\t}\n    \t\t},\n    \t\tscope: this\n    \t})\n    \t\n    \tif (docs.length>1) {\n        \tmain.add({\n        \t\thtml: this.localize(\"distinctiveWords\")+\"<ol></ol>\",\n        \t\tcls: 'section',\n        \t\titemId: 'distinctiveWords',\n        \t\tlisteners: {\n        \t\t\tafterrender: function(container) {\n        \t\t\t\tme.showMoreDistinctiveWords();\n        \t\t\t}\n        \t\t},\n        \t\tscope: this\n        \t})\n    \t}\n    \t\n    },\n     \n    showMoreDistinctiveWords: function() {\n    \tvar distinctiveWordsContainer = this.queryById('distinctiveWords');\n    \tvar list = distinctiveWordsContainer.getTargetEl().selectNode(\"ol\");\n    \tvar count = Ext.dom.Query.select(\"li:not(.more)\", list).length;\n    \tvar numberOfDocumentsForDistinctiveWords = parseInt(this.getApiParam('numberOfDocumentsForDistinctiveWords'));\n    \tvar range = this.getCorpus().getDocuments().getRange(count, count+numberOfDocumentsForDistinctiveWords-1);\n    \tif (range && Ext.isArray(range)) {\n    \t\tvar docIndex = [];\n    \t\trange.forEach(function(doc) {\n    \t\t\tdocIndex.push(doc.getIndex())\n    \t\t})\n    \t\tif (docIndex.length>0) {\n    \t\t\tthis.getCorpus().getDocumentTerms().load({\n    \t\t\t\taddRecords: true,\n    \t\t\t\tparams: {\n    \t\t\t\t\tdocIndex: docIndex,\n    \t\t\t\t\tperDocLimit: parseInt(this.getApiParam(\"limit\")),\n    \t\t\t\t\tlimit: numberOfDocumentsForDistinctiveWords*parseInt(this.getApiParam(\"limit\")),\n\t\t\t\t\t\tstopList: this.getApiParam('stopList'),\n    \t\t\t\t\tsort: 'TFIDF',\n    \t\t\t\t\tdir: 'DESC',\n    \t\t\t\t\tforTool: 'summary'\n    \t\t\t\t},\n    \t\t\t\tscope: this,\n    \t\t\t\tcallback: function(records, operation, success) {\n    \t\t\t\t\tvar docs = {};\n    \t\t\t\t\tif (success && records && Ext.isArray(records)) { // TODO: why wouldn't we have records here?\n    \t\t\t\t\t\trecords.forEach(function(r, index, array) {\n    \t\t\t\t\t\t\tvar i = r.getDocIndex();\n    \t\t\t\t\t\t\tif (!(i in docs)) {docs[i]=[]};\n    \t\t\t\t\t\t\tdocs[i].push({\n    \t\t\t\t\t\t\t\tid: r.getId(),\n    \t\t\t\t\t\t\t\tdocIndex: r.getDocIndex(),\n    \t\t\t\t\t\t\t\ttype: r.getTerm(),\n    \t\t\t\t\t\t\t\tval: Ext.util.Format.number(r.get('rawFreq'),'0,000'),\n    \t\t\t\t\t\t\t\tdocId: r.get('docId')\n    \t\t\t\t\t\t\t});\n\n    \t\t\t\t\t\t});\n    \t\t\t\t\t\tvar len;\n    \t\t\t\t\t\tdocIndex.forEach(function(index) {\n    \t\t\t\t\t\t\tif (docs[index]) {\n        \t\t\t\t\t\t\tvar doc = this.getCorpus().getDocument(index);\n        \t\t\t\t\t\t\tlen = docs[index].length; // declare for template\n        \t\t    \t\t\t\tExt.dom.Helper.append(list, {tag: 'li', 'voyant:index': String(index), html: \n        \t\t    \t\t\t\t\t'<a href=\"#\" onclick=\"return false\" class=\"document-id document-id-distinctive\" voyant:val=\"'+doc.get('id')+'\">'+doc.getShortTitle()+'</a>'+\n        \t\t    \t\t\t\t\tthis.localize('colon')+ \" \"+new Ext.XTemplate(this.localize('documentType')).apply({types: docs[index]})+'.'\n        \t\t    \t\t\t\t});\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t}, this);\n    \t\t\t\t\t\tdistinctiveWordsContainer.updateLayout()\n    \t\t\t\t\t\tlen = numberOfDocumentsForDistinctiveWords;\n    \t\t\t\t\t\tremaining = this.getCorpus().getDocuments().getTotalCount() - count - docIndex.length;\n    \t\t\t\t\t\tif (remaining>0) {\n        \t    \t\t\t\tvar tpl = new Ext.Template(this.localize('moreDistinctiveWords'));\n        \t\t\t\t\t\tvar more = Ext.dom.Helper.append(list, {tag: 'li', cls: 'more', html: tpl.apply([len>remaining ? remaining : len,remaining])}, true);\n        \t\t\t\t\t\tmore.on(\"click\", function() {\n        \t\t\t\t\t\t\tmore.remove();\n        \t\t\t\t\t\t\tthis.showMoreDistinctiveWords();\n        \t\t\t\t\t\t}, this)\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t});\n    \t\t}\n    \t}\n    }    \n});\n","Ext.define('Voyant.panel.TextualArc', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.textualarc',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n    \t\t * @property stopList The stop list to use to filter results.\n    \t\t * Choose from a pre-defined list, or enter a comma separated list of words, or enter an URL to a list of stop words in plain text (one per line).\n    \t\t * @type String\n    \t\t * @private\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\tdocIndex: 0,\n    \t\t\n    \t\tspeed: 50,\n    \t\t\n    \t\tminRawFreq: 2\n    \t\t\t\n    \t},\n    \tglyph: 'xf06e@FontAwesome'\n\t},\n\tconfig: {\n    \toptions: [{xtype: 'stoplistoption'},{\n    \t\txtype: 'container',\n    \t\titems: {\n    \t\t\txtype: 'numberfield',\n\t    \t\tname: 'minRawFreq',\n\t    \t\tminValue: 1,\n\t    \t\tmaxValue: 10,\n\t    \t\tvalue: 2,\n\t    \t\tlabelWidth: 150,\n\t    \t\tlabelAlign: 'right',\n\t    \t\tinitComponent: function() {\n\t    \t\t\tvar panel = this.up('window').panel;\n\t    \t\t\tthis.fieldLabel = panel.localize(this.fieldLabel);\n\t    \t\t\tthis.on(\"afterrender\", function(cmp) {\n\t\t\t        \tExt.tip.QuickTipManager.register({\n\t\t\t                 target: cmp.getEl(),\n\t\t\t                 text: panel.localize('minRawFreqTip')\n\t\t\t             });\n\t    \t\t\t});\n\t    \t\t\tthis.on('beforedestroy', function(cmp) {\n                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n                \t});\n\t    \t\t\tthis.callParent(arguments);\n\t    \t\t},\n\t    \t\tfieldLabel: 'minRawFreq'\n    \t\t}\n    \t}],\n    \tperim: [],\n    \tdiam: undefined\n\t},\n\t\n\ttokensFetch: 500,\n\t\n    constructor: function() {\n\n    \tthis.mixins['Voyant.util.Localization'].constructor.apply(this, arguments);\n    \tthis.config.options[1].fieldLabel = this.localize(this.config.options[1].fieldLabel);\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n\t\t\thtml: '<canvas width=\"800\" height=\"600\"></canvas>',\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \txtype: 'combo',\n                \titemId: 'search',\n                \tqueryMode: 'local',\n                \tdisplayField: 'term',\n                \tvalueField: 'term',\n                \twidth: 90,\n                \temptyText: this.localize('search'),\n                \tforceSelection: true,\n                \tdisabled: true\n                },{\n\t            \txtype: 'documentselectorbutton',\n\t            \tsingleSelect: true\n\t            },{\n\t\t\t\t\txtype: 'slider',\n\t\t\t\t\tfieldLabel: this.localize('speed'),\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 40,\n\t\t\t\t\twidth: 100,\n\t\t\t\t\tincrement: 1,\n\t\t\t\t\tminValue: 0,\n\t\t\t\t\tmaxValue: 100,\n\t\t\t\t\tvalue: 30,\n\t\t\t\t\tlisteners: {\n\t                \trender: function(cmp) {\n\t                \t\tcmp.setValue(parseInt(this.getApiParam(\"speed\")));\n\t    \t\t        \tExt.tip.QuickTipManager.register({\n\t    \t\t        \t\ttarget: cmp.getEl(),\n\t   \t\t                 \ttext: this.localize('speedTip')\n\t    \t\t        \t});\n\t                \t\t\n\t                \t},\n\t                \tbeforedestroy: function(cmp) {\n\t                \t\tExt.tip.QuickTipManager.unregister(cmp.getEl());\n\t                \t},\n\t                    changecomplete: function(cmp, val) {\n\t                    \tthis.setApiParam('speed', val);\n                    \t\tthis.isReading = val!==0\n                    \t\tthis.draw();\n\t                    },\n\t                    scope: this\n\t\t\t\t\t}\n\t\t\t\t},{xtype: 'tbfill'}, {\n\t    \t\t\txtype: 'tbtext',\n\t    \t\t\thtml: this.localize('adaptation')\n\t    \t\t}]\n    \t\t}]\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.on('boxready', function(cmp) {\n\t\t\tvar canvas = this.getTargetEl().dom.querySelector(\"canvas\");\n\t    \tthis.draw(canvas);\n\n    \t\tcanvas.addEventListener('mousemove', function(evt) {\n    \t\t\tif (cmp.documentTerms) {\n        \t\t\tvar rect = canvas.getBoundingClientRect(), x =  evt.clientX - rect.left, y = evt.clientY - rect.top;\n        \t\t\t\n        \t\t\tvar currentTerms = {};\n        \t\t\tcmp.documentTerms.each(function(documentTerm) {\n        \t\t\t\tvar dx = documentTerm.get('x'), dy = documentTerm.get('y');\n        \t\t\t\tif (dx>x-15 && dx<x+15 && dy>y-15 && dy<y+15) {\n        \t\t\t\t\tcurrentTerms[documentTerm.getTerm()] = true;\n        \t\t\t\t\treturn false;\n        \t\t\t\t}\n        \t\t\t})\n        \t\t\t\n        \t\t\t// no need to do anything if there are no current terms and none found\n        \t\t\tif (Object.keys(cmp.currentTerms || {}).length==0 && Object.keys(currentTerms).length==0) {return;}\n\n        \t\t\tcmp.currentTerms = currentTerms;\n        \t\t\tcmp.draw(canvas); // otherwise redraw\n    \t\t\t}\n    \t\t\t\n    \t      }, false);\n    \t})\n    \t\n    \tthis.on('loadedCorpus', function(src, corpus) {\n\t\t\tthis.loadDocument();\n    \t}, this);\n    \t\n    \tthis.on(\"documentselected\", function(src, doc) {\n    \t\tthis.setApiParam('docIndex', this.getCorpus().getDocument(doc).getIndex());\n    \t\tthis.loadDocument();\n    \t});\n    \t\n    \tthis.on(\"resize\", function() {\n    \t\tvar gutter = 20,\n\t\t\tavailableWidth = this.getTargetEl().getWidth() - gutter - gutter,\n\t\t\tavailableHeight = this.getTargetEl().getHeight() - gutter - gutter,\n\t\t\tdiam = Math.max(availableWidth, availableHeight), rad = diam /2,\n\t\t\tratio = Math.min(availableWidth, availableHeight) / diam,\n\t\t\tcanvas = this.getTargetEl().dom.querySelector(\"canvas\");\n    \t\t\n\t\t\tcanvas.width = this.getTargetEl().getWidth();\n\t\t\tcanvas.height = this.getTargetEl().getHeight();\n\t\t\tthis.setDiam(diam);\n\t\t\tthis.setPerim([]);\n\t\t\tvar i = parseInt(diam*.75)\n\t\t\twhile (this.getPerim().length<diam) {\n\t    \t\tthis.getPerim().push({\n\t    \t\t\tx:  gutter+(availableWidth/2)+(rad * (availableWidth>availableHeight ? 1 : ratio) * Math.cos(2 * Math.PI * i / diam)),\n\t    \t\t\ty:  gutter+(availableHeight/2)+(rad * (availableHeight>availableWidth ? 1 : ratio) * Math.sin(2 * Math.PI * i / diam))\n\t    \t\t})\n\t    \t\tif (i++==diam) {i=0;}\n\t\t\t}\n\t\t\t\n\t\t\t// TODO clear previous/current drawing\n    \t})\n    },\n    \n    draw: function(canvas, ctx) {\n    \tcanvas = canvas ||  this.getTargetEl().dom.querySelector(\"canvas\");\n    \tctx = ctx || canvas.getContext(\"2d\");\n    \tctx.clearRect(0,0,canvas.width,canvas.height);\n\t\tctx.fillStyle = \"rgba(0,0,0,.1)\";\n    \tthis.getPerim().forEach(function(p,i) {\n    \t\tif (i%3==0) {\n        \t\tctx.fillRect(p.x-5,p.y,10,1)\n    \t\t}\n    \t})\n    \tif (this.documentTerms) {\n        \tthis.drawTerms(canvas, ctx);\n        \tthis.drawReading(canvas,ctx);\n        \tif (this.isReading) {\n        \t\tvar me = this;\n        \t\tsetTimeout(function() {\n        \t\t\tme.draw();\n        \t\t}, 10)\n        \t}\n    \t}\n    },\n    \n    drawReading: function(canvas, ctx) {\n    \tctx = ctx || this.getTargetEl().dom.querySelector(\"canvas\").getContext(\"2d\");\n    \tvar delay = 2000-(parseInt(this.getApiParam('speed'))*1999/100);\n    \tif (this.isReading && this.documentTerms) {\n    \t\tvar current = parseInt(this.readingIndex * this.getPerim().length / this.lastToken);\n    \t\tctx.fillStyle = \"purple\";\n    \t\tctx.fillRect(this.getPerim()[current].x,this.getPerim()[current].y, 5, 5)\n\t\t\tvar first = this.readingStartTime == undefined;\n\t\t\tthis.readingStartTime = this.readingStartTime || new Date().getTime();\n\t\t\tvar delta = this.readingStartTime+delay-new Date().getTime();\n    \t\tif (this.sourceTerm && this.targetTerm) {\n    \t\t\tvar maxTail = 10;\n    \t\t\tif (first || delta<=0) {\n    \t\t\t\tthis.previousBeziers = this.previousBeziers || []; // this should be reset by tokens reader during first read\n        \t\t\tvar sx = this.sourceTerm.get('x'), sy = this.sourceTerm.get('y'), tx = this.targetTerm.get('x'), ty = this.targetTerm.get('y'),\n    \t\t\t\t\tpx = this.previousTerm ? this.previousTerm.get('x') : sx, py = this.previousTerm ? this.previousTerm.get('y') : sy,\n    \t\t\t\t\tround = 100, multiplier = .3;\n    \t\t\t\t\n        \t\t\tvar ix, iy, xd = Math.max(round, Math.abs(sx-tx) * .5), yd = Math.max(round, Math.abs(sy-ty) * .5);\n        \t\t\tix = sx > tx ? sx - xd : sx + xd;\n        \t\t\tiy = ty > sy ? sy + yd : sy - yd;\n    \t\t\t\tthis.previousBeziers.unshift([sx,sy,ix,iy,tx,ty]);\n    \t\t\t\tif (this.previousBeziers.length>maxTail) {this.previousBeziers.pop()}\n    \t\t\t}\n    \t\t\t\n    \t\t\tfor (var i=0; i<this.previousBeziers.length; i++) {\n\t        \t\tctx.strokeStyle=\"rgba(0,0,255,\"+(1-(i*.1))+\")\";\n    \t\t\t\tvar start = i+1 == this.previousBeziers.length ? 1-(delta/delay) : 0;\n    \t\t\t\tvar end = i==0 ? 1-(delta/delay) : 1;\n            \t\tthis.drawBezierSplit.apply(this, Ext.Array.merge([ctx], this.previousBeziers[i], [start], [end]));\n    \t\t\t}\n    \t\t\tif (delta<=0) {\n        \t\t\tthis.readingStartTime = undefined;\n        \t\t\tthis.read();\n    \t\t\t}\n    \t\t}\n    \t\tvar nextReadingIndex = this.readingIndex+1;\n    \t\tfor (var len=this.tokens.getCount(); nextReadingIndex<len; nextReadingIndex++) {\n    \t\t\tif (this.tokens.getAt(nextReadingIndex).getTerm().toLowerCase()==this.targetTerm.getTerm()) {\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t\tvar startReadingIndex = nextReadingIndex-parseInt(delta*(nextReadingIndex-this.readingIndex)/delay), count = this.tokens.getCount();\n    \t\tfor (; startReadingIndex<nextReadingIndex; startReadingIndex++) {\n    \t\t\tif (startReadingIndex < count && this.tokens.getAt(startReadingIndex).isWord()) {\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t\tvar tokens = this.tokens.getRange(startReadingIndex, len=Math.min(this.readingIndex+50, this.tokens.getCount())).map(function(token) {\n    \t\t\treturn token.getTerm();\n    \t\t})\n\t    \tctx.font = \"14px sans-serif\";\n    \t\tctx.fillStyle = \"rgba(0,0,0,.5)\";\n        \tctx.textAlign = \"left\";\n    \t\tctx.fillText(tokens.join(\"\"), canvas.width/4, canvas.height-5);\n    \t\tctx.clearRect(canvas.width*.75, canvas.height-20, canvas.width, 30)\n    \t} else if (this.documentTerms && this.documentTerms.getCount()<this.documentTerms.getTotalCount()) {\n    \t\tvar x = canvas.width / 4;\n    \t\tctx.strokeStyle=\"rgba(0,0,0,.5)\";\n    \t\tctx.fillStyle = \"rgba(0,0,0,.2)\";\n    \t\tctx.strokeRect(x,canvas.height-12,x*2,10);\n    \t\tctx.fillRect(x,canvas.height-12,(this.documentTerms.getCount()*x*2)/this.documentTerms.getTotalCount(),10);\n    \t}\n    },\n    \n    drawTerms: function(canvas, ctx) {\n    \tcanvas = canvas || this.getTargetEl().dom.querySelector(\"canvas\");\n    \tctx = ctx || canvas.getContext(\"2d\");\n    \tctx.textAlign = \"center\";\n    \tif (this.documentTerms && this.getPerim().length > 0) {\n    \t\tthis.documentTerms.each(function(documentTerm) {\n    \t\t\tvar me = this, freq = documentTerm.getRawFreq(), term = documentTerm.getTerm(),\n    \t\t\t\tx = documentTerm.get('x'), y = documentTerm.get('y');\n    \t\t\tisCurrentTerm = me.currentTerms && (term in me.currentTerms);\n    \t\t\tisReadingTerm = this.sourceTerm && this.sourceTerm.getTerm() == term;\n    \t    \tctx.font = ((Math.log(freq)*(canvas.width*10/800)/Math.log(this.maxRawFreq))+(isCurrentTerm || isReadingTerm ? 10 : 5)) + \"px sans-serif\";\n    \t    \tif (isCurrentTerm) {\n    \t    \t\tctx.fillStyle = \"red\";\n    \t    \t} else if (isReadingTerm) {\n    \t    \t\tctx.fillStyle = \"blue\";\n    \t    \t} else {\n    \t    \t\tctx.fillStyle = \"rgba(0,0,0,\"+((freq*.9/this.maxRawFreq)+.1)+\")\";\n    \t    \t}\n    \t    \tif (isCurrentTerm || isReadingTerm) {\n    \t    \t\tctx.strokeStyle = isCurrentTerm ? \"rgba(255,0,0,.2)\" : \"rgba(0,255,0,.4)\";\n    \t    \t\tdocumentTerm.getDistributions().forEach(function(d, i) {\n    \t    \t\t\tif (d>0 && this.getPerim()[i]) {\n    \t    \t\t\t\tctx.beginPath();\n    \t    \t\t\t\tctx.moveTo(x, y);\n    \t    \t\t\t\tctx.lineTo(this.getPerim()[i].x,this.getPerim()[i].y);\n    \t    \t\t\t\tctx.stroke();\n    \t    \t\t\t}\n    \t    \t\t}, this)\n    \t    \t}\n    \t\t\tctx.fillText(term, x, y);\n    \t\t\t\n    \t\t}, this)    \t\t\n    \t}\n    },\n    \n    read: function(index) {\n    \tif (Ext.isNumber(index)) {this.readingIndex=index;}\n    \telse {this.readingIndex++;}\n    \tif (this.sourceTerm) {this.previousTerm=this.sourceTerm;}\n    \tfor (var i=this.readingIndex, len = this.tokens.getCount(); i<len; i++) {\n    \t\tvar token = this.tokens.getAt(i), term = token.getTerm().toLowerCase();\n    \t\tif (term in this.termsMap) {\n    \t\t\tthis.sourceTerm = this.termsMap[term];\n    \t\t\tif (this.sourceTerm.getRawFreq()>=1) {\n        \t\t\tthis.readingIndex = i;\n        \t\t\tbreak\n    \t\t\t}\n    \t\t}\n    \t}\n    \tfor (var i=this.readingIndex+1, len = this.tokens.getCount(); i<len; i++) {\n    \t\tvar token = this.tokens.getAt(i), term = token.getTerm().toLowerCase();\n    \t\tif (term in this.termsMap) {\n    \t\t\tthis.targetTerm = this.termsMap[term];\n    \t\t\tif (this.targetTerm.getRawFreq()>=1) {\n        \t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t}\n    \tif (!this.tokensLoading && this.tokens.getCount()-this.readingIndex<this.tokensFetch) {\n    \t\tthis.fetchMoreTokens();\n    \t}\n    \tthis.draw();\n    },\n    \n    \n    loadDocument: function() {\n    \tif (this.documentTerms) {this.documentTerms.destroy();this.documentTerms=undefined;}\n    \tthis.termsMap = {};\n    \tthis.draw();\n    \tvar doc =  this.getCorpus().getDocument(parseInt(this.getApiParam('docIndex')));\n    \t// if we're not in a tab panel, set the document title as part of the header\n    \tif (!this.up(\"tabpanel\")) {\n        \tthis.setTitle(this.localize('title') + \" <span class='subtitle'>\"+doc.getFullLabel()+\"</span>\");\n    \t}\n    \tthis.lastToken = parseInt(doc.get('lastTokenStartOffset-lexical'));\n    \tthis.documentTerms = doc.getDocumentTerms({\n    \t\tproxy: {\n    \t\t\textraParams: {\n    \t\t\t\tstopList: this.getApiParam('stopList'),\n    \t\t\t\tbins: this.getDiam(),\n    \t\t\t\twithDistributions: 'raw',\n    \t\t\t\tminRawFreq: parseInt(this.getApiParam('minRawFreq'))\n    \t\t\t}\n    \t\t}\n    \t});\n    \tvar search = this.queryById('search');\n    \tsearch.setDisabled(true);\n    \tsearch.setStore(this.documentTerms);\n    \tthis.fetchMoreDocumentTerms();\n    },\n    \n    fetchMoreDocumentTerms: function() {\n    \tif (!this.documentTerms) {this.loadDocument(); return;}\n    \tthis.documentTerms.load({\n    \t\tparams: {\n    \t\t\tstart: this.documentTerms.getCount(),\n    \t\t\tlimit: this.documentTerms.getCount() == 0 ? 10 : 250\n    \t\t},\n    \t\tcallback: function(records) {\n    \t\t\tif (records.length>0) {\n            \t\tthis.maxRawFreq = this.documentTerms.max('rawFreq');\n            \t\trecords.forEach(function(documentTerm) {\n            \t\t\tvar x = y = 0;\n            \t\t\tdocumentTerm.get('distributions').forEach(function(d, i) {\n            \t\t\t\tx += (this.getPerim()[i].x*d);\n            \t\t\t\ty += (this.getPerim()[i].y*d);\n            \t\t\t}, this)\n            \t\t\tdocumentTerm.set('x', x/documentTerm.getRawFreq());\n            \t\t\tdocumentTerm.set('y', y/documentTerm.getRawFreq());\n            \t\t}, this);\n    \t\t\t\tExt.Function.defer(this.fetchMoreDocumentTerms, 0, this);\n    \t\t\t\tthis.draw();\n    \t\t\t} else {\n    \t\t\t\tthis.queryById('search').setDisabled(false);\n    \t\t\t\tthis.termsMap = {};\n    \t\t\t\tthis.documentTerms.each(function(documentTerm) {\n    \t\t\t\t\tthis.termsMap[documentTerm.getTerm()] = documentTerm;\n    \t\t\t\t}, this)\n    \t\t\t\tif (this.tokens) {this.tokens.removeAll(true)}\n    \t\t\t\tthis.fetchMoreTokens();\n    \t\t\t}\n    \t\t},\n    \t\taddRecords: true,\n    \t\tscope: this\n    \t})\n    },\n    \n    fetchMoreTokens: function() {\n\t\tif (!this.tokens) {\n\t\t\tthis.tokens = this.getCorpus().getDocument(parseInt(this.getApiParam('docIndex'))).getTokens({\n\t\t\t\tproxy: {\n\t\t\t\t\textraParams: {\n\t    \t\t\t\tstripTags: 'all'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.noMoreTokens = false;\n\t\t} else if (this.noMoreTokens) {return;}\n\t\t\n\t\tvar first = this.tokens.getCount() == 0;\n\t\tthis.tokensLoading = true;\n\t\tvar speed = parseInt(this.getApiParam('speed'));\n    \tthis.tokens.load({\n    \t\tparams: {\n    \t\t\tstart: this.tokens.getCount(),\n    \t\t\tlimit: speed==50 && first ? 200 : Math.pow(110-speed, 2)\n    \t\t},\n    \t\tcallback: function(records) {\n    \t\t\tthis.tokensLoading = false;\n    \t\t\tif (records.length>0) {\n    \t\t\t\trecords.forEach(function(token) {\n    \t\t\t\t\tif (token.getTokenType()=='other') {\n    \t\t\t\t\t\ttoken.set('term', token.getTerm().replace(/\\s+/g, \" \"))\n    \t\t\t\t\t}\n    \t\t\t\t})\n        \t\t\tif (first) {\n        \t\t\t\tthis.previousBeziers = [];\n        \t\t\t\t// TODO\n//        \t\t\t\tif (this.getApiParam('speed') > 0) {\n\t        \t\t\t\tthis.isReading = true;\n\t        \t\t\t\tthis.read(0);\n//        \t\t\t\t}\n        \t\t\t}\n    \t\t\t} else {\n    \t\t\t\tthis.noMoreTokens = true;\n    \t\t\t}\n    \t\t},\n    \t\taddRecords: true,\n    \t\tscope: this\n\n    \t});\n    },\n    \n    /* The functions below adapted from http://www.pjgalbraith.com/drawing-animated-curves-javascript/ */\n    \n    /**\n     * Animates bezier-curve\n     * \n     * @param ctx       The canvas context to draw to\n     * @param x0        The x-coord of the start point\n     * @param y0        The y-coord of the start point\n     * @param x1        The x-coord of the control point\n     * @param y1        The y-coord of the control point\n     * @param x2        The x-coord of the end point\n     * @param y2        The y-coord of the end point\n     * @param duration  The duration in milliseconds\n     * @private\n     */\n    animatePathDrawing: function(ctx, x0, y0, x1, y1, x2, y2, duration) {\n        var start = null;\n        \n        var step = function animatePathDrawingStep(timestamp) {\n            if (start === null)\n                start = timestamp;\n            \n            var delta = timestamp - start,\n                progress = Math.min(delta / duration, 1);\n            \n            // Clear canvas\n            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n            \n            // Draw curve\n            drawBezierSplit(ctx, x0, y0, x1, y1, x2, y2, 0, progress);\n            \n            if (progress < 1) {\n                window.requestAnimationFrame(step);\n            }\n        };\n        \n        window.requestAnimationFrame(step);\n    },\n    \n    /**\n     * Draws a splitted bezier-curve\n     * \n     * @param ctx       The canvas context to draw to\n     * @param x0        The x-coord of the start point\n     * @param y0        The y-coord of the start point\n     * @param x1        The x-coord of the control point\n     * @param y1        The y-coord of the control point\n     * @param x2        The x-coord of the end point\n     * @param y2        The y-coord of the end point\n     * @param t0        The start ratio of the splitted bezier from 0.0 to 1.0\n     * @param t1        The start ratio of the splitted bezier from 0.0 to 1.0\n     * @private\n     */\n    drawBezierSplit: function(ctx, x0, y0, x1, y1, x2, y2, t0, t1) {\n        ctx.beginPath();\n        \n        if( 0.0 == t0 && t1 == 1.0 ) {\n            ctx.moveTo( x0, y0 );\n            ctx.quadraticCurveTo( x1, y1, x2, y2 );\n        } else if( t0 != t1 ) {\n            var t00 = t0 * t0,\n                t01 = 1.0 - t0,\n                t02 = t01 * t01,\n                t03 = 2.0 * t0 * t01;\n            \n            var nx0 = t02 * x0 + t03 * x1 + t00 * x2,\n                ny0 = t02 * y0 + t03 * y1 + t00 * y2;\n            \n            t00 = t1 * t1;\n            t01 = 1.0 - t1;\n            t02 = t01 * t01;\n            t03 = 2.0 * t1 * t01;\n            \n            var nx2 = t02 * x0 + t03 * x1 + t00 * x2,\n                ny2 = t02 * y0 + t03 * y1 + t00 * y2;\n            \n            var nx1 = this.lerp ( this.lerp ( x0 , x1 , t0 ) , this.lerp ( x1 , x2 , t0 ) , t1 ),\n                ny1 = this.lerp ( this.lerp ( y0 , y1 , t0 ) , this.lerp ( y1 , y2 , t0 ) , t1 );\n            \n            ctx.moveTo( nx0, ny0 );\n            ctx.quadraticCurveTo( nx1, ny1, nx2, ny2 );\n        }\n        \n        ctx.stroke();\n        ctx.closePath();\n    },\n    \n    /**\n     * Linearly interpolate between two numbers v0, v1 by t\n     * @private\n     */\n    lerp: function(v0, v1, t) {\n        return ( 1.0 - t ) * v0 + t * v1;\n    }\n    \n    \n    \n});","\n// for mysterious reasons, Ext.require loads the scripts but produces a blank page, so use loadScript instead\n/*\nvar twicPath = Ext.Loader.getPath(\"resources\")+\"/twic/current\"\nExt.Loader.loadScript(twicPath+\"/css/twic.css\")\nExt.Loader.loadScript(twicPath+\"/lib/queue.min.js\")\nExt.Loader.loadScript(twicPath+\"/lib/textFlow.js\")\nExt.Loader.loadScript(twicPath+\"/lib/svg_helper_functions.js\")\nExt.Loader.loadScript(twicPath+\"/lib/class_syntax.js\")\nExt.Loader.loadScript(twicPath+\"/js/twic_level.js\")\nExt.Loader.loadScript(twicPath+\"/js/twic_panel.js\")\nExt.Loader.loadScript(twicPath+\"/js/twic_datashape.js\")\n*/\n\n\nExt.define('Voyant.panel.TopicContexts', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.topiccontexts',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t},\n\t\tglyph: 'xf06e@FontAwesome'\n    },\n    \n    constructor: function(config) {\n\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tcls: 'twic_body'\n    \t});\n\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\n    },\n    \n    listeners: {\n    \tloadedCorpus: function(src, corpus) {\t\t\n    \t\tthis.loadFromCorpus(corpus);\n    \t}\n    \t\n    },\n    \n    loadFromCorpus: function(corpus) {\n    \tvar url = Ext.Loader.getPath(\"resources\")+\"/twic/current/data/input/json\"\n        var twicLevel = TWiC.Level.prototype.Instance();\n        twicLevel.LoadJSON(url+\"/twic_corpusinfo.json\", url+\"/twic_corpusmap.json\");\n        var panel = this;\n\n        // Once JSON has loaded, create and start the level\n        twicLevel.m_queue.await(function(){\n\n            // Create components\n            var graphViews = [];\n            var infoViews = [];\n            var divName = \"dickinson\"; // NOTE: This needs to be added to twic_corpusinfo.json from serverside\n\n            // Topic bar setup\n            var topicBar = new TWiC.TopicBar({x:0, y:635}, // Position\n                                             {width:1280, height:165}, // Size\n                                             divName, // Name\n                                             twicLevel, []); // Level and linked view(s)\n            infoViews.push(topicBar);\n\n            // Document info bar setup\n            var docBar = new TWiC.DocumentBar({\"x\":1055, \"y\":0}, // Position\n                                              {\"width\":225, \"height\":635}, // Size\n                                              divName,  // Name\n                                              twicLevel, []); // Level and linked view(s)\n            infoViews.push(docBar);\n\n            // Graph setup\n            var corpusClusterView = new TWiC.CorpusClusterView({ \"x\":0, \"y\":0 }, // Position\n                                                               { \"width\":1055, \"height\":635}, // Size\n                                                               divName, // Name\n                                                               twicLevel, [topicBar, docBar]); // Level and linked view(s)\n            graphViews.push(corpusClusterView);\n\n            // Link the corpus cluster view to the topic bar as well\n            topicBar.m_linkedViews.push(corpusClusterView);\n\n            var body = panel.getLayout().getRenderTarget();\n\n            // Initialize the level\n            twicLevel.Initialize([0,0], // Position\n                                 {width: body.getWidth(), height: body.getHeight()}, // Size\n                                 divName, // Name\n                                 graphViews, infoViews, // TWiC graph and information panels\n                                 '#'+body.getId()\n            );\n\n            // Startup the level\n            twicLevel.Start();\n        }.bind(twicLevel));\n\n    }\n    \n})","Ext.define('Voyant.panel.TermsBerry', {\r\n\textend: 'Ext.panel.Panel',\r\n\tmixins: ['Voyant.panel.Panel'],\r\n\talias: 'widget.termsberry',\r\n    statics: {\r\n    \ti18n: {\r\n    \t},\r\n    \tapi: {\r\n    \t\tstopList: 'auto',\r\n    \t\tcontext: 2,\r\n        \tnumInitialTerms: 75,\r\n    \t\tquery: undefined,\r\n    \t\tdocIndex: undefined,\r\n    \t\tdocId: undefined,\r\n    \t\tcategories: undefined\r\n    \t},\r\n\t\tglyph: 'xf1db@FontAwesome'\r\n    },\r\n    config: {\r\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\r\n    \t\r\n    \tmode: undefined,\r\n    \t\r\n    \tscalingFactor: 3,\r\n    \t\r\n    \tminRawFreq: undefined,\r\n    \tmaxRawFreq: undefined,\r\n    \tmaxCollocateValue: undefined,\r\n    \tminFillValue: undefined,\r\n    \tmaxFillValue: undefined,\r\n    \t\r\n    \tcurrentData: {},\r\n    \tblacklist: {},\r\n    \t\r\n    \tvisLayout: undefined,\r\n    \tvis: undefined,\r\n    \tvisInfo: undefined,\r\n    \tvisId: undefined,\r\n    \t\r\n    \tcurrentNode: undefined,\r\n    \t\r\n    \ttip: undefined,\r\n    \tcontextMenu: undefined\r\n\t},\r\n    \r\n\tMODE_TOP: 'top',\r\n    MODE_DISTINCT: 'distinct',\r\n    \r\n    MIN_TERMS: 5,\r\n    MAX_TERMS: 500,\r\n    \r\n    COLLOCATES_LIMIT: 1000000, // a very large number so we get all of them\r\n    \r\n    MIN_SCALING: 1,\r\n    MAX_SCALING: 5,\r\n    \r\n    MIN_STROKE_OPACITY: 0.1,\r\n\tMAX_STROKE_OPACITY: 0.3,\r\n\t\r\n    layout: 'fit',\r\n    \r\n    constructor: function(config) {\r\n    \tthis.setMode(this.MODE_TOP);\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\r\n    \t\r\n    \tthis.setVisId(Ext.id(null, 'termspack_'));\r\n    },\r\n    \r\n    initComponent: function() {\r\n    \tExt.apply(this, {\r\n    \t\ttitle: this.localize('title'),\r\n    \t\tdockedItems: [{\r\n                dock: 'bottom',\r\n                xtype: 'toolbar',\r\n                overflowHandler: 'scroller',\r\n                items: [{\r\n                   xtype: 'querysearchfield',\r\n                   clearOnQuery: true\r\n                },{\r\n                \txtype: 'button',\r\n                \ttext: this.localize('strategy'),\r\n                \tmenu: {\r\n\t                \titems: [{\r\n\t                \t\txtype: 'menucheckitem',\r\n\t                \t\tgroup: 'strategy',\r\n\t                \t\tchecked: this.getMode() === this.MODE_TOP,\r\n\t                \t\ttext: this.localize('topTerms'),\r\n\t                \t\tcheckHandler: function(item, checked) {\r\n\t                \t\t\tif (checked) {\r\n\t                \t\t\t\tthis.setMode(this.MODE_TOP);\r\n\t                \t\t\t\tthis.doLoad();\r\n\t                \t\t\t}\r\n\t                \t\t},\r\n\t                \t\tscope: this\r\n\t                \t},{\r\n\t                \t\txtype: 'menucheckitem',\r\n\t                \t\tgroup: 'strategy',\r\n\t                \t\tchecked: this.getMode() === this.MODE_DISTINCT,\r\n\t                \t\ttext: this.localize('distinctTerms'),\r\n\t                \t\tcheckHandler: function(item, checked) {\r\n\t                \t\t\tif (checked) {\r\n\t                \t\t\t\tthis.setMode(this.MODE_DISTINCT);\r\n\t                \t\t\t\tthis.doLoad();\r\n\t                \t\t\t}\r\n\t                \t\t},\r\n\t                \t\tscope: this\r\n\t                \t}]\r\n                \t}\r\n                },{\r\n\t                fieldLabel: this.localize('numTerms'),\r\n\t    \t\t\tlabelWidth: 50,\r\n\t    \t\t\tlabelAlign: 'right',\r\n\t    \t\t\twidth: 120,\r\n\t    \t\t\txtype: 'slider',\r\n\t            \tincrement: 1,\r\n\t            \tminValue: this.MIN_TERMS,\r\n\t            \tmaxValue: this.MAX_TERMS,\r\n\t            \tlisteners: {\r\n\t            \t\tafterrender: function(slider) {\r\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam('numInitialTerms')));\r\n\t            \t\t},\r\n\t            \t\tchangecomplete: function(slider, newvalue) {\r\n\t            \t\t\tthis.setApiParam(\"numInitialTerms\", newvalue);\r\n\t            \t\t\tthis.doLoad();\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n                },{\r\n\t                fieldLabel: this.localize('context'),\r\n\t    \t\t\tlabelWidth: 50,\r\n\t    \t\t\tlabelAlign: 'right',\r\n\t    \t\t\twidth: 120,\r\n\t    \t\t\txtype: 'slider',\r\n\t            \tincrement: 1,\r\n\t            \tminValue: 1,\r\n\t            \tmaxValue: 30,\r\n\t            \tlisteners: {\r\n\t            \t\tafterrender: function(slider) {\r\n\t            \t\t\tslider.setValue(this.getApiParam('context'));\r\n\t            \t\t},\r\n\t            \t\tchangecomplete: function(slider, newvalue) {\r\n\t            \t\t\tthis.setApiParams({context: newvalue});\r\n\t            \t\t\tthis.doLoad();\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n                },{\r\n\t                fieldLabel: this.localize('scaling'),\r\n\t    \t\t\tlabelWidth: 50,\r\n\t    \t\t\tlabelAlign: 'right',\r\n\t    \t\t\twidth: 120,\r\n\t    \t\t\txtype: 'slider',\r\n\t            \tincrement: 1,\r\n\t            \tminValue: this.MIN_SCALING,\r\n\t            \tmaxValue: this.MAX_SCALING,\r\n\t            \tlisteners: {\r\n\t            \t\tafterrender: function(slider) {\r\n\t            \t\t\tslider.setValue(this.getScalingFactor());\r\n\t            \t\t},\r\n\t            \t\tchangecomplete: function(slider, newvalue) {\r\n\t            \t\t\t// use the inverse of the value since it'll make more sense to the user\r\n\t            \t\t\tvar value = Math.abs(newvalue-(this.MAX_SCALING+1));\r\n\t            \t\t\tthis.setScalingFactor(value);\r\n\t            \t\t\tthis.reload();\r\n\t            \t\t},\r\n\t            \t\tscope: this\r\n\t            \t}\r\n                }\r\n                ]\r\n    \t\t}]\r\n    \t});\r\n    \t\r\n    \tthis.setContextMenu(Ext.create('Ext.menu.Menu', {\r\n\t\t\trenderTo: Ext.getBody(),\r\n\t\t\titems: [{\r\n\t\t\t\txtype: 'box',\r\n\t\t\t\titemId: 'label',\r\n\t\t\t\tmargin: '5px 0px 5px 5px',\r\n\t\t\t\thtml: ''\r\n\t\t\t},{\r\n\t\t        xtype: 'menuseparator'\r\n\t\t\t},{\r\n\t\t\t\txtype: 'button',\r\n\t\t\t\ttext: 'Remove',\r\n\t\t\t\tstyle: 'margin: 5px;',\r\n\t\t\t\thandler: function(b, e) {\r\n\t\t\t\t\tvar node = this.getCurrentNode();\r\n\t\t\t\t\tif (node !== undefined) {\r\n\t\t\t\t\t\tdelete this.getCurrentData()[node.data.term];\r\n\t\t\t\t\t\tthis.getBlacklist()[node.data.term] = true;\r\n\t\t\t\t\t\tthis.setCurrentNode(undefined);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.getContextMenu().hide();\r\n\t\t\t\t\tthis.reload();\r\n\t\t\t\t},\r\n\t\t\t\tscope: this\r\n\t\t\t}]\r\n\t\t}));\r\n    \t\r\n    \tthis.on('query', function(src, query) {\r\n    \t\tif (query.length > 0) {\r\n    \t\t\tthis.doLoad(query);\r\n    \t\t}\r\n\t\t}, this);\r\n    \t\r\n    \tthis.callParent(arguments);\r\n    },\r\n    \r\n    listeners: {\r\n    \tboxready: function() {\r\n\t\t\tthis.initVisLayout();\r\n    \t},\r\n    \t\r\n    \tresize: function(panel, width, height) {\r\n    \t\tif (this.getVisLayout() && this.getCorpus()) {\r\n    \t\t\tvar el = this.getLayout().getRenderTarget();\r\n    \t    \twidth = el.getWidth();\r\n    \t\t\theight = el.getHeight();\r\n    \t\t\t\r\n    \t\t\tel.down('svg').set({width: width, height: height});\r\n    \t\t\t\r\n    \t\t\tthis.getVisLayout().size([width, height]);\r\n    \t\t\t\r\n    \t\t\tthis.reload();\r\n    \t\t}\r\n    \t},\r\n    \t\r\n    \tloadedCorpus: function(src, corpus) {\r\n    \t\tif (this.isVisible()) {\r\n        \t\tthis.doLoad();\r\n    \t\t}\r\n    \t},\r\n    \tactivate: function() {\r\n    \t\tif (this.getCorpus()) {\r\n    \t\t\tthis.doLoad();\r\n    \t\t}\r\n    \t}\r\n    },\r\n    \r\n    doLoad: function(query) {\r\n\t\tthis.resetVis();\r\n\t\tif (query === undefined) {\r\n\t\t\tthis.resetMinMax();\r\n\t\t\tthis.setCurrentData({});\r\n\t\t}\r\n    \tif (this.getMode() === this.MODE_DISTINCT) {\r\n    \t\tthis.getDistinctTerms(query);\r\n    \t} else {\r\n    \t\tthis.getTopTerms(query);\r\n    \t}\r\n    },\r\n    \r\n    reload: function() {\r\n    \tvar data = this.processCollocates([]);\r\n\t\tif (data.length > 0) {\r\n\t\t\tthis.resetVis();\r\n\t\t\tthis.buildVisFromData(data);\r\n\t\t}\r\n    },\r\n    \r\n    resetMinMax: function() {\r\n    \tthis.setMinRawFreq(undefined);\r\n    \tthis.setMaxRawFreq(undefined);\r\n    \tthis.setMaxCollocateValue(undefined);\r\n    \tthis.setMinFillValue(undefined);\r\n    \tthis.setMaxFillValue(undefined);\r\n    },\r\n    \r\n    resetVis: function() {\r\n    \tvar vis = this.getVis();\r\n    \tif (vis) {\r\n        \tvis.selectAll('.node').remove();\r\n    \t}\r\n    },\r\n    \r\n    getTopTerms: function(query) {\r\n    \tvar limit = parseInt(this.getApiParam('numInitialTerms'));\r\n    \tvar stopList = this.getApiParam('stopList');\r\n    \tif (query !== undefined) {\r\n    \t\tlimit = undefined;\r\n    \t\tstopList = undefined;\r\n    \t}\r\n    \tthis.getCorpus().getCorpusTerms().load({\r\n    \t\tparams: {\r\n    \t\t\tquery: query,\r\n \t\t\t\tlimit: limit,\r\n \t\t\t\tstopList: stopList\r\n \t\t\t},\r\n\t\t    callback: function(records, operation, success) {\r\n\t\t    \tif (success) {\r\n\t\t    \t\tthis.loadFromRecords(records);\r\n\t\t    \t}\r\n\t\t    },\r\n\t\t    scope: this\r\n    \t});\r\n    },\r\n    \r\n    getDistinctTerms: function(query) {\r\n    \tvar limit = parseInt(this.getApiParam('numInitialTerms'));\r\n    \tvar stopList = this.getApiParam('stopList');\r\n    \tif (query !== undefined) {\r\n    \t\tlimit = undefined;\r\n    \t\tstopList = undefined;\r\n    \t}\r\n    \tvar perDocLimit = Math.ceil(parseInt(this.getApiParam('numInitialTerms')) / this.getCorpus().getDocumentsCount()); // ceil ensures there's at least 1 per doc\r\n    \tthis.getCorpus().getDocumentTerms().load({\r\n\t\t\tparams: {\r\n\t\t\t\tquery: query,\r\n\t\t\t\tlimit: limit,\r\n\t\t\t\tperDocLimit: perDocLimit,\r\n\t\t\t\tstopList: stopList,\r\n\t\t\t\tsort: 'TFIDF',\r\n\t\t\t\tdir: 'DESC'\r\n\t\t\t},\r\n\t\t\tcallback: function(records, operation, success) {\r\n\t\t\t\tif (success) {\r\n\t\t\t\t\tthis.loadFromRecords(records);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tscope: this\r\n    \t});\r\n    },\r\n    \r\n    loadFromQuery: function(query) {\r\n    \tthis.getCorpus().getCorpusTerms().load({\r\n    \t\tparams: {\r\n \t\t\t\tquery: query\r\n \t\t\t},\r\n\t\t    callback: function(records, operation, success) {\r\n\t\t    \tif (success) {\r\n\t\t    \t\tthis.loadFromRecords(records);\r\n\t\t    \t}\r\n\t\t    },\r\n\t\t    scope: this\r\n    \t});\r\n    },\r\n    \r\n    loadFromRecords: function(records) {\r\n    \tif (Ext.isArray(records) && records.length>0) {\r\n    \t\tvar maxFreq = this.getMaxRawFreq();\r\n    \t\tvar minFreq = this.getMinRawFreq();\r\n    \t\tvar minFillVal = this.getMinFillValue();\r\n    \t\tvar maxFillVal = this.getMaxFillValue();\r\n    \t\tvar terms = [];\r\n    \t\trecords.forEach(function(r) {\r\n    \t\t\tvar term = r.getTerm();\r\n    \t\t\tif (!this.getBlacklist()[term]) {\r\n\t    \t\t\tvar rawFreq = r.getRawFreq();\r\n\t    \t\t\tvar fillVal = this.getMode() === this.MODE_DISTINCT ? r.get('tfidf') : r.getInDocumentsCount();\r\n\t    \t\t\t\r\n\t    \t\t\tif (maxFreq === undefined || rawFreq > maxFreq) maxFreq = rawFreq;\r\n\t    \t\t\tif (minFreq === undefined || rawFreq < minFreq) minFreq = rawFreq;\r\n\t    \t\t\t\r\n\t    \t\t\tif (maxFillVal === undefined || fillVal > maxFillVal) maxFillVal = fillVal;\r\n\t    \t\t\tif (minFillVal === undefined || fillVal < minFillVal) minFillVal = fillVal;\r\n\t    \t\t\t\r\n\t    \t\t\tthis.getCurrentData()[term] = {\r\n\t    \t\t\t\tterm: term,\r\n\t    \t\t\t\trawFreq: rawFreq,\r\n\t    \t\t\t\trelativeFreq: r.get('relativeFreq'),//r.getRelativeFreq(),\r\n\t    \t\t\t\tfillValue: fillVal,\r\n\t    \t\t\t\tcollocates: []\r\n\t    \t\t\t};\r\n\t    \t\t\t\r\n\t    \t\t\tterms.push(term);\r\n    \t\t\t}\r\n    \t\t}, this);\r\n    \t\t\r\n    \t\tthis.setMaxRawFreq(maxFreq);\r\n    \t\tthis.setMinRawFreq(minFreq);\r\n    \t\tthis.setMinFillValue(minFillVal);\r\n    \t\tthis.setMaxFillValue(maxFillVal);\r\n    \t\t\r\n    \t\tthis.getCollocatesForQuery(terms);\r\n    \t}\r\n    },\r\n    \r\n    getCollocatesForQuery: function(query) {\r\n    \tvar whitelist = [];\r\n    \tfor (var term in this.getCurrentData()) {\r\n    \t\twhitelist.push(term);\r\n    \t}\r\n    \t \r\n    \tthis.setApiParams({\r\n    \t\tmode: 'corpus'\r\n    \t});\r\n    \tvar params = this.getApiParams();\r\n    \tthis.getCorpus().getCorpusCollocates().load({\r\n    \t\tparams: Ext.apply(Ext.clone(params), {query: query, collocatesWhitelist: whitelist, limit: this.COLLOCATES_LIMIT}),\r\n    \t\tcallback: function(records, op, success) {\r\n    \t\t\tif (success) {\r\n    \t\t\t\tthis.buildVisFromData(this.processCollocates(records));\r\n    \t\t\t}\r\n    \t\t},\r\n    \t\tscope: this\r\n    \t});\r\n    },\r\n    \r\n    processCollocates: function(records) {\r\n    \tvar currentTerms = this.getCurrentData();\r\n\r\n    \tvar maxCol = this.getMaxCollocateValue();\r\n    \t\r\n    \tfor (var i=0; i<records.length; i++) {\r\n    \t\tvar r = records[i];\r\n    \t\tvar term = r.getTerm();\r\n\t\t\tvar contextTerm = r.getContextTerm();\r\n\t\t\tvar contextFreq = r.getContextTermRawFreq();\r\n\t\t\t\r\n\t\t\tif (maxCol === undefined || contextFreq > maxCol) {\r\n\t\t\t\tmaxCol = contextFreq;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (currentTerms[term] === undefined) {\r\n\t\t\t\t// should not be here\r\n\t\t\t} else {\r\n\t    \t\tif (term != contextTerm) {\r\n\t    \t\t\tcurrentTerms[term].collocates.push({\r\n\t    \t\t\t\tterm: contextTerm, value: contextFreq\r\n\t    \t\t\t});\r\n\t    \t\t}\r\n\t\t\t}\r\n    \t}\r\n    \t\r\n    \tthis.setMaxCollocateValue(maxCol);\r\n    \t\r\n    \tvar data = [];\r\n    \tfor (var term in currentTerms) {\r\n//    \t\tif (currentTerms[term].collocates.length > 0) {\r\n    \t\t\tdata.push(currentTerms[term]);\r\n//    \t\t}\r\n    \t}\r\n    \treturn data;\r\n    },\r\n    \r\n    buildVisFromData: function(data) {\r\n    \tvar me = this;\r\n    \t\r\n    \tif (!this.getVis()) {return;} // not initialized\r\n    \t\r\n    \tvar rootId = '$$$root$$$';\r\n    \tdata.push({term: rootId, collocates:[], rawFreq:1});\r\n    \tvar root = d3.stratify()\r\n    \t\t.id(function(d) { return d.term; })\r\n    \t\t.parentId(function(d) {\r\n    \t\t\tif (d.term !== rootId) return rootId;\r\n\t\t\t\telse return '';\r\n\t\t\t})(data)\r\n\t\t\t.sort(function(a, b) { return a.rawFreq < b.rawFreq ? 1 : a.rawFreq > b.rawFreq ? -1 : 0; })\r\n\t\t\t.sum(function(d) { return Math.pow(d.rawFreq, 1/me.getScalingFactor()); });\r\n    \tthis.getVisLayout()(root);\r\n    \t\r\n    \t// join nodes with data\r\n    \tvar nodes = this.getVis().selectAll('.node').data(root.descendants());\r\n    \t\r\n    \t// update\r\n    \tnodes.attr('transform', function(d) { return 'translate(' + d.x + ',' + d.y + ')'; });\r\n    \tnodes.selectAll('circle').attr('r', function(d) { return d.r; });\r\n    \t\r\n    \tvar idGet = function(term) {\r\n    \t\treturn term.replace(/\\W/g, '_'); // remove non-word characters to create valid DOM ids\r\n    \t};\r\n    \t\r\n    \tvar collocateFill = d3.scalePow().exponent(1/3)\r\n\t\t\t.domain([0,this.getMaxCollocateValue()]).range(['#fff', '#bd3163']);\r\n    \t\r\n    \tvar defaultFill;\r\n    \tif (this.getMode() === this.MODE_DISTINCT) {\r\n    \t\tdefaultFill = d3.scalePow().exponent(1/5)\r\n    \t\t\t.domain([this.getMinFillValue(), this.getMaxFillValue()]).range(['#dedede', '#fff']);\r\n    \t} else {\r\n    \t\tdefaultFill = d3.scaleLinear()\r\n\t\t\t\t.domain([this.getMaxFillValue(), this.getMinFillValue()]).range(['#dedede', '#fff']);\r\n    \t}\r\n    \t\r\n    \t// roughly calculate font size based on available area and number of terms\r\n    \tvar size = this.getVisLayout().size();\r\n    \tvar layoutRadius = Math.min(size[0], size[1]) / 2;\r\n    \tvar layoutArea = Math.PI*(layoutRadius*layoutRadius);\r\n    \tvar totalTerms = data.length;\r\n    \tvar termArea = layoutArea / totalTerms;\r\n    \tvar termRadius = Math.sqrt(termArea / Math.PI);\r\n    \tvar minFontSize = termRadius / 3;\r\n    \tvar scalingInverse = Math.abs(this.getScalingFactor()-(this.MAX_SCALING+1));\r\n    \tscalingInverse = Math.max(1, scalingInverse-1); // substract one to avoid too large fonts\r\n    \tvar maxFontSize = minFontSize * scalingInverse;\r\n\r\n    \tvar textSizer = d3.scaleLinear()//pow().exponent(1/2)\r\n    \t\t.domain([this.getMinRawFreq(),this.getMaxRawFreq()]).range([minFontSize, maxFontSize]);\r\n    \t\r\n    \t// enter\r\n    \tvar node = nodes.enter().append('g')\r\n    \t\t.attr('class', 'node')\r\n    \t\t.style('visibility', function(d) { return d.depth > 0 ? 'visible' : 'hidden'; }) // hide root\r\n    \t\t.attr('transform', function(d) { return 'translate(' + d.x + ',' + d.y + ')'; })\r\n    \t\t.on('click', function(d) {\r\n    \t\t\tme.dispatchEvent('termsClicked', me, [d.data.term]);\r\n    \t\t})\r\n    \t\t.on('mouseover', function(d, i) {\r\n    \t\t\tme.setCurrentNode(d);\r\n    \t\t\t\r\n    \t\t\tme.getVis().selectAll('circle')\r\n    \t\t\t\t.style('stroke-width', 1)\r\n    \t\t\t\t.style('stroke', '#111')\r\n        \t\t\t.style('fill', function(d) { return defaultFill(d.data.fillValue); });\r\n    \t\t\t\r\n    \t\t\td3.select(this).select('circle')\r\n    \t\t\t\t.style('fill', '#89e1c2')\r\n    \t\t\t\t.style('stroke', '#26926c')\r\n    \t\t\t\t.style('stroke-opacity', me.MAX_STROKE_OPACITY);\r\n    \t\t\t\r\n    \t\t\tvar fillLabel;\r\n    \t\t\tif (me.getMode() === me.MODE_DISTINCT) {\r\n    \t\t\t\tfillLabel = me.localize('tfidf');\r\n    \t\t\t} else {\r\n    \t\t\t\tfillLabel = me.localize('inDocs');\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tif (!me.getContextMenu().isVisible()) {\r\n\t    \t\t\tvar info = '<b>'+d.data.term+'</b> ('+d.data.rawFreq+')<br/>'+fillLabel+': '+d.data.fillValue;\r\n\t\t\t\t\tvar tip = me.getTip();\r\n\t\t\t\t\ttip.update(info);\r\n\t\t\t\t\ttip.show();\r\n    \t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < d.data.collocates.length; i++) {\r\n\t\t\t\t\tvar collocate = d.data.collocates[i];\r\n\t\t\t\t\tvar match = me.getVis().selectAll('.node').filter(function(d) { return d.data.term === collocate.term; });\r\n\t\t\t\t\tmatch.select('circle')\r\n\t\t\t\t\t\t.style('fill', function(d) { return collocateFill(collocate.value); })\r\n\t\t\t\t\t\t.style('stroke', '#bd3163')\r\n\t\t\t\t\t\t.style('stroke-opacity', me.MAX_STROKE_OPACITY);\r\n\t\t\t\t\tmatch.select('tspan.value').text(function(d) { return collocate.value; });\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.on('mousemove', function() {\r\n\t\t\t\tme.getTip().setPosition(d3.event.pageX+5, d3.event.pageY-50);\r\n\t\t\t})\r\n\t\t\t.on('mouseout', function() {\r\n\t\t\t\tif (!me.getContextMenu().isVisible()) {\r\n\t\t\t\t\tme.setCurrentNode(undefined);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tme.getVis().selectAll('circle').style('stroke-opacity', me.MIN_STROKE_OPACITY).style('stroke', '#111')\r\n\t    \t\t\t.style('fill', function(d) { return defaultFill(d.data.fillValue); });\r\n\t\t\t\tme.getVis().selectAll('tspan.value').text('');\r\n\t\t\t\tme.getTip().hide();\r\n//\t\t\t\tme.getVisInfo().text('');\r\n\t\t\t})\r\n\t\t\t.on('contextmenu', function(d, i) {\r\n\t\t\t\td3.event.preventDefault();\r\n\t\t\t\tme.getTip().hide();\r\n\t\t\t\tvar menu = me.getContextMenu();\r\n\t\t\t\tmenu.queryById('label').setHtml(d.data.term);\r\n\t\t\t\tmenu.showAt(d3.event.pageX+5, d3.event.pageY-50);\r\n\t\t\t});\r\n    \t\r\n    \tnode.append('circle')\r\n    \t\t.attr('id', function(d) {\r\n    \t\t\treturn idGet(d.data.term);\r\n\t\t\t})\r\n\t\t\t.attr('r', function(d) { return d.r; })\r\n\t\t\t.style('fill', function(d) { return defaultFill(d.data.fillValue); })\r\n\t\t\t.style('stroke', '#111')\r\n\t\t\t.style('stroke-opacity', me.MIN_STROKE_OPACITY)\r\n\t\t\t.style('stroke-width', 1);\r\n    \t\r\n    \tnode.append('clipPath').attr('id', function(d) { return 'clip-' + idGet(d.data.term); })\r\n    \t\t.append('use').attr('xlink:href', function(d) { return '#' + idGet(d.data.term); });\r\n\t\t\r\n    \tvar text = node.append('text')\r\n    \t\t.attr('clip-path', function(d) { return 'url(#clip-' + idGet(d.data.term) + ')'; })\r\n    \t\t.style('font-family', function(d) { return me.getApplication().getCategoriesManager().getFeatureForTerm('font', d.data.term); })\r\n\t\t\t.style('text-anchor', 'middle')\r\n\t\t\t.style('cursor', 'default');\r\n\t\ttext.append('tspan')\r\n\t\t\t.attr('class', 'term')\r\n\t\t\t.attr('font-size', function(d) { return textSizer(d.data.rawFreq); })\r\n\t\t\t.attr('x', 0)\r\n\t\t\t.attr('y', function(d) { return textSizer(d.data.rawFreq)/4; })\r\n\t\t\t.text(function(d) { return d.data.term; });\r\n\t\ttext.append('tspan')\r\n\t\t\t.attr('class', 'value')\r\n\t\t\t.attr('font-size', function(d) { return textSizer(d.data.rawFreq)*0.75; })\r\n\t\t\t.attr('x', 0)\r\n\t\t\t.attr('y', function(d) { return textSizer(d.data.rawFreq)+1; });\r\n\t\t\r\n\t\t// exit\r\n    \tnodes.exit().remove();\r\n\t\t\r\n    },\r\n    \r\n    initVisLayout: function() {\r\n    \tvar el = this.getLayout().getRenderTarget();\r\n\t\tel.update(''); // make sure to clear existing contents (especially for re-layout)\r\n    \tvar width = el.getWidth();\r\n\t\tvar height = el.getHeight();\r\n\r\n\t\tvar me = this;\r\n\t\tthis.setVisLayout(\r\n\t\t\td3.pack().size([width, height]).padding(1.5)\r\n\t\t);\r\n\t\t\r\n\t\tvar svg = d3.select(el.dom).append('svg').attr('id',this.getVisId()).attr('width', width).attr('height', height);\r\n\t\tthis.setVis(svg.append('g'));\r\n\t\t\r\n\t\tthis.setVisInfo(svg.append('text').attr('x', 10).attr('y', 10));\r\n\t\t\r\n\t\tif (this.getTip() === undefined) {\r\n\t\t\tthis.setTip(Ext.create('Ext.tip.Tip', {}));\r\n\t\t}\r\n    }\r\n});","/**\n * Terms Radio tool, a visualization for term distributions.\n * \n * <iframe src=\"../?corpus=austen&view=termsradio\" style=\"max-width: 600px; height: 600px\"></iframe>\n * \n * The typical use is not to instantiate this class directly, but to embed the tool from a corpus.\n * \n * \t\tvar austen;\n * \t\tnew Corpus(\"austen\").then(function(corpus) {\n * \t\t\tausten = corpus;\n * \t\t\tausten.embed('TermsRadio'); // simply embed\n * \t\t\tausten.embed('TermsRadio', {visibleBins: 8}); // embed with parameter\n * \t\t});\n * \n * @class Voyant.panel.TermsRadio\n * @author Mark Turcato\n * @author Andrew MacDonald\n */\nExt.define('Voyant.panel.TermsRadio', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.termsradio',\n\tconfig: {\n\t\t/**\n\t\t * @private\n\t\t */\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tspeed: 50,\n\t\t/**\n\t\t * @private\n\t\t */\n\t\ttermsRadio: undefined\n\t},\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\t/**\n    \t\t * @private (this shouldn't be modified but it needs to be part of the parameters)\n    \t\t */\n    \t\twithDistributions: true,\n\n    \t\t/**\n    \t\t * @cfg {Number} bins How many document segments to show if the corpus has a single document (default is 10); otherwise, the number of bins corresponds to the number of documents in the corpus.\n    \t\t * \n    \t\t * Note that this often works in parallel with the {@link #bins} value.\n    \t\t */\n    \t\tbins: 5\n    \t\n    \t\t/**\n    \t\t * @cfg {Number} visibleBins How many segments or documents to show at once (default is 5).\n    \t\t * \n    \t\t * Note that this often works in parallel with the {@link #bins} value.\n    \t\t */\n    \t\t,visibleBins: 5\n    \t\t\n    \t\t/**\n    \t\t * @property docIdType The document type(s) to restrict results to.\n    \t\t * @type String|Array\n    \t\t * @default null\n    \t\t * @private\n    \t\t */\n    \t\t,docIdType: null\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} limit Determine the number of terms to show (larger numbers may make the graph unusable).\n    \t\t */\n    \t\t,limit: 50\n    \t\n    \t\t/**\n        \t * @property mode What mode to operate at, either document or corpus.\n        \t * @choices document, corpus\n    \t\t * @private\n        \t */\n    \t\t,mode: null\n    \t\t\n    \t\t/**\n        \t * @property position The current shifted position of the visualization.\n        \t * @type Integer\n        \t * @default 0\n    \t\t * @private\n        \t */\n    \t\t,position: 0\n    \t\t\n    \t\t/**\n    \t\t * @property selectedWords The words that have been selected.\n    \t\t * @type String|Array\n    \t\t * @default null\n    \t\t * @private\n    \t\t */\n    \t\t,selectedWords: []\n    \t\t\n\t\t\t/**\n\t\t\t * @cfg {String} stopList A comma-separated list of words, a named list or a URL to a plain text list, one word per line.\n\t\t\t * \n\t\t\t *  By default this is set to 'auto' which auto-detects the document's language and loads an appropriate list (if available for that language). Set this to blank to not use the default stopList.\n\t\t\t *  \n\t\t\t * For more information see the <a href=\"#!/guide/search\">Stopwords documentation</a>.\n\t\t\t */\n    \t\t,stopList: 'auto'\n    \t\t\n    \t\t/**\n    \t\t * @property query The corpus type(s) to restrict results to.\n    \t\t * @type String\n    \t\t * @default null\n    \t\t * @private\n    \t\t */\n    \t\t,query: null\n    \t\t\n    \t\t/**\n    \t\t * @property yAxisScale The scale for the y axis.\n    \t\t * @type String\n    \t\t * @default log\n    \t\t * @private\n    \t\t */\n    \t\t,yAxisScale: 'log'\n    \t\t\t\n    \t\t,speed: 50\n    \t\t\n    \t\t/**\n    \t\t * @property slider Whether to show the slider\n    \t\t * @type Boolean\n    \t\t * @default true\n    \t\t */\n    \t\t,slider: undefined\n    \t},\n    \tglyph: 'xf201@FontAwesome'\n    }\n\t\n\t/**\n\t * @private\n\t */\n\t,constructor: function(config) {\n\t\t\n\t\tvar onLoadHandler = function(mode, store, records, success, operation) {\n\t\t\tthis.setApiParams({mode: mode});\n\n\t\t\tthis.getTermsRadio().loadRecords(records);\n\t\t\t\n\t\t\tvar query = this.getApiParam('query');\n\t\t\t// check for no results\n\t\t\tif (query) {\n\t\t\t\tif (records.length==0 || (records.length==1 && records[0].getRawFreq()==0)) {\n\t\t\t\t\tthis.toastInfo({\n\t\t\t\t\t\thtml: this.localize(\"termNotFound\"),\n\t\t\t\t\t\talign: 'bl'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.getTermsRadio().highlightQuery(query, true);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis.corpusStore = Ext.create(\"Voyant.data.store.CorpusTerms\", {\n\t\t\tlisteners : {\n\t\t\t\tload: {\n\t\t\t\t\tfn : onLoadHandler.bind(this, 'corpus'),\n\t\t\t\t\tscope : this\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.documentStore = Ext.create(\"Voyant.data.store.DocumentTerms\", {\n\t\t\tlisteners : {\n\t\t\t\tload: {\n\t\t\t\t\tfn : onLoadHandler.bind(this, 'document'),\n\t\t\t\t\tscope : this\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tExt.apply(config, {\n\t\t\ttitle: this.localize('title'),\n\t\t\tlegendMenu: Ext.create('Ext.menu.Menu', {\n\t\t\t\titems: [\n        \t\t\t{text: '', itemId: 'remove', glyph: 'xf068@FontAwesome'}\n        \t\t]\n        \t}),\n\t\t\ttbar: new Ext.Toolbar({\n                overflowHandler: 'scroller',\n\t\t\t\titems: {\n\t\t\t\t\txtype: 'legend',\n\t\t\t\t\tstore: new Ext.data.JsonStore({\n\t\t\t\t\t\tfields : ['name', 'mark']\n\t\t\t\t\t}),\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\titemclick: function(view, record, el, index) {\n\t\t\t\t\t\t\tvar term = record.get('name');\n\t\t\t\t\t\t\tif (this.getTermsRadio().isTermSelected(term)) {\n\t\t\t\t\t\t\t\tthis.getTermsRadio().doTermDeselect(term);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.getTermsRadio().doTermSelect(term);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\titemcontextmenu: function(view, record, el, index, event) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t            \tvar xy = event.getXY();\n\t\t\t            \t\n\t\t\t            \tvar term = record.get('name');\n\t\t\t            \tvar text = (new Ext.Template(this.localize('removeTerm'))).apply([term]);\n\t\t            \t\tthis.legendMenu.queryById('remove').setText(text);\n\t\t            \t\t\n\t\t            \t\tthis.legendMenu.on('click', function(menu, item) {\n\t\t            \t\t\tif (item !== undefined) {\n\t\t            \t\t\t\tthis.doTermDeselect(term, true);\n\t\t            \t\t\t}\n\t\t            \t\t}, this, {single: true});\n\t\t            \t\tthis.legendMenu.showAt(xy);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t\tbbar: {\n                overflowHandler: 'scroller',\n\t            items: [{\n\t            \txtype: 'querysearchfield'\n\t            },{\n\t    \t\t\tglyph: 'xf04b@FontAwesome', // start with play button, which means we're paused\n\t    \t\t\titemId: 'play',\n\t    \t\t\thandler: function(btn) {\n\t    \t\t\t\tvar playing = btn.glyph==\"xf04c@FontAwesome\";\n\t    \t\t\t\tif (playing) {\n\t    \t\t\t\t\tthis.getTermsRadio().continueTransition = false;\n\t    \t\t\t\t\tthis.mask(this.localize(\"completingTransition\"))\n\t    \t\t\t\t\tbtn.setPlaying(false)\n\t    \t\t\t\t}\n\t    \t\t\t\telse {\n\t    \t\t\t\t\tthis.getTermsRadio().toggleRightCheck();\n\t    \t\t\t\t\tbtn.setPlaying(true);\n\t    \t\t\t\t}\n\t    \t\t\t},\n\t    \t\t\tscope: this,\n\t    \t\t\tsetPlaying: function(bool) {\n\t    \t\t\t\tthis.setGlyph(bool ? \"xf04c@FontAwesome\" : \"xf04b@FontAwesome\")\n\t    \t\t\t}\n\t    \t\t},{\n\t    \t\t\tglyph: 'xf0e2@FontAwesome',\n//\t    \t\t\ttext: this.localize('reset')\n\t    \t\t\ttooltip : this.localize('resetTip'),\n\t    \t\t\tlisteners : {\n\t    \t\t\t\tclick : {fn : function() {\n\t    \t\t\t\t\tthis.queryById(\"play\").setPlaying(false);\n\t\t\t\t\t\t\tthis.getTermsRadio().shiftCount = 0;\n\t\t\t\t\t\t\tthis.getTermsRadio().prepareData();\n\t\t\t\t\t\t\tthis.getTermsRadio().redraw();\n    \t\t\t\t\t}\t\t\t\t\n\t    \t\t\t\t\t,scope : this\n\t    \t\t\t\t}\n\t    \t\t\t}\n\t    \t\t},{\n\t    \t\t\txtype: 'label',\n\t    \t\t\tforId: 'terms',\n\t    \t\t\ttext: this.localize('terms')\n\t    \t\t},{\n\t    \t\t\txtype: 'slider',\n\t    \t\t\titemId: 'terms',\n\t    \t\t\thideLabel: true,\n\t    \t\t\twidth : 60,\n\t    \t\t\tincrement : 5,\n\t    \t\t\tminValue : 5,\n\t    \t\t\tmaxValue : 100,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"limit\")))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({limit: newvalue});\n\t            \t\t\tthis.loadStore();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t    \t\t},{\n\t    \t\t\txtype: 'label',\n\t    \t\t\tforId: 'speed',\n\t    \t\t\ttext: this.localize('speed')\n\t    \t\t},{\n\t    \t\t\txtype: 'slider',\n\t    \t\t\titemId: 'speed',\n\t    \t\t\thideLabel: true,\n\t    \t\t\twidth : 60,\n\t    \t\t\tincrement : 5,\n\t    \t\t\tminValue : 5,\n\t    \t\t\tmaxValue : 100,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"speed\")))\n\t            \t\t\tthis.setSpeed(slider.getValue())\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({speed: newvalue});\n\t            \t\t\tthis.setSpeed(newvalue)\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t    \t\t},{\n\t    \t\t\txtype: 'label',\n\t    \t\t\titemId: 'visibleSegmentsLabel',\n\t    \t\t\tforId: 'visibleBins',\n\t    \t\t\ttext: this.localize('visibleSegments')\n\t    \t\t},{\n\t    \t\t\txtype: 'slider',\n\t    \t\t\titemId: 'visibleBins',\n\t    \t\t\thideLabel: true,\n\t    \t\t\twidth : 60,\n\t    \t\t\tincrement : 1,\n\t    \t\t\tminValue : 1,\n\t    \t\t\tmaxValue : 100,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"visibleBins\")))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({visibleBins: newvalue});\n\t\t\t\t\t\t\tthis.numVisPoints = newvalue;\n\t\t\t\t\t\t\tthis.loadStore();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (this.numVisPoints == this.getCorpus().getDocumentsCount()) {\n\t\t\t\t\t\t\t\tthis.getTermsRadio().hideSlider();\n\t\t\t\t\t\t\t} else if (this.getApiParam(\"slider\") != 'false'){\n\t\t\t\t\t\t\t\tthis.getTermsRadio().showSlider();\n\t\t\t\t\t\t\t}\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t    \t\t},{\n\t    \t\t\txtype: 'label',\n\t    \t\t\titemId: 'segmentsLabel',\n\t    \t\t\tforId: 'segments',\n\t    \t\t\ttext: this.localize('segments')\n\t    \t\t},{\n\t    \t\t\txtype: 'slider',\n\t    \t\t\titemId: 'segments',\n\t    \t\t\thideLabel: true,\n\t    \t\t\twidth : 60,\n\t    \t\t\tincrement : 1,\n\t    \t\t\tminValue : 1,\n\t    \t\t\tmaxValue : 100,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"bins\")))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({bins: newvalue});\n\t\t\t\t\t\t\tthis.numDataPoints = newvalue;\n\t\t\t\t\t\t\tthis.loadStore();\n\t\t\t\t\t\t\tvar visibleBins = this.queryById('visibleBins');\n\t\t\t\t\t\t\tvisibleBins.setMaxValue(newvalue) // only relevant for doc mode\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n\t    \t\t}]\n\t\t\t}\n\t\t});\n\t\t\n\t\t// need to add option here so we have access to localize\n\t\tthis.config.options.push({\n\t\t\txtype: 'combo',\n\t\t\tqueryMode : 'local',\n\t\t\ttriggerAction : 'all',\n\t\t\tforceSelection : true,\n\t\t\teditable : false,\n\t\t\tfieldLabel : this.localize('yScale'),\n\t\t\tlabelAlign : 'right',\n\t\t\tname : 'yAxisScale',\n\t\t\tvalueField : 'value',\n\t\t\tdisplayField : 'name',\n\t\t\tstore: new Ext.data.JsonStore({\n\t\t\t\tfields : ['name', 'value'],\n\t\t\t\tdata   : [{\n\t\t\t\t\tname : this.localize('linear'),   value: 'linear'\n\t\t\t\t},{\n\t\t\t\t\tname : this.localize('log'),  value: 'log'\n\t\t\t\t}]\n\t\t\t}),\n\t\t\tlisteners: {\n\t\t\t\tafterrender: function(combo) {\n\t\t\t\t\tcombo.setValue(this.getApiParam('yAxisScale'));\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.callParent(arguments);\n\t\tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t\t\n\t\tthis.on('boxready', function(component) {\n\t\t\tvar sliderParam = this.getApiParam('slider');\n\t\t\tvar showSlider = sliderParam === undefined ? true : sliderParam === 'true';\n\t\t\tvar config = {\n\t\t\t\tparent: this,\n\t\t\t\tcontainer: this.body,\n\t\t\t\tshowSlider: showSlider\n\t\t\t};\n\t\t\tthis.setTermsRadio(new TermsRadio(config));\n\t\t}, this);\n\t\t\n\t\t/**\n\t\t * @event corpusTypesSelected\n\t\t * @type listener\n\t\t * @private\n\t\t */\n\t\tthis.addListener('corpusTermsClicked', function(src, terms){\n\t\t\tif (this.getCorpus().getDocumentsCount() > 1) {\n        \t\tterms.forEach(function(term) {\n        \t\t\tvar t = term.getTerm();\n        \t\t\tthis.setApiParams({query: t});\n        \t\t\tthis.loadStore();\n        \t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.addListener('documentTermsClicked', function(src, terms){\n\t\t\tif(src && src.xtype==this.xtype) {return false;}\n\t\t\t\n\t\t\tterms.forEach(function(term) {\n    \t\t\tvar t = term.getTerm();\n    \t\t\tthis.setApiParams({query: t});\n    \t\t\tthis.loadStore();\n    \t\t});\n\t\t});\n\t\t\n\t\tthis.on('query', function(src, query){\n\t\t\tthis.fireEvent(\"termsClicked\", src, query);\n\t    });\n\t\t\n\t\tthis.on(\"termsClicked\", function(src, terms) {\n\t\t\t// TODO load term distribution data\n\t\t\tterms.forEach(function(term) {\n\t\t\t\tvar queryTerm;\n    \t\t\tif (Ext.isString(term)) {queryTerm = term;}\n    \t\t\telse if (term.term) {queryTerm = term.term;}\n    \t\t\telse if (term.getTerm) {queryTerm = term.getTerm();}\n    \t\t\t\n    \t\t\t// TODO handling for multiple terms\n    \t\t\tthis.setApiParams({query: queryTerm});\n    \t\t\tthis.loadStore();\n    \t\t}, this);\n    \t});\n\t\t\n\t\tthis.on(\"loadedCorpus\", function(src, corpus) {\n    \t\tthis.documentStore.setCorpus(corpus);\n    \t\tthis.corpusStore.setCorpus(corpus);\n    \t\t\n    \t\tvar params = this.getApiParams();\n\t\t\tif (params.type) {\n\t\t\t\tdelete params.limit;\n\t\t\t}\n\t\t\tvar store;\n\t\t\t\n\t\t\tvar docsCount = this.getCorpus().getDocumentsCount();\n\t\t\tvar segments = this.queryById(\"segments\");\n\t\t\tvar visibleBins = this.queryById(\"visibleBins\");\n\t\t\tif (params.mode=='document' || docsCount == 1) {\n\t\t\t\tthis.setApiParam(\"mode\", \"document\");\n\t\t\t\tstore = this.documentStore;\n\t\t\t\tvisibleBins.setMaxValue(segments.getValue())\n\t\t\t} else {\n\t\t\t\tthis.setApiParam(\"mode\", \"corpus\");\n\t\t\t\tdelete params.bins;\n\t\t\t\tstore = this.corpusStore;\n\t\t\t\tsegments.hide();\n\t\t\t\tthis.queryById(\"segmentsLabel\").hide();\n\t\t\t\tvar visibleBins = this.queryById(\"visibleBins\");\n\t\t\t\tvisibleBins.setMaxValue(docsCount);\n\t\t\t\tif (parseInt(this.getApiParam(\"visibleBins\")>docsCount)) {\n\t\t\t\t\tvisibleBins.setValue(docsCount);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// select top 3 words\n\t\t\tstore.on('load', function(store, records) {\n\t\t\t\tfor (var i = 0; i < 3; i++) {\n\t\t\t\t\tvar r = records[i];\n\t\t\t\t\tif (r) {\n\t\t\t\t\t\tthis.getTermsRadio().highlightRecord(r, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this, {single: true});\n\t\t\tstore.load({params: params});\n    \t}, this);\t\t\n\t}\n\t\n    ,loadStore: function () {\n    \tthis.queryById('play').setPlaying(false);\n\t\tvar params = this.getApiParams();\n\t\tif(this.getApiParam('mode') === 'document') { \n\t\t\tthis.documentStore.load({params: params});\n\t\t}\n\t\tif(this.getApiParam('mode') === 'corpus') {\n\t\t\tdelete params.bins;\n\t\t\tthis.corpusStore.load({params: params});\n\t\t}\n\t}\n    \n});\n","/**\n * Trends tool, a line graph that shows term distributions.\n * \n * <iframe src=\"../?corpus=austen&view=trends\" style=\"max-width: 500px; height: 300px\"></iframe>\n * \n * The typical use is not to instantiate this class directly, but to embed the tool from a corpus.\n * \n * \t\tvar austen;\n * \t\tnew Corpus(\"austen\").then(function(corpus) {\n * \t\t\tausten = corpus;\n * \t\t\tausten.embed('Trends'); // simply embed\n * \t\t\tausten.embed('Trends', {query: '^lov*'}); // embed with query\n * \t\t});\n */\nExt.define('Voyant.panel.Trends', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\trequires: ['Voyant.data.store.Documents'],\n\talias: 'widget.trends',\n\tconfig: {\n\t    /**\n\t     * @private\n\t     */\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'},\n\n    \t\t{\n    \t\t\tname: 'bins',\n\t\t    \txtype: 'slider',\n\t\t    \tlabelAlign: 'right',\n\t\t    \twidth: 200,\n\t\t    \tminValue: 2,\n\t\t    \tmaxValue: 100,\n\t        \tlisteners: {\n\t        \t\tafterrender: function(slider) {\n\t        \t\t\tvar trends = slider.up(\"window\").panel;\n\t        \t\t\tslider.setFieldLabel(trends.localize(\"segmentsSlider\"));\n\t        \t\t}\n\t        \t}    \t\t\n    \t\t},{\n                xtype: 'radiogroup',\n\t\t    \tlabelAlign: 'right',\n                columns: 3,\n                vertical: true,\n                name: 'withDistributions',\n                items: [{\n                    boxLabel: 'raw',\n                    name: 'withDistributions',\n                    inputValue: 'raw'\n                },{\n                    boxLabel: 'relative',\n                    name: 'withDistributions',\n                    inputValue: 'relative',\n                    style: 'margin-left: 1em;'\n                }],\n\t        \tlisteners: {\n\t        \t\tafterrender: function(radiogroup) {\n\t        \t\t\tvar panel = this.up(\"window\").panel;\n\t        \t\t\tthis.setFieldLabel(\"frequencies\");\n\t        \t\t\tvar val = panel.getApiParam(\"withDistributions\");\n\t        \t\t\tradiogroup.getBoxes().forEach(function(item) {\n\t        \t\t\t\titem.setBoxLabel(panel.localize(item.inputValue));\n\t        \t\t\t\titem.checked = item.inputValue==val;\n\t        \t\t\t});\n\t        \t\t\tthis.setValue({withDistributions: val});\n\t        \t\t}\n\t        \t}\n    \t\t},{xtype: 'colorpaletteoption'}]\n\t},\n    statics: {\n    \ti18n: {    \t\t\n    \t},\n    \tapi: {\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} limit Determine the number of terms to show (larger numbers may make the graph unusable).\n    \t\t */\n    \t\tlimit: 5,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String} stopList A comma-separated list of words, a named list or a URL to a plain text list, one word per line.\n    \t\t * \n    \t\t *  By default this is set to 'auto' which auto-detects the document's language and loads an appropriate list (if available for that language). Set this to blank to not use the default stopList.\n    \t\t *  \n    \t\t * For more information see the <a href=\"#!/guide/search\">Stopwords documentation</a>.\n    \t\t */\n    \t\tstopList: 'auto',\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String/String[]} query A query or array of queries (queries can be separated by a comma).\n    \t\t * \n    \t\t * For query syntax, see the <a href=\"#!/guide/search\">search documentation</a>.\n    \t\t */\n    \t\tquery: undefined,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String} withDistributions Determine whether to show \"raw\" or \"relative\" frequencies (those are the two valid values).\n    \t\t * \n    \t\t * The default value is \"relative\" (unless there's only one document in the corpus, in which case raw frequencies are shown).\n    \t\t */\n    \t\twithDistributions: 'relative',\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number} bins The number of segments to use.\n    \t\t * \n    \t\t * The default value will depend on the nature of the corpus:\n    \t\t * \n    \t\t * - corpus has one document: the default number of bins is 10\n    \t\t * - corpus has multiple documents:\n    \t\t *   - corpus has up to 100 documents: the default number is the size of the corpus\n    \t\t *   - corpus has more than 1000 documents: the default number is 100\n    \t\t */\n    \t\tbins: 10,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {Number/Number[]/String} docIndex The index of one or more documents, as a number, or numbers separated by commas or in an array.\n    \t\t * \n    \t\t * The first document's index is 0 and so on.\n    \t\t */\n    \t\tdocIndex: undefined,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String/String[]} docId The document ID of one or more documents, as a string, or strings separated by commas or in an array.\n    \t\t */\n    \t\tdocId: undefined,\n    \t\t\n    \t\t/**\n    \t\t * @cfg {String} mode Force the mode to be either \"corpus\" (distribution of terms across documents) or \"document\" (distribution of terms within a document); usually this is correctly set by default according to whether the corpus has one document (\"document\") or more than one (\"corpus\").\n    \t\t */\n    \t\tmode: \"corpus\",\n    \t\t\n    \t\tchartType: 'barline',\n    \t\t\n    \t\tlabels: false\n    \t},\n\t\tglyph: 'xf201@FontAwesome'\n    },\n    \n    layout: 'fit',\n    documentTermsStore: undefined,\n    //segments: undefined,\n    \n    /**\n     * @private\n     */\n    constructor: function(config) {\n    \tthis.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // we need api\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                    xtype: 'querysearchfield'\n                },{\n                \titemId: 'reset',\n                \ttext: this.localize(\"reset\"),\n                \ttooltip: this.localize(\"resetTip\"),\n                \thandler: function(btn) {\n                \t\tthis.setApiParams({\n                \t\t\tdocIndex: undefined,\n                \t\t\tmode: undefined,\n                \t\t\tquery: undefined\n                \t\t});\n                \t\tthis.loadCorpusTerms();\n                \t},\n                \tscope: this\n\t\t\t\t},{\n\t\t\t\t\ttext: this.localize('display'),\n\t\t\t\t\ttooltip: this.localize('displayTip'),\n\t\t\t\t\tglyph: 'xf013@FontAwesome',\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\tafterrender: function(menu) {\n\t\t\t\t\t\t\t\tvar val = this.getApiParam(\"chartType\");\n\t\t\t\t\t\t\t\tmenu.items.each(function(item) {\n\t\t\t\t\t\t\t\t\tif (item.getItemId()==val) {\n\t\t\t\t\t\t\t\t\t\titem.addCls(item.activeCls);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t},\n\t                    defaults: {\n\t                        xtype: 'menuitem',\n\t                        handler: function(item, checked) {\n\t                        \tif (item.xtype==\"menucheckitem\") { // labels\n\t\t                        \tthis.setApiParam(\"labels\", item.checked);\n\t                        \t} else {\n\t\t                        \tthis.setApiParam(\"chartType\", item.getItemId());\n\t                        \t}\n\t                        \tthis.loadCorpusTerms();\n\t                        },\n\t                        scope: this\n\t                    },\n\t                    items: [{\n\t                    \txtype: 'menucheckitem',\n\t                    \ttext: this.localize('labels'),\n\t                        tooltip: this.localize('labelsTip'),\n\t                        checked: this.getApiParam(\"labels\")===true || this.getApiParam(\"labels\")==\"true\"\n\t                    },'-',{\n\t                        itemId: 'area',\n\t                        text: this.localize('area'),\n\t                        tooltip: this.localize('areaTip'),\n\t                        glyph: 'xe76b@Sencha-Examples'\n\t                    },{\n\t                        itemId: 'bar',\n\t                        text: this.localize('bar'),\n\t                        tooltip: this.localize('barTip'),\n\t                        glyph: 'xe768@Sencha-Examples'\n\t                    },{\n\t                        itemId: 'line',\n\t                        text: this.localize('line'),\n\t                        tooltip: this.localize('lineTip'),\n\t                        glyph: 'xe773@Sencha-Examples'\n\t                    },{\n\t                        itemId: 'stacked',\n\t                        text: this.localize('stacked'),\n\t                        tooltip: this.localize('stackedTip'),\n\t                        glyph: 'xe6c8@Sencha-Examples'\n\t                    },{\n\t                        itemId: 'barline',\n\t                        text: this.localize('barline'),\n\t                        tooltip: this.localize('barlineTip'),\n\t                        glyph: 'xe779@Sencha-Examples'\n\t                    }]\n\t\t\t\t\t}\n\t\t\t\t}]\n            }]\n    \t});\n        this.callParent(arguments);\n    },\n    \n    listeners: {\n    \tloadedCorpus: function(src, corpus) {\n    \t\tthis.loadCorpusTerms();\n    \t},\n    \ttermsClicked: function(src, terms) {\n    \t\tvar queryTerms = [];\n    \t\tterms.forEach(function(term) {\n    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n    \t\t\telse if (term.term) {queryTerms.push(term.term);}\n    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n    \t\t});\n    \t\tthis.setApiParam(\"query\", queryTerms && queryTerms.length>0 ? queryTerms : undefined);\n    \t\tthis.loadCorpusTerms();\n    \t},\n    \tcorpusTermsClicked: function(src, terms) {\n    \t\tthis.setApiParam(\"query\", terms.map(function(term) {return term.getTerm()}));\n    \t\tthis.loadCorpusTerms();\n    \t},\n    \tdocumentSelected: function(src, document) {\n\t\t\tthis.setApiParam(\"docIndex\", this.getCorpus().getDocument(document).getIndex());\n    \t\tthis.loadDocumentTerms();\n    \t},\n    \tdocumentsClicked: function(src, documents) {\n    \t\tif (documents.length==1) {\n    \t\t\tthis.fireEvent(\"documentSelected\", this, documents[0])\n    \t\t}\n    \t},\n    \tquery: function(src, query) {\n\t\t\tthis.fireEvent(\"termsClicked\", this, query)\n    \t}\n    },\n    \n    loadCorpusTerms: function(params) {\n    \t// if our corpus only has one document or if we have docIndex d\n    \tif (\n    \t\tthis.getCorpus().getDocumentsCount()<2 || // only one document\n    \t\tthis.getApiParam(\"mode\")==\"document\" || // in document mode\n    \t\tArray.from(this.getApiParam(\"docIndex\") || \"\").length>0 // we have a docIndex defined\n    \t\t) {\n    \t\treturn this.loadDocumentTerms();\n    \t}\n    \tif (!this.getApiParam(\"query\")) {\n        \tthis.getCorpus().getCorpusTerms().load({\n        \t\tparams: {\n        \t\t\tlimit: 5,\n        \t\t\tstopList: this.getApiParam(\"stopList\")\n        \t\t},\n        \t\tcallback: function(records, operation, success) {\n        \t\t\tif (records.length==0) {\n        \t\t\t\tif (operation && operation.error) {\n        \t\t\t\t\tthis.showError(this.localize(\"noResults\")+\"<p style='color: red'>\"+operation.error+\"</p>\")\n        \t\t\t\t} else {\n        \t\t\t\t\tthis.showError(this.localize(\"noResults\"))\n        \t\t\t\t}\n        \t\t\t} else {\n            \t\t\tthis.setApiParam(\"query\", records.map(function(r) {return r.getTerm()}))\n            \t\t\tthis.loadCorpusTerms();\n        \t\t\t}\n        \t\t},\n        \t\tscope: this\n        \t})\n    \t\treturn;\n    \t}\n    \tparams = params || {};\n    \t//this.segments.hide();\n    \tvar withDistributions = this.getApiParam(\"withDistributions\");\n    \tExt.applyIf(params, {\n    \t\tbins: this.getCorpus().getDocumentsCount(),\n\t\t\tlimit: 100, // should have query, so no limit \n\t    \tstopList: \"\" // automatic queries should be stopped already\n    \t});\n    \tvar docLabels = this.getCorpus().map(function(doc) {return doc.getTinyTitle()})\n    \tif (Ext.Array.unique(docLabels).length<docLabels.length) { // we have duplicates, add index\n    \t\tdocLabels = docLabels.map(function(doc,i) {return (i+1)+\")\"+ doc})\n    \t}\n    \tExt.applyIf(params, this.getApiParams());\n    \tthis.getCorpus().getCorpusTerms().load({\n    \t\tparams: params,\n    \t\tcallback: function(records, operation, success) {\n    \t\t\tvar data = [], series = [], chartType = this.getApiParam('chartType');\n    \t\t\trecords.forEach(function(record, index) {\n    \t    \t\tvar term = record.get('term'), docIndex = record.get(\"docIndex\");\n    \t    \t\tvar color = this.getApplication().getColorForTerm(term, true);\n    \t    \t\trecord.get('distributions').forEach(function(r, i) {\n    \t    \t\t\tif (!data[i]) {\n    \t    \t\t\t\tdata[i] = {\"index\": docLabels[i]};\n    \t    \t\t\t}\n    \t    \t\t\tdata[i][\"_\"+index] = withDistributions=='relative' ? r.toFixed(7) : r;\n    \t    \t\t\tdata[i][\"term\"+index] = term;\n    \t    \t\t}, this);\n    \t    \t\t\n    \t    \t\t\n    \t    \t\tif (chartType!='bar') {\n    \t    \t\t\tvar kinds = chartType=='barline' ? [\"bar\",\"line\"] : [chartType];\n    \t    \t\t\tkinds.forEach(function(kind) {\n    \t    \t        \tseries.push({\n    \t    \t        \t\ttype: kind=='stacked' ? 'bar' : kind,\n    \t    \t    \t\t\ttitle: term,\n    \t    \t    \t\t\txField: 'index',\n    \t    \t    \t\t\tyField: '_'+index,\n    \t    \t    \t\t\tterm: term,\n    \t    \t    \t\t\tcolors: [color],\n    \t    \t    \t\t\tlabel: chartType=='barline' && kind=='bar' ? {\n    \t    \t    \t\t\t\tdisplay: 'none'\n    \t    \t    \t\t\t} : {\n    \t    \t    \t\t\t\tfield: \"term\"+index\n    \t    \t    \t\t\t}\n    \t    \t        \t})\n    \t    \t\t\t}, this);\n    \t    \t\t}\n    \t\t\t}, this);\n    \t\t\t\n    \t\t\tvar terms = records.map(function(r) {return r.getTerm()})\n    \t\t\tvar colors = terms.map(function(term) {\n\t    \t\t\treturn  this.getApplication().getColorForTerm(term, true);\n\t    \t\t}, this);\n\t    \t\tif (chartType=='bar') {\n\t\t    \t\tseries.push({\n\t\t    \t\t\ttype:'bar',\n\t\t    \t\t\ttitle: terms,\n\t\t\t    \t\tcolors: colors,\n\t\t    \t\t\txField: 'index',\n\t\t    \t\t\tyField: data.length>0 ? Object.keys(data[0]).filter(function(field) {return field.charAt(0)==\"_\"}) : undefined,\n    \t    \t\t\tlabel: {\n    \t    \t\t\t\tfield: records.map(function(r,i) {return \"term\"+i;})\n    \t    \t\t\t}\n\t\t    \t\t})\n\t    \t\t}\n\t    \t\t\n    \t    \tvar store = Ext.create('Ext.data.JsonStore', {\n    \t    \t\tfields: data.length>0 ? Object.keys(data[0]) : undefined,\n    \t    \t\tdata: data\n    \t    \t});\n    \t    \t\n    \t\t\tthis.buildChart({\n        \t\t\tstore: store,\n        \t\t\tseries: series,\n        \t\t\taxes: [{\n                \t\ttype: 'numeric',\n                \t\tposition: 'left',\n                \t\tincrement: 1,\n                \t\ttitle: {\n                \t\t\ttext: this.localize(this.getApiParam(\"withDistributions\")+\"Title\")\n                \t\t}\n        \t\t\t},{\n        \t\t\t\ttype: 'category',\n                \t\tposition: 'bottom',\n                \t\ttitle: {\n                \t\t\ttext: this.localize(\"corpusTitle\")\n                \t\t}\n                \t\t\n        \t\t\t}]\n    \t\t\t})\n    \t\t},\n    \t\tscope: this\n    \t});\n  \n    },\n    \n    getItemToolTip: function (toolTip, record, ctx) {\n    \t\n    \tvar parts = ctx.field.split(\"_\"),\n    \t\tdocIndex = parts.length==2 ? ctx.index : parts[2],\n    \t\tpos = parseInt(parts[1]),\n    \t\ttitle = ctx.series.getTitle(),\n    \t\tterm = Ext.isArray(title) ? title[pos] : title,\n    \t\tcolors = ctx.series.getColors(),\n    \t\tcolor = colors.length==1 ? colors[0] : colors[pos];\n        var html = \"<span class='x-legend-item-marker' style='background:\"+color+\n        \t\t\"; left: 2px;'></span> <span style='padding-left: 1.2em; font-weight: bold;'>\"+\n        \t\tterm+\"</span>: \"+record.get(ctx.field)+\n    \t\t\t\"<br/><i>\"+this.getCorpus().getDocument(docIndex).getShortTitle()+\"</i>\"\n\t\tif (this.getApiParam(\"mode\")==\"corpus\") {\n    \t\thtml+=\"<div style='font-size: smaller'>\"+this.localize('dblClickItem')\n\t\t} else {\n\t\t\thtml+=\"<br/>\"+this.localize('segment')+\" \"+(ctx.index+1)\n\t\t}\n    \ttoolTip.setHtml(html);\n    },\n    \n\n    loadDocumentTerms: function(params) {\n    \tif (!this.getApiParam(\"query\")) {\n        \tthis.getCorpus().getCorpusTerms().load({\n        \t\tparams: {\n        \t\t\tlimit: this.getCorpus().getDocumentsCount()<2 ? 5 : 2,\n        \t\t\tstopList: this.getApiParam(\"stopList\")\n        \t\t},\n        \t\tcallback: function(records, operation, success) {\n        \t\t\tthis.setApiParam(\"query\", records.map(function(r) {return r.getTerm()}))\n        \t\t\tthis.loadDocumentTerms();\n        \t\t},\n        \t\tscope: this\n        \t})\n    \t\treturn;\n    \t}\n    \t//this.segments.show();\n    \tthis.setApiParam(\"mode\", \"document\"); // just to be sure\n    \tparams = params || {};\n    \tvar withDistributions = this.getApiParam(\"withDistributions\");\n    \tExt.applyIf(params, {\n\t\t\tlimit: 0, // always have query, so no limit, no stopList\n\t\t\tsort: 'termasc',\n\t\t\tstopList: undefined\n    \t});\n    \tvar docLabels = this.getCorpus().map(function(doc) {return doc.getTinyTitle()})\n    \tvar singleDoc;\n    \tif (this.getCorpus().getDocumentsCount()==1) {\n    \t\tsingleDoc=this.getCorpus().getDocument(0)\n    \t}\n    \telse {\n    \t\tsingleDoc=this.getCorpus().getDocument(this.getApiParam(\"docIndex\"))\n    \t}\n    \tExt.applyIf(params, this.getApiParams());\n    \t\n    \tthis.getCorpus().getDocumentTerms().load({\n    \t\tparams: params,\n    \t\tcallback: function(records, operation, success) {\n    \t\t\tvar data = [], series = [],  chartType = this.getApiParam('chartType');\n    \t\t\tif (!singleDoc) { // legend is easier to read if sorted by term then doc\n        \t\t\trecords.sort(function(a,b) {\n        \t\t\t\tif (a.getTerm()==b.getTerm()) {\n        \t\t\t\t\treturn a.getDocIndex() - b.getDocIndex()\n        \t\t\t\t}\n        \t\t\t\treturn a.getTerm().localeCompare(b.getTerm())\n        \t\t\t})\n    \t\t\t}\n    \t\t\trecords.forEach(function(record, index) {\n    \t    \t\tvar term = record.get('term');\n    \t    \t\tvar docIndex = record.get('docIndex');\n    \t    \t\tvar color = singleDoc ? this.getApplication().getColorForTerm(term, true) : this.getApplication().getColor(docIndex, true);\n    \t    \t\tvar docIndex = record.get('docIndex');\n    \t    \t\trecord.get('distributions').forEach(function(r, i) {\n    \t    \t\t\tif (!data[i]) {\n    \t    \t\t\t\tdata[i] = {docIndex: docIndex, index: (i+1)};\n    \t    \t\t\t}\n    \t    \t\t\tdata[i][\"_\"+index+\"_\"+docIndex] = withDistributions=='relative' ? r.toFixed(7) : r;\n    \t    \t\t\tdata[i][\"term\"+index] = term;\n    \t    \t\t}, this);\n\n    \t    \t\tif (chartType!='bar') {\n    \t    \t\t\tvar kinds = chartType=='barline' ? [\"bar\",\"line\"] : [chartType];\n    \t    \t\t\tkinds.forEach(function(kind) {\n    \t    \t        \tseries.push({\n    \t    \t        \t\ttype: kind=='stacked' ? 'bar' : kind,\n    \t    \t    \t\t\ttitle: singleDoc ? term : (docIndex+1)+\") \"+term,\n    \t    \t    \t\t\txField: 'index',\n    \t    \t    \t\t\tyField: '_'+index+\"_\"+docIndex,\n    \t    \t    \t\t\tterm: term,\n    \t    \t    \t\t\tcolors: [color],\n    \t    \t    \t\t\tlabel: chartType=='barline' && kind=='bar' ? {\n    \t    \t    \t\t\t\tdisplay: 'none'\n    \t    \t    \t\t\t} : {\n    \t    \t    \t\t\t\tfield: \"term\"+index\n    \t    \t    \t\t\t}\n    \t    \t        \t})\n    \t    \t\t\t}, this);\n    \t    \t\t}\n    \t    \t\t\n    \t\t\t}, this);\n    \t\t\t\n\t    \t\tif (chartType=='bar') {\n\t    \t\t\tvar isOneTerm = Ext.Array.unique(records.map(function(r) {return r.getTerm()})).length;\n\t    \t\t\tvar terms = records.map(function(r) {return (1+r.get(\"docIndex\"))\t+\") \"+r.getTerm()})\n\t    \t\t\tvar colors = records.map(function(r) {\n\t\t    \t\t\treturn  isOneTerm ? this.getApplication().getColor(r.get(\"docIndex\"), true) : this.getApplication().getColorForTerm(r.getTerm(), true);\n\t\t    \t\t}, this);\n\n\t\t    \t\tseries.push({\n\t\t    \t\t\ttype:'bar',\n\t\t    \t\t\ttitle: terms.length>0 ? terms : this.localize(\"noResults\"),\n\t\t\t    \t\tcolors: colors,\n\t\t    \t\t\txField: 'index',\n\t\t    \t\t\tyField: data.length>0 ? Object.keys(data[0]).filter(function(field) {return field.charAt(0)==\"_\"}) : undefined,\n\t\t    \t\t\tlabel: {\n\t\t    \t\t\t\tfield: terms\n\t\t    \t\t\t}\n\t\t    \t\t})\n\t    \t\t}\n\n    \t\t\t\n    \t    \tvar store = Ext.create('Ext.data.JsonStore', {\n    \t    \t\tfields: data.length>0 ? Object.keys(data[0]) : undefined,\n    \t    \t\tdata: data\n    \t    \t});\n\n    \t\t\tthis.buildChart({\n        \t\t\tstore: store,\n        \t\t\tseries: series,\n        \t\t\taxes: [{\n                \t\ttype: 'numeric',\n                \t\tposition: 'left',\n                \t\ttitle: {\n                \t\t\ttext: this.localize(this.getApiParam(\"withDistributions\")+\"Title\")\n                \t\t}\n        \t\t\t},{\n        \t\t\t\ttype: 'category',\n                \t\tposition: 'bottom',\n                \t\ttitle: {\n                \t\t\ttext: this.localize(\"segmentsTitle\") + (singleDoc ? \" (\"+singleDoc.getShortTitle()+\")\" : \"\")\n                \t\t}\n                \t\t\n        \t\t\t}]\n    \t\t\t})\n    \t\t},\n    \t\tscope: this\n    \t});\n  \n    },\n\n    \n    buildChart: function(config) {\n    \tvar chartType = this.getApiParam('chartType'), labels = false;\n    \tif (this.getApiParam(\"labels\")===true || this.getApiParam(\"labels\")==\"true\") {labels=true}\n    \t\n    \tExt.applyIf(config, {\n    \t\tcls: this.getApiParam(\"mode\")\n    \t});\n\n    \tconfig.series.forEach(function(serie) {\n    \t\tExt.applyIf(serie, {\n\t\t\t\tstacked: serie.type=='bar' ? false : true,\n\t\t\t\tshowInLegend: chartType=='barline' && serie.type=='line' ? false : true,\n    \t\t\tsmooth: true,\n    \t\t\tshowMarkers: serie.type=='bar' ? false : true,\n    \t\t\tmarker: chartType=='barline' && serie.type=='line' ? null : {\n    \t\t\t    type: 'circle',\n    \t\t\t    radius: 2\n    \t\t\t},\n                style: {\n                    lineWidth: 1,\n                    fillOpacity: chartType=='barline' && serie.type=='bar' ? .01 : 1,\n                    strokeOpacity: chartType=='barline' && serie.type=='bar' ? .1 : 1\n                },\n                highlight: true,\n                highlightCfg: {\n                \tscaling: serie.type==\"bar\" ? 1.1 : 2\n                },\n    \t\t\tlabel: {\n//    \t\t\t\tdisplay: 'none'\n    \t\t\t},\n    \t\t\ttooltip: {\n                    trackMouse: true,\n                    renderer: this.getItemToolTip,\n                    scope: this\n    \t\t\t},\n                listeners: {\n                \titemclick: function(chart,item,event,eOpts ) {\n            \t\t\tif (this.clickTimer) {clearTimeout(this.clickTimer);}\n            \t\t\tif (this.blockClick) {return;} // set by dblclick to avoid menu disappearing\n            \t\t\tthis.blockClick = true // block other clicks within a sec\n            \t\t\tExt.defer(function() {\n            \t\t\t\tthis.blockClick = false;\n            \t\t\t}, 1000, this);\n                \t\tif (this.getApiParam(\"mode\")==\"document\") {\n                \t\t\tvar parts = item.field.split(\"_\"),\n                \t\t\t\tdocIndex = parts[2],\n                \t\t\t\tdoc = this.getCorpus().getDocument(docIndex),\n                \t\t\t\ttokens = doc.get('tokensCount-lexical'),\n                \t\t\t\tposition = parseInt(item.index  * tokens / parseInt(this.getApiParam(\"bins\")))\n                \t\t\tthis.dispatchEvent(\"documentIndexTermsClicked\", this, [{\n                    \t\t\tterm: item.series.term,\n                    \t\t\tdocIndex: parts[2],\n                    \t\t\tposition: position\n                    \t\t}]);                \t\t\t\n                \t\t} else {\n                \t\t\tif (this.clickTimer) {clearTimeout(this.clickTimer);}\n                \t\t\tvar me = this;\n                \t\t\tthis.clickTimer = setTimeout(function() {\n                    \t\t\tme.dispatchEvent(\"documentIndexTermsClicked\", me, [{\n                        \t\t\tterm: item.series.term,\n                        \t\t\tdocIndex: item.index\n                        \t\t}]);\n                \t\t\t}, 300)\n                \t\t\t\n                \t\t}\n                \t},\n                \titemdblclick: function(chart,item,event,eOpts )  {\n            \t\t\tif (this.clickTimer) {clearTimeout(this.clickTimer);}\n            \t\t\t// block future single clicks to allow menu to appear\n            \t\t\tthis.blockClick = true\n            \t\t\tExt.defer(function() {\n            \t\t\t\tthis.blockClick = false;\n            \t\t\t}, 1000, this);\n            \t\t\t// block future clicks\n                \t\tif (this.getApiParam(\"mode\")!=\"document\") {\n                \t\t\tvar m = Ext.create('Ext.menu.Menu', {\n                \t\t\t\titems: [{\n                \t    \t\t\t\ttext: this.localize(\"drillTerm\"),\n                \t    \t\t\t\ttooltip: this.localize(\"drillTermTip\"),\n//                \t    \t\t\t\tglyph: 'xf02d@FontAwesome',\n                \t    \t\t\t\thandler: function() {\n                \t    \t\t\t\t\tthis.setApiParams({\n                \t    \t\t\t\t\t\tmode: 'document',\n                \t    \t\t\t\t\t\tquery: item.series.term\n                \t    \t\t\t\t\t});\n                \t    \t\t\t\t\tthis.loadDocumentTerms();\n                \t    \t\t\t\t},\n                \t    \t\t\t\tscope: this\n                \t\t\t\t\t},{\n                \t    \t\t\t\ttext: this.localize(\"drillDocument\"),\n                \t    \t\t\t\ttooltip: this.localize(\"drillDocumentTip\"),\n//                \t    \t\t\t\tglyph: 'xf02d@FontAwesome',\n                \t    \t\t\t\thandler: function() {\n                \t    \t\t\t\t\tthis.setApiParams({\n                \t    \t\t\t\t\t\tmode: 'document',\n                \t    \t\t\t\t\t\tdocIndex: item.index\n                \t    \t\t\t\t\t});\n                \t    \t\t\t\t\tthis.loadDocumentTerms();\n                \t    \t\t\t\t},\n                \t    \t\t\t\tscope: this\n                \t\t\t\t\t}],\n                \t\t\t\t\tlisteners: {\n                \t\t\t\t\t\thide: function(m) {\n                \t\t\t\t\t\t\t// defer hiding otherwise click handler not called\n                \t\t\t\t\t\t\tExt.defer(function() {this.destroy()}, 200, m)\n                \t\t\t\t\t\t},\n                \t\t\t\t\t\tscope: this\n                \t\t\t\t\t}\n                \t\t\t}).showAt(event.pageX, event.pageY) \n                \t\t}\n                \t},\n                \tscope: this\n                }\n    \t\t})\n    \t\tExt.applyIf(serie.label, {\n                display: 'over',\n                field: 'index',\n                fontSize: 11,\n                translateY: chartType=='line' ? 9 : undefined\n    \t\t});\n    \t\tif (!labels) {serie.label.display=\"none\";} // hide label \n    \t}, this)\n    \tExt.applyIf(config, {\n    \t\tanimation: true,\n    \t    plugins: {\n    \t        ptype: 'chartitemevents',\n    \t        moveEvents: true\n    \t    },\n    \t\tlegend: {\n    \t\t\tdocked:'top',\n    \t\t\tlisteners: {\n    \t\t\t\titemclick: function(legend, record, dom, index) {\n    \t\t\t\t\t// make sure to hide related series\n    \t\t\t\t\tif (legend.getStore().getCount()<legend.chart.series.length && this.getApiParam(\"chartType\")==\"barline\") {\n        \t\t\t\t\tvar term = record.get(\"name\"), disabled = record.get(\"disabled\");\n        \t\t\t\t\tlegend.chart.series.forEach(function(serie) {\n        \t\t\t\t\t\tif (serie.getTitle()==term) {\n        \t\t\t\t\t\t\tserie.setHidden(disabled);\n        \t\t\t\t\t\t\t\n        \t\t\t\t\t\t}\n        \t\t\t\t\t})\n        \t\t\t\t\tlegend.chart.redraw(); // not working?\n    \t\t\t\t\t}\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t}\n    \t\t},\n    \t\tinteractions: ['itemhighlight','crosszoom'],\n    \t    listeners: {}\n    \t});\n    \tExt.applyIf(config.listeners, {\n\t        itemhighlightchange: function (chart, item) {\n\t            chart.el.dom.style.cursor = item ? 'pointer' : '';\n\t        },\n\t        afterrender : function() {\n\t        \treturn // TODO: this seems to cause problems, perhaps not destroying properly?\n\t        \tExt.defer(function() { // seem to need to defer\n\t\t        \tExt.tip.QuickTipManager.register({\n\t\t        \t\ttarget: this.getTargetEl().down(\".x-legend-container\"),\n\t                 \ttext: this.localize(\"toggleTip\")\n\t\t        \t});\n\t        \t},1, this)\n\t        \t\n\t        },\n\t        scope: this\n    \t})\n    \tconfig.axes.forEach(function(axis) {\n    \t\tExt.applyIf(axis, {\n    \t\t\ttitle: {},\n    \t\t\tlabel: {}\n    \t\t})\n    \t\tExt.applyIf(axis.title, {scaling: .75});\n    \t\tExt.applyIf(axis.label, {scaling: .75});\n    \t\tif (axis.type=='category') {\n    \t\t\tvar titles = \"\";\n    \t\t\tconfig.store.each(function(r) {titles+=r.get(\"index\")})\n    \t\t\tif (titles.length>this.getTargetEl().getWidth()/9) {\n            \t\tExt.applyIf(axis.label, {rotate: {degrees:-30}});\n    \t\t\t}\n        \t\tExt.applyIf(axis, {\n        \t\t\tlabelInSpan: true\n        \t\t})\n    \t\t}\n    \t}, this)\n    \t    \t\n    \t// remove existing chart\n    \tthis.query('chart').forEach(function(chart) {this.remove(chart, true);}, this);\n    \t\n    \t// create new chart\n\t\tvar chart = Ext.create(\"Ext.chart.CartesianChart\", config);\n    \tthis.add(chart);\n    },\n    \n    reloadFromChart: function() {\n    \tvar chart = this.down('chart');\n    \tif (chart) {\n    \t\tvar terms = [];\n    \t\tchart.series.forEach(function(serie) {\n    \t\t\tterms.push(serie.getTitle());\n    \t\t});\n    \t\tthis.fireEvent(\"termsClicked\", this, terms);\n    \t}\n    }\n\n\n });","Ext.define('Voyant.panel.NoTool', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.notool',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\ttool: undefined\n    \t}\n    },\n    config: {\n    \thtml: undefined,\n    \tnotYetImplemented: [\"Centroid\",\"DocumentInputAdd\",\"DocumentTypeCollocateFrequenciesGrid\",\"EntitiesBrowser\",\"Equalizer\",\"FeatureClusters\",\"Flowerbed\",\"KwicsTagger\",\"Lava\",\"Mandala\",\"MicroSearch\",\"NetVizApplet\",\"PaperDrill\",\"RezoViz\",\"Sunburst\",\"Termometer\",\"Ticker\",\"TokensViz\",\"ToolBrowser\",\"ToolBrowserLarge\",\"VoyeurTagline\",\"WordCloud\",\"VoyeurTagline\",\"WordCountFountain\"]\n    },\n    constructor: function() {\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title')\n    \t});\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n\tlisteners: {\n\t\tboxready: function(container, width, height) {\n\t\t\tvar tool = this.getApiParam(\"notool\");\n\n\t\t\tif (tool) {\n\t\t\t\tif (Ext.isArray(tool)) {tool=tool[0]}\n\t\t\t\t\n\t\t\t\tvar msg = \"\";\n\t\t\t\t\n\t\t\t\t// check to see if this is a tool that's recognized but not implemented\n\t\t\t\tvar oldTools = this.getNotYetImplemented();\n\t\t\t\tfor (var i=0, len=oldTools.length; i<len; i++) {\n\t\t\t\t\tif (tool==oldTools[i]) {\n\t\t\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t\t\t    title: this.localize('error'),\n\t\t\t\t\t\t    message: new Ext.Template(this.localize('notImplemented')).applyTemplate([tool]),\n\t\t\t\t\t\t    buttons: Ext.Msg.YESNO,\n\t\t\t\t\t\t\tbuttonText: {yes: this.localize(\"currentButton\"), no: this.localize(\"oldButton\")},\n\t\t\t\t\t\t    icon: Ext.Msg.ERROR,\n\t\t\t\t\t\t    scope: this,\n\t\t\t\t\t\t    fn: function(btn) {\n\t\t\t\t\t\t    \tvar url;\n\t\t\t\t\t\t    \tif (btn=='yes') {\n\t\t\t\t\t\t    \t\turl = this.getNewUrl();\n\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t    \telse {\n\t\t\t\t\t\t    \t\turl = \"http://voyant-tools.org/tool/\"+tool+\"/\";\n\t\t\t\t\t\t\t    \tvar query = Ext.Object.fromQueryString(document.location.search)\n\t\t\t\t\t\t\t    \tdelete query['tool']\n\t\t\t\t\t\t\t    \tqueryString = Ext.Object.toQueryString(query);\n\t\t\t\t\t\t\t    \tif (queryString) {\n\t\t\t\t\t\t\t\t    \turl += \"?\"+queryString\n\t\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t    \t}\n\t\t\t\t\t\t    \twindow.location.replace(url);\n\t\t\t\t\t\t    }\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tExt.Msg.show({\n\t\t\t\t    title: this.localize('error'),\n\t\t\t\t    message: new Ext.Template(this.localize('badToolSpecified')).applyTemplate([tool]),\n\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t    icon: Ext.Msg.ERROR,\n\t\t\t\t    scope: this,\n\t\t\t\t    fn: function(btn) {\n\t\t\t\t    \twindow.location.replace(this.getNewUrl());\n\t\t\t\t    }\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t// no tool specified, so just redirect\n\t\t\telse if (!this.config.html) {\n\t\t\t\tExt.Msg.show({\n\t\t\t\t    title: this.localize('error'),\n\t\t\t\t    message: this.localize('noToolSpecified'),\n\t\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t\t    icon: Ext.Msg.ERROR,\n\t\t\t\t    scope: this,\n\t\t\t\t    fn: function(btn) {\n\t\t\t\t    \twindow.location.replace(this.getNewUrl());\n\t\t\t\t    }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\tgetNewUrl: function() {\n    \tvar query = Ext.Object.fromQueryString(document.location.search)\n    \tdelete query['tool']\n    \tqueryString = Ext.Object.toQueryString(query);\n    \treturn this.getApplication().getBaseUrl()+(queryString ? \"?\"+queryString : \"\")\n\t}\n});","Ext.define('Voyant.panel.VoyantFooter', {\n\textend: 'Ext.container.Container',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.voyantfooter',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n\theight: 18,\n\tcls: 'x-tab-bar-default voyant-footer',\n\tlisteners: {\n\t\tboxready: function(container, width, height) {\n\t\t\tvar parts = [\n\t\t\t\t\"<a href='\"+container.getBaseUrl()+\"docs/' target='voyantdocs'>\"+container.localize('voyantTools')+\"</a> \",\n\t\t\t\t\", <a href='http://stefansinclair.name/'>St&eacute;fan Sinclair</a> &amp; <a href='http://geoffreyrockwell.com'>Geoffrey Rockwell</a>\",\n\t\t\t\t\" (<a href='http://creativecommons.org/licenses/by/4.0/' target='_blank'><span class='cc'>c</span></a> \"+ new Date().getFullYear() +\")\",\n\t\t\t\t\" <a class='privacy' href='\"+this.getBaseUrl()+\"docs/#!/guide/about-section-privacy-statement' target='top'>\"+container.localize('privacy')+\"</a>\",\n\t\t\t\t\" v. \"+Voyant.application.getVersion() + (Voyant.application.getBuild() ? \" (\"+Voyant.application.getBuild()+\")\" : \"\")\n\t\t\t];\n\t\t\tvar footer = '';\n\t\t\tvar footerWidth = 0;\n\t\t\tvar partWidth;\n\t\t\tvar el = container.getEl();\n\t\t\tfor (var i=0;i<parts.length;i++) {\n\t\t\t\tpartWidth = el.getTextWidth(parts[i].replace(/data-qtip.+?--\u003e/,\">\").replace(/<.+?>/g, \"\"));\n\t\t\t\tif (footerWidth+partWidth < width) {\n\t\t\t\t\tfooter += parts[i];\n\t\t\t\t\tfooterWidth += partWidth;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontainer.update(footer);\n        \tExt.tip.QuickTipManager.register({\n                target: container.getTargetEl().dom.querySelector(\".privacy\"),\n                text: this.localize('privacyMsg')\n            });\n\t\t},\n\t\tbeforedestroy: function(container) {\n    \t\tExt.tip.QuickTipManager.unregister(container.getTargetEl().dom.querySelector(\".privacy\"));\n    \t}\n\t}\n});","Ext.define('Voyant.panel.VoyantHeader', {\n\textend: 'Ext.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.voyantheader',\n    statics: {\n    \ti18n: {\n    \t}\n    },\n    constructor: function(config) {\n    \tExt.apply(this, {\n    \t\tid: 'voyantheader',\n    \t\ttitle: '',\n    \t\tlayout : 'fit',\n    \t\thtml: '<div id=\"logo-container\"></div>',\n    \t\tcollapseMode : undefined,\n\t\t\tcollapsible: true,\n\t\t\tanimCollapse: false,\n\t\t\ttitleCollapse: false,\n\t\t\tfloatable: false,\n\t\t\theader: true,\n\t\t\thideCollapseTool: true,\n\t\t\tlisteners: {\n\t\t\t\tcollapse: this.onCollapse\n\t\t\t},\n\t\t\ttitleAlign: 'center'\n    \t});\n        this.callParent(arguments);\n        \n        Ext.applyIf(config, {\n    \t\tmoreTools: ['corpusset','scatterplot','termsradio'],\n\t\t\tincludeTools: {\n\t\t\t\tsave: true,\n\t\t\t\tplus: true,\n\t\t\t\thelp: true,\n\t\t\t\tlanguage: this.getLanguageToolMenu(),\n\t\t\t\thome: {\n\t\t\t\t\ttype: 'home',\n\t\t\t\t\ttooltip: this.localize(\"homeTip\"),\n\t\t\t\t\txtype: 'toolmenu',\n\t                glyph: 'xf015@FontAwesome',\n\t        \t\thandler: function(btn) {\n\t        \t\t\tvar panel = this.up(\"panel\")\n\t        \t\t\tExt.Msg.confirm(panel.localize('home'), panel.localize('homeConfirm'), function(buttonId) {\n\t        \t\t\t\tif (buttonId=='yes') {\n\t        \t\t\t\t\tdocument.location.href = panel.getBaseUrl()\n\t        \t\t\t\t}\n\t        \t\t\t}, this);\n\t        \t\t}\n\t\t\t\t}\n\t\t\t}\n        })\n        \n    \tthis.mixins['Voyant.panel.Panel'].constructor.call(this, config);\n    },\n    \n    onCollapse: function(panel) {\n    \t// the title may be in flux when collapsing, so call defer setting of title\n    \tExt.defer(function() {this.setTitle(\"<img src='\"+this.getBaseUrl()+\"resources/images/voyant-logo-tiny.png' style='vertical-align: middle' alt='Voyant Tools' /> \"+this.localize('title'))}, 10, panel)\n    }\n});\n","Ext.define('Voyant.panel.CorpusSet', {\n\textend: 'Ext.panel.Panel',\n    requires: ['Voyant.panel.VoyantTabPanel','Voyant.panel.Cirrus', 'Voyant.panel.Summary', 'Voyant.panel.CorpusTerms', 'Voyant.panel.Reader', 'Voyant.panel.Documents', 'Voyant.panel.Trends', 'Voyant.panel.Contexts', 'Voyant.panel.Phrases', 'Voyant.panel.DocumentTerms','Voyant.panel.CorpusCollocates','Voyant.panel.CollocatesGraph','Voyant.panel.StreamGraph','Voyant.panel.TermsBerry'],\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.corpusset',\n\tisConsumptive: true,\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tpanels: undefined\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tlayout: 'border',\n\theader: false,\n\titems: [{\n    \tregion: 'west',\n    \tflex: 3,\n    \tlayout: 'fit',\n        moreTools: ['cirrus','corpusterms'],\n        xtype: 'voyanttabpanel',\n    \tsplit: {width: 5},\n    \ttabBarHeaderPosition: 0,\n    \titems: [{\n\t    \txtype: 'cirrus'\n    \t},{\n\t    \txtype: 'corpusterms'\n    \t}, {\n    \t\txtype: 'collocatesgraph'\n    \t}]\n    },{\n        region: 'center',\n        flex: 3,\n        layout: 'fit',\n        xtype: 'voyanttabpanel',\n    \ttabBarHeaderPosition: 0,\n        items: [{\n\t        xtype: 'reader' // termsradio added and set to default during loadedCorpus below when in non-consumptive mode\n        },{\n\t        xtype: 'termsberry'\n        }]\n    }, {\n    \tregion: 'east',\n    \tflex: 3,\n    \tlayout: 'fit',\n        xtype: 'voyanttabpanel',\n    \tsplit: {width: 5},\n    \ttabBarHeaderPosition: 0,\n    \tmoreTools: ['trends','collocatesgraph','corpuscollocates'],\n        items: [{\n\t    \txtype: 'trends'\n        },{\n\t    \txtype: 'documentterms'\n        }]\n    }, {\n    \tregion: 'south',\n    \tflex: 2,\n    \tsplit: {width: 5},\n    \tlayout: 'border',\n//    \tlayout: {\n//    \t\ttype: 'hbox',\n//    \t\talign: 'stretch'\n//    \t},\n    \titems: [{\n\t\t\t\tlayout: 'fit',\n\t\t\t\tregion: 'center',\n    \t\t\tflex: 1,\n    \t        xtype: 'voyanttabpanel',\n    \t    \tsplit: {width: 5},\n    \t    \ttabBarHeaderPosition: 0,\n    \t\t\tmoreTools: ['summary','documents','phrases'],\n    \t\t\titems: [{\n\t    \t\t\txtype: 'summary'\n    \t\t\t},{\n\t    \t\t\txtype: 'documents'\n    \t\t\t},{\n\t    \t\t\txtype: 'phrases'\n    \t\t\t}]\n    \t\t},{\n\t\t\t\tlayout: 'fit',\n\t\t\t\tregion: 'east',\n    \t\t\tflex: 1,\n    \t        xtype: 'voyanttabpanel',\n    \t    \tsplit: {width: 5},\n    \t    \ttabBarHeaderPosition: 0,\n    \t\t\tmoreTools: ['contexts','documentterms'],\n    \t\t\titems: [{\n\t    \t\t\txtype: 'contexts'\n    \t\t\t},{\n\t    \t\t\txtype: 'bubblelines' // is set to default during loadedCorpus below when in non-consumptive mode\n    \t\t\t},{\n\t    \t\t\txtype: 'correlations'\n    \t\t\t}]\n    \t}]\n    }],\n    listeners: {\n    \tboxready: function() {\n    \t\tvar panelsString = this.getApiParam(\"panels\");\n    \t\tif (panelsString) {\n    \t\t\tvar panels = panelsString.toLowerCase().split(\",\");\n    \t\t\tvar tabpanels = this.query(\"voyanttabpanel\");\n    \t\t\tfor (var i=0, len=panels.length; i<len; i++) {\n    \t\t\t\tvar panel = panels[i];\n    \t\t\t\tif (panel && Ext.ClassManager.getByAlias('widget.'+panel) && tabpanels[i]) {\n    \t\t\t\t\tvar tabpanel = tabpanels[i];\n    \t\t\t\t\tif (tabpanel.getActiveTab().isXType(panel)) {continue;} // already selected\n    \t\t\t\t\ttabpanel.items.each(function(item, index) {\n    \t\t\t\t\t\tif (item.isXType(panel)) {\n    \t\t\t\t\t\t\tthis.setActiveTab(index)\n    \t\t\t\t\t\t\treturn false\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}, tabpanel)\n    \t\t\t\t\tif (tabpanel.getActiveTab().isXType(panel)) {continue;} // already switched\n    \t\t\t\t\ttabpanel.getActiveTab().replacePanel(panel); // switch to specified panel\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\t// add an easter egg\n    \t\tvar cirrus = this.down('cirrus');\n    \t\tvar me = this;\n    \t\tif (cirrus) {\n    \t\t\tvar toolbar = cirrus.down('toolbar');\n    \t\t\ttoolbar.add({xtype: 'tbfill'})\n    \t\t\ttoolbar.add({\n    \t\t\t\ttext: ' ',\n    \t\t\t\tlisteners: {\n    \t\t\t\t\tclick: {\n    \t\t\t\t\t\tfn: function() {\n\t        \t\t\t\t\tme.add({\n\t        \t\t\t\t\t\tregion: 'north',\n\t        \t\t\t\t\t\twidth: '100%',\n\t    \t\t\t\t\t\t\thtml: '<div align=\"center\"><table><tr><td><img src=\"http://stefansinclair.name/wordpress/wp-content/uploads/2011/07/Sinclair_Stefan_small.jpg\" style=\"height: 60px\"></td><td style=\"text-align: center; padding-left: 2em; padding-right: 2em;\">By Athena, you found us hidden<br>up here between the panels!</td><td><img src=\"http://geoffreyrockwell.com/images/home_09.jpg\" style=\"height: 60px\"></td></tr></table></div>'\n\t        \t\t\t\t\t})\n\t        \t\t\t\t}, single: true\n    \t\t\t\t\t},\n    \t\t\t\t\trender: function(b) {\n    \t\t\t\t\t\tb.getTargetEl().dom.className=''\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t});\n    \t\t}\n    \t\t\n    \t},\n    \tloadedCorpus: function(src, corpus) {\n    \t\tif (this.hasCorpusAccess(corpus)==false && !this.getApiParam('panels')) {\n    \t\t\tvar tabpanels = this.query(\"voyanttabpanel\");\n//    \t\t\ttabpanels[1].add({xtype: 'termsradio'}); // reader\n    \t\t\ttabpanels[1].setActiveTab(1); // reader\n    \t\t\ttabpanels[1].getActiveTab().fireEvent(\"loadedCorpus\", src, corpus); // make sure to load corpus\n    \t\t\ttabpanels[4].setActiveTab(1); // contexts\n    \t\t}\n    \t\tif (corpus.getDocumentsCount()>30) {\n    \t\t\tvar bubblelines = this.down('bubblelines');\n    \t\t\tif (bubblelines) {\n    \t\t\t\tbubblelines.up('voyanttabpanel').remove(bubblelines)\n    \t\t\t}\n    \t\t}\n    \t},\n    \tpanelChange: function(src) {\n    \t\tvar panels = [];\n    \t\tthis.query(\"voyanttabpanel\").forEach(function(item) {\n    \t\t\tpanels.push(item.getActiveTab().xtype)\n    \t\t})\n    \t\tthis.getApplication().setApiParam('panels', panels.join(','))\n    \t}\n    }\n})","Ext.define('Voyant.panel.ScatterSet', {\n\textend: 'Ext.panel.Panel',\n    requires: ['Voyant.panel.ScatterPlot','Voyant.panel.Documents', 'Voyant.panel.Trends', 'Voyant.panel.Contexts'],\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.scatterset',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tlayout: 'hbox',\n\theader: false,\n\titems: [{\n    \tflex: 3,\n    \theight: '100%',\n        xtype: 'scatterplot'\n    },{\n    \tsplit: {width: 5},\n        flex: 1,\n    \theight: '100%',\n        layout: 'vbox',\n        defaults: {\n        \twidth: '100%',\n        \tflex: 1\n        },\n        items: [{\n        \txtype: 'documents',\n        \tcollapsible: true\n        },{\n        \txtype: 'trends',\n        \tcollapsible: true\n        },{\n        \txtype: 'contexts',\n        \tcollapsible: true\n        }]\n    }]\n})","Ext.define('Voyant.panel.Subset', { \n\t\n\t\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel','Voyant.util.Downloadable'],\n\talias: 'widget.subset',\n\tisConsumptive: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tdocumentFilename: ['pubDate','title'],\n    \t\tdocumentFormat: 'SOURCE'\n    \t},\n\t\tglyph: 'xf0ce@FontAwesome'\n    },\n    config: {\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n\t\tinDocumentsCountOnly: false,\n\t\tstopList: 'auto',\n\t\tstore: undefined\n    },\n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);    \t\n    },\n    \n    \n    initComponent: function(config) {\n        var me = this;\n\n        Ext.applyIf(me, {\n        \tintroHtml: '',\n        \tfieldItems: [{\n\t        \t\txtype: 'querysearchfield',\n\t        \t\tfieldLabel: this.localize('titleLabel'),\n\t        \t\ttokenType: 'title'\n        \t\t},{\n\t        \t\txtype: 'querysearchfield',\n\t        \t\tfieldLabel: this.localize('authorLabel'),\n\t        \t\ttokenType: 'author'\n        \t\t},{\n\t        \t\txtype: 'querysearchfield',\n\t        \t\tfieldLabel: this.localize('lexicalLabel')\n        \t}],\n        \tfieldColumns: 2\n        });\n        \n        Ext.applyIf(me, {\n        \tintro: {\n        \t\tmargin: '5 0 5 0',\n        \t\tlayout: 'center',\n        \t\titems: {\n        \t\t\titemId: 'intro',\n            \t\thtml: me.introHtml\n        \t\t}\n        \t},\n        \tfields: {\n\t\t\t\txtype: 'container',\n        \t\tlayout: 'center',\n        \t\titems: {\n    \t\t\t\txtype: 'container',\n        \t\t\tmaxWidth: 1200,\n        \t\t\tlayout: {\n        \t\t\t\ttype: 'table',\n        \t\t\t\tcolumns: me.fieldColumns\n        \t\t\t},\n        \t\t\t// wrap in another container otherwise the tip won't work\n        \t\t\titems: me.fieldItems.map(function(item) {return {\n        \t\t\t\txtype: 'container',\n            \t\t\tdefaults: {\n            \t\t\t\tmargin: '5 10 5 10',\n                    \t\tinDocumentsCountOnly: me.getInDocumentsCountOnly(),\n                    \t\tstopList: me.getStopList(),\n                    \t\tshowAggregateInDocumentsCount: true,\n                    \t\tisDocsMode: true,\n                    \t\tflex: 1,\n                    \t\tmaxWidth: 800,\n                    \t\tlabelAlign: 'right'\n            \t\t\t},\n        \t\t\t\titems: Ext.applyIf(item, {\n        \t\t\t\t\tfieldLabel: me.localize((item.tokenType ? item.tokenType : 'lexical')+'Label')\n        \t\t\t\t})\n        \t\t\t}}, this)\n        \t\t}\n        \t},\n        \tfoot: {\n        \t\tlayout: 'center',\n        \t\tmargin: '20 0 0 0',\n        \t\titems: {\n        \t\t\txtype: 'container',\n        \t\t\tlayout: {\n        \t\t\t\ttype: 'hbox',\n        \t\t\t\talign: 'middle'\n        \t\t\t},\n        \t\t\tdefaults: {\n    \t        \t\tmargin: '0 5 0 5',\n//    \t        \t\tscale: 'large',\n    \t        \t\twidth: 200\n        \t\t\t},\n        \t\t\titems:  [{\n    \t        \t\txtype: 'button',\n    \t        \t\titemId: 'export',\n\t                    glyph: 'xf08e@FontAwesome',\n    \t        \t\ttext: this.localize('sendToVoyantButton'),\n    \t        \t\thandler: me.handleSendToVoyant,\n    \t        \t\tscope: me\n            \t\t},{\n    \t        \t\txtype: 'button',\n\t\t\t\t    \tglyph: 'xf019@FontAwesome',\n    \t        \t\titemId: 'download',\n    \t        \t\ttext: this.localize('downloadButton'),\n    \t        \t\thandler: me.handleExport,\n    \t        \t\tscope: me\n            \t\t},{\n            \t\t\txtype: 'container',\n            \t\t\thidden: true,\n            \t\t\titemId: 'statuscontainer',\n            \t\t\tlayout: 'vbox',\n            \t\t\titems: [{\n            \t\t\t\titemId: 'status',\n            \t\t\t\tbodyStyle: 'text-align: center',\n            \t\t\t\twidth: 200\n            \t\t\t},{\n            \t\t\t\txtype: 'container',\n            \t\t\t\twidth: 200,\n            \t\t\t\titems: {\n            \t    \t\t\txtype: 'sparklineline',\n            \t    \t\t\tchartRangeMin: 0,\n            \t    \t\t\titemId: 'sparkline',\n            \t    \t\t\tmargin: '0 0 0 10',\n            \t    \t\t\tvalues: [1,1],\n            \t    \t\t\theight: 20,\n            \t    \t\t\twidth: 200\n            \t\t\t\t}\n            \t\t\t}]\n            \t\t}]\n        \t\t}\n        \t}\n        })\n\n        Ext.applyIf(me, {\n        \titems: [me.intro, me.fields, me.foot]\n        });\n        \n    \tme.on('loadedCorpus', function(src, corpus) {\n    \t\tme.getStore().setCorpus(corpus);\n    \t\tif (me.getInitialConfig('introHtml')==undefined && me.getInitialConfig('intro')==undefined) {\n    \t\t\t me.queryById('intro').setHtml(corpus.getString())\n    \t\t}\n    \t}, me);\n    \t\n    \tme.on('query', function(src, queries) {\n    \t\tthis.performAggregateQuery(this.getAggregateQuery());\n    \t});\n    \t\n    \tme.setStore(Ext.create('Voyant.data.store.DocumentQueryMatches'))\n        me.callParent([config]);\n        \n    },\n    \n    handleSendToVoyant: function() {\n    \tif (!this.getStore().lastOptions || !this.getStore().lastOptions.params.query) {\n    \t\t// there's currently no query, so give the option of opening the current corpus in a new window\n    \t\tExt.Msg.alert(this.localize('sendToVoyantButton'), new Ext.XTemplate(this.localize('sendToVoyantNoQuery')).apply([this.getBaseUrl()+\"?corpus=\"+this.getStore().getCorpus().getId()]))\n    \t} else {\n    \t\t// try spawning a new corpus with the query\n    \t\tvar me = this;\n        \tthis.mask(\"Creating corpus\u2026\");\n        \tthis.getStore().load({\n        \t\tparams: {\n        \t\t\tquery: this.getStore().lastOptions.params.query,\n        \t\t\tcreateNewCorpus: true\n        \t\t},\n        \t\tcallback: function(records, operation, success) {\n        \t\t\tme.unmask();\n        \t\t\tif (success && records && records.length==1) {\n            \t\t\tvar corpus = operation.getProxy().getReader().metaData;\n        \t\t\t\tvar url = me.getBaseUrl()+\"?corpus=\"+corpus;\n        \t\t\t\tme.openUrl(url);\n        \t\t\t}\n        \t\t}\n        \t})\n    \t}\n    },\n    \n    handleExport: function() {\n    \tif (!this.getStore().lastOptions || !this.getStore().lastOptions.params.query) {\n    \t\tthis.downloadFromCorpusId(this.getStore().getCorpus().getId());\n    \t} else {\n    \t\tvar record = this.getStore().getAt(0);\n    \t\tif (this.getStore().lastOptions.params.query && record && record.getCount()==0) {\n    \t\t\tthis.showMsg({message: this.localize('noMatches')})\n    \t\t} else {\n    \t    \tthis.getStore().load({\n    \t    \t\tparams: {\n    \t    \t\t\tquery: this.getStore().lastOptions.params.query,\n    \t    \t\t\tcreateNewCorpus: true,\n    \t    \t\t\ttemporaryCorpus: true\n    \t    \t\t},\n    \t    \t\tcallback: function(records, operation, success) {\n    \t    \t\t\tif (success && records && records.length==1) {\n    \t    \t    \t\tthis.downloadFromCorpusId(operation.getProxy().getReader().metaData);\n    \t    \t\t\t}\n    \t    \t\t},\n    \t    \t\tscope: this\n    \t    \t})\n    \t\t}\n    \t}\n    },\n    \n    openDownloadCorpus: function(corpus) {\n\t\tvar url = this.getTromboneUrl()+\"?corpus=\"+corpus+\"&tool=corpus.CorpusExporter&outputFormat=zip\"+\n\t\t\t\"&zipFilename=DownloadedVoyantCorpus-\"+corpus+\".zip\"+\n\t\t\t(this.getApiParam(\"documentFormat\") ? \"&documentFormat=\"+this.getApiParam(\"documentFormat\") : '')+\n\t\t\t(this.getApiParam(\"documentFilename\") ? \"&documentFilename=\"+this.getApiParam(\"documentFilename\") : '')\n\t\tthis.openUrl(url)\n    },\n\n    performAggregateQuery: function(query) {\n    \tvar me = this, statuscontainer = me.queryById('statuscontainer'), status = me.queryById('status'), spark = me.queryById('sparkline');\n\t\tif (statuscontainer) {statuscontainer.show();}\n\t\tif (status) {status.setHtml(new Ext.XTemplate('{0:plural(\"documents\")} matching.').apply([0]))}\n\t\tif (spark) {spark.setValues([0,0]);}\n    \tif (query) {\n        \tvar docsCount = this.getStore().getCorpus().getDocumentsCount();\n        \tthis.getStore().load({\n        \t\tparams: {\n        \t\t\tquery: query,\n        \t\t\twithDistributions: true,\n        \t\t\tbins: docsCount > 100 ? 100 : docsCount \n        \t\t},\n        \t\tcallback: function(records, operation, success) {\n        \t\t\tvar exp = me.queryById('export');\n        \t\t\tvar spark = me.queryById('sparkline');\n        \t\t\tif (success && records && records.length==1) {\n        \t\t\t\tif (status) {\n        \t\t\t\t\tstatus.setHtml(new Ext.XTemplate('{0:plural(\"document\")} matching.').apply([records[0].getCount()]))\n        \t\t\t\t}\n        \t\t\t\tif (spark) {\n            \t\t\t\tspark.setValues(records[0].getDistributions())\n        \t\t\t\t}\n        \t\t\t}\n        \t\t}\n        \t})\n    \t} else if (this.getStore().lastOptions) { // set query to undefined so that send/export buttons work properly\n    \t\tthis.getStore().lastOptions.params.query = undefined\n    \t}\n    },\n    \n    getAggregateQuery: function() {\n\t\tvar aggregateQueries = [];\n\t\tExt.ComponentQuery.query('field', this).forEach(function(field) {\n\t\t\tif (field.getTokenType && field.getValue) {\n\t\t\t\tvar tokenType = field.getTokenType();\n\t\t\t\tvar vals = Ext.Array.from(field.getValue());\n\t\t\t\tif (vals.length>0) {\n\t\t\t\t\tif (vals.length>0) {\n        \t\t\t\taggregateQueries.push(\"+(\"+vals.map(function(val) {\n        \t\t\t\t\treturn tokenType+\":\"+val\n        \t\t\t\t}).join(\"|\")+\")\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn aggregateQueries.join(\" \");\n    }\n})\n","Ext.define('Voyant.panel.CollocatesSet', {\n\textend: 'Ext.panel.Panel',\n    requires: ['Voyant.panel.ScatterPlot','Voyant.panel.Documents', 'Voyant.panel.Trends', 'Voyant.panel.Contexts'],\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.collocatesset',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tlayout: 'vbox',\n\theader: false,\n\titems: [{\n\t\tlayout: 'hbox',\n\t\talign: 'stretch',\n\t\twidth: '100%',\n\t\theight: '100%',\n\t\tflex: 2,\n        defaults: {\n        \twidth: '100%',\n        \theight: '100%',\n        \tflex: 1,\n        \tframe: true,\n        \tborder: true\n        },\n        items: [{\n        \txtype: 'corpusterms'\n        },{\n        \txtype: 'documentterms'\n        },{\n        \txtype: 'corpuscollocates'\n        }]\n    },{\n    \twidth: '100%',\n    \theight: '100%',\n    \tsplit: {width: 5},\n\t\tlayout: 'hbox',\n\t\tflex: 3,\n        defaults: {\n        \twidth: '100%',\n        \theight: '100%',\n        \tflex: 1,\n        \tframe: true,\n        \tborder: true\n        },\n        items: [{\n        \txtype: 'contexts'\n        },{\n        \txtype: 'collocatesgraph'\n        }]\n    }]\n})","Ext.define('Voyant.panel.BubblelinesSet', {\n\textend: 'Ext.panel.Panel',\n    requires: ['Voyant.panel.Bubblelines','Voyant.panel.Contexts', 'Voyant.panel.Reader'],\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.bubblelinesset',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\tconstructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\t},\n\tlayout: 'vbox',\n\theader: false,\n\titems: [{\n\t\twidth: '100%',\n\t\theight: '100%',\n    \txtype: 'bubblelines',\n    \tflex: 5\n    },{\n    \twidth: '100%',\n    \theight: '100%',\n    \tsplit: {width: 5},\n\t\tlayout: 'hbox',\n\t\tflex: 4,\n        defaults: {\n        \twidth: '100%',\n        \theight: '100%',\n        \tflex: 1,\n        \tframe: true,\n        \tborder: true\n        },\n        items: [{\n        \txtype: 'contexts'\n        },{\n        \txtype: 'reader'\n        }]\n    }]\n})","Ext.define('Voyant.panel.CustomSet', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n    alias: 'widget.customset',\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tlayout: undefined,\n\t\t\ttableLayout: undefined\n\t\t},\n\t\tglyph: 'xf17a@FontAwesome'\n\t},\n\theader: false,\n\theight: '100%',\n\twidth: '100%',\n\t\n    constructor: function() {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments); // force api load\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n\t\tif (this.getApiParam('layout')) {\n\t\t\tExt.apply(this,{\n\t\t\t\tlayout: 'border',\n\t\t\t\titems: []\n\t\t\t})\n\t\t} else if (this.getApiParam('tableLayout')) {\n\t\t\tthis.initTableLayout();\n\t\t}\n\t\tthis.callParent()\n    },\n\t\n\tlisteners: {\n\t\tloadedCorpus: function(src, corpus) {\n\t\t\tif (this.getApiParam('layout')) { // not sure why, but we seem to need to fire event for child panels\n\t\t\t\tthis.query(\"panel\").forEach(function(p) {\n\t\t\t\t\tp.fireEvent(\"loadedCorpus\", src, corpus);\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tboxready: function(panel) {\n\t\t\tif (this.getApiParam('layout')) {\n\t\t\t\tthis.initBorderLayoutComponents();\n\t\t\t} else if (this.getApiParam('tableLayout')) {\n\t\t    \tthis.doTableSizing();\n\t\t    \tthis.on('resize', function(panel, newwidth, newheight, oldwidth, oldheight) {\n\t\t\t\t\tif (oldwidth !== undefined && oldheight !== undefined) {\n\t\t\t        \tvar widthRatio = newwidth/oldwidth;\n\t\t\t        \tvar heightRatio = newheight/oldheight;\n\t\t\t        \tthis.doTableSizing(widthRatio, heightRatio);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t} else {\n\t\t\t\tthis.showError(this.localize('noLayoutSpecified'))\n\t\t\t}\n\t\t}\n\t\t\n\t},\n\t\n\tinitBorderLayoutComponents: function() {\n        var layoutString = decodeURI(this.getApiParam('layout'))\n        \t.replace(/r1/g, 'region')\n\t        .replace(/i1/g, 'items')\n\t        .replace(/s1/g, 'split')\n\t        .replace(/c1/g, 'collapsible')\n\t        .replace(/c2/g, 'collapsed')\n\t        .replace(/w1/g, 'width')\n\t        .replace(/h1/g, 'height')\n\t        .replace(/p1/g, '%')\n\t        .replace(/\"x1\":\"/g, '\"xtype\":\"')\n\t        .replace(/c3/g, 'center')\n\t        .replace(/n1/g, 'north')\n\t        .replace(/e1/g, 'east')\n\t        .replace(/s2/g, 'south')\n\t        .replace(/w2/g, 'west')\n\t    \t.replace(/\"xtype\":\"(\\w+)\"/g, function(match, tool) {\n            \tif (!Ext.ClassManager.getByAlias(\"widget.\"+tool.toLowerCase())) {\n\t\t            if (tool==\"Links\") {tool=\"CollocatesGraph\";}\n\t\t            else if (tool==\"CorpusGrid\") {tool=\"Documents\";}\n\t\t            else if (tool==\"CorpusSummary\") {tool=\"Summary\";}\n\t\t            else if (tool==\"CorpusTypeFrequenciesGrid\") {tool=\"CorpusTerms\";}\n\t\t            else if (tool==\"DocumentInputAdd\") {tool=\"CorpusTerms\";}\n\t\t            else if (tool==\"DocumentTypeCollocateFrequenciesGrid\") {tool=\"CorpusTerms\";}\n\t\t            else if (tool==\"DocumentTypeFrequenciesGrid\") {tool=\"DocumentTerms\";}\n\t\t            else if (tool==\"DocumentTypeKwicsGrid\") {tool=\"Contexts\";}\n\t\t            else if (tool==\"TypeFrequenciesChart\") {tool=\"Trends\";}\n\t\t            else if (tool==\"VisualCollocator\") {tool=\"CollocatesGraph\";}\n\t\t            else {tool=\"NoTool\"}\n            \t}\n            \treturn '\"xtype\":\"'+tool.toLowerCase()+'\"'+(tool==\"NoTool\" ? ',\"html\":\"'+new Ext.Template(panel.localize('noSuchTool')).applyTemplate([tool])+'\"' : '')\n\t\t    })\n        \n        var items;\n        try {\n            items = Ext.decode(layoutString);\n        } catch (e) {\n            items = {region: 'center', html: '<div>Error constructing layout:'+e+'</div>'};\n        }\n        \n        if (items == null) {\n        \titems = {region: 'center', html: '<div>Error: no layout information found.</div>'}\n        }\n        \n        this.addBorderLayouts(items);\n\n        this.on(\"add\", function(custom, cmp) {\n        \tcmp.on(\"boxready\", function(cmp) {\n//        \t\tcmp.query(\"panel\").forEach(function(p) {\n//        \t\t\tcustom;\n////        \t\t\tdebugger\n//        \t\t})\n        \t})\n        })\n        this.add(items);\n//        .on(\"boxready\", function() {\n//        \tdebugger\n//            if (this.getCorpus()) { // we may have loaded the corpus after the layout, so refire the event\n//            \tthis.getApplication().dispatchEvent(\"loadedCorpus\", this.getApplication(), corpus);\n//            }\n//        })\n        \n\t},\n\t\n\taddBorderLayouts: function(items) {\n    \tvar size = Ext.getBody().getSize();\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            if (Ext.isString(item.width)) {\n            \titem.width = Math.round(size.width * parseInt(item.width) / 100);\n            } else if (Ext.isString(item.height)) {\n            \titem.height = Math.round(size.height * parseInt(item.height) / 100);\n            }\n            if (item.items && item.items.length > 1) {\n                item.layout = 'border';\n                this.addBorderLayouts(item.items);\n            } else {\n                item.layout = 'fit';\n            }\n        }\n\t},\n\t\n\tinitTableLayout: function() {\n    \tExt.suspendLayouts();\n    \tvar tableLayout = decodeURI(this.getApiParam('tableLayout'));\n\n    \tif (tableLayout && tableLayout.charAt(0)!=\"{\" && tableLayout.charAt(0)!=\"[\") {\n    \t\tvar cells = [];\n    \t\ttableLayout.replace(/;/g,\",\").split(/,\\s*/).forEach(function(cell) {\n    \t\t\tcells.push(/^\"'/.test(cell) ? cell : '\"'+cell+'\"');\n    \t\t});\n    \t\ttableLayout = \"[\"+cells.join(\",\")+\"]\"; // treat as simple comma-separated string\n    \t}\n    \tvar layout = Ext.decode(tableLayout);\n    \tif (Ext.isArray(layout)) {\n    \t\tlayout = {\n        \t\tcells: layout\n        \t};\n    \t}\n    \tif (!layout.numCols && layout.cells && Ext.isArray(layout.cells)) {\n    \t\tif (layout.cells.length < 3) {\n    \t\t\tlayout.numCols = layout.cells.length;\n    \t\t} else if (layout.cells.length < 5) {\n    \t\t\tlayout.numCols = Math.ceil(layout.cells.length / 2);\n    \t\t} else {\n    \t\t\tlayout.numCols = Math.ceil(layout.cells.length / 3);\n    \t\t}\n    \t}\n        if (layout.numCols != null && layout.cells && Ext.isArray(layout.cells)) {\n        \tvar items = [];\n        \tfor (var i = 0; i < layout.cells.length; i++) {\n        \t\tvar cell = layout.cells[i];\n        \t\tif (Ext.isObject(cell)) {\n        \t\t\tcell.cellWidth = parseFloat(cell.width) || undefined;\n        \t\t\tcell.cellHeight = parseFloat(cell.height) || undefined;\n        \t\t\tdelete cell.width;\n        \t\t\tdelete cell.height;\n            \t\titems.push(cell);\n        \t\t} else if (Ext.isArray(cell)) {\n        \t\t\tvar colspan = 1, rowspan = 1; xtype = undefined;\n        \t\t\tif (cell[0] && Ext.isNumber(cell[0])) {\n        \t\t\t\tcolspan = cell[0];\n        \t\t\t\tcell.shift();\n        \t\t\t}\n        \t\t\tif (cell[0] && Ext.isString(cell[0])) {\n        \t\t\t\txtype = cell[0].toLowerCase();\n        \t\t\t\tcell.shift();\n        \t\t\t}\n        \t\t\tif (cell[0] && Ext.isNumber(cell[0])) {\n        \t\t\t\trowspan = cell[0];\n        \t\t\t}\n        \t\t\tif (xtype) {\n        \t\t\t\titems.push({\n        \t\t\t\t\tcolspan: colspan,\n        \t\t\t\t\trowspan: rowspan,\n        \t\t\t\t\txtype: xtype\n        \t\t\t\t})\n        \t\t\t}\n        \t\t} else if (Ext.isString(cell)) {\n        \t\t\titems.push({\n        \t\t\t\txtype: cell.toLowerCase(),\n        \t\t\t\tcolspan: 1,\n        \t\t\t\trowspan: 1\n        \t\t\t})\n        \t\t}\n        \t}\n        \tExt.apply(this, {\n        \t\tlayout: {\n        \t\t\ttype: 'table',\n        \t\t\twidth: '100%',\n    \t\t\t\theight: '100%',\n        \t\t\tcolumns: layout.numCols,\n        \t\t\ttableAttrs: {\n            \t\t\tstyle: {\n            \t\t\t\twidth: '100%',\n            \t\t\t\theight: '100%'\n            \t\t\t}\n            \t\t},\n            \t\ttdAttrs: {\n            \t\t\tstyle: {\n            \t\t\t\tpadding: '0px',\n            \t\t\t\tverticalAlign: 'top'\n            \t\t\t}\n            \t\t}\n        \t\t},\n        \t\tdefaults: { // place holder values to ensure that the children are rendered\n            \t\twidth: 10,\n            \t\theight: 10,\n            \t\tborder: true\n            \t},\n        \t\titems: items\n        \t});\n        } else {\n        \tthis.showError(\"badTableLayoutDefinition\")\n        }\n    \t\n    \tExt.resumeLayouts();\t\t\n\t},\n\tdoTableSizing: function(widthRatio, heightRatio) {\n    \tvar sizeMap = {};\n    \t\n    \tvar table = this.getTargetEl().down(\".x-table-layout\");\n    \tvar tableSize = table.getSize(false);\n    \t\n    \tvar rows = table.dom.rows;\n    \tfor (var i=0; i<rows.length; i++) {\n    \t\tvar cells = rows[i].cells;\n    \t\tfor (var j=0; j<cells.length; j++) {\n    \t\t\tvar cell = cells[j];\n    \t\t\tvar cellEl = Ext.get(cell);\n    \t\t\tvar panelEl = cellEl.down('.x-panel');\n    \t\t\tvar cmpId = panelEl.id;\n    \t\t\t\n    \t\t\tvar size;\n    \t\t\tif (widthRatio !== undefined && heightRatio !== undefined) {\n    \t\t\t\tsize = panelEl.getSize(false);\n    \t\t\t\tsize.width = size.width * widthRatio;\n            \t\tsize.height = size.height * heightRatio;\n            \t\t// FIXME multiple resize calls gradually reduce size\n    \t\t\t} else {\n    \t\t\t\tvar sizeObj = cellEl.getSize(false);\n    \t\t\t\t\n    \t\t\t\tvar cmp = Ext.getCmp(cmpId);\n    \t\t\t\tvar widthPercent = cmp.initialConfig.cellWidth;\n    \t\t\t\tvar heightPercent = cmp.initialConfig.cellHeight;\n    \t\t\t\t\n    \t\t\t\tif (widthPercent !== undefined) {\n    \t\t\t\t\tsizeObj.width = tableSize.width * (widthPercent/100);\n    \t\t\t\t\tcellEl.setWidth(sizeObj.width);\n    \t\t\t\t}\n    \t\t\t\tif (heightPercent !== undefined) {\n    \t\t\t\t\tsizeObj.height = tableSize.height * (heightPercent/100);\n    \t\t\t\t\tcellEl.setHeight(sizeObj.height);\n    \t\t\t\t}\n    \t\t\t\t\n    \t\t\t\tsize = sizeObj; \n    \t\t\t}\n    \t\t\t\n    \t\t\tsizeMap[cmpId] = size;\n    \t\t}\n    \t}\n    \t\n    \tfor (var id in sizeMap) {\n    \t\tvar size = sizeMap[id];\n    \t\tExt.getCmp(id).setSize(size);\n    \t}\n\n    \tthis.updateLayout();\n\t}\n})","Ext.define('Voyant.panel.Veliza', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n    xtype: 'veliza',\n\tautoScroll: true,\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tscript: '',\n    \t\tmessage: undefined\n    \t},\n\t\tglyph: 'xf0e6@FontAwesome'\n    },\n    config: {\n    \tprevious: []\n    },\n    \n    constructor: function() {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n        var me = this;\n        Ext.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tglyph: 'xf0e6@FontAwesome',\n    \t    layout: {\n    \t        type: 'border',\n    \t        align: 'stretch'\n    \t    },\n    \t\titems: [{\n    \t\t\titemId: 'chat',\n\t    \t\thtml: \"<form class='chat'></form>\",\n\t    \t\tregion: 'center',\n\t    \t\tflex: 2,\n\t    \t\tautoScroll: true\n    \t\t},{\n    \t\t\titemId: 'script',\n    \t\t\txtype: 'form',\n    \t\t\tregion: 'east',\n    \t\t\tsplit: true,\n    \t\t\ttitle: this.localize('scriptEditor'),\n        \t    layout: {\n        \t        type: 'vbox',\n        \t        align: 'stretch'\n        \t    },\n    \t\t\titems: [{\n    \t\t\t\thtml: new Ext.XTemplate(this.localize('scriptIntro')).apply([me.getBaseUrl()+\"docs/#!/guide/veliza\"])\n    \t\t\t},{\n    \t\t\t\txtype: 'textarea',\n    \t\t\t\tname: 'editor',\n    \t\t\t\tfieldStyle: \"white-space: pre\",\n    \t\t\t\tvalue: me.getApiParam('script'),\n    \t\t\t\tflex: 1,\n    \t\t\t\tlisteners: {\n    \t\t\t\t\tafterrender: function(editor) {\n    \t\t\t\t\t\tvar corpus = me.getApiParam('corpus');\n    \t\t\t\t\t\tif (!corpus) {return}\n    \t\t\t\t\t\teditor.mask(me.localize('loadingScript'));\n    \t\t\t\t\t\tExt.Ajax.request({\n    \t\t\t\t\t\t\turl: me.getTromboneUrl(),\n    \t\t\t\t\t\t\tparams: {\n    \t\t\t\t\t\t\t\ttool: 'corpus.Veliza',\n    \t\t\t\t\t\t\t\tscript: me.getApiParam('script'),\n    \t\t\t\t\t\t\t\tcorpus: corpus\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t}).then(function(response) {\n    \t\t\t\t\t\t\tvar obj = Ext.decode(response.responseText);\n    \t\t\t\t\t\t\tif (obj && obj.veliza && obj.veliza.script) {\n    \t\t\t\t\t\t\t\teditor.setValue(obj.veliza.script);\n    \t\t\t\t\t\t\t\teditor.resetOriginalValue();\n    \t\t\t\t\t\t\t} else if (obj && obj.veliza && obj.veliza.id) {\n    \t\t\t\t\t\t\t\tme.setApiParam('script', obj.veliza.id);\n    \t\t\t\t\t\t\t} else {\n    \t\t\t\t\t\t\t\tme.showError(me.localize('unableFetchScript'));\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\teditor.unmask()\n    \t\t\t\t\t\t}, function(response) {\n    \t\t\t\t\t\t\tme.showError(response)\n    \t\t\t\t\t\t})\n    \t\t\t\t\t},\n    \t\t\t\t\tscope: this\n    \t\t\t\t}\n    \t\t\t}],\n    \t\t\tcollapsed: true,\n    \t\t\tcollapsible: true,\n    \t\t\tflex: 1\n    \t\t}],\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n        \t\t\txtype: 'textfield',\n        \t\t\titemId: 'chatfield',\n        \t\t\temptyText: this.localize(\"typeAndEnter\"),\n        \t\t\tflex: 1,\n        \t\t\tlisteners: {\n                        specialkey: function(field, e){\n                            if (e.getKey() == e.ENTER) {\n                            \tme.handleUserSentence(field.getValue())\n                            \tfield.setValue(\"\");\n                            }\n                        }\n                    }\n                },{\n        \t\t\txtype: 'button',\n        \t\t\ttext: this.localize('send'),\n        \t\t\thandler: function() {\n        \t\t\t\tvar tf = this.up(\"toolbar\").down('textfield');\n        \t\t\t\tme.handleUserSentence(tf.getValue(), false);\n        \t\t\t\ttf.setValue('');\n        \t\t\t}\n        \t\t},{\n        \t\t\txtype: 'button',\n        \t\t\ttext: this.localize('fromCorpus'),\n        \t\t\thandler: function() {\n        \t\t\t\tme.handleUserSentence(\"\", true)\n        \t\t\t}\n        \t\t}]\n    \t\t}]\n        })\n             \n        this.callParent();\n        \n    \tthis.on('boxready', function(cmp) {\n    \t\tcmp.addSentence(\"fromThem\", \"Hello, I'm Veliza, and I'm here to talk to you about your texts (you may know my sister <a href='https://en.wikipedia.org/wiki/ELIZA' target='_blank'>Eliza</a> she's a famous psychotherapist). I'm just learning to talk about text documents, but please, let me know about any anxieties you're feeling about your texts. Type a message in the box below and hit enter. Or, if you're feeling playful, hit the <i>from text</i> bottom in the lower right-hand corner to fetch a sentence from the corpus.\");\n    \t\tthis.sendApiParamMessage();\n    \t})\n\n    }, \n    \n    sendApiParamMessage: function() {\n\t\tif (this.getApiParam('message')) {\n\t\t\tif (this.getCorpus()) {\n\t\t\t\tvar sentences = Ext.Array.from(this.getApiParam('message'));\n\t\t\t\tvar sentence = sentences.shift();\n\t\t\t\tif (sentence) {\n\t\t\t\t\tif (sentences) {\n\t\t\t\t\t\tthis.setApiParam(\"message\", sentences);\n\t\t\t\t\t}\n\t\t\t\t\tthis.handleUserSentence(sentence, undefined, true)\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// try to wait for the corpus to be loaded\n\t\t\t\tExt.defer(this.sendApiParamMessage, 100, this, [true])\n\t\t\t}\n\t\t}\n    },\n    \n    \n    handleUserSentence: function(sentence, fromCorpus, noScroll) {\n    \tsentence = sentence.trim();\n    \tif (sentence || fromCorpus) {\n    \t\tif (sentence) {\n    \t    \tthis.addSentence(\"myMessage\", sentence);\n    \t\t}\n\t    \tthis.mask();\n    \t\tvar me = this;\n    \t\tvar editor = this.getComponent('script').down('textarea');\n    \t\tExt.Ajax.request({\n    \t\t\turl: this.getApplication().getTromboneUrl(),\n    \t\t\tparams: {\n    \t\t\t\tcorpus: me.getCorpus() ? me.getCorpus().getId() : undefined,\n    \t\t\t\ttool: 'corpus.Veliza',\n    \t\t\t\tsentence: sentence,\n    \t\t\t\t//previous: this.getPrevious(),\n    \t\t\t\tfromCorpus: fromCorpus ? true : false,\n    \t\t\t\tscript: editor.isDirty() ? editor.getValue() : this.getApiParam('script'),\n    \t\t\t\tnoCache: Ext.id()\n    \t\t\t},\n    \t\t    success: function(response, opts) {\n    \t\t    \tme.unmask();\n    \t\t    \tvar response = Ext.decode(response.responseText);\n    \t\t    \tif (response.veliza.id) {\n    \t\t    \t\tme.setApiParam('script', response.veliza.id);\n    \t\t    \t\teditor.resetOriginalValue();\n    \t\t    \t}\n    \t\t    \tvar veliza = response.veliza.response;\n    \t\t    \tvar hidden = veliza.match(/<\\!-- (.+?) --\u003e/);\n    \t\t    \tif (hidden) {\n    \t\t    \t\tvar json =  Ext.decode(hidden[1]);\n    \t\t    \t\tfor (key in json.params) {\n    \t\t    \t\t\tjson.params[key] = json.params[key].trim();\n    \t\t    \t\t}\n    \t\t    \t\tveliza += \"<br/><iframe width='\"+(json.width ? json.width : '100%')+\"' height='\"+(json.height ? json.height : '250px')+\"' src='\"+me.getApplication().getBaseUrl()+'tool/'+json.tool+'/?corpus='+me.getCorpus().getId()+'&minimal=true&'+Ext.Object.toQueryString(json.params)+\"'></iframe>\"\n    \t\t    \t}\n    \t\t    \tvar sentence = response.veliza.sentence;\n    \t\t    \tme.setPrevious(response.veliza.previous);\n\n    \t\t    \tif (fromCorpus) {\n    \t\t    \t\tmeta = response.veliza.docIndex > -1 ? me.getCorpus().getDocument(response.veliza.docIndex).getShortLabel() : undefined;\n    \t\t    \t\tme.addSentence(\"myMessage\", sentence, meta);\n        \t\t\t    \tExt.Function.defer(function() {\n                \t\t    \tthis.addSentence(\"fromThem\", veliza);\n                \t\t    \tif (!noScroll) {\n                    \t\t    \tthis.body.scroll('b', Infinity)                \t\t    \t\t\n                \t\t    \t}\n        \t\t\t    \t}, 500, me);\n    \t\t    \t} else {\n        \t\t    \tme.addSentence(\"fromThem\", veliza);\n        \t\t    \tif (!noScroll) {\n            \t\t    \tme.body.scroll('b', Infinity)                \t\t    \t\t\n        \t\t    \t}\n    \t\t    \t}\n    \t\t    \tif (me.getApiParam(\"message\")) { // any more messages to show?\n    \t\t    \t\tme.sendApiParamMessage();\n    \t\t    \t}\n    \t\t    },\n    \t\t    failure: function(response, opts) {\n    \t\t    \tme.showResponseError(\"Unable to get response from Veliza.\", response);\n    \t\t    }\n    \t\t})\n    \t}\n    },\n\n    addSentence: function(speaker, sentence, meta) {\n    \tvar body = this.getComponent('chat').body;\n    \tvar el = body.down(\"form\").insertHtml('beforeEnd', '<div class=\"message\"><div class=\"'+speaker+'\"><p>'+sentence+'</p>'+(meta ? \"<date>\"+meta+\"</date>\" : \"\")+'</div></div>', true);\n    \tbody.scroll('b', Infinity);\n    }\n});","Ext.define('Voyant.panel.WordTree', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.wordtree',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tquery: undefined,\n    \t\tdocId: undefined,\n    \t\tdocIndex: undefined,\n    \t\tstopList: 'auto',\n    \t\tcontext: 10,\n    \t\tlimit: 100\n    \t},\n\t\tglyph: 'xf0e8@FontAwesome'\n    },\n    \n    config: {\n    \ttree: undefined,\n    \tkwicStore: undefined,\n    \toptions: [{xtype: 'stoplistoption'},{xtype: 'categoriesoption'}],\n    \tnumBranches: 5,\n    \tlastClick: 1\n    },\n    \n    doubleClickDelay: 300,\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        Ext.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n                \txtype: 'querysearchfield'\n                },\n                \t'<span data-qtip=\"'+this.localize('poolTip')+'\" class=\"info-tip\">'+this.localize('pool')+\"</span>\"\n                , {\n                \txtype: 'slider',\n                \titemId: 'poolSlider',\n                \tminValue: 10,\n                \tvalue: 100,\n                \tmaxValue: 1000,\n                \tincrement: 5,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(this.getApiParam('limit'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tthis.setApiParam('limit', slider.getValue());\n                \t\t\tthis.reload();\n                \t\t},\n                \t\tscope: this\n                \t}\n                }, \n                \t'<span data-qtip=\"'+this.localize('branchesTip')+'\" class=\"info-tip\">'+this.localize('branches')+\"</span>\"\n    \t\t\t,{\n                \n                \txtype: 'slider',\n                \titemId: 'branchesSlider',\n                \tminValue: 2,\n                \tvalue: 5,\n                \tmaxValue: 15,\n                \tincrement: 1,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(this.getNumBranches());\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tthis.setNumBranches(slider.getValue());\n                \t\t\tthis.reload();\n                \t\t},\n                \t\tscope: this\n                \t}\n                },\n            \t'<span data-qtip=\"'+this.localize('contextTip')+'\" class=\"info-tip\">'+this.localize('context')+\"</span>\"\n            \t, {\n                \txtype: 'slider',\n                \titemId: 'contextSlider',\n                \tminValue: 3,\n                \tvalue: 10,\n                \tmaxValue: 20,\n                \tincrement: 2,\n                \twidth: 50,\n                \tlisteners: {\n                \t\trender: function(slider) {\n                \t\t\tslider.setValue(this.getApiParam('context'));\n                \t\t},\n                \t\tchangecomplete: function(slider, newValue) {\n                \t\t\tthis.setApiParam('context', slider.getValue());\n                \t\t\tthis.reload();\n                \t\t},\n                \t\tscope: this\n                \t}\n                }]\n    \t\t}]\n        });\n        \n        this.setKwicStore(Ext.create('Voyant.data.store.Contexts', {\n        \tparentPanel: this,\n        \tproxy: {\n        \t\textraParams: {\n                \tstripTags: 'all'            \t\t\t\n        \t\t}\n        \t},\n        \tlisteners: {\n        \t\tload: function(store, records, success, operation) {\n        \t\t\tif (success) {\n        \t\t\t\tthis.parseRecords(records);\n        \t\t\t}\n        \t\t},\n        \t\tscope: this\n        \t}\n        }));\n        \n        this.on('loadedCorpus', function(src, corpus) {\n        \tvar corpusTerms = corpus.getCorpusTerms({autoLoad: false});\n    \t\tcorpusTerms.load({\n    \t\t    callback: function(records, operation, success) {\n    \t\t    \tif (success && records.length>0) {\n    \t\t    \t\tvar firstTerm = records[0].getTerm();\n    \t\t    \t\tthis.setRoot(firstTerm);\n    \t\t    \t}\n    \t\t    },\n    \t\t    scope: this,\n    \t\t    params: {\n    \t\t\t\tlimit: 1,\n    \t\t\t\tquery: this.getApiParam('query'),\n    \t\t\t\tstopList: this.getApiParam('stopList')\n    \t\t\t}\n        \t});\n        }, this);\n        \n        this.on('query', function(src, query) {\n    \t\tif (query !== undefined && query != '') {\n    \t\t\tthis.setRoot(query);\n    \t\t}\n        }, this);\n        \n        this.on('termsClicked', function(src, terms) {\n        \tvar queryTerms = [];\n    \t\tterms.forEach(function(term) {\n    \t\t\tif (Ext.isString(term)) {queryTerms.push(term);}\n    \t\t\telse if (term.term) {queryTerms.push(term.term);}\n    \t\t\telse if (term.getTerm) {queryTerms.push(term.getTerm());}\n    \t\t});\n    \t\tthis.setRoot(queryTerms);\n\t\t}, this);\n        \n        this.on('documentTermsClicked', function(src, terms) {\n    \t\tvar queryTerms = [];\n    \t\tterms.forEach(function(term) {\n    \t\t\tif (term.getTerm()) {queryTerms.push(term.getTerm());}\n    \t\t});\n    \t\tthis.setRoot(queryTerms);\n    \t}, this);\n        \n        this.on('resize', function(panel, width, height) {\n        \tvar tree = this.getTree();\n        \tif (tree !== undefined) {\n        \t\ttree.visWidth(width).visHeight(height);\n        \t\t// TODO preserve expanded branches\n        \t\ttree.redraw();\n        \t}\n\t\t}, this);\n        \n        this.on('boxready', this.initGraph, this);\n        \n        this.callParent(arguments);\n    },\n    \n    parseRecords: function(records) {\n    \tvar parsedRecords = [];\n\t\tfor (var i = 0; i < records.length; i++) {\n\t\t\tvar r = records[i];\n\t\t\tvar pr = {\n\t\t\t\tid: i,\n\t\t\t\tprefix: r.getLeft().trim().split(/\\s+/),\n\t\t\t\thit: r.getMiddle(),\n\t\t\t\tsuffix: r.getRight().trim().split(/\\s+/)\n\t\t\t};\n\t\t\tparsedRecords.push(pr);\n\t\t}\n\t\t\n\t\t// find top tokens and sort records by them\n\t\tvar prefixTokenCounts = {};\n\t\tvar suffixTokenCounts = {};\n\t\tfor (var i = 0; i < parsedRecords.length; i++) {\n\t\t\tvar pr = parsedRecords[i];\n\t\t\tvar prefixToken = pr.prefix[pr.prefix.length-1];\n\t\t\tvar suffixToken = pr.suffix[0];\n\t\t\tif (prefixTokenCounts[prefixToken]) {\n\t\t\t\tprefixTokenCounts[prefixToken]++;\n\t\t\t} else {\n\t\t\t\tprefixTokenCounts[prefixToken] = 1;\n\t\t\t}\n\t\t\tif (suffixTokenCounts[suffixToken]) {\n\t\t\t\tsuffixTokenCounts[suffixToken]++;\n\t\t\t} else {\n\t\t\t\tsuffixTokenCounts[suffixToken] = 1;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar sortableTokens = [];\n\t\tfor (var i = 0; i < parsedRecords.length; i++) {\n\t\t\tvar pr = parsedRecords[i];\n\t\t\tvar prefixToken = pr.prefix[pr.prefix.length-1];\n\t\t\tvar suffixToken = pr.suffix[0];\n\t\t\t\n\t\t\tsortableTokens.push({\n\t\t\t\tsuffix: suffixToken, suffixCount: suffixTokenCounts[suffixToken],\n\t\t\t\tprefix: prefixToken, prefixCount: prefixTokenCounts[prefixToken]\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t\tvar prioritizeSuffix = false;\n\t\t// multi-sort\n\t\tsortableTokens.sort(function(a, b) {\n\t\t\tvar s1 = a.suffixCount;\n\t\t\tvar s2 = b.suffixCount;\n\t\t\t\n\t\t\tvar p1 = a.prefixCount;\n\t\t\tvar p2 = b.prefixCount;\n\t\t\t\n\t\t\tif (prioritizeSuffix) {\n\t\t\t\tif (s1 > s2) return -1;\n\t\t\t\tif (s1 < s2) return 1;\n\t\t\t\tif (p1 > p2) return -1;\n\t\t\t\tif (p1 < p2) return 1;\n\t\t\t} else {\n\t\t\t\tif (p1 > p2) return -1;\n\t\t\t\tif (p1 < p2) return 1;\n\t\t\t\tif (s1 > s2) return -1;\n\t\t\t\tif (s1 < s2) return 1;\n\t\t\t}\n\t\t\t\n\t\t\treturn 0;\n\t\t});\n\t\t\n\t\tvar len = Math.min(this.getNumBranches(), sortableTokens.length);\n\t\tvar topSuffixTokens = [];\n\t\tvar topPrefixTokens = [];\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\ttopSuffixTokens.push(sortableTokens[i].suffix);\n\t\t\ttopPrefixTokens.push(sortableTokens[i].prefix);\n\t\t}\n\t\t\n\t\t// use top tokens to limit results\n\t\tvar prefixes = [], hits = [], suffixes = [], ids = [];\n\t\tfor (var i = 0; i < parsedRecords.length; i++) {\n\t\t\tvar parsedRecord = parsedRecords[i];\n\t\t\tif (topSuffixTokens.indexOf(parsedRecord.suffix[0]) != -1 || topPrefixTokens.indexOf(parsedRecord.suffix[0]) != -1) {\n\t\t\t\tprefixes.push(parsedRecord.prefix);\n\t\t\t\thits.push(parsedRecord.hit);\n\t\t\t\tsuffixes.push(parsedRecord.suffix);\n\t\t\t\tids.push(parsedRecord.id);\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar caseSensitive = false;\n\t\tvar fieldNames = [\"token\", \"POS\"];\n\t\tvar fieldDelim = \"/\";\n\t\tvar distinguishingFieldsArray = [\"token\", \"POS\"];\n\t\tthis.getTree().setupFromArrays(prefixes, hits, suffixes, ids, caseSensitive, fieldNames, fieldDelim, distinguishingFieldsArray);\n\t\t\n\t\tif (!this.getTree().succeeded()) {\n\t\t\tthis.toastInfo({\n   \t\t\t\thtml: this.localize(\"emptyText\"),\n   \t\t\t\talign: 'bl'\n   \t\t\t});\n\t\t}\n    },\n    \n    initGraph: function() {\n    \tvar el = this.getLayout().getRenderTarget();\n    \tvar w = el.getWidth();\n    \tvar h = el.getHeight();\n    \t\n    \tvar dt = new doubletree.DoubleTree();\n    \tdt.init('#'+el.getId())\n    \t\t.visWidth(w).visHeight(h)\n    \t\t.handlers({\n    \t\t\tclick: this.clickHandler.bind(this)\n    \t\t});\n    \t\n    \tthis.setTree(dt);\n    \t\n    \t// explicitly set dimensions\n//    \tel.setWidth(el.getWidth());\n//    \tel.setHeight(el.getHeight());\n    },\n    \n    clickHandler: function(node) {\n    \tvar now = new Date().getTime();\n    \tif (this.getLastClick() && now-this.getLastClick()<this.doubleClickDelay) {\n    \t\tthis.setLastClick(1);\n    \t\tvar terms = [], parent = node;\n        \twhile (parent != null) {\n        \t\tterms.push(parent.name);\n        \t\tparent = parent.parent;\n        \t}\n        \tthis.getApplication().dispatchEvent('termsClicked', this, [terms.reverse().join(\" \")]);\n    \t} else {\n    \t\tthis.setLastClick(now);\n    \t}\n    },\n    \n//    doubleClickHandler: function(node) {\n//// dispatch phrase click instead of recentering (which can be done with search)\n////    \tthis.setRoot(node.name);\n//    },\n//    \n    setRoot: function(query) {\n    \tthis.setApiParam('query', this.stripPunctuation(query));\n\t\tthis.getKwicStore().load({params: this.getApiParams()});\n    },\n    \n    reload: function() {\n    \tvar query = this.getApiParam('query');\n    \tif (query !== undefined) {\n    \t\tthis.setRoot(query);\n    \t}\n    },\n    \n    stripPunctuation: function(value) {\n    \tif (Ext.isString(value)) return value.replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, '');\n    \telse {\n    \t\tvar values = [];\n    \t\tvalue.forEach(function(v) {\n    \t\t\tvalues.push(v.replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, ''));\n    \t\t});\n    \t\treturn values;\n    \t}\n    \treturn '';\n    }\n});\n\n","Ext.define('Voyant.panel.WordWall', {\n    extend: 'Ext.panel.Panel',\n    mixins: ['Voyant.panel.Panel','Voyant.util.DiacriticsRemover'],\n    alias: 'widget.wordwall',\n    statics: {\n        i18n: {\n        },\n        api: {\n            limit: 500,\n            stopList: 'auto'\n        },\n        glyph: 'xf1e0@FontAwesome'\n    },\n    \n    config: {\n        visId: undefined,\n        vis: undefined,\n        simulation: undefined, // force layout\n        nodes: undefined, // svg nodes\n        tempNodes: undefined, // used to calculate text size and bounding boxes\n        zoom: undefined,\n\n        terms: undefined,\n        segments: undefined,\n\n        filterOutUniqueTerms: true, // whether to remove terms that don't appear in all segments\n\n        currentSegment: undefined,\n        segmentTerms: undefined,\n        segmentTermsQueue: [],\n\n        segmentDelay: 5000, // delay before displaying new segment data\n        segmentDelayTimer: undefined,\n        \n        webWorker: undefined,\n        isSimulating: false, // are we running a webworker simulation?\n        \n        transitionTime: 2000, // time to transition between old and new nodes\n        isTransitioning: false, // are we transitioning between nodes?\n        \n\n        minFreq: undefined,\n        maxFreq: undefined,\n        letterDistribution: undefined,\n        \n        frequencyScale: undefined,\n\n        xForceStrength: 0.2,\n        yForceStrength: 0.1,\n        \n        chargeStrength: -75,\n        chargeDistance: 100,\n\n        minFontSize: 7,\n        maxFontSize: 60\n    },\n\n    count: 0,\n\n    MIN_TERMS: 10,\n    MAX_TERMS: 2000,\n    \n    MIN_SCALING: 1,\n    MAX_SCALING: 20,\n    \n    debugMsg: false,\n\n    constructor: function(config) {\n        this.mixins['Voyant.util.DiacriticsRemover'].constructor.apply(this, arguments);\n\n        this.setVisId(Ext.id(null, 'wordwall_'));\n\n        this.callParent(arguments);\n        this.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function() {\n        Ext.apply(this, {\n            title: this.localize('title'),\n            dockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [this.localize('terms'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: this.MIN_TERMS,\n                    maxValue: this.MAX_TERMS,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getApiParam('limit'));\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setApiParam('limit', slider.getValue());\n                            this.initLoad();\n                        },\n                        scope: this\n                    }\n                },this.localize('delay'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 1,\n                    maxValue: 60,\n                    increment: 1,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getSegmentDelay()/1000);\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setSegmentDelay(slider.getValue()*1000);\n                            this.restartSegmentTimer();\n                        },\n                        scope: this\n                    }\n                },this.localize('transition'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 100,\n                    maxValue: 5000,\n                    increment: 1,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getTransitionTime());\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setTransitionTime(slider.getValue());\n                        },\n                        scope: this\n                    }\n                },this.localize('xStrength'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 0,\n                    maxValue: 1000,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getXForceStrength()*1000);\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setXForceStrength(slider.getValue()/1000);\n                        },\n                        scope: this\n                    }\n                },this.localize('yStrength'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 0,\n                    maxValue: 1000,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getYForceStrength()*1000);\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setYForceStrength(slider.getValue()/1000);\n                        },\n                        scope: this\n                    }\n                },this.localize('chargeStrength'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: -1000,\n                    maxValue: 0,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getChargeStrength());\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setChargeStrength(slider.getValue());\n                        },\n                        scope: this\n                    }\n                },this.localize('chargeDistance'),{\n                    width: 50,\n                    xtype: 'slider',\n                    minValue: 0,\n                    maxValue: 1000,\n                    increment: 10,\n                    listeners: {\n                        render: function(slider) {\n                            slider.setValue(this.getChargeDistance());\n                        },\n                        changecomplete: function(slider, newValue) {\n                            this.setChargeDistance(slider.getValue());\n                        },\n                        scope: this\n                    }\n                },{\n                    xtype: 'button',\n                    text: this.localize('stop'),\n                    handler: function(b) {\n                        if (b.getText() === this.localize('stop')) {\n                            clearInterval(this.getSegmentDelayTimer());\n                            b.setText(this.localize('start'))\n                        } else {\n                            this.restartSegmentTimer();\n                            b.setText(this.localize('stop'));\n                        }\n                    },\n                    scope: this\n                },{\n                    itemId: 'status',\n                    xtype: 'tbtext',\n                    text: ''\n                }]\n            }]\n        });\n        \n        this.on('loadedCorpus', function(src, corpus) {\n            if (this.isVisible()) {\n                this.initLoad();\n            }\n        }, this);\n        \n        this.on('resize', function(panel, width, height) {\n            var vis = Ext.get(this.getVisId());\n            if (vis) {\n                var el = this.body;//this.getLayout().getRenderTarget();\n                var elHeight = el.getHeight();\n                var elWidth = el.getWidth();\n                \n                vis.el.dom.setAttribute('width', elWidth);\n                vis.el.dom.setAttribute('height', elHeight);\n//                this.getSimulation()\n//                    .force('x', d3.forceX(elWidth/2))\n//                    .force('y', d3.forceY(elHeight/2));\n            }\n        }, this);\n        \n        this.callParent(arguments);\n    },\n    \n    initVis: function() {\n        var el = this.getLayout().getRenderTarget();\n        el.update('');\n        var width = el.getWidth();\n        var height = el.getHeight();\n\n        var svg = d3.select(el.dom).append('svg').attr('id',this.getVisId()).attr('class', 'wordWall').attr('width', width).attr('height', height);\n        var g = svg.append('g');\n        this.setVis(g);\n        \n        this.setNodes(g.append('g').attr('class', 'nodes').selectAll('.node'));\n\n        this.setTempNodes(g.append('g').attr('class', 'tempNodes').selectAll('text'));\n\n        if (this.getWebWorker() === undefined) {\n            this.setWebWorker(new Worker(this.getBaseUrl()+'resources/d3/WordWallWorker.js'));\n            this.getWebWorker().onmessage = this.handleWebWorkerMessage.bind(this);\n        }\n    },\n\n    initLoad: function() {\n        this.initVis();\n        \n        this.count = 0;\n\n        var params = this.getApiParams();\n        params.tool = 'corpus.CorpusSegmentTerms';\n        \n        Ext.Ajax.request({\n            url: this.getTromboneUrl(),\n            params: params,\n            success: function(response) {\n                var data = Ext.decode(response.responseText);\n                this.setSegments(data.corpusSegmentTerms.segments);\n\n                var terms = data.corpusSegmentTerms.terms;\n                if (this.getFilterOutUniqueTerms()) {\n                    terms = terms.filter(function(el, index) { return el.rawFreqs.indexOf(0) == -1 });\n                }\n\n                this.setTerms(terms);\n                \n                this.setCurrentSegment(this.getSegments().length);\n                this.getNextSegment();\n\n                this.restartSegmentTimer();\n            },\n            failure: function(response) {\n                if (this.debugMsg) console.log('failed', response);\n            },\n            scope: this\n        })\n    },\n\n    restartSegmentTimer: function() {\n        clearInterval(this.getSegmentDelayTimer());\n\n        this.setSegmentDelayTimer(setInterval(function() {\n            this.updateNodePositions();\n        }.bind(this), this.getSegmentDelay()));\n    },\n\n    getNextSegment: function() {\n        var index = this.getCurrentSegment();\n        index++;\n        if (index >= this.getSegments().length) {\n            index = 0;\n        }\n        this.setCurrentSegment(index);\n        if (this.debugMsg) console.log('getNextSegment', index);\n        this.processTermsForSegment(this.getCurrentSegment());\n    },\n\n    processTermsForSegment: function(segmentIndex) {\n        var min = Number.MAX_VALUE;\n        var max = Number.MIN_VALUE;\n        var letterDistMap = {a:0,b:0,c:0,d:0,e:0,f:0,g:0,h:0,i:0,j:0,k:0,l:0,m:0,n:0,o:0,p:0,q:0,r:0,s:0,t:0,u:0,v:0,w:0,x:0,y:0,z:0};\n\n        this.getTerms().forEach(function(d) {\n            d.id = this.idGet(d.term);\n            // d.value = d.rawFreqs.reduce(function(sum, value) {\n            //     return sum+value;\n            // });\n            d.value = d.rawFreqs[segmentIndex];\n            if (d.value > 0) {\n                if (d.value < min) {\n                    min = d.value;\n                }\n                if (d.value > max) {\n                    max = d.value;\n                }\n\n                d.title = d.term+' ('+d.value+')';\n\n                var firstLetter = this.removeDiacritics(d.term.charAt(0)).toLowerCase();\n                d.letter = firstLetter;\n                if (letterDistMap[firstLetter] === undefined) {\n                    letterDistMap[firstLetter] = 0;\n                }\n                letterDistMap[firstLetter]++;\n            }\n        }, this);\n\n        this.setSegmentTerms(this.getTerms().filter(function(d) {\n            return d.value > 0;\n        }));\n\n        this.setMinFreq(min);\n        this.setMaxFreq(max);\n\n        var letterDist = [];\n        for (var letter in letterDistMap) {\n            var count = letterDistMap[letter];\n            var percent = count / this.getTerms().length;\n            letterDist.push({letter: letter, percent: percent});\n        }\n        letterDist.sort(function(a, b) {\n            if (a.letter < b.letter) return -1;\n            if (a.letter > b.letter) return 1;\n            return 0;\n        });\n        this.setLetterDistribution(letterDist);\n\n        this.calculateNodeSizes(this.getSegmentTerms());\n        this.runSimulation(this.getSegmentTerms());\n    },\n\n    // determine each node's font size and bounding box and store them for later use\n    calculateNodeSizes: function(terms) {\n        var nodes = this.getTempNodes().data(terms, function(d) { return d.id; });\n        \n        var fontSizer = function(value) {\n            var t = Math.min(1, terms.length / this.MAX_TERMS);\n            var exponent = t*2+1;\n            value = this.getFrequencyScale()(value);\n            var val = d3.scalePow().exponent(exponent).domain([0, 1]).range([this.getMinFontSize(), this.getMaxFontSize()])(value);\n            return val;\n        }.bind(this);\n\n        var bboxTotal = 0;\n\n        nodes.enter().append('text')\n            .attr('fill-opacity', 0)\n            .attr('font-family', function(d) { return 'Arial'; })//return me.getApplication().getCategoriesManager().getFeatureForTerm('font', d.term); })\n            .attr('font-size', function(d) {\n                var fontSize = fontSizer(d.value);\n                d.fontSize = fontSize;\n                return fontSize;\n            })\n            .text(function(d) { return d.term; })\n            .each(function(d) {\n                var bbox = this.getBBox();\n                d.bbox = {};\n                d.bbox.x = bbox.x;\n                d.bbox.y = bbox.y;\n                d.bbox.width = bbox.width;\n                d.bbox.height = bbox.height;\n\n                bboxTotal += bbox.width*bbox.height;\n            })\n            .remove();\n\n        var el = this.getLayout().getRenderTarget();\n        var width = el.getWidth();\n        var height = el.getHeight();\n\n        // adapt font size to available space\n        var availableSpace = width*height;\n        if (bboxTotal > availableSpace*0.6) {\n            this.setMaxFontSize(this.getMaxFontSize()*0.9);\n            this.setMinFontSize(this.getMinFontSize()*0.9);\n            this.calculateNodeSizes(terms);\n        } else if (bboxTotal < availableSpace*0.5) {\n            this.setMaxFontSize(this.getMaxFontSize()*1.1);\n            this.setMinFontSize(this.getMinFontSize()*1.1);\n            this.calculateNodeSizes(terms);\n        }\n    },\n\n    runSimulation: function(terms) {\n        this.setIsSimulating(true);\n\n        var el = this.getLayout().getRenderTarget();\n        var width = el.getWidth();\n        var height = el.getHeight();\n\n        // pass all the info to the worker\n        if (this.debugMsg) console.time(\"runSim\");\n        this.getWebWorker().postMessage({\n            terms: terms,\n            width: width,\n            height: height,\n            minFreq: this.getMinFreq(),\n            maxFreq: this.getMaxFreq(),\n            xForceStrength: this.getXForceStrength(),\n            yForceStrength: this.getYForceStrength(),\n            chargeDistance: this.getChargeDistance(),\n            chargeStrength: this.getChargeStrength(),\n            letterDistribution: this.getLetterDistribution()\n        });\n    },\n\n    handleWebWorkerMessage: function(event) {\n        switch (event.data.type) {\n            case \"progress\":\n                var t = event.data.progress;\n                var percent = parseInt(t * 100);\n                this.getDockedItems()[1].getComponent('status').update(percent+'%');\n                break;\n            case \"msg\":\n                if (this.debugMsg) console.log(event.data.msg);\n                break;\n            case \"end\":\n                if (this.debugMsg) console.timeEnd(\"runSim\");\n                // TODO adjust segment delay if it's less than the runSim time\n                this.getDockedItems()[1].getComponent('status').update('');\n                this.setIsSimulating(false);\n                this.getSegmentTermsQueue().push(event.data.nodes);\n                break;\n        }\n    },\n\n    updateNodePositions: function() {\n        if (this.getIsTransitioning()) {\n            Ext.Function.defer(this.updateNodePositions, 100, this);\n        } else {\n            this.count++;\n            var nodes = this.getSegmentTermsQueue().shift();\n            if (this.debugMsg) console.log('queue length', this.getSegmentTermsQueue().length);\n            if (nodes === undefined) {\n                if (this.debugMsg) console.log('no nodes', this.count);\n                if (this.getIsSimulating() === false) {\n                    this.getNextSegment();\n                }\n            } else {\n                this.setIsTransitioning(true);\n                if (this.getSegmentTermsQueue().length == 0) {\n                    this.getNextSegment();\n                }\n                \n                var nodeUpdate = this.getNodes().data(nodes, function(d) { return d.id; });\n\n                nodeUpdate.transition().duration(this.getTransitionTime()).attr('transform', function(d) {\n                    var x = d.x;\n                    var y = d.y;\n                    return 'translate('+x+','+y+')';\n                });\n\n                var nodeEnter = nodeUpdate.enter().append('g')\n                    .attr('class', 'node')\n                    .attr('id', function(d) { return d.id; })\n                    .attr('transform', function(d) {\n                        var x = d.x;\n                        var y = d.y;\n                        return 'translate('+x+','+y+')';\n                    })\n                    .attr('fill-opacity', 0);\n\n                nodeEnter.append('title').text(function(d) { return d.title; });\n\n                nodeEnter.append('text')\n                    .attr('font-family', function(d) { return 'Arial'; })//return me.getApplication().getCategoriesManager().getFeatureForTerm('font', d.term); })\n                    .attr('font-size', function(d) { return d.fontSize; })\n                    .attr('fill', function(d) { return this.getApplication().getCategoriesManager().getFeatureForTerm('color', d.term); }.bind(this))\n                    .style('cursor', 'pointer')\n                    .style('user-select', 'none')\n                    .attr('alignment-baseline', 'middle')\n                    .text(function(d) { return d.term; });\n\n                nodeEnter.transition().duration(this.getTransitionTime()).attr('fill-opacity', 1);\n\n                var allNodes = nodeEnter.merge(nodeUpdate);\n\n                allNodes.select('text').transition().duration(this.getTransitionTime())\n                    .attr('font-size', function(d) { return d.fontSize; });\n\n                nodeUpdate.exit().transition().duration(this.getTransitionTime()).attr('fill-opacity', 0).remove();\n\n                setTimeout(function() {\n                    this.setIsTransitioning(false);\n                }.bind(this), this.getTransitionTime());\n\n                this.setNodes(allNodes);\n            }\n        }\n    },\n\n    updateMinFreq: function() {\n        this.setFrequencyScale(d3.scaleLog().domain([this.getMinFreq(), this.getMaxFreq()]).range([0, 1]));\n    },\n\n    updateMaxFreq: function() {\n        this.setFrequencyScale(d3.scaleLog().domain([this.getMinFreq(), this.getMaxFreq()]).range([0, 1]));\n    },\n\n    zoomToFit: function(paddingPercent, transitionDuration) {\n    \tvar bounds = this.getVis().node().getBBox();\n    \tvar width = bounds.width;\n    \tvar height = bounds.height;\n    \tvar midX = bounds.x + width/2;\n    \tvar midY = bounds.y + height/2;\n    \tvar svg = this.getVis().node().parentElement;\n    \tvar fullWidth = svg.clientWidth;\n    \tvar fullHeight = svg.clientHeight;\n    \tvar scale = (paddingPercent || 0.8) / Math.max(width/fullWidth, height/fullHeight);\n    \tvar translate = [fullWidth/2 - scale*midX, fullHeight/2 - scale*midY];\n \n    \td3.select(svg)\n    \t\t.transition()\n    \t\t.duration(transitionDuration || 500)\n    \t\t.call(this.getZoom().transform, d3.zoomIdentity.translate(translate[0],translate[1]).scale(scale));\n    },\n    \n    idGet: function(term) {\n        return term.replace(/\\W/g, '_');\n    }\n    \n});","// heavy lifting for the LDA from https://github.com/mimno/jsLDA with tweaks to fit into a Voyant object scope\n\nExt.define('Voyant.panel.Topics', {\n\textend: 'Ext.grid.Panel',\n\tmixins: ['Voyant.panel.Panel','Voyant.widget.LiveSearchGrid'],\n\talias: 'widget.topics',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tnumTopics: 25,\n    \t\tlimit: 10,\n    \t\titerations: 100,\n    \t\tperDocLimit: 1000,\n    \t\tquery: undefined\n    \t},\n\t\tglyph: 'xf1ea@FontAwesome'\n    },\n    config: {\n    \t/**\n    \t * @private\n    \t */\n    \toptions: [{xtype: 'stoplistoption'},{\n\t        xtype: 'numberfield',\n\t        name: 'perDocLimit',\n\t        fieldLabel: 'maximum words per document',\n\t        labelAlign: 'right',\n\t        value: 1000,\n\t        minValue: 1,\n\t        step: 100,\n\t        listeners: {\n    \t        afterrender: function(field) {\n    \t        \tvar win = field.up(\"window\");\n    \t        \tif (win && win.panel) {\n        \t        \tfield.setValue(parseInt(win.panel.getApiParam('perDocLimit')))\n    \t        \t\tfield.setFieldLabel(win.panel.localize(\"perDocLimit\"))\n    \t        \t}\n    \t        },\n\t\t        change: function(field, val) {\n\t\t        \tvar win = field.up(\"window\");\n\t\t        \tif (val>5000 && win && win.panel) {\n\t\t        \t\twin.panel.toastInfo({\n\t\t        \t\t\thtml: win.panel.localize(\"perDocLimitHigh\"),\n\t\t        \t\t\tanchor: win.getTargetEl(),\n\t\t        \t\t\talign: 'tr',\n\t\t        \t\t\tmaxWidth: 400\n\t\t        \t\t})\n\t\t        \t}\n\t\t        }\n\t        }\n\t    },{\n\t        xtype: 'numberfield',\n\t        name: 'iterations',\n\t        fieldLabel: 'iterations per run',\n\t        labelAlign: 'right',\n\t        value: 100,\n\t        minValue: 1,\n\t        maxValue: 10000,\n\t        step: 50,\n\t        listeners: {\n    \t        afterrender: function(field) {\n    \t        \tvar win = field.up(\"window\");\n    \t        \tif (win && win.panel) {\n        \t        \tfield.setValue(parseInt(win.panel.getApiParam('iterations')))\n    \t        \t\tfield.setFieldLabel(win.panel.localize(\"iterations\"))\n    \t        \t}\n    \t        }\n\t        }\n\t    }],\n    \t\n    \tcorpus: undefined,\n    \t\n    \tdocumentTopicSmoothing : 0.1,\n    \ttopicWordSmoothing : 0.01,\n    \tvocabularySize : 0,\n    \t vocabularyCounts : {},\n    \t stopwords : {},\n    \t docSortSmoothing : 10.0,\n    \t sumDocSortSmoothing : 10.0 * 25, // update?\n    \t requestedSweeps : 0,\n    \t wordTopicCounts : {},\n    \t topicWordCounts : [],\n    \t tokensPerTopic : [],\n    \t topicWeights : Array(25),\n    \t documents: [],\n    \t progress: undefined,\n    \t totalIterations: 0,\n    \t exportGridAll: false\n    \t\n    },\n    \n    zeros: function(count, val) {\n    \tval = val || 0;\n    \tvar ret = Array(count)\n    \tfor (var i=0; i<count; i++) {ret[i]=val;}\n    \treturn ret;\n    },\n    \n    constructor: function(config ) {\n    \tvar me = this;\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tlayout: {\n    \t        type: 'hbox',\n    \t        pack: 'start',\n    \t        align: 'stretch'\n    \t    },\n\t        store: {\n\t            fields: ['topic', 'scores'],\n\t            data: []\n\t        },\n    \t\tcolumns: [{\n    \t\t\ttext: this.localize(\"topic\"),\n    \t\t\ttooltip: this.localize(\"topicTip\"),\n    \t\t\tflex: 3,\n        \t\tdataIndex: 'topic',\n                sortable: false\n            },{\n                xtype: 'widgetcolumn',\n                text: this.localize(\"scores\"),\n                tooltip: this.localize(\"scoresTip\"),\n                flex: 1,\n                dataIndex: 'scores',\n                widget: {\n                    xtype: 'sparklineline',\n                    tipTpl: new Ext.XTemplate('{[this.getDocumentTitle(values.x,values.y)]}', {\n                    \tgetDocumentTitle: function(docIndex, score) {\n                    \t\treturn this.panel.getCorpus().getDocument(docIndex).getTitle()+\"<br>coverage: \"+Ext.util.Format.number(score*100, \"0,000.0\")+\"%\"\n                    \t},\n                    \tpanel: me \n                    })\n               }\n            }],\n            dockedItems: {\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items:[\n                       '<span class=\"info-tip\" data-qtip=\"'+this.localize('searchTip')+'\">'+this.localize('search')+'</span>'\n                    ,{\n                    xtype: 'textfield',\n                    name: 'searchField',\n                    hideLabel: true,\n                    width: 80,\n                    listeners: {\n                        change: {\n                            fn: me.onTextFieldChange,\n                            scope: me,\n                            buffer: 500\n                        }\n                    }\n                },\n                \t'<span class=\"info-tip\" data-qtip=\"'+this.localize('limitTermsTip')+'\">'+this.localize('limitTerms')+'</span>'\n                ,{ \n\t    \t\t\twidth: 80,\n                    hideLabel: true,\n\t    \t\t\txtype: 'slider',\n\t            \tincrement: 1,\n\t            \tminValue: 1,\n\t            \tmaxValue: 100,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"limit\")))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({limit: newvalue});\n\t            \t\t\tthis.postSweep();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                },\n                \t'<span class=\"info-tip\" data-qtip=\"'+this.localize('numTopicsTip')+'\">'+this.localize('numTopics')+'</span>'\n                ,{ \n\t    \t\t\twidth: 80,\n                    hideLabel: true,\n\t    \t\t\txtype: 'slider',\n\t            \tincrement: 1,\n\t            \tminValue: 1,\n\t            \tmaxValue: 200,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(parseInt(this.getApiParam(\"numTopics\")))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({numTopics: newvalue});\n\t            \t\t\tthis.loadFromExistingDocuments();\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                },{\n            \t\ttext: new Ext.Template(this.localize('runIterations')).apply([100]),\n            \t\titemId: 'iterations',\n\t\t\t\t\tglyph: 'xf04b@FontAwesome',\n            \t\ttooltip: this.localize('runIterationsTip'),\n            \t\thandler: this.runIterations,\n            \t\tscope: this\n            \t},{\n                \txtype: 'tbtext',\n                \titemId: 'done'\n                },{xtype: 'tbfill'}, {\n\t    \t\t\txtype: 'tbtext',\n\t    \t\t\thtml: this.localize('adaptation')\n\t    \t\t}]\n            }\n    \t});\n\n        this.callParent(arguments);\n        \n\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    \t\n    \tthis.resetData();\n        \n        // create a listener for corpus loading (defined here, in case we need to load it next)\n    \tthis.on('loadedCorpus', function(src, corpus) {\n    \t\tthis.setCorpus(corpus);\n    \t\tif (this.rendered) {\n    \t\t\tthis.initialize();\n    \t\t}\n    \t\telse {\n    \t\t\tthis.on(\"afterrender\", function() {\n    \t\t\t\tthis.initialize();\n    \t\t\t}, this)\n    \t\t}\n\n    \t});\n    \t\n    \tthis.on('query', function(src, query) {\n    \t\tthis.setApiParam('query', query);\n    \t\tthis.updateSearchResults();\n    \t})\n    \t\n    },\n    \n    loadStopwords: function() {\n    \tthis.mask(this.localize(\"loadingStopWords\"));\n    \tExt.Ajax.request({\n    \t    url: this.getTromboneUrl(),\n    \t    params: {\n        \t\ttool: 'resource.KeywordsManager',\n    \t\t\tstopList: this.getApiParam('stopList'),\n    \t\t\tcorpus: this.getCorpus() ? this.getCorpus().getAliasOrId() : undefined\n    \t    },\n    \t    success: function(response, req) {\n    \t    \tthis.unmask();\n    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \tvar stopwords = {};\n    \t    \tjson.keywords.keywords.forEach(function(stop) {\n    \t    \t\tstopwords[stop]=1;\n    \t    \t})\n    \t    \tthis.setStopwords(stopwords);\n    \t    \tthis.loadDocuments();\n    \t    },\n    \t    scope: this\n    \t})\n    },\n    \n    loadDocuments: function() {\n    \tthis.mask(this.localize(\"loadingDocuments\"));\n    \tvar corpus = this.getCorpus();\n    \tif (corpus) {\n        \tExt.Ajax.request({\n        \t    url: this.getTromboneUrl(),\n        \t    params: {\n            \t\ttool: 'corpus.DocumentTokens',\n        \t\t\tcorpus: corpus.getAliasOrId(),\n        \t\t\toutputFormat: \"text\",\n        \t\t\ttemplate: \"docTokens2idsAndText\",\n        \t\t\tlimit: 0,\n        \t\t\tnoOthers: true,\n        \t\t\tperDocLimit: corpus.getDocumentsCount()==1 ? undefined : parseInt(this.getApiParam('perDocLimit'))\n        \t\t},\n        \t    success: function(response, req) {\n        \t    \tthis.unmask();\n        \t    \tthis.mask(this.localize(\"parsingDocuments\"));\n        \t    \tvar lines = response.responseText.trim().split(/(\\r\\n|\\r|\\n)/);\n        \t    \tif (lines.length==1) { // one document, so segment\n        \t    \t\tvar parts = lines[0].split(': ');\n        \t    \t\tif (parts.length>1) {\n            \t    \t\tvar doc = corpus.getDocument(parts[0]);\n            \t    \t\tvar allwords = parts[1].split(' ');\n            \t    \t\tvar totalWords = doc.getLexicalTokensCount();\n            \t    \t\tif (totalWords<10) {\n            \t    \t\t\tbins = totalWords\n            \t    \t\t} else if (totalWords<1000) {\n            \t    \t\t\tbins = 10\n            \t    \t\t} else {\n            \t    \t\t\tbins = 100\n            \t    \t\t}\n            \t    \t\tvar bins = 10;\n            \t    \t\tvar wordsPerBin = Math.floor(allwords.length/bins);\n            \t    \t\tfor (var i=0; i<bins; i++) {\n            \t    \t\t\tvar text = allwords.slice(i*wordsPerBin,(i*wordsPerBin)+wordsPerBin).join(\" \");\n                \t    \t\tthis.parseLine(parts[0]+\"-\"+i+\"\\t\"+parts[0]+\"-\"+i+\"\\t\"+text);\n            \t    \t\t}\n        \t    \t\t}\n        \t    \t} else {\n            \t    \tlines.forEach(function(line) {\n            \t    \t\tvar parts = line.split(': ');\n            \t    \t\tif (parts.length>1) {\n                \t    \t\tvar doc = corpus.getDocument(parts[0]);\n                \t    \t\tthis.parseLine(parts[0]+\"\\t\"+doc.getTinyLabel()+\"\\t\"+parts[1]);\n            \t    \t\t}\n            \t    \t}, this);\n        \t    \t}\n        \t    \tthis.unmask();\n        \t    \tthis.runIterations();\n        \t    },\n        \t    scope: this\n        \t})\n    \t}\n    },\n    \n    resetData: function() {\n    \tvar numTopics = parseInt(this.getApiParam('numTopics'));\n\t \tthis.setVocabularyCounts({});\n\t\tthis.setSumDocSortSmoothing(this.getDocSortSmoothing()*numTopics);\n\t\tthis.setRequestedSweeps(0);\n\t\tthis.setWordTopicCounts({});\n\t\tthis.setTopicWordCounts([]);\n\t\tthis.setTokensPerTopic(this.zeros(numTopics));\n\t\tthis.setTopicWeights(this.zeros(numTopics));\n\t\tthis.setDocuments([]);\n\t\tthis.setTotalIterations(0);\n    },\n    \n    loadFromExistingDocuments: function() {\n\n    \t// not quite efficient, but at least we don't have to reload from server\n    \tvar data = this.getDocuments().map(function(doc) {return doc.id+\"\\t\"+doc.date+\"\\t\"+doc.originalText});\n    \t\n    \tthis.resetData(); // reset all data before starting over\n    \t\n    \tdata.forEach(function(doc) {\n    \t\tthis.parseLine(doc);\n    \t}, this);\n    \t\n    \tthis.runIterations();\n    },\n    \n    runIterations: function() {\n    \tvar sweeps = this.getRequestedSweeps();\n    \tvar iterations = parseInt(this.getApiParam('iterations'));\n    \tsweeps+=parseInt(iterations);\n    \tthis.setTotalIterations(this.getTotalIterations()+iterations);\n    \tthis.setRequestedSweeps(sweeps)\n    \tif (!this.getProgress()) {\n    \t\tvar progress = Ext.MessageBox.show({\n    \t\t\ttitle: this.localize(\"runningIterations\"),\n    \t\t\tmessage: new Ext.Template(this.localize('runningIterationsCount')).apply([sweeps]),\n    \t\t\tprogress: true,\n    \t\t\tprogressText: '',\n    \t\t\ttarget: sweeps,\n    \t\t\tcustomUpdateProgress: function(val) {\n     \t\t\t   this.updateProgress((this.config.target-val)*this.config.target, \" iterations\");\n     \t\t   \t}\n    \t\t});\n    \t\tthis.setProgress(progress);\n    \t\tthis.updateProgress(sweeps);\n    \t}\n    \tthis.sweep();\n    },\n    \n    updateProgress: function(sweeps) {\n    \tvar progress = this.getProgress(), sweeps = this.getRequestedSweeps();\n    \tif (progress) {\n    \t\tvar target = progress.cfg.target;\n        \tvar val = (target-sweeps)/target;\n        \tprogress.updateProgress(val, (parseInt(val)*100) +\"% done\");\n    \t}\n    },\n    \n    sweep: function() {\n\n    \tvar startTime = Date.now(), numTopics = parseInt(this.getApiParam('numTopics')),\n    \t\tvocabularySize = this.getVocabularySize(), topicWordSmoothing = this.getTopicWordSmoothing(),\n    \t\ttokensPerTopic = this.getTokensPerTopic(), documents = this.getDocuments(),\n    \t\twordTopicCounts = this.getWordTopicCounts(), topicWeights = this.getTopicWeights(), \n    \t\tdocumentTopicSmoothing = this.getDocumentTopicSmoothing()\n    \t\t\n    \t\t\n    \tvar topicNormalizers = this.zeros(numTopics);\n    \tfor (var topic = 0; topic < numTopics; topic++) {\n    \t\ttopicNormalizers[topic] = 1.0 / (vocabularySize * topicWordSmoothing + tokensPerTopic[topic]);\n    \t}\n\n    \tfor (var doc = 0; doc < documents.length; doc++) {\n    \t\tvar currentDoc = documents[doc];\n    \t\tvar docTopicCounts = currentDoc.topicCounts;\n    \t\t\n    \t\tfor (var position = 0; position < currentDoc.tokens.length; position++) {\n    \t\t\tvar token = currentDoc.tokens[position];\n    \t\t\tif (token.isStopword) { continue; }\n\n    \t\t\ttokensPerTopic[ token.topic ]--;\n    \t\t\tvar currentWordTopicCounts = wordTopicCounts[ token.word ];\n    \t\t\tcurrentWordTopicCounts[ token.topic ]--;\n    \t\t\tif (currentWordTopicCounts[ token.topic ] == 0) {\n    \t\t\t  //delete(currentWordTopicCounts[ token.topic ]);\n    \t\t\t}\n    \t\t\tdocTopicCounts[ token.topic ]--;\n    \t\t\ttopicNormalizers[ token.topic ] = 1.0 / (vocabularySize * topicWordSmoothing + tokensPerTopic[ token.topic ]);\n\n    \t\t\tvar sum = 0.0;\n    \t\t\tfor (var topic = 0; topic < numTopics; topic++) {\n    \t\t\t\tif (currentWordTopicCounts[ topic ]) {\n    \t\t\t\t  topicWeights[topic] =\n    \t\t\t\t    (documentTopicSmoothing + docTopicCounts[topic]) *\n    \t\t\t\t    (topicWordSmoothing + currentWordTopicCounts[ topic ]) *\n    \t\t\t\t\ttopicNormalizers[topic];\n    \t\t\t\t}\n    \t\t\t\telse {\n    \t\t\t\t  topicWeights[topic] =\n    \t\t\t\t    (documentTopicSmoothing + docTopicCounts[topic]) *\n    \t\t\t\t\ttopicWordSmoothing *\n    \t\t\t\t\ttopicNormalizers[topic];\n    \t\t\t\t}\n    \t\t\t\tsum += topicWeights[topic];\n    \t\t\t}\n    \t\t    \n    \t\t\t// Sample from an unnormalized discrete distribution\n    \t\t\tvar sample = sum * Math.random();\n    \t\t    var i = 0;\n    \t\t    sample -= topicWeights[i];\n    \t\t    while (sample > 0.0) {\n    \t\t      i++;\n    \t\t      sample -= topicWeights[i];\n    \t\t \t}\n    \t\t\ttoken.topic = i;\n    \t\t\t\n    \t\t\ttokensPerTopic[ token.topic ]++;\n    \t\t\tif (! currentWordTopicCounts[ token.topic ]) {\n    \t\t\t\tcurrentWordTopicCounts[ token.topic ] = 1;\n    \t\t\t}\n    \t\t\telse {\n    \t\t\t\tcurrentWordTopicCounts[ token.topic ] += 1;\n    \t\t\t}\n    \t\t\tdocTopicCounts[ token.topic ]++;\n    \t\t\t\n    \t\t\ttopicNormalizers[ token.topic ] = 1.0 / (vocabularySize * topicWordSmoothing + tokensPerTopic[ token.topic ]);\n    \t\t}\n    \t}\n    \t\n    \tvar sweeps = this.getRequestedSweeps()-1;\n    \tthis.setRequestedSweeps(sweeps);\n    \tvar progress = this.getProgress();\n    \tif (sweeps>0) {\n    \t\tthis.updateProgress(sweeps);\n    \t\tExt.defer(this.sweep, 0, this);\n    \t} else {\n    \t\tprogress.close();\n    \t\tthis.setProgress(undefined);\n    \t\tthis.postSweep();\n    \t}\n    \t\n    },\n    \n    postSweep: function(){\n    \tthis.sortTopicWords();\n    \tvar store = this.getStore();\n    \tvar done = new Ext.Template(this.localize('totalDone')).apply([Ext.util.Format.number(parseInt(this.getTotalIterations()), \"0,000\")]);\n    \tthis.down('#done').setHtml(done);\n    \t\n\t\tvar numTopics = parseInt(this.getApiParam('numTopics')),\n\t\t\ttopicWordCounts = this.getTopicWordCounts(),\n\t\t\tdata = [], documents = this.getDocuments(),\n\t\t\tdocSortSmoothing = this.getDocSortSmoothing(),\n\t\t\tsumDocSortSmoothing = this.getSumDocSortSmoothing();\n\t\t\t\n\t\tvar limit = parseInt(this.getApiParam('limit'));\n\t\tfor (var topic = 0; topic < numTopics; topic++) {\n\t\t\tvar scores = documents.map(function (doc, i) {\n//\t\t\t\tconsole.warn(doc, doc.topicCounts[topic], docSortSmoothing, doc.tokens.length, sumDocSortSmoothing);\n\t\t\t\t  return (doc.topicCounts[topic] + docSortSmoothing) / (doc.tokens.length + sumDocSortSmoothing);\n\t\t\t});\n\t\t\t\n\t\t\tdata.push({\n\t\t\t\ttopic: this.topNWords(topicWordCounts[topic], limit),\n\t\t\t\tscores: scores\n\t\t\t})\n\t\t}\n    \tstore.loadData(data)\n    },\n    \n    topNWords: function(wordCounts, n) { return wordCounts.slice(0,n).map( function(d) { return d.word; }).join(\" \"); },\n    \n    sortTopicWords: function() {\n    \tvar topicWordCounts = this.getTopicWordCounts(), numTopics = parseInt(this.getApiParam('numTopics')),\n    \t\twordTopicCounts = this.getWordTopicCounts();\n\n    \t  topicWordCounts = [];\n    \t  for (var topic = 0; topic < numTopics; topic++) {\n    \t    topicWordCounts[topic] = [];\n    \t  }\n\n    \t  for (var word in wordTopicCounts) {\n    \t    for (var topic in wordTopicCounts[word]) {\n    \t      topicWordCounts[topic].push({\"word\":word, \"count\":wordTopicCounts[word][topic]});\n    \t    }\n    \t  }\n\n    \t  for (var topic = 0; topic < numTopics; topic++) {\n    \t    topicWordCounts[topic].sort(this.byCountDescending);\n    \t  }\n\n    \t  this.setTopicWordCounts(topicWordCounts);\n    },\n    \n    byCountDescending: function(a,b) {return b.count - a.count; },\n    \n    initialize: function() {\n    \t// make sure we have the right number of iterations in our label (especially after an options change)\n    \tvar val = new Ext.Template(this.localize('runIterations')).apply([Ext.util.Format.number(parseInt(this.getApiParam('iterations')), \"0,000\")]);\n    \tvar iterations = this.down('#iterations').setText(val)\n    \tthis.loadStopwords();\n    },\n    \n    parseLine: function ( line ) {\n    \t\n    \t// for simplicity, create locally scoped variables of these\n    \tvar stopwords = this.getStopwords(), vocabularyCounts = this.getVocabularyCounts(),\n\t    \ttokensPerTopic = this.getTokensPerTopic(), vocabularySize=this.getVocabularySize(),\n\t    \tvocabularyCounts = this.getVocabularyCounts(), documents = this.getDocuments(),\n\t    \tnumTopics = parseInt(this.getApiParam('numTopics')),\n\t    \twordTopicCounts = this.getWordTopicCounts();\n    \t\n    \t  if (line == \"\") { return; }\n    \t  var docID = documents.length;\n    \t  var docDate = \"\";\n    \t  var fields = line.split(\"\\t\");\n    \t  var text = fields[0];  // Assume there's just one field, the text\n    \t  if (fields.length == 3) {  // If it's in [ID]\\t[TAG]\\t[TEXT] format...\n    \t    docID = fields[0];\n    \t    docDate = fields[1]; // do not interpret date as anything but a string\n    \t    text = fields[2];\n    \t  }\n\n    \t  var tokens = [];\n    \t  var rawTokens = text.toLowerCase().split(' '); // xsl should only use space between tokens\n    \t  if (rawTokens == null) { return; }\n    \t  var topicCounts = this.zeros(numTopics);\n\n    \t  rawTokens.forEach(function (word) {\n    \t    if (word !== \"\") {\n    \t      var topic = Math.floor(Math.random() * numTopics);\n    \t\t  \n    \t\t  if (word.length <= 2) { stopwords[word] = 1; }\n    \t\t  \n    \t\t  var isStopword = stopwords[word];\n    \t\t  if (isStopword) {\n    \t\t\t  // Record counts for stopwords, but nothing else\n    \t\t\t  if (! vocabularyCounts[word]) {\n    \t\t\t\t  vocabularyCounts[word] = 1;\n    \t\t\t  }\n    \t\t\t  else {\n    \t\t\t  \tvocabularyCounts[word] += 1;\n    \t\t\t  }\n    \t\t  }\n    \t\t  else {\n    \t\t      tokensPerTopic[topic]++;\n    \t\t      if (! wordTopicCounts[word]) {\n    \t\t        wordTopicCounts[word] = {};\n    \t\t        vocabularySize++;\n    \t\t        vocabularyCounts[word] = 0;\n    \t\t      }\n    \t\t      if (! wordTopicCounts[word][topic]) {\n    \t\t        wordTopicCounts[word][topic] = 0;\n    \t\t      }\n    \t\t      wordTopicCounts[word][topic] += 1;\n    \t\t      vocabularyCounts[word] += 1;\n    \t\t      topicCounts[topic] += 1;\n    \t      }\n    \t      tokens.push({\"word\":word, \"topic\":topic, \"isStopword\":isStopword });\n    \t    }\n    \t  });\n    \t  this.setVocabularySize(vocabularySize); // set this scalar\n    \t  \n    \t  documents.push({ \"originalOrder\" : documents.length, \"id\" : docID, \"date\" : docDate, \"originalText\" : text, \"tokens\" : tokens, \"topicCounts\" : topicCounts});\n    \t}\n    \n});","\n// assuming Cirrus library is loaded by containing page (via voyant.jsp)\nExt.define('Voyant.panel.Via', {\n\textend: 'Ext.panel.Panel',\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.via',\n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\tstopList: 'auto',\n    \t\tlimit: 100,\n    \t\tdocIndex: undefined\n    \t},\n\t\tglyph: 'xf06e@FontAwesome'\n    },\n    \n    config: {\n    \tmode: undefined,\n    \toptions: [\n    \t\t{xtype: 'stoplistoption'},\n    \t\t{\n\t    \t\txtype: 'listeditor',\n\t    \t\tname: 'whiteList'\n    \t    },\n    \t    {xtype: 'categoriesoption'}\n    \t]\n    },\n    \n    layout: 'fit',\n    \n    constructor: function(config) {\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n    },\n    \n    initComponent: function (config) {\n    \tExt.apply(this, {\n    \t\ttitle: this.localize('title'),\n    \t\tdockedItems: [{\n                dock: 'bottom',\n                xtype: 'toolbar',\n                overflowHandler: 'scroller',\n                items: [{\n        \t\t\txtype: 'corpusdocumentselector',\n        \t\t\tsingleSelect: true\n        \t\t},{\n        \t\t\tfieldLabel: this.localize('visible'),\n        \t\t\tlabelWidth: 40,\n        \t\t\twidth: 120,\n        \t\t\txtype: 'slider',\n\t            \tincrement: 10,\n\t            \tminValue: 10,\n\t            \tmaxValue: 1000,\n\t            \tlisteners: {\n\t            \t\tafterrender: function(slider) {\n\t            \t\t\tslider.setValue(this.getApiParam(\"limit\"))\n\t            \t\t},\n\t            \t\tchangecomplete: function(slider, newvalue) {\n\t            \t\t\tthis.setApiParams({limit: newvalue});\n\t            \t\t\tthis.loadFromCorpus(this.getCorpus());\n\t            \t\t},\n\t            \t\tscope: this\n\t            \t}\n                }]\n    \t\t}]\n    \t});\n\n    \tthis.callParent(arguments);\n    \t\n    \t\n    },\n    \n    listeners: {\n    \tresize: function(panel, width, height) {\n//    \t\tif (this.getCorpus()) {\n//        \t\tthis.loadFromCorpus(this.getCorpus())\n//    \t\t}\n    \t},\n    \t\n    \tloadedCorpus: function(src, corpus) {\n    \t\tvar langs = corpus.get(\"languageCodes\");\n    \t\tvar val = Ext.Array.each(langs, function(lang) {\n    \t\t\tif (lang!='en') {\n    \t\t\t\tthis.showError(this.localize('englishOnly'));\n    \t\t\t\treturn false;\n    \t\t\t}\n    \t\t}, this);\n    \t\tif (corpus.getWordTokensCount()>100000 && !this.getApiParam(\"docIndex\")) {\n    \t\t\tthis.setApiParam(\"docIndex\", 0)\n    \t\t}\n    \t\tthis.loadFromCorpus(corpus);\n    \t},\n    \t\n    \tcorpusSelected: function(src, corpus) {\n    \t\tthis.setApiParam(\"docIndex\", \"\");\n    \t\tthis.loadFromCorpus(corpus)\n    \t},\n    \t\n    \tdocumentSelected: function(src, document) {\n    \t\tthis.setApiParam(\"docIndex\", document.getIndex());\n    \t\tthis.loadFromCorpus(this.getCorpus())\n    \t}\n    \t\n    \t\n    },\n    \n    loadFromCorpus: function(corpus) {\n    \tvar me = this;\n    \tthis.mask(this.localize(\"loading\"))\n    \tvar params = this.getApiParams();\n    \tvar a = corpus.loadRelatedWords(params).then(function(relatedWords) {\n    \t\tme.unmask()\n    \t\tvar edges = relatedWords.map(function(item) {return {source: item.getSource(), target: item.getTarget()}})\n    \t\tvar graph = me.down(\"voyantnetworkgraph\");\n    \t\tif (graph) {\n    \t\t\tgraph.loadJson({edges: edges});\n    \t\t} else {\n    \t\t\tgraph = Ext.create(\"Voyant.widget.VoyantNetworkGraph\", {\n        \t\t\tedges: edges,\n        \t\t\tlisteners: {\n        \t\t\t\tnodeclicked: function(src, node) {\n        \t\t\t\t\tme.dispatchEvent('termsClicked', me, [node.term]);\n        \t\t\t\t}\n        \t\t\t}\n        \t\t})\n        \t\tme.add(graph)\n    \t\t}\n    \t}, function(response) {\n    \t\tme.unmask();\n    \t\tif (response.timedout) {\n    \t\t\tme.showError(me.localize('timedout'));\n    \t\t} else {\n        \t\tme.showError(response);\n    \t\t}\n    \t});\n    }\n});","Ext.define(\"Voyant.notebook.editor.button.Add\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperadd',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n    \t\ttooltip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tglyph: 'xf067@FontAwesome',\n\ttextAlign: 'left',\n\tlisteners: {\n\t\tclick: function(btn, e) {\n        \tthis.findParentByType('notebook').fireEvent(\"notebookWrapperAdd\", this.findParentByType(\"notebookeditorwrapper\"), e);\n\t\t}\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.Edit\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperedit',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n    \t\ttoolTip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tglyph: 'xf040@FontAwesome',\n\tlisteners: {\n\t\tclick: function() {\n        \tthis.findParentByType('notebook').fireEvent(\"notebookWrapperEdit\", this.findParentByType(\"notebookeditorwrapper\"));\n\t\t}\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.Export\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperexport',\n\tstatics: {\n\t\ti18n: {\n\t\t\ttip: \"Export\",\n\t\t\texportTitle: \"Export\",\n\t\t\texportOpen: \"export content into new window\",\n\t\t\texportDownload: \"download file to your machine\",\n\t\t\tcancelTitle: \"Cancel\"\n\t\t}\n\t},\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n    \t\ttoolTip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tglyph: 'xf08e@FontAwesome',\n\tlisteners: {\n\t\tclick: function(cmp) {\n\t\t\tvar exportCmp = cmp;\n\t\t\tExt.create('Ext.window.Window', {\n\t\t\t\ttitle: this.localize(\"exportTitle\"),\n\t\t\t\tmodal: true,\n\t\t\t\titems: {\n\t\t\t\t\txtype: 'form',\n\t\t\t\t\tdefaultType: 'radio',\n\t\t\t\t\titems: [{\n\t\t\t       \t\tinputValue: 'html',\n\t\t\t       \t\tboxLabel: this.localize('exportOpen'),\n\t\t\t       \t\tname: 'export'\n\t\t\t\t\t},{\n\t\t\t       \t\tinputValue: 'htmlDownload',\n\t\t\t       \t\tboxLabel: '<a href=\"#\">'+this.localize('exportDownload')+'</a>',\n\t\t\t       \t\tname: 'export',\n\t\t\t       \t\tlisteners: {\n\t\t\t       \t\t\tafterrender: function(cmp) {\n\t\t\t       \t\t\t\tvar wrapper = exportCmp.up(\"notebookcodeeditorwrapper\");\n\t\t\t       \t\t\t\tvar content = wrapper.getContent();\n\t\t\t       \t\t\t\tvar filename = wrapper.getCellId()+\".\"+(content.mode == \"text\" ? \"txt\" : content.mode);\n\t\t\t       \t    \t\tvar properties = {type: content.mode==\"text\" || true ? \"text/plain\" : \"text/\"+content.mode};\n\t\t\t       \t   \t    \ttry {\n\t\t\t       \t   \t    \t  file = new File([content.input], filename, properties);\n\t\t\t       \t   \t    \t} catch (e) {\n\t\t\t       \t   \t    \t  file = new Blob([content.input], properties);\n\t\t\t       \t   \t    \t}\n\t\t\t       \t    \t\tvar url = URL.createObjectURL(file);\n\t\t\t       \t    \t\tvar a = cmp.boxLabelEl.dom.querySelector(\"a\");\n\t\t\t       \t    \t\ta.setAttribute(\"download\", filename);\n\t\t\t       \t    \t\ta.setAttribute(\"href\", url);\n\t\t\t       \t    \t\ta.addEventListener(\"click\", function() {\n\t\t\t       \t    \t\t\tcmp.up(\"window\").close();\n\t\t\t       \t    \t\t})\n\t\t\t       \t\t\t},\n\t\t\t       \t\t\tscope: this\n\t\t\t       \t\t\t\n\t\t\t       \t\t},\n\t\t\t       \t\thandler: function(cmp) {\n\t\t\t       \t\t\tcmp.boxLabelEl.dom.querySelector(\"a\").click();\n\t\t\t       \t\t}\n\t\t\t\t\t}],\n\t\t\t\t\tbuttons: [{\n\t\t            \ttext: this.localize(\"exportTitle\"),\n\t\t\t\t\t\tglyph: 'xf08e@FontAwesome',\n\t\t            \tflex: 1,\n\t\t        \t\thandler: function(btn) {\n\t\t        \t\t\tvar form = btn.up('form');\n\t\t        \t\t\tvar val = form.getValues()['export'];\n\t\t        \t\t\tif (val==\"html\") {\n\t\t\t       \t\t\t\tvar wrapper = exportCmp.up(\"notebookcodeeditorwrapper\");\n\t\t\t       \t\t\t\tvar content = wrapper.getContent();\n\t\t\t       \t\t        var myWindow = window.open();\n\t\t\t       \t\t        myWindow.document.write(content.input);\n\t\t\t       \t\t        myWindow.document.close();\n\t\t\t       \t\t        myWindow.focus();\n\t\t        \t\t\t}\n\t\t        \t\t\tbtn.up('window').close();\n\t\t        \t\t},\n\t\t        \t\tscope: this\n\t\t            }, {\n\t\t            \ttext: this.localize(\"cancelTitle\"),\n\t\t                glyph: 'xf00d@FontAwesome',\n\t\t        \t\tflex: 1,\n\t\t        \t\thandler: function(btn) {\n\t\t        \t\t\tbtn.up('window').close();\n\t\t        \t\t}\n\t\t\t\t\t}]\n\t\t\t\t},\n\t\t\t\tbodyPadding: 5\n\t\t\t}).show();\n\t\t}\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.Counter\", {\n\textend: \"Ext.toolbar.TextItem\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrappercounter',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconfig: {\n\t\torder: 0,\n\t\tname: undefined\n\t},\n\tcls: 'notebookwrappercounter',\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n    \t\ttoolTip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tsetOrder: function(pos) {\n\t\tthis.callParent(arguments);\n\t\tthis.updateHtml();\n\t},\n\tupdateHtml: function() {\n\t\tvar pos = this.getOrder()+1;\n\t\tvar lnk = 'spyralcounter_'+pos;\n\t\tvar name = this.getName();\n\t\tthis.setHtml('<a name=\"'+name+'\" href=\"#'+name+'\">'+pos+'</a>');\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.MoveDown\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrappermovedown',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n    \t\ttooltip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tglyph: 'xf063@FontAwesome',\n\ttextAlign: 'left',\n\tlisteners: {\n\t\tclick: function() {\n        \tthis.findParentByType('notebook').fireEvent(\"notebookWrapperMoveDown\", this.findParentByType(\"notebookeditorwrapper\"));\n\t\t}\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.MoveUp\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrappermoveup',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n    \t\ttooltip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tglyph: 'xf062@FontAwesome',\n\ttextAlign: 'left',\n\tlisteners: {\n\t\tclick: function() {\n        \tthis.findParentByType('notebook').fireEvent(\"notebookWrapperMoveUp\", this.findParentByType(\"notebookeditorwrapper\"));\n\t\t}\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.Remove\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperremove',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n    \t\ttooltip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tglyph: 'xf014@FontAwesome',\n\ttextAlign: 'left',\n\tlisteners: {\n\t\tclick: function() {\n\t\t\tExt.Msg.show({\n\t\t\t\tbuttons: Ext.Msg.OKCANCEL,\n\t\t\t\ticon: Ext.MessageBox.QUESTION,\n\t\t\t\tmsg: this.localize(\"confirmRemove\"),\n\t\t\t\ttitle: this.localize(\"confirmRemoveTitle\"),\n\t\t\t\tfn: function(buttonId) {\n\t\t\t\t\tif (buttonId=='ok') {\n\t\t\t        \tthis.findParentByType('notebook').fireEvent(\"notebookWrapperRemove\", this.findParentByType(\"notebookeditorwrapper\"));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t})\n\t\t}\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.Metadata\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrappermetadata',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n    \t\ttooltip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tglyph: 'xf02c@FontAwesome',\n\ttextAlign: 'left',\n\tlisteners: {\n\t\tclick: function(btn, e) {\n        \tthis.findParentByType('notebook').fireEvent(\"notebookWrapperMetadata\", this.findParentByType(\"notebookeditorwrapper\"), e);\n\t\t}\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.Movement\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\trequires: [\"Voyant.notebook.editor.button.MoveUp\", \"Voyant.notebook.editor.button.MoveDown\", \"Voyant.notebook.editor.button.Remove\"],\n\talias: 'widget.notebookwrappermovement',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tconstructor: function(config) {\n    \tExt.apply(this, {\n    \t\ttooltip: this.localize('tip')\n    \t})\n        this.callParent(arguments);\n\t},\n\tglyph: 'xf07d@FontAwesome',\n\tmenu: [\n\t\t{\n        \txtype: 'notebookwrappermoveup'\n        },{\n        \txtype: 'notebookwrappermovedown'\n        },{\n        \txtype: 'notebookwrapperremove'\n        }\n\t]\n})","Ext.define(\"Voyant.notebook.editor.button.Run\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperrun',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tglyph: 'xf04b@FontAwesome',\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tconfig.tooltip = this.localize('tip');\n\t\tthis.callParent(arguments);\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.RunAll\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperrunall',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tglyph: 'xf04e@FontAwesome',\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tconfig.tooltip = this.localize('tip');\n\t\tthis.callParent(arguments);\n\t}\n})","Ext.define(\"Voyant.notebook.editor.button.RunUntil\", {\n\textend: \"Ext.button.Button\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: 'widget.notebookwrapperrununtil',\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tglyph: 'xf050@FontAwesome',\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\tconfig.tooltip = this.localize('tip');\n\t\tthis.callParent(arguments);\n\t}\n})","Ext.define(\"Voyant.notebook.editor.EditorWrapper\", {\n\textend: \"Ext.panel.Panel\",\n\tmixins: [\"Voyant.util.Localization\"],\n\trequires: [\"Voyant.notebook.editor.button.Movement\",\"Voyant.notebook.editor.button.Add\"],\n\talias: \"widget.notebookeditorwrapper\",\n\tcls: \"notebook-editor-wrapper\",\n\tconfig: {\n\t\tcellId: undefined,\n\t\tcontent: '',\n\t\tisEditing: false\n\t},\n\tborder: false,\n\tbodyBorder: false,\n\tinitComponent: function() {\n\t\tthis.setCellId(this.config.cellId);\n\t\tthis.on(\"afterrender\", function(){\n\t\t\tthis.getDockedItems().forEach(function(tb) {\n\t\t\t\ttb.getTargetEl().setVisibilityMode(Ext.dom.Element.VISIBILITY);\n\t\t\t});\n\t\t\tthis.setActiveMode(false);\n\t\t\tthis.body.on(\"click\", function() {\n\t\t\t\tthis.removeCls(\"notebook-editor-wrapper-hover\");\n\t\t\t\tthis.setActiveMode(true); // added for touch devices\n\t\t\t}, this);\n\t\t\tthis.mon(this.getEl(), \"mouseover\", function() {\n\t\t\t\tthis.setActiveMode(true);\n\t\t\t}, this);\n\t\t\tthis.mon(this.getEl(), \"mouseout\", function() {\n\t\t\t\tthis.setActiveMode(false);\n\t\t\t}, this);\t\t\t\n\t\t}, this);\n\t\tthis.callParent(arguments);\n\t},\n\tsetActiveMode: function(mode) {\n\t\tthis.getDockedItems().forEach(function(tb) {\n\t\t\tif (tb.dock=='right') {\n\t\t\t\ttb.items.each(function(item) {\n\t\t\t\t\tif (item.hasCls(\"notebookwrappercounter\")==false) {\n\t\t\t\t\t\titem.getTargetEl().setVisibility(mode);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\ttb.getTargetEl().setVisibility(mode);\n\t\t\t}\n\t\t}, this);\n\t\tif (!this.getIsEditing()) {\n\t\t\tif (mode) {\n\t\t\t\tthis.body.addCls(\"notebook-editor-wrapper-hover\");\n\t\t\t} else {\n\t\t\t\tthis.body.removeCls(\"notebook-editor-wrapper-hover\");\n\t\t\t}\n\t\t}\n\t}\n})","Ext.define(\"Voyant.notebook.editor.CodeEditor\", {\n\textend: \"Ext.Component\",\n\talias: \"widget.notebookcodeeditor\", \n\tmixins: [\"Voyant.util.Localization\",'Voyant.notebook.util.Embed'],\n\tembeddable: [\"Voyant.notebook.editor.CodeEditor\"],\n\tcls: 'notebook-code-editor',\n\tconfig: {\n\t\ttheme: 'ace/theme/chrome',\n\t\tmode: 'ace/mode/javascript',\n\t\tcontent: '',\n\t\tdocs: undefined,\n\t\tisChangeRegistered: false,\n\t\teditor: undefined,\n\t\teditedTimeout: undefined,\n\t\tlines: 0\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tcontent: undefined\n\t\t}\n\t},\n\tconstructor: function(config) {\n\t\tthis.callParent(arguments);\n\t},\n\tlisteners: {\n\t\tboxready: function() {\n\t\t\tvar me = this;\n\t\t\tvar editor = ace.edit(Ext.getDom(this.getEl()));\n\t\t\t\n\t\t\teditor.$blockScrolling = Infinity;\n\t\t\teditor.getSession().setUseWorker(true);\n\t\t\teditor.setTheme(this.getTheme());\n\t\t\teditor.getSession().setMode(this.getMode());\n\t\t\teditor.setOptions({\n\t\t\t\tminLines: 6,\n\t\t\t\tmaxLines: Infinity, // this.getMode().indexOf(\"javascript\")>-1 ? Infinity : 10,\n\t\t\t\tautoScrollEditorIntoView: true,\n\t\t\t\tscrollPastEnd: true\n\t\t\t});\n\t\t\teditor.setHighlightActiveLine(false);\n\t\t\teditor.setHighlightGutterLine(false);\n\t\t\teditor.renderer.setShowPrintMargin(false);\n//\t\t\teditor.renderer.setShowGutter(false);\n\t\t\t\n\t\t\teditor.setValue(this.getContent() ? this.getContent() : \"\" /*this.localize('emptyText')*/);\n\t\t\teditor.clearSelection();\n\n\t\t    editor.on(\"focus\", function() {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tme.getEditor().setHighlightGutterLine(true);\n\t\t\t\t}, 100); // slight delay to avoid selecting a range of text, caused by showing the gutter while mouse is still pressed\n\t\t    }, this);\n\t\t    editor.on(\"change\", function(ev, editor) {\n\t\t\t\tvar lines = editor.getSession().getScreenLength();\n\t\t\t\tif (lines!=me.getLines()) {\n\t\t\t\t\tme.up('notebookcodeeditorwrapper').setSize({height: lines*editor.renderer.lineHeight+editor.renderer.scrollBar.getWidth()})\n\t\t\t\t\tme.setLines(lines);\n\t\t\t\t}\n\t\t\t\tif (me.getIsChangeRegistered()==false) {\n\t\t\t\t\tme.setIsChangeRegistered(true);\n\t\t\t\t\tvar wrapper = me.up('notebookcodeeditorwrapper');\n\t\t\t\t\tif (wrapper) {\n\t\t\t\t\t\twrapper.setIsRun(false);\n\t\t\t\t\t\tvar notebook = wrapper.up(\"notebook\");\n\t\t\t\t\t\tif (notebook) {notebook.setIsEdited(true);}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!me.getEditedTimeout()) { // no timeout, so set it to 30 seconds\n\t\t\t\t\t\tme.setEditedTimeout(setTimeout(function() {\n\t\t\t\t\t\t\tme.setIsChangeRegistered(false);\n\t\t\t\t\t\t}, 30000));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t    }, this);\n\t\t    editor.on(\"blur\", function() {\n\t\t    \tme.getEditor().setHighlightGutterLine(false);\n\t\t    });\n\t\t\teditor.commands.addCommand({\n\t\t\t\tname: 'run',\n\t\t\t    bindKey: {win: \"Shift-Enter\", mac: \"Shift-Enter\"}, // additional bindings like alt/cmd-enter don't seem to work\n\t\t\t    exec: function(editor) {\n\t\t\t    \tvar wrapper = me.up('notebookcodeeditorwrapper');\n\t\t\t    \tif (wrapper) {\n\t\t\t    \t\twrapper.run();\n\t\t\t    \t}\n\t\t\t    }\t\t\t\t\n\t\t\t});\n\t\t\teditor.commands.addCommand({\n\t\t\t\tname: 'rununtil',\n\t\t\t    bindKey: {win: \"Command-Shift-Enter\", mac: \"Command-Shift-Enter\"}, // additional bindings like alt/cmd-enter don't seem to work\n\t\t\t    exec: function(editor) {\n\t\t\t    \tvar wrapper = me.up('notebookcodeeditorwrapper');\n\t\t\t    \tvar notebook = wrapper.up(\"notebook\");\n\t\t\t    \tnotebook.runUntil(wrapper);\n\t\t\t    }\t\t\t\t\n\t\t\t});\n\t\t\tthis.setEditor(editor);\n\n\t\t\tace.config.loadModule('ace/ext/tern', function (module) {\n\t\t\t\tme.getEditor().setOptions({\n\t\t\t\t\t/**\n\t\t\t\t\t * Either `true` or `false` or to enable with custom options pass object that\n\t\t\t\t\t * has options for tern server: http://ternjs.net/doc/manual.html#server_api\n\t\t\t\t\t * If `true`, then default options will be used\n\t\t\t\t\t */\n\t\t\t\t\tenableTern: {\n\t\t\t\t\t\t/* http://ternjs.net/doc/manual.html#option_defs */\n\t\t\t\t\t\tdefs: me.docs ? ['browser', 'ecma5', me.docs] : ['ecma5', 'browser'],\n\t\t\t\t\t\tplugins: {\n\t\t\t\t\t\t\tdoc_comment: {\n\t\t\t\t\t\t\t\tfullDocs: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * (default is true) If web worker is used for tern server.\n\t\t\t\t\t\t * This is recommended as it offers better performance, but prevents this from working in a local html file due to browser security restrictions\n\t\t\t\t\t\t */\n\t\t\t\t\t\tuseWorker: true\n\t\t\t\t\t},\n\t\t\t\t\t/**\n\t\t\t\t\t * when using tern, it takes over Ace's built in snippets support.\n\t\t\t\t\t * this setting affects all modes when using tern, not just javascript.\n\t\t\t\t\t */\n\t\t\t\t\tenableSnippets: false,\n\t\t\t\t\t\n\t\t\t\t\t/**\n\t\t\t\t\t * when using tern, Ace's basic text auto completion is enabled still by default.\n\t\t\t\t\t * This settings affects all modes when using tern, not just javascript.\n\t\t\t\t\t * For javascript mode the basic auto completion will be added to completion results if tern fails to find completions or if you double tab the hotkey for get completion (default is ctrl+space, so hit ctrl+space twice rapidly to include basic text completions in the result)\n\t\t\t\t\t */\n\t\t\t\t\tenableBasicAutocompletion: false\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tremoved: function(cmp, container) {\n\t\t\tif (cmp.getEditor()) {\n\t\t\t\tcmp.getEditor().destroy();\n\t\t\t}\n\t\t}\n\t\t\n\t},\n\t\n\tswitchModes: function(mode) {\n\t\tthis.setMode('ace/mode/'+mode);\n\t\tthis.getEditor().getSession().setMode(this.getMode());\n//\t\tthis.getEditor().setOptions({maxLines: this.getMode().indexOf(\"javascript\")>-1 ? Infinity : 10});\n\n\t},\n\t\n\tgetValue: function() {\n\t\treturn this.getEditor().getValue();\n\t}\n})","Ext.define(\"Voyant.notebook.editor.CodeEditorWrapper\", {\n\textend: \"Voyant.notebook.editor.EditorWrapper\",\n\trequires: [\"Voyant.notebook.editor.CodeEditor\",\"Voyant.notebook.editor.button.Run\",\"Voyant.notebook.editor.button.RunAll\"],\n\talias: \"widget.notebookcodeeditorwrapper\",\n\tcls: 'notebook-code-wrapper',\n\tstatics: {\n\t\ti18n: {\n\t\t\trunMultiple: \"Run multiple cells\",\n\t\t\trunUntil: \"Run up to here\",\n\t\t\trunUntilTip: \"Run previous code blocks and this one.\",\n\t\t\trunFrom: \"Run from here onwards\",\n\t\t\trunFromTip: \"Run this and following code blocks.\",\n\t\t\tcodeMode: \"select from several formats for this cell\",\n\t\t\tcodeModeTitle: \"Code Mode\",\n\t\t\tcodeModeTip: \"Select from multiple code formats for this cell.\",\n\t\t\tconfigureTip: \"Configuration Options\",\n\t\t\tautoExecuteOnLoad: \"auto-run this cell on page load\",\n\t\t\tok: \"OK\",\n\t\t\tcancel: \"Cancel\"\n\t\t}\n\t},\n\tconfig: {\n\t\tisRun: false,\n\t\tautoExecute: false,\n\t\tisWarnedAboutPreviousCells: false\n\t},\n\tlayout: {\n\t\ttype: 'vbox',\n\t\talign: 'stretch'\n\t},\n\theight: 130,\n\tborder: false,\n\n\tEMPTY_RESULTS_TEXT: ' ', // text to use when clearing results, prior to running code\n\n\tconstructor: function(config) {\n\n\t\tthis.results = this._getResultsComponent(Ext.Array.from(config.output).join(\"\"));\n\t\t\n\t\tthis.editor = Ext.create(\"Voyant.notebook.editor.CodeEditor\", {\n\t\t\tcontent: Ext.Array.from(config.input).join(\"\\n\"),\n\t\t\tdocs: config.docs,\n\t\t\tmode: 'ace/mode/'+(config.mode ? config.mode : 'javascript')\n\t\t});\n\t\tExt.apply(this, {\n\t\t\tdockedItems: [{\n\t\t\t    xtype: 'toolbar',\n\t\t\t    dock: 'left',\n\t\t\t    defaults: {\n\t\t\t    \ttextAlign: 'left'\n\t\t\t    },\n\t\t\t    items: [\n\t\t\t\t\t{\n\t\t\t\t\t\txtype: 'notebookwrapperadd'\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'notebookwrapperrun',\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\tclick: {\n\t\t\t\t\t\t\t\tfn: this.run,\n\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},{\n\t\t\t\t\t\tglyph: 'xf050@FontAwesome',\n\t\t\t\t\t\ttooltip: this.localize(\"runMultiple\"),\n\t\t\t\t\t\titemId: 'runMultiple',\n//\t\t\t\t\t\txtype: 'notebookwrapperrununtil',\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\tclick: {\n\t\t\t\t\t\t\t\tfn: function(btn, ev) {\n\t\t\t\t\t\t\t\t\tExt.create('Ext.menu.Menu', {\n\t\t\t\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t    \t\t\t\ttext: this.localize(\"runUntil\"),\n\t\t\t\t\t\t    \t\t\t\ttooltip: this.localize(\"runUntilTip\"),\n\t\t\t\t\t\t    \t\t\t\tglyph: 'xf049@FontAwesome',\n\t\t\t\t\t\t    \t\t\t\thandler: function() {\n\t\t\t\t\t\t    \t\t\t\t\tthis.up('notebook').runUntil(this);\n\t\t\t\t\t\t    \t\t\t\t},\n\t\t\t\t\t\t    \t\t\t\tscope: this\n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t    \t\t\t\ttext: this.localize(\"runFrom\"),\n\t\t\t\t\t\t    \t\t\t\ttooltip: this.localize(\"runFromTip\"),\n\t\t\t\t\t\t    \t\t\t\tglyph: 'xf050@FontAwesome',\n\t\t\t\t\t\t    \t\t\t\thandler: function() {\n\t\t\t\t\t\t    \t\t\t\t\tthis.up('notebook').runFrom(this);\n\t\t\t\t\t\t    \t\t\t\t},\n\t\t\t\t\t\t    \t\t\t\tscope: this\n\t\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t\t}).showAt(ev.pageX, ev.pageY)\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\tglyph: 'xf013@FontAwesome',\n\t\t\t\t\t\ttooltip: this.localize(\"configureTip\"),\n\t\t\t\t\t\tscope: this,\n\t\t\t\t\t\tcls: config.autoExecute ? \"autoExecute\" : \"\",\n\t\t\t\t\t\thandler: function(btn, ev) {\n\t\t\t\t\t\t\tvar button = btn;\n\t\t\t\t\t\t\tvar mode = this.editor.getMode().split(\"/\").pop()\n\t\t\t\t\t\t\tnew Ext.Window({\n\t\t\t\t\t\t\t\ttitle: this.localize('codeModeTitle'),\n\t\t\t\t\t\t\t\tlayout: 'fit',\n\t\t\t\t\t\t\t\twidth: 240,\n\t\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\t\txtype: 'form',\n\t\t\t\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\t\t\t\t\t\talign: 'stretch'\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tbodyPadding: 10,\n\t\t\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t\t\t\t\t\t\t\ttitle: this.localize(\"modeCode\"),\n\t\t\t\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\t\t\t\tboxLabel : this.localize('modeJavascript'),\n\t\t\t\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\t\t\t\tinputValue: 'javascript',\n\t\t\t\t\t\t\t\t\t\t\tflex  : 1,\n\t\t\t\t\t\t\t\t\t\t\tchecked: mode===\"javascript\",\n\t\t\t\t\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\t\t\t\t\tchange: function(cmp, newval, oldval) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar autoExecCheck = cmp.up().queryById('autoExecute');\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoExecCheck.setHidden(!newval);\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!newval) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tautoExecCheck.setValue(false);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\txtype: 'checkbox',\n\t\t\t\t\t\t\t\t\t\t\tboxLabel: this.localize('autoExecuteOnLoad'),\n\t\t\t\t\t\t\t\t\t\t\tname: 'autoExecute',\n\t\t\t\t\t\t\t\t\t\t\titemId: 'autoExecute',\n\t\t\t\t\t\t\t\t\t\t\thidden: mode!=='javascript',\n\t\t\t\t\t\t\t\t\t\t\tchecked: this.getAutoExecute()\n\t\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\txtype: 'fieldset',\n\t\t\t\t\t\t\t\t\t\ttitle: this.localize(\"modeData\"),\n\t\t\t\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\t\t\t\t\tboxLabel : this.localize('modeJson'),\n\t\t\t\t\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\t\t\t\t\tinputValue: 'json',\n\t\t\t\t\t\t\t\t\t\t\t\tflex  : 1,\n\t\t\t\t\t\t\t\t\t\t\t\tchecked: mode===\"json\"\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\t\t\t\t\tboxLabel : this.localize('modeText'),\n\t\t\t\t\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\t\t\t\t\tinputValue: 'text',\n\t\t\t\t\t\t\t\t\t\t\t\tflex  : 1,\n\t\t\t\t\t\t\t\t\t\t\t\tchecked: mode===\"text\"\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},/*{\n\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\t\t\t\t\tboxLabel : this.localize('modeCsv'),\n\t\t\t\t\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\t\t\t\t\tinputValue: 'csv',\n\t\t\t\t\t\t\t\t\t\t\t\tflex  : 1\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\t\t\t\t\tboxLabel : this.localize('modeTsv'),\n\t\t\t\t\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\t\t\t\t\tinputValue: 'tsv',\n\t\t\t\t\t\t\t\t\t\t\t\tflex  : 1\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},*/{\n\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\t\t\t\t\tboxLabel : this.localize('modeHtml'),\n\t\t\t\t\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\t\t\t\t\tinputValue: 'html',\n\t\t\t\t\t\t\t\t\t\t\t\tflex  : 1,\n\t\t\t\t\t\t\t\t\t\t\t\tchecked: mode===\"html\"\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\txtype : 'radiofield',\n\t\t\t\t\t\t\t\t\t\t\t\tboxLabel : this.localize('modeXml'),\n\t\t\t\t\t\t\t\t\t\t\t\tname  : 'codeMode',\n\t\t\t\t\t\t\t\t\t\t\t\tinputValue: 'xml',\n\t\t\t\t\t\t\t\t\t\t\t\tflex  : 1\t,\n\t\t\t\t\t\t\t\t\t\t\t\tchecked: mode===\"xml\"\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\t\t\t\ttext: this.localize('ok'),\n\t\t\t\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\t\t\t\tvar win = btn.up('window');\n\t\t\t\t\t\t\t\t\t\tvar form = win.down('form');\n\t\t\t\t\t\t\t\t\t\tif (form.isDirty()) {\n\t\t\t\t\t\t\t\t\t\t\tvar values = form.getValues();\n\t\t\t\t\t\t\t\t\t\t\tthis.switchModes(values.codeMode);\n\t\t\t\t\t\t\t\t\t\t\tthis.setAutoExecute(values.autoExecute === 'on');\n\t\t\t\t\t\t\t\t\t\t\tbutton.toggleCls(\"autoExecute\", values.autoExecute === 'on');\n\t\t\t\t\t\t\t\t\t\t\tthis.up('notebook').setIsEdited(true);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\twin.close();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\t\ttext:  this.localize('cancel'),\n\t\t\t\t\t\t\t\t\thandler: function(btn) {\n\t\t\t\t\t\t\t\t\t\tbtn.up('window').close();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t}).show();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: \"notebookwrapperexport\"\n\t\t\t\t\t}\n\t\t\t    ]\n\t\t\t},{\n\t\t\t    xtype: 'toolbar',\n\t\t\t    dock: 'right',\n\t\t\t    items: [{\n\t\t\t    \t\txtype: 'notebookwrappercounter',\n\t\t\t    \t\torder: config.order,\n\t\t\t    \t\tname: config.cellId\n\t\t\t    \t},{\n\t\t        \t\txtype: 'notebookwrapperremove'\n\t\t        \t},{\n\t\t\t        \txtype: 'notebookwrappermoveup'\n\t\t\t        },{\n\t\t\t        \txtype: 'notebookwrappermovedown'\n\t\t\t        }\n\t\t\t    ]\n\t\t\t}],\n\t\t\titems: [this.editor, this.results]\n\t\t});\n\n\t\tif (config.uiHtml !== undefined) {\n\t\t\tthis.items.push(this._getUIComponent(config.uiHtml))\n\t\t}\n\t\t\n        this.callParent(arguments);\n        \n\t},\n\t\n\tinitComponent: function(config) {\n\t\tvar me = this;\n\t\tme.on(\"afterrender\", function() {\n\t\t\tif (this.editor && this.editor.getMode() != 'ace/mode/javavscript') {\n\t\t\t\tthis.switchModes(this.editor.getMode(), true)\n\t\t\t}\n\t\t\tthis.getTargetEl().on(\"resize\", function(el) {\n\t\t\t\tvar height = 20;\n\t\t\t\tme.items.each(function(item) {height+=item.getHeight();})\n\t\t\t\tme.setSize({height: height});\n\t\t\t});\n\t\t}, this);\n\t\tme.callParent(arguments);\n\t},\n\t\n\tswitchModes: function(mode, light) {\n\t\tvar runnable = mode.indexOf('javascript')>-1;\n\t\tthis.down('notebookwrapperrun').setVisible(runnable);\n\t\tthis.down('notebookwrapperexport').setVisible(!runnable);\n\t\tthis.queryById(\"runMultiple\").setVisible(runnable);\n\t\tthis.results.setVisible(runnable);\n\t\tif (!light) {\n\t\t\tthis.editor.switchModes(mode);\n\t\t}\n\t},\n\t\n\t/**\n\t * Run the code in this editor.\n\t * @param {boolean} forceRun True to force the code to run, otherwise a check is performed to see if previous editors have already run.\n\t */\n\trun: function(forceRun) {\n\t\tif (this.editor.getMode()=='ace/mode/javascript') { // only run JS\n\t\t\tif (forceRun===true || this.getIsWarnedAboutPreviousCells()) {\n\t\t\t\treturn this._run();\n\t\t\t} else {\n\t\t\t\t// this code was for checking if previous cells hadn't been run, but it didn't seem worthwhile\n\t\t\t\tvar notebook = this.up('notebook');\n\t\t\t\tExt.Array.each(notebook.query('notebookcodeeditorwrapper'), function(wrapper) {\n\t\t\t\t\tif (wrapper==this) {this._run(); return false;} // break\n\t\t\t\t\tif (wrapper.editor && wrapper.editor.getMode() == 'ace/mode/javascript' && wrapper.getIsRun()==false) {\n\t\t\t\t\t\tExt.Msg.confirm(this.localize('previousNotRunTitle'), this.localize('previousNotRun'), function(btnId) {\n\t\t\t\t\t\t\tif (btnId=='yes') {\n\t\t\t\t\t\t\t\tnotebook.runUntil(this);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis._run();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this);\n\t\t\t\t\t\tthis.setIsWarnedAboutPreviousCells(true);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\t\t}\n\t},\n\t\n\t_run: function() {\n\t\tthis.results.show(); // make sure it's visible \n\t\tthis.results.update(this.EMPTY_RESULTS_TEXT); // clear out the results\n\t\tthis.results.mask('working\u2026'); // mask results\n\t\tvar code = this.editor.getValue();\n\t\tVoyant.notebook.util.Show.TARGET = this.results.getEl(); // this is for output\n\t\tVoyant.notebook.Notebook.currentBlock = this; // this is to tie back in to the block\n\t\tVoyant.notebook.Notebook.currentNotebook.setCurrentBlock(this);\n\t\tvar result;\n\t\ttry {\n\t\t\t\n\t\t\t// I'd like to be able to run this in another scope/context, but it\n\t\t\t// doesn't seem possible for the type of code that's being run\n\t\t\tresult = eval.call(window, code);\n\t\t}\n\t\tcatch (e) {\n\t\t\tthis.results.unmask();\n\t\t\tVoyant.notebook.util.Show.showError(e);\n\t\t\tthis.getTargetEl().fireEvent('resize');\n\t\t\treturn e;\n\t\t}\n\t\tthis.setIsRun(true);\n\t\tif (result!==undefined) {\n\t\t\tif (result.then && result.catch && result.finally) {\n\t\t\t\tvar me = this;\n\t\t\t\tresult.then(function(result) {\n\t\t\t\t\tme.results.unmask();\n\t\t\t\t\tif (result!==undefined) {\n\t\t\t\t\t\tme._showResult(result);\n\t\t\t\t\t}\n\t\t\t\t}).catch(function(err) {\n\t\t\t\t\tme.results.unmask();\n\t\t\t\t\tVoyant.notebook.util.Show.showError(err);\n\t\t\t\t}).finally(function() {\n\t\t\t\t\tExt.defer(function() {this.getTargetEl().fireEvent('resize')}, 50, me);\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthis.results.unmask();\n\t\t\t\tthis._showResult(result);\n\t\t\t\tthis.getTargetEl().fireEvent('resize');\n\t\t\t}\n\t\t} else {\n\t\t\tthis.results.unmask();\n\t\t\tthis.getTargetEl().fireEvent('resize');\n\t\t}\n\t\treturn result;\n\t},\n\n\t_getResultsComponent: function(html) {\n\t\treturn Ext.create('Ext.Component', {\n\t\t\talign: 'stretch',\n\t\t\tcls: 'notebook-code-results',\n\t\t\thtml: html,\n\t\t\tgetValue: function() {\n\t\t\t\tvar el = this.getTargetEl(), resultEl = el.dom.cloneNode(true);\n\t\t\t\tvar output = resultEl.innerHTML;\n\t\t\t\tif (!resultEl.style.height) {\n\t\t\t\t\toutput = \"<div style='height: \"+el.getHeight()+\"px'>\"+output+\"</div>\";\n\t\t\t\t}\n\t\t\t\treturn output;\n\t\t\t}\n\t\t});\n\t},\n\n\t_getUIComponent: function(html) {\n\t\treturn Ext.create('Ext.Component', {\n\t\t\talign: 'stretch',\n\t\t\tcls: 'notebook-code-ui',\n\t\t\tpadding: '20 10',\n\t\t\thtml: html,\n\t\t\tgetValue: function() {\n\t\t\t\tconst el = this.getTargetEl()\n\t\t\t\tconst resultEl = el.dom.cloneNode(true);\n\t\t\t\tlet output = resultEl.innerHTML;\n\t\t\t\treturn output;\n\t\t\t}\n\t\t});\n\t},\n\n\t_showResult: function(result) {\n\t\t// check for pre-existing content (such as from highcharts) and if it exists don't update\n\t\tif (this.results.getEl().dom.innerHTML === this.EMPTY_RESULTS_TEXT) {\n\t\t\tthis.results.update(result.toString ? result.toString() : result);\n\t\t}\n\t},\n\t\n\tclearResults: function() {\n\t\tthis.results.show();\n\t\t\n\t\tvar panel = this.results.el.down('.x-panel');\n\t\tif (panel) {\n\t\t\tvar id = panel.id;\n\t\t\tvar cmp = Ext.getCmp(id);\n\t\t\tif (cmp) {\n\t\t\t\tcmp.destroy();\n\t\t\t} else {\n\t\t\t\tpanel.destroy();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.results.update(' ');\n\t\t}\n\t\t\n\t\tthis.getTargetEl().fireEvent('resize');\n\t},\n\t\n\ttryToUnmask: function() {\n\t\tif (Spyral && Spyral.promises) {\n\t\t\tExt.defer(this.tryToUnmask, 20, this);\n\t\t}\n\t\tif (Voyant.application.getDeferredCount()===0) {\n\t\t\tfor (var key in window) {\n\t\t\t\tif (typeof window[key] == 'object' && window[key] && key!=\"opener\" && window[key].isFulfilled &&  window[key].isFulfilled()) {\n\t\t\t\t\twindow[key] = window[key].valueOf();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.results.unmask();\n\t\t\tif (this.results.getTargetEl().getHtml().trim().length===0) {\n\t\t\t\tthis.results.hide();\n\t\t\t}\n\t\t\tthis.getTargetEl().fireEvent('resize');\n\t\t}\n\t\telse {\n\t\t\tExt.defer(this.tryToUnmask, 20, this);\n\t\t}\n\t},\n\t\n\tgetContent: function() {\n\t\tvar toReturn = {\n\t\t\tinput: this.editor.getValue(),\n\t\t\tmode: this.editor.getMode().split(\"/\").pop()\n\t\t}\n\t\tif (toReturn.mode==='javascript') {\n\t\t\ttoReturn.output = this.results.getValue();\n\t\t\tvar ui = this.down('component[cls=\"notebook-code-ui\"]');\n\t\t\tif (ui !== null) {\n\t\t\t\ttoReturn.ui = ui.getValue();\n\t\t\t}\n\t\t}\n\t\treturn toReturn;\n\t},\n\t\n\tsetContentAndMode: function(content, mode, config) {\n\t\tdebugger\n\t\tthis.editor.setContent(content);\n\t\tthis.switchModes(mode || \"javascript\")\n\t}\n})","Ext.define(\"Voyant.notebook.editor.TextEditor\", {\n\textend: \"Ext.Component\",\n\tmixins: [\"Voyant.util.Localization\"],\n\talias: \"widget.notebooktexteditor\",\n\tcls: 'notebook-text-editor',\n\tconfig: {\n\t\tckeditorConfig : { // when upgrading ckeditor, remember to copy stopediting and inserthtml4x plugins\n\t\t\ttoolbar:  [\n\t\t\t\t    \t{ name: 'basicstyles', items: [ 'Bold', 'Italic', '-', 'RemoveFormat' ] },\n\t\t\t\t    \t{ name: 'paragraph', items: [ 'NumberedList', 'BulletedList', '-', 'Justify', 'Outdent', 'Indent', 'Blockquote', 'JustifyLeft', 'JustifyCenter', 'JustifyRight' ] },\n\t\t\t\t    \t{ name: 'colors', items: [ 'TextColor', 'BGColor' ] },\n\t\t\t\t    \t{ name: 'styles', items: [ 'Styles', 'Format' ] },\n\t\t\t\t    \t{ name: 'links', items: [ 'Link', 'Unlink', 'Anchor'] },\n\t\t\t\t    \t{ name: 'insert', items: [ 'Image', 'Table' ] },\n\t\t\t\t    \t{ name: 'document', items: [ 'inserthtml4x', 'Sourcedialog', 'Stopediting'] }\n\t\t    ],\n\t\t    \n\t\t    extraPlugins: 'stopediting,sourcedialog,justify,colorbutton,inserthtml4x',\n//\t\t    removePlugins: 'iframe', // why was this added?\n\t\t\tallowedContent: true,\n\t\t\ttoolbarCanCollapse: true,\n\t\t\tstartupFocus: true\n\t\t},\n\t\teditor: undefined,\n\t\tisEditRegistered: false,\n\t\tcurrentHeight: 0\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t}\n\t},\n\tborder: false,\n\tconstructor: function(config) {\n\t\tExt.apply(this, {\n\t\t\thtml: config.content ? config.content : this.localize(\"emptyText\")\n\t\t});\n        this.callParent(arguments);\n\t},\n\tlisteners: {\n\t\tboxready: function(cmp) {\n\t\t\tthis.getTargetEl().on(\"click\", function(e, t) {\n\t\t\t\tif (t.tagName!=\"A\") {\n\t\t\t\t\tthis.handleClick(cmp);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\t\tremoved: function(cmp, container) {\n\t\t\t// properly remove editor\n\t\t\tif (cmp.getEditor()) {\n\t\t\t\tcmp.getEditor().focusManager.blur(true); //focusManager bug workaround, see: https://dev.ckeditor.com/ticket/16825\n\t\t\t\tcmp.getEditor().destroy();\n\t\t\t}\n\t\t}\n\t},\n\t\n\thandleClick: function(cmp) {\n\t\tif (!cmp.getEditor() || (cmp.getEditor() && cmp.getEditor().readOnly)) {\n\t\t\tvar el = this.getTargetEl();\n\t\t\tel.set({contenteditable: true});\n\t\t\tthis.findParentByType(\"notebookeditorwrapper\").setIsEditing(true);\n\t\t\tif (!cmp.getEditor()) {\n\t\t\t\tvar editor = CKEDITOR.inline( el.dom, this.getCkeditorConfig() );\n\t\t\t\t\n\t\t\t\t// erase contents if it's click to edit (not localized, FIXME\n\t\t\t\teditor.on(\"focus\", function(evt) {\n\t\t\t\t\tif (this.getTargetEl().dom.innerText==this.localize(\"emptyText\")) {\n\t\t\t\t\t\tthis.getTargetEl().update('')\n\t\t\t\t\t}\n\t\t\t\t}, this)\n\t\t\t\t\n\t\t\t\t\n\t\t\t\teditor.on(\"blur\", function(evt) {\n//\t\t\t\t\tcmp.setEditor(undefined);\n\t\t\t\t\tcmp.findParentByType(\"notebookeditorwrapper\").setIsEditing(false).getEl().fireEvent(\"mouseout\");\n//\t\t\t\t\tel.set({contenteditable: false});\n\t\t\t\t\teditor.setReadOnly(true);\n\t\t\t\t})\n\t\t\t\teditor.on(\"change\", function() {\n\t\t\t\t\tvar editorHeight = editor.container.$.clientHeight;\n\t\t\t\t\tif (editorHeight!=this.getCurrentHeight()) {\n\t\t\t\t\t\tthis.findParentByType(\"notebookeditorwrapper\").setHeight(editorHeight);\n\t\t\t\t\t\tthis.setCurrentHeight(editor.container.$.clientHeight)\n\t\t\t\t\t}\n\t\t\t\t\tif (!this.getIsEditRegistered()) {\n\t\t\t\t\t\tthis.findParentByType(\"notebook\").setIsEdited(true);\n\t\t\t\t\t\tthis.setIsEditRegistered(true);\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar me = this; // make sure to allow edits to be auto-saved every 30 seconds\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tme.setIsEditRegistered(false);\n\t\t\t\t\t\t}, 30000);\n\t\t\t\t\t}\n\t\t\t\t}, this)\n\t\t\t\tthis.setEditor(editor);\n\t\t\t} else {\n\t\t\t\tcmp.getEditor().setReadOnly(false);\n\t\t\t}\n\t\t}\n\t},\n\t\n\tgetContent: function() {\n\t\treturn this.getTargetEl().dom.innerHTML;\n\t}\n})","Ext.define(\"Voyant.notebook.editor.TextEditorWrapper\", {\n\textend: \"Voyant.notebook.editor.EditorWrapper\",\n\trequires: [\"Voyant.notebook.editor.TextEditor\",\"Voyant.notebook.editor.button.Edit\"],\n\talias: \"widget.notebooktexteditorwrapper\",\n\tcls: 'notebook-text-wrapper',\n\tconfig: {\n\t\tcontent: ''\n\t},\n\tminHeight: 85,\n\tconstructor: function(config) {\n\t\tExt.apply(this, {\n\t\t\titems: [{\n\t\t\t\txtype: 'notebooktexteditor',\n\t\t\t\tcontent: Ext.Array.from(config.input).join(\"\")\n\t\t\t}],\n\t\t\tdockedItems: [{\n\t\t\t    xtype: 'toolbar',\n\t\t\t    dock: 'left',\n\t\t\t    items: [{\n\t\t\t\t    \txtype: 'notebookwrapperadd'\n\t\t\t\t\t}\n\t\t\t    ]\n\t\t\t},{\n\t\t\t    xtype: 'toolbar',\n\t\t\t    dock: 'right',\n\t\t\t    items: [{\n\t\t\t    \t\txtype: 'notebookwrappercounter',\n\t\t\t    \t\torder: config.order,\n\t\t\t    \t\tname: config.cellId\n\t\t\t    \t},{\n\t\t        \t\txtype: 'notebookwrapperremove'\n\t\t        \t},{\n\t\t\t        \txtype: 'notebookwrappermoveup'\n\t\t\t        },{\n\t\t\t        \txtype: 'notebookwrappermovedown'\n\t\t\t        }\n\t\t\t    ]\n\t\t\t}]\n\t\t});\n        this.callParent(arguments);\n\t},\n\t\n\tgetContent: function() {\n\t\treturn this.items.get(0).getContent();\n\t}\n\t\n})","Ext.define(\"Voyant.notebook.github.OctokitWrapper\", {\n\textend: \"Ext.Base\",\n\talias: \"octokitwrapper\",\n\n\toctokit: undefined,\n\n\tconstructor: function(config) {\n\t\tconst authToken = config.authToken;\n\t\tthis.octokit = new Octokit({\n\t\t\tauth: authToken,\n\t\t\tuserAgent: 'https://github.com/sgsinclair/Voyant'\n\t\t});\n\t},\n\n\tgetInfoForAuthenticatedUser: function() {\n\t\treturn this.octokit.users.getAuthenticated();\n\t},\n\n\tgetReposForAuthenticatedUser: function(affiliation='owner', page=0, per_page=10) {\n\t\treturn this.octokit.repos.listForAuthenticatedUser({\n\t\t\taffiliation,\n\t\t\tpage,\n\t\t\tper_page\n\t\t});\n\t},\n\n\tgetReposForUser: function(owner, page=0, per_page=10) {\n\t\treturn this.octokit.search.repos({\n\t\t\tq: 'user:'+owner,\n\t\t\tpage,\n\t\t\tper_page\n\t\t})\n\t},\n\n\tsearchWithinRepositories: function(query, page=0, per_page=10) {\n\t\tconsole.log(query);\n\t},\n\n\tgetRepoContents: function(repoId) {\n\t\tlet {owner, repo} = this.parseFullName(repoId);\n\t\treturn this.getBranchSHAs({owner, repo, branch: 'master'}).then(function(resp) {\n\t\t\treturn this.getTreeContentsRecursively(resp);\n\t\t}.bind(this));\n\t},\n\n\tgetTreeContentsRecursively: function(params) {\n\t\treturn this.octokit.git.getTree({\n\t\t\towner: params.owner,\n\t\t\trepo: params.repo,\n\t\t\ttree_sha: params.baseTreeSHA,\n\t\t\trecursive: 1,\n\t\t\theaders: {\n\t\t\t\t'If-None-Match': '' // cache busting\n\t\t\t}\n\t\t}).then(function (resp) {\n\t\t\treturn {\n\t\t\t\t...params,\n\t\t\t\tcontents: this.unflattenContents(resp.data.tree),\n\t\t\t\ttruncated: resp.data.truncated\n\t\t\t}\n\t\t}.bind(this));\n\t},\n\n\tloadFile: function(repoId, path) {\n\t\tlet {owner, repo} = this.parseFullName(repoId);\n\t\tlet ref = 'master';\n\t\treturn this.octokit.repos.getContents({\n\t\t\towner, repo, ref, path\n\t\t}).then(function(resp) {\n\t\t\treturn {\n\t\t\t\towner, repo, ref, path,\n\t\t\t\tsha: resp.data.sha,\n\t\t\t\tfile: atob(resp.data.content)\n\t\t\t}\n\t\t}.bind(this));\n\t},\n\n\t// SAVING\n\n\tdoesRepoExist: function(owner, repo) {\n\t\treturn this.getRepoContents(owner+'/'+repo).then(function(resp) {\n\t\t\treturn true;\n\t\t}.bind(this), function(err) {\n\t\t\tconsole.log(err);\n\t\t\treturn false;\n\t\t}.bind(this));\n\t},\n\n\tgetPermissionsForUser: function(owner, repo, username) {\n\t\treturn this.octokit.repos.getCollaboratorPermissionLevel({\n\t\t\towner, repo, username\n\t\t}).then(function(resp) {\n\t\t\treturn resp.data.permission;\n\t\t}.bind(this), function(err) {\n\t\t\treturn 'none';\n\t\t}.bind(this));\n\t},\n\n\tsaveFile: async function(owner, repo, path, content, branch, message, sha) {\n\t\tif (sha === undefined) {\n\t\t\tsha = await this.getLatestFileSHA({owner, repo, branch, path})\n\t\t}\n\t\treturn this.octokit.repos.createOrUpdateFile({owner, repo, path, content: btoa(content), branch, message, sha});\n\t},\n\n\t// UTILITIES\n\n\tparseFullName: function(fullName) {\n\t\tlet [owner, repo] = fullName.split('/');\n\t\treturn {owner, repo};\n\t},\n\n\tgetBranchSHAs: function(params) {\n\t\treturn this.octokit.repos.getBranch({\n\t\t\towner: params.owner,\n\t\t\trepo: params.repo,\n\t\t\tbranch: params.branch,\n\t\t\theaders: {\n\t\t\t\t'If-None-Match': '' // cache busting\n\t\t\t}\n\t\t}).then((resp) => {\n\t\t\treturn {\n\t\t\t\t...params,\n\t\t\t\tbaseTreeSHA: resp.data.commit.commit.tree.sha,\n\t\t\t\tparentCommitSHA: resp.data.commit.sha\n\t\t\t}\n\t\t})\n\t},\n\n\tgetLatestFileSHA: async function(params) {\n\t\tconst {owner, repo, branch, path} = params\n\t\tconst {data: {data: {repository: {object: result}}}} = await this.octokit.request({\n\t\t\tmethod: 'POST',\n\t\t\turl: '/graphql',\n\t\t\tquery: `{\n\t\t\t\trepository(owner: \"${owner}\", name: \"${repo}\") {\n\t\t\t\t\tobject(expression: \"${branch}:${path}\") {\n\t\t\t\t\t\t... on Blob {\n\t\t\t\t\t\t\toid\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}`\n\t\t}).catch(function(error) {\n\t\t\tconsole.log(error);\n\t\t});\n\t\tconst sha = result ? result.oid : undefined\n\t\treturn sha\n\t},\n\n\tunflattenContents: function(flatContents) {\n\t\tconst files = flatContents.filter(file=>file.type==='blob')\n\t\tvar result = {type: 'folder', name: '', path: '', contents: []}\n\t\tconst findSubFolder = (parentFolder, folderNameToFind) => {\n\t\t\t const subfolder = parentFolder.contents.find(el => {\n\t\t\t \treturn el.type === 'folder' && el.name === folderNameToFind\n\t\t\t })\n\t\t\treturn subfolder;\n\t\t}\n\t\tconst addSubFolder = (newFolderName, parentFolder) => {\n\t\t\tconst newSubFolder = {type: 'folder', name: newFolderName, path: `${parentFolder.path}/${newFolderName}`, contents:[]}\n\t\t\tparentFolder.contents.push(newSubFolder)\n\t\t\treturn newSubFolder;\n\t\t}\n\t\tconst addFile = (newFileName, parentFolder) => {\n\t\t\tconst newFile = {type: 'file', name: newFileName, path: `${parentFolder.path}/${newFileName}`}\n\t\t\tparentFolder.contents.push(newFile)\n\t\t}\n\t\tconst isFile = (pathSections, currentIndex) => {\n\t\t\treturn pathSections.length - 1 == currentIndex\n\t\t}\n\n\t\tfiles.forEach(file=>{\n\t\t\tconst pathSections = file.path.split('/')\n\t\t\tpathSections.reduce(function(parentFolder, pathSection, pathSectionIndex) {\n\t\t\t\tconst subFolder = findSubFolder(parentFolder, pathSection)\n\t\t\t\tif (subFolder) {\n\t\t\t\t\treturn subFolder\n\t\t\t\t} else if (isFile(pathSections, pathSectionIndex)) {\n\t\t\t\t\treturn addFile(pathSection, parentFolder)\n\t\t\t\t} else {\n\t\t\t\t\treturn addSubFolder(pathSection, parentFolder)\n\t\t\t\t}\n\t\t\t}, result)\n\t\t})\n\t\treturn result\n\t}\n});\n","Ext.define(\"Voyant.notebook.github.ReposBrowser\", {\n\textend: \"Ext.container.Container\",\n\txtype: \"githubreposbrowser\",\n\tconfig: {\n\t\trepoType: 'owner',\n\t\tselectedNode: undefined,\n\t\trepoId: undefined,\n\t\tpath: undefined\n\t},\n\n\toctokit: undefined,\n\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\t\n\t\tthis.octokit = config.octokit;\n\n    \tthis.callParent(arguments);\n    },\n\n\tinitComponent: function() {\n\t\tExt.apply(this, {\n\t\t\tlayout: {\n\t\t\t\ttype: 'hbox',\n\t\t\t\talign: 'stretch',\n\t\t\t\tpack: 'start'\n\t\t\t},\n\t\t\titems: [{\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\talign: 'stretch',\n\t\t\t\t\tpack: 'start'\n\t\t\t\t},\n\t\t\t\tflex: 1,\n\t\t\t\titems: [{\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'accordion'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\ttitle: 'My Repositories',\n\t\t\t\t\t\tframe: true,\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\txtype: 'radiogroup',\n\t\t\t\t\t\t\tfieldLabel: 'Show repositories for which I am',\n\t\t\t\t\t\t\tlabelAlign: 'top',\n\t\t\t\t\t\t\tlayout: 'vbox',\n\t\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\t\tboxLabel: 'Owner',\n\t\t\t\t\t\t\t\tname: 'repoType',\n\t\t\t\t\t\t\t\tinputValue: 'owner',\n\t\t\t\t\t\t\t\tchecked: true\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\tboxLabel: 'Collaborator',\n\t\t\t\t\t\t\t\tname: 'repoType',\n\t\t\t\t\t\t\t\tinputValue: 'collaborator'\n\t\t\t\t\t\t\t},{\n\t\t\t\t\t\t\t\tboxLabel: 'Organization Member',\n\t\t\t\t\t\t\t\tname: 'repoType',\n\t\t\t\t\t\t\t\tinputValue: 'organization_member'\n\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\t\tchange: function(field, newValues, oldValue) {\n\t\t\t\t\t\t\t\t\tthis.setRepoType(newValues.repoType);\n\t\t\t\t\t\t\t\t\tthis.clearTree(true);\n\t\t\t\t\t\t\t\t\tthis.octokit.getReposForAuthenticatedUser(this.getRepoType(), 0, 100).then((resp) => {\n\t\t\t\t\t\t\t\t\t\tthis.addReposToTree(resp.data);\n\t\t\t\t\t\t\t\t\t},(error) => {\n\t\t\t\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\texpand: function() {\n\t\t\t\t\t\t\t\tthis.clearTree(true);\n\t\t\t\t\t\t\t\tthis.octokit.getReposForAuthenticatedUser(this.getRepoType(), 0, 100).then((resp) => {\n\t\t\t\t\t\t\t\t\tthis.addReposToTree(resp.data);\n\t\t\t\t\t\t\t\t},(error) => {\n\t\t\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t},{\n\t\t\t\t\t\ttitle: 'Public Repositories',\n\t\t\t\t\t\tframe: true,\n\t\t\t\t\t\tlayout: 'vbox',\n\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\tfieldLabel: 'Limit to user or organization',\n\t\t\t\t\t\t\tlabelAlign: 'top',\n\t\t\t\t\t\t\txtype: 'textfield'\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\ttext: 'Search',\n\t\t\t\t\t\t\txtype: 'button',\n\t\t\t\t\t\t\thandler: function(button) {\n\t\t\t\t\t\t\t\tlet repoOwner = button.prev('textfield').getValue();\n\t\t\t\t\t\t\t\tif (repoOwner !== '') {\n\t\t\t\t\t\t\t\t\tthis.clearTree(true);\n\t\t\t\t\t\t\t\t\tthis.octokit.getReposForUser(repoOwner, 0, 100).then((resp) => {\n\t\t\t\t\t\t\t\t\t\tthis.addReposToTree(resp.data.items);\n\t\t\t\t\t\t\t\t\t},(error) => {\n\t\t\t\t\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}],\n\t\t\t\t\t\tlisteners: {\n\t\t\t\t\t\t\texpand: function() {\n\t\t\t\t\t\t\t\tthis.clearTree();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tscope: this\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t\t// ,{\n\t\t\t\t// \tpadding: '20 0 0 0',\n\t\t\t\t// \titems: [{\n\t\t\t\t// \t\tfieldLabel: 'Search within repositories',\n\t\t\t\t// \t\tlabelAlign: 'top',\n\t\t\t\t// \t\txtype: 'textfield'\n\t\t\t\t// \t},{\n\t\t\t\t// \t\txtype: 'button',\n\t\t\t\t// \t\ttext: 'Search',\n\t\t\t\t// \t\tmargin: '0 5 0 0',\n\t\t\t\t// \t\thandler: function(button) {\n\t\t\t\t// \t\t\tlet query = button.prev('textfield').getValue();\n\t\t\t\t// \t\t\tif (query !== '') {\n\t\t\t\t// \t\t\t\tthis.searchWithinRepositories(query);\n\t\t\t\t// \t\t\t}\n\t\t\t\t// \t\t},\n\t\t\t\t// \t\tscope: this\n\t\t\t\t// \t},{\n\t\t\t\t// \t\txtype: 'button',\n\t\t\t\t// \t\ttext: 'Clear',\n\t\t\t\t// \t\thandler: function(button) {\n\t\t\t\t\t\t\t\n\t\t\t\t// \t\t},\n\t\t\t\t// \t\tscope: this\n\t\t\t\t// \t}]\n\t\t\t\t// }\n\t\t\t\t]\n\t\t\t},{\n\t\t\t\tflex: 2,\n\t\t\t\tlayout: 'fit',\n\t\t\t\txtype: 'treepanel',\n\t\t\t\titemId: 'repoTree',\n\t\t\t\ttitle: 'Repositories',\n\t\t\t\tscrollable: true,\n\t\t\t\trootVisible: false,\n\t\t\t\tviewConfig: {\n\t\t\t\t\temptyText: 'No results',\n\t\t\t\t\tlisteners: {\n\t\t\t\t\t\tafteritemexpand: function(node, index, el) {\n\t\t\t\t\t\t\tif (node.hasChildNodes() === false) {\n\t\t\t\t\t\t\t\tswitch(node.data.type) {\n\t\t\t\t\t\t\t\t\tcase 'repo':\n\t\t\t\t\t\t\t\t\t\tlet tr = el.querySelector('tr');\n\t\t\t\t\t\t\t\t\t\tExt.fly(tr).addCls('x-grid-tree-loading');\n\t\t\t\t\t\t\t\t\t\tthis.octokit.getRepoContents(node.getId()).then(function(resp) {\n\t\t\t\t\t\t\t\t\t\t\tExt.fly(tr).removeCls('x-grid-tree-loading');\n\t\t\t\t\t\t\t\t\t\t\tthis.addRepoContentsToNode(node, resp);\n\t\t\t\t\t\t\t\t\t\t}.bind(this))\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'folder':\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\titemclick: function(view, node, el) {\n\t\t\t\t\t\t\tthis.setSelectedNode(node);\n\t\t\t\t\t\t\tthis.fireEvent('nodeSelected', this, node.data.type, node);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstore: {\n\t\t\t\t\troot: {\n\t\t\t\t\t\tname: 'Root',\n\t\t\t\t\t\tchildren: []\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tboxready: function() {\n\t\t\t\t\tthis.down('#repoTree').setLoading(true);\n\t\t\t\t\tthis.octokit.getReposForAuthenticatedUser(this.getRepoType(), 0, 100).then((resp) => {\n\t\t\t\t\t\tthis.addReposToTree(resp.data);\n\t\t\t\t\t},(error) => {\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.callParent(arguments);\n\t},\n\n\tupdateSelectedNode: function(node, oldValue) {\n\t\tif (node !== undefined) {\n\t\t\tlet repoParent = node;\n\t\t\twhile (repoParent !== null && repoParent.data.type !== 'repo') {\n\t\t\t\trepoParent = repoParent.parentNode;\n\t\t\t}\n\n\t\t\tthis.setRepoId(repoParent.getId());\n\t\t\tthis.setPath(node.getId());\n\t\t} else {\n\t\t\tthis.setRepoId(undefined);\n\t\t\tthis.setPath(undefined);\n\t\t}\n\t},\n\n\tclearTree: function(setLoading) {\n\t\tlet repoTree = this.down('#repoTree');\n\t\tlet root = repoTree.getRootNode();\n\t\troot.removeAll();\n\t\trepoTree.getView().refresh();\n\n\t\tif (setLoading) {\n\t\t\trepoTree.setLoading(true);\n\t\t}\n\n\t\tthis.setSelectedNode(undefined);\n\t\tthis.fireEvent('nodeDeselected', this);\n\t},\n\n\taddReposToTree: function(rawRepos) {\n\t\tlet repoTree = this.down('#repoTree');\n\t\trepoTree.setLoading(false);\n\t\tlet root = repoTree.getRootNode();\n\t\tlet repos = rawRepos.map((repo) => {\n\t\t\treturn {\n\t\t\t\tid: repo.full_name,\n\t\t\t\ttext: repo.full_name,\n\t\t\t\tdescription: repo.description,\n\t\t\t\tleaf: false,\n\t\t\t\ttype: 'repo'\n\t\t\t}\n\t\t});\n\t\troot.appendChild(repos);\n\t},\n\n\taddRepoContentsToNode: function(node, octokitResponse) {\n\t\tfunction parseContents(content) {\n\t\t\tlet nodeConfig = {\n\t\t\t\tid: content.path,\n\t\t\t\ttext: content.name,\n\t\t\t\ttype: content.type,\n\t\t\t\tleaf: content.type === 'file'\n\t\t\t};\n\t\t\tif (nodeConfig.leaf === false) {\n\t\t\t\tnodeConfig.children = [];\n\t\t\t\tcontent.contents.forEach((child) => {\n\t\t\t\t\tnodeConfig.children.push(parseContents(child));\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn nodeConfig;\n\t\t}\n\t\tlet contents = parseContents(octokitResponse.contents);\n\t\tnode.appendChild(contents.children);\n\t}\n})","Ext.define(\"Voyant.notebook.github.FileSaver\", {\n\textend: \"Ext.container.Container\",\n\txtype: \"githubfilesaver\",\n\tconfig: {\n\t\tcurrentFile: undefined,\n\t\tusername: undefined\n\t},\n\n\toctokit: undefined,\n\tsaveData: undefined,\n\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n\t\t\n\t\tthis.octokit = config.octokit;\n\t\tthis.saveData = config.saveData;\n\n\t\tthis.setCurrentFile(config.currentFile);\n\n    \tthis.callParent(arguments);\n    },\n\n\tinitComponent: function() {\n\t\tExt.apply(this, {\n\t\t\tlayout: {\n\t\t\t\ttype: 'vbox',\n\t\t\t\tpack: 'start',\n\t\t\t\talign: 'stretch'\n\t\t\t},\n\t\t\titems: [{\n\t\t\t\txtype: 'githubreposbrowser',\n\t\t\t\toctokit: this.octokit,\n\t\t\t\titemId: 'repoBrowser',\n\t\t\t\tflex: 1,\n\t\t\t\tlisteners: {\n\t\t\t\t\tnodeSelected: function(src, type, node) {\n\t\t\t\t\t\tconst form = this.queryById('saveForm').getForm();\n\t\t\t\t\t\tconst [owner, repo] = src.getRepoId().split('/');\n\t\t\t\t\t\tform.setValues({owner, repo});\n\t\t\t\t\t\tif (type === 'file') {\n\t\t\t\t\t\t\tconst pathComponents = this.getPathComponents(src.getPath());\n\t\t\t\t\t\t\tform.setValues({...pathComponents});\n\t\t\t\t\t\t} else if (type === 'folder') {\n\t\t\t\t\t\t\tconst folder = src.getPath().replace(/^\\//, '');\n\t\t\t\t\t\t\tform.setValues({folder, file: ''});\n\t\t\t\t\t\t} else if (type === 'repo') {\n\t\t\t\t\t\t\tform.setValues({folder: '', file: ''});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tnodeDeselected: function(node) {\n\t\t\t\t\t\t// loadWin.queryById('load').setDisabled(true);\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t},{\n\t\t\t\tbodyPadding: '10',\n\t\t\t\theight: 200,\n\t\t\t\tlayout: {\n\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\tpack: 'start'\n\t\t\t\t},\n\t\t\t\txtype: 'form',\n\t\t\t\titemId: 'saveForm',\n\t\t\t\titems: [{\n\t\t\t\t\thtml: '<span class=\"x-panel-header-title-default\">Repository Path</span>'\n\t\t\t\t},{\n\t\t\t\t\txtype: 'container',\n\t\t\t\t\tlayout: 'hbox',\n\t\t\t\t\tdefaults: {\n\t\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\t\tlabelAlign: 'top'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\tfieldLabel: 'GitHub User',\n\t\t\t\t\t\tname: 'owner',\n\t\t\t\t\t\tallowBlank: false,\n\t\t\t\t\t\tmargin: '0 10 0 0'\n\t\t\t\t\t},{\n\t\t\t\t\t\tfieldLabel: 'Repository Name',\n\t\t\t\t\t\tallowBlank: false,\n\t\t\t\t\t\tname: 'repo'\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\thtml: '<span class=\"x-panel-header-title-default\">File Path</span>',\n\t\t\t\t\tmargin: '10 0 0 0',\n\t\t\t\t},{\n\t\t\t\t\txtype: 'container',\n\t\t\t\t\tlayout: 'hbox',\n\t\t\t\t\tdefaults: {\n\t\t\t\t\t\txtype: 'textfield',\n\t\t\t\t\t\tlabelAlign: 'top'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\tfieldLabel: 'Folder(s)',\n\t\t\t\t\t\tname: 'folder',\n\t\t\t\t\t\tallowBlank: true,\n\t\t\t\t\t\tmargin: '0 10 0 0'\n\t\t\t\t\t},{\n\t\t\t\t\t\tfieldLabel: 'File Name',\n\t\t\t\t\t\tallowBlank: false,\n\t\t\t\t\t\tname: 'file'\n\t\t\t\t\t}]\n\t\t\t\t},{\n\t\t\t\t\t/*\n\t\t\t\t\txtype: 'container',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'hbox',\n\t\t\t\t\t\talign: 'middle',\n\t\t\t\t\t\tpack: 'start'\n\t\t\t\t\t},\n\t\t\t\t\tmargin: '25 0 0 0',\n\t\t\t\t\tdefaults: {\n\t\t\t\t\t\txtype: 'button'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\ttext: 'Save',\n\t\t\t\t\t\thandler: function () {\n\t\t\t\t\t\t\tthis.doSave(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this,\n\t\t\t\t\t\tmargin: '0 10 0 0'\n\t\t\t\t\t}\n\t\t\t\t\t// ,{\n\t\t\t\t\t// \ttext: 'Save as Pull Request',\n\t\t\t\t\t// \thandler: function () {\n\t\t\t\t\t// \t\tthis.doSave(true);\n\t\t\t\t\t// \t},\n\t\t\t\t\t// \tscope: this\n\t\t\t\t\t// }\n\t\t\t\t\t]\n\t\t\t\t},{\n\t\t\t\t\t*/\n\t\t\t\t\titemId: 'status',\n\t\t\t\t\thtml: '',\n\t\t\t\t\tmargin: '15 0 0 0'\n\t\t\t\t}],\n\t\t\t\tlisteners: {\n\t\t\t\t\tvaliditychange: function(form, valid) {\n\t\t\t\t\t\tthis.fireEvent('formValidityChange', this, valid);\n\t\t\t\t\t},\n\t\t\t\t\tscope: this\n\t\t\t\t}\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tboxready: function() {\n\t\t\t\t\tthis.initForm();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tthis.callParent(arguments);\n\t},\n\n\tinitForm: function() {\n\t\tthis.octokit.getInfoForAuthenticatedUser().then(function(resp) {\n\t\t\tconst username = resp.data.login;\n\t\t\tthis.setUsername(username);\n\n\t\t\tconst form = this.queryById('saveForm').getForm();\n\t\t\tconst currentFile = this.getCurrentFile();\t\t\t\n\t\t\tif (currentFile !== undefined) {\n\t\t\t\tconst pathComponents = this.getPathComponents(currentFile.path);\n\t\t\t\tform.setValues({\n\t\t\t\t\towner: currentFile.owner,\n\t\t\t\t\trepo: currentFile.repo,\n\t\t\t\t\t...pathComponents\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tform.setValues({owner: username});\n\t\t\t}\n\t\t}.bind(this))\n\t},\n\n\tgetPathComponents: function(path) {\n\t\tconst pathComponents = path.split('/');\n\t\tlet file = pathComponents[pathComponents.length-1];\n\t\tlet folder = '';\n\t\tif (pathComponents.length > 2) {\n\t\t\tfolder = pathComponents.slice(0, -1).join('/');\n\t\t}\n\t\treturn {\n\t\t\tfolder,\n\t\t\tfile\n\t\t}\n\t},\n\n\tdoSave: async function(isPR=false) {\n\t\tconst form = this.queryById('saveForm').getForm();\n\t\tif (form.isValid()) {\n\t\t\tconst {owner, repo, folder, file} = form.getValues();\n\t\t\tlet path = file;\n\t\t\tif (folder !== '') {\n\t\t\t\tpath = folder+'/'+file;\n\t\t\t}\n\t\t\tthis.setStatus('Checking repository');\n\t\t\tconst repoExists = await this.octokit.doesRepoExist(owner, repo);\n\t\t\tif (repoExists) {\n\t\t\t\tthis.setStatus('Checking permissions');\n\t\t\t\tconst permission = await this.octokit.getPermissionsForUser(owner, repo, this.getUsername());\n\t\t\t\tif (permission === 'none' || permission === 'read') {\n\t\t\t\t\tthis.setStatus('You don\\'t have permission to write to this repository', 'error');\n\t\t\t\t} else {\n\t\t\t\t\tthis.setStatus('Checking file');\n\t\t\t\t\tconst branch = 'master';\n\t\t\t\t\tconst content = this.saveData;\n\t\t\t\t\tconst fileData = {owner, repo, branch, path};\n\t\t\t\t\tconst sha = await this.octokit.getLatestFileSHA(fileData);\n\t\t\t\t\tif (sha !== undefined) {\n\t\t\t\t\t\tconst message = 'File updated by Spyral';\n\t\t\t\t\t\tthis.octokit.saveFile(owner, repo, path, content, branch, message, sha).then(function(resp) {\n\t\t\t\t\t\t\tthis.setStatus('File updated');\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tthis.fireEvent('fileSaved', this, fileData);\n\t\t\t\t\t\t\t}.bind(this), 500);\n\t\t\t\t\t\t}.bind(this), function(error) {\n\t\t\t\t\t\t\tthis.setStatus('Error: '+error.message, 'error');\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst message = 'File created by Spyral';\n\t\t\t\t\t\tthis.octokit.saveFile(owner, repo, path, content, branch, message).then(function(resp) {\n\t\t\t\t\t\t\tthis.setStatus('File created');\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\tthis.fireEvent('fileSaved', this, fileData);\n\t\t\t\t\t\t\t}.bind(this), 500);\n\t\t\t\t\t\t}.bind(this), function(error) {\n\t\t\t\t\t\t\tthis.setStatus('Error: '+error.message, 'error');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.setStatus('The specified repository does not exist', 'error');\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setStatus('Form is not valid', 'error');\n\t\t}\n\t},\n\n\tsetStatus: function(message, type) {\n\t\tlet cls = '';\n\t\tif (type && type === 'error') {\n\t\t\tcls = 'x-form-invalid-under-default';\n\t\t}\n\t\tthis.queryById('status').setHtml(`<span class=\"${cls}\">${message}</span>`);\n\t}\n});\n","Ext.define(\"Voyant.notebook.github.GitHubDialogs\", {\n\textend: \"Ext.Component\",\n\trequires: ['Voyant.notebook.github.OctokitWrapper','Voyant.notebook.github.ReposBrowser','Voyant.notebook.github.FileSaver'],\n\talias: \"widget.githubdialogs\",\n\tconfig: {\n\t\trepoType: 'owner',\n\t\tcurrentFile: undefined\n\t},\n\n\tauthToken: undefined,\n\toctokitWrapper: undefined,\n\n\tcurrentWindow: undefined,\n\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n    \tthis.callParent(arguments);\n    },\n\n\tinitComponent: function() {\n\t\tthis.callParent(arguments);\n\t},\n\n\tclose: function() {\n\t\tif (this.currentWindow !== undefined) {\n\t\t\tthis.currentWindow.close();\n\t\t\tthis.currentWindow = undefined;\n\t\t}\n\t},\n\n\tshowAuthenticate: function(callback) {\n\t\tconst parent = this;\n\n\t\tlet authWin = undefined;\n\t\tauthWin = Ext.create('Ext.window.Window', {\n\t\t\ttitle: 'Authenticate with GitHub',\n\t\t\twidth: 750,\n\t\t\theight: 550,\n\t\t\tclosable: false,\n\t\t\tlayout: {\n\t\t\t\ttype: 'vbox',\n\t\t\t\talign: 'middle',\n\t\t\t\tpack: 'center'\n\t\t\t},\n\t\t\titems: [{\n\t\t\t\thtml: '<div style=\"margin-bottom: 10px;\">You must authorize Spyral to use GitHub on your behalf.</div>'\n\t\t\t},{\n\t\t\t\txtype: 'button',\n\t\t\t\ttext: 'Authorize with GitHub',\n\t\t\t\thandler: function(button) {\n\t\t\t\t\tfunction postMessageHandler(event) {\n\t\t\t\t\t\tif (event.origin === window.location.origin && event.data === 'oauth_cookie_set') {\n\t\t\t\t\t\t\twindow.removeEventListener(\"message\", postMessageHandler, false);\n\t\t\t\t\t\t\tevent.source.close();\n\t\t\t\t\t\t\tparent.initOctokitWrapper();\n\t\t\t\t\t\t\tbutton.up('window').close();\n\t\t\t\t\t\t\tcallback.call(parent);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twindow.open(Voyant.application.getBaseUrlFull()+'spyral/oauth', '_blank');\n\t\t\t\t\twindow.addEventListener(\"message\", postMessageHandler, false);\n\t\t\t\t}\n\t\t\t}],\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Cancel',\n\t\t\t\thandler: function() {\n\t\t\t\t\tparent.close();\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t\tauthWin.show();\n\n\t\tthis.currentWindow = authWin;\n\t},\n\n\tshowLoad: function() {\n\t\tconst parent = this;\n\n\t\tthis.authToken = this.getCookieValue('access-token');\n\t\tif (this.authToken === '') {\n\t\t\tthis.showAuthenticate(this.showLoad);\n\t\t\treturn;\n\t\t} else if (this.octokitWrapper === undefined) {\n\t\t\tthis.initOctokitWrapper();\n\t\t}\n\n\t\tlet loadWin = undefined;\n\t\tloadWin = Ext.create('Ext.window.Window', {\n\t\t\ttitle: 'Load from GitHub',\n\t\t\twidth: 750,\n\t\t\theight: 550,\n\t\t\tclosable: false,\n\t\t\tmaximizable: true,\n\t\t\tlayout: 'fit',\n\t\t\titems: {\n\t\t\t\txtype: 'githubreposbrowser',\n\t\t\t\toctokit: this.octokitWrapper,\n\t\t\t\titemId: 'repoBrowser',\n\t\t\t\tlisteners: {\n\t\t\t\t\tnodeSelected: function(src, type, node) {\n\t\t\t\t\t\tif (type === 'file') {\n\t\t\t\t\t\t\tloadWin.queryById('load').setDisabled(false);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tloadWin.queryById('load').setDisabled(true);\t\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tnodeDeselected: function(node) {\n\t\t\t\t\t\tloadWin.queryById('load').setDisabled(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Load Selected',\n\t\t\t\titemId: 'load',\n\t\t\t\tdisabled: true,\n\t\t\t\thandler: function() {\n\t\t\t\t\tconst repoBrowser = loadWin.queryById('repoBrowser');\n\t\t\t\t\tthis.loadFile(repoBrowser.getRepoId(), repoBrowser.getPath());\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Cancel',\n\t\t\t\thandler: function() {\n\t\t\t\t\tparent.close();\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t\tloadWin.show();\n\n\t\tthis.currentWindow = loadWin;\n\t},\n\n\tshowSave: function(data) {\n\t\tconst parent = this;\n\n\t\tthis.authToken = this.getCookieValue('access-token');\n\t\tif (this.authToken === '') {\n\t\t\tthis.showAuthenticate();\n\t\t\treturn;\n\t\t} else if (this.octokitWrapper === undefined) {\n\t\t\tthis.initOctokitWrapper();\n\t\t}\n\n\t\tlet saveWin = undefined;\n\t\tsaveWin = Ext.create('Ext.window.Window', {\n\t\t\ttitle: 'Save to GitHub',\n\t\t\twidth: 750,\n\t\t\theight: 650,\n\t\t\tclosable: false,\n\t\t\tmaximizable: true,\n\t\t\tlayout: 'fit',\n\t\t\titems: {\n\t\t\t\txtype: 'githubfilesaver',\n\t\t\t\toctokit: this.octokitWrapper,\n\t\t\t\tcurrentFile: this.getCurrentFile(),\n\t\t\t\tsaveData: data,\n\t\t\t\titemId: 'fileSaver',\n\t\t\t\tlisteners: {\n\t\t\t\t\tformValidityChange: function(src, valid) {\n\t\t\t\t\t\tsaveWin.queryById('save').setDisabled(!valid);\n\t\t\t\t\t},\n\t\t\t\t\tfileSaved: function(src, fileData) {\n\t\t\t\t\t\tparent.fireEvent('fileSaved', parent, fileData);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tbuttons: [{\n\t\t\t\ttext: 'Save',\n\t\t\t\titemId: 'save',\n\t\t\t\tdisabled: true,\n\t\t\t\thandler: function() {\n\t\t\t\t\tsaveWin.queryById('fileSaver').doSave();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t},{\n\t\t\t\ttext: 'Cancel',\n\t\t\t\thandler: function() {\n\t\t\t\t\tparent.close();\n\t\t\t\t\tparent.fireEvent('saveCancelled', parent);\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t\tsaveWin.show();\n\n\t\tthis.currentWindow = saveWin;\n\t},\n\n\tgetCookieValue: function(cookieName) {\n\t\tconst re = new RegExp('[; ]'+cookieName+'=([^\\\\s;]*)');\n\t\tconst sMatch = (' '+document.cookie).match(re);\n\t\tif (cookieName && sMatch) return unescape(sMatch[1]);\n\t\treturn '';\n\t},\n\n\tinitOctokitWrapper: function() {\n\t\tthis.authToken = this.getCookieValue('access-token');\n\t\tthis.octokitWrapper = new Voyant.notebook.github.OctokitWrapper({\n\t\t\tauthToken: this.authToken\n\t\t});\n\t},\n\n\tloadFileFromId: function(id) {\n\t\tconst parts = decodeURIComponent(id).split('/');\n\t\tif (parts.length >= 3) {\n\t\t\tconst repoId = parts[0]+'/'+parts[1];\n\t\t\tconst filePath = parts.slice(2).join('/');\n\t\t\tthis.loadFile(repoId, filePath);\n\t\t}\n\t},\n\n\tloadFile: function(repoId, filePath) {\n\t\tthis.authToken = this.getCookieValue('access-token');\n\t\tif (this.authToken === '') {\n\t\t\tthis.showAuthenticate(this.loadFile.bind(this, repoId, filePath));\n\t\t\treturn;\n\t\t} else if (this.octokitWrapper === undefined) {\n\t\t\tthis.initOctokitWrapper();\n\t\t}\n\t\tthis.octokitWrapper.loadFile(repoId, filePath).then((data) => {\n\t\t\tthis.setCurrentFile(data);\n\t\t\tthis.fireEvent('fileLoaded', this, data);\n\t\t});\n\t}\n})\n","Ext.define(\"Voyant.notebook.StorageDialogs\", {\n\textend: \"Ext.Component\",\n\trequires: [],\n\talias: \"\",\n\tconfig: {\n\t\taccessCode: undefined\n\t},\n\n\tconstructor: function(config) {\n\t\tconfig = config || {};\n    \tthis.callParent(arguments);\n    },\n\n\tinitComponent: function() {\n\t\tthis.callParent(arguments);\n\t},\n\t\n\tshowSave: function(data, notebookId='') {\n\t\tconst me = this;\n\t\tconst newNotebook = notebookId === '';\n\t\tconst title = newNotebook ? 'Save New Notebook' : 'Overwrite Existing Notebook';\n\t\tExt.create('Ext.window.Window', {\n\t\t\ttitle: title,\n\t\t\titems: [{\n\t\t\t\txtype: 'form',\n\t\t\t\twidth: 450,\n\t\t\t\tbodyPadding: 5,\n\t\t\t\tplugins: ['datatip'],\n\t\t\t\tlisteners: {\n\t\t\t\t\tbeforeshowtip: function(tip, config, msg) {\n\t\t\t\t\t\treturn !config.currentTarget.el.hasCls('x-form-invalid'); // don't show tooltip if the field is invalid because otherwise the two tips overlap\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tlayout: 'anchor',\n\t\t\t\tdefaults: {\n\t\t\t\t\tlabelAlign: 'right',\n\t\t\t\t\tlabelWidth: 160,\n\t\t\t\t\twidth: 360,\n\t\t\t\t\tinputAttrTpl: 'spellcheck=\"false\"',\n\t\t\t\t\txtype: 'textfield'\n\t\t\t\t},\n    \t    \titems: [{\n\t\t\t\t\tfieldLabel: 'Notebook ID' + (newNotebook ? ' (optional)' : ''),\n\t\t\t\t\tname: 'notebookId',\n\t\t\t\t\tvalue: notebookId,\n\t\t\t\t\tallowBlank: true,\n\t\t\t\t\treadOnly: !newNotebook,\n\t\t\t\t\ttooltip: 'An ID used to identify this notebook. If left blank, one will be generated for you.',\n\t\t\t\t\tvalidator: function(val) {\n\t\t\t\t\t\tif (val == '') {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t} else if (val.match(/^[\\w-]{4,16}$/) === null) {\n\t\t\t\t\t\t\treturn 'The ID must be between 4 and 16 alphanumeric characters.'\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\tfieldLabel: 'Access Code',\n\t\t\t\t\tname: 'accessCode',\n\t\t\t\t\tallowBlank: false,\n\t\t\t\t\tvalue: newNotebook ? this.generateAccessCode() : this.getAccessCode(),\n\t\t\t\t\ttooltip: 'The Access Code is required to overwrite this notebook.',\n\t\t\t\t\tvalidator: function(val) {\n\t\t\t\t\t\tif (val.match(/^[\\w-]{4,16}$/) === null) {\n\t\t\t\t\t\t\treturn 'The access code must be between 4 and 16 alphanumeric characters.'\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},{\n\t\t\t\t\tfieldLabel: 'Email (optional)',\n\t\t\t\t\tname: 'email',\n\t\t\t\t\tallowBlank: true,\n\t\t\t\t\tvtype: 'email',\n\t\t\t\t\thidden: !newNotebook,\n\t\t\t\t\ttooltip: 'An email will be sent to this address with the Notebook URL and Access Code.'\n\t\t\t\t}]\n\t\t\t}],\n\t\t\tbuttons: [{\n    \t        text: 'Cancel',\n\t            ui: 'default-toolbar',\n    \t        handler: function() {\n    \t            this.up('window').close();\n\t\t\t\t\tme.fireEvent('saveCancelled', me);\n    \t        }\n    \t    }, \" \", {\n    \t        text: 'Save',\n    \t        handler: function(button) {\n\t\t\t\t\tconst win = button.up('window');\n\t\t\t\t\tconst form = win.down('form').getForm();\n\t\t\t\t\tif (form.isValid()) {\n\t\t\t\t\t\tconst values = form.getValues();\n\t\t\t\t\t\tvalues.data = data;\n\t\t\t\t\t\tif (newNotebook && values.notebookId !== '') {\n\t\t\t\t\t\t\tme.doesNotebookIdExist(values.notebookId).then(function(exists) {\n\t\t\t\t\t\t\t\tif (exists) {\n\t\t\t\t\t\t\t\t\tform.findField('notebookId').markInvalid('That Notebook ID already exists.');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tme.doSave(values);\n\t\t\t\t\t\t\t\t\twin.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbutton.setDisabled(true);\n\t\t\t\t\t\t\tme.doSave(values).then(function(didSave) {\n\t\t\t\t\t\t\t\tbutton.setDisabled(false);\n\t\t\t\t\t\t\t\tif (didSave) {\n\t\t\t\t\t\t\t\t\twin.close();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tform.findField('accessCode').markInvalid('Invalid access code.');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n    \t        }\n\t\t\t}],\n\t\t\tlisteners: {\n\t\t\t\tclose: function() {\n\t\t\t\t\tme.fireEvent('close', me); // need an additional close event in case the user uses the close tool / esc button\n\t\t\t\t}\n\t\t\t}\n\t\t}).show();\n\t},\n\n\tdoesNotebookIdExist: function(id) {\n\t\tconst dfd = new Ext.Deferred();\n\n\t\tSpyral.Load.trombone({\n\t\t\ttool: 'notebook.NotebookManager',\n\t\t\taction: 'exists',\n\t\t\tid: id,\n\t\t\tnoCache: 1\n\t\t}).then(function(json) {\n\t\t\tvar exists = json.notebook.data === 'true';\n\t\t\tdfd.resolve(exists);\n\t\t}).catch(function(err) {\n\t\t\tconsole.log(err);\n\t\t});\n\n\t\treturn dfd.promise;\n\t},\n\n\tdoSave: function({notebookId, accessCode, email, data}) {\n\t\tconst me = this;\n\t\treturn Spyral.Load.trombone({\n\t\t\ttool: 'notebook.NotebookManager',\n\t\t\taction: 'save',\n\t\t\tid: notebookId,\n\t\t\taccessCode: accessCode,\n\t\t\temail: email,\n\t\t\tdata: data\n\t\t}).then(function(json) {\n\t\t\tif (json.notebook.data !== 'true') {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tme.setAccessCode(accessCode);\n\t\t\t\tconst notebookId = json.notebook.id;\n\t\t\t\tme.fireEvent('fileSaved', me, notebookId);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}).catch(function(err) {\n\t\t\tme.fireEvent('fileSaved', me, null);\n\t\t\treturn false;\n\t\t});\n\t},\n\n\tgenerateAccessCode: function() {\n\t\tconst alphabet = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];\n\t\tlet code = '';\n\t\twhile (code.length < 6) {\n\t\t\tif (Math.random() < .3) {\n\t\t\t\tcode += Math.floor(Math.random()*9);\n\t\t\t} else {\n\t\t\t\tlet letter = alphabet[Math.floor(Math.random()*alphabet.length)];\n\t\t\t\tif (Math.random() < .5) {\n\t\t\t\t\tletter = letter.toUpperCase();\n\t\t\t\t}\n\t\t\t\tcode += letter;\n\t\t\t}\n\t\t}\n\t\treturn code;\n\t}\n})","/*\n * @class Notebook\n * A Spyral Notebook. This should never be instantiated directly.\n */\nExt.define('Voyant.notebook.Notebook', {\n\talternateClassName: [\"Notebook\"],\n\textend: 'Ext.panel.Panel',\n\trequires: ['Voyant.notebook.editor.CodeEditorWrapper','Voyant.notebook.editor.TextEditorWrapper','Voyant.notebook.util.Show','Voyant.panel.Cirrus','Voyant.panel.Summary','Voyant.notebook.StorageDialogs','Voyant.notebook.github.GitHubDialogs'],\n\tmixins: ['Voyant.panel.Panel'],\n\talias: 'widget.notebook',\n    statics: {\n    \ti18n: {\n    \t\ttitle: \"Spyral\",\n    \t\tmetadataEditor: \"Edit Metadata\",\n    \t\tmetadataTitle: \"Title\",\n    \t\tmetadataTip: \"Edit notebook metadata.\",\n    \t\tmetadataAuthor: \"Author(s)\",\n    \t\tmetadataKeywords: \"Keywords\",\n    \t\tmetadataDescription: \"Description\",\n    \t\tmetadataLicense: \"Licence\",\n    \t\tmetadataLanguage: \"Language\",\n    \t\tmetadataReset: \"Reset\",\n    \t\tmetadataSave: \"Save\",\n    \t\tmetadataCancel: \"Cancel\",\n    \t\tcreated: \"Created\",\n    \t\tmodified: \"Modified\",\n    \t\tclickToEdit: \"Click to edit\",\n    \t\tcantLoadNotebook: \"Unable to load Spyral notebook:\",\n    \t\tcannotLoadJson: \"Unable to parse JSON input.\",\n    \t\tcannotLoadJsonUnrecognized: \"Unable to recognize JSON input.\",\n    \t\tcannotLoadUnrecognized: \"Unable to recognize input.\",\n    \t\topenTitle: \"Open\",\n    \t\topenMsg: \"Paste in Notebook ID, a URL or a Spyral data file (in HTML).\",\n    \t\texportHtmlDownload: \"HTML (download)\",\n    \t\terrorParsingDomInput: \"An error occurred while parsing the input of the document. The results might still work, except if the code contained HTML tags.\"\n    \t},\n    \tapi: {\n    \t\tinput: undefined,\n    \t\tinputEncodedBase64Json: undefined,\n    \t\trun: undefined\n    \t},\n\t\tcurrentNotebook: undefined\n    },\n    config: {\n        /**\n         * @private\n         */\n    \tnotebookId: undefined,\n        /**\n         * @private\n         */\n    \tmetadata: undefined,\n        /**\n         * @private\n         */\n    \tisEdited: false,\n    \t/**\n    \t * @private\n    \t */\n    \tversion: \"3.0\",\n    \t/**\n    \t * @private\n    \t */\n\t\tcurrentBlock: undefined,\n\t\t/**\n\t\t * @private\n\t\t * Which solution to use for storing notebooks, either: 'voyant' or 'github'\n\t\t */\n\t\tstorageSolution: 'voyant'\n\t},\n\t\n\tvoyantStorageDialogs: undefined,\n\tgithubDialogs: undefined,\n\n\tspyralTernDocs: undefined, // holds the content of the spyral tern docs, for passing to the code editor\n    \n    /**\n     * @private\n     */\n    constructor: function(config) {\n    \tVoyant.notebook.Notebook.currentNotebook = this;\n    \tExt.apply(config, {\n    \t\ttitle: this.localize('title'),\n    \t    autoScroll: true,\n    \t\tincludeTools: {\n\t\t\t\t'help': true,\n\t\t\t\t'gear': true,\n    \t\t\t'save': true,\n    \t\t\t'saveIt': {\n    \t\t\t\ttooltip: this.localize(\"saveItTip\"),\n    \t\t\t\titemId: 'saveItTool',\n    \t\t\t\txtype: 'toolmenu',\n    \t\t\t\tglyph: 'xf0c2@FontAwesome',\n\t\t\t\t\tdisabled: true,\n\t\t\t\t\tscope: this,\n\t\t\t\t\titems: [{\n\t\t\t\t\t\ttext: 'Save',\n\t\t\t\t\t\txtype: 'menuitem',\n\t\t\t\t\t\tglyph: 'xf0c2@FontAwesome',\n\t\t\t\t\t\thandler: this.showSaveDialog.bind(this, false),\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t},{\n\t\t\t\t\t\ttext: 'Save As...',\n\t\t\t\t\t\txtype: 'menuitem',\n\t\t\t\t\t\tglyph: 'xf0c2@FontAwesome',\n\t\t\t\t\t\thandler: this.showSaveDialog.bind(this, true),\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}]\n    \t\t\t},\n    \t\t\t'new': {\n    \t\t\t\ttooltip: this.localize(\"newTip\"),\n    \t\t\t\tcallback: function() {\n    \t    \t\t\tlet url = this.getBaseUrl()+\"spyral/\";\n\t\t\t\t\t\tthis.getApplication().openUrl(url);\n    \t\t\t\t},\n    \t\t\t\txtype: 'toolmenu',\n    \t\t\t\tglyph: 'xf067@FontAwesome',\n    \t\t\t\tscope: this\n    \t\t\t},\n    \t\t\t'open': {\n    \t\t\t\ttooltip: this.localize(\"openTip\"),\n    \t\t\t\txtype: 'toolmenu',\n\t\t\t\t\tglyph: 'xf115@FontAwesome',\n\t\t\t\t\tcallback: function(panel, tool) {\n\t\t\t\t\t\tconst storageSolution = this.getStorageSolution();\n\t\t\t\t\t\tif (storageSolution === undefined) {\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\ttool.toolMenu.hide()\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tif (storageSolution === 'github') {\n\t\t\t\t\t\t\t\tthis.githubDialogs.showLoad();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tExt.Msg.prompt(this.localize(\"openTitle\"),this.localize(\"openMsg\"),function(btn, text) {\n\t\t\t\t\t\t\t\t\ttext = text.trim();\n\t\t\t\t\t\t\t\t\tif (btn==\"ok\") {\n\t\t\t\t\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\t\t\t\t\tthis.loadFromString(text);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, this, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tscope: this,\n\t\t\t\t\titems: [{\n\t\t\t\t\t\ttext: 'Load',\n\t\t\t\t\t\txtype: 'menuitem',\n\t\t\t\t\t\tglyph: 'xf115@FontAwesome',\n\t\t\t\t\t\thandler: function() {\n\t\t\t\t\t\t\tExt.Msg.prompt(this.localize(\"openTitle\"),this.localize(\"openMsg\"),function(btn, text) {\n\t\t\t\t\t\t\t\ttext = text.trim();\n\t\t\t\t\t\t\t\tif (btn==\"ok\") {\n\t\t\t\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\t\t\t\tthis.loadFromString(text);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, this, true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t},{\n\t\t\t\t\t\ttext: 'Load from GitHub',\n\t\t\t\t\t\txtype: 'menuitem',\n\t\t\t\t\t\tglyph: 'xf115@FontAwesome',\n\t\t\t\t\t\thandler: function() {\n\t\t\t\t\t\t\tthis.githubDialogs.showLoad();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: this\n\t\t\t\t\t}]\n    \t\t\t},\n    \t\t\t'runall': {\n    \t\t\t\ttooltip: this.localize(\"runallTip\"),\n    \t\t\t\tcallback: this.runAll,\n    \t\t\t\txtype: 'toolmenu',\n    \t\t\t\tglyph: 'xf04e@FontAwesome',\n    \t\t\t\tscope: this\n    \t\t\t},\n    \t\t\t'metadata': {\n    \t\t\t\ttooltip: this.localize(\"metadataTip\"),\n    \t\t\t\tcallback: this.showMetadataEditor,\n\t\t\t\t\txtype: 'toolmenu',\n\t\t\t\t\tglyph: 'xf02c@FontAwesome',\n\t\t\t\t\tscope: this\n    \t\t\t}\n    \t\t},\n    \t\t\t\n    \t\titems: [{\n    \t\t\titemId: 'spyralHeader',\n    \t\t\tcls: 'spyral-header',\n    \t\t\tlisteners: {\n    \t\t\t\tafterrender: function(header) {\n    \t\t\t\t\tExt.tip.QuickTipManager.register({\n    \t\t\t\t\t\t  target: header.getId(),\n    \t\t\t\t\t\t  text: this.localize(\"clickToEdit\")\n    \t\t\t\t\t\t});\n    \t\t\t\t\tvar head = header;\n    \t\t\t\t\theader.getTargetEl().on(\"click\", function(header) {\n    \t\t\t\t\t\tthis.showMetadataEditor();\n    \t\t\t\t\t\thead.removeCls(\"editable\");\n    \t\t\t\t\t}, this);\n    \t\t\t\t\theader.mon(header.getEl(), \"mouseover\", function() {header.addCls(\"editable\")});\n    \t\t\t\t\theader.mon(header.getEl(), \"mouseout\", function() {header.removeCls(\"editable\")});\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t}\n    \t\t},{\n    \t\t\txtype: 'container',\n    \t\t\titemId: 'cells'\n    \t\t},{\n    \t\t\titemId: 'spyralFooter',\n    \t\t\tcls: 'spyral-footer',\n    \t\t\tlisteners: {\n    \t\t\t\tafterrender: function(footer) {\n    \t\t\t\t\tExt.tip.QuickTipManager.register({\n  \t\t\t\t\t\t  target: footer.getId(),\n  \t\t\t\t\t\t  text: this.localize(\"clickToEdit\")\n  \t\t\t\t\t\t});\n    \t\t\t\t\tvar foot = footer;\n    \t\t\t\t\tfooter.getTargetEl().on(\"click\", function(footer) {\n    \t\t\t\t\t\tthis.showMetadataEditor();\n    \t\t\t\t\t\tfoot.removeCls(\"editable\");\n    \t\t\t\t\t}, this);\n    \t\t\t\t\tfooter.mon(footer.getEl(), \"mouseover\", function() {footer.addCls(\"editable\")});\n    \t\t\t\t\tfooter.mon(footer.getEl(), \"mouseout\", function() {footer.removeCls(\"editable\")});\n    \t\t\t\t},\n    \t\t\t\tscope: this\n    \t\t\t}\n    \t\t}],\n    \t\tlisteners: {\n    \t\t\tafterrender: this.init,\n    \t\t\tnotebookWrapperMoveUp: this.notebookWrapperMoveUp,\n    \t\t\tnotebookWrapperMoveDown: this.notebookWrapperMoveDown,\n    \t\t\tnotebookWrapperRemove: this.notebookWrapperRemove,\n\t\t\t\tnotebookWrapperAdd: this.notebookWrapperAdd,\n\t\t\t\tnotebookLoaded: this.autoExecuteCells,\n    \t\t\tscope: this\n    \t\t}\n    \t})\n        this.callParent(arguments);\n    \tthis.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);\n\n\t\tthis.voyantStorageDialogs = new Voyant.notebook.StorageDialogs({\n\t\t\tlisteners: {\n\t\t\t\t'fileLoaded': function(src) {\n\n\t\t\t\t},\n\t\t\t\t'fileSaved': function(src, notebookId) {\n\t\t\t\t\tthis.unmask();\n\t\t\t\t\tif (notebookId !== null) {\n\t\t\t\t\t\tvar id = this.getNotebookId();\n\t\t\t\t\t\tif (!id || notebookId!=id) {\n\t\t\t\t\t\t\tthis.setNotebookId(notebookId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.toastInfo({\n\t\t\t\t\t\t\thtml: this.localize('saved'),\n\t\t\t\t\t\t\tanchor: 'tr'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.setIsEdited(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// save error\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'saveCancelled': function() {\n\t\t\t\t},\n\t\t\t\t'close': function() {\n\t\t\t\t\tthis.unmask();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n\n\t\tthis.githubDialogs = new Voyant.notebook.github.GitHubDialogs({\n\t\t\tlisteners: {\n\t\t\t\t'fileLoaded': function(src, {owner, repo, ref, path, file}) {\n\t\t\t\t\tthis.githubDialogs.close();\n\t\t\t\t\tthis.clear();\n\t\t\t\t\tthis.loadFromString(file);\n\n\t\t\t\t\tconst id = encodeURIComponent(owner+'/'+repo+'/'+path);\n\t\t\t\t\tif (location.search.indexOf(id) === -1) {\n\t\t\t\t\t\tconst url = this.getBaseUrl()+'spyral/?githubId='+id;\n\t\t\t\t\t\twindow.history.pushState({\n\t\t\t\t\t\t\turl: url\n\t\t\t\t\t\t}, 'Spyral Notebook: '+id, url);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'fileSaved': function(src, {owner, repo, branch, path}) {\n\t\t\t\t\tthis.githubDialogs.close();\n\t\t\t\t\tthis.unmask();\n\t\t\t\t\tthis.toastInfo({\n\t\t\t\t\t\thtml: this.localize('saved'),\n\t\t\t\t\t\tanchor: 'tr'\n\t\t\t\t\t});\n\t\t\t\t\tthis.setIsEdited(false);\n\n\t\t\t\t\tconst id = encodeURIComponent(owner+'/'+repo+'/'+path);\n\t\t\t\t\tif (location.search.indexOf(id) === -1) {\n\t\t\t\t\t\tconst url = this.getBaseUrl()+'spyral/?githubId='+id;\n\t\t\t\t\t\twindow.history.pushState({\n\t\t\t\t\t\t\turl: url\n\t\t\t\t\t\t}, 'Spyral Notebook: '+id, url);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'saveCancelled': function(src) {\n\t\t\t\t\tthis.unmask();\n\t\t\t\t},\n\t\t\t\tscope: this\n\t\t\t}\n\t\t});\n    },\n    \n    init: function() {\n\t\t// add static / global functions from Spyral\n\t\twindow.Corpus = Spyral.Corpus;\n\t\twindow.Table = Spyral.Table;\n\n\t\twindow.loadCorpus = function() {\n\t\t\treturn Spyral.Corpus.load.apply(Spyral.Corpus.load, arguments)\n\t\t}\n\n\t\twindow.createTable = function() {\n\t\t\treturn Spyral.Table.create.apply(Spyral.Table, arguments)\n\t\t}\n\n\t\t// need to load docs first\n\t\tExt.Ajax.request({\n\t\t\turl: this.getApplication().getBaseUrlFull()+'resources/spyral/docs/spyral.json',\n\t\t\tcallback: function(opts, success, response) {\n\t\t\t\tif (success) {\n\t\t\t\t\tthis.spyralTernDocs = Ext.JSON.decode(response.responseText);\n\t\t\t\t\t\n\t\t\t\t\t// add docs for static / global functions\n\t\t\t\t\tthis.spyralTernDocs.Corpus = this.spyralTernDocs.Spyral.Corpus;\n\t\t\t\t\tthis.spyralTernDocs.Table = this.spyralTernDocs.Spyral.Table;\n\t\t\t\t\tthis.spyralTernDocs.loadCorpus = this.spyralTernDocs.Spyral.Corpus.load;\n\t\t\t\t\tthis.spyralTernDocs.createTable = this.spyralTernDocs.Spyral.Table.create;\n\t\t\t\t}\n\n\t\t\t\tvar queryParams = Ext.Object.fromQueryString(document.location.search, true);\n\t\t\t\tvar isRun = Ext.isDefined(queryParams.run);\n\t\t\t\tvar spyralIdMatches = /\\/spyral\\/([\\w-]+)\\/?$/.exec(location.pathname);\n\t\t\t\tvar isGithub = Ext.isDefined(queryParams.githubId);\n\t\t\t\tif (\"inputJsonArrayOfEncodedBase64\" in queryParams) {\n\t\t\t\t\tlet json = Ext.decode(queryParams.inputJsonArrayOfEncodedBase64);\n\t\t\t\t\tjson.forEach(function(block) {\n\t\t\t\t\t\tlet text = decodeURIComponent(atob(block));\n\t\t\t\t\t\tif (text.trim().indexOf(\"<\")==0) {\n\t\t\t\t\t\t\tthis.addText(text);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.addCode(text);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t} else if (queryParams.input) {\n\t\t\t\t\tif (queryParams.input.indexOf(\"http\")===0) {\n\t\t\t\t\t\tthis.loadFromUrl(queryParams.input, isRun);\n\t\t\t\t\t}\n\t\t\t\t} else if (spyralIdMatches) {\n\t\t\t\t\tthis.loadFromId(spyralIdMatches[1]);\n\t\t\t\t\tthis.setStorageSolution('voyant');\n\t\t\t\t} else if (isGithub) {\n\t\t\t\t\tthis.githubDialogs.loadFileFromId(queryParams.githubId);\n\t\t\t\t\tthis.setStorageSolution('github');\n\t\t\t\t} else {\n\t\t\t\t\tthis.addNew();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (isRun) {\n\t\t\t\t\tvar me = this;\n\t\t\t\t\tExt.defer(function() {\n\t\t\t\t\t\tme.runAll()\n\t\t\t\t\t}, 100)\n\t\t\t\t}\n\n\t\t\t},\n\t\t\tscope: this\n\t\t})\n    },\n    \n    setBlock: function(data, offset, mode, config) {\n    \tdata = data || \"\";\n    \toffset = offset || 1;\n    \tconfig = config || {};\n    \tvar containers = this.query(\"notebookeditorwrapper\");\n    \tvar id = this.getCurrentBlock().id;\n    \tvar current = containers.findIndex(function(container) {return container.id==id})\n    \tif (current+offset<0 || current+offset>containers.length) { // wanting to place before beginning or one beyond end\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: this.localize('error'),\n\t\t\t\tmsg: this.localize('blockDoesNotExist'),\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t});\n\t\t\treturn undefined\n    \t}\n    \t\n    \t// I can't seem to set the content, so we'll go nuclear and remove the block\n    \tif (containers[current+offset]) {\n        \tvar cells = this.getComponent(\"cells\");\n    \t\tcells.remove(containers[current+offset]);\n    \t}\n    \treturn this.addCode(Object.assign({},{\n    \t\tinput: data,\n    \t\tmode: mode || \"text\"\n    \t}, config), current+offset);\n    },\n    getBlock: function(offset, config) {\n    \toffset = offset || 0;\n    \tconfig = config || {};\n    \tvar containers = this.query(\"notebookcodeeditorwrapper\");\n    \tvar id = this.getCurrentBlock().id;\n    \tvar current = containers.findIndex(function(container) {return container.id==id})\n    \tif (current+offset<0 || current+offset>containers.length-1) {\n    \t\tif (\"failQuietly\" in config && config.failQuietly) {}\n    \t\telse {\n    \t\t\tExt.Msg.show({\n    \t\t\t\ttitle: this.localize('error'),\n    \t\t\t\tmsg: this.localize('blockDoesNotExist'),\n    \t\t\t\tbuttons: Ext.MessageBox.OK,\n    \t\t\t\ticon: Ext.MessageBox.ERROR\n    \t\t\t});\n    \t\t}\n\t\t\treturn undefined;\n    \t}\n    \tcontent = containers[current+offset].getContent();\n    \treturn content.input;\n//    \tdebugger\n//    \tvar mode = containers[current+offset].editor.getMode().split(\"/\").pop();\n//    \tif (content.mode==\"xml\") {\n//    \t\treturn new DOMParser().parseFromString(content.input, 'text/xml')\n//    \t} else if (content.mode==\"json\") {\n//    \t\treturn JSON.parse(content.input);\n//    \t} else if (content.mode==\"html\") {\n//    \t\treturn new DOMParser().parseFromString(content.input, 'text/html')\n//    \t} else {\n//    \t\treturn content.input;\n//    \t}\n    },\n    \n    addNew: function() {\n\t\tthis.setMetadata(new Spyral.Metadata({\n\t\t\ttitle: \"<h1>Spyral Notebook</h1>\"\n\t\t}));\n\t\tthis.addText(\"<p>This is a Spyral Notebook, a dynamic document that combines writing, code and data in service of reading, analyzing and interpreting digital texts.</p><p>Spyral Notebooks are composed of text blocks (like this one) and code blocks (like the one below). You can <span class='marker'>click on the blocks to edit</span> them and add new blocks by clicking add icon that appears in the left column when hovering over a block.</p>\");\n\t\tvar code = this.addCode('');\n\t\tExt.defer(function() {\n\t\t\tcode.run();\n\t\t}, 100, this);\n    },\n    \n    clear: function() {\n    \tthis.setMetadata(new Spyral.Metadata());\n    \tvar cells = this.getComponent(\"cells\");\n    \tcells.removeAll();\n\t},\n\n\tshowSaveDialog: function(saveAs) {\n\t\tthis.mask(this.localize('saving'));\n\t\tthis.getMetadata().setDateNow(\"modified\");\n\n\t\tconst data = this.generateExportHtml();\n\t\tconst storageSolution = this.getStorageSolution();\n\t\t\n\t\tif (storageSolution === 'voyant' && this.getNotebookId() !== undefined && this.voyantStorageDialogs.getAccessCode() !== undefined) {\n\t\t\tthis.voyantStorageDialogs.doSave({\n\t\t\t\tnotebookId: this.getNotebookId(),\n\t\t\t\tdata: data,\n\t\t\t\taccessCode: this.voyantStorageDialogs.getAccessCode()\n\t\t\t});\n\t\t} else {\n\t\t\tif (storageSolution === 'github') {\n\t\t\t\tthis.githubDialogs.showSave(data);\n\t\t\t} else {\n\t\t\t\tthis.voyantStorageDialogs.showSave(data, saveAs ? undefined : this.getNotebookId());\n\t\t\t}\n\t\t}\n\t},\n\t\n    loadFromString: function(text) {\n    \ttext = text.trim();\n\t\tif (text.indexOf(\"http\")==0) {\n\t\t\tthis.loadFromUrl(text);\n\t\t} else if (text.indexOf(\"{\")==0) { // old format?\n\t\t\tvar json;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(text)\n\t\t\t} catch(e) {\n\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t\ttitle: this.localize('error'),\n\t\t\t\t\tmsg: this.localize('cannotLoadJson')+\"<br><pre style='color: red'>\"+e+\"</pre>\",\n\t\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (!json.metadata || !json.blocks) {\n\t\t\t\treturn Ext.Msg.show({\n\t\t\t\t\ttitle: this.localize('error'),\n\t\t\t\t\tmsg: this.localize('cannotLoadJsonUnrecognized'),\n\t\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t\t});\n\t\t\t}\n\t\t\tjson.blocks.forEach(function(block) {\n        \t\tif (Ext.isString(block) && block!='') {this.addCode({input: block});}\n        \t\telse if (block.input) {\n            \t\tif (block.type=='text') {this.addText(block);}\n            \t\telse {\n            \t\t\tthis.addCode(block);\n            \t\t}\n        \t\t}\n\t\t\t}, this);\n\t\t} else if (/^[\\w-_]+$/.test(text)) {\n\t\t\tthis.loadFromId(text)\n\t\t}\n\t\telse if (text.indexOf(\"<\")!==0 || text.indexOf(\"spyral\")==-1) {\n\t\t\treturn Ext.Msg.show({\n\t\t\t\ttitle: this.localize('error'),\n\t\t\t\tmsg: this.localize('cannotLoadUnrecognized'),\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.ERROR\n\t\t\t});\n\t\t} else {\n\t\t\tthis.loadFromHtmlString(text);\n\t\t}\n\t\treturn true;\n\n    },\n    \n    loadFromId: function(id) {\n    \tthis.mask(this.localize(\"loading\"));\n    \tvar me = this;\n    \tSpyral.Load.trombone({\n\t    \t tool: 'notebook.NotebookManager',\n\t    \t action: 'load',\n\t    \t id: id,\n\t    \t noCache: 1\n    \t}).then(function(json) {\n    \t\tme.unmask();\n    \t\tme.loadFromString(json.notebook.data); // could be older JSON format\n\t\t\tif (json.notebook.id && json.notebook.id!=me.getNotebookId()) {\n\t\t\t\tme.setNotebookId(json.notebook.id);\n\t\t\t}\n\t    \tme.setIsEdited(false);\n    \t}).catch(function(err) {me.unmask()})\n    },\n    \n    loadFromHtmlString: function(html) {\n    \tvar parser = new DOMParser();\n    \tvar dom = parser.parseFromString(html, 'text/html');\n    \tthis.setMetadata(new Spyral.Metadata(dom))\n    \tvar hasDomError = false;\n    \tdom.querySelectorAll(\"section.notebook-editor-wrapper\").forEach(function(section) {\n    \t\tvar classes = section.classList;\n    \t\tif (classes.contains(\"notebooktexteditorwrapper\")) {\n    \t\t\tvar editor = section.querySelector(\".notebook-text-editor\").innerHTML;\n    \t\t\tthis.addText(editor, undefined, section.id);\n    \t\t} else if (classes.contains(\"notebookcodeeditorwrapper\")) {\n    \t\t\tvar inputEl = section.querySelector(\".notebook-code-editor-raw\");\n    \t\t\tvar typeRe = /\\beditor-mode-(\\w+)\\b/.exec(inputEl.className);\n    \t\t\tvar editorType = typeRe[1];\n    \t\t\t\n    \t\t\t/* in an ideal world we could use inputEl.innerHTML to get the contents\n    \t\t\t * except that since it's in a parsed DOM it's already been transformed\n    \t\t\t *  significantly. For instance, all >, <, and & character appear in the\n    \t\t\t * html entities form (which breaks things like && () => {}). You also\n    \t\t\t * get strange artefacts like if you have \"<div>\" in your code it may add\n    \t\t\t * </div> to the end of the innerHTML (to make sure tags are balanced).\n    \t\t\t * and of course textContent or innerText won't work because that will\n    \t\t\t * strip any of the HTML formatting out. What's left is to use the parsing\n    \t\t\t * to ensure the order and to properly grab the IDs and then to do character\n    \t\t\t * searches on the original string. */\n    \t\t\tvar secPos = html.indexOf(\"<section id='\"+section.id+\"' class='notebook-editor-wrapper notebookcodeeditorwrapper'>\");\n\t\t\t\tvar startPre = html.indexOf(\"<pre class='notebook-code-editor-raw editor-mode-\", secPos);\n    \t\t\tstartPre = html.indexOf(\">\", startPre)+1; // add the length of the string\n    \t\t\tvar endPre = html.indexOf(\"</pre>\\n<div class='notebook-code-results'>\", startPre);\n    \t\t\t\n    \t\t\t// check if we have valid values\n    \t\t\tif (secPos===-1 || startPre === -1 || endPre === -1) {\n    \t\t\t\thasDomError = true;\n    \t\t\t\t// this might work, unless the js code includes HTML\n    \t\t\t\tinput = editorType === \"javascript\" ? inputEl.innerText : inputEl.innerHTML;\n    \t\t\t\tdebugger\n    \t\t\t} else {\n        \t\t\tinput = html.substring(startPre, endPre);\n    \t\t\t}\n\t\t\t\tvar autoexec = /\\bautoexec\\b/.exec(inputEl.className) !== null;\n\t\t\t\tvar output = section.querySelector(\".notebook-code-results\").innerHTML;\n\t\t\t\tvar ui = section.querySelector(\".notebook-code-ui\");\n\t\t\t\tif (ui !== null) {\n\t\t\t\t\tui = ui.innerHTML;\n\t\t\t\t} else {\n\t\t\t\t\tui = undefined;\n\t\t\t\t}\n    \t\t\tthis.addCode({\n    \t\t\t\tinput: input,\n\t\t\t\t\toutput: output,\n\t\t\t\t\tuiHtml: ui,\n\t\t\t\t\tmode: editorType,\n\t\t\t\t\tautoExecute: autoexec,\n    \t\t\t}, undefined, section.id)\n    \t\t}\n\t\t}, this);\n\t\t\n    \tif (hasDomError) {\n\t\t\tthis.showError(this.localize(\"errorParsingDomInput\"))\n    \t}\n    \t\n\t\tthis.fireEvent('notebookLoaded');\n    },\n    \n    runUntil: function(upToCmp) {\n    \tvar containers = [];\n    \tExt.Array.each(this.query(\"notebookcodeeditorwrapper\"), function(item) {\n\t\t\tcontainers.push(item);\n\t\t\titem.clearResults();\n    \t\tif (upToCmp && upToCmp==item) {return false;}\n    \t}, this);\n    \tthis._run(containers);\n    },\n    \n    runFrom: function(fromCmp) {\n    \tvar containers = [], matched = false;\n    \tExt.Array.each(this.query(\"notebookcodeeditorwrapper\"), function(item) {\n    \t\tif (fromCmp && fromCmp==item) {matched=true;}\n    \t\tif (matched) {\n    \t\t\tcontainers.push(item);\n    \t\t\titem.clearResults();\n    \t\t}\n    \t}, this);\n    \tthis._run(containers);\n    },\n    \n    runAll: function() {\n    \tvar containers = [];\n    \tExt.Array.each(this.query(\"notebookcodeeditorwrapper\"), function(item) {\n\t\t\tcontainers.push(item);\n\t\t\titem.clearResults();\n    \t}, this);\n    \tthis._run(containers);\n    },\n    \n    _run: function(containers) {\n    \tif (containers.length>0) {\n    \t\tvar container = containers.shift();\n    \t\tvar result = container.run(true);\n\t\t\tif (result!==undefined && result.then && result.catch && result.finally) {\n\t\t\t\tvar me = this;\n\t\t\t\tresult.then(function() {\n\t\t        \tExt.defer(me._run, 100, me, [containers]);\n\t\t\t\t})\n\t\t\t} else {\n\t        \tExt.defer(this._run, 100, this, [containers]);\n\t\t\t}\n    \t}\n\t},\n\t\n\tautoExecuteCells: function() {\n\t\tvar containers = [];\n    \tExt.Array.each(this.query(\"notebookcodeeditorwrapper\"), function(item) {\n\t\t\tif (item.getAutoExecute()) {\n\t\t\t\tcontainers.push(item);\n\t\t\t}\n\t\t});\n\t\tthis._run(containers);\n\t},\n    \n    loadFromUrl: function(url, run) {\n    \tvar me = this;\n    \t// load as string and not HTML in case it's an older JSON format\n    \tSpyral.Load.text(url).then(function(text) {me.loadFromString(text)})\n    },\n    \n    addText: function(block, order, cellId) {\n    \treturn this._add(block, order, 'notebooktexteditorwrapper', cellId);\n    },\n \n    addCode: function(block, order, cellId, config) {\n    \treturn this._add(block, order, 'notebookcodeeditorwrapper', cellId, {docs: this.spyralTernDocs});\n    },\n    \n    _add: function(block, order, xtype, cellId, config) {\n    \tif (Ext.isString(block)) {\n    \t\tblock = {input: block}\n    \t}\n    \tvar cells = this.getComponent(\"cells\");\n\t\torder = (typeof order === 'undefined') ? cells.items.length : order;\n\t\tcellId = (typeof cellId === 'undefined') ? Spyral.Util.id() : cellId;\n    \treturn cells.insert(order, Ext.apply(block, {\n    \t\txtype: xtype,\n    \t\torder: order,\n    \t\tcellId: cellId\n    \t}, config))\n    },\n    \n    updateMetadata: function() {\n    \tvar metadata = this.getMetadata();\n    \tthis.getComponent(\"spyralHeader\").update(this.getInnerHeaderHtml());\n    \tthis.getComponent(\"spyralFooter\").update(this.getInnerFooterHtml());\n    },\n    \n\tnotebookWrapperMoveUp: function(wrapper) {\n\t\tvar cells = this.getComponent(\"cells\");\n\t\tvar i = cells.items.findIndex('id', wrapper.id);\n\t\tif (i==0) {\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: this.localize('error'),\n\t\t\t\tmsg: this.localize('cannotMoveHigher'),\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.WARNING\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tcells.move(i, i-1);\n\t\t\tthis.redoOrder();\n\t\t}\n\t},\n\t\n\tnotebookWrapperMoveDown: function(wrapper) {\n\t\tvar cells = this.getComponent(\"cells\");\n\t\tvar i = cells.items.findIndex('id', wrapper.id);\n\t\tif (i==cells.items.getCount()-1) {\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: this.localize('error'),\n\t\t\t\tmsg: this.localize('cannotMoveLower'),\n\t\t\t\tbuttons: Ext.MessageBox.OK,\n\t\t\t\ticon: Ext.MessageBox.WARNING\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tcells.move(i, i+1);\n\t\t\tthis.redoOrder();\n\t\t}\n\t},\n\t\n\tnotebookWrapperRemove: function(wrapper) {\n\t\tvar cells = this.getComponent(\"cells\");\n\t\tcells.remove(wrapper);\n\t\tif (cells.items.length==0) {\n\t\t\tthis.addText(\"(Click to edit).\")\n\t\t}\n\t\tthis.redoOrder();\n\t},\n\t\n\tnotebookWrapperAdd: function(wrapper, e) {\n\t\tvar cells = this.getComponent(\"cells\");\n\t\tvar i = cells.items.findIndex('id', wrapper.id);\n\t\tvar xtype = wrapper.getXType(wrapper);\n\t\tvar cmp;\n\t\tif ((xtype=='notebooktexteditorwrapper' && !e.hasModifier()) || (xtype=='notebookcodeeditorwrapper' && e.hasModifier())) {\n\t\t\tcmp = this.addCode('',i+1);\n\t\t}\n\t\telse {\n\t\t\tcmp = this.addText('',i+1);\n\t\t}\n\t\tcmp.getTargetEl().scrollIntoView(this.getTargetEl(), null, true, true);\n\t\tthis.redoOrder();\n\t},\n\n    redoOrder: function() {\n    \tthis.query(\"notebookwrappercounter\").forEach(function(counter, i) {\n    \t\tcounter.setOrder(i);\n\t\t})\n\t\tthis.setIsEdited(true);\n    },\n    \n    setIsEdited: function(val) {\n    \t// TODO: perhaps setup autosave\n    \tif (this.getHeader()) {\n        \tthis.getHeader().down(\"#saveItTool\").setDisabled(val==false);\n        \tif (!val) {\n        \t\tthis.query(\"notebookcodeeditor\").forEach(function(editor) {\n        \t\t\teditor.setIsChangeRegistered(false);\n        \t\t})\n        \t\tthis.query(\"notebooktexteditor\").forEach(function(editor) {\n        \t\t\teditor.setIsEditRegistered(false);\n        \t\t})\n        \t}\n    \t}\n\t\tthis.callParent(arguments);\n    },\n    \n    setNotebookId: function (id) {\n    \tif (id) {\n    \t\t// update URL if needed\n    \t\tif (location.pathname.indexOf(\"/spyral/\"+id) === -1) {\n    \t\t\tlet url = this.getBaseUrl()+\"spyral/\"+id+\"/\";\n    \t\t\twindow.history.pushState({\n\t\t\t\t\turl: url\n\t\t\t\t}, \"Spyral Notebook: \"+id, url);\n    \t\t}\n    \t}\n\t\tthis.callParent(arguments);\n    },\n    \n    generateExportHtml: function() {\n    \tvar metadata = this.getMetadata();\n        var out = \"<!DOCTYPE HTML>\\n<html>\\n<head>\\n\\t<meta charset='UTF-8'>\\n\"+\n        \tmetadata.getHeaders();\n        var aceChromeEl = document.getElementById(\"ace-chrome\");\n        if (aceChromeEl) {out+=aceChromeEl.outerHTML+\"\\n\"}\n        out += document.getElementById(\"voyant-notebooks-styles\").outerHTML+\"\\n\"+\n\t        \"<script> // this script checks to see if embedded tools seem to be available\\n\"+\n\t    \t\"window.addEventListener('load', function() {\\n\"+\n\t    \t\t\"var hostnames = {}, warned = false;\\n\"+\n\t    \t\t\"document.querySelectorAll('iframe').forEach(function(iframeEl) {\\n\"+\n\t    \t\t\t\"let url = new URL(iframeEl.src);\\n\"+\n\t    \t\t\t\"if (!(url.hostname in hostnames) && !warned) {\\n\"+\n\t    \t\t\t\t\"hostnames[url.hostname] = true; // mark as fetched\\n\"+\n\t    \t\t\t\t\"fetch(url).catch(response => {\\n\"+\n\t    \t\t\t\t\t\"warned = true;\\n\"+\n\t    \t\t\t\t\t\"alert('This notebook seems to contain one ore more tools that may not be able to load. Possible reasons include a server no longer being accessible (especially if the notebook was generated from a local server), or because of security restrictions.'+url)\\n\"+\n\t    \t\t\t\t\"})\\n\"+\n\t    \t\t\t\"}\\n\"+\n\t    \t\t\"})\\n\"+\n\t    \t\"})\\n\"+\n\t    \t\"\u003c/script>\\n\"+\n        \t\"</head>\\n<body class='exported-notebook'>\"+\n        \tthis.getHeaderHtml()+\n        \t\"<article class='spyralArticle'>\";\n\t\tthis.getComponent(\"cells\").items.each(function(item, i) {\n    \t\tvar type = item.isXType('notebookcodeeditorwrapper') ? 'code' : 'text';\n    \t\tvar content = item.getContent();\n    \t\tvar counter = item.down(\"notebookwrappercounter\");\n\t\t\t// reminder that the parsing in of notebooks depends on the stability of this syntax\n    \t\tout+=\"<section id='\"+counter.name+\"' class='notebook-editor-wrapper \"+item.xtype+\"'>\\n\"+\n    \t\t\t\"<div class='notebookwrappercounter'>\"+counter.getTargetEl().dom.innerHTML+\"</div>\";\n    \t\tif (type==='code') {\n    \t\t\tvar mode = item.down(\"notebookcodeeditor\").getMode();\n\t\t\t\tmode = mode.substring(mode.lastIndexOf(\"/\")+1);\n\t\t\t\t\n\t\t\t\tvar autoexec = item.getAutoExecute() ? 'autoexec' : '';\n\t\t\t\t\n\t\t\t\tvar codeTextLayer = item.getTargetEl().query('.ace_text-layer')[0].cloneNode(true);\n\t\t\t\tcodeTextLayer.style.setProperty('height', 'auto'); // fix for very large height set by ace\n\t\t\t\t// reminder that the parsing in of notebooks depends on the stability of this syntax\n    \t\t\tout+=\"<div class='notebook-code-editor ace-chrome'>\\n\"+codeTextLayer.outerHTML+\"\\n</div>\\n\"+\n    \t\t\t\t\"<pre class='notebook-code-editor-raw editor-mode-\"+mode+\" \"+autoexec+\"'>\"+content.input+\"</pre>\\n\"+\n\t\t\t\t\t\"<div class='notebook-code-results'>\\n\"+content.output+\"\\n</div>\\n\";\n\t\t\t\tif (content.ui !== undefined) {\n\t\t\t\t\tout += \"<div class='notebook-code-ui'>\\n\"+content.ui+\"\\n</div>\\n\";\n\t\t\t\t}\n    \t\t} else {\n    \t\t\tout+=\"<div class='notebook-text-editor'>\"+content+\"</div>\\n\";\n    \t\t}\n    \t\tout+=\"</section>\\n\"\n    \t})\n        out += \"</article>\\n<footer class='spyral-footer'>\"+this.getInnerFooterHtml()+\"</footer></body>\\n</html>\";\n    \treturn out;\n    },\n    \n    getHeaderHtml: function() {\n    \treturn \"<header class='spyral-header'>\"+this.getInnerHeaderHtml()+\"</header>\\n\";\n    },\n    \n    getInnerHeaderHtml: function() {\n    \tlet html = \"\";\n    \tif (this.getMetadata().title) {\n        \thtml += \"<div class='title'>\"+this.getMetadata().title+\"</div>\";\n    \t}\n    \tif (this.getMetadata().author) {\n        \thtml += \"<div class='author'>\"+this.getMetadata().author+\"</div>\";\n    \t}\n    \treturn html;\n    },\n    \n    getInnerFooterHtml: function() {\n    \tvar text = \"\", metadata = this.getMetadata();\n    \tif (metadata.author || metadata.license) {\n        \tvar text = \"&copy;\";\n        \tif (metadata.author) {text+=\" \"+metadata.author;}\n        \tif (metadata.license) {text+=\" (\"+metadata.license+\")\";}\n    \t\ttext += \". \";\n    \t}\n    \tif (metadata.created || metadata.modified) {\n    \t\tvar created = metadata.shortDate(\"created\"), modified = metadata.shortDate(\"modified\");\n    \t\tif (created) {\n        \t\ttext += this.localize(\"created\")+\" \"+created+\".\"\n    \t\t}\n    \t\tif (modified && created!=modified) {\n        \t\ttext += this.localize(\"modified\")+\" \"+modified+\".\"\n    \t\t}\n    \t\t\n    \t}\n    \treturn text;\n    },\n    \n    getExtraExportItems: function() {\n    \treturn [{\n       \t\tinputValue: 'html',\n       \t\tboxLabel: this.localize('exportHtml')\n       \t},{\n       \t\tinputValue: 'htmlDownload',\n       \t\tboxLabel: '<a href=\"#\">'+this.localize('exportHtmlDownload')+'</a>',\n       \t\tlisteners: {\n       \t\t\tafterrender: function(cmp) {\n       \t\t    \tvar file, name = (this.getNotebookId() || \"spyral\")+ \".html\",\n       \t    \t\tdata = this.generateExportHtml(),\n       \t    \t\tproperties = {type: 'text/html'};\n\t       \t    \ttry {\n\t       \t    \t  file = new File([data], name, properties);\n\t       \t    \t} catch (e) {\n\t       \t    \t  file = new Blob([data], properties);\n\t       \t    \t}\n\t       \t    \t\n       \t    \t\tvar url = URL.createObjectURL(file);\n       \t    \t\tvar a = cmp.boxLabelEl.dom.querySelector(\"a\");\n       \t    \t\ta.setAttribute(\"download\", name);\n       \t    \t\ta.setAttribute(\"href\", url);\n       \t\t\t},\n       \t\t\tscope: this\n       \t\t},\n       \t\thandler: function(cmp) {\n       \t\t\tcmp.boxLabelEl.dom.querySelector(\"a\").click();\n       \t\t\tcmp.up(\"window\").close();\n       \t\t}\n       \t}]\n    },\n    \n    exportHtml: function() {\n    \tvar out = this.generateExportHtml();\n        var myWindow = window.open();\n        myWindow.document.write(out);\n        myWindow.document.close();\n        myWindow.focus();\n    },\n\t\n\t// TODO not currently being used\n    exportHtmlDownload: function() {\n    \t// https://stackoverflow.com/questions/2897619/using-html5-javascript-to-generate-and-save-a-file\n    \tvar file,\n    \t\tdata = this.generateExportHtml(),\n    \t\tproperties = {type: 'text/plain'}; // Specify the file's mime-type.\n    \ttry {\n    \t  file = new File([data], \"files.txt\", properties);\n    \t} catch (e) {\n    \t  file = new Blob([data], properties);\n    \t}\n    \tvar url = URL.createObjectURL(file);\n    \tthis.getApplication().openUrl(url)\n    },\n    \n\tgetExportUrl: function(asTool) {\n\t\treturn location.href; // we just provide the current URL\n\t},\n\n    showMetadataEditor: function() {\n    \tvar me = this;\n    \tvar metadata = this.getMetadata();\n\t\tExt.create('Ext.window.Window', {\n    \t    title: this.localize('metadataEditor'),\n    \t    autoScroll: true,\n    \t    items: [{\n    \t    \txtype: 'form',\n    \t    \titems: {\n    \t    \t    bodyPadding: 5,\n    \t    \t    width: 600,\n\n    \t    \t    // Fields will be arranged vertically, stretched to full width\n    \t    \t    layout: 'anchor',\n    \t    \t    defaults: {\n    \t    \t        anchor: '100%',\n    \t    \t        labelAlign: \"right\"\n    \t    \t    },\n\n    \t    \t    // The fields\n    \t    \t    defaultType: 'textfield',\n    \t    \t    items: [{\n    \t    \t        fieldLabel: this.localize(\"metadataTitle\"),\n    \t    \t        xtype: 'htmleditor',\n    \t    \t        name: 'title',\n    \t    \t        value: metadata.title,\n    \t    \t        height: 100,\n    \t    \t        enableAlignments : false,\n    \t    \t        enableColors : false,\n    \t    \t        enableFont : false,\n    \t    \t        enableFontSize : false,\n    \t    \t        enableLinks : false,\n    \t    \t        enableLists : false\n    \t    \t    },{\n    \t    \t        fieldLabel: this.localize(\"metadataAuthor\"),\n    \t    \t        name: 'author',\n    \t    \t        value: metadata.author\n    \t    \t    },{\n    \t    \t        fieldLabel: this.localize(\"metadataKeywords\"),\n    \t    \t        name: 'keywords',\n    \t    \t        value: metadata.keywords\n    \t    \t    },{\n    \t    \t    \txtype: 'htmleditor',\n    \t    \t        fieldLabel: this.localize(\"metadataDescription\"),\n    \t    \t        name: 'description',\n    \t    \t        height: 100,\n    \t    \t        value: metadata.description,\n    \t    \t        enableAlignments : false,\n    \t    \t        enableColors : false,\n    \t    \t        enableFont : false\n    \t    \t    },{\n    \t    \t    \txtype: 'combo',\n    \t    \t        fieldLabel: this.localize(\"metadataLicense\"),\n    \t    \t        name: 'license',\n    \t    \t        value: metadata.license || \"Creative Commons Attribution (CC BY)\",\n    \t    \t        store: {\n    \t    \t        \tfields: ['text'],\n    \t    \t        \tdata: [\n    \t        \t        \t{\"text\": \"Apache License 2.0\"},\n    \t        \t        \t{\"text\": \"BSD 3-Clause \\\"New\\\" or \\\"Revised\\\" license\"},\n    \t        \t        \t{\"text\": \"BSD 2-Clause \\\"Simplified\\\" or \\\"FreeBSD\\\" license\"},\n    \t        \t        \t{\"text\": \"Creative Commons Attribution (CC BY)\"},\n    \t        \t        \t{\"text\": \"Creative Commons Attribution-ShareAlike (CC BY-SA)\"},\n    \t        \t        \t{\"text\": \"Creative Commons Zero (CC0)\"},\n    \t        \t        \t{\"text\": \"GNU General Public License (GPL)\"},\n    \t        \t        \t{\"text\": \"GNU Library or \\\"Lesser\\\" General Public License (LGPL)\"},\n    \t        \t        \t{\"text\": \"MIT license\"},\n    \t        \t        \t{\"text\": \"Mozilla Public License 2.0\"},\n    \t        \t        \t{\"text\": \"Common Development and Distribution License\"},\n    \t        \t        \t{\"text\": \"Eclipse Public License\"}\n    \t        \t        ]\n    \t    \t        }\n    \t    \t    },{\n    \t    \t    \txtype: 'combo',\n    \t    \t    \tname: 'language',\n    \t    \t    \tvalue: metadata.language || \"English\",\n    \t    \t        fieldLabel: this.localize(\"metadataLanguage\"),\n    \t    \t        store: {\n    \t    \t        \tfields: ['text'],\n    \t    \t        \tdata: [\n    \t    \t        \t\t{\"text\": \"Bengali\"},\n    \t    \t        \t\t{\"text\": \"Bhojpuri\"},\n    \t    \t        \t\t{\"text\": \"Egyptian Arabic\"},\n    \t    \t        \t\t{\"text\": \"English\"},\n    \t    \t        \t\t{\"text\": \"French\"},\n    \t    \t        \t\t{\"text\": \"German\"},\n    \t    \t        \t\t{\"text\": \"Gujarati\"},\n    \t    \t        \t\t{\"text\": \"Hausa\"},\n    \t    \t        \t\t{\"text\": \"Hindi\"},\n    \t    \t        \t\t{\"text\": \"Indonesian\"},\n    \t    \t        \t\t{\"text\": \"Italian\"},\n    \t    \t        \t\t{\"text\": \"Japanese\"},\n    \t    \t        \t\t{\"text\": \"Javanese\"},\n    \t    \t        \t\t{\"text\": \"Kannada\"},\n    \t    \t        \t\t{\"text\": \"Korean\"},\n    \t    \t        \t\t{\"text\": \"Mandarin\"},\n    \t    \t        \t\t{\"text\": \"Marathi\"},\n    \t    \t        \t\t{\"text\": \"Persian\"},\n    \t    \t        \t\t{\"text\": \"Portuguese\"},\n    \t    \t        \t\t{\"text\": \"Russian\"},\n    \t    \t        \t\t{\"text\": \"Southern Min\"},\n    \t    \t        \t\t{\"text\": \"Spanish\"},\n    \t    \t        \t\t{\"text\": \"Standard Arabic\"},\n    \t    \t        \t\t{\"text\": \"Swahili\"},\n    \t    \t        \t\t{\"text\": \"Tamil\"},\n    \t    \t        \t\t{\"text\": \"Telugu\"},\n    \t    \t        \t\t{\"text\": \"Thai\"},\n    \t    \t        \t\t{\"text\": \"Turkish\"},\n    \t    \t        \t\t{\"text\": \"Urdu\"},\n    \t    \t        \t\t{\"text\": \"Vietnamese\"},\n    \t    \t        \t\t{\"text\": \"Western Punjabi\"},\n    \t    \t        \t\t{\"text\": \"Wu Chinese\"},\n    \t    \t        \t\t{\"text\": \"Yue Chinese\"}\n    \t        \t        ]\n    \t    \t        }\n    \t    \t    }]\n    \t    \t\t\n    \t    \t}\n    \t    }],\n\n    \t    \n    \t    // Reset and Submit buttons\n    \t    buttons: [{\n    \t        text: this.localize('metadataCancel'),\n\t            ui: 'default-toolbar',\n    \t        handler: function() {\n    \t            this.up('window').close();\n    \t        }\n    \t    },{\n    \t        text: this.localize('metadataReset'),\n\t            ui: 'default-toolbar',\n    \t        handler: function() {\n    \t            this.up('window').down('form').getForm().reset();\n    \t        }\n    \t    }, \" \", {\n    \t        text: this.localize('metadataSave'),\n    \t        handler: function() {\n    \t            var form = this.up('window').down('form').getForm();\n    \t            metadata.set(form.getValues())\n    \t            me.updateMetadata();\n    \t            this.up('window').close();\n    \t        }\n    \t    }]\n    \t    \n    \t}).show();\n\t},\n\t\n\tshowOptionsClick: function(panel) {\n\t\tlet me = panel;\n\t\tif (me.optionsWin === undefined) {\n\t\t\tme.optionsWin = Ext.create('Ext.window.Window', {\n\t\t\t\ttitle: me.localize('gearWinTitle'),\n    \t\t\tcloseAction: 'hide',\n\t\t\t\tlayout: 'fit',\n\t\t\t\twidth: 400,\n\t\t\t\theight: 300,\n\t\t\t\tbodyPadding: 10,\n\t\t\t\titems: {\n\t\t\t\t\txtype: 'form',\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'radiogroup',\n\t\t\t\t\t\tfieldLabel: 'Storage Solution',\n\t\t\t\t\t\tlabelAlign: 'left',\n\t\t\t\t\t\tlayout: 'vbox',\n\t\t\t\t\t\titems: [{\n\t\t\t\t\t\t\tboxLabel: 'Voyant',\n\t\t\t\t\t\t\tname: 'storageSolution',\n\t\t\t\t\t\t\tinputValue: 'voyant',\n\t\t\t\t\t\t\tchecked: me.getStorageSolution() === 'voyant'\n\t\t\t\t\t\t},{\n\t\t\t\t\t\t\tboxLabel: 'GitHub',\n\t\t\t\t\t\t\tname: 'storageSolution',\n\t\t\t\t\t\t\tinputValue: 'github',\n\t\t\t\t\t\t\tchecked: me.getStorageSolution() === 'github'\n\t\t\t\t\t\t}]\n\t\t\t\t\t}]\n\t\t\t\t},\n    \t\t\tbuttons: [{\n    \t\t\t\ttext: me.localize('ok'),\n    \t\t\t\thandler: function(button, event) {\n    \t\t\t\t\tvar win = button.findParentByType('window');\n    \t\t\t\t\tvar form = win.down('form');\n    \t\t\t\t\tif (form.isValid()) {\n        \t\t\t\t\tvar params = form.getValues();\n\t\t\t\t\t\t\tme.setStorageSolution(params.storageSolution);\n        \t\t\t\t\twin.hide();\n    \t\t\t\t\t}\n    \t\t\t\t\telse {\n    \t\t\t\t\t\tme.showError({\n    \t\t\t\t\t\t\tmessage: me.localize(\"invalidForm\")\n    \t\t\t\t\t\t})\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t},{\n    \t\t\t\ttext: me.localize('cancel'),\n    \t\t\t\thandler: function(button, event) {\n    \t\t\t\t\tbutton.findParentByType('window').hide();\n    \t\t\t\t}\n    \t\t\t}]\n\t\t\t});\n\t\t}\n\t\tme.optionsWin.show();\n\t}\n});","Ext.define('Voyant.VoyantApp', {\n\t\n    extend: 'Ext.app.Application',\n\tmixins: ['Voyant.util.Deferrable','Voyant.util.Localization','Voyant.util.Api','Voyant.util.Colors'],\n\trequires: ['Voyant.util.ResponseError'],\n    \n    name: 'VoyantApp',\n    \n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n\t\t\tpalette: 'default',\n\t\t\tcategories: 'auto',\n    \t\tlang: undefined,\n    \t\tdebug: undefined\n    \t}\n    },\n    \n    config: {\n    \tbaseUrl: undefined,\n\t\ttromboneUrl: undefined,\n\t\tcategoriesManager: undefined\n    },\n    \n    constructor: function(config) {\n    \tthis.setBaseUrl(this.config.baseUrl);\n    \t\n    \t// set the Trombone URL from the baseURL // TODO: maybe allow this to be overridden\n\t\tthis.setTromboneUrl(this.config.baseUrl+'trombone');\n\t\t\n    \t// set the application for the Corpus so that we can use a simple constructor\n\t\tVoyant.application = this;\n\t\t\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n\n\t\tthis.mixins['Voyant.util.Colors'].constructor.apply(this, arguments);\n\n\t\tthis.setCategoriesManager(new Spyral.Categories());\n\t\t// inheritance/mixin hack\n\t\t// var catProps = Object.getOwnPropertyNames(categories).concat(Object.getOwnPropertyNames(Object.getPrototypeOf(categories)));\n\t\t// catProps.forEach(function(propName) {\n\t\t// \tif (this[propName] === undefined) {\n\t\t// \t\tif (typeof categories[propName] === 'function') {\n\t\t// \t\t\tthis[propName] = categories[propName].bind(this);\n\t\t// \t\t} else {\n\t\t// \t\t\tthis[propName] = categories[propName];\n\t\t// \t\t}\n\t\t// \t}\n\t\t// }, this)\n\t\t\n\t\tthis.getCategoriesManager().addFeature('color');\n\t\tthis.getCategoriesManager().addFeature('font', '\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif');\n\t\t\n\t\t// call the parent constructor\n\t\tthis.callParent(arguments);\n\t\t\n\t\t// override Voyant.util.Colors methods to add palette api param\n\t\tvar _getColor = this.getColor;\n\t\tthis.getColor = function(index, returnHex) {\n\t\t\treturn _getColor.apply(this, [this.getApiParam('palette'), index, returnHex]);\n\t\t}\n\t\tvar _getColorForTerm = this.getColorForTerm;\n\t\tthis.getColorForTerm = function(term, returnHex) {\n\t\t\treturn _getColorForTerm.apply(this, [this.getApiParam('palette'), term, returnHex]);\n\t\t}\n    },\n    getBaseUrl: function() {\n    \tvar baseUrl = this.callParent();\n    \treturn baseUrl.indexOf(\"//\")==0 ? location.protocol+baseUrl : baseUrl;\n    },\n    \n    getBaseUrlFull: function() {\n    \treturn window.location.origin+this.getBaseUrl(); // maybe doesn't work in all browsers?\n    },\n\n    getRelativeUrl: function() {\n    \tvar url = window.location.pathname.substring(this.getBaseUrl().length);\n    \tvar relative = \"\";\n    \tfor (var i=0, len=url.split(\"/\").length-1; i<len; i++) {\n    \t\trelative+=\"../\"\n    \t}\n    \treturn relative;\n    },\n    \n    getTools: function() {\n    \treturn [{type: 'maximize'},{type: 'help'}]\n    },\n    \n    launch: function() {\n    \tExt.tip.QuickTipManager.init();\n    \tExt.apply(Ext.tip.QuickTipManager.getQuickTip(), {\n    \t    showDelay: 50 // shorten the delay before showing\n    \t});\n    \t\n\t\tthis.callParent(arguments);\n    },\n    \n    tromboneCall: function(config) {\n    \tvar config = config ? config : {};\n    \tExt.applyIf(config, {\n    \t\turl: this.getTromboneUrl()\n    \t});\n    \tif (!config.success && !config.failure && !config.callback) {\n        \tExt.applyIf(config, {\n        \t\turl: this.getTromboneUrl(),\n        \t    scope: this,\n        \t    callback: function(response, success, options) {\n        \t    \tthis.dispatchEvent(config.tool+\"Loaded\", response, success, options)\n        \t    }\n        \t});\n    \t};\n    \tExt.Ajax.request(config);\n    },\n    \n    getViewport: function() {\n    \treturn Ext.ComponentQuery.query('viewport')[0];\n    },\n\n    dispatchEvent: function(eventName, src) {\n    \tvar viewport = this.getViewport();\n\t\tvar panels = viewport.query(\"panel,chart\");\n\t\tvar isHeard = false;\n\n\t\t// tell the app\n\t\tif (this.hasListener && this.hasListener(eventName)) {\n\t\t\tthis.fireEvent.apply(this, arguments);\n\t\t\tisHeard = true\n\t\t}\n\t\t\n\t\t// tell the panels, except the current one\n\t\tfor (var i=0; i<panels.length; i++) {\n\t\t\tif (panels[i].hasListener && panels[i].hasListener(eventName)) {\n\t\t\t\tif (src && src.getId && panels[i].getId && src.getId()==panels[i].getId()) {\n\t\t\t\t\tcontinue; // don't send to self\n\t\t\t\t}\n\t\t\t\tisHeard = true;\n\t\t\t\tpanels[i].fireEvent.apply(panels[i], arguments);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!isHeard) {\n\t\t\t// let the application know that we have an unhandledEvent\n\t\t\tvar args = [\"unhandledEvent\", src, eventName];\n\t\t\tfor (var i=2; i<arguments.length; i++) {args.push(arguments[i])}\n\t\t\tthis.fireEvent.apply(this, args);\n\t\t}\n    },\n    \n\tshowResponseError: function(config, response) {\n\t\tthis.showError(Ext.create(\"Voyant.util.ResponseError\", {msg: (Ext.isString(config) ? config : config.msg), response: response}))\n\t},\n\t\n\tshowError: function(config, response) {\n\t\tif (config instanceof Voyant.util.ResponseError) {\n\t\t\tconfig = {\n\t\t\t\tmessage: config.getMsg()+\"<p class='error'>\\n\"+config.getError()+\" \u2026 \"+\n\t\t\t\t\t\"<a href='#' onclick=\\\"window.open('').document.write(unescape('<pre>\"+escape(config.getDetails())+\"</pre>')); return false;\\\">more</a></p>\"\n\t\t\t}\n\t\t} else {\n\t\t\tif (Ext.isString(config)) {\n\t\t\t\tconfig = {message: config}\n\t\t\t} else if (Ext.isObject(config)) {\n\t\t\t\tif (config.responseText) {\n\t\t\t\t\t// rebundle as error (without nice message)\n\t\t\t\t\treturn this.showResponseError(config.statusText, config);\n\t\t\t\t} else if (config.statusText) {\n\t\t\t\t\treturn this.showResponseError(config.statusText, config)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// maybe handle other forms\n\t\t}\n\t\t\n\n\t\tExt.applyIf(config, {\n\t\t\ttitle: this.localize(\"error\"),\n\t\t    buttons: Ext.Msg.OK,\n\t\t    icon: Ext.MessageBox.ERROR,\n\t\t    autoScroll: true\n\t\t})\n\t\tExt.Msg.show(config);\n\t},\n\t\n\tgetToolConfigFromToolXtype: function(xtype) {\n\t\tcls = Ext.ClassManager.getByAlias(\"widget.\"+xtype);\t\t\n\t\treturn {\n\t\t\txtype: xtype,\n\t\t\ttitle: this._localizeClass(cls, \"title\"),\n\t\t\ttooltip: { // this needs to be an object for compatibility (other configs can be changed)\n\t\t\t\ttext: this._localizeClass(cls, \"helpTip\")\n\t\t\t},\n\t\t\tglyph: cls && cls.glyph ? cls.glyph : 'xf12e@FontAwesome'\n\t\t};\n\t},\n\n\t/**\n\t * Opens a URL in a new window (handling the case when popup windows aren't allowed).\n\t * @param {String} url The URL to open.\n\t * @private\n\t */\n\topenUrl: function(url) {\n\t\tvar win = window.open(url);\n\t\tif (!win) { // popup blocked\n\t\t\tExt.Msg.show({\n\t\t\t\ttitle: \"Popup Blocked\",\n\t\t\t\tbuttonText: {ok: \"Close\"},\n\t\t\t\ticon: Ext.MessageBox.INFO,\n\t\t\t\tmessage: \"A popup window was blocked. <a href='\"+url+\"' target='_blank' class='link'>Click here</a> to open the new window.\",\n\t\t\t\tbuttons: Ext.Msg.OK\n\t\t\t});\n\t\t}\n\t}\n\n    \n});","Ext.define('Voyant.VoyantCorpusApp', {\n\t\n    extend: 'Voyant.VoyantApp',\n    \n    name: 'VoyantCorpusApp',\n\n    requires: ['Voyant.panel.CorpusSet','Voyant.data.model.Corpus','Voyant.panel.VoyantHeader', 'Voyant.panel.VoyantFooter', 'Voyant.panel.CorpusCreator', 'Voyant.panel.Cirrus', 'Voyant.panel.Summary', 'Voyant.panel.DreamScape', 'Voyant.panel.CorpusTerms', 'Voyant.panel.Reader', 'Voyant.panel.Documents', 'Voyant.panel.Trends', 'Voyant.panel.Contexts', 'Voyant.panel.DocumentTerms','Voyant.panel.CorpusCollocates','Voyant.panel.CollocatesGraph','Voyant.panel.Phrases','Voyant.panel.ScatterPlot','Voyant.panel.TopicContexts','Voyant.panel.TermsRadio','Voyant.panel.TermsBerry'],\n    \n    statics: {\n    \ti18n: {\n    \t},\n    \tapi: {\n    \t\ttoolFlow: undefined\n    \t}\n    },\n    \n\tconstructor: function() {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n        this.callParent(arguments);\n\t},\n\t\n    config: {\n    \tcorpus: undefined,\n    \tcorpusAccess: undefined,\n    \tmoreTools: [{\n\t\t\ti18n: 'moreToolsScaleCorpus',\n\t\t\tglyph: 'xf065@FontAwesome',\n\t\t\titems: ['cirrus','corpusterms','bubblelines','correlations','corpuscollocates','dreamscape','loom','mandala','microsearch','streamgraph','phrases','documents','summary','trends','scatterplot','termsradio','topics','veliza','wordtree']\n    \t},{\n\t\t\ti18n: 'moreToolsScaleDocument',\n\t\t\tglyph: 'xf066@FontAwesome',\n\t\t\titems: ['bubbles','cirrus','contexts','documentterms','reader','textualarc','trends','knots','topics']\n    \t},{\n\t\t\ti18n: 'moreToolsTypeViz',\n\t\t\tglyph: 'xf06e@FontAwesome',\n\t\t\titems: ['cirrus','bubblelines','bubbles','collocatesgraph','dreamscape','loom','knots','mandala','microsearch','streamgraph','scatterplot','textualarc','trends','termsberry','termsradio','wordtree']\n\t\t},{\n\t\t\ti18n: 'moreToolsTypeGrid',\n\t\t\tglyph: 'xf0ce@FontAwesome',\n\t\t\titems: ['corpusterms','corpuscollocates','correlations','phrases','contexts','documentterms','documents','topics']\n\t\t},{\n\t\t\t\n\t\t\ti18n: 'moreToolsTypeOther',\n\t\t\tglyph: 'xf035@FontAwesome',\n\t\t\titems: ['reader','summary','veliza']\n    \t}]\n    },\n    \n    launch: function(config) {\n\t\tthis.callParent(arguments);\n\t\t\n    \tif (this.hasQueryToLoad()) {\n        \tvar queryParams = Ext.Object.fromQueryString(document.location.search);\n        \tif (!queryParams.corpus && this.getCorpusId && this.getCorpusId()) {\n        \t\tqueryParams.corpus = this.getCorpusId();\n        \t}\n        \tif (config && config.useCache) { // for large corpora\n        \t\tqueryParams.useCache = config.useCache;\n        \t}\n        \tthis.loadCorpusFromParams(queryParams);\n        \t\n        \tif (queryParams.palette) {\n        \t\tif (queryParams.palette.indexOf(\",\")>-1) { // treat as inline\n        \t    \tvar palette = Ext.decode(queryParams.palette);\n        \t    \tthis.addColorPalette(queryParams.palette, palette);\n        \t\t} else {\n            \t\tthis.loadColorPaletteForCorpus(queryParams.corpus, queryParams.palette);\n        \t\t}\n        \t}\n    \t} else {\n    \t\tvar viewport = this.getViewport();\n    \t\tif (viewport) {\n    \t\t\tvar corpuscreator = viewport.down(\"corpuscreator\")\n    \t\t\tif (corpuscreator) {\n    \t\t\t\tvar toast = corpuscreator.toastInfo({\n    \t\t\t\t\thtml: this.localize('didYouKnowText'),\n    \t\t\t\t\ttitle: this.localize('didYouKnow'),\n    \t\t\t\t\tanchor: corpuscreator.down(\"textareafield\"),\n    \t\t\t\t\talign: 'tr',\n    \t\t\t\t\tlisteners: {\n    \t\t\t\t\t\tbeforeclose: {\n    \t\t\t\t\t\t\tfn: function() {\n    \t\t\t\t\t\t\t\tthis.getHeader().getTools().forEach(function(tool) {\n    \t\t\t\t\t\t\t\t\tif (tool.type==\"gear\" || tool.type=='help') {\n    \t\t\t\t\t\t\t\t\t\ttool.getEl().frame(\"#ff0000\", 1, { duration: 3000 })\n    \t\t\t\t\t\t\t\t\t}\n    \t\t\t\t\t\t\t\t});\n    \t\t\t\t\t\t\t},\n    \t\t\t\t\t\t\tscope: corpuscreator\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t});\n    \t\t\t}\n    \t\t}\n    \t}\n    },\n    \n    loadCorpusFromParams: function(params) {\n\t\tvar me = this;\n\t\tvar view = me.getViewport()\n\t\tview.mask(this.localize(\"fetchingCorpus\"));\n\t\tif (params.archive) { // fix a few URLs we know about\n\t\t\tif (Ext.isString(params.archive)) {params.archive=[params.archive]}\n\t\t\tparams.archive = params.archive.map(function(archive) {\n\t\t\t\treturn archive.replace('/blogs.sub.uni-hamburg.de/hup/lhn/', '/wikis.sub.uni-hamburg.de/lhn/index.php/')\n\t\t\t\t\t.replace('/hup.sub.uni-hamburg.de/', '/wikis.sub.uni-hamburg.de/')\n\t\t\t})\n\t\t}\n\t\t\n\t\tthis.validateCorpusLoadParams(params);\n\n\t\tnew Voyant.data.model.Corpus(params).then(function(corpus) {\n\t\t\tview.unmask();\n\t\t\tme.setCorpus(corpus);\n\t\t\tif (me.validateCorpusAccess()) {\n\t\t\t\tme.dispatchEvent('loadedCorpus', this, corpus);\n\t\t\t}\n\t\t}).otherwise(function() {\n\t\t\tview.unmask();\n\t\t})\n    },\n    \n    validateCorpusLoadParams: function(params) {\n    \t// leave untouched by default, this can be overridden\n    },\n    \n    validateCorpusAccess: function() {\n\t\tvar me = this, view = me.getViewport(), corpus = this.getCorpus();\n\t\tif (corpus && corpus.requiresPassword() && !me.getViewport().query(\"panel\").every(function(panel) {\n\t\t\treturn !panel.isConsumptive\n\t\t})) {\n\t\t\tvar noPasswordAccess = corpus.getNoPasswordAccess();\n\t\t\tvar passWin = Ext.create('Ext.window.Window', {\n\t            title: me.localize('passwordRequiredTitle'),\n\t\t\t    layout: 'fit',\n\t\t\t    items: {\n\t\t\t    \tpadding: 10,\n\t                flex: 1,\n\t                width: 300,\n\t                layout: {\n\t                    type: 'vbox',\n\t                    align: 'stretch'\n\t                },\n\t                items: [\n\t                    {\n\t                        html: '<p>'+me.localize('passwordRequiredMessage')+'</p>' + (noPasswordAccess=='NONCONSUMPTIVE' ? '<p>'+me.localize('nonConsumptiveMessage')+\"</p>\" : \"\")+'</p>'\n\t                    },{\n\t                    \txtype: 'textfield',\n\t                    \tfieldLabel: me.localize('password')\n\t                    }\n\t                ],\n\t                bbar: {\n\t//                \tui: 'footer',\n\t                \tlayout: {pack: 'center'},\n\t                \titems: [{\n\t                    \ttext: me.localize('passwordValidateButton'),\n\t                    \tui: 'default',\n\t                    \thandler: function() {\n\t                    \t\tvar password = passWin.query(\"textfield\")[0].getValue().trim();\n\t                    \t\tif (password.length==0) {\n\t                    \t\t\tme.showError({\n\t                    \t\t\t\tmessage: me.localize('noPasswordGiven')\n\t                    \t\t\t})\n\t                    \t\t\treturn;\n\t                    \t\t}\n\t                    \t\tpassWin.mask();\n\t                    \t\tExt.Ajax.request({\n\t                    \t\t\t  url: me.getTromboneUrl(),\n\t                    \t\t\t  params: {\n\t                    \t\t\t\t  corpus: corpus.getId(),\n\t                    \t\t\t\t  passwordForSession: password\n\t                    \t\t\t  },\n\t                    \t\t\t  method: 'POST',\n\t                    \t\t\t  success: function(result, request) {\n\t                    \t\t\t\t  passWin.unmask();\n\t                    \t\t\t\t  var access = result.responseText;\n\t                    \t\t\t\t  if (access==\"ADMIN\" || access==\"ACCESS\") {\n\t\t\t                    \t\t\t    passWin.close();\n\t\t\t                    \t\t\t    view.unmask();\n\t\t\t                    \t\t\t    me.setCorpusAccess(access);\n\t\t\t\t\t            \t\t\t\tme.dispatchEvent('loadedCorpus', this, corpus);\n\t                    \t\t\t\t  }\n\t                    \t\t\t\t  else {\n\t  \t\t                    \t\t\tme.showError({\n\t\t\t                    \t\t\t\tmessage: me.localize('badPassword')\n\t\t\t                    \t\t\t})\n\t                    \t\t\t\t  }\n\t                    \t\t\t  },\n\t                    \t\t\t  failure: function(result, request) {\n\t                    \t\t\t\t  passWin.unmask();\n\t  \t\t                    \t\t\tme.showError({\n\t\t\t                    \t\t\t\tmessage: me.localize('passwordValidationError')\n\t\t\t                    \t\t\t})\n\t                    \t\t\t  } \n\t                    \t\t});\n\t                    \t}\n\t                    },{\n\t                    \ttext: me.localize('nonConsumptiveButton'),\n\t                    \thidden: corpus.getNoPasswordAccess()=='NONE',\n\t                    \thandler: function() {\n\t                    \t\tpassWin.mask();\n\t                    \t\tExt.Ajax.request({\n\t                    \t\t\t  url: me.getTromboneUrl(),\n\t                    \t\t\t  params: {\n\t                    \t\t\t\t  corpus: corpus.getId(),\n\t                    \t\t\t\t  passwordForSessionRemove: true\n\t                    \t\t\t  },\n\t                    \t\t\t  method: 'POST',\n\t                    \t\t\t  callback: function(result, request) { // do this even if request fails\n\t                    \t\t\t\t  passWin.unmask();\n\t                    \t\t\t\t  passWin.close();\n\t                    \t\t\t\t  view.unmask();\n\t                    \t\t\t\t  me.dispatchEvent('loadedCorpus', me, corpus);\n\t                    \t\t\t  }\n\t                    \t\t});\n\t                    \t}\n\t                    }]\n\t                }\n\t            }\n\t\t\t}).show();\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true\n\t\t}\n    },\n    \n    hasQueryToLoad: function(params) {\n    \tif (!params) {\n    \t\tparams = Ext.Object.fromQueryString(document.location.search);\n    \t}\n    \treturn params.corpus || params.input || (this.getCorpusId && this.getCorpusId()); // TODO: should this include \"archive\" from V1?\n    },\n    \n    loadColorPaletteForCorpus: function(corpusId, paletteId) {\n\t\tExt.Ajax.request({\n    \t    url: this.getTromboneUrl(),\n    \t    params: {\n        \t\ttool: 'resource.StoredResource',\n        \t\tretrieveResourceId: paletteId,\n    \t\t\tcorpus: corpusId\n    \t    },\n    \t    success: function(response, req) {\n    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n    \t    \tvar value = json.storedResource.resource;\n    \t    \tvar palette = Ext.decode(value);\n    \t    \tthis.addColorPalette(paletteId, palette);\n    \t    },\n    \t    failure: function(response) {\n    \t    \tthis.setApiParam('palette', undefined);\n    \t    },\n    \t    scope: this\n    \t});\n\t},\n\t\n\tloadCategoryData: function(id) {\n\t\tvar dfd = new Ext.Deferred();\n\n\t\tExt.Ajax.request({\n\t\t\turl: Voyant.application.getTromboneUrl(),\n\t\t\tparams: {\n\t\t\t\ttool: 'resource.StoredCategories',\n\t\t\t\tretrieveResourceId: id,\n\t\t\t\tfailQuietly: false,\n\t\t\t\tcorpus: this.getCorpus() ? this.getCorpus().getId() : undefined\n\t\t\t}\n\t\t}).then(function(response) {\n\t\t\tvar json = Ext.decode(response.responseText);\n\t\t\tvar id = json.storedCategories.id;\n\t\t\tvar value = json.storedCategories.resource;\n\t\t\tif (value.length === 0) {\n\t\t\t\tdfd.reject();\n\t\t\t} else {\n\t\t\t\tvalue = Ext.decode(value);\n\t\t\t\t\n\t\t\t\tthis.getCategoriesManager()._categories = value.categories;\n\t\t\t\tthis.getCategoriesManager()._features = value.features;\n\t\t\t\t\n\t\t\t\tdfd.resolve(value);\n\t\t\t}\n\t\t}, function() {\n\t\t\tthis.showError(\"Unable to load categories data: \"+id);\n\t\t\tdfd.reject();\n\t\t}, null, this);\n\t\t\n\t\treturn dfd.promise;\n\t},\n\n\tsaveCategoryData: function(data) {\n\t\tvar dfd = new Ext.Deferred();\n\t\t\n\t\tvar dataString = Ext.encode(data);\n\t\tExt.Ajax.request({\n\t\t\turl: Voyant.application.getTromboneUrl(),\n\t\t\tparams: {\n\t\t\t\ttool: 'resource.StoredResource',\n\t\t\t\tstoreResource: dataString\n\t\t\t}\n\t\t}).then(function(response) {\n\t\t\tvar json = Ext.util.JSON.decode(response.responseText);\n\t\t\tvar id = json.storedResource.id;\n\t\t\tdfd.resolve(id);\n\t\t}, function(response) {\n\t\t\tdfd.reject();\n\t\t});\n\t\t\n\t\treturn dfd.promise;\n\t},\n    \n    listeners: {\n    \tloadedCorpus: function(src, corpus) {\n    \t\tthis.setCorpus(corpus);\n    \t\t\n    \t\t// let's load the categories based on the corpus\n        \tif (this.getApiParam(\"categories\")) {\n\t\t\t\tthis.loadCategoryData(this.getApiParam(\"categories\")).then(function(a,b,c) {\n\t\t\t\t\t// assign colors\n\t\t\t\t\tfor (var category in this.getCategoriesManager().getCategories()) {\n\t\t\t\t\t\tvar color = this.getCategoriesManager().getCategoryFeature(category, 'color');\n\t\t\t\t\t\tif (color !== undefined) {\n\t\t\t\t\t\t\tvar rgb = this.hexToRgb(color);\n\t\t\t\t\t\t\tvar terms = this.getCategoriesManager().getCategoryTerms(category);\n\t\t\t\t\t\t\tfor (var i = 0; i < terms.length; i++) {\n\t\t\t\t\t\t\t\tthis.setColorForTerm(terms[i], rgb);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, null, null, this)\n        \t}    \t\n\n    \t\t\n    \t\tthis.on(\"unhandledEvent\", function(src, eventName, data) {\n\t\t\t\tvar url = this.getBaseUrl() + '?corpus='+corpus.getAliasOrId();\n\t\t\t\tvar api = this.getModifiedApiParams() || {}; // use application, not tool\n\t\t\t\tdelete api.view; // make sure we show default view\n\t\t\t\tif (eventName=='termsClicked') {\n\t\t\t\t\t// data can be a simple array of terms or an array of term objects\n\t\t\t\t\tif (Ext.isArray(data) && \"term\" in data[0] && \"docIndex\" in data[0]) {\n\t\t\t\t\t\tlet termsObj = {};\n\t\t\t\t\t\tlet docIndObj = {};\n\t\t\t\t\t\tdata.forEach(function(datum) {\n\t\t\t\t\t\t\ttermsObj[datum.term]=true;\n\t\t\t\t\t\t\tdocIndObj[datum.docIndex]=true;\n\t\t\t\t\t\t})\n\t\t\t\t\t\tapi.query=Object.keys(termsObj);\n\t\t\t\t\t\tapi.docIndex=Object.keys(docIndObj);\n\t\t\t\t\t} else {\t\t\t\t\t\t\n\t\t\t\t\t\tapi.query=data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (eventName=='documentsClicked') {\n\t\t\t\t\tvar docIndex = [];\n\t\t\t\t\tif (data.forEach) {\n\t\t\t\t\t\tdata.forEach(function(doc) {\n\t\t\t\t\t\t\tdocIndex.push(doc.getIndex())\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tapi.docIndex=docIndex\n\t\t\t\t}\n\t\t\t\telse if (eventName=='corpusTermsClicked') {\n\t\t\t\t\tif (data.map) {\n\t\t\t\t\t\tapi.query = data.map(function(corpusTerm) {return corpusTerm.getTerm()});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (eventName=='documentTermsClicked') {\n\t\t\t\t\tif (data.map) {\n\t\t\t\t\t\tapi.query = data.map(function(documentTerm) {return documentTerm.getTerm()});\n\t\t\t\t\t\tapi.docIndex = data.map(function(documentTerm) {return documentTerm.getDocIndex()});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (console) {console.warn(\"Unhandled event: \"+eventName, data)}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (api.toolFlow) {\n\t\t\t\t\tvar toolFlow = Ext.Array.from(api.toolFlow.split(\",\"));\n\t\t\t\t\tapi.view = toolFlow.shift();\n\t\t\t\t\tif (toolFlow.length>0) {\n\t\t\t\t\t\tapi.toolFlow = toolFlow.join(\",\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete api.toolFlow\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\turl += \"&\"+Ext.Object.toQueryString(api)\n\t\t\t\tthis.openUrl(url)\n\t\t\t})\n    \t}\n    }\n\n});","Ext.define('Voyant.panel.DocumentClusters', {\n\textend: 'Ext.panel.Panel',\n\talias: 'widget.documentclusters',\n\ttitle: \"Document Clusters\"\n})\n\n//\textend: 'Ext.panel.Panel',\n//\talias: 'widget.rezoviz',\n//\ttitle: \"RezoViz\"\n//})\nExt.define('Voyant.VoyantCorpusToolsetApp', {\n\textend : 'Voyant.VoyantCorpusApp',\n\trequires: ['Voyant.panel.Contexts','Voyant.panel.CollocatesGraph','Voyant.panel.Trends'],\n\tname : 'VoyantCorpusToolsetApp',\n\tlaunch: function() {\n\t\tExt.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    items: [{\n\t\t        region: 'south',\n\t\t        xtype: 'voyantfooter'\n\t\t    }, {\n         \t   xtype: 'tabpanel',\n        \t   region: 'center',\n\t\t    \tsplit: true,\n        \t   items: [{\n        \t\t   xtype: 'cirrus',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'corpusterms',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'documents',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'rezoviz',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'trends',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'documentclusters',\n                   collapsible: true\n        \t   }],\n        \t   flex: 6\n           }]\n\t\t});\n        this.callParent(arguments);\n\t}\n});","Ext.define('Voyant.VoyantDefaultApp', {\n\textend : 'Voyant.VoyantCorpusApp',\n\tmixins: ['Voyant.util.Api'],\n\tname : 'VoyantDefaultApp',\n\tconstructor: function() {\n\t\tthis.mixins['Voyant.util.Api'].constructor.apply(this, arguments);\n        this.callParent(arguments);\n\t},\n\tstatics: {\n\t\ti18n: {\n\t\t},\n\t\tapi: {\n\t\t\tview: 'corpusset',\n\t\t\tstopList: 'auto',\n\t\t\tpanels: undefined,\n\t\t\trtl: undefined\n\t\t}\n\t},\n\t\n\tlisteners: {\n    \tloadedCorpus: function(src, corpus) {\n    \t\tthis.viewport.down('voyantheader').collapse();\n    \t\tthis.viewport.down('#toolsContainer').setActiveItem(1);\n    \t\tvar corpusId = this.getCorpusId && this.getCorpusId() ? this.getCorpusId() : undefined;\n    \t\tif (window.history.pushState && !corpusId) {\n    \t\t\t// add the corpusId to the url\n    \t\t\tvar corpusId = corpus.getAliasOrId();\n        \t\tvar queryParams = Ext.Object.fromQueryString(document.location.search);\n        \t\t\n    \t\t\tvar url = this.getBaseUrl()+'?corpus='+corpusId;\n    \t\t\tfor (var key in queryParams) {\n    \t\t\t\tif (key !== 'corpus') {\n    \t\t\t\t\tvar vals = Ext.isString(queryParams[key]) ? [queryParams[key]] : queryParams[key];\n    \t\t\t\t\tif (Ext.isArray(vals)) {\n    \t\t\t\t\t\tvals.forEach(function(val) {\n    \t    \t\t\t\t\turl += '&'+key+'='+val;\n    \t\t\t\t\t\t})\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t}\n    \t\t\twindow.history.pushState({\n    \t\t\t\tcorpus: corpusId\n    \t\t\t}, 'Corpus: '+corpusId, url);\n    \t\t}\n    \t}\n\t},\n\tgetViewComponent: function() {\n\t\treturn this.viewport.down('#toolsContainer-main')\n\t},\n\tlaunch: function() {\n\t\tvar queryParams = Ext.Object.fromQueryString(document.location.search) || {};\n\t\tvar view = this.getApiParam('view', 'CorpusSet');\n\t\tvar xtype = view.toLowerCase();\n\t\tif (!Ext.ClassManager.getByAlias(\"widget.\"+xtype) || queryParams.noskin) {\n\t\t\tExt.Msg.show({\n\t\t\t    title: this.localize('noViewErrorTitle'),\n\t\t\t    message: new Ext.Template(this.localize(queryParams.noskin ? 'noViewKnownErrorTpl' : 'noViewErrorTpl')).apply({\n\t\t\t    \tview: queryParams.noskin ? queryParams.noskin : view,\n\t\t\t    \tadditional: queryParams.noskin && queryParams.noskin == 'convert' ? this.localize(queryParams.noskin+'SkinMsg') : ''\n\t\t\t    }),\n\t\t\t    buttons: Ext.Msg.OK,\n\t\t\t    icon: Ext.Msg.ERROR\n\t\t\t});\n\t\t\txtype = 'corpusset'; // switch to default view\n\t\t}\n\t\tvar SPLIT_SIZE = 5;\n\t\tthis.viewport = Ext.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    rtl: (this.getApiParam('rtl')!==undefined || Voyant.util.Localization.LANGUAGE==\"ar\" || Voyant.util.Localization.LANGUAGE==\"he\"),\n\t\t    items: [{\n\t\t    \txtype: 'voyantheader',\n\t\t    \tregion: 'north'\n\t\t    },{\n\t\t        region: 'south',\n\t\t        xtype: 'voyantfooter'\n\t\t    },{\n\t\t    \tregion: 'center',\n\t\t    \tlayout: 'card',\n\t\t    \titemId: 'toolsContainer',\n\t\t\t\tactiveItem: 0,\n\t\t\t\titems: [{\n\t\t\t\t\txtype : 'container',\n\t\t\t\t\tlayout: {\n\t\t\t\t\t\ttype: 'vbox',\n\t\t\t\t\t\tpack: 'center',\n\t\t\t\t\t\talign: 'center'\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\txtype: 'corpuscreator'\n\t\t\t\t\t},{\n\t\t\t\t\t\txtype: 'container',\n\t\t\t\t\t\twidth: 800,\n\t\t\t\t\t\thtml: \"<div id='voyantIs' style='font-style: italic; text-align: center; margin-top: 10px;'><div>\"+this.localize('voyantIs')+\"</div>\" + (this.localize('translatedBy').indexOf(\"English\") == -1 ? \"<div>\"+this.localize('translatedBy')+\"</div>\" : \"\") +\n\t\t\t\t\t\t\t(this.getCorpusCreatorText &&  this.getCorpusCreatorText().trim().length>0 ?  \"<div id='corpusCreatorText'>\"+this.getCorpusCreatorText()+\"</div>\" : \"\")\n\t\t\t\t\t}]\t\n\t\t\t\t},{\n\t\t\t\t\tlayout: 'fit',\n\t\t\t\t\titemId: 'toolsContainer-main',\n\t\t\t\t\titems: {\n\t\t\t\t\t\txtype: xtype\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t    }]\n\t\t});\n\t\tthis.callParent(arguments);\n\t}\n});","Ext.define('Voyant.panel.MoreLikeThis', {\n\textend: 'Ext.panel.Panel',\n\talias: 'widget.morelikethis',\n\ttitle: \"More Like this\"\n})\nExt.define('Voyant.VoyantDocumentToolsetApp', {\n\textend : 'Voyant.VoyantCorpusApp',\n\trequires: ['Voyant.panel.Contexts','Voyant.panel.CollocatesGraph','Voyant.panel.Trends'],\n\tname : 'VoyantDocumentToolsetApp',\n\tlaunch: function() {\n\t\tExt.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    items: [{\n\t\t        region: 'south',\n\t\t        xtype: 'voyantfooter'\n\t\t    }, {\n         \t   xtype: 'tabpanel',\n        \t   region: 'center',\n\t\t    \tsplit: true,\n        \t   items: [{\n        \t\t   xtype: 'cirrus',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'documentterms',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'contexts',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'collocatesgraph',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'trends',\n                   collapsible: true\n        \t   },{\n        \t\t   xtype: 'morelikethis',\n                   collapsible: true\n        \t   }],\n        \t   flex: 6\n           }]\n\t\t});\n        this.callParent(arguments);\n\t}\n});","Ext.define('Voyant.VoyantNotebookApp', {\n\textend : 'Voyant.VoyantApp',\n\trequires: ['Voyant.panel.VoyantFooter','Voyant.notebook.Notebook','Voyant.data.model.Corpus','Voyant.notebook.util.Show'],\n\tname : 'VoyantNotebookApp',\n\tlaunch: function() {\n\t\tExt.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    items: [{\n\t\t    \txtype: 'notebook',\n\t\t    \tregion: 'center'\n\t\t    },{\n\t\t    \txtype: 'voyantfooter',\n\t\t    \tregion: 'south'\n\t\t    }]\n\t\t});\n\t\tthis.callParent(arguments);    \t\n\t}\n});","Ext.define('Voyant.VoyantToolApp', {\n\textend : 'Voyant.VoyantCorpusApp',\n\tname : 'VoyantToolApp',\n\tstatics: {\n\t\tapi: {\n\t\t\tminimal: undefined,\n\t\t\tembeddedApiId: undefined\n\t\t}\n\t},\n\tlaunch: function() {\n\t\tvar items = [], me = this;\n\t\tif (!this.getApiParam('minimal')) {\n\t\t\titems.push({\n\t\t        region: 'south',\n\t\t        xtype: 'voyantfooter'\n\t\t    })\n\t\t};\n\t\titems.push({\n\t        region: 'center',\n\t        layout: 'fit',\n\t        itemId: 'toolcontainer',\n\t        items: {\n\t\t        xtype: this.getApiParam('embeddedApiId') ? 'container' : this.getTool()\n\t        },\n\t        listeners: {\n\t        \tafterrender: function(container) {\n\t        \t\tif (me.getApiParam('embeddedApiId')) {\n\t    \t\t\t\tvar dfd = me.getDeferred(this);\n\t    \t    \t\tcontainer.mask(this.localize('loadingConfiguration'));\n\t        \t    \tExt.Ajax.request({\n\t        \t    \t    url: me.getTromboneUrl(),\n\t        \t    \t    params: {\n\t        \t        \t\ttool: 'resource.StoredResource',\n\t        \t        \t\tretrieveResourceId: this.getApiParam('embeddedApiId')\n\t        \t    \t    }\n\t        \t    \t}).then(function(response) {\n\t    \t\t\t\t\tdfd.resolve();\n\t    \t    \t    \tvar json = Ext.util.JSON.decode(response.responseText);\n\t        \t    \t\tvar configString = decodeURIComponent(json.storedResource.resource);\n\t        \t    \t\tvar config = Ext.decode(configString);\n\t        \t    \t\tvar tool = Ext.create({xtype: me.getTool()});\n\t        \t    \t\ttool.setApiParams(config);\n\t        \t    \t\tcontainer.unmask();\n\t        \t    \t\tcontainer.remove(container.down('container'));\n\t        \t    \t\tcontainer.add(tool);\n\t        \t    \t\tif (config.corpus) {\n\t        \t    \t\t\tme.loadCorpusFromParams(config);\n\t        \t    \t\t}\n\t        \t    \t}).otherwise(function(response) {\n\t        \t    \t\tif (me.getTargetEl) {\n\t            \t\t\t\tVoyant.notebook.util.Show.TARGET = me.getTargetEl();\n\t            \t\t\t\tshowError(response);\n\t        \t    \t\t}\n\t        \t    \t\tVoyant.application.showError(response);\n\t        \t    \t\tdfd.reject();\n\t        \t    \t})\n\t    \t\t\t}\n\t        \t},\n\t        \tscope: this\n\t        }\n\t    });\n\t\tExt.create('Ext.container.Viewport', {\n\t\t    layout: 'border',\n\t\t    items: items\n\t\t});\n\t\tthis.callParent(arguments);\n\t}\n});"],
"names":["Bubblelines","config","container","externalClickHandler","clickHandler","INTERVAL","DISMISS_DELAY","UNIFORM_LINE_LENGTH","SEPARATE_LINES_FOR_TERMS","MAX_LABEL_WIDTH","MAX_LINE_WIDTH","DRAW_TITLES","DRAW_SHORT_TITLES","MIN_GRAPH_SEPARATION","graphSeparation","yIndex","mouseOver","intervalId","clearToolTipId","overBubbles","lastClickedBubbles","dragInfo","canvas","ctx","maxDocLength","maxFreq","term","value","maxRadius","cache","Ext","util","MixedCollection","currentTerms","termsFilter","bubbleSpacing","initialized","prototype","constructor","initializeCanvas","height","getHeight","width","getWidth","id","add","xtype","html","border","listeners","afterrender","fn","cnt","document","getElementById","getContext","addEventListener","bind","mouseDownHandler","mouseUpHandler","moveHandler","mouseEnterHandler","mouseLeaveHandler","single","scope","updateLayout","doBubblelinesLayout","setTitleWidthsAndMaxTitleWidth","children","DomQuery","jsSelect","el","dom","i","length","child","fly","setWidth","padding","setMaxLineWidth","setLineLengths","recache","setCanvasHeight","drawGraph","addDocToCache","doc","cacheBubbles","calculateBubbleRadii","lineLength","freqCounts","containsKey","replace","sort","addTermsToDoc","termsObj","docId","key","get","apply","terms","maxFreqChanged","termInfo","bins","distributions","spacing","cachedPositions","tokenPos","maxDistribution","xIndex","d","push","x","freq","radius","bin","tokenPositions","positions","slice","pos","setMaxFreq","newTerm","maxFreqLog","Math","log","minFreq","t","bubble","freqLog","max","doCache","each","getTotalHeight","totalHeight","index","calculateGraphHeights","undefined","setHeight","findLongestDocument","twt","getTotalWordTokens","getTitleWidth","title","indexOf","textBaseline","font","measureText","doTitle","titleWidth","doLength","percentage","includeLegend","clearInterval","setInterval","doDraw","setTimeout","clearCanvas","drawDocument","drawLegend","drawToolTip","doDrag","totalDocs","hidden","titleIndent","oldIndex","fillStyle","fillText","that","drawLine","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","pi2","PI","freqTotal","checkClickedBubbles","termsDrawn","info","freqForType","c","color","join","rawFreq","checkCurrentType","b","doClickedBubble","arc","closePath","fill","y","typeStore","record","type","summary","label","docIndex","count","fillRect","strokeRect","clearToolTip","clearTimeout","event","layerX","layerY","docHeight","getCount","newIndex","body","style","cursor","showPointer","hits","round","prevDocHeight","xOffset","yOffset","ordering","reorder","termData","flatten","maxObj","findMaxFreq","getNewColor","colors","match","findExact","removeAllTerms","removeTerm","getNewMax","lcTypes","lcType","Knots","MAX_LINE_LENGTH","LINE_SIZE","progressiveDraw","progDrawDone","drawStep","refreshInterval","forceRedraw","lastDrawTime","getTime","Date","startAngle","angleIncrement","currentDoc","offset","audio","audioCtx","sqrt","doLayout","buildGraph","done","createDelegate","time","save","translate","originOpacity","originColor","abs","restore","muteTerms","setAudio","gainNode","gain","prevXY","xy","drawPolygon","polygon","polyX","polyY","over","termStore","setCurrentDoc","cacheCurrentDocument","addTerms","oscillator","stop","determineGraphSizeAndPosition","window","AudioContext","webkitAudioContext","e","createOscillator","createGain","connect","destination","frequency","random","start","cacheTurns","tokenIds","lastTokenId","angle","prevX","prevY","prevLength","o","segment","newPoint","findEndPoint","getPolygonFromLine","tokenId","point","radians","degreesToRadians","x2","cos","y2","sin","bb","findBoundingBoxForGraph","maxX","minX","maxY","minY","widthRatio","heightRatio","ratio","min","getBoundingBox","hit","test","isPointInPolygon","lastX","lastY","xDiff","yDiff","point1","point2","size","perpDown","perpUp","p1","p2","p3","p4","j","oddNodes","Cirrus","canvasId","containerId","alert","wordController","resizeTimer","clear","this.clear","addWords","this.addWords","words","arrangeWords","this.arrangeWords","clearAll","this.clearAll","setWords","grid","resizeWords","this.resizeWords","setCanvasDimensions","resetWordCoordinates","calculateSizeAdjustment","this.setCanvasDimensions","$","offsetWidth","clientWidth","offsetHeight","clientHeight","hex2RGB","hex","charAt","substring","rgb","parseInt","init","createElement","setAttribute","append","context","isLocal","wordData","Array","useFadeEffect","WordController","layout","CIRCLE","SQUARE","isArray","css","wordsToArrange","testData","word","resize","keypress","which","click","matchingWord","handleWordClick","text","mouseover","startUpdates","mouseout","stopUpdates","mousemove","handleMouseMove","ready","Word","_text","_origSize","_color","_rolloverText","_value","rotation","relativeSize","mask","origSize","rolloverText","tx","ty","fontFamily","fontSize","alpha","live","isOver","draw","this.draw","rotate","parentApp","app","myFont","_layout","getLayout","this.getLayout","setLayout","this.setLayout","HORIZONTAL","MIXED","_wordOrientation","getWordOrientation","this.getWordOrientation","setWordOrientation","this.setWordOrientation","UPDATE_RATE","COARSENESS","timer_i","timer","doingArrange","overWord","overX","overY","_words","getWords","this.getWords","this.setWords","sizeAdjustment","minFontSize","largestWordSize","smallestWordSize","_uniqueWords","Object","addWord","sizeChanged","wordObj","newWords","floor","parseFloat","sortWords","setRelativeSizes","createAllGraphics","this.resetWordCoordinates","this.calculateSizeAdjustment","stageArea","pixelsPerWord","totalWordsSize","wordArea","calculateWordArea","baseSize","LOG10E","letter","measureTextHeight","imageData","getImageData","first","last","pixel","getPixel","measureDimensions","ceil","data","setPixel","r","g","a","findNewRelativeSize","areaMultiplier","area","newRelativeSize","pow","this.setRelativeSizes","mapValue","createWordGraphics","adjustedSize","tempHeight","tempWidth","backgroundColor","xm","ym","pixelColor","toggleLoadingText","doArrange","breakOut","fail","wordCount","appCanvasWidth","appCanvasHeight","halfWidth","halfHeight","dd","da","halfWordWidth","halfWordHeight","hitTest","finalizeWord","w","wrd","fadeWord","drawWords","h","xt","yt","drawIt","set_grid","this.toggleLoadingText","show","this.startUpdates","this.stopUpdates","$canvasEl","wordWidth","valueWidth","maxWidth","appWidth","appHeight","this.handleMouseMove","remainder","pageX","left","pageY","top","findWordByCoords","this.handleWordClick","this.findWordByCoords","degrees","istart","istop","ostart","ostop","Function","Function.prototype.createDelegate","obj","args","appendArgs","method","callArgs","arguments","call","concat","applyArgs","splice","doubletree","DoubleTree","doubletree.DoubleTree","containers","visWidth","visHt","prefixesOnRight","filters","handlers","noOp","showTokenExtra","scaleLabels","sortFun","sortByStrFld","nodeText","tokenText","tokenExtraText","fieldText","rectColor","rectBorderColor","continuationColor","basicStyles","succeeded","dispatch","d3","on","leftTree","rtTree","setIds","continuationIDs","updateContinuations","leftTrie","rtTrie","visibleIDs","kFontSize","kBigFontSize","kMinFontSize","textScale","mine","selection","node","mine.init","containerPattern","select","selectAll","redraw","mine.redraw","setupFromTries","mine.setupFromTries","leftOne","rtOne","getUniqRoot","leftTrieTree","toTree","rtTrieTree","right","copyIDs","keys","pruned","new_pruneTree","newInfo","k","continuations","ids","addTo","origIDs","origCount","maxChildren","isNaN","scaleLog","range","domain","textScale.domain","minCount","margin","bottom","forEach","thisContainer","thisVis","tmp","attr","zoom","scaleExtent","transform","remove","Tree","handleAltPress","alt","handleShiftPress","shift","handleClick","setupFromArrays","mine.setupFromArrays","prefixArray","hitArray","suffixArray","idArray","caseSensitive","fieldNames","fieldDelim","distinguishingFieldsArray","Trie","n","thisID","thisHit","thesePrefixes","theseSuffixes","reverse","unshift","addNgram","filteredIDs","mine.filteredIDs","search","mine.search","searchRE","found","empty","what","foundRt","clearSearch","mine.clearSearch","updateTokenExtras","mine.updateTokenExtras","showTokenExtras","tokExtra","ht","mine.visWidth","visHeight","mine.visHeight","mine.prefixesOnRight","mine.filters","mine.handlers","mine.showTokenExtra","mine.scaleLabels","mine.succeeded","mine.sortFun","mine.nodeText","mine.tokenExtraText","mine.rectColor","mine.rectBorderColor","mine.continuationColor","mine.basicStyles","stylesObj","aspect","doubletree.Tree","vis","toLeft","showTokenXtra","nodeTextFun","tokenExtraTextFun","rectColorFun","rectBorderFun","contColorFun","baseStyles","clickedNode","duration","root","dx","tree","nodeSize","diagonal","linkHorizontal","positionX","positionY","readJSONTree","this.readJSONTree","json","hierarchy","x0","y0","collapse","update","_children","collapseSiblings","nd","parent","this.update","source","treeData","nodes","descendants","baseBranchSegmentWidth","textSize","measured","TextMeasurer","name","depth","nodeEnter","enter","infoToText","txtNode","drawRects","nodeUpdate","merge","transition","nodeExit","exit","link","links","target","linkEnter","insert","branch","linkUpdate","linkExit","this.drawRects","nodeRect","parentElement","getBBox","parentW","altKey","shiftKey","toggleChildren","this.setIds","this.updateContinuations","classed","isContinuation","overlap","this.search","this.clearSearch","this.showTokenExtras","setRectColor","this.setRectColor","this.handleAltPress","handleShifttPress","this.handleShifttPress","this.handleClick","doubletree.sortByStrFld","fld","field","aUndefined","bUndefined","aVal","toLowerCase","bVal","sortByCount","doubletree.sortByCount","sortByContinuations","doubletree.sortByContinuations","filterByMinCount","doubletree.filterByMinCount","inf","filterByMaxCount","doubletree.filterByMaxCount","filterByPOS","doubletree.filterByPOS","re","RegExp","filter","p","doubletree.fieldText","fieldName","doubletree.tokenText","token","doubletree.infoToText","infp","old_pruneTree","containedIn","cMax","map","idNums","cid","restoreTree","o1","o2","doubletree.Trie","fldNames","fldDelim","distinguishingFldsArray","undistinguishedRoot","endNG","rootName","noCase","undistinguishedRt","trie","TrieNode","item","flds","split","this.addNgram","itemArray","thisItem","thisKey","theseFlds","f","toLocaleLowerCase","subTrie","thisFld","this.getUniqRoot","this.toTree","filterFuns","toTreeHelper","descendentLevel","trieData","k2","itemNode","thisFilter","maxLen","JSON","parse","stringify","serialize","this.serialize","deserialize","this.deserialize","serialized","this.endNG","this.rootName","this.trie","this.caseSensitive","this.fieldNames","this.fieldDelim","this.distinguishingFieldsArray","TermsRadio","isSliderVisible","showSlider","chart","absMaxFreq","absMinFreq","allData","continueTransition","counterSeries","displayData","dragged","isTransitioning","lastSlippery","lastSticky","maxFont","numDataPoints","numVisPoints","overlayQueue","records","recordsLength","reselectTop","shiftCount","sliderDragSum","titlesArray","transitionCall","valFraction","win","bPadding","lPadding","rPadding","tPadding","sliderHeightRatio","sliderHeight","sliderBPadding","largestW","largestH","xAxisEl","xAxis","axisBottom","xScale","scaleLinear","xSliderScale","yAxisEl","yAxis","axisLeft","yScale","ySliderScale","fontScale","opacityScale","doResize","loadRecords","initData","prepareData","len","initializeChart","highlightQuery","query","sticky","getApiParam","getCorpus","getDocument","getId","wordString","paramsBundle","buildParamsBundle","manageOverlaySticky","manageOverlaySlippery","highlightRecord","parentBins","loadStore","transferArray","rec","dists","counter","posInSeries","numInSeries","frequencySeries","copy1","copy2","copy3","copy4","check","check1","check2","frequencyArray","l","inSeries","allDataSetup","allDataInternal","outerCounter","displaySetup","dotObject","displayInternal","manageMvtButtons","queryById","setPlaying","nextR","toggleRightCheck","manageXScale","setApiParams","position","animateVis","nextL","startScroll","me","initChart","drawXAxis","drawYAxis","drawChart","drawSlider","drawVerticalSlider","redrawSliderOverlay","updateFullPath","redrawXAxis","redrawYAxis","redrawChart","redrawSlider","redrawVerticalSlider","redrawChartOverlay","chartSVG","DomHelper","down","setSliderHeight","getSliderHeight","setTitleLength","manageAllXScales","ticks","tickFormat","val","styleXAxis","manageAllYScales","yTicksScale","numberFormat","format","logFormat","tickSize","counterSeriesDiv","frequencySeriesDiv","dataPoint","removeFilteredCharacters","startPoint","valueRange","callOffset","lengthHor","offsetVis","offsetVisStart","offsetVisEnd","lineX","lineY","sliderHorStart","sliderHorEnd","greyBoxBefore","greyBoxAfter","drag","displaceX","checkBefore","checkAfter","getAttribute","inverseSliderScale","moveByThis","moveShiftCount","oldShiftCount","removeSlider","removeTermLines","mode","getDuration","ease","easeLinear","isMasked","unmask","callTransition","toggleLeftCheck","params","totalTokens","tokenIdStart","category","docIdType","string","selector","checkOn","pathHolder","prepareFullPath","lineObject","fullPath","path","pathMin","pathMax","colour","chartOverlayOff","sliderOverlayOff","chartOverlayOn","sliderOverlayOn","isTermSelected","doTermSelect","doTermDeselect","getTermIndex","legendAdd","apiArray","selectedWords","getApplication","getColorForTerm","legend","getStore","mark","findRecord","set","refresh","legendRemove","removeAt","updateApi","linePosArray","foundB","lenA","lenB","yVal1","yVal2","buildSliderPath","pathArray","line","curve","curveNatural","objectToSelect","transitionSliderOverlay","updateYSliderScale","preparePath","foundA","foundC","yVal3","yVal4","posDif","manageFontScale","manageOpacityScale","manageYScale","manageYSliderScale","rangeRound","updateWithObject","selectedMin","selectedMax","manageXSliderScale","hideSlider","scale","corpus","getDocumentsCount","shortTitle","getShortTitle","shorterTitle","getSpeed","define","transferable","assign","then","Voyant","application","getDeferredNestedPromise","isString","showError","apis","isApplication","mixins","clz","ClassManager","api","addParentApi","getClass","getApiParams","initial","queryParams","fromQueryString","location","getXType","setApiParam","isObject","superclass","self","defaultValue","keepEmpty","isEmpty","getModifiedApiParams","statics","DEFAULT_LANGUAGE","LANGUAGE","i18n","languageStore","create","fields","getLanguage","code","localize","_localizeObject","object","_localizeClass","mixin","clazz","use","isTemplate","getLanguageToolMenu","tooltip","glyph","handler","showLanguageOptions","langs","lang","localeCompare","Window","modal","items","queryMode","editable","fieldLabel","labelAlign","labelWidth","displayField","valueField","store","buttons","ui","flex","btn","up","close","form","isDirty","getAliasOrId","panels","values","getValues","toQueryString","bodyPadding","palettes","colorTermAssociations","setPalettes","resetColorTermAssociations","cat10","scaleOrdinal","schemeCategory10","hexToRgb","cat20a","schemeCategory20","cat20b","schemeCategory20b","cat20c","schemeCategory20c","addColorPalette","extjs","getColors","setColorTermAssociations","rgbToHex","toString","shorthandRegex","m","result","exec","getPalettes","getColorPalette","returnHex","paletteKey","palette","getColor","getColorTermAssociations","setColorForTerm","deferredStack","releaseAllDeferred","getDeferredCount","getDeferred","deferred","Deferred","pomise","transfer","promise","Assignable","always","pop","getPromiseFromDeferred","dfd","callee","caller","promised","resolve","extend","msg","error","details","setMsg","setError","setDetails","callParent","showMsg","applyIf","message","getMsg","getError","escape","getDetails","Msg","OK","icon","MessageBox","ERROR","autoScroll","response","setResponse","statusText","responseText","getSparkLine","stretch","Number","MAX_VALUE","MIN_VALUE","hasDecimal","dif","multiplier","divider","newvalues","ind","valLen","valuesPerImage","baseUrl","images","wid","vals","requires","suppressTools","header","moreTools","getMenuItemFromXtype","getInitialConfig","getMoreTools","tools","categories","menu","exportItems","toolsMap","exportToolClick","plus","gear","showOptionsClick","getOptions","panel","isXType","getActiveTab","getForm","getFields","collect","setValues","fireEvent","doGlobalUpdate","getViewport","globalUpdate","stopListGlobal","dispatchEvent","help","helpToolClick","includeTools","tool","callback","getHeader","os","deviceType","getEl","getTools","hide","getToolConfigFromToolXtype","clone","textAlign","replacePanel","maximizeToolClick","getName","parts","url","getBaseUrl","openUrl","hostname","exportViewItems","inputValue","boxLabel","getExtraExportItems","getExportUrl","checked","boxLabelEl","collapsible","collapsed","exportitems","getExportGridAll","getExportVisualization","getTargetEl","querySelector","formats","minValue","maxValue","increment","decimalPrecision","itemId","Template","change","slider","newVal","setFieldLabel","changecomplete","previousSibling","setValue","String","capitalize","isFunction","exportSvg","img","svg","parentNode","innerHTML","btoa","unescape","encodeURIComponent","INFO","prompt","multiline","exportPngData","exportPng","getValue","canvasSurface","isChart","isCanvas","innerElement","getSize","surfaces","zIndexes","surfaceZIndexes","image","imageElement","surface","zIndex","targetCanvas","className","getClassName","devicePixelRatio","rect","getRect","surfaceSize","canvases","getOffsetsTo","getParent","drawImage","isVisible","toDataURL","targetEl","Image","src","onload","image.onload","cloneNode","outerHTML","createDom","tag","exportUrl","exportEmbed","asTool","exportBiblio","date","exportSpyral","toolForUrl","isDebug","view","debug","enc","str","input","encode","exportGridCurrentJson","visibleColumns","getColumnManager","headerCt","getVisibleGridColumns","jsonCollector","row","column","dataIndex","buffered","exportGridCurrentTsv","tsvCollector","cells","exportGridCurrentHtml","htmlCollector","exportGridAllJson","confirm","limit","getProxy","getExtraParams","getTromboneUrl","exportGridAllTsv","template","getViewComponent","removeAll","newTool","history","pushState","setActiveTab","alias","renderTpl","privates","onClick","returnValue","toolMenu","Menu","showAt","getX","getY","onDestroy","destroyMembers","initComponent","glyphParts","glyphFontFamily","glyphConfig","renderData","baseCls","blank","BLANK_IMAGE_URL","member","variants","variant","v","getVariants","documentFormat","documentFilename","downloadFromCorpusId","corpusId","openDownloadCorpus","MAX_LENGTH","storeResource","dataString","numChunks","chunkIds","_doStore","chunkCount","currIndex","chunkString","substr","reject","Ajax","request","resourceId","getStoredResource","verifyResourceId","decode","storedResource","_doGetStored","fullData","dataChunks","chunkId","isChunk","retrieveResourceId","failQuietly","resource","diacriticsMap","defaultDiacriticsRemovalMap","letters","base","removeDiacritics","getString","isNumber","contents","arg","allContents","content","toHtml","notebook","Show","SINGLE_LINE_MODE","MODE","TARGET","insertHtml","more","ResponseError","console","getResponse","stack","htmlEncode","embed","embeddedParameters","embeddedConfig","cmp","embedded","embeddable","getByAlias","isEmbedded","embeddedParams","embeddedConfigParamEncodded","embeddedConfigParam","iframeId","getBaseUrlFull","lastIndexOf","minimal","embeddedApiId","otherwise","Embed","showWidgetNotRecognized","widgetNotRecognized","tryWidget","widget","idProperty","getDocIndex","getLeft","getMiddle","getHighlightedMiddle","getRight","getPosition","getHighlightedContext","getLabel","getFacet","getInDocumentsCount","getTerm","getKeyword","getRawFreq","getKeywordRawFreq","getContextTerm","getContextTermRawFreq","calculate","getDistributions","convert","getLexicalTokensCount","getLexicalTypeTokenRatio","loadDocumentTerms","documentTerms","getDocumentTerms","load","operation","success","loadTokens","tokens","getTokens","proxy","extraParams","getIndex","getFullLabel","author","getAuthor","getTitle","trim","getTruncated","slash","space","getTinyTitle","getShortLabel","getTinyLabel","getPubDate","getPublisher","getPubPlace","getMultiple","getCollection","getCorpusId","isPlainText","getAverageWordsPerSentence","getText","getPlainText","outputFormat","noOthers","getLemmasArray","getEntities","loadEntities","getCSS","getPositions","getDocIds","getRelativeFreq","getSource","getTarget","getPrincipalComponents","pcs","principalComponents","pc","getDimensions","dimensions","dim","tok","getInfoFromElement","isWord","getTokenType","isStopword","getDocId","getTermWithLineSpacing","getDocumentRawFreq","parentPanel","extras","remoteSort","autoLoad","pagePurgeCount","pageSize","leadingBufferZone","actionMethods","read","reader","rootProperty","totalProperty","metaProperty","simpleSortMode","exception","forTool","setParentPanel","setCorpus","beforeload","getParentPanel","isBufferedStore","from","previouslySetExtraParams","setExtraParam","getAt","storeJson","storeClass","storeData","model","withDistributions","CorpusFacet","CorpusTerm","sorters","property","direction","successful","opts","getById","noCache","alternateClassName","rows","headers","rowsMap","headersMap","rowKey","table","VoyantTable","setRows","getRows","setHeaders","getHeaders","setRowsMap","getRowsMap","setHeadersMap","getHeadersMap","setRowKey","getRowKey","fromBlock","Notebook","getDataFromBlock","noHeaders","freqs","counts","orientation","isStore","getData","firstRow","getRow","cell","reMapRows","addRow","updateCell","getColumnIndex","eachRecord","getRecord","eachRow","asMap","getRowIndex","mapRows","getColumnHeader","getColumnSum","sum","getColumnValues","getColumnMean","mean","getColumnMax","getColumnMin","clean","sortByColumn","columns","sortColumnsIndices","loadCorrespondenceAnalysis","_doAnalysisLoad","loadPrincipalComponentAnalysis","loadTSNEAnalysis","storeType","columnHeaders","rowHeaders","analysisInput","toTsv","inputFormat","noCorpus","rowkey","columnIndices","tableJson","axes","series","tsv","edges","setEdges","setNodes","addEdge","getEdges","getNode","binarySearch","getNodes","lhs","rhs","edge","jsonData","queries","isIncrementalLoadingOccurrences","previousParams","setPreviousParams","localParams","getQueries","noOverwrite","setData","dreamscape","progress","ProgressMonitor","maxMillisSinceStart","failure","responseOrProgress","showResponseError","getCitiesCount","locations","getTotalCitiesCount","total","hasMoreCities","eachCity","orderedLocations","c1","c2","getConnectionsCount","connections","getTotalConnectionsCount","eachConnection","orderedConnections","getConnectionOccurrence","connectionOccurrencesData","connectionOccurrences","getIsIncrementalLoadingOccurrences","setIsIncrementalLoadingOccurrences","getPreviousParams","suppressLocations","suppressConnections","occurrence","getAllConnectionOccurrences","sourceId","targetId","occurences","occurence","documentsStore","dateFormat","defer","inlineData","metadata","subTitle","docsLimit","getDocuments","setDocumentsStore","loadCorpusTerms","corpusTerms","getCorpusTerms","getRange","getCorpusCollocates","getDocumentQueryMatches","getDocumentEntities","loadContexts","contexts","getContexts","getDocumentsStore","Document","isNumeric","getWordTokensCount","getWordTypesCount","getCreatedTime","requiresPassword","noPasswordAccess","getNoPasswordAccess","getSubTitle","getRelatedWords","loadRelatedWords","relatedTerms","transformCase","toUpperCase","getWordsArray","withPosLemmas","lemmas","XTemplate","Format","number","types","createdDate","now","YEAR","MONTH","DAY","HOUR","MINUTE","SECOND","diff","buildFromParams","openMenu","getStoreItemsFromDefinition","getOpenMenu","decodeURIComponent","definition","nameValue","triggerAction","editList","list","keywords","OKCANCEL","buttonText","ok","cancel","original","combo","req","stoplists","ar","bg","br","ca","ckb","cn","cz","de","en","es","eu","fa","fr","ga","gl","grc","hi","hu","hy","it","ja","la","lv","lt","mu","nl","no","pt","ro","ru","se","th","tr","StopListOption","stopList","stoplist","tokenType","isDocsMode","inDocumentsCountOnly","showAggregateInDocumentsCount","clearOnQuery","currentOriginalRawQueryPlan","hasCorpusLoadedListener","isClearing","itemTpl","minWidth","matchFieldWidth","minChars","filterPickList","createNewOnEnter","createNewOnBlur","autoSelect","tpl","triggers","weight","cls","getIsDocsMode","setClearOnQuery","queryPlan","originalRawQueryPlan","setCurrentOriginalRawQueryPlan","originalRawQueryPlanWithoutAt","cat","getCategoriesManager","getCategories","tags","getClearOnQuery","removeValue","getValueRecords","setHtml","q","getStopList","findParentBy","doSetCorpus","tip","QuickTipManager","register","unregister","setStopList","getInDocumentsCountOnly","setStore","updateStatus","getTotalCount","docs","singleSelect","setSingleSelect","getSingleSelect","fbar","getMenu","setChecked","button","hasVisibleMenu","hideMenu","populate","setDocs","isSingleSelect","groupId","group","checkHandler","nextSibling","initField","eachKey","DropZone","ddGroup","getTargetFromEvent","onNodeDrop","appendChild","contains","Helper","defaults","rendered","enabled","hasCls","fonts","paletteTpl","paletteStore","ArrayStore","op","mod","editPaletteWin","spectrum","editPalette","loadPalette","align","toRgb","dv","sel","getSelectionModel","getSelection","scrollable","itemSelector","overItemCls","selectedItemCls","selectionModel","selectionchange","viewmodel","selected","savePalette","initSpectrum","setColorForSelected","rgbA","editor","flat","showInput","showButtons","preferredFormat","move","paletteId","paletteData","loadData","valueString","getConfigFromTableJson","setAxes","setSeries","setLegend","jsonString","noLegend","docked","axis","cfg","xField","yField","marker","highlightCfg","scaling","trackMouse","renderer","getYField","searchValue","matches","currentIndex","searchRegExp","regExpMode","matchCls","tagsRe","tagsProtect","onTextFieldChange","cellSelector","innerSelector","visibleColumnManager","getColumns","idx","getCellInnerSelector","cellHTML","seen","gotoCurrent","deselectAll","focus","getNavigationModel","setPosition","msgbox","delay","initConfig","getProgress","getScope","completion","status","progressBar","wait","getMaxMillisSinceStart","opt","setProgress","finish","getDelay","setDelay","getSuccess","getFailure","getArgs","destroy","tableHtml","hiddenColumns","ux","TransformGrid","render","getHiddenColumns","hides","setHiddenColumns","configFields","configColumns","cols","col","mapping","sortable","removeChild","doDestroy","tabl","builderWin","getBuilderWin","getCategoriesId","setBuilderWin","categoriesId","setCategoriesId","relativeFreq","addCategory","removeCategory","removeTerms","categoryName","exists","confirmRemove","features","FontFamilyOption","addCategoryWin","closeAction","categoriesManager","warn","onEsc","emptyFn","tabBarHeaderPosition","region","viewConfig","plugins","ptype","copy","enableDrop","dragZone","getDragText","dragData","selModel","dockedItems","dock","overflowHandler","getAddCategoryWin","hideable","processFeatures","setColorTermsFromCategoryFeatures","saveCategoryData","getCategoryExportData","loadCategoryData","buildCategories","buildFeatures","builder","setAddCategoryWin","allowBlank","validator","getCategoryTerms","enableKeyEvents","evt","getKey","Event","ENTER","isValid","reset","clearInvalid","termsData","frame","beforedrop","getCategoryForTerm","drop","titleEditor","Editor","updateEl","alignment","autoSize","complete","ed","newvalue","oldvalue","renameCategory","textEl","startEdit","categoriesParent","queryBy","featuresStore","addFeature","getFeatures","featuresConfigs","feature","featureConfig","widgetConfig","rowIndex","getCategoryFeature","reconfigure","featureValue","setCategoryFeature","cats","visLayout","nodeData","edgeData","nodeSelection","edgeSelection","currentNode","currentEdge","zoomExtent","fixOnDrag","nodeScaling","minSize","maxSize","scalingFunction","edgeScaling","graphStyle","normal","fillOpacity","strokeOpacity","strokeWidth","highlight","graphPhysics","damping","centralGravity","nodeGravity","springLength","springStrength","collisionScale","setNodeData","setEdgeData","loadJson","initGraph","refreshGraph","elHeight","elWidth","getVisLayout","force","forceX","forceY","processJson","wordFreq","loc","existingTerms","getNodeData","newNodes","newEdges","idGet","newedge","getEdgeData","updateDataForNode","nodeId","dataObj","updateDataForEdge","edgeId","addNode","removeNode","removeOrphans","potentialOrphans","orphanId","removeEdge","getRenderTarget","physics","getGraphPhysics","setVisLayout","forceSimulation","velocityDecay","strength","forceLink","distance","forceManyBody","forceCollide","bbox","getEdgeSelection","getNodeSelection","zoomToFit","getZoomExtent","setZoom","setEdgeSelection","setNodeSelection","setVis","resetGraph","nodeExtent","extent","nodeSum","edgeExtent","edgeSum","getEdgeScaling","getNodeScaling","edgeEnter","edgeMouseOver","edgeMouseOut","stopImmediatePropagation","preventDefault","setCurrentEdge","nodeMouseOver","nodeMouseOut","setCurrentNode","active","alphaTarget","restart","getFixOnDrag","fx","fy","applyEdgeStyle","applyNodeStyle","paddingPercent","transitionDuration","bounds","getVis","midX","midY","svgRect","getBoundingClientRect","fullWidth","fullHeight","getZoom","zoomIdentity","nodeState","state","getGraphStyle","edgeState","documentTermsStore","locationMarker","isDetailedGraph","locationMarkerColor","DETAILED_GRAPH_DOC_LIMIT","LOCATION_UPDATE_FREQ","SCROLL_UP","SCROLL_EQ","SCROLL_DOWN","setDocumentTermsStore","withPositions","graphDatas","graphData","dist","getIsDetailedGraph","graphs","graph","getAxes","setMaximum","getLocationMarker","setLocationMarker","updateCorpus","getDocumentTermsStore","setIsDetailedGraph","generateChart","loadQueryTerms","queryTerms","addChart","docInfo","fraction","relativeHeight","bColor","sColor","insetPadding","background","stops","showDelay","dismissDelay","hideDelay","toolTip","itemclick","box","getBox","chartContainer","containerParent","toArray","tokensTotal","docInfos","docMinSize","docMaxSize","minGapWidth","minBarWidth","sprite","rendererData","docWidth","docX","moveLocationMarker","scrollDir","locMarkEl","locX","currX","setX","corpusValidated","subtitle","setTitle","selectedRecordsToRemember","mergedRecords","currentPage","addAll","totalCount","loadedCorpus","priority","toastError","toast","toastInfo","slideInDuration","shadow","anchor","hasCorpusAccess","corpusAccess","getCorpusAccess","tabchange","newTab","addTool","tab","rowLines","columnLines","facet","eOpts","emptyText","hideHeaders","selType","metaData","setStoreCorpus","speed","options","bubbles","frameRate","beforedestroy","Processing","bindJavascript","noLoop","loadDocument","handleCurrentTerm","handleDocFinished","documentTerm","whitelist","setLines","loop","getAudio","Loader","loadScript","maxDocs","bubblelines","docTermStore","selectedDocs","termTpl","setDocTermStore","processTerms","termObj","getBubblelines","initLoad","getDocTermsFromQuery","docIds","setTermStore","termsView","getTermStore","reloadTermsData","boxLabelAlign","checkbox","focusCls","beforeitemclick","stopPropagation","beforecontainerclick","selections","getNodeByRecord","removeCls","addCls","lcTerms","itemcontextmenu","isSelected","floating","deselect","getXY","autoEl","overflowY","overflowX","component","canvasParent","setBubblelines","bubbleClickHandler","afterlayout","inLimit","autoload","getDocTermStore","filterDocuments","setSelectedDocs","getSelectedDocs","filterBy","termRecord","find","splash","facets","matchingDocIds","customResultsHtml","facetCmp","updateResults","addFacet","findParentByType","disabled","catalogue","keepDocuments","getMatchingDocIds","getCustomResultsHtml","setCustomResultsHtml","facetsCmp","CorpusTerms","selectFacet","matchingDocumentsLabel","bbar","labels","getFacets","results","setDisabled","documentQueryMatches","includeDocIds","labelItems","suffix","isMatch","part","lnks","lnk","setMatchingDocIds","firstDocIds","loadSnippets","elToMask","stripTags","perDocLimit","accurateTotalNotNeeded","snippets","snippet","docItem","facetsSelectionStore","existingFacets","forceSelection","whiteList","visible","cirrusForceFlash","fade","smoothness","diagonals","cirrusId","MODE_CORPUS","MODE_DOCUMENT","setCirrusId","loadFromTermsRecords","boxready","initVisLayout","setTerms","buildFromTerms","setAdjustedSizes","getTerms","loadFromCorpus","corpusSelected","documentSelected","loadFromDocumentTerms","ensureCorpusView","getMode","loadFromCorpusTerms","setMode","setRecords","getRecords","forceLayout","getCirrusId","appVars","swfscript","cirrusLinks","loadFlash","swfobject","cirrusFlash","flashVars","flashParams","allowScriptAccess","bgcolor","wmode","cirrusFlashApp","layoutCloud","overflow","getFeatureForTerm","spiral","getTip","setTip","setSmallestWordSize","setLargestWordSize","nodesEnter","coords","mouse","nodesUpdate","setMinFontSize","setSizeAdjustment","getMinFontSize","getSmallestWordSize","getLargestWordSize","getSizeAdjustment","centralize","linkData","visId","dragging","contextMenu","networkMode","keywordNode","contextNode","defaultMode","centralizedMode","DEFAULT_MODE","CENTRALIZED_MODE","setLinkData","setVisId","newValue","getNetworkMode","loadFromQuery","setContextMenu","renderTo","getBody","checkchange","getCurrentNode","fixed","setNetworkMode","fetchCollocatesForNode","doCentralize","getContextMenu","getVisId","loadFromCorpusTermRecords","operations","loadFromCorpusCollocateRecords","corpusTerm","keywordId","cX","cY","existingKeys","newLinks","corpusCollocate","contextTerm","termFreq","contextFreq","termValue","contextValue","termEntry","contextTermEntry","contextId","existingLink","getLinkData","linkValue","centralizeLimit","applyNetworkMode","getLinks","getDragging","setLinks","linkMouseOver","linkMouseOut","setDragging","isOffCanvas","applyLinkStyle","linkState","include","corpusCollocates","isConsumptive","expand","sm","rowBodyTpl","clearAndLoad","getView","recordsExpanded","getByInternalId","expandRow","childNodes","colIndex","documentsSelected","documentSegmentTermClicked","documentSegmentTerm","documentIndexTermsClicked","documentIndexTerms","queriesHash","docIndexHash","rowNode","textContent","middle","loadFromApis","documents","docid","termsClicked","collocatesStore","correlationsStore","phrasesStore","minHeight","loadStuff","tagName","getHtml","getDockedItems","setCollocatesStore","setCorrelationsStore","setPhrasesStore","getComponent","docIndexes","arrays","reduce","addSection","getCollocatesStore","getCorrelationsStore","getPhrasesStore","minLength","phrase","minInDocumentsCountRatio","setText","language","xmlDocumentsXpath","xmlGroupByXpath","xmlContentXpath","xmlTitleXpath","xmlAuthorXpath","xmlPubDateXpath","xmlPublisherXpath","xmlPubPlaceXpath","xmlKeywordsXpath","xmlCollectionXpath","xmlExtraMetadataXpath","htmlGroupByQuery","htmlDocumentsQuery","htmlContentQuery","htmlTitleQuery","htmlAuthorQuery","htmlPubDateQuery","htmlPublisherQuery","htmlPubPlaceQuery","htmlKeywordsQuery","htmlCollectionQuery","htmlExtraMetadataQuery","jsonDocumentsPointer","jsonContentPointer","jsonTitlePointer","jsonAuthorPointer","jsonPubDatePointer","jsonPublisherPointer","jsonPubPlacePointer","jsonKeywordsPointer","jsonCollectionPointer","jsonExtraMetadataPointer","tokenization","adminPassword","accessPassword","tableDocuments","tableContent","tableTitle","tableAuthor","inputRemoveFrom","inputRemoveFromAfter","inputRemoveUntil","inputRemoveUntilAfter","borderColor","borderStyle","frameHeader","buttonAlign","submitEmptyText","loadCorpus","buttonOnly","hideLabel","filefield","fileInputEl","files","badFilesRe","goodFilesRe","badFiles","unknownFiles","filename","file","YESNO","loadForm","isFloating","buttonId","addTextLabel","getAllowInput","getNoAllowInputText","addDocuments","apiParams","submit","action","stepEnabledCorpusCreator","corpusParams","storedId","loadCorpusFromParams","optionsWin","defaultType","maxHeight","fieldDefaults","applyTemplate","grow","validatePositiveNumbersCsv","numbers","keyword","pubDate","citiesMaxCount","minPopulation","citiesMinFreq","connectionsMaxCount","connectionsMinFreq","millisPerAnimation","annotationsId","overridesId","filterHasLowerCaseForm","filterIsPersonName","preferredCoordinates","overlay","contentEl","isOpenLayersLoaded","isArcLoaded","animationDelay","isProj4Loaded","projection","filterWidgets","drawInteraction","drawMode","baseLayers","annotations","annotationsLoadedIfAvailable","overrides","onLoad","ol","Map","getLayer","ol.Map.prototype.getLayer","layer","getLayers","lyr","setIsOpenLayersLoaded","setIsArcLoaded","setIsProj4Loaded","setAnnotations","getAnnotations","setAnnotationsLoadedIfAvailable","iconBase","bodyBorder","getMap","getItemId","getFilterWidgets","setVisible","unique","vertical","getBaseLayers","setOpacity","setAt","setProjection","proj","proj4","defs","gallPetersProjection","sphereMollweideProjection","setExtent","newProjExtent","getProjection","getExtent","earthWidth","newView","View","center","getCenter","maxResolution","layers","newGeometry","getGeometry","setGeometry","setView","oldVal","currentCitiesCount","getGeonames","filterUpdate","loadGeonames","getAnimationDelay","setMillisPerAnimation","animate","hasMatch","ownerCt","removeFilterWidget","removeLayer","getDockedComponent","connectionsLayer","Vector","wrapX","useSpatialIndex","opacity","travelStyleFunction","updateWhileAnimating","updateWhileInteracting","addLayer","citiesLayer","cityStyleFunction","animationLayer","animationStyleFunction","tryInit","getIsOpenLayersLoaded","getIsArcLoaded","getIsProj4Loaded","getAnnotationsLoadedIfAvailable","setId","Tile","preload","Infinity","TileWMS","crossOrigin","Stamen","OSM","TileArcGISRest","cacheize","loadTilesWhileInteracting","handleSingleClick","getFeaturesAtPixel","handleLocationClick","foundFeature","geonames","occurrences","infos","occ","sourceCoordinates","targetCoordinates","getContentEl","getOverlay","coordinate","elements","onmouseover","link.onmouseover","showTermInCorpus","selectedLayer","getResolution","previewLayer","preview","getEventPixel","originalEvent","hasFeatureAtPixel","getDrawMode","baseTextStyle","offsetY","Fill","Stroke","textOverlayStyle","Style","Text","selectedFeature","Feature","geometry","forms","coordinates","confidence","cityId","textFeature","geom","Point","setStyle","layerId","connection","annotationsObj","geojson","GeoJSON","readFeatures","addFeatures","setDrawInteraction","interaction","Draw","freehand","getDrawInteraction","editAnnotation","setMap","enableToggle","toggleHandler","addInteraction","removeInteraction","removeFeature","transformedFeatures","transformedFeature","writeFeatures","storeAnnotations","resolution","styles","end","getLastCoordinate","beforeEnd","getCoordinateAt","dy","atan2","lineStr1","LineString","lineStr2","diameter","confArc","Circle","lineDash","getFirstCoordinate","reloadFilters","clearAnimation","city","layerSource","validCitiesHash","population","lng","lat","description","fit","maxConnectionsCount","arcGenerator","GreatCircle","arcLine","Arc","geometries","featureType","handleConnectionClick","out","currentGeonameId","suppressConnectionOccurrences","locationId","newId","appendOverrides","focusleave","isAll","newConfig","authorLabel","titleLabel","keywordLabel","pubDateLabel","loading","disclaimer","noDataForField","timeout","currentConnectionOccurrence","stepByStepMode","keepAnimationInFrame","Geonames","setGeonames","getParams","disable","setMinValue","setMaxValue","suspendEvent","resumeEvent","getAnimationLayer","getCurrentConnectionOccurrence","setCurrentConnectionOccurrence","getGlyph","setGlyph","Glyph","setStepByStepMode","setKeepAnimationInFrame","ownerCmp","totalCitiesCount","currentConnectionsCount","totalConnectionsCount","autoCloseDelay","closable","querysearchfield","pubDateSlider","getTimeout","setAnimationLayer","connectionsLayerSource","connectionsFeatures","getKeepAnimationInFrame","calculateExtent","containsExtent","newExtent","allcoords","ticker","getCoordinates","elapsed","getMillisPerAnimation","getStepByStepMode","knots","tokensStore","currentTerm","firstDoc","pDoc","processDocument","getKnots","getTokensStore","termsToKeep","setTokensStore","currTerm","getCurrentTerm","getRefreshInterval","setRefreshInterval","getStartAngle","setStartAngle","getAngleIncrement","setAngleIncrement","setKnots","knotClickHandler","updateRefreshInterval","updateStartAngle","updateAngleIncrement","setCurrentTerm","dir","maxLength","overlapFilter","ct","maxBins","comparisonCorpus","pruneRemoved","expandbody","percent","numberRenderer","eopts","tipTpl","getDocumentTitle","MODE_EDITING","MODE_NORMAL","dockedItemsItems","overModel","dropPosition","dropHandlers","keepRemoveReorderHandler","btnMode","confirmBtn","editCorpus","require","exportGridAll","cellEditing","clicksToEdit","onEditComplete","getQueryFromStore","setLoading","createNewCorpus","getReader","rawData","documentsFinder","typeAhead","Store","autoDestroy","menuDisabled","removeRow","getHeaderByDataIndex","getEditor","updateAggregate","getQueryFromRecord","getCell","exportBtn","groups","moveWordsTimeout","angleField","donut","getMoveWordsTimeout","offsetX","moveWords","lcwords","lenVal","setGroups","svgEl","svgDom","getGroups","FountainWord","yshift","jump","groupVals","until","gaugeVals","ys","delta","avg","polar","setSprites","sparkline","chunkify","setMoveWordsTimeout","balanced","minEdgeCount","network","nodesStore","nodesDataSet","edgesDataSet","isNetworkBounded","categorizedNodeOptions","person","organization","nodeOptions","shape","edgeOptions","hover","labelHighlightBold","highlightOptions","setNodesStore","sortOnLoad","getNodesStore","getNetwork","selectNodes","categoriesHandler","allowDecimals","allowExponential","allowOnlyWhitespace","setRawValue","repulsion","nodeDistance","startSimulation","springConstant","entityCollocationsGraph","newEdgeCount","processEntities","entityParent","scaleFont","linear","visNodes","visEdges","to","setNodesDataSet","DataSet","setEdgesDataSet","hoverConnectedEdges","multiselect","solver","Network","getNodesDataSet","getEdgesDataSet","getIsNetworkBounded","nodePositions","canvasToDOM","boundedX","boundedY","bXY","DOMtoCanvas","doNodeSelect","unselectAll","setNetwork","getConnectedNodes","getConnectedEdges","nodeObj","selectionHandler","selectObject","edgeObj","checkitem","controls","frequenciesGroup","coverageGroup","distributionsGroup","termsGroup","inDocumentsLabel","inDocumentsLabelTip","spanSomeLabel","spanSomeLabelTip","spanAllLabel","spanAllLabelTip","spanOnlyLabel","spanOnlyLabelTip","rawFreqLabel","rawFreqLabelTip","rawFreqPercentileLabel","rawFreqPercentileLabelTip","distributionsStdDevLabel","distributionsStdDevLabelTip","distributionsStdDevPercentileLabel","distributionsStdDevPercentileLabelTip","termsLengthLabel","termsLengthLabelTip","termsLengthPercentileLabel","termsLengthPercentileLabelTip","distributionIncreasesLabel","distributionIncreasesLabelTip","distributionConsecutiveIncreasesLabel","distributionConsecutiveIncreasesLabelTip","distributionDecreasesLabel","distributionDecreasesLabelTip","distributionConsecutiveDecreasesLabel","distributionConsecutiveDecreasesLabelTip","distributionMaxLabel","distributionMaxLabelTip","distributionMinLabel","distributionMinLabelTip","presetsGroup","presetHighFreq","presetHighFreqLonger","presetSingleDoc","presetIncreaseDistributions","presetDecreaseDistributions","presetNearStartDistributions","presetNearEndDistributions","presetSporadicDistributions","visibleTerms","scaleSqrt","inDocuments","spanSome","spanAll","spanOnly","termLength","termsLengthPercentile","rawFreqPercentile","distributionsStdDev","distributionsStdDevPercentile","distributionIncreases","distributionDecreases","distributionConsecutiveIncreases","distributionConsecutiveDecreases","distributionMax","distributionMin","allowFunctions","LoomControl","initControl","setMin","setMax","validateRecord","getLow","getHigh","offsetTipText","low","high","allvals","scaledVals","squareDiffs","sqrDiff","avgSquareDiff","stdDev","termsLength","increases","decreases","control","setEnabled","setLow","setHigh","getEnabled","filterRecords","setControls","clearApiParamsForControls","currentParams","tbitems","getByKey","getMax","getGroup","beforerender","getMin","tipText","getOffsetTipText","updateFromControl","threads","thick","fadeIt","filterchange","textHeight","fisheye","circular","distortion","yFisheye","scaleIdentity","currentItem","fs","fo","yin","xincrement","scaleApi","yscale","valueline","curveCardinal","tooltipbox","tooltiptext","datum","raise","fireEventArgs","updateControlsFromStore","clearFilter","keep","every","getControls","getValidateRecord","revalidate","clearRect","loomTermRecords","LoomTermRecords","getChecked","newvals","getField","isBoolean","some","termRecords","setTermRecords","getTermRecords","LoomTermRecord","texts","setRecord","setTerm","setTexts","columnWidth","getTexts","observable","initControls","maxTokens","tokensPerSegment","maxVerticalLines","maxSegments","initialize","updateSearchResults","lineSize","setMaxVerticalLines","gutterSize","corpusSize","gutter","columnSize","segmentWidth","maxSegmentsPerLine","setMaxSegments","getMaxVerticalLines","setMaxTokens","setTokensPerSegment","getMaxTokens","getMaxSegments","segments","addValue","redistributeDistributions","drawDocumentDistributions","getTokensPerSegment","newdistributions","textFont","editMagnet","updateFromQueries","clientX","clientY","docRadius","isHovering","magnets","updateDocs","diam","updateMagnets","stepValue","newpos","allowEmpty","rad","notMatching","targetX","targetY","weights","needRedraw","needMove","noHovering","hoveringTerms","hoveringDocs","halfSize","minDist","spring","ax","ay","uri","microocp","itemsMap","tagsMap","isClose","isGroupItems","entry","Corpus","ace","edit","getDom","setEditor","getSession","setShowPrintMargin","setShowGutter","$blockScrolling","setOptions","autoScrollEditorIntoView","setBehavioursEnabled","reparse","lines","expressions","inStoreItems","cocoa","inStoreItem","loadDataFromUrl","scrollToLine","skipToDocId","innerContainer","exportVisualization","lastScrollTop","scrollIntoView","insertWhere","lastLocationUpdate","INITIAL_LIMIT","parentTool","s","documentFrequency","isLastNewLine","newContents","isNewLine","updateText","highlightKeywords","centerPanel","setInnerContainer","getLastScrollTop","scrollTop","fetchPrevious","scrollHeight","fetchNext","amount","getLastLocationUpdate","updateLocationMarker","setLastScrollTop","Token","splitterResize","documentRelativePositionSelected","bufferPosition","corpusTermsClicked","documentTermsClicked","documentsClicked","termLocationClicked","termRec","doScroll","getInnerContainer","spans","caseInsensitiveQuery","compEl","firstChild","nodeValue","scroll","readerContainer","getPrevDoc","scrollContainer","scrollNeeded","getScrollIntoViewXY","scrollLeft","insertSibling","setInsertWhere","setScrollIntoView","nextSib","oldNext","doClear","loadingMask","inserted","getInsertWhere","getScrollIntoView","readerWords","firstWord","lastWord","partialFirstDoc","info1","info2","docTokens","currToken","remains","tokenPosInDoc","updateChart","fetch","iframe","analysis","clusters","perplexity","iterations","comparisonType","caStore","pcaStore","tsneStore","docSimStore","chartMenu","termsTimeout","highlightData","highlightTask","tokenFreqTipTemplate","docFreqTipTemplate","setCaStore","maskAndBuildChart","setPcaStore","setTsneStore","setDocSimStore","groupField","setChartMenu","getSeries","enableToolTips","tbar","doLabels","anyMatch","filterChart","collapseMode","numb","oldValue","doLoad","getTermsTimeout","setTermsTimeout","doAnalysisChange","dims","forceFit","ftype","hideGroupedHeader","enableGroupingMenu","getNearbyForTerm","allowDeselect","toggleOnClick","isDoc","selectTerm","enable","setNewTerm","loadStoreFromJson","oldChart","setCheckItemFromApi","apiParamName","setCheckBound","getCaStore","getPcaStore","getDocSimStore","loadRawData","getTsneStore","buildChart","numDims","eigenTotal","pcMapping","eigenValue","maxFill","minFill","docData","isTerm","addSorted","z","tokenData","cluster","newCount","termSeriesStore","docSeriesStore","interactions","sprites","innerPadding","display","clusterIndex","scatterplot","fillAlpha","strokeAlpha","interpolate","getDefaultDocColor","parentXY","chartItem","getItemForPoint","disableToolTips","getChartMenu","nearby","getNewTerm","getSurface","getItems","setHighlightItem","getSprites","getItemInstancing","getPointFromIndex","setHighlightData","getHighlightTask","setHighlightTask","TaskManager","newTask","run","doHighlight","interval","repeat","getHighlightData","surfaceMatrix","matrix","prependMatrix","dataX","dataY","transformPoint","surf","setAttributes","reQueries","series0","label0","setAttributesFor","getCurrentTerms","keepCurrentTerms","lambda","minSrc","maxSrc","minDst","maxDst","seriesType","tipsDisabled","showTip","layerData","graphId","graphMargin","setGraphId","Toolbar","JsonStore","isActive","firstElementChild","loadFromRecords","binsMax","resizeGraph","loadFromDocument","legendData","setLayerData","getLayerData","steps","docsCount","processedLayers","y1","curveCatmullRom","xAxisDomain","xAxisScale","scalePoint","paths","xAxisText","yAxisText","stackOffsetWiggle","order","stackOrderInsideOut","getGraphId","numberOfDocumentsForDistinctiveWords","loadSummary","addListener","available","spark","main","d1","d2","docsLengthTpl","sparkWidth","numberOfTerms","valTip","showMoreDistinctiveWords","distinctiveWordsContainer","selectNode","Query","addRecords","array","remaining","minRawFreq","perim","tokensFetch","isReading","availableWidth","availableHeight","setDiam","setPerim","getPerim","drawTerms","drawReading","current","readingIndex","lastToken","readingStartTime","sourceTerm","targetTerm","maxTail","previousBeziers","sx","sy","px","previousTerm","py","ix","iy","xd","yd","drawBezierSplit","nextReadingIndex","startReadingIndex","isCurrentTerm","isReadingTerm","maxRawFreq","termsMap","tokensLoading","fetchMoreTokens","getDiam","fetchMoreDocumentTerms","noMoreTokens","animatePathDrawing","x1","step","animatePathDrawingStep","timestamp","requestAnimationFrame","t0","t1","quadraticCurveTo","t00","t01","t02","t03","nx0","ny0","nx2","ny2","nx1","lerp","ny1","v0","v1","getPath","twicLevel","TWiC","Level","Instance","LoadJSON","m_queue","await","graphViews","infoViews","divName","topicBar","TopicBar","docBar","DocumentBar","corpusClusterView","CorpusClusterView","m_linkedViews","Initialize","Start","numInitialTerms","scalingFactor","maxCollocateValue","minFillValue","maxFillValue","currentData","blacklist","visInfo","MODE_TOP","MODE_DISTINCT","MIN_TERMS","MAX_TERMS","COLLOCATES_LIMIT","MIN_SCALING","MAX_SCALING","MIN_STROKE_OPACITY","MAX_STROKE_OPACITY","getScalingFactor","setScalingFactor","reload","getCurrentData","getBlacklist","activate","resetVis","resetMinMax","setCurrentData","getDistinctTerms","getTopTerms","processCollocates","buildVisFromData","setMinRawFreq","setMaxRawFreq","setMaxCollocateValue","setMinFillValue","setMaxFillValue","getMaxRawFreq","getMinRawFreq","minFillVal","getMinFillValue","maxFillVal","getMaxFillValue","fillVal","fillValue","collocates","getCollocatesForQuery","collocatesWhitelist","maxCol","getMaxCollocateValue","rootId","stratify","parentId","collocateFill","scalePow","exponent","defaultFill","layoutRadius","layoutArea","totalTerms","termArea","termRadius","scalingInverse","maxFontSize","textSizer","fillLabel","collocate","pack","setVisInfo","termsRadio","visibleBins","yAxisScale","onLoadHandler","getTermsRadio","corpusStore","documentStore","legendMenu","playing","bool","forId","setSpeed","sliderParam","setTermsRadio","queryTerm","trends","radiogroup","getBoxes","setBoxLabel","chartType","activeCls","docLabels","toFixed","kinds","kind","getItemToolTip","singleDoc","isOneTerm","serie","stacked","showInLegend","smooth","showMarkers","clickTimer","blockClick","itemdblclick","translateY","animation","moveEvents","setHidden","itemhighlightchange","titles","labelInSpan","reloadFromChart","notYetImplemented","oldTools","getNotYetImplemented","yes","getNewUrl","queryString","getFullYear","getVersion","getBuild","footer","footerWidth","partWidth","getTextWidth","animCollapse","titleCollapse","floatable","hideCollapseTool","onCollapse","titleAlign","home","href","panelsString","tabpanels","tabpanel","cirrus","toolbar","panelChange","introHtml","fieldItems","fieldColumns","intro","foot","handleSendToVoyant","handleExport","bodyStyle","chartRangeMin","performAggregateQuery","getAggregateQuery","lastOptions","temporaryCorpus","statuscontainer","exp","aggregateQueries","ComponentQuery","tableLayout","initTableLayout","initBorderLayoutComponents","doTableSizing","newwidth","newheight","oldwidth","oldheight","layoutString","decodeURI","addBorderLayouts","custom","suspendLayouts","numCols","cellWidth","cellHeight","colspan","rowspan","tableAttrs","tdAttrs","verticalAlign","resumeLayouts","sizeMap","tableSize","cellEl","panelEl","cmpId","sizeObj","getCmp","widthPercent","initialConfig","heightPercent","setSize","script","previous","fieldStyle","veliza","resetOriginalValue","specialkey","handleUserSentence","tf","addSentence","sendApiParamMessage","sentences","sentence","fromCorpus","noScroll","setPrevious","meta","speaker","kwicStore","numBranches","lastClick","doubleClickDelay","getNumBranches","setNumBranches","setKwicStore","parseRecords","firstTerm","setRoot","getTree","parsedRecords","pr","prefix","prefixTokenCounts","suffixTokenCounts","prefixToken","suffixToken","sortableTokens","suffixCount","prefixCount","prioritizeSuffix","s1","s2","topSuffixTokens","topPrefixTokens","prefixes","suffixes","parsedRecord","dt","setTree","getLastClick","setLastClick","stripPunctuation","getKwicStore","simulation","tempNodes","filterOutUniqueTerms","currentSegment","segmentTerms","segmentTermsQueue","segmentDelay","segmentDelayTimer","webWorker","isSimulating","transitionTime","letterDistribution","frequencyScale","xForceStrength","yForceStrength","chargeStrength","chargeDistance","debugMsg","getSegmentDelay","setSegmentDelay","restartSegmentTimer","getTransitionTime","setTransitionTime","getXForceStrength","setXForceStrength","getYForceStrength","setYForceStrength","getChargeStrength","setChargeStrength","getChargeDistance","setChargeDistance","getSegmentDelayTimer","initVis","setTempNodes","getWebWorker","setWebWorker","Worker","onmessage","handleWebWorkerMessage","setSegments","corpusSegmentTerms","getFilterOutUniqueTerms","rawFreqs","setCurrentSegment","getSegments","getNextSegment","setSegmentDelayTimer","updateNodePositions","getCurrentSegment","processTermsForSegment","segmentIndex","letterDistMap","u","firstLetter","setSegmentTerms","setMinFreq","letterDist","setLetterDistribution","calculateNodeSizes","getSegmentTerms","runSimulation","getTempNodes","fontSizer","getFrequencyScale","getMaxFontSize","bboxTotal","availableSpace","setMaxFontSize","setIsSimulating","postMessage","getMinFreq","getMaxFreq","getLetterDistribution","timeEnd","getSegmentTermsQueue","getIsTransitioning","getIsSimulating","setIsTransitioning","allNodes","updateMinFreq","setFrequencyScale","updateMaxFreq","numTopics","documentTopicSmoothing","topicWordSmoothing","vocabularySize","vocabularyCounts","stopwords","docSortSmoothing","sumDocSortSmoothing","requestedSweeps","wordTopicCounts","topicWordCounts","tokensPerTopic","topicWeights","totalIterations","zeros","ret","score","buffer","postSweep","loadFromExistingDocuments","runIterations","resetData","loadStopwords","setStopwords","loadDocuments","allwords","totalWords","wordsPerBin","parseLine","setVocabularyCounts","setSumDocSortSmoothing","getDocSortSmoothing","setRequestedSweeps","setWordTopicCounts","setTopicWordCounts","setTokensPerTopic","setTopicWeights","setDocuments","setTotalIterations","originalText","sweeps","getRequestedSweeps","getTotalIterations","progressText","customUpdateProgress","updateProgress","sweep","startTime","getVocabularySize","getTopicWordSmoothing","getTokensPerTopic","getWordTopicCounts","getTopicWeights","getDocumentTopicSmoothing","topicNormalizers","topic","docTopicCounts","topicCounts","currentWordTopicCounts","sample","sortTopicWords","getTopicWordCounts","getSumDocSortSmoothing","scores","topNWords","wordCounts","byCountDescending","getStopwords","getVocabularyCounts","docID","docDate","rawTokens","setVocabularySize","relatedWords","nodeclicked","timedout","exportTitle","exportOpen","exportDownload","cancelTitle","exportCmp","wrapper","getContent","getCellId","properties","File","Blob","URL","createObjectURL","myWindow","open","write","setOrder","updateHtml","getOrder","QUESTION","cellId","isEditing","setCellId","tb","setVisibilityMode","Element","VISIBILITY","setActiveMode","mon","setVisibility","getIsEditing","theme","isChangeRegistered","editedTimeout","setUseWorker","setTheme","getTheme","minLines","maxLines","scrollPastEnd","setHighlightActiveLine","setHighlightGutterLine","clearSelection","ev","getScreenLength","getLines","lineHeight","scrollBar","getIsChangeRegistered","setIsChangeRegistered","setIsRun","setIsEdited","getEditedTimeout","setEditedTimeout","commands","addCommand","bindKey","mac","runUntil","loadModule","module","enableTern","doc_comment","fullDocs","useWorker","enableSnippets","enableBasicAutocompletion","removed","switchModes","runMultiple","runUntilTip","runFrom","runFromTip","codeMode","codeModeTitle","codeModeTip","configureTip","autoExecuteOnLoad","isRun","autoExecute","isWarnedAboutPreviousCells","EMPTY_RESULTS_TEXT","_getResultsComponent","output","newval","oldval","autoExecCheck","getAutoExecute","setAutoExecute","toggleCls","uiHtml","_getUIComponent","light","runnable","forceRun","getIsWarnedAboutPreviousCells","_run","getIsRun","btnId","setIsWarnedAboutPreviousCells","currentBlock","currentNotebook","setCurrentBlock","eval","catch","finally","_showResult","err","resultEl","clearResults","tryToUnmask","Spyral","promises","isFulfilled","valueOf","toReturn","setContentAndMode","setContent","ckeditorConfig","extraPlugins","allowedContent","toolbarCanCollapse","startupFocus","isEditRegistered","currentHeight","focusManager","blur","readOnly","contenteditable","setIsEditing","CKEDITOR","inline","getCkeditorConfig","innerText","setReadOnly","editorHeight","getCurrentHeight","setCurrentHeight","getIsEditRegistered","setIsEditRegistered","octokit","authToken","Octokit","auth","userAgent","getInfoForAuthenticatedUser","users","getAuthenticated","getReposForAuthenticatedUser","affiliation","page","per_page","repos","listForAuthenticatedUser","getReposForUser","owner","searchWithinRepositories","getRepoContents","repoId","repo","parseFullName","getBranchSHAs","resp","getTreeContentsRecursively","git","tree_sha","baseTreeSHA","recursive","unflattenContents","truncated","loadFile","ref","getContents","sha","atob","doesRepoExist","getPermissionsForUser","username","getCollaboratorPermissionLevel","permission","saveFile","getLatestFileSHA","createOrUpdateFile","fullName","getBranch","commit","parentCommitSHA","oid","flatContents","findSubFolder","parentFolder","folderNameToFind","subfolder","addSubFolder","newFolderName","newSubFolder","addFile","newFileName","newFile","isFile","pathSections","pathSection","pathSectionIndex","subFolder","repoType","selectedNode","newValues","setRepoType","clearTree","getRepoType","addReposToTree","repoOwner","prev","rootVisible","afteritemexpand","hasChildNodes","addRepoContentsToNode","setSelectedNode","updateSelectedNode","repoParent","setRepoId","setPath","repoTree","getRootNode","rawRepos","full_name","leaf","octokitResponse","parseContents","nodeConfig","currentFile","saveData","setCurrentFile","nodeSelected","getRepoId","pathComponents","getPathComponents","folder","nodeDeselected","validitychange","valid","initForm","login","setUsername","getCurrentFile","doSave","isPR","setStatus","repoExists","getUsername","fileData","octokitWrapper","currentWindow","showAuthenticate","authWin","postMessageHandler","origin","removeEventListener","initOctokitWrapper","showLoad","getCookieValue","loadWin","maximizable","repoBrowser","showSave","saveWin","formValidityChange","fileSaved","cookieName","sMatch","cookie","github","OctokitWrapper","loadFileFromId","filePath","accessCode","notebookId","newNotebook","beforeshowtip","currentTarget","inputAttrTpl","generateAccessCode","getAccessCode","vtype","doesNotebookIdExist","findField","markInvalid","didSave","Load","trombone","email","setAccessCode","alphabet","metadataEditor","metadataTitle","metadataTip","metadataAuthor","metadataKeywords","metadataDescription","metadataLicense","metadataLanguage","metadataReset","metadataSave","metadataCancel","created","modified","clickToEdit","cantLoadNotebook","cannotLoadJson","cannotLoadJsonUnrecognized","cannotLoadUnrecognized","openTitle","openMsg","exportHtmlDownload","errorParsingDomInput","inputEncodedBase64Json","isEdited","version","storageSolution","voyantStorageDialogs","githubDialogs","spyralTernDocs","showSaveDialog","getStorageSolution","loadFromString","runAll","showMetadataEditor","head","notebookWrapperMoveUp","notebookWrapperMoveDown","notebookWrapperRemove","notebookWrapperAdd","notebookLoaded","autoExecuteCells","StorageDialogs","fileLoaded","getNotebookId","setNotebookId","saveCancelled","GitHubDialogs","Table","window.loadCorpus","createTable","window.createTable","isDefined","spyralIdMatches","pathname","isGithub","githubId","inputJsonArrayOfEncodedBase64","block","addText","addCode","loadFromUrl","loadFromId","setStorageSolution","addNew","setBlock","getCurrentBlock","findIndex","getBlock","setMetadata","Metadata","saveAs","getMetadata","setDateNow","generateExportHtml","blocks","loadFromHtmlString","parser","DOMParser","parseFromString","hasDomError","querySelectorAll","section","classes","classList","inputEl","typeRe","editorType","secPos","startPre","endPre","autoexec","upToCmp","fromCmp","matched","_add","Util","updateMetadata","getInnerHeaderHtml","getInnerFooterHtml","WARNING","redoOrder","hasModifier","aceChromeEl","getHeaderHtml","codeTextLayer","setProperty","license","shortDate","exportHtml","enableAlignments","enableColors","enableFont","enableFontSize","enableLinks","enableLists","tromboneUrl","setBaseUrl","setTromboneUrl","setCategoriesManager","Categories","_getColor","this.getColor","_getColorForTerm","this.getColorForTerm","protocol","getRelativeUrl","relative","launch","getQuickTip","tromboneCall","eventName","viewport","isHeard","hasListener","toolFlow","hasQueryToLoad","useCache","loadColorPaletteForCorpus","corpuscreator","beforeclose","archive","validateCorpusLoadParams","validateCorpusAccess","passWin","password","passwordForSession","access","setCorpusAccess","passwordForSessionRemove","storedCategories","_categories","_features","docIndObj","rtl","setActiveItem","noskin","additional","SPLIT_SIZE","Localization","activeItem","getCorpusCreatorText","getTool","configString"]
}
