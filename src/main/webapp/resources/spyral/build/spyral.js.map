{"version":3,"file":"spyral.js","sources":["../../../../../../../voyantjs/src/load.js","../../../../../../../voyantjs/src/corpus.js","../../../../../../../voyantjs/src/chart.js","../../../../../../../voyantjs/src/table.js","../node_modules/regenerator-runtime/runtime.js","../src/notebook.js","../src/util.js","../src/metadata.js","../src/index.js"],"sourcesContent":["/**\r\n * Class embodying Load functionality.\r\n * @memberof Spyral\r\n * @class\r\n */\r\nclass Load {\r\n\tstatic baseUrl;\r\n\r\n\t/**\r\n\t * Set the base URL for use with the Load class\r\n\t * @param {string} baseUrl \r\n\t */\r\n\tstatic setBaseUrl(baseUrl) {\r\n\t\tthis.baseUrl = baseUrl;\r\n\t}\r\n\r\n\t/**\r\n\t * Make a call to trombone\r\n\t * @param {object} config \r\n\t * @param {object} params\r\n\t * @returns {JSON}\r\n\t */\r\n\tstatic trombone(config = {}, params) {\r\n\t\tlet url = new URL(config.trombone ? config.trombone : this.baseUrl + \"trombone\");\r\n\t\tlet all = { ...config, ...params };\r\n\t\tfor (var key in all) {\r\n\t\t\tif (all[key] === undefined) { delete all[key] }\r\n\t\t}\r\n\t\tlet searchParams = Object.keys(all).map(key => encodeURIComponent(key) + '=' + encodeURIComponent(all[key])).join(\"&\")\r\n\t\tlet opt = {};\r\n\t\tif (searchParams.length < 800 || (\"method\" in all && all[\"method\"] == \"GET\")) {\r\n\t\t\tfor (var key in all) { url.searchParams.set(key, all[key]); }\r\n\t\t} else {\r\n\t\t\topt = {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: { 'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8' },\r\n\t\t\t\tbody: searchParams\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn fetch(url.toString(), opt).then(response => {\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response.json()\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn response.text().then(text => {\r\n\t\t\t\t\tif (Voyant && Voyant.util && Voyant.util.DetailedError) {\r\n\t\t\t\t\t\tnew Voyant.util.DetailedError({\r\n\t\t\t\t\t\t\tmsg: \"\",\r\n\t\t\t\t\t\t\terror: text.split(/(\\r\\n|\\r|\\n)/).shift(),\r\n\t\t\t\t\t\t\tdetails: text\r\n\t\t\t\t\t\t}).showMsg();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\talert(text.split(/(\\r\\n|\\r|\\n)/).shift())\r\n\t\t\t\t\t\tif (window.console) { console.error(text) }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthrow Error(text);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * Fetch content from a URL, often resolving cross-domain data constraints\r\n\t * @param {string} urlToFetch \r\n\t * @param {object} config\r\n\t * @returns {Response}\r\n\t */\r\n\tstatic load(urlToFetch, config) {\r\n\t\tlet url = new URL(config && config.trombone ? config.trombone : this.baseUrl + \"trombone\");\r\n\t\turl.searchParams.set(\"fetchData\", urlToFetch);\r\n\t\treturn fetch(url.toString()).then(response => {\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn response.text().then(text => {\r\n\t\t\t\t\tif (Voyant && Voyant.util && Voyant.util.DetailedError) {\r\n\t\t\t\t\t\tnew Voyant.util.DetailedError({\r\n\t\t\t\t\t\t\terror: text.split(/(\\r\\n|\\r|\\n)/).shift(),\r\n\t\t\t\t\t\t\tdetails: text\r\n\t\t\t\t\t\t}).showMsg();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\talert(text.split(/(\\r\\n|\\r|\\n)/).shift())\r\n\t\t\t\t\t\tif (window.console) { console.error(text) }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthrow Error(text);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}).catch(err => { throw err })\r\n\t}\r\n\r\n\t/**\r\n\t * Fetch HTML content from a URL\r\n\t * @param {string} url \r\n\t * @returns {Document}\r\n\t */\r\n\tstatic html(url) {\r\n\t\treturn this.text(url).then(text => new DOMParser().parseFromString(text, 'text/html'));\r\n\t}\r\n\r\n\t/**\r\n\t * Fetch XML content from a URL\r\n\t * @param {string} url \r\n\t * @returns {XMLDocument}\r\n\t */\r\n\tstatic xml(url) {\r\n\t\treturn this.text(url).then(text => new DOMParser().parseFromString(text, 'text/xml'));\r\n\t}\r\n\r\n\t/**\r\n\t * Fetch JSON content from a URL\r\n\t * @param {string} url \r\n\t * @returns {JSON}\r\n\t */\r\n\tstatic json(url) {\r\n\t\treturn this.load(url).then(response => response.json());\r\n\t}\r\n\r\n\t/**\r\n\t * Fetch text content from a URL\r\n\t * @param {string} url \r\n\t * @returns {string}\r\n\t */\r\n\tstatic text(url) {\r\n\t\treturn this.load(url).then(response => response.text());\r\n\t}\r\n}\r\n\r\nexport default Load\r\n","import Load from './load';\r\n\r\nfunction isDocumentsMode(config) {\r\n\treturn config && ((config.mode && config.mode === \"documents\") || config.documents);\r\n}\r\n\r\n/**\r\n * Class representing a Corpus.\r\n * @memberof Spyral\r\n * @class\r\n */\r\nclass Corpus {\r\n\t/**\r\n\t * Create a new Corpus using the specified Corpus ID\r\n\t * @constructor\r\n\t * @param {string} id The Corpus ID\r\n\t */\r\n\tconstructor(id) {\r\n\t\tthis.corpusid = id;\r\n\t}\r\n\r\n\tstatic Load = Load;\r\n\r\n\tstatic setBaseUrl(baseUrl) {\r\n\t\tLoad.setBaseUrl(baseUrl);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the ID\r\n\t * @return {string} The ID\r\n\t */\r\n\tid() {\r\n\t\tlet me = this\r\n\t\treturn new Promise(resolve => resolve(me.corpusid));\r\n\t}\r\n\r\n\t/**\r\n\t * Create a Corpus and return the ID\r\n\t * @param {object} config \r\n\t * @param {object} api \r\n\t */\r\n\tstatic id(config, api) {\r\n\t\treturn Corpus.load(config).then(corpus => corpus.id(api || config));\r\n\t}\r\n\r\n\t/**\r\n\t * Load the metadata\r\n\t * @param {*} config \r\n\t * @param {*} params \r\n\t */\r\n\tmetadata(config, params) {\r\n\t\treturn Load.trombone(config, {\r\n\t\t\ttool: isDocumentsMode(config) ? \"corpus.DocumentsMetadata\" : \"corpus.CorpusMetadata\",\r\n\t\t\tcorpus: this.corpusid\r\n\t\t})\r\n\t\t.then(data => isDocumentsMode(config) ? data.documentsMetadata.documents : data.corpus.metadata)\r\n\t}\r\n\r\n\t/**\r\n\t * Create a Corpus and return the metadata\r\n\t * @param {*} config \r\n\t * @param {*} api \r\n\t */\r\n\tstatic metadata(config, api) {\r\n\t\treturn Corpus.load(config).then(corpus => corpus.metadata(api || config));\r\n\t}\r\n\t\r\n\tsummary(config) {\r\n\t\treturn this.metadata().then(data => {\r\n\t\t\t// TODO: make this a template\r\n\t\t\treturn `This corpus (${data.alias ? data.alias : data.id}) has ${data.documentsCount.toLocaleString()} documents with ${data.lexicalTokensCount.toLocaleString()} total words and ${data.lexicalTypesCount.toLocaleString()} unique word forms.`\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * Create a Corpus and return the summary\r\n\t * @param {*} config \r\n\t * @param {*} api \r\n\t */\r\n\tstatic summary(config, api) {\r\n\t\treturn Corpus.load(config).then(corpus => corpus.summary(api || config));\r\n\t}\r\n\t\r\n\ttitles(config) {\r\n\t\treturn Load.trombone(config, {\r\n\t\t\ttool: \"corpus.DocumentsMetadata\",\r\n\t\t\tcorpus: this.corpusid\r\n\t\t})\r\n\t\t.then(data => data.documentsMetadata.documents.map(doc => doc.title))\r\n\t}\r\n\r\n\t/**\r\n\t * Create a Corpus and return the titles\r\n\t * @param {*} config \r\n\t * @param {*} api \r\n\t */\r\n\tstatic titles(config, api) {\r\n\t\treturn Corpus.load(config).then(corpus => corpus.titles(api || config));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the text\r\n\t * @param {*} config \r\n\t */\r\n\ttext(config) {\r\n\t\treturn this.texts(config).then(data => data.join(\"\\n\"))\r\n\t}\r\n\r\n\t/**\r\n\t * Create a Corpus and return the text\r\n\t * @param {*} config \r\n\t * @param {*} api \r\n\t */\r\n\tstatic text(config, api) {\r\n\t\treturn Corpus.load(config).then(corpus => corpus.text(api || config));\t\r\n\t}\r\n\t\r\n\ttexts(config) {\r\n\t\treturn Load.trombone(config, {\r\n\t\t\ttool: \"corpus.CorpusTexts\",\r\n\t\t\tcorpus: this.corpusid\r\n\t\t}).then(data => data.texts.texts)\r\n\t}\r\n\r\n\t/**\r\n\t * Create a Corpus and return the texts\r\n\t * @param {*} config \r\n\t * @param {*} api \r\n\t */\r\n\tstatic texts(config, api) {\r\n\t\treturn Corpus.load(config).then(corpus => corpus.texts(api || config));\t\r\n\t}\r\n\t\r\n\tterms(config) {\r\n\t\treturn Load.trombone(config, {\r\n\t\t\ttool: isDocumentsMode(config) ? \"corpus.DocumentTerms\" : \"corpus.CorpusTerms\",\r\n\t\t\tcorpus: this.corpusid\r\n\t\t}).then(data => isDocumentsMode(config) ? data.documentTerms.terms : data.corpusTerms.terms)\r\n\t}\r\n\r\n\t/**\r\n\t * Create a Corpus and return the terms\r\n\t * @param {*} config \r\n\t * @param {*} api \r\n\t */\r\n\tstatic terms(config, api) {\r\n\t\treturn Corpus.load(config).then(corpus => corpus.terms(api || config));\r\n\t}\r\n\t\r\n\ttokens(config) {\r\n\t\treturn Load.trombone(config, {\r\n\t\t\ttool: \"corpus.DocumentTokens\",\r\n\t\t\tcorpus: this.corpusid\r\n\t\t}).then(data => data.documentTokens.tokens)\r\n\t}\r\n\r\n\t/**\r\n\t * Create a Corpus and return the tokens\r\n\t * @param {*} config \r\n\t * @param {*} api \r\n\t */\r\n\tstatic tokens(config, api) {\r\n\t\treturn Corpus.load(config).then(corpus => corpus.tokens(api || config));\r\n\t}\r\n\r\n\twords(config = {}) {\r\n\t\t// by default DocumentTokens limits to 50 which probably isn't expected\r\n\t\tif (!(\"limit\" in config)) {config.limit=0;}\r\n\t\treturn Load.trombone(config, {\r\n\t\t\ttool: \"corpus.DocumentTokens\",\r\n\t\t\tnoOthers: true,\r\n\t\t\tcorpus: this.corpusid\r\n\t\t}).then(data => data.documentTokens.tokens.map(t => t.term))\r\n\t}\r\n\r\n\t/**\r\n\t * Create a Corpus and return an array of lexical forms (words) in document order.\r\n\t * @param {object} config \r\n\t * @param {object} api \r\n\t */\r\n\tstatic words(config, api) {\r\n\t\treturn Corpus.load(config).then(corpus => corpus.words(api || config));\r\n\t}\r\n\t\r\n\tcontexts(config) {\r\n\t\tif ((!config || !config.query) && console) {console.warn(\"No query provided for contexts request.\")}\r\n\t\treturn Load.trombone(config, {\r\n\t\t\ttool: \"corpus.DocumentContexts\",\r\n\t\t\tcorpus: this.corpusid\r\n\t\t}).then(data => data.documentContexts.contexts)\r\n\t}\r\n\t\r\n\t/**\r\n\t * Create a Corpus and return the contexts\r\n\t * @param {object} config \r\n\t * @param {object} api \r\n\t */\r\n\tstatic contexts(config, api) {\r\n\t\treturn Corpus.load(config).then(corpus => corpus.contexts(api || config));\r\n\t}\r\n\t\r\n\tcollocates(config) {\r\n\t\tif ((!config || !config.query) && console) {console.warn(\"No query provided for collocates request.\")}\r\n\t\treturn Load.trombone(config, {\r\n\t\t\ttool: \"corpus.CorpusCollocates\",\r\n\t\t\tcorpus: this.corpusid\r\n\t\t}).then(data => data.corpusCollocates.collocates)\r\n\t}\r\n\t\r\n\t/**\r\n\t * Create a Corpus and return the collocates\r\n\t * @param {object} config \r\n\t * @param {object} api \r\n\t */\r\n\tstatic collocates(config, api) {\r\n\t\treturn Corpus.load(config).then(corpus => corpus.collocates(api || config));\r\n\t}\r\n\r\n\tphrases(config) {\r\n\t\treturn Load.trombone(config, {\r\n\t\t\ttool: isDocumentsMode(config) ? \"corpus.DocumentNgrams\" : \"corpus.CorpusNgrams\",\r\n\t\t\tcorpus: this.corpusid\r\n\t\t}).then(data => isDocumentsMode(config) ? data.documentNgrams.ngrams : data.corpusNgrams.ngrams)\r\n\t}\r\n\t\r\n\t/**\r\n\t * Create a Corpus and return the phrases\r\n\t * @param {object} config \r\n\t * @param {object} api \r\n\t */\r\n\tstatic phrases(config, api) {\r\n\t\treturn Corpus.load(config).then(corpus => corpus.phrases(api || config));\r\n\t}\r\n\t\r\n\tcorrelations(config) {\r\n\t\tif ((!config || !config.query) && console) {\r\n\t\t\tconsole.warn(\"No query provided for correlations request.\")\r\n\t\t\tif (!isDocumentsMode(config)) {\r\n\t\t\t\tthrow new Error(\"Unable to run correlations for a corpus without a query.\")\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn Load.trombone(config, {\r\n\t\t\ttool: isDocumentsMode(config) ? \"corpus.DocumentTermCorrelations\" : \"corpus.CorpusTermCorrelations\",\r\n\t\t\tcorpus: this.corpusid\r\n\t\t}).then(data => data.termCorrelations.correlations)\r\n\t}\r\n\t\r\n\t/**\r\n\t * Create a Corpus and return the correlations\r\n\t * @param {object} config \r\n\t * @param {object} api \r\n\t */\r\n\tstatic correlations(config, api) {\r\n\t\treturn Corpus.load(config).then(corpus => corpus.correlations(api || config));\r\n\t}\r\n\t\r\n\ttool(_tool, config = {}) {\r\n\t\tlet me = this;\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\r\n\t\t\tlet isTool = function(obj) {return obj && (typeof obj==\"string\" && /\\W/.test(obj)==false) || (typeof obj == \"object\" && \"forTool\" in obj)}\r\n\t\t\tlet isConfig = function(obj) {return obj && typeof obj == \"object\" && !(\"forTool\" in obj)}\r\n\t\t\tlet lastArg = arguments[arguments.length-1];\r\n\t\t\tconfig = isConfig(lastArg) ? lastArg : {};\r\n\t\t\t\r\n\t\t\t// we have all tools and we'll show them individually\r\n\t\t\tif (isTool(_tool) && (isTool(lastArg) || isConfig(lastArg))) {\r\n\t\t\t\tlet defaultAttributes = {\r\n\t\t\t\t\twidth: undefined,\r\n\t\t\t\t\theight: undefined,\r\n\t\t\t\t\tstyle: \"width: 350px; height: 350px\",\r\n\t\t\t\t\tfloat: \"right\"\r\n\t\t\t\t}\r\n\t\t\t\tlet out = \"\";\r\n\t\t\t\tfor (let i=0; i<arguments.length; i++) {\r\n\t\t\t\t\tlet t = arguments[i];\r\n\t\t\t\t\tif (isTool(t)) {\r\n\t\t\t\t\t\tif (typeof t == \"string\") {t = {forTool: t}} // make sure we have object\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// build iframe tag\r\n\t\t\t\t\t\tout+=\"<iframe \";\r\n\t\t\t\t\t\tfor (let attr in defaultAttributes) {\r\n\t\t\t\t\t\t\tvar val = (attr in t ? t[attr] : undefined) || (attr in config ? config[attr] : undefined) || (attr in defaultAttributes ? defaultAttributes[attr] : undefined);\r\n\t\t\t\t\t\t\tif (val!==undefined) {\r\n\t\t\t\t\t\t\t\tout+=' '+attr+'=\"'+val+'\"';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// build url\r\n\t\t\t\t\t\tvar url = new URL((config && config.voyantUrl ? config.voyantUrl : Load.baseUrl) + \"tool/\"+t.forTool+\"/\");\r\n\t\t\t\t\t\turl.searchParams.append(\"corpus\", me.corpusid);\t\t\t\r\n\t\t\t\t\t\t// add API values from config (some may be ignored)\r\n\t\t\t\t\t\tlet all = Object.assign(t,config);\r\n\t\t\t\t\t\tObject.keys(all).forEach(key => {\r\n\t\t\t\t\t\t\tif (key !==\"input\" && !(key in defaultAttributes)) {\r\n\t\t\t\t\t\t\t\turl.searchParams.append(key, all[key])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// finish tag\r\n\t\t\t\t\t\tout+=' src=\"'+url+'\"></iframe>'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn resolve(out);\r\n\t\t\t} else {\r\n\t\t\t\tif (Array.isArray(_tool)) {\r\n\t\t\t\t\t_tool = _tool.join(\";\")\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet defaultAttributes = {\r\n\t\t\t\t\twidth: undefined,\r\n\t\t\t\t\theight: undefined,\r\n\t\t\t\t\tstyle: \"width: 90%; height: \"+(350*(_tool ? _tool : \"\").split(\";\").length)+\"px\"\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// build iframe tag\r\n\t\t\t\tlet out =\"<iframe \";\r\n\t\t\t\tfor (let attr in defaultAttributes) {\r\n\t\t\t\t\tvar val = (attr in config ? config[attr] : undefined) || (attr in defaultAttributes ? defaultAttributes[attr] : undefined);\r\n\t\t\t\t\tif (val!==undefined) {\r\n\t\t\t\t\t\tout+=' '+attr+'=\"'+val+'\"';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// build url\r\n\t\t\t\tvar url = new URL((config && config.voyantUrl ? config.voyantUrl : Load.baseUrl)+(_tool ? (\"?view=customset&tableLayout=\"+_tool) : \"\"));\r\n\t\t\t\turl.searchParams.append(\"corpus\", me.corpusid);\t\t\t\r\n\t\t\t\t// add API values from config (some may be ignored)\r\n\t\t\t\tObject.keys(config).forEach(key => {\r\n\t\t\t\t\tif (key !==\"input\" && !(key in defaultAttributes)) {\r\n\t\t\t\t\t\turl.searchParams.append(key, config[key])\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tresolve(out+\" src='\"+url+\"'></iframe\");\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * Create a Corpus and return the tool\r\n\t * @param {*} tool \r\n\t * @param {*} config \r\n\t * @param {*} api \r\n\t */\r\n\tstatic tool(tool, config, api) {\r\n\t\treturn Corpus.load(config).then(corpus => corpus.tool(tool, config, api));\r\n\t}\r\n\r\n\ttoString() {\r\n\t\treturn this.summary()\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * Create a new Corpus using the provided config\r\n\t * @param {object} config \r\n\t */\r\n\tstatic create(config) {\r\n\t\treturn Corpus.load(config);\r\n\t}\r\n\r\n\t/**\r\n\t * Load a Corpus using the provided config\r\n\t * @param {object} config The Corpus config\r\n\t */\r\n\tstatic load(config) {\r\n\t\tconst promise = new Promise(function(resolve, reject) {\r\n\t\t\tif (config instanceof Corpus) {\r\n\t\t\t\tresolve(config);\r\n\t\t\t} else if (typeof config === \"string\" && config.length>0 && /\\W/.test(config)===false) {\r\n\t\t\t\tresolve(new Corpus(config)); \r\n\t\t\t} else if (typeof config === \"object\" && config.corpus) {\r\n\t\t\t\tresolve(new Corpus(config.corpus))\r\n\t\t\t} else {\r\n\t\t\t\tif (typeof config === \"string\") {config = {input: config}}\r\n\t\t\t\tif (config && config.input) {\r\n\t\t\t\t\tLoad.trombone(config, {tool: \"corpus.CorpusMetadata\"})\r\n\t\t\t\t\t.then(data => resolve(new Corpus(data.corpus.metadata.id)))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t[\"id\",\"metadata\",\"summary\",\"titles\",\"text\",\"texts\",\"terms\",\"tokens\",\"words\",\"contexts\",\"collocates\",\"phrases\",\"correlations\",\"tool\"].forEach(name => {\r\n\t\t\tpromise[name] = function() {\r\n\t\t\t\tvar args = arguments\r\n\t\t\t\treturn promise.then(corpus => {return corpus[name].apply(corpus, args)})\r\n\t\t\t}\r\n\t\t})\r\n\t\tpromise.assign = function(name) {\r\n\t\t\tthis.then(corpus => {window[name] = corpus; return corpus})\r\n\t\t}\r\n\r\n\t\treturn promise;\r\n\t}\r\n}\r\n\r\nexport default Corpus\r\n","/**\r\n * Class representing a Chart.\r\n * @memberof Spyral\r\n * @class\r\n */\r\nclass Chart {\r\n\t/**\r\n\t * The Highcharts config object\r\n\t * @typedef {object} HighchartsConfig\r\n\t * @property {(string|object)} title\r\n\t * @property {(string|object)} subtitle\r\n\t * @property {object} credits\r\n\t * @property {object} xAxis\r\n\t * @property {object} yAxis\r\n\t * @property {object} chart\r\n\t * @property {array} series\r\n\t * @property {object} plotOptions\r\n\t */\r\n\r\n\t/**\r\n\t * Construct a new Chart class\r\n\t * @constructor\r\n\t * @param {element} target \r\n\t * @param {array} data \r\n\t */\r\n    constructor(target, data) {\r\n\t    this.target = target;\r\n\t    this.data = data;\r\n\t}\r\n\r\n\t/**\r\n\t * Create a new chart\r\n\t * See {@link https://api.highcharts.com/highcharts/} for full set of config options.\r\n\t * @param {(string|element)} target \r\n\t * @param {HighchartsConfig} config \r\n\t * @returns {Highcharts.Chart}\r\n\t */\r\n\tcreate(target, config) {\r\n\t\treturn Highcharts.chart(target, config);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Create a new chart\r\n\t * See {@link https://api.highcharts.com/highcharts/} for full set of config options.\r\n\t * @param {(string|element)} target \r\n\t * @param {HighchartsConfig} config \r\n\t * @returns {Highcharts.Chart}\r\n\t */\r\n\tstatic create(target, config) {\r\n\t\t// convert title and suppress if not provided\r\n\t\tif (\"title\" in config) {\r\n\t\t\tif (typeof config.title == \"string\") {\r\n\t\t\t\tconfig.title = {text: config.title};\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconfig.title = false;\r\n\t\t}\r\n\t\t\r\n\t\t// convert subtitle and convert if not provided\r\n\t\tif (\"subtitle\" in config) {\r\n\t\t\tif (typeof config.subtitle == \"string\") {\r\n\t\t\t\tconfig.subtitle = {text: config.subtitle};\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconfig.subtitle = false;\r\n\t\t}\r\n\t\t\r\n\t\t// convert credits\r\n\t\tif (!(\"credits\" in config)) {\r\n\t\t\tconfig.credits = false;\r\n\t\t}\r\n\t\t\r\n\t\t// suppress xAxis title unless provided\r\n\t\tif (!(\"xAxis\" in config)) {config.xAxis = {}}\r\n\t\tif (!(\"title\" in config.xAxis)) {\r\n\t\t\t//config.xAxis.title = false;\r\n\t\t}\r\n\t\r\n\t\t// suppress xAxis title unless provided\r\n\t\tif (!(\"yAxis\" in config)) {config.yAxis = {}}\r\n\t\tif (!(\"title\" in config.yAxis)) {\r\n\t\t\tconfig.yAxis.title = false;\r\n\t\t}\r\n\t\t\r\n\t\treturn Highcharts.chart(target, config);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the default chart type\r\n\t * @param {object} config The chart config object\r\n\t * @param {string} type The type of chart\r\n\t */\r\n\tstatic setDefaultChartType(config, type) {\r\n\t\tif (\"type\" in config) {\r\n\t\t\tconfig.chart.type = config.type;\r\n\t\t\tdelete config.type;\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\t// TODO: check plot options and series?\r\n\r\n\t\tif (\"chart\" in config) {\r\n\t\t\tif (\"type\" in config.chart) {return} // already set\r\n\t\t} else {\r\n\t\t\tconfig.chart = {}\r\n\t\t}\r\n\r\n\t\tconfig.chart.type = type;\r\n\t\treturn config;\r\n\t}\r\n\r\n\t/**\r\n\t * Add the provided data to the config as a series\r\n\t * @param {object} config \r\n\t * @param {array} data \r\n\t */\r\n\tstatic setSeriesData(config, data) {\r\n\t\tif (Array.isArray(data)) {\r\n\t\t\tif (Array.isArray(data[0])) {\r\n\t\t\t\tconfig.series = data.map(subArray => { return {data: subArray} })\r\n\t\t\t} else {\r\n\t\t\t\tconfig.series = [{data: data}]\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Create a bar chart\r\n\t * @param {object} [config]\r\n\t * @returns {Highcharts.Chart}\r\n\t */\r\n\tbar(config={}) {\r\n\t\tChart.setSeriesData(config, this.data);\r\n\t\treturn Chart.bar(this.target, config)\r\n\t}\r\n\t/**\r\n\t * Create a bar chart\r\n\t * @param {element} target \r\n\t * @param {object} config \r\n\t * @returns {Highcharts.Chart}\r\n\t */\r\n    static bar(target, config) {\r\n\t\tChart.setDefaultChartType(config, 'bar')\r\n\t\treturn Highcharts.chart(target, config)\r\n\t}\r\n\r\n\t/**\r\n\t * Create a line chart\r\n\t * @param {object} [config]\r\n\t * @returns {Highcharts.Chart}\r\n\t */\r\n\tline(config={}) {\r\n\t\tChart.setSeriesData(config, this.data);\r\n\t\treturn Chart.line(this.target, config)\r\n\t}\r\n\t/**\r\n\t * Create a line chart\r\n\t * @param {element} target \r\n\t * @param {object} config \r\n\t * @returns {Highcharts.Chart}\r\n\t */\r\n    static line(target, config) {\r\n\t\tChart.setDefaultChartType(config, 'line')\r\n\t\treturn Highcharts.chart(target, config)\r\n\t}\r\n\r\n\t/**\r\n\t * Create a scatter plot\r\n\t * @param {object} [config]\r\n\t * @returns {Highcharts.Chart}\r\n\t */\r\n\tscatter(config={}) {\r\n\t\tChart.setSeriesData(config, this.data);\r\n\t\treturn Chart.scatter(this.target, config)\r\n\t}\r\n\t/**\r\n\t * Create a scatter plot\r\n\t * @param {element} target \r\n\t * @param {object} config \r\n\t * @returns {Highcharts.Chart}\r\n\t */\r\n    static scatter(target, config) {\r\n\t\tChart.setDefaultChartType(config, 'scatter')\r\n\t\treturn Highcharts.chart(target, config)\r\n\t}\r\n\r\n\t/**\r\n\t * Create a network graph\r\n\t * @param {object} [config]\r\n\t * @returns {Highcharts.Chart}\r\n\t */\r\n\tnetworkgraph(config={}) {\r\n\t\tconfig.plotOptions = {\r\n\t\t\tnetworkgraph: {\r\n\t\t\t\tlayoutAlgorithm: {\r\n\t\t\t\t\tenableSimulation: true\r\n\t\t\t\t},\r\n\t\t\t\tkeys: ['from', 'to']\r\n\t\t\t}\r\n\t\t}\r\n\t\tChart.setSeriesData(config, this.data);\r\n\r\n\t\treturn Chart.networkgraph(this.target, config)\r\n\t}\r\n\t/**\r\n\t * Create a network graph\r\n\t * @param {element} target \r\n\t * @param {object} config \r\n\t * @returns {Highcharts.Chart}\r\n\t */\r\n\tstatic networkgraph(target, config) {\r\n\t\tChart.setDefaultChartType(config, 'networkgraph')\r\n\t\treturn Highcharts.chart(target, config);\r\n\t}\r\n}\r\n\r\nexport default Chart\r\n","import Chart from \"./chart.js\";\r\n\r\n/**\r\n * Class representing a Table.\r\n * @memberof Spyral\r\n * @class\r\n */\r\nclass Table {\r\n\t/**\r\n\t * The Table config object\r\n\t * @typedef {object} TableConfig\r\n\t * @property {string} format The format of the provided data, either \"tsv\" or \"csv\"\r\n\t * @property {(object|array)} headers The table headers\r\n\t * @property {boolean} hasHeaders True if the headers are the first item in the data\r\n\t * @property {string} count Specify \"vertical\" or \"horizontal\" to create a table of unique item counts in the provided data\r\n\t */\r\n\r\n\r\n\t/**\r\n\t * Create a new Table\r\n\t * @constructor\r\n\t * @param {(object|array|string|number)} data\r\n\t * @param {TableConfig} config\r\n\t */\r\n\tconstructor(data, config, ...other) {\r\n\r\n\t\tthis._rows = [];\r\n\t\tthis._headers = {};\r\n\t\tthis._rowKeyColumnIndex = 0;\r\n\t\t\r\n\t\t// we have a configuration object followed by values: create({headers: []}, 1,2,3) …\r\n\t\tif (data && typeof data == \"object\" && (typeof config == \"string\" || typeof config == \"number\" || Array.isArray(config))) {\r\n\t\t\tdata.rows = [config].concat(other).filter(v => v!==undefined)\r\n\t\t\tconfig = undefined;\r\n\t\t}\r\n\t\t\r\n\t\t// we have a simple variable set of arguments: create(1,2,3) …\r\n\t\tif (arguments.length>0 && Array.from(arguments).every(a => a!==undefined && !Array.isArray(a) && typeof a != \"object\")) {\r\n\t\t\tdata = [data,config].concat(other).filter(v => v!==undefined)\r\n\t\t\tconfig = undefined;\r\n\t\t}\r\n\t\t\r\n\t\t// could be CSV or TSV\r\n\t\tif (Array.isArray(data) && data.length==1 && typeof data[0] == \"string\"  && (data[0].indexOf(\",\")>-1 || data[0].indexOf(\"\\t\")>-1)) {\r\n\t\t\tdata = data[0];\r\n\t\t}\r\n\r\n\t\t// first check if we have a string that might be delimited data\r\n\t\tif (data && (typeof data == \"string\" || typeof data ==\"number\")) {\r\n\t\t\tif (typeof data == \"number\") {data = String(data)} // convert to string for split\r\n\t\t\tlet rows = [];\r\n\t\t\tlet format = config && \"format\" in config ? config.format : undefined;\r\n\t\t\tdata.split(/(\\r\\n|[\\n\\v\\f\\r\\x85\\u2028\\u2029])+/g).forEach((line,i) => {\r\n\t\t\t\tif (line.trim().length>0) {\r\n\t\t\t\t\tlet values;\r\n\t\t\t\t\tif ((format && format==\"tsv\") || line.indexOf(\"\\t\")>-1) {\r\n\t\t\t\t\t\tvalues = line.split(/\\t/);\r\n\t\t\t\t\t} else if ((format && format==\"csv\") || line.indexOf(\",\")>-1) {\r\n\t\t\t\t\t\tvalues = parseCsvLine(line)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvalues = [line]\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t// if we can't find any config information for headers then we try to guess\r\n\t\t\t\t\t// if the first line doesn't have any numbers - this heuristic may be questionable\r\n\t\t\t\t\tif (i==0 && values.every(v => isNaN(v)) && \r\n\t\t\t\t\t\t((typeof config != \"object\") || (typeof config == \"object\" && !(\"hasHeaders\" in config) && !(\"headers\" in config)))) {\r\n\t\t\t\t\t\tthis.setHeaders(values);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trows.push(values.map(v => isNaN(v) ? v : Number(v)))\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tdata = rows;\r\n\t\t}\r\n\t\t\r\n\t\tif (data && Array.isArray(data)) {\r\n\t\t\tif (config) {\r\n\t\t\t\tif (Array.isArray(config)) {\r\n\t\t\t\t\tthis.setHeaders(config);\r\n\t\t\t\t} else if (typeof config == \"object\") {\r\n\t\t\t\t\tif (\"headers\" in config) {\r\n\t\t\t\t\t\tthis.setHeaders(config.headers)\r\n\t\t\t\t\t} else if (\"hasHeaders\" in config && config.hasHeaders) {\r\n\t\t\t\t\t\tthis.setHeaders(data.shift())\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (config && \"count\" in config && config.count) {\r\n\t\t\t\tlet freqs = Table.counts(data);\r\n\t\t\t\tif (config.count==\"vertical\") {\r\n\t\t\t\t\tfor (let item in freqs) {\r\n\t\t\t\t\t\tthis.addRow(item, freqs[item])\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.rowSort((a,b) => Table.cmp(b[1],a[1]))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._headers = []; // reset and use the terms as headers\r\n\t\t\t\t\tthis.addRow(freqs)\r\n\t\t\t\t\tthis.columnSort((a,b) => Table.cmp(this.cell(0,b),this.cell(0,a)))\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.addRows(data);\r\n\t\t\t}\r\n\t\t} else if (data && typeof data == \"object\") {\r\n\t\t\tif (\"headers\" in data && Array.isArray(data.headers)) {\r\n\t\t\t\tthis.setHeaders(data.headers);\r\n\t\t\t} else if (\"hasHeaders\" in data && \"rows\" in data) {\r\n\t\t\t\tthis.setHeaders(data.rows.shift())\r\n\t\t\t}\r\n\t\t\tif (\"rows\" in data && Array.isArray(data.rows)) {\r\n\t\t\t\tthis.addRows(data.rows)\r\n\t\t\t}\r\n\t\t\tif (\"rowKeyColumn\" in data) {\r\n\t\t\t\tif (typeof data.rowKeyColumn == \"number\") {\r\n\t\t\t\t\tif (data.rowKeyColumn < this.columns()) {\r\n\t\t\t\t\t\tthis._rowKeyColumnIndex = data.rowKeyColumn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"The rowKeyColumn value is higher than the number headers designated: \"+data.rowKeyColum);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (typeof data.rowKeyColumn == \"string\") {\r\n\t\t\t\t\tif (data.rowKeyColumn in this._headers) {\r\n\t\t\t\t\t\tthis._rowKeyColumnIndex = this._headers[data.rowKeyColumn];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"Unable to find column designated by rowKeyColumn: \"+data.rowKeyColumn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set the headers for the Table\r\n\t * @param {(object|array)} data\r\n\t * @returns {Table}\r\n\t */\r\n\tsetHeaders(data) {\r\n\t\tif (data && Array.isArray(data)) {\r\n\t\t\tdata.forEach(h => this.addColumn(h), this);\r\n\t\t} else if (typeof data == \"object\") {\r\n\t\t\tif (this.columns()==0 || Object.keys(data).length==this.columns()) {\r\n\t\t\t\tthis._headers = data;\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"The number of columns don't match: \");\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Unrecognized argument for headers, it should be an array or an object.\"+data)\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Add rows to the Table\r\n\t * @param {array} data\r\n\t * @returns {Table}\r\n\t */\r\n\taddRows(data) {\r\n\t\tdata.forEach(row => this.addRow(row), this);\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Add a row to the Table\r\n\t * @param {(array|object)} data\r\n\t * @returns {Table}\r\n\t */\r\n\taddRow(data, ...other) {\r\n\t\t\r\n\t\t// we have multiple arguments, so call again as an array\r\n\t\tif (other.length>0) {\r\n\t\t\treturn this.addRow([data].concat(other))\r\n\t\t}\r\n\r\n\t\tthis.setRow(this.rows(), data, true);\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set a row\r\n\t * @param {(number|string)} ind The row index\r\n\t * @param {(object|array)} data\r\n\t * @param {boolean} create\r\n\t * @returns {Table}\r\n\t */\r\n\tsetRow(ind, data, create) {\r\n\r\n\t\tlet rowIndex = this.getRowIndex(ind, create);\r\n\t\tif (rowIndex>=this.rows() && !create) {\r\n\t\t\tthrow new Error(\"Attempt to set row values for a row that does note exist: \"+ind+\". Maybe use addRow() instead?\");\r\n\t\t}\r\n\t\t\r\n\t\t// we have a simple array, so we'll just push to the rows\r\n\t\tif (data && Array.isArray(data)) {\r\n\t\t\tif (data.length>this.columns()) {\r\n\t\t\t\tif (create) {\r\n\t\t\t\t\tfor (let i = this.columns(); i<data.length; i++) {\r\n\t\t\t\t\t\tthis.addColumn();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"The row that you've created contains more columns than the current table. Maybe use addColunm() first?\")\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdata.forEach((d,i) => this.setCell(rowIndex, i, d), this);\r\n\t\t}\r\n\t\t\r\n\t\t// we have an object so we'll use the headers\r\n\t\telse if (typeof data == \"object\") {\r\n\t\t\tfor (let column in data) {\r\n\t\t\t\tif (!this.hasColumn(column)) {\r\n\t\t\t\t}\r\n\t\t\t\tthis.setCell(rowIndex, column, data[column]);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\telse if (this.columns()<2 && create) { // hopefully some scalar value\r\n\t\t\tif (this.columns()==0) {\r\n\t\t\t\tthis.addColumn(); // create first column if it doesn't exist\r\n\t\t\t}\r\n\t\t\tthis.setCell(rowIndex,0,data);\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"setRow() expects an array or an object, maybe setCell()?\")\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set a column\r\n\t * @param {(number|string)} ind The column index\r\n\t * @param {(object|array)} data\r\n\t * @param {boolean} create\r\n\t * @returns {Table}\r\n\t */\r\n\tsetColumn(ind, data, create) {\r\n\r\n\t\tlet columnIndex = this.getColumnIndex(ind, create);\r\n\t\tif (columnIndex>=this.columns() && !create) {\r\n\t\t\tthrow new Error(\"Attempt to set column values for a column that does note exist: \"+ind+\". Maybe use addColumn() instead?\");\r\n\t\t}\r\n\t\t\r\n\t\t// we have a simple array, so we'll just push to the rows\r\n\t\tif (data && Array.isArray(data)) {\r\n\t\t\tdata.forEach((d,i) => this.setCell(i, columnIndex, d, create), this);\r\n\t\t}\r\n\t\t\r\n\t\t// we have an object so we'll use the headers\r\n\t\telse if (typeof data == \"object\") {\r\n\t\t\tfor (let row in data) {\r\n\t\t\t\tthis.setCell(row, columnIndex, data[column], create);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// hope we have a scalar value to assign to the first row\r\n\t\telse {\r\n\t\t\tthis.setCell(0,columnIndex,data, create);\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Add to or set a cell value\r\n\t * @param {(number|string)} row The row index\r\n\t * @param {(number|string)} column The column index\r\n\t * @param {number} value The value to set/add\r\n\t * @param {boolean} overwrite True to set, false to add to current value\r\n\t */\r\n\tupdateCell(row, column, value, overwrite) {\r\n\t\tlet rowIndex = this.getRowIndex(row, true);\r\n\t\tlet columnIndex = this.getColumnIndex(column, true);\r\n\t\tlet val = this.cell(rowIndex, columnIndex);\r\n\t\tthis._rows[rowIndex][columnIndex] = val && !overwrite ? val+value : value;\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the value of a cell\r\n\t * @param {(number|string)} rowInd The row index\r\n\t * @param {(number|string)} colInd The column index\r\n\t * @returns {number}\r\n\t */\r\n\tcell(rowInd, colInd) {\r\n\t\treturn this._rows[this.getRowIndex(rowInd)][this.getColumnIndex(colInd)];\r\n\t}\r\n\r\n\t/**\r\n\t * Set the value of a cell\r\n\t * @param {(number|string)} row The row index\r\n\t * @param {(number|string)} column The column index\r\n\t * @param {number} value The value to set\r\n\t * @returns {Table}\r\n\t */\r\n\tsetCell(row, column, value) {\r\n\t\tthis.updateCell(row,column,value,true);\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get (and create) the row index\r\n\t * @param {(number|string)} ind The index\r\n\t * @param {boolean} create\r\n\t * @returns {number}\r\n\t */\r\n\tgetRowIndex(ind, create) {\r\n\t\tif (typeof ind == \"number\") {\r\n\t\t\tif (ind < this._rows.length) {\r\n\t\t\t\treturn ind;\r\n\t\t\t} else if (create) {\r\n\t\t\t\tthis._rows[ind] = Array(this.columns());\r\n\t\t\t\treturn ind;\r\n\t\t\t}\r\n\t\t\tthrow new Error(\"The requested row does not exist: \"+ind)\r\n\t\t} else if (typeof ind == \"string\") {\r\n\t\t\tlet row = this._rows.findIndex(r => r[this._rowKeyColumnIndex] === ind, this);\r\n\t\t\tif (row>-1) {return row;}\r\n\t\t\telse if (create) {\r\n\t\t\t\tlet arr = Array(this.columns());\r\n\t\t\t\tarr[this._rowKeyColumnIndex] = ind;\r\n\t\t\t\tthis.addRow(arr);\r\n\t\t\t\treturn this.rows();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthrow new Error(\"Unable to find the row named \"+ind);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthrow new Error(\"Please provide a valid row (number or named row)\");\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get (and create) the column index\r\n\t * @param {(number|string)} ind The index\r\n\t * @param {boolean} create\r\n\t * @returns {number}\r\n\t */\r\n\tgetColumnIndex(ind, create) {\r\n\t\tif (typeof ind == \"number\") {\r\n\t\t\tif (ind < this.columns()) {\r\n\t\t\t\treturn ind;\r\n\t\t\t} else if (create) {\r\n\t\t\t\tthis.addColumn(ind)\r\n\t\t\t\treturn ind;\r\n\t\t\t}\r\n\t\t\tthrow new Error(\"The requested column does not exist: \"+ind)\r\n\t\t} else if (typeof ind == \"string\") {\r\n\t\t\tif (ind in this._headers) {\r\n\t\t\t\treturn this._headers[ind];\r\n\t\t\t} else if (create) {\r\n\t\t\t\tthis.addColumn({header: ind});\r\n\t\t\t\treturn this._headers[ind];\r\n\t\t\t}\r\n\t\t\tthrow new Error(\"Unable to find column named \"+ind);\r\n\t\t}\r\n\t\tthrow new Error(\"Please provide a valid column (number or named column)\");\r\n\t}\r\n\t\r\n\t/**\r\n\t * Add a column (at the specified index)\r\n\t * @param {(object|string)} config\r\n\t * @param {(number|string)} ind\r\n\t */\r\n\taddColumn(config, ind) {\r\n\t\t// determine col\r\n\t\tlet col = this.columns(); // default\r\n\t\tif (config && typeof config == \"string\") {col=config}\r\n\t\telse if (config && (typeof config == \"object\") && (\"header\" in config)) {col = config.header}\r\n\t\telse if (ind!==undefined) {col=ind}\r\n\r\n\t\t// check if it exists\r\n\t\tif (col in this._headers) {\r\n\t\t\tthrow new Error(\"This column exists already: \"+config.header)\r\n\t\t}\r\n\t\t\r\n\t\t// add column\r\n\t\tlet colIndex = this.columns();\r\n\t\tthis._headers[col] = colIndex;\r\n\t\t\r\n\t\t// determine data\r\n\t\tlet data = [];\r\n\t\tif (config && typeof config == \"object\" && \"rows\" in config) {data=config.rows}\r\n\t\telse if (Array.isArray(config)) {data = config;}\r\n\t\t\r\n\t\t// add data to each row\r\n\t\tthis._rows.forEach((r,i) => r[colIndex] = data[i])\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * This function returns different values depending on the arguments provided.\r\n\t * When there are no arguments, it returns the number of rows in this table.\r\n\t * When the first argument is the boolean value `true` all rows are returned.\r\n\t * When the first argument is a an array then the rows corresponding to the row\r\n\t * indices or names are returned. When all arguments except are numbers or strings\r\n\t * then each of those is returned.\r\n\t * @param {(boolean|array|number|string)} [inds]\r\n\t * @param {(object|number|string)} [config]\r\n\t * @returns {number|array}\r\n\t */\r\n\trows(inds, config, ...other) {\r\n\t\r\n\t\t// return length\r\n\t\tif (inds==undefined) {\r\n\t\t\treturn this._rows.length;\r\n\t\t}\r\n\t\t\r\n\t\tlet rows = [];\r\n\t\tlet asObj = (config && typeof config == \"object\" && config.asObj) ||\r\n\t\t\t(other.length>0 && typeof other[other.length-1] == \"object\" && other[other.length-1].asObj);\r\n\t\t\r\n\t\t// return all\r\n\t\tif (typeof inds == \"boolean\" && inds) {\r\n\t\t\trows = this._rows.map((r,i) => this.row(i, asObj))\r\n\t\t}\r\n\t\t\r\n\t\t// return specified rows\r\n\t\telse if (Array.isArray(inds)) {\r\n\t\t\trows = inds.map(ind => this.row(ind));\r\n\t\t}\r\n\t\t\r\n\t\t// return specified rows as varargs\r\n\t\telse if (typeof inds == \"number\" || typeof inds == \"string\") {\r\n\t\t\t[inds, config, ...other].every(i => {\r\n\t\t\t\tif (typeof i == \"number\" || typeof i == \"string\") {\r\n\t\t\t\t\trows.push(this.row(i, asObj));\r\n\t\t\t\t\treturn true\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tif (other.length>0) { // when config is in last position\r\n\t\t\t\tif (typeof other[other.length-1] == \"object\") {\r\n\t\t\t\t\tconfig = other[other.length-1]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// zip if requested\r\n\t\tif (config && typeof config == \"object\" && \"zip\" in config && config.zip) {\r\n\t\t\tif (rows.length<2) {throw new Error(\"Only one row available, can't zip\")}\r\n\t\t\treturn Table.zip(rows);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn rows;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the specified row\r\n\t * @param {(number|string)} ind\r\n\t * @param {boolean} [asObj]\r\n\t * @returns {(number|string|object)}\r\n\t */\r\n\trow(ind, asObj) {\r\n\t\tlet row = this._rows[this.getRowIndex(ind)];\r\n\t\tif (asObj) {\r\n\t\t\tlet obj = {};\r\n\t\t\tfor (let key in this._headers) {\r\n\t\t\t\tobj[key] = row[this._headers[key]]\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t} else {\r\n\t\t\treturn row;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * This function returns different values depending on the arguments provided.\r\n\t * When there are no arguments, it returns the number of columns in this table.\r\n\t * When the first argument is the boolean value `true` all columns are returned.\r\n\t * When the first argument is a number a slice of the columns is returned and if\r\n\t * the second argument is a number it is treated as the length of the slice to\r\n\t * return (note that it isn't the `end` index like with Array.slice()).\r\n\t * @param {(boolean|array|number|string)} [inds]\r\n\t * @param {(object|number|string)} [config]\r\n\t * @returns {number|array}\r\n\t */\r\n\tcolumns(inds, config, ...other) {\r\n\t\r\n\t\t// return length\r\n\t\tif (inds==undefined) {\r\n\t\t\treturn Object.keys(this._headers).length;\r\n\t\t}\r\n\t\t\r\n\t\tlet columns = [];\r\n\t\tlet asObj = (config && typeof config == \"object\" && config.asObj) ||\r\n\t\t\t(other.length>0 && typeof other[other.length-1] == \"object\" && other[other.length-1].asObj);\r\n\t\t\r\n\t\t// return all columns\r\n\t\tif (typeof inds == \"boolean\" && inds) {\r\n\t\t\tfor (let i=0, len=this.columns(); i<len; i++) {\r\n\t\t\t\tcolumns.push(this.column(i, asObj));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// return specified columns\r\n\t\telse if (Array.isArray(inds)) {\r\n\t\t\tinds.forEach(i => columns.push(this.column(i, asObj)), this);\r\n\t\t}\r\n\t\t\r\n\t\telse if (typeof inds == \"number\" || typeof inds == \"string\") {\r\n\t\t\t[inds, config, ...other].every(i => {\r\n\t\t\t\tif (typeof i == \"number\" || typeof i == \"string\") {\r\n\t\t\t\t\tcolumns.push(this.column(i, asObj));\r\n\t\t\t\t\treturn true\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tif (other.length>0) { // when config is in last position\r\n\t\t\t\tif (typeof other[other.length-1] == \"object\") {\r\n\t\t\t\t\tconfig = other[other.length-1]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (config && typeof config == \"object\" && \"zip\" in config && config.zip) {\r\n\t\t\tif (columns.length<2) {throw new Error(\"Only one column available, can't zip\")}\r\n\t\t\treturn Table.zip(columns);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn columns;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the specified column\r\n\t * @param {(number|string)} ind\r\n\t * @param {boolean} [asObj]\r\n\t * @returns {(number|string|object)}\r\n\t */\r\n\tcolumn(ind, asObj) {\r\n\t\tlet column = this.getColumnIndex(ind);\r\n\t\tlet data = this._rows.forEach(r => r[column]); // TODO\r\n\t\tif (asObj) {\r\n\t\t\tlet obj = {};\r\n\t\t\tthis._rows.forEach(r => {\r\n\t\t\t\tobj[r[this._rowKeyColumnIndex]] = r[column];\r\n\t\t\t})\r\n\t\t\treturn obj;\r\n\t\t} else {\r\n\t\t\treturn this._rows.map(r => r[column]);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the specified header\r\n\t * @param {(number|string)} ind\r\n\t * @returns {(number|string)}\r\n\t */\r\n\theader(ind) {\r\n\t\tlet keys = Object.keys(this._headers);\r\n\t\tlet i = this.getColumnIndex(ind);\r\n\t\treturn keys[keys.findIndex(k => i==this._headers[k])]\r\n\t}\r\n\t\r\n\t/**\r\n\t * This function returns different values depending on the arguments provided.\r\n\t * When there are no arguments, it returns the number of headers in this table.\r\n\t * When the first argument is the boolean value `true` all headers are returned.\r\n\t * When the first argument is a number a slice of the headers is returned.\r\n\t * When the first argument is an array the slices specified in the array are returned.\r\n\t * @param {(boolean|array|number|string)} inds\r\n\t * @returns {(number|array)}\r\n\t */\r\n\theaders(inds, ...other) {\r\n\t\t\r\n\t\t// return length\r\n\t\tif (inds==undefined) {\r\n\t\t\treturn Object.keys(this._headers).length;\r\n\t\t}\r\n\r\n\t\tlet headers = [];\r\n\t\t\r\n\t\t// return all\r\n\t\tif (typeof inds == \"boolean\" && inds) {\r\n\t\t\tinds = Array(Object.keys(this._headers).length).fill().map((_,i) => i);\r\n\t\t}\r\n\t\t\r\n\t\t// return specified rows\r\n\t\tif (Array.isArray(inds)) {\r\n\t\t\treturn inds.map(i => this.header(i));\r\n\t\t}\r\n\t\t\r\n\t\t// return specified rows as varargs\r\n\t\telse if (typeof inds == \"number\" || typeof inds == \"string\") {\r\n\t\t\treturn [inds, ...other].map(i => this.header(i));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Does the specified column exist\r\n\t * @param {(number|string)} ind\r\n\t * @returns {(number|string)}\r\n\t */\r\n\thasColumn(ind) {\r\n\t\treturn ind in this._headers;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Runs the specified function on each row.\r\n\t * The function is passed the row and the row index.\r\n\t * @param {function} fn\r\n\t */\r\n\tforEach(fn) {\r\n\t\tthis._rows.forEach((r,i) => fn(r,i));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the minimum value in the specified row\r\n\t * @param {(number|string)} ind\r\n\t * @returns {number}\r\n\t */\r\n\trowMin(ind) {\r\n\t\treturn Math.min.apply(null, this.row(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the maximum value in the specified row\r\n\t * @param {(number|string)} ind\r\n\t * @returns {number}\r\n\t */\r\n\trowMax(ind) {\r\n\t\treturn Math.max.apply(null, this.row(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the minimum value in the specified column\r\n\t * @param {(number|string)} ind\r\n\t * @returns {number}\r\n\t */\r\n\tcolumnMin(ind) {\r\n\t\treturn Math.min.apply(null, this.column(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the maximum value in the specified column\r\n\t * @param {(number|string)} ind\r\n\t * @returns {number}\r\n\t */\r\n\tcolumnMax(ind) {\r\n\t\treturn Math.max.apply(null, this.column(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the sum of the values in the specified row\r\n\t * @param {(number|string)} ind\r\n\t * @returns {number}\r\n\t */\r\n\trowSum(ind) {\r\n\t\treturn Table.sum(this.row(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the sum of the values in the specified column\r\n\t * @param {(number|string)} ind\r\n\t * @returns {number}\r\n\t */\r\n\tcolumnSum(ind) {\r\n\t\treturn Table.sum(this.column(ind));\r\n\t}\r\n\r\n\t/**\r\n\t * Get the mean of the values in the specified row\r\n\t * @param {(number|string)} ind\r\n\t * @returns {number}\r\n\t */\r\n\trowMean(ind) {\r\n\t\treturn Table.mean(this.row(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the mean of the values in the specified column\r\n\t * @param {(number|string)} ind\r\n\t * @returns {number}\r\n\t */\r\n\tcolumnMean(ind) {\r\n\t\treturn Table.mean(this.column(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the count of each unique value in the specified row\r\n\t * @param {(number|string)} ind\r\n\t * @returns {number}\r\n\t */\r\n\trowCounts(ind) {\r\n\t\treturn Table.counts(this.row(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the count of each unique value in the specified column\r\n\t * @param {(number|string)} ind\r\n\t * @returns {number}\r\n\t */\r\n\tcolumnCounts(ind) {\r\n\t\treturn Table.counts(this.column(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the rolling mean for the specified row\r\n\t * @param {(number|string)} ind\r\n\t * @param {number} neighbors\r\n\t * @param {boolean} overwrite\r\n\t * @returns {array}\r\n\t */\r\n\trowRollingMean(ind, neighbors, overwrite) {\r\n\t\tlet means = Table.rollingMean(this.row(ind), neighbors);\r\n\t\tif (overwrite) {\r\n\t\t\tthis.setRow(ind, means);\r\n\t\t}\r\n\t\treturn means;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the rolling mean for the specified column\r\n\t * @param {(number|string)} ind\r\n\t * @param {number} neighbors\r\n\t * @param {boolean} overwrite\r\n\t * @returns {array}\r\n\t */\r\n\tcolumnRollingMean(ind, neighbors, overwrite) {\r\n\t\tlet means = Table.rollingMean(this.column(ind), neighbors);\r\n\t\tif (overwrite) {\r\n\t\t\tthis.setColumn(ind, means);\r\n\t\t}\r\n\t\treturn means;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the variance for the specified row\r\n\t * @param {(number|string)} ind\r\n\t * @returns {number}\r\n\t */\r\n\trowVariance(ind) {\r\n\t\treturn Table.variance(this.row(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the variance for the specified column\r\n\t * @param {(number|string)} ind\r\n\t * @returns {number}\r\n\t */\r\n\tcolumnVariance(ind) {\r\n\t\treturn Table.variance(this.column(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the standard deviation for the specified row\r\n\t * @param {(number|string)} ind\r\n\t * @returns {number}\r\n\t */\r\n\trowStandardDeviation(ind) {\r\n\t\treturn Table.standardDeviation(this.row(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the standard deviation for the specified column\r\n\t * @param {(number|string)} ind\r\n\t * @returns {number}\r\n\t */\r\n\tcolumnStandardDeviation(ind) {\r\n\t\treturn Table.standardDeviation(this.column(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the z scores for the specified row\r\n\t * @param {(number|string)} ind\r\n\t * @returns {array}\r\n\t */\r\n\trowZScores(ind) {\r\n\t\treturn Table.zScores(this.row(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the z scores for the specified column\r\n\t * @param {(number|string)} ind\r\n\t * @returns {array}\r\n\t */\r\n\tcolumnZScores(ind) {\r\n\t\treturn Table.zScores(this.column(ind));\r\n\t}\r\n\t\r\n\t/**\r\n\t * TODO\r\n\t * Sort the specified rows\r\n\t * @returns {Table}\r\n\t */\r\n\trowSort(inds, config) {\r\n\t\t// no inds, use all columns\r\n\t\tif (inds===undefined) {\r\n\t\t\tinds = Array(this.columns()).fill().map((_,i) => i)\r\n\t\t}\r\n\r\n\t\t// wrap a single index as array\r\n\t\tif (typeof inds == \"string\" || typeof inds == \"number\") {\r\n\t\t\tinds = [inds];\r\n\t\t}\r\n\r\n\t\tif (Array.isArray(inds)) {\r\n\t\t\treturn this.rowSort((a,b) => {\r\n\t\t\t\tlet ind;\r\n\t\t\t\tfor (let i=0, len=inds.length; i<len; i++) {\r\n\t\t\t\t\tind = this.getColumnIndex(inds[i]);\r\n\t\t\t\t\tif (a!=b) {\r\n\t\t\t\t\t\tif (typeof a[ind] == \"string\" && typeof b[ind] == \"string\") {\r\n\t\t\t\t\t\t\treturn a[ind].localeCompare(b[ind]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn a[ind]-b[ind];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t}, config)\r\n\t\t}\r\n\r\n\t\tif (typeof inds == \"function\") {\r\n\t\t\tthis._rows.sort((a,b) => {\r\n\t\t\t\tif (config && \"asObject\" in config && config.asObject) {\r\n\t\t\t\t\tlet c = {};\r\n\t\t\t\t\tfor (let k in this._headers) {\r\n\t\t\t\t\t\tc[k] = a[this._headers[k]]\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet d = {};\r\n\t\t\t\t\tfor (let k in this._headers) {\r\n\t\t\t\t\t\td[k] = b[this._headers[k]]\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn inds.apply(this, [c,d]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn inds.apply(this, [a,b]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (config && \"reverse\" in config && config.reverse) {\r\n\t\t\t\tthis._rows.reverse(); // in place\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * TODO\r\n\t * Sort the specified columns\r\n\t * @returns {Table}\r\n\t */\r\n\tcolumnSort(inds, config) {\r\n\t\t// no inds, use all columns\r\n\t\tif (inds===undefined) {\r\n\t\t\tinds = Array(this.columns()).fill().map((_,i) => i);\r\n\t\t}\r\n\r\n\t\t// wrap a single index as array\r\n\t\tif (typeof inds == \"string\" || typeof inds == \"number\") {\r\n\t\t\tinds = [inds];\r\n\t\t}\r\n\t\t\r\n\t\tif (Array.isArray(inds)) {\r\n\t\t\t\r\n\t\t\t// convert to column names\r\n\t\t\tlet headers = inds.map(ind => this.header(ind));\r\n\t\t\t\r\n\t\t\t// make sure we have all columns\r\n\t\t\tObject.keys(this._headers).forEach(h => {\r\n\t\t\t\tif (!headers.includes(h)) {headers.push(h)}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// sort names alphabetically\r\n\t\t\theaders.sort((a,b) => a.localeCompare(b))\r\n\t\t\t\r\n\t\t\t// reorder by columns\r\n\t\t\tthis._rows = this._rows.map((_,i) => headers.map(h => this.cell(i,h)));\r\n\t\t\tthis._headers = {};\r\n\t\t\theaders.forEach((h,i) => this._headers[h]=i)\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (typeof inds == \"function\") {\r\n\t\t\tlet headers = Object.keys(this._headers);\r\n\t\t\tif (config && \"asObject\" in headers && headers.asObject) {\r\n\t\t\t\theaders = headers.map((h,i) => {\r\n\t\t\t\t\treturn {header: h, data: this._rows.map((r,j) => this.cell(i,j))}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\theaders.sort((a,b) => {\r\n\t\t\t\treturn inds.apply(this, [a,b]);\r\n\t\t\t})\r\n\t\t\theaders = headers.map(h => typeof h == \"object\" ? h.header : h); // convert back to string\r\n\t\t\t\r\n\t\t\t// make sure we have all keys\r\n\t\t\tObject.keys(this._headers).forEach(k => {\r\n\t\t\t\tif (headers.indexOf(k)==-1) {headers.push(k)}\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tthis._rows = this._rows.map((_,i) => headers.map(h => this.cell(i,h)));\r\n\t\t\tthis._headers = {};\r\n\t\t\theaders.forEach((h,i) => this._headers[h]=i)\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get a CSV representation of the Table\r\n\t * @param {object} [config]\r\n\t * @returns {string}\r\n\t */\r\n\ttoCsv(config) {\r\n\t\tconst cell = function(c) {\r\n\t\t\tlet quote = /\"/g;\r\n\t\t\treturn typeof c == \"string\" && (c.indexOf(\",\")>-1 || c.indexOf('\"')>-1) ? '\"'+c.replace(quote,'\\\"')+'\"' : c;\r\n\t\t}\r\n\t\treturn (config && \"noHeaders\" in config && config.noHeaders ? \"\" : this.headers(true).map(h => cell(h)).join(\",\") + \"\\n\") +\r\n\t\t\tthis._rows.map(row => row.map(c => cell(c)).join(\",\")).join(\"\\n\")\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get a TSV representation of the Table\r\n\t * @param {object} [config]\r\n\t * @returns {string}\r\n\t */\r\n\ttoTsv(config) {\r\n\t\treturn config && \"noHeaders\" in config && config.noHeaders ? \"\" : this.headers(true).join(\"\\t\") + \"\\n\" +\r\n\t\t\tthis._rows.map(row => row.join(\"\\t\")).join(\"\\n\");\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set the target's contents to an HTML representation of the Table\r\n\t * @param {(function|string|object)} target\r\n\t * @param {object} [config]\r\n\t * @returns {Table}\r\n\t */\r\n\thtml(target, config) {\r\n\t\tlet html = this.toString(config);\r\n\t\tif (typeof target == \"function\") {\r\n\t\t\ttarget(html)\r\n\t\t} else {\r\n\t\t\tif (typeof target == \"string\") {\r\n\t\t\t\ttarget = document.querySelector(target);\r\n\t\t\t\tif (!target) {\r\n\t\t\t\t\tthrow \"Unable to find specified target: \"+target;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (typeof target == \"object\" && \"innerHTML\" in target) {\r\n\t\t\t\ttarget.innerHTML = html;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get an HTML representation of the Table\r\n\t * @param {object} [config]\r\n\t * @returns {string}\r\n\t */\r\n\ttoString(config={}) {\r\n\t\treturn \"<table class='voyantTable'>\" +\r\n\t\t\t((config && \"caption\" in config && typeof config.caption == \"string\") ?\r\n\t\t\t\t\t\"<caption>\"+config.caption+\"</caption>\" : \"\") +\r\n\t\t\t((config && \"noHeaders\" in config && config.noHeaders) ? \"\" : (\"<thead><tr>\"+this.headers(true).map(c => \"<th>\"+c+\"</th>\").join(\"\")+\"</tr></thead>\"))+\r\n\t\t\t\"<tbody>\"+\r\n\t\t\tthis._rows.map(row => \"<tr>\"+row.map(c => \"<td>\"+(typeof c === \"number\" ? c.toLocaleString() : c)+\"</td>\").join(\"\")+\"</tr>\").join(\"\") +\r\n\t\t\t\"</tbody></table>\";\r\n\t}\r\n\t\r\n\t/**\r\n\t * Show a chart representing the Table\r\n\t * @param {(string|element)} [target]\r\n\t * @param {HighchartsConfig} [config]\r\n\t * @returns {Highcharts.Chart}\r\n\t */\r\n\tchart(target = undefined, config = {}) {\r\n\t\tif (typeof target === 'object') {\r\n\t\t\tconfig = target;\r\n\t\t\ttarget = undefined;\r\n\t\t}\r\n\t\t\r\n\t\tif (target === undefined) {\r\n\t\t\tif (typeof Spyral !== 'undefined' && Spyral.Notebook) {\r\n\t\t\t\ttarget = Spyral.Notebook.getTarget();\r\n\t\t\t} else {\r\n\t\t\t\ttarget = document.createElement(\"div\");\r\n\t\t\t\tdocument.body.appendChild(target);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconfig.chart = config.chart || {};\r\n\t\t\r\n\t\tlet columnsCount = this.columns();\r\n\t\tlet rowsCount = this.rows();\r\n\t\tlet headers = this.headers(config.columns ? config.columns : true);\r\n\t\tlet isHeadersCategories = headers.every(h => isNaN(h));\r\n\r\n\t\tif (isHeadersCategories) {\r\n\t\t\tChart.setDefaultChartType(config, \"column\");\r\n\t\t}\r\n\r\n\t\t// set categories if not set\r\n\t\tconfig.xAxis = config.xAxis || {};\r\n\t\tconfig.xAxis.categories = config.xAxis.categories || headers;\r\n\t\t\r\n\t\t// start filling in series\r\n\t\tconfig.series = config.series || [];\r\n\t\t\r\n\t\t// one row, so let's take series from rows\r\n\t\tif (rowsCount === 1) {\r\n\t\t\tconfig.dataFrom = config.dataFrom || \"rows\";\r\n\t\t} else if (columnsCount === 1) {\r\n\t\t\tconfig.dataFrom = config.dataFrom || \"columns\";\r\n\t\t}\r\n\r\n\t\tif (\"dataFrom\" in config) {\r\n\t\t\tif (config.dataFrom === \"rows\") {\r\n\t\t\t\tconfig.data = {rows:[]}\r\n\t\t\t\tconfig.data.rows.push(headers)\r\n\t\t\t\tconfig.data.rows = config.data.rows.concat(this.rows(true))\r\n\t\t\t} else if (config.dataFrom === \"columns\") {\r\n\t\t\t\tconfig.data = {columns:[]}\r\n\t\t\t\tconfig.data.columns = config.data.columns.concat(this.columns(true))\r\n\t\t\t\tif (config.data.columns.length === headers.length) {\r\n\t\t\t\t\theaders.forEach((h, i) => {\r\n\t\t\t\t\t\tconfig.data.columns[i].splice(0, 0, h)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (\"seriesFrom\" in config) {\r\n\t\t\tif (config.seriesFrom === \"rows\") {\r\n\t\t\t\tthis.rows(config.rows ? config.rows : true).forEach((row, i) => {\r\n\t\t\t\t\tconfig.series[i] = config.series[i] || {};\r\n\t\t\t\t\tconfig.series[i].data = headers.map(h => this.cell(i, h));\r\n\t\t\t\t})\r\n\t\t\t} else if (config.seriesFrom === \"columns\") {\r\n\t\t\t\tthis.columns(config.columns ? config.columns : true).forEach((col, i) => {\r\n\t\t\t\t\tconfig.series[i] = config.series[i] || {};\r\n\t\t\t\t\tconfig.series[i].data = [];\r\n\t\t\t\t\tfor (let r = 0; r < rowsCount; r++) {\r\n\t\t\t\t\t\tconfig.series[i].data.push(this.cell(r, i));\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tdelete config.dataFrom;\r\n\t\tdelete config.seriesFrom;\r\n\r\n\t\treturn Chart.create(target, config);\r\n\t}\r\n\r\n\t/**\r\n\t * Create a new Table\r\n\t * @param {(object|array|string|number)} data\r\n\t * @param {TableConfig} config\r\n\t * @returns {Table}\r\n\t */\r\n\tstatic create(data, config, ...other) {\r\n\t\treturn new Table(data, config, ...other);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Fetch a Table from a source\r\n\t * @param {string|Request} input\r\n\t * @param {object} api\r\n\t * @param {object} config\r\n\t * @returns {Promise}\r\n\t */\r\n\tstatic fetch(input, api, config) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\twindow.fetch(input, api).then(response => {\r\n\t\t\t\tif (!response.ok) {throw new Error(response.status + \" \" + response.statusText);}\r\n\t\t\t\tresponse.text().then(text => {\r\n\t\t\t\t\tresolve(Table.create(text, config || api))\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * Get the count of each unique value in the data\r\n\t * @param {array} data\r\n\t * @returns {object}\r\n\t */\r\n\tstatic counts(data) {\r\n\t\tlet vals = {};\r\n\t\tdata.forEach(v => v in vals ? vals[v]++ : vals[v]=1);\r\n\t\treturn vals;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Compare two values\r\n\t * @param {(number|string)} a\r\n\t * @param {(number|string)} b\r\n\t * @returns {number}\r\n\t */\r\n\tstatic cmp(a, b) {\r\n\t\treturn typeof a == \"string\" && typeof b == \"string\" ? a.localeCompare(b) : a-b;\r\n\t}\r\n\r\n\t/**\r\n\t * Get the sum of the provided values\r\n\t * @param {array} data\r\n\t * @returns {number}\r\n\t */\r\n\tstatic sum(data) {\r\n\t\treturn data.reduce((a,b) => a+b, 0);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the mean of the provided values\r\n\t * @param {array} data\r\n\t * @returns {number}\r\n\t */\r\n\tstatic mean(data) {\r\n\t\treturn Table.sum(data) / data.length;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get rolling mean for the provided values\r\n\t * @param {array} data\r\n\t * @param {number} neighbors\r\n\t * @returns {array}\r\n\t */\r\n\tstatic rollingMean(data, neighbors) {\r\n\t\t// https://stackoverflow.com/questions/41386083/plot-rolling-moving-average-in-d3-js-v4/41388581#41387286\r\n\t\treturn data.map((val, idx, arr) => {\r\n\t\t\tlet start = Math.max(0, idx - neighbors), end = idx + neighbors\r\n\t\t\tlet subset = arr.slice(start, end + 1)\r\n\t\t\tlet sum = subset.reduce((a,b) => a + b)\r\n\t\t\treturn sum / subset.length\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the variance for the provided values\r\n\t * @param {array} data\r\n\t * @returns {number}\r\n\t */\r\n\tstatic variance(data) {\r\n\t\tlet m = Table.mean(data);\r\n\t\treturn Table.mean(data.map(num => Math.pow(num-m, 2)));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the standard deviation for the provided values\r\n\t * @param {array} data\r\n\t * @returns {number}\r\n\t */\r\n\tstatic standardDeviation(data) {\r\n\t\treturn Math.sqrt(Table.variance(data));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the z scores for the provided values\r\n\t * @param {array} data\r\n\t * @returns {array}\r\n\t */\r\n\tstatic zScores(data) {\r\n\t\tlet m = Table.mean(data);\r\n\t\tlet s = Table.standardDeviation(data);\r\n\t\treturn data.map(num => (num-m) / s);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Perform a zip operation of the provided arrays {@link https://en.wikipedia.org/wiki/Convolution_(computer_science)}\r\n\t * @param {array} data\r\n\t * @returns {array}\r\n\t */\r\n\tstatic zip(...data) {\r\n\t\r\n\t\t// we have a single nested array, so let's recall with flattened arguments\r\n\t\tif (data.length==1 && Array.isArray(data) && data.every(d => Array.isArray(d))) {\r\n\t\t\treturn Table.zip.apply(null, ...data);\r\n\t\t}\r\n\t\t\r\n\t\t// allow arrays to be of different lengths\r\n\t\tlet len = Math.max.apply(null, data.map(d => d.length));\r\n\t\treturn new Array(len).fill().map((_,i) => data.map(d => d[i]));\r\n\t}\r\n}\r\n\r\n// this seems like a good balance between a built-in flexible parser and a heavier external parser\r\n// https://lowrey.me/parsing-a-csv-file-in-es6-javascript/\r\nconst regex = /(?!\\s*$)\\s*(?:'([^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*)'|\"([^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*)\"|([^,'\"\\s\\\\]*(?:\\s+[^,'\"\\s\\\\]+)*))\\s*(?:,|$)/g;\r\nfunction parseCsvLine(line) {\r\n\tlet arr = [];\r\n\tline.replace(regex, (m0, m1, m2, m3) => {\r\n\t\tif (m1 !== undefined) {\r\n\t\t\tarr.push(m1.replace(/\\\\'/g, \"'\"));\r\n\t\t} else if (m2 !== undefined) {\r\n\t\t\tarr.push(m2.replace(/\\\\\"/g, \"\\\"\"));\r\n\t\t} else if (m3 !== undefined) {\r\n\t\t\tarr.push(m3);\r\n\t\t}\r\n\t\treturn \"\";\r\n\t});\r\n\tif (/,\\s*$/.test(line)) {arr.push(\"\");}\r\n\treturn arr;\r\n\t\r\n}\r\n\r\nexport default Table\r\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","/**\r\n * A helper for working with the Voyant Notebook app.\r\n * @memberof Spyral\r\n * @namespace\r\n */\r\nclass Notebook {\r\n\t/**\r\n\t * Returns the previous block.\r\n\t * @static\r\n\t * @returns {string}\r\n\t */\r\n\tstatic getPreviousBlock() {\r\n\t\treturn Spyral.Notebook.getBlock(-1);\r\n\t}\r\n\t/**\r\n\t * Returns the next block.\r\n\t * @static\r\n\t * @returns {string}\r\n\t */\r\n\tstatic getNextBlock() {\r\n\t\treturn Spyral.Notebook.getBlock(1);\r\n\t}\r\n\t/**\r\n\t * Returns the current block.\r\n\t * @static\r\n\t * @params {number} [offset] If specified, returns the block whose position is offset from the current block\r\n\t * @returns {string}\r\n\t */\r\n\tstatic getBlock() {\r\n\t\tif (Voyant && Voyant.notebook) {\r\n\t\t\treturn Voyant.notebook.Notebook.currentNotebook.getBlock.apply(Voyant.notebook.Notebook.currentNotebook, arguments)\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @param {*} contents \r\n\t * @param {*} config \r\n\t */\r\n\tstatic show(contents, config) {\r\n\t\tvar contents = Spyral.Util.toString(contents, config);\r\n\t\tif (contents instanceof Promise) {\r\n\t\t\tcontents.then(c => Voyant.notebook.util.Show.show(c))\r\n\t\t} else {\r\n\t\t\tVoyant.notebook.util.Show.show(contents);\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * Returns the target element\r\n\t * @returns {element}\r\n\t */\r\n\tstatic getTarget() {\r\n\t\tif (Voyant && Voyant.notebook && Voyant.notebook.Notebook.currentBlock) {\r\n\t\t\treturn Voyant.notebook.Notebook.currentBlock.results.getEl().dom\r\n\t\t} else {\r\n\t\t\tconst target = document.createElement(\"div\");\r\n\t\t\tdocument.body.appendChild(target);\r\n\t\t\treturn target;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Fetch and return the content of a notebook or a particular cell in a notebook\r\n\t * @param {string} url\r\n\t */\r\n\tstatic async import(url) {\r\n\t\tconst isFullNotebook = url.indexOf('#') === -1;\r\n\t\tconst isAbsoluteUrl = url.indexOf('http') === 0;\r\n\r\n\t\tlet notebookId = '';\r\n\t\tlet cellId = undefined;\r\n\t\tif (isAbsoluteUrl) {\r\n\t\t\tconst urlParts = url.match(/\\/[\\w-]+/g);\r\n\t\t\tif (urlParts !== null) {\r\n\t\t\t\tnotebookId = urlParts[urlParts.length-1].replace('/', '');\r\n\t\t\t} else {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!isFullNotebook) {\r\n\t\t\t\tcellId = url.split('#')[1];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (isFullNotebook) {\r\n\t\t\t\tnotebookId = url;\r\n\t\t\t} else {\r\n\t\t\t\t[notebookId, cellId] = url.split('#');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst json = await Spyral.Load.trombone({\r\n\t\t\ttool: 'notebook.NotebookManager',\r\n\t\t\taction: 'load',\r\n\t\t\tid: notebookId,\r\n\t\t\tnoCache: 1\r\n\t\t})\r\n\r\n\t\tconst notebook = json.notebook.data;\r\n\t\tconst parser = new DOMParser();\r\n\t\tconst htmlDoc = parser.parseFromString(notebook, 'text/html');\r\n\t\t\r\n\t\tlet code = ''\r\n\t\tlet error = undefined\r\n\t\tif (cellId !== undefined) {\r\n\t\t\tconst cell = htmlDoc.querySelector('#'+cellId);\r\n\t\t\tif (cell !== null && cell.classList.contains('notebookcodeeditorwrapper')) {\r\n\t\t\t\tcode = cell.querySelector('pre').textContent\r\n\t\t\t} else {\r\n\t\t\t\terror = 'No code found for cell: '+cellId\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\thtmlDoc.querySelectorAll('section.notebook-editor-wrapper').forEach((cell, i) => {\r\n\t\t\t\tif (cell.classList.contains('notebookcodeeditorwrapper')) {\r\n\t\t\t\t\tcode += cell.querySelector('pre').textContent + \"\\n\"\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t\tif (Ext) {\r\n\t\t\tif (error === undefined) {\r\n\t\t\t\tExt.Msg.show({\r\n\t\t\t\t\ttitle: 'Imported code from: '+url,\r\n\t\t\t\t\tmessage: '<pre>'+code+'</pre>',\r\n\t\t\t\t\tbuttons: Ext.Msg.OK\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tExt.Msg.show({\r\n\t\t\t\t\ttitle: 'Error importing code from: '+url,\r\n\t\t\t\t\tmessage: error,\r\n\t\t\t\t\ticon: Ext.Msg.ERROR,\r\n\t\t\t\t\tbuttons: Ext.Msg.OK\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet result = undefined\r\n\t\ttry {\r\n\t\t\teval.call(window, code);\r\n\t\t} catch(e) {\r\n\t\t\treturn e\r\n\t\t}\r\n\t\tif (result !== undefined) {\r\n\t\t\tconsole.log(result)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport { Notebook }\r\n","/**\r\n * A helper for working with the Voyant Notebook app.\r\n * @memberof Spyral\r\n * @namespace\r\n */\r\nclass Util {\r\n\t/**\r\n\t * Generates a random ID of the specified length.\r\n\t * @static\r\n\t * @param {number} len The length of the ID to generate?\r\n\t * @returns {string}\r\n\t */\r\n\tstatic id(len) {\r\n\t\tlen = len || 8;\r\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript\r\n\t\treturn Math.random().toString(36).substring(2, 2+len) + Math.random().toString(36).substring(2, 2+len)\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @static\r\n\t * @param {*} contents \r\n\t * @param {*} config \r\n\t * @returns {string}\r\n\t */\r\n\tstatic toString(contents, config) {\r\n\t\tif (contents.constructor === Array || contents.constructor===Object) {\r\n\t\t\tcontents = JSON.stringify(contents);\r\n\t\t\tif (contents.length>500) {\r\n\t\t\t\tcontents = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>'+contents.substring(0,500)+\" <a href=''>+</a><div style='display: none'>\"+contents.substring(501)+\"</div>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn contents.toString();\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @static\r\n\t * @param {*} before \r\n\t * @param {*} more \r\n\t * @param {*} after \r\n\t */\r\n\tstatic more(before, more, after) {\r\n\t\treturn before + '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>'+contents.substring(0,500)+\" <a href=''>+</a><div style='display: none'>\"+contents.substring(501)+\"</div>\";\r\n\r\n\t}\r\n}\r\n\r\nexport { Util }\r\n","/**\r\n * A class for storing Notebook metadata\r\n * @memberof Spyral\r\n */\r\nclass Metadata {\r\n\t/**\r\n\t * The Metadata config object\r\n\t * @typedef {object} MetadataConfig\r\n\t * @property {string} title The title of the Corpus\r\n\t * @property {string} author The author of the Corpus\r\n\t * @property {string} description The description of the Corpus\r\n\t * @property {array} keywords The keywords for the Corpus\r\n\t * @property {string} created When the Corpus was created\r\n\t * @property {string} language The language of the Corpus\r\n\t * @property {string} license The license for the Corpus\r\n\t */\r\n\r\n\t/** \r\n\t * The metadata constructor.\r\n\t * @constructor\r\n\t * @param {MetadataConfig} config The metadata config object\r\n\t */\r\n\tconstructor(config) {\r\n\t\t['title', 'author', 'description', 'keywords', 'modified', 'created', 'language', 'license'].forEach(key => {\r\n\t\t\tthis[key] = undefined;\r\n\t\t})\r\n\t\tthis.version = \"0.1\"; // may be changed by config\r\n\t\tif (config instanceof HTMLDocument) {\r\n\t\t\tconfig.querySelectorAll(\"meta\").forEach(function(meta) {\r\n\t\t\t\tvar name =  meta.getAttribute(\"name\");\r\n\t\t\t\tif (name && this.hasOwnProperty(name)) {\r\n\t\t\t\t\tvar content = meta.getAttribute(\"content\");\r\n\t\t\t\t\tif (content) {\r\n\t\t\t\t\t\tthis[name] = content;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t} else {\r\n\t\t\tthis.set(config);\r\n\t\t}\r\n\t\tif (!this.created) {this.setDateNow(\"created\")}\r\n\t}\r\n\r\n\t/**\r\n\t * Set metadata properties.\r\n\t * @param {object} config A config object\r\n\t */\r\n\tset(config) {\r\n\t\tfor (var key in config) {\r\n\t\t\tif (this.hasOwnProperty(key)) {\r\n\t\t\t\tthis[key] = config[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the specified field to the current date and time.\r\n\t * @param {string} field \r\n\t */\r\n\tsetDateNow(field) {\r\n\t\tthis[field] = new Date().toISOString();\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the specified field as a short date.\r\n\t * @param {string} field\r\n\t * @returns {string|undefined}\r\n\t */\r\n\tshortDate(field) {\r\n\t\treturn this[field] ? (new Date(Date.parse(this[field])).toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' })) : undefined;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the fields as a set of HTML meta tags.\r\n\t * @returns {string}\r\n\t */\r\n\tgetHeaders() {\r\n\t\tvar quotes = /\"/g, newlines = /(\\r\\n|\\r|\\n)/g, tags = /<\\/?\\w+.*?>/g,\r\n\t\t\theaders = \"<title>\"+(this.title || \"\").replace(tags,\"\")+\"</title>\\n\"\r\n\t\tfor (var key in this) {\r\n\t\t\tif (this[key]) {\r\n\t\t\t\theaders+='<meta name=\"'+key+'\" content=\"'+this[key].replace(quotes, \"&quot;\").replace(newlines, \" \")+'\">';\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn headers;\r\n\t}\r\n}\r\n\r\nexport { Metadata }\r\n","import {Corpus, Table, Load, Chart} from 'voyant';\r\n\r\nimport {Notebook} from './notebook';\r\nimport {Util} from './util';\r\nimport {Metadata} from './metadata';\r\n\r\n/**\r\n * @namespace Spyral\r\n */\r\nconst Spyral = {\r\n\tNotebook,\r\n\tUtil,\r\n\tMetadata,\r\n\tCorpus,\r\n\tTable,\r\n\tLoad,\r\n\tChart\r\n};\r\n\r\nexport default Spyral;\r\n"],"names":["Load","baseUrl","config","params","url","URL","trombone","all","key","undefined","searchParams","Object","keys","map","encodeURIComponent","join","opt","length","set","method","headers","body","fetch","toString","then","response","ok","json","text","Voyant","util","DetailedError","msg","error","split","shift","details","showMsg","alert","window","console","Error","urlToFetch","err","DOMParser","parseFromString","load","isDocumentsMode","mode","documents","Corpus","id","corpusid","me","Promise","resolve","tool","corpus","data","documentsMetadata","metadata","alias","documentsCount","toLocaleString","lexicalTokensCount","lexicalTypesCount","doc","title","texts","documentTerms","terms","corpusTerms","documentTokens","tokens","limit","noOthers","t","term","query","warn","documentContexts","contexts","corpusCollocates","collocates","documentNgrams","ngrams","corpusNgrams","termCorrelations","correlations","_tool","reject","isTool","obj","test","isConfig","lastArg","arguments","val","defaultAttributes","width","height","style","out","i","forTool","attr","voyantUrl","append","assign","forEach","Array","isArray","summary","setBaseUrl","api","titles","words","phrases","promise","input","name","args","apply","Chart","target","Highcharts","chart","setSeriesData","bar","line","scatter","plotOptions","networkgraph","layoutAlgorithm","enableSimulation","subtitle","credits","xAxis","yAxis","type","series","subArray","setDefaultChartType","Table","other","_rows","_headers","_rowKeyColumnIndex","rows","concat","filter","v","from","every","a","indexOf","String","format","trim","values","parseCsvLine","isNaN","setHeaders","push","Number","hasHeaders","count","freqs","counts","item","addRow","rowSort","b","cmp","columnSort","cell","addRows","rowKeyColumn","columns","rowKeyColum","h","addColumn","row","setRow","ind","create","rowIndex","getRowIndex","d","setCell","column","hasColumn","columnIndex","getColumnIndex","value","overwrite","rowInd","colInd","updateCell","findIndex","r","arr","header","col","colIndex","inds","asObj","zip","len","k","fill","_","fn","Math","min","max","sum","mean","neighbors","means","rollingMean","setColumn","variance","standardDeviation","zScores","localeCompare","sort","asObject","c","reverse","includes","j","quote","replace","noHeaders","html","document","querySelector","innerHTML","caption","Spyral","Notebook","getTarget","createElement","appendChild","columnsCount","rowsCount","isHeadersCategories","categories","dataFrom","splice","seriesFrom","status","statusText","vals","reduce","idx","start","end","subset","slice","m","num","pow","sqrt","s","regex","m0","m1","m2","m3","getBlock","notebook","currentNotebook","contents","Util","Show","show","currentBlock","results","getEl","dom","isFullNotebook","isAbsoluteUrl","notebookId","cellId","urlParts","match","action","noCache","parser","htmlDoc","code","classList","contains","textContent","querySelectorAll","Ext","Msg","message","buttons","OK","icon","ERROR","result","eval","call","log","random","substring","constructor","JSON","stringify","before","more","after","Metadata","version","HTMLDocument","meta","getAttribute","hasOwnProperty","content","created","setDateNow","field","Date","toISOString","parse","toLocaleDateString","year","month","day","quotes","newlines","tags"],"mappings":"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"}