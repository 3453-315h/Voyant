{
    "metadata": {
        "created": 1490646904494,
        "modified": 1490647146926,
        "version": 2
    },
    "blocks": [
        {
            "type": "text",
            "input": [
                "<h1 style=\"text-align: center;\">Creating a Corpus in a Spiral Notebook</h1>\n\n<p>",
                "This notebook will help you create a corpus with Spiral Notebooks (it's part of ",
                "the <a data-tabindex-counter=\"15\" data-tabindex-value=\"none\" href=\"./\" tabindex=",
                "\"-1\">Art of Literary Text Analysis with Spiral&nbsp;Notebooks</a>). In particula",
                "r, we'll look at:</p>\n\n<ul>\n\t<li><a data-tabindex-counter=\"1\" data-tabindex-valu",
                "e=\"none\" href=\"#voyant\" tabindex=\"-1\">creating a corpus in Voyant</a></li>\n\t<li>",
                "<a data-tabindex-counter=\"7\" data-tabindex-value=\"none\" href=\"#strings\" tabindex",
                "=\"-1\">creating a corpus from strings</a></li>\n\t<li><a data-tabindex-counter=\"7\" ",
                "data-tabindex-value=\"none\" href=\"#urls\" tabindex=\"-1\">creating a corpus from one",
                " or more URLs</a></li>\n\t<li><a data-tabindex-counter=\"7\" data-tabindex-value=\"no",
                "ne\" href=\"#upload\" tabindex=\"-1\">creating a corpus from uploaded files</a></li>\n",
                "\t<li><a data-tabindex-counter=\"15\" data-tabindex-value=\"none\" href=\"#next\" tabin",
                "dex=\"-1\">next steps</a></li>\n</ul>\n\n<p>In text analysis (both with and without c",
                "omputers) a <em>corpus</em> refers to a collection (or body) of texts. A corpus ",
                "can be a single poem, a set of plays, all English novels from the nineteenth cen",
                "tury, or even a large collection of tweets. How you define documents within a co",
                "rpus might change depending on your needs. For instance, it might be worth group",
                "ing all documents from a decade into one single document and have ten documents ",
                "for a corpus that spans across a century.</p>\n\n<p>We will consider three ways of",
                " creating a corpus in Spiral, using <a data-tabindex-counter=\"7\" data-tabindex-v",
                "alue=\"none\" href=\"#strings\" tabindex=\"-1\">strings</a>, <a data-tabindex-counter=",
                "\"7\" data-tabindex-value=\"none\" href=\"#urls\" tabindex=\"-1\">URLs</a> and <a data-t",
                "abindex-counter=\"7\" data-tabindex-value=\"none\" href=\"#upload\" tabindex=\"-1\">uplo",
                "ading</a> files. Of these, using URLs is often preferable since it's the most re",
                "liable way for others to access the same data (assuming the contents of the URL ",
                "don't move). But that's not always possible, and sometimes uploading files is ne",
                "cessary. As we will see, it may also be possible to use a data service like <a d",
                "ata-tabindex-counter=\"7\" data-tabindex-value=\"none\" href=\"https://gist.github.co",
                "m/\" tabindex=\"-1\">Gist</a> or <a data-tabindex-counter=\"7\" data-tabindex-value=\"",
                "none\" href=\"https://pastebin.com/\" tabindex=\"-1\">Pastebin</a> to host certain fo",
                "rmats of text at a URL.</p>\n\n<h2><a id=\"voyant\" name=\"voyant\"></a>Creating a Cor",
                "pus in Voyant</h2>\n\n<p>Most of the techniques below describe ways of using Spira",
                "l to create a corpus programmatically, in other words with a bit of code. But of",
                " course it’s also possible to create a corpus using the usual Voyant interface a",
                "nd then to refer to that corpus in a Spiral Notebook (more about that below). Cr",
                "eating a corpus programmatically provides more flexibility (including options th",
                "at may not be available in the user interface) and it also ensures that your Spi",
                "ral Notebook is fully self-contained. The again, using the Voyant interface can ",
                "be faster, simpler, and more familiar.</p>\n\n<p>If you use Voyant to create your ",
                "corpus, you can still describe the process in detail in your Spiral Notebook so ",
                "that others may try to reproduce or adapt your work using the same options.</p>\n",
                "\n<p>When you first open the <a data-tabindex-counter=\"1\" data-tabindex-value=\"no",
                "ne\" href=\"../../\" tabindex=\"-1\">home page of Voyant</a> (be sure to be on the sa",
                "me server as your instance of Spiral) you can begin by clicking on the options i",
                "con.</p>\n\n<p>[front page with options icon framed]</p>\n\n<p>There’s a fairly dizz",
                "ying number of options available (all of which are also available when you creat",
                "e your corpus programmatically) and you’re strongly encouraged to refer to the V",
                "oyant documentation on creating a corpus](../../docs/#!/guide/corpuscreator).</p",
                ">\n\n<p>[input options window]</p>\n\n<p>Once you’ve defined the input options you c",
                "an create the corpus by either filling content in the text box (text or one URLs",
                ", one per line) or by clicking the upload button.</p>\n\n<p>[text box and upload f",
                "ramed]</p>\n\n<p>Once your corpus is loaded (assuming everything worked properly) ",
                "you’ll see the regular Voyant interface, but we’re actually interested in the UR",
                "L bar where part of the address should now contain a valid corpus ID that we can",
                " use in Spiral on the same server.</p>\n\n<p>[screenshot showing corpus id selecte",
                "d]</p>\n\n<p>Copy the corpus ID (only) into the clipboard (it will be different fr",
                "om the one in the screenshot above but it should have a similar format). Now we ",
                "can use that ID in Spiral, try pasting the ID in place below, replacing “austen”",
                " (but be sure to leave the quotes in place).</p>\n\n<h2><a id=\"strings\" name=\"stri",
                "ngs\"></a>Creating a Corpus from Strings</h2>\n\n<p>One very simple way to create a",
                " corpus in Spiral is with a set of one or more strings. This isn't especially pr",
                "actical for longer texts, and there are certain limitations since the strings ne",
                "ed to be defined using either single or double quotes, usually on a single line.",
                "</p>\n\n<p>Here's an example where the string \"Hello Spiral!\" is used directly to ",
                "create a corpus:</p>\n"
            ]
        },
        {
            "type": "code",
            "input": "new Corpus(\"Hello Spiral!\").show();",
            "output": [
                " <div class=\"info\">This corpus has 1 document with 2 <span class=\"info-tip\" data",
                "-qtip=\"every occurrence of every word (like multiple occurrences of &quot;the&qu",
                "ot;) is counted\">total words</span> and 2 <span class=\"info-tip\" data-qtip=\"mult",
                "iple occurrences of words (like &quot;the&quot;) are counted once\">unique word f",
                "orms</span>. Created <span class=\"info-tip\" data-qtip=\"2016-05-07, 15:51:18\">abo",
                "ut 26 days ago</span>.</div>"
            ]
        },
        {
            "type": "text",
            "input": [
                "<p>In Javascript (used by Spiral), a string can be define in several ways, but t",
                "he most common ways are with single or double quotes. In the example&nbsp;below,",
                " we assign the string to a variable name – this is a name that we choose (with c",
                "ertain rules) and that we want to make both short and meaningful. We also use th",
                "e keyword <em><code>var</code></em> which isn't strictly needed, but it's good p",
                "rogramming practice and it declares the <a data-tabindex-counter=\"7\" data-tabind",
                "ex-value=\"none\" href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Refer",
                "ence/Statements/var\" tabindex=\"-1\">scope</a> (where our variable is recognized).",
                "</p>\n\n<p>This is functionally equivalent to the previous code (note the use of /",
                "/ that indicates a comment in the code that's ignored by the computer).</p>\n"
            ]
        },
        {
            "type": "code",
            "input": [
                "var greeting = \"Hello Spiral!\"; // declare a string into a variable",
                "new Corpus(greeting).show(); // create a corpus with our variable"
            ],
            "output": [
                " <div class=\"info\">This corpus has 1 document with 2 <span class=\"info-tip\" data",
                "-qtip=\"every occurrence of every word (like multiple occurrences of &quot;the&qu",
                "ot;) is counted\">total words</span> and 2 <span class=\"info-tip\" data-qtip=\"mult",
                "iple occurrences of words (like &quot;the&quot;) are counted once\">unique word f",
                "orms</span>. Created now.</div>"
            ]
        },
        {
            "type": "text",
            "input": [
                "<p>We can also create a corpus with two or more strings by using an array argume",
                "nt. An array is an ordered list of variables, in this case we have strings. Just",
                " as with strings, there are multiple ways of creating an array, but one of the m",
                "ost common ways is by using square brackets.</p>\n"
            ]
        },
        {
            "type": "code",
            "input": [
                "var greeting = \"Hello Spiral!\"; // declare a first string",
                "var reply = \"Well hello there!\"; // declare a second string",
                "var texts = [greeting, reply]; // combine the two strings into an array",
                "new Corpus(texts).show(); // same as new Corpus([greeting, reply]).show();",
                ""
            ],
            "output": [
                " <div class=\"info\">This corpus has 2 documents with 5 <span class=\"info-tip\" dat",
                "a-qtip=\"every occurrence of every word (like multiple occurrences of &quot;the&q",
                "uot;) is counted\">total words</span> and 4 <span class=\"info-tip\" data-qtip=\"mul",
                "tiple occurrences of words (like &quot;the&quot;) are counted once\">unique word ",
                "forms</span>. Created now.</div>"
            ]
        },
        {
            "type": "text",
            "input": [
                "<p>Again, it's fairly impractical to work with strings of any length in Javascri",
                "pt. There are some techniques for multiline strings, but it's safest to combine ",
                "strings together with the plus sign (concatenation). In the example below we als",
                "o demonstrate escaping the double quote that's part of the string (but that's al",
                "so used to define the start and end of the string.</p>\n"
            ]
        },
        {
            "type": "code",
            "input": [
                "var greeting = \"And then she asked \\\"What do \"+ // add two string with plus sign",
                "    \" you mean?\\\" in that voice.\"; // note the use of \\\" to escape the double quote"
            ],
            "output": " "
        },
        {
            "type": "text",
            "input": [
                "<p>One situation where creating a corpus from a string can be useful is when we ",
                "want to process a text and then feed it back in. The code snippet below demonstr",
                "ates a few techniques that we won't explain in detail yet, but it's just a demon",
                "stration of what's possible:</p>\n"
            ]
        },
        {
            "type": "code",
            "input": [
                "// create a corpus with a URL (hermeneuti.ca) and get the plain text",
                "new Corpus(\"http://hermeneuti.ca\").getPlainText().then(function(text) {",
                "    // modify the plain text to replace \"the\" by \"*THE*\"",
                "    text = text.replace(/\\bthe\\b/g, \"*THE*\");",
                "    // create a new corpus (with a string) and embed the reader tool",
                "    new Corpus(text).embed('reader');",
                "})"
            ],
            "output": [
                " <div class=\"info\"><iframe style=\"width: 90%; height: 400px\" src=\"/voyant/tool/R",
                "eader/?minimal=true&amp;corpus=6482853c23e49fc7eea75578b98b316e&amp;debug=true\" ",
                "data-tabindex-value=\"none\" tabindex=\"-1\" data-tabindex-counter=\"2\"></iframe></di",
                "v>"
            ]
        },
        {
            "type": "text",
            "input": [
                "<h2><a id=\"urls\" name=\"urls\"></a>Creating a Corpus from URLs</h2>\n\n<p>The prefer",
                "red way of creating a corpus in Spiral is to use URLs. The benefits are that the",
                " source texts&nbsp;can be accessed by other people and the corpus can be more ea",
                "sily re-created if ever it's lost or damaged. The disadvantages are that the con",
                "tent of URLs can change or disappear.sudo apt-get install openjdk-8-jre-headless",
                "</p>\n\n<p>&nbsp;</p>\n\n<p>&nbsp;</p>\n"
            ]
        },
        {
            "type": "code",
            "input": [
                "new Corpus(\"http://hermeneuti.ca\").getText().then(function(text) {",
                "    show(text.trim().replace(/</g, \"&lt;\")); // show the end ",
                "});"
            ],
            "output": [
                " <div class=\"info\">&lt;body class=\"html front not-logged-in no-sidebars page-nod",
                "e page-node- page-node-3 node-type-page\"&gt;\n         \n         &lt;p id=\"skip-l",
                "ink\"&gt;\n            &lt;a shape=\"rect\" class=\"element-invisible element-focusab",
                "le\" href=\"#main-menu\"&gt;Jump to navigation&lt;/a&gt;\n            \n         &lt;",
                "/p&gt;\n         \n         \n         &lt;div id=\"page\"&gt;\n            \n         ",
                "   \n            \n            &lt;a shape=\"rect\" class=\"header__logo\" id=\"logo\" h",
                "ref=\"/\" title=\"Home\" rel=\"home\"&gt;&lt;img class=\"header__logo-image\" src=\"http:",
                "//hermeneuti.ca/sites/hermeneuti.ca/files/voyant-logo_0.png\" alt=\"Home\" /&gt;&lt",
                ";/a&gt;\n            \n            \n            &lt;div class=\"header__name-and-sl",
                "ogan\" id=\"name-and-slogan\"&gt;\n               \n               &lt;h1 class=\"head",
                "er__site-name\" id=\"site-name\"&gt;\n                  &lt;a shape=\"rect\" class=\"he",
                "ader__site-link\" href=\"/\" title=\"Home\" rel=\"home\"&gt;&lt;span&gt;Hermeneuti.ca&l",
                "t;/span&gt;&lt;/a&gt;\n                  \n               &lt;/h1&gt;\n            ",
                "   \n               \n               &lt;div class=\"header__site-slogan\" id=\"site-",
                "slogan\"&gt;Computer-Assisted Interpretation in the Humanities&lt;/div&gt;\n      ",
                "         \n            &lt;/div&gt;\n            \n            \n            \n      ",
                "      \n            \n            \n            &lt;div id=\"main\"&gt;\n             ",
                "  \n               \n               &lt;div class=\"column\" id=\"content\" role=\"main",
                "\"&gt;\n                  &lt;a shape=\"rect\" id=\"main-content\"&gt;&lt;/a&gt;\n     ",
                "             \n                  &lt;h1 class=\"page__title title\" id=\"page-title\"",
                "&gt;Home&lt;/h1&gt;\n                  \n                  \n                  \n   ",
                "               \n                  \n                  \n                  &lt;span",
                " class=\"rdf-meta element-hidden\" property=\"dc:title\" content=\"Home\"&gt;&lt;/span",
                "&gt;&lt;span class=\"rdf-meta element-hidden\" property=\"sioc:num_replies\" content",
                "=\"0\" datatype=\"xsd:integer\"&gt;&lt;/span&gt;\n                  \n                ",
                "  \n                  \n                  \n                  &lt;div class=\"field ",
                "field-name-body field-type-text-with-summary field-label-hidden\"&gt;\n           ",
                "          &lt;div class=\"field-items\"&gt;\n                        &lt;div class=",
                "\"field-item even\" property=\"content:encoded\"&gt;\n                           &lt;",
                "p&gt;&lt;/p&gt;\n                           \n                           &lt;p&gt;",
                "Hermeneuti.ca is a collaborative project by &lt;a shape=\"rect\" href=\"http://stef",
                "ansinclair.name/\"&gt;Stéfan Sinclair&lt;/a&gt; &amp; &lt;a shape=\"rect\" href=\"ht",
                "tp://geoffreyrockwell.com/\"&gt;Geoffrey Rockwell&lt;/a&gt; to think through comp",
                "uter-assisted&nbsp;text analysis for humanists.&nbsp;This site is a compantion\n ",
                "                             to the book &lt;a shape=\"rect\" href=\"http://mitpres",
                "s.mit.edu/books/hermeneutica\"&gt;&lt;em&gt;Hermeneutica&lt;/em&gt;&lt;/a&gt;&nbs",
                "p;book (MIT, 2016) and&nbsp;&lt;a shape=\"rect\" href=\"http://voyant-tools.org\"&gt",
                ";Voyant Tools&lt;/a&gt;. This site&nbsp;includes online versions of the&nbsp;pra",
                "ctical&nbsp;&lt;a shape=\"rect\" href=\"/interludes\"&gt;interlude chapters&lt;/a&gt",
                "; from the book with dynamic panels from Voyant.&nbsp;You may also be interested",
                " in visiting&nbsp;&lt;a shape=\"rect\" href=\"http://tapor.ca\"&gt;TAPoR&lt;/a&gt;&n",
                "bsp;and the&nbsp;&lt;a shape=\"rect\" href=\"http://methodi.ca\"&gt;Methods Commons&",
                "lt;/a&gt;&nbsp;(in development).\n                           &lt;/p&gt;\n         ",
                "                  \n                           &lt;table&gt;\n                    ",
                "          &lt;tbody&gt;\n                                 &lt;tr&gt;\n            ",
                "                        &lt;td colspan=\"1\" rowspan=\"1\" valign=\"top\" style=\"width",
                ": 50%; padding: 5px;\"&gt;\n                                       \n              ",
                "                         &lt;h2&gt;Table of Contents&lt;/h2&gt;\n                ",
                "                       \n                                       &lt;p&gt;Here is ",
                "the Table of Contents of &lt;em&gt;Hermeneutica.&nbsp;&lt;/em&gt;The linked chap",
                "ters, called interludes, are available in interactive form here. We\n            ",
                "                              also have additional resources below.\n            ",
                "                           &lt;/p&gt;\n                                       \n  ",
                "                                     &lt;hr /&gt;\n                              ",
                "         &lt;ol&gt;\n                                          &lt;li&gt;Introduc",
                "tion: Correcting Method&lt;/li&gt;\n                                          &lt",
                ";li&gt;The Measured Words: How Computers Analyze Texts&lt;/li&gt;\n              ",
                "                            &lt;li&gt;From the Concordance to Ubiquitous Analyti",
                "cs&lt;/li&gt;\n                                          &lt;li&gt;&lt;a shape=\"r",
                "ect\" href=\"/swallow-flies\"&gt;The Swallow Flies Swiftly Through: An Analysis of ",
                "Humanist&lt;/a&gt; (First Interlude)\n                                          &",
                "lt;/li&gt;\n                                          &lt;li&gt;There’s a Toy in ",
                "My Essay: Problems with the Rhetoric of Text Analysis&lt;/li&gt;\n               ",
                "                           &lt;li&gt;&lt;a shape=\"rect\" href=\"/now-analyze-that\"",
                "&gt;Now Analyze That! Comparing Two Speeches on Race&lt;/a&gt; (Second Interlude",
                ")\n                                          &lt;/li&gt;\n                        ",
                "                  &lt;li&gt;False Positives: Opportunities and Dangers in Big-Da",
                "ta Text Analysis&lt;/li&gt;\n                                          &lt;li&gt;",
                "&lt;a shape=\"rect\" href=\"/name-games\"&gt;Name Games: Analyzing Game Studies&lt;/",
                "a&gt; (Third Interlude)\n                                          &lt;/li&gt;\n  ",
                "                                        &lt;li&gt;A Model Theory: Thinking Throu",
                "gh Hermeneutical Things&lt;/li&gt;\n                                          &lt",
                ";li&gt;&lt;a shape=\"rect\" href=\"/artifice-dialogue\"&gt;The Artifice of Dialogue:",
                " Thinking Through Scepticism in Hume’s Dialogues&lt;/a&gt; (Fourth Interlude)\n  ",
                "                                        &lt;/li&gt;\n                            ",
                "              &lt;li&gt;Agile Hermeneutics and the Conversation of the Humanitie",
                "s&lt;/li&gt;\n                                       &lt;/ol&gt;\n                ",
                "                       &lt;hr /&gt;\n                                       &lt;h",
                "3&gt;Other&lt;/h3&gt;\n                                       \n                  ",
                "                     &lt;ol start=\"12\"&gt;\n                                     ",
                "     &lt;li&gt;&lt;a shape=\"rect\" href=\"/finding-preparing-text\"&gt;Finding and ",
                "Preparing Text&lt;/a&gt; is a short guide on preparing texts for analysis\n      ",
                "                                    &lt;/li&gt;\n                                ",
                "          &lt;li&gt;&lt;a shape=\"rect\" href=\"/resources\"&gt;Resources&lt;/a&gt; ",
                "is a collection of annotated links\n                                          &lt",
                ";/li&gt;\n                                          &lt;li&gt;&lt;a shape=\"rect\" ",
                "href=\"http://hermeneuti.ca/node/16\"&gt;Voyant Facts&lt;/a&gt;&nbsp;provides info",
                "rmation about Voyant Tools\n                                          &lt;/li&gt;",
                "\n                                          &lt;li&gt;&lt;a shape=\"rect\" href=\"ht",
                "tp://hermeneuti.ca/intro-workshop\"&gt;Introduction to Voyant Tools&lt;/a&gt; is ",
                "the script for an introductory workshop\n                                        ",
                "  &lt;/li&gt;\n                                       &lt;/ol&gt;\n               ",
                "                     &lt;/td&gt;\n                                    &lt;td cols",
                "pan=\"1\" rowspan=\"1\" valign=\"top\" style=\"padding-left: 2em\"&gt;\n                 ",
                "                      \n                                       &lt;p&gt;&nbsp;&lt",
                ";/p&gt;\n                                       \n                                ",
                "       &lt;p&gt;&lt;a shape=\"rect\" href=\"http://mitpress.mit.edu/books/hermeneut",
                "ica\"&gt;&lt;img alt=\"Hermeneutica Book Image\" src=\"http://hermeneuti.ca/sites/he",
                "rmeneuti.ca/files/9780262034357.jpg\" style=\"max-height: 600px\" /&gt;&lt;/a&gt;&l",
                "t;/p&gt;\n                                       \n                               ",
                "        &lt;div&gt;&lt;i&gt;Hermeneutica: Computer-Assisted Interpretation in th",
                "e Humanities&lt;/i&gt; (available from&nbsp;&lt;a shape=\"rect\" href=\"https://mit",
                "press.mit.edu/books/hermeneutica\"&gt;MIT Press&lt;/a&gt;, &lt;a shape=\"rect\" hre",
                "f=\"https://www.amazon.ca/dp/0262034352\"&gt;Amazon&lt;/a&gt;).\n                  ",
                "                     &lt;/div&gt;\n                                       \n      ",
                "                              &lt;/td&gt;\n                                 &lt;/",
                "tr&gt;\n                              &lt;/tbody&gt;\n                           &",
                "lt;/table&gt;\n                        &lt;/div&gt;\n                     &lt;/div",
                "&gt;\n                  &lt;/div&gt;  \n                  &lt;div class=\"book-navi",
                "gation\" id=\"book-navigation-3\"&gt;\n                     \n                     &l",
                "t;ul class=\"menu\"&gt;\n                        &lt;li class=\"menu__item is-collap",
                "sed first collapsed\"&gt;&lt;a shape=\"rect\" class=\"menu__link\" href=\"/node/9\"&gt;",
                "Interludes&lt;/a&gt;&lt;/li&gt;\n                        &lt;li class=\"menu__item",
                " is-leaf leaf\"&gt;&lt;a shape=\"rect\" class=\"menu__link\" href=\"/finding-preparing",
                "-text\"&gt;Finding and Preparing Text&lt;/a&gt;&lt;/li&gt;\n                      ",
                "  &lt;li class=\"menu__item is-leaf leaf\"&gt;&lt;a shape=\"rect\" class=\"menu__link",
                "\" href=\"/guestbook\"&gt;Guest Book&lt;/a&gt;&lt;/li&gt;\n                        &",
                "lt;li class=\"menu__item is-leaf last leaf\"&gt;&lt;a shape=\"rect\" class=\"menu__li",
                "nk\" href=\"/resources\"&gt;Resources&lt;/a&gt;&lt;/li&gt;\n                     &lt",
                ";/ul&gt;\n                     \n                     &lt;div class=\"page-links cl",
                "earfix\"&gt;\n                        &lt;a shape=\"rect\" class=\"page-next\" href=\"/",
                "node/9\" title=\"Go to next page\"&gt;Interludes ›&lt;/a&gt;\n                      ",
                "  \n                     &lt;/div&gt;\n                     \n                     ",
                "\n                  &lt;/div&gt;\n                  \n                  \n          ",
                "        \n                  \n                  \n               &lt;/div&gt;\n     ",
                "          \n               \n               &lt;div id=\"navigation\"&gt;\n          ",
                "        \n                  \n                  \n                  \n              ",
                " &lt;/div&gt;\n               \n               \n               \n               \n  ",
                "          &lt;/div&gt;\n            \n            \n            \n         &lt;/div&",
                "gt;</div>"
            ]
        }
    ]
}