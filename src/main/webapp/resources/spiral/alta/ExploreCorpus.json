{
    "metadata": {
        "created": 1491343622399,
        "modified": 1491344209499,
        "version": 2
    },
    "blocks": [
        {
            "type": "text",
            "input": [
                "<h1 style=\"text-align: center;\">Exploring a Corpus in a Spiral Notebook</h1>\n\n<p",
                ">This notebook will help you explore a corpus with Spiral Notebooks (it's part o",
                "f the&nbsp;<a data-tabindex-counter=\"29\" data-tabindex-value=\"none\" href=\"./\" ta",
                "bindex=\"-1\">Art of Literary Text Analysis with Spiral&nbsp;Notebooks</a>). In pa",
                "rticular, we'll look at:</p>\n\n<ul>\n\t<li><a data-tabindex-counter=\"5\" data-tabind",
                "ex-value=\"none\" href=\"#reuse\" tabindex=\"-1\">creating a reusable corpus</a></li>\n",
                "\t<li><a href=\"#freqs\" data-tabindex-value=\"none\" tabindex=\"-1\" data-tabindex-cou",
                "nter=\"4\">exploring term frequencies</a></li>\n\t<li><a href=\"#distributions\" data-",
                "tabindex-value=\"none\" tabindex=\"-1\" data-tabindex-counter=\"4\">exploring term dis",
                "tributions</a></li>\n</ul>\n\n<h2><a id=\"reuse\" name=\"reuse\"></a>Crea<span style=\"-",
                "webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">t</span>ing a Reusable Corpus</h2",
                ">\n\n<p>Most of the code examples until now have created a transient corpus, in ot",
                "her words one that is created and used immediately, but not reused. In what foll",
                "ows we will show how we can create a corpus and reuse it elsewhere in the Spiral",
                " notebook.</p>\n\n<p>It's useful to understand that when we create a corpus we act",
                "ually get a promise for a corpus that will be delivered later. This is the natur",
                "e of some Javascript code that runs <a data-tabindex-counter=\"5\" data-tabindex-v",
                "alue=\"none\" href=\"https://en.wikipedia.org/wiki/Ajax_(programming)\" tabindex=\"-1",
                "\" target=\"_blank\">asynchronously</a>, in other words where things happen at diff",
                "erent times. In order to deal with this situation we declare a global variable (",
                "that will be available throughout the notebook, we create the corpus, and once i",
                "t's ready we assign the corpus to our declared variable.</p>\n\n<p>Here's a (relat",
                "ively) simple example:</p>\n\n<blockquote>\n<pre>var helloworld;\n<span style=\"backg",
                "round-color:#F0F8FF;\">new Corpus(\"Hello world!\")</span><span style=\"background-c",
                "olor:#E6E6FA;\">.then(<span style=\"color:#FF0000;\">function(corpus) {\n&nbsp;   he",
                "lloworld = corpus;\n}</span>)</span>;\n</pre>\n</blockquote>\n\n<p>This syntax may se",
                "em a bit difficult to understand, but for now you can copy and paste from exampl",
                "es. Essentially we are chaining from the new Corpus( … ) with a function called ",
                "<span style=\"color:#FF0000;\"><code>then</code></span> which receives as an argum",
                "ent an <a data-tabindex-counter=\"5\" data-tabindex-value=\"none\" href=\"https://en.",
                "wikibooks.org/wiki/JavaScript/Anonymous_functions\" tabindex=\"-1\">anonymous funct",
                "ion</a>: <code><span style=\"color:#FF0000;\">function(corpus) { … }</span></code>",
                ". Yep, a bit complicated, but asynchronous Javascript is like that.</p>\n\n<p>We c",
                "an combine the code from the previous notebook <a data-tabindex-counter=\"5\" data",
                "-tabindex-value=\"none\" href=\"CreateCorpus#text\" tabindex=\"-1\" target=\"_blank\">Cr",
                "eating a Corpus with Plain Text</a> with this new concept of creating a reusable",
                " corpus.</p>\n"
            ]
        },
        {
            "type": "code",
            "input": [
                "var goldbug; // declare our global variable for the corpus",
                "new Corpus(\"https://gist.githubusercontent.com/sgsinclair/84c9da05e9e142af30779cc91440e8c1/raw/goldbug.txt\", {",
                "    inputRemoveUntil: 'THE GOLD-BUG',",
                "    inputRemoveFrom: 'FOUR BEASTS IN ONE'",
                "}).then(function(corpus) {",
                "   goldbug = corpus; // assign the corpus (once ready) to the variable",
                "   goldbug.show();",
                "});"
            ],
            "output": [
                " <div class=\"info\">This corpus has 1 document with 13,731 <span class=\"info-tip\"",
                " data-qtip=\"every occurrence of every word (like multiple occurrences of &quot;t",
                "he&quot;) is counted\">total words</span> and 2,756 <span class=\"info-tip\" data-q",
                "tip=\"multiple occurrences of words (like &quot;the&quot;) are counted once\">uniq",
                "ue word forms</span>. Created <span class=\"info-tip\" data-qtip=\"2017-04-04, 18:5",
                "0:24\">about 17 hours ago</span>.</div>"
            ]
        },
        {
            "type": "text",
            "input": [
                "<p>By running this code in its own <a data-tabindex-counter=\"5\" data-tabindex-va",
                "lue=\"none\" href=\"GettingStarted#code\" tabindex=\"-1\" target=\"_blank\">code block</",
                "a> we ensure that subsequent code blocks will have access to our new <code>goldb",
                "ug</code> corpus variable. (But don't forget that this first code block needs to",
                " be executed before subsequent blocks have access to the variable – it may help ",
                "to start by running all code blocks.) In the code block below we reuse the goldb",
                "ug corpus to show a summary of the corpus.</p>\n"
            ]
        },
        {
            "type": "code",
            "input": "goldbug.embed('summary'); // we are reusing the goldbug corpus",
            "output": [
                " <div class=\"info\"><iframe style=\"width: 90%; height: 400px\" src=\"/voyant/tool/S",
                "ummary/?minimal=true&amp;corpus=38683ce0ee7dc5f581735ed14938c679&amp;debug=true\"",
                " data-tabindex-value=\"none\" tabindex=\"-1\" data-tabindex-counter=\"3\"></iframe></d",
                "iv>"
            ]
        },
        {
            "type": "text",
            "input": [
                "<h2><a id=\"freqs\" name=\"freqs\"></a>Exploring Term Frequencies</h2>\n\n<p>So, we ha",
                "ve a reusable corpus in Spiral, now what? Sometimes we come to a corpus with pre",
                "-existing questions, sometimes we just want to start exploring. We can begin wit",
                "h simple term frequencies, what are the most frequent terms in the document? To ",
                "start exploring, we can use the Cirrus word cloud visualization – we can use the",
                " <a href=\"../../docs/#!/api/Corpus-method-embed\" target=\"_blank\" data-tabindex-v",
                "alue=\"none\" tabindex=\"-1\" data-tabindex-counter=\"4\">embed</a> function of our <a",
                " href=\"../../docs/#!/api/Corpus\" target=\"_blank\" data-tabindex-value=\"none\" tabi",
                "ndex=\"-1\" data-tabindex-counter=\"4\">corpus</a> and specify the <a href=\"../../do",
                "cs/#!/guide/cirrus\" target=\"_blank\" data-tabindex-value=\"none\" tabindex=\"-1\" dat",
                "a-tabindex-counter=\"4\">Cirrus</a> tool to use.</p>\n"
            ]
        },
        {
            "type": "code",
            "input": "goldbug.embed('cirrus');",
            "output": [
                " <div class=\"info\"><iframe style=\"width: 90%; height: 400px\" src=\"/voyant/tool/C",
                "irrus/?minimal=true&amp;corpus=38683ce0ee7dc5f581735ed14938c679&amp;debug=true\" ",
                "data-tabindex-value=\"none\" tabindex=\"-1\" data-tabindex-counter=\"3\"></iframe></di",
                "v>"
            ]
        },
        {
            "type": "text",
            "input": [
                "<p>The layout of the terms will change, but the relative size of terms will expr",
                "ess frequency in the document. We can notice a few things immediately that are f",
                "airly distinctive of prose literature, for instance the high frequency of the te",
                "rm \"said\" (often used to report speeches by characters). Another typical charact",
                "eristic of literature is the high frequency of character names (\"legrand\", \"jupi",
                "ter\",&nbsp;\"massa\",&nbsp;etc.). More noticeable here are other terms such as \"bu",
                "g\", \"parchment\" and \"skull\".</p>\n\n<p>The word cloud is a very useful way to get ",
                "a quick overview of high frequency terms, but it's also fairly limited. For inst",
                "ance, we are limited to the high frequency terms, we can't search for other term",
                "s, and we get no other information than term frequency. To dig a bit deeper we c",
                "an invoke&nbsp;the <a href=\"../../docs/#!/guide/corpusterms\" target=\"_blank\" dat",
                "a-tabindex-value=\"none\" tabindex=\"-1\" data-tabindex-counter=\"4\">Corpus Terms</a>",
                " tool.</p>\n"
            ]
        },
        {
            "type": "code",
            "input": "goldbug.embed('corpusterms');",
            "output": [
                " <div class=\"info\"><iframe style=\"width: 90%; height: 400px\" src=\"/voyant/tool/C",
                "orpusTerms/?minimal=true&amp;corpus=38683ce0ee7dc5f581735ed14938c679&amp;debug=t",
                "rue\" data-tabindex-value=\"none\" tabindex=\"-1\" data-tabindex-counter=\"3\"></iframe",
                "></div>"
            ]
        },
        {
            "type": "text",
            "input": [
                "<p>The top frequency terms are indicated here (albeit in a less visually interes",
                "ting way that with Cirrus), but we also have access to additional functionality ",
                "available. Because this is a corpus with just one document, some of the columns ",
                "are less relevant (like Trend, which shows the distribution of terms across seve",
                "ral documents). However, we do have the possibility of scrolling down the list t",
                "o see additional terms.</p>\n\n<p>One thing we might notice is that there's an ent",
                "ry for \"jupiter\" (one of the character names that appears capitalized in the tex",
                "t), but also entries for \"jupiter's\" and \"jup\" (and possibly others). In fact, w",
                "e can ask what terms appear that have the prefix \"jup*\".</p>\n\n<p>In the code bel",
                "ow we demonstrate the syntax for providing a query to a requested tool – the gen",
                "eral form is something like this (where the options are defined by&nbsp;<a data-",
                "tabindex-counter=\"4\" data-tabindex-value=\"none\" href=\"../../docs/#!/api/Voyant.p",
                "anel.CorpusTerms\" tabindex=\"-1\">Corpus Terms</a>):</p>\n\n<blockquote>\n<pre>corpus",
                ".embed('toolname', { options } );</pre>\n</blockquote>\n\n<p>The syntax of the actu",
                "al query is defined by the <a data-tabindex-counter=\"4\" data-tabindex-value=\"non",
                "e\" href=\"../../docs/#!/guide/search\" tabindex=\"-1\" target=\"_blank\">search box</a",
                "> (you can hover over the question mark in the search box for more information).",
                "</p>\n"
            ]
        },
        {
            "type": "code",
            "input": "goldbug.embed('corpusterms', {query: \"^jup*,jup*\"});",
            "output": [
                " <div class=\"info\"><iframe style=\"width: 90%; height: 400px\" src=\"/voyant/tool/C",
                "orpusTerms/?minimal=true&amp;query=%5Ejup*%2Cjup*&amp;corpus=38683ce0ee7dc5f5817",
                "35ed14938c679&amp;debug=true\" data-tabindex-value=\"none\" tabindex=\"-1\" data-tabi",
                "ndex-counter=\"3\"></iframe></div>"
            ]
        },
        {
            "type": "text",
            "input": [
                "<p>The results can be broken down into the two query parts (separated by a comma",
                "):</p>\n\n<ul>\n\t<li><code>jup*</code>: the total frequency of all terms that start",
                " with jup</li>\n\t<li><code>^jup*</code>: the frequency of each term that starts w",
                "ith jup (\"jupiter\", \"jupiter's\" and \"jup\")</li>\n</ul>\n\n<h2><a id=\"distributions\"",
                " name=\"distributions\"></a>Exploring Term Distributions</h2>\n\n<p>Beyond term freq",
                "uencies it can be interesting to explore how evenly terms are distributed in a c",
                "orpus or in a document – is a given term more present at the beginning, middle o",
                "r end? As with term frequencies, we have access to a convenient visualization fo",
                "r term distributions called <a href=\"../../docs/#!/guide/trends\" data-tabindex-v",
                "alue=\"none\" tabindex=\"-1\" data-tabindex-counter=\"3\">Trends</a>. Since our corpus",
                " is comprised of a single document, Trends will show term distributions within t",
                "hat document (as opposed to term distributions across several documents in a cor",
                "pus).</p>\n"
            ]
        },
        {
            "type": "code",
            "input": "goldbug.embed('Trends');",
            "output": [
                " <div class=\"info\"><iframe style=\"width: 90%; height: 400px\" src=\"/voyant/tool/T",
                "rends/?minimal=true&amp;corpus=38683ce0ee7dc5f581735ed14938c679&amp;debug=true\" ",
                "data-tabindex-value=\"none\" tabindex=\"-1\" data-tabindex-counter=\"3\"></iframe></di",
                "v>"
            ]
        },
        {
            "type": "text",
            "input": [
                "<p>By default Trends will show the distribution&nbsp;of the top 5 terms in our d",
                "ocument. Because we are in single document mode, we see the raw frequencies for ",
                "10 equal segments of text: Spiral divides the text into 10 equal parts and then ",
                "counts frequencies in each part. We can use the \"Segments\" slider to get a finer",
                "-tune look at distribution, dividing the document into 20 segments, for instance",
                ".</p>\n\n<p>We can click on the terms in the top legend to toggle them on and off.",
                " If click (hide) \"bug\", \"massa\", and \"said\" we can see more clearly that the cha",
                "racter names \"legrand\" and \"jupiter\" are used during the first half of the docum",
                "ent much more than in the second half – something worth exploring perhaps. We ca",
                "n produce a more specific graph in a way similar to what we did for Corpus Terms",
                ", though this time we're using configuration options for <a href=\"../../docs/#!/",
                "api/Voyant.panel.Trends\" target=\"_blank\" data-tabindex-value=\"none\" tabindex=\"-1",
                "\" data-tabindex-counter=\"3\">Trends</a>.</p>\n\n<p>&nbsp;</p>\n"
            ]
        },
        {
            "type": "code",
            "input": "goldbug.embed('Trends', {query: \"jupiter,legrand\"});",
            "output": [
                " <div class=\"info\"><iframe style=\"width: 90%; height: 400px\" src=\"/voyant/tool/T",
                "rends/?minimal=true&amp;query=jupiter%2Clegrand&amp;corpus=38683ce0ee7dc5f581735",
                "ed14938c679&amp;debug=true\" data-tabindex-value=\"none\" tabindex=\"-1\" data-tabind",
                "ex-counter=\"3\"></iframe></div>"
            ]
        },
        {
            "type": "text",
            "input": "(Click here to edit.)"
        },
        {
            "type": "text",
            "input": [
                "<p>Another useful visualization for distribution is TermsRadio since it shows mo",
                "re terms than the Trends tool. The TermsRadio is intended to scroll across the d",
                "istributions, but we can request to see all of the bins at once using the bins a",
                "nd visibleBins parameters.</p>\n"
            ]
        },
        {
            "type": "code",
            "input": "goldbug.embed('TermsRadio', {bins: 10, visibleBins: 10});",
            "output": [
                " <div class=\"info\"><iframe style=\"width: 90%; height: 400px\" src=\"/voyant/tool/T",
                "ermsRadio/?minimal=true&amp;bins=10&amp;visibleBins=10&amp;corpus=38683ce0ee7dc5",
                "f581735ed14938c679&amp;debug=true\" data-tabindex-value=\"none\" tabindex=\"-1\" data",
                "-tabindex-counter=\"1\"></iframe></div>"
            ]
        }
    ]
}